(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // SignalCalendar
  getInitialState: function() {
    return {
      reports : []
    }
  },

  getSignalReport: function() {
    var _this = this;
    qry = {
      where : JSON.stringify({profile:{
          __type:'Pointer',
          className:'ProspectProfile',
          objectId:this.props.currentProfile.objectId
      }}),
      order:'-createdAt',
      limit:10
    }

    Parse.get('SignalReport', qry).done(function(res) {
      console.log(res)
      _this.setState({reports: res.results})
    })
  },

  componentDidMount: function() {
    this.getSignalReport()
  },

  componentDidUpdate: function() {
    //this.getSignalReport()
  },

  render: function() {
    reports = []
    for(i=0;i< this.props.reports.length; i++) {
      if(this.props.reports[i]) {
          reports.push(SignalReportRow({setCurrentReport: this.setCurrentReport, 
                                    prospectSignalReport: this.prospectSignalReport, 
                                        setCurrentView: this.setCurrentView, 
                                        report: this.props.reports[i]}))
      }
    }

    return (
      React.DOM.div({className: "container", style: {paddingLeft:0,
                                         paddingRight:0,width:'100%'}}, 
        React.DOM.div({style: {height:44,borderBottom:'solid 1px rgb(221, 221, 221)'}}, 
          React.DOM.h4({onClick: this.returnToCalendarView, 
              style: {fontWeight:200, float:'left',cursor:'pointer',marginTop:7,
                      paddingLeft:20,paddingTop:5, display:'inline-block'}}, 
                React.DOM.i({className: "fa fa-calendar", style: {marginRight:5}}), 
                this.props.currentProfile.name
          )
        ), 
        React.DOM.div({className: "col-md-12", style: {paddingLeft:0,paddingRight:0,
                                           height:456,overflow:'auto'}}, 
          React.DOM.div({style: {overflow:'auto'}}, 
            React.DOM.table({className: "table table-striped", style: {marginBottom:0}}, 
              React.DOM.thead(null, 
                React.DOM.th(null), 
                React.DOM.th({style: {textAlign:'center'}}, 
                  React.DOM.i({className: "fa fa-clock-o"}), " Last Ran"
                ), 
                React.DOM.th({style: {textAlign:'center', display:'none'}}, "Posted Job Listing"), 
                React.DOM.th(null, "Company Signals"), 
                React.DOM.th({style: {display:'block'}}, "Prospect Signals"), 
                React.DOM.th({style: {width:150,textAlign:'center'}})
              ), 
              React.DOM.tbody({className: "reports"}, 
                reports
              )
            )
          )
        )
      )
    );
  },

  setCurrentReport: function(newReport) {
    this.props.setCurrentReport(newReport)
  },

  prospectSignalReport: function(signalReport) {
    this.props.prospectSignalReport(this.props.currentProfile, signalReport)
  },
});

var SignalReportRow = React.createClass({displayName: 'SignalReportRow',
  getInitialState: function() {
    return {
      companyCount: '~',
      peopleCount: '~'
    }
  },

  rowClick: function() {
    if(this.props.report.done)
      this.props.setCurrentReport(this.props.report)
    else
      alertify.log("This mining job is still in progress. You'll be notified when it's completed")
  },

  prospectSignalReport: function(e) {
    this.props.prospectSignalReport(this.props.report)
    e.stopPropagation()
  },

  componentDidMount: function() { 
    console.log('calendar')
    report = appConfig.pointer('SignalReport', this.props.report.objectId)
    qry = {
      where:JSON.stringify({ report: report }),
      count: 1
    }
    var thiss = this;
    /*
    $.ajax({
      url:'https://api.parse.com/1/classes/PeopleSignal',
      data: qry,
      headers: appConfig.headers,
      success: function(res) { thiss.setState({peopleCount: res.count})},
      error: function(err) { console.log(err.responseText) },
    })

    $.ajax({
      url:'https://api.parse.com/1/classes/CompanySignal',
      data: qry,
      headers: appConfig.headers,
      success: function(res) { thiss.setState({companyCount: res.count})},
      error: function(err) { console.log(err.responseText) },
    })
    */
  },

  render: function() {
    prospected = this.props.report.prospected
    if(!this.props.report.mining_job)
      icon = React.DOM.i({className: "fa fa-wifi"})
    else
      icon = React.DOM.i({className: "fa fa-cloud-download", style: {color:'#555'}})

    loading = (!this.props.report.done) ? React.DOM.div({className: "profile-loading", style: {marginLeft:30}}, 
          React.DOM.div({className: "double-bounce1", style: {backgroundColor:'#5cb85c'}}), 
          React.DOM.div({className: "double-bounce2", style: {backgroundColor:'#5cb85c'}})
          ) : React.DOM.a({href: "javascript:", 
                    onClick: this.prospectSignalReport, 
             style: {fontWeight:'bold',marginTop:5}, 
     className: (prospected) ? "btn btn-xs btn-success disabled green-gradient" : "btn btn-xs btn-success green-gradient"}, 
             (prospected) ? 'Prospected' : 'Prospect All'
          )
    // Make an Alert when somebody clicks on in progress signal report
    return (
      React.DOM.tr({onClick: this.rowClick, style: {cursor:'pointer'}}, 
        React.DOM.td({style: {textAlign:'right',paddingTop:15}}, 
          icon
        ), 
        React.DOM.td({style: {textAlign:'center'}}, 
          React.DOM.h6(null, 
            moment(this.props.report.createdAt).fromNow()
          )
        ), 
        React.DOM.td({style: {textAlign:'center',display:'none'}}, 
          React.DOM.h6(null, 
          'lol'
          )
        ), 
        React.DOM.td(null, 
          React.DOM.span({className: "label label-success"}, 
            this.props.report.company_count
          ), 
          React.DOM.h6({style: {display:'inline-block'}}, 
            "  Companies found."
          )
        ), 
        React.DOM.td({style: {display:'block'}}, 
          React.DOM.span({className: "label label-success"}, 
            this.props.report.people_count
          ), 
          React.DOM.h6({style: {display:'inline-block'}}, 
            "  People found."
          )
        ), 
        React.DOM.td({style: (this.props.report.done) ? {} : {paddingTop:17}}, 
          loading
        )
      )
    )
  }
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvc2lnbmFsX2NhbGVuZGFyLmpzLm1pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKX12YXIgZj1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwoZi5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxmLGYuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIFNpZ25hbENhbGVuZGFyXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlcG9ydHMgOiBbXVxuICAgIH1cbiAgfSxcblxuICBnZXRTaWduYWxSZXBvcnQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgcXJ5ID0ge1xuICAgICAgd2hlcmUgOiBKU09OLnN0cmluZ2lmeSh7cHJvZmlsZTp7XG4gICAgICAgICAgX190eXBlOidQb2ludGVyJyxcbiAgICAgICAgICBjbGFzc05hbWU6J1Byb3NwZWN0UHJvZmlsZScsXG4gICAgICAgICAgb2JqZWN0SWQ6dGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZS5vYmplY3RJZFxuICAgICAgfX0pLFxuICAgICAgb3JkZXI6Jy1jcmVhdGVkQXQnLFxuICAgICAgbGltaXQ6MTBcbiAgICB9XG5cbiAgICBQYXJzZS5nZXQoJ1NpZ25hbFJlcG9ydCcsIHFyeSkuZG9uZShmdW5jdGlvbihyZXMpIHtcbiAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIF90aGlzLnNldFN0YXRlKHtyZXBvcnRzOiByZXMucmVzdWx0c30pXG4gICAgfSlcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5nZXRTaWduYWxSZXBvcnQoKVxuICB9LFxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgLy90aGlzLmdldFNpZ25hbFJlcG9ydCgpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXBvcnRzID0gW11cbiAgICBmb3IoaT0wO2k8IHRoaXMucHJvcHMucmVwb3J0cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYodGhpcy5wcm9wcy5yZXBvcnRzW2ldKSB7XG4gICAgICAgICAgcmVwb3J0cy5wdXNoKFNpZ25hbFJlcG9ydFJvdyh7c2V0Q3VycmVudFJlcG9ydDogdGhpcy5zZXRDdXJyZW50UmVwb3J0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3NwZWN0U2lnbmFsUmVwb3J0OiB0aGlzLnByb3NwZWN0U2lnbmFsUmVwb3J0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50VmlldzogdGhpcy5zZXRDdXJyZW50VmlldywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwb3J0OiB0aGlzLnByb3BzLnJlcG9ydHNbaV19KSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lclwiLCBzdHlsZToge3BhZGRpbmdMZWZ0OjAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDowLHdpZHRoOicxMDAlJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtoZWlnaHQ6NDQsYm9yZGVyQm90dG9tOidzb2xpZCAxcHggcmdiKDIyMSwgMjIxLCAyMjEpJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDQoe29uQ2xpY2s6IHRoaXMucmV0dXJuVG9DYWxlbmRhclZpZXcsIFxuICAgICAgICAgICAgICBzdHlsZToge2ZvbnRXZWlnaHQ6MjAwLCBmbG9hdDonbGVmdCcsY3Vyc29yOidwb2ludGVyJyxtYXJnaW5Ub3A6NyxcbiAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nTGVmdDoyMCxwYWRkaW5nVG9wOjUsIGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jYWxlbmRhclwiLCBzdHlsZToge21hcmdpblJpZ2h0OjV9fSksIFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGUubmFtZVxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtMTJcIiwgc3R5bGU6IHtwYWRkaW5nTGVmdDowLHBhZGRpbmdSaWdodDowLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDo0NTYsb3ZlcmZsb3c6J2F1dG8nfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7b3ZlcmZsb3c6J2F1dG8nfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRhYmxlKHtjbGFzc05hbWU6IFwidGFibGUgdGFibGUtc3RyaXBlZFwiLCBzdHlsZToge21hcmdpbkJvdHRvbTowfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGhlYWQobnVsbCwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInfX0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG9jay1vXCJ9KSwgXCIgTGFzdCBSYW5cIlxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcicsIGRpc3BsYXk6J25vbmUnfX0sIFwiUG9zdGVkIEpvYiBMaXN0aW5nXCIpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJDb21wYW55IFNpZ25hbHNcIiksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHtkaXNwbGF5OidibG9jayd9fSwgXCJQcm9zcGVjdCBTaWduYWxzXCIpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7d2lkdGg6MTUwLHRleHRBbGlnbjonY2VudGVyJ319KVxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnRib2R5KHtjbGFzc05hbWU6IFwicmVwb3J0c1wifSwgXG4gICAgICAgICAgICAgICAgcmVwb3J0c1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfSxcblxuICBzZXRDdXJyZW50UmVwb3J0OiBmdW5jdGlvbihuZXdSZXBvcnQpIHtcbiAgICB0aGlzLnByb3BzLnNldEN1cnJlbnRSZXBvcnQobmV3UmVwb3J0KVxuICB9LFxuXG4gIHByb3NwZWN0U2lnbmFsUmVwb3J0OiBmdW5jdGlvbihzaWduYWxSZXBvcnQpIHtcbiAgICB0aGlzLnByb3BzLnByb3NwZWN0U2lnbmFsUmVwb3J0KHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGUsIHNpZ25hbFJlcG9ydClcbiAgfSxcbn0pO1xuXG52YXIgU2lnbmFsUmVwb3J0Um93ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnU2lnbmFsUmVwb3J0Um93JyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29tcGFueUNvdW50OiAnficsXG4gICAgICBwZW9wbGVDb3VudDogJ34nXG4gICAgfVxuICB9LFxuXG4gIHJvd0NsaWNrOiBmdW5jdGlvbigpIHtcbiAgICBpZih0aGlzLnByb3BzLnJlcG9ydC5kb25lKVxuICAgICAgdGhpcy5wcm9wcy5zZXRDdXJyZW50UmVwb3J0KHRoaXMucHJvcHMucmVwb3J0KVxuICAgIGVsc2VcbiAgICAgIGFsZXJ0aWZ5LmxvZyhcIlRoaXMgbWluaW5nIGpvYiBpcyBzdGlsbCBpbiBwcm9ncmVzcy4gWW91J2xsIGJlIG5vdGlmaWVkIHdoZW4gaXQncyBjb21wbGV0ZWRcIilcbiAgfSxcblxuICBwcm9zcGVjdFNpZ25hbFJlcG9ydDogZnVuY3Rpb24oZSkge1xuICAgIHRoaXMucHJvcHMucHJvc3BlY3RTaWduYWxSZXBvcnQodGhpcy5wcm9wcy5yZXBvcnQpXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHsgXG4gICAgY29uc29sZS5sb2coJ2NhbGVuZGFyJylcbiAgICByZXBvcnQgPSBhcHBDb25maWcucG9pbnRlcignU2lnbmFsUmVwb3J0JywgdGhpcy5wcm9wcy5yZXBvcnQub2JqZWN0SWQpXG4gICAgcXJ5ID0ge1xuICAgICAgd2hlcmU6SlNPTi5zdHJpbmdpZnkoeyByZXBvcnQ6IHJlcG9ydCB9KSxcbiAgICAgIGNvdW50OiAxXG4gICAgfVxuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgLypcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Blb3BsZVNpZ25hbCcsXG4gICAgICBkYXRhOiBxcnksXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyB0aGlzcy5zZXRTdGF0ZSh7cGVvcGxlQ291bnQ6IHJlcy5jb3VudH0pfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlVGV4dCkgfSxcbiAgICB9KVxuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Db21wYW55U2lnbmFsJyxcbiAgICAgIGRhdGE6IHFyeSxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IHRoaXNzLnNldFN0YXRlKHtjb21wYW55Q291bnQ6IHJlcy5jb3VudH0pfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlVGV4dCkgfSxcbiAgICB9KVxuICAgICovXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBwcm9zcGVjdGVkID0gdGhpcy5wcm9wcy5yZXBvcnQucHJvc3BlY3RlZFxuICAgIGlmKCF0aGlzLnByb3BzLnJlcG9ydC5taW5pbmdfam9iKVxuICAgICAgaWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtd2lmaVwifSlcbiAgICBlbHNlXG4gICAgICBpY29uID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG91ZC1kb3dubG9hZFwiLCBzdHlsZToge2NvbG9yOicjNTU1J319KVxuXG4gICAgbG9hZGluZyA9ICghdGhpcy5wcm9wcy5yZXBvcnQuZG9uZSkgPyBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicHJvZmlsZS1sb2FkaW5nXCIsIHN0eWxlOiB7bWFyZ2luTGVmdDozMH19LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZG91YmxlLWJvdW5jZTFcIiwgc3R5bGU6IHtiYWNrZ3JvdW5kQ29sb3I6JyM1Y2I4NWMnfX0pLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZG91YmxlLWJvdW5jZTJcIiwgc3R5bGU6IHtiYWNrZ3JvdW5kQ29sb3I6JyM1Y2I4NWMnfX0pXG4gICAgICAgICAgKSA6IFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnByb3NwZWN0U2lnbmFsUmVwb3J0LCBcbiAgICAgICAgICAgICBzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLG1hcmdpblRvcDo1fSwgXG4gICAgIGNsYXNzTmFtZTogKHByb3NwZWN0ZWQpID8gXCJidG4gYnRuLXhzIGJ0bi1zdWNjZXNzIGRpc2FibGVkIGdyZWVuLWdyYWRpZW50XCIgOiBcImJ0biBidG4teHMgYnRuLXN1Y2Nlc3MgZ3JlZW4tZ3JhZGllbnRcIn0sIFxuICAgICAgICAgICAgIChwcm9zcGVjdGVkKSA/ICdQcm9zcGVjdGVkJyA6ICdQcm9zcGVjdCBBbGwnXG4gICAgICAgICAgKVxuICAgIC8vIE1ha2UgYW4gQWxlcnQgd2hlbiBzb21lYm9keSBjbGlja3Mgb24gaW4gcHJvZ3Jlc3Mgc2lnbmFsIHJlcG9ydFxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udHIoe29uQ2xpY2s6IHRoaXMucm93Q2xpY2ssIHN0eWxlOiB7Y3Vyc29yOidwb2ludGVyJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjoncmlnaHQnLHBhZGRpbmdUb3A6MTV9fSwgXG4gICAgICAgICAgaWNvblxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgXG4gICAgICAgICAgICBtb21lbnQodGhpcy5wcm9wcy5yZXBvcnQuY3JlYXRlZEF0KS5mcm9tTm93KClcbiAgICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInLGRpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBcbiAgICAgICAgICAnbG9sJ1xuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLXN1Y2Nlc3NcIn0sIFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5yZXBvcnQuY29tcGFueV9jb3VudFxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFxuICAgICAgICAgICAgXCLCoCBDb21wYW5pZXMgZm91bmQuXCJcbiAgICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7ZGlzcGxheTonYmxvY2snfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwibGFiZWwgbGFiZWwtc3VjY2Vzc1wifSwgXG4gICAgICAgICAgICB0aGlzLnByb3BzLnJlcG9ydC5wZW9wbGVfY291bnRcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgIFwiwqAgUGVvcGxlIGZvdW5kLlwiXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogKHRoaXMucHJvcHMucmVwb3J0LmRvbmUpID8ge30gOiB7cGFkZGluZ1RvcDoxN319LCBcbiAgICAgICAgICBsb2FkaW5nXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH1cbn0pO1xuIl19
