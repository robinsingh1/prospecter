(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  //CompanyDetail
  getInitialState: function() {
    return {
      currentScreen:"press",
    }
  },

  changeScreen: function() {
  },

  toggleDetailMode: function() {
    console.log("detail mode")
    this.props.toggleDetailMode()
  },

  getData: function() {
    company = this.props.detailCompany
    qry = {company_name: company.company_name}
    var _this = this;
    Parse._get('CompanyBlogPost', qry).done(function(res) {
      _this.setState({blog_posts: res.results})
    })
    Parse._get('CompanyTechnology', qry).done(function(res) {
      _this.setState({technologies: res.results})
    })
    Parse._get('CompanyPressRelease', qry).done(function(res) {
      _this.setState({press_releases: res.results})
    })
    Parse._get('CompanyGlassdoorReview', qry).done(function(res) {
      _this.setState({reviews: res.results})
    })
    Parse._get('CompanyEmployee', qry).done(function(res) {
      _this.setState({employees: res.results})
    })
    Parse._get('CompanySimilar', qry).done(function(res) {
      _this.setState({similar: res.results})
    })
    Parse._get('CompanyHiring', qry).done(function(res) {
      _this.setState({hiring: res.results})
    })
    Parse._get('CompanyNews', qry).done(function(res) {
      _this.setState({news: res.results})
    })
  },

  changeScreen: function(e) {
    this.setState({currentScreen: $(e.target).text().toLowerCase()})
  },

  render: function() {
    console.log(this.props.detailCompany)
    console.log(this.state.currentScreen)
    this.getData()

    tab_1 = "campaign-tab-link"
    tab_2 = "campaign-tab-link"
    tab_3 = "campaign-tab-link"
    tab_4 = "campaign-tab-link"
    tab_5 = "campaign-tab-link"
    if(this.state.currentScreen == "press")
      screen = CompanyPress(null)
    else if(this.state.currentScreen == "news")
      screen = CompanyNews(null)
    else if(this.state.currentScreen == "blog posts")
      screen = CompanyBlogPosts(null)
    else if(this.state.currentScreen == "hiring")
      screen = CompanyHiring(null)
    else if(this.state.currentScreen == "employees")
      screen = CompanyEmployees(null)
    else if(this.state.currentScreen == "similar")
      screen = CompanySimilar(null)
    else if(this.state.currentScreen == "technologies")
      screen = CompanyTechnology(null)
    return (
      React.DOM.div(null, 
        React.DOM.div({className: "company_detail_overlay", onClick: this.toggleDetailMode}, " "), 
      React.DOM.div({className: "company_detail_mode"}, 
    React.DOM.div({className: "row"}, 
      React.DOM.div({className: "col-md-2"}, 
      React.DOM.div({style: {backgroundImage: "url("+company.logo+")",height:100,width:100,marginLeft:10,marginTop:10}, 
          className: "company-img-thumbnail"})
      ), 
      React.DOM.div({className: "col-md-3", style: {paddingRight:0,paddingLeft:28,paddingTop:8}}, 
        React.DOM.h4({style: {fontWeight:"bold",fontSize:14}}, company.name), 
        React.DOM.h6({style: {fontWeight:"bold"}}, company.industry), 
        React.DOM.h6({style: {fontWeight:"bold"}}, company.headcount), 
        React.DOM.h6({style: {fontWeight:"bold"}}, company.city)
      ), 
      React.DOM.div({className: "col-md-7"}, 
        React.DOM.p({className: "lead", style: {marginTop:10,fontSize:12,height:100,overflow:'auto'}}, company.description)
      )
    ), 


              React.DOM.ul({className: "nav nav-tabs campaign-tabs detail-tab", role: "tablist", style: {paddingRight:0}}, 
                React.DOM.li({className: "campaign-tab"}, " ", React.DOM.a({onClick: this.changeScreen, href: "javascript:", className: tab_1}, "Press")), 
                React.DOM.li({className: "campaign-tab"}, React.DOM.a({onClick: this.changeScreen, href: "javascript:", className: tab_2}, "News")), 
                React.DOM.li({className: "campaign-tab"}, 
                  React.DOM.a({onClick: this.changeScreen, href: "javascript:", className: tab_3, style: {fontSize:12}}, 
                    "Blogs")), 
                React.DOM.li({className: "campaign-tab"}, React.DOM.a({onClick: this.changeScreen, href: "javascript:", className: tab_4}, "Hiring")), 
                React.DOM.li({className: "campaign-tab"}, React.DOM.a({onClick: this.changeScreen, href: "javascript:", className: tab_5}, "Employees")), 
                React.DOM.li({className: "campaign-tab"}, React.DOM.a({onClick: this.changeScreen, href: "javascript:", className: tab_5}, "Similar")), 
                React.DOM.li({className: "campaign-tab"}, React.DOM.a({onClick: this.changeScreen, href: "javascript:", className: tab_5}, "Technologies"))
              ), 
      screen
      )
      )
    )
  }
});

var CompanyPress = React.createClass({displayName: 'CompanyPress',
  render: function() {
    return (
      React.DOM.div(null, 
        "Press"
      )
    )
  }
})

var CompanyNews = React.createClass({displayName: 'CompanyNews',
  render: function() {
    return (
      React.DOM.div(null, 
        "Press"
      )
    )
  }
})

var CompanyBlogPosts = React.createClass({displayName: 'CompanyBlogPosts',
  render: function() {
    return (
      React.DOM.div(null, 
        "Press"
      )
    )
  }
})
var CompanyHiring = React.createClass({displayName: 'CompanyHiring',
  render: function() {
    return (
      React.DOM.div(null, 
        "Press"
      )
    )
  }
})
var CompanyEmployees = React.createClass({displayName: 'CompanyEmployees',
  render: function() {
    return (
      React.DOM.div(null, 
        "Press"
      )
    )
  }
})
var CompanySimilar = React.createClass({displayName: 'CompanySimilar',
  render: function() {
    return (
      React.DOM.div(null, 
        "Press"
      )
    )
  }
})
var CompanyTechnology = React.createClass({displayName: 'CompanyTechnology',
  render: function() {
    return (
      React.DOM.div(null, 
        "Press"
      )
    )
  }
})

},{}]},{},[1])


},{}],2:[function(require,module,exports){
/** @jsx React.DOM */

var CompanyDetail = require('./company_detail.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  // SignalDetail
  getInitialState: function() {
    return {
      currentSignal: 'CompanySignal',
      signals: [],
      //allProspected: this.props.currentProfileReport.prospected,
      companyCount: '~',
      peopleCount: '~',
      detailMode: false,
      detailCompany: {},
    }
  },

  getSignals: function(currentSignal) {
    var thissss = this;
    currentReport = this.props.currentProfileReport.objectId
    currentProfileReport = appConfig.pointer('SignalReport', currentReport)

    qry = {
      where:JSON.stringify({ report: currentProfileReport }),
      include:'company,signal.signal,signal',
      order:'-createdAt',
      limit:100
    }

    $.ajax({
      url: 'https://api.parse.com/1/classes/'+currentSignal,
      data: qry,
      type:'GET',
      headers:appConfig.parseHeaders,
      success: function(res) {
        console.log('SIGNAL DETAIL')
        console.log(res.results)
        console.log('PROFILE REPORT')
        console.log(thissss.props.currentProfileReport.objectId)
        thissss.setState({signals: res.results})
      },
      error: function(err) { console.log(err.responseText) }
    });
  },

  setCompanyState: function() { this.setState({currentSignal: 'CompanySignal'}) }, 
  setPersonState: function() { this.setState({currentSignal: 'PeopleSignal'}) }, 

  componentDidMount: function() {
    console.log('detail')
    console.log(this.props.currentProfileReport.objectId)
    this.getSignals(this.state.currentSignal)
    qry = {
      where:JSON.stringify({ report: currentProfileReport }),
      count: 1,
      limit:100,
      order:'createdAt'
    }
    var thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/classes/PeopleSignal',
      data: qry,
      headers: appConfig.headers,
      success: function(res) { thiss.setState({peopleCount: res.count})},
      error: function(err) { console.log(err.responseText) },
    })

    $.ajax({
      url:'https://api.parse.com/1/classes/CompanySignal',
      data: qry,
      headers: appConfig.headers,
      success: function(res) { thiss.setState({companyCount: res.count})},
      error: function(err) { console.log(err.responseText) },
    })
  },

  componentWillUpdate: function(nextProps, nextState) {
    if(this.state.currentSignal != nextState.currentSignal)
      this.getSignals(nextState.currentSignal)
  },

  returnToCalendarView: function() {
    console.log('return to calendar view')
  },

  render: function() {
    console.log('ALL PROSPECTED')
    console.log(this.state.allProspected)
    console.log('CURRENT SIGNAL')
    console.log(this.state.currentSignal)
    console.log('SIGNAL')
    console.log(this.state.signals)
    signals = []
    for(i=0;i< this.state.signals.length; i++) {
      if(this.state.currentSignal == 'CompanySignal')
        signals.push(CompanyHiringSignalRow({signal: this.state.signals[i], 
                                       toggleDetailMode: this.toggleDetailMode, 
                                       allProspected: this.state.allProspected}))
      else
        signals.push(PeopleSignalRow({signal: this.state.signals[i], 
                                       allProspected: this.state.allProspected}))
    }

    currentProfileReport = this.props.currentProfileReport
    companyBtn = (this.state.currentSignal == "CompanySignal") ? "btn btn-xs btn-default active" : "btn btn-xs btn-default"
    peopleBtn = (this.state.currentSignal == "PeopleSignal") ? "btn btn-xs btn-default active" : "btn btn-xs btn-default"
    score_column=(this.state.currentSignal == "PeopleSignal") ? React.DOM.th(null, "Score") : ""
    logo_column=(this.state.currentSignal == "CompanySignal") ? React.DOM.th(null) : ""
    return (
      React.DOM.div({className: "container", style: {height:456,paddingLeft:0,
                                         paddingRight:0,width:'100%'}}, 
        React.DOM.div({style: {height:44,borderBottom:'solid 1px rgb(221, 221, 221)'}}, 
          React.DOM.h4({onClick: this.returnToCalendarView, 
              style: {float:'left',cursor:'pointer',marginTop:7,fontWeight:200,
                      paddingLeft:20,paddingTop:5,display:'inline-block'}}, 
              
                React.DOM.i({className: "fa fa-calendar", style: {marginRight:5}}), 
                this.props.currentProfile.name
          ), 
          React.DOM.h6({style: {fontSize:13,paddingLeft:5,paddingTop:5,display:'inline-block'}}, 
            React.DOM.i({className: "fa fa-chevron-right", style: {fontSize:9}}), "  ", 
            React.DOM.i({className: "fa fa-clock-o"}), "  ", 
            moment(currentProfileReport.createdAt).fromNow(), "  "
          ), 

          (this.state.allProspected) ?
          React.DOM.a({href: "javascript:", style: {fontWeight:'bold',float:'right',
                                        marginRight:10,marginTop:10}, 
             className: "btn btn-success btn-xs disabled"}, 
            "Prospected"
          ) :
          React.DOM.a({href: "javascript:", style: {fontWeight:'bold',float:'right',
                                        marginRight:10,marginTop:10}, 
             onClick: this.prospectAll, 
             className: "btn btn-success btn-xs green-gradient"}, 
            "Prospect All"
          ), 
          

          React.DOM.div({className: "btn-group", 
               style: {float:'right',marginTop:10,marginRight:10}, 
               'data-toggle': "buttons"}, 
            React.DOM.label({className: peopleBtn, style: {width:50}, 
                 onClick: this.setPersonState}, 
              React.DOM.input({type: "checkbox"}), 
              React.DOM.i({className: "fa fa-user"}), "  ", 
              this.state.peopleCount
            ), 
            React.DOM.label({className: companyBtn, style: {width:50}, 
              onClick: this.setCompanyState}, 
              React.DOM.input({type: "checkbox"}), 
              React.DOM.i({className: "fa fa-building"}), "  ", 
              this.state.companyCount
            )
          )
        ), 

        React.DOM.div({className: "col-md-12", style: {paddingLeft:0,paddingRight:0}}, 
          (this.state.detailMode) ? CompanyDetail({toggleDetailMode: this.toggleDetailMode, detailCompany: this.state.detailCompany}) : "", 
          React.DOM.div({style: {overflow:'auto',height:456}}, 
            React.DOM.table({className: "table table-striped"}, 
              React.DOM.thead(null, 
                React.DOM.th({style: {textAlign:'center',width:90}}, 
                  React.DOM.i({className: "fa fa-clock-o"})
                ), 

                logo_column, 
                React.DOM.th({style: {width:200}}, 
                  (this.state.currentSignal == 'CompanySignal') ?  
                    "Companies" : "People"
                ), 

                React.DOM.th({style: {width:200}}, "Signal"), 
                React.DOM.th(null, "Source "), 
                score_column, 

                React.DOM.th({style: {width:90,textAlign:'center'}}, " ")

              ), 
              React.DOM.tbody({className: "reports"}, 
                signals
              )
            )
          )
        )
      )
    );
  },

  prospectAll: function() {
    console.log(this.state.currentSignal)
    console.log(this.props.currentProfileReport.objectId)
    report_id = this.props.currentProfileReport.objectId
    var thiss = this;
    $.ajax({
      //url: 'http://127.0.0.1:5000/signal_to_prospect',
      url: 'https://nameless-retreat-3525.herokuapp.com/signal_to_prospect',
      data: {all_signals:true, report_id: report_id, 
             signal_type: thiss.state.currentSignal},
      success: function(res) { console.log(res)},
      error: function(err) { console.log(err.responseText)},
    })
  },
  toggleDetailMode: function(company) {
    this.setState({detailMode: !this.state.detailMode})
    this.setState({detailCompany: company})
  }
});

var CompanyHiringSignalRow = React.createClass({displayName: 'CompanyHiringSignalRow',
  toggleDetailMode: function() {
    this.props.toggleDetailMode(this.props.signal.company)
  },

  render: function() {
    company = this.props.signal.company
    signal = this.props.signal.signal[0]
    return (
      React.DOM.tr({style: {}}, 
        React.DOM.td({style: {textAlign:'center',width:120}}, 
          React.DOM.h6(null, 
            moment(this.props.signal.createdAt).fromNow()
          )
        ), 

        React.DOM.td(null, 
          React.DOM.div({style: {backgroundImage: "url("+company.logo+")",height:60,width:60}, 
          className: "company-img-thumbnail"})
        ), 
        React.DOM.td({style: {width:200}}, 
          React.DOM.a({href: "javascript:", onClick: this.toggleDetailMode}, company.name), 
          React.DOM.h6(null, company.industry), 
          React.DOM.h6(null, (company.address) ? company.address.normalizedLocation : ""), 
          React.DOM.h6(null, company.revenue), 
          React.DOM.h6(null, company.headcount), 
          React.DOM.h6(null, React.DOM.a({href: "javascript:"}, company.website)), 
          React.DOM.h6(null, company.city)
        ), 

        React.DOM.td({style: {width:200}}, 
          React.DOM.h6(null, signal.job_title), 
          React.DOM.h6(null, signal.company_name), 
          React.DOM.h6(null, signal.location), 
          React.DOM.h6(null, signal.summary)
        ), 
        React.DOM.td(null, 
          signal.source, 
          React.DOM.h6(null, moment(signal.timestamp*1000).fromNow())
        ), 
        React.DOM.td(null, 
          (this.props.allProspected) ? 
            React.DOM.a({href: "javascript:", 
               className: "btn btn-success btn-xs disabled green-gradient", 
            style: {fontWeight:'bold'}}, 
            "Prospected"
            ) : React.DOM.a({href: "javascript:", 
                      className: "btn btn-success btn-xs green-gradient", 
                  onClick: this.turnCompanySignalToProspect, 
            style: {fontWeight:'bold'}}, 
            "Prospect"
          )
        )
      )
    )
  },
  turnCompanySignalToProspect: function() {
    var thiss = this;
    $.ajax({
      //url: 'https://nameless-retreat-',
      //url: 'http://127.0.0.1:5000/signal_to_prospect',
      url: 'https://nameless-retreat-3525.herokuapp.com/signal_to_prospect',
      data: {all_signals:false, signal_id: company.objectId,
             signal_type: 'CompanySignal'},
      success: function(res) { console.log(res)},
      error: function(err) { console.log(err.responseText)},
    })
  }
})

var PeopleSignalRow = React.createClass({displayName: 'PeopleSignalRow',
  turnSignalIntoProspect: function() {
    var thiss = this;
    console.log(this.props.signal)
    $.ajax({
      //url:'http://127.0.0.1:5000/signal_to_prospect',
      url:'http://nameless-retreat-3525.herokuapp.com/signal_to_prospect',
      data: {signal_id: thiss.props.signal.objectId, signal_type:'PeopleSignal',
             all_signals:false},
      success: function(res) { console.log(res) },
      error: function(err) { console.log(err.responseText) } 
    })
  },

  render: function() {
    //console.log(company)
    people = (this.props.signal) ? this.props.signal : {}
    company = people.company
    signal = people.signal.signal[0]
    console.log(people)
    return (
      React.DOM.tr({style: {}}, 
        React.DOM.td({style: {textAlign:'center',width:120}}, 
          React.DOM.h6(null, 
            moment(this.props.signal.createdAt).fromNow()
          )
        ), 

        React.DOM.td(null, 
          people.title_score
        ), 
        React.DOM.td(null, 
          React.DOM.h6(null, people.name + " - ", " ", React.DOM.span({style: {fontStyle:'italic'}}, 
              people.title)), 
          React.DOM.h6(null, React.DOM.a({href: "javascript:"}, company.website)), 
          React.DOM.h6(null, company.name), 
          React.DOM.h6(null, company.city)
        ), 

        React.DOM.td(null, 
          React.DOM.h6(null, signal.job_title), 
          React.DOM.h6(null, signal.company_name), 
          React.DOM.h6(null, signal.location), 
          React.DOM.h6(null, signal.summary)
        ), 
        React.DOM.td(null, 
          signal.source, 
          React.DOM.h6(null, moment(signal.timestamp*1000).fromNow())
        ), 

        React.DOM.td(null, 
          (this.props.allProspected) ? 
          React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs green-gradient disabled", 
            style: {fontWeight:'bold'}}, 
            "Prospected"
            ) : React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs green-gradient", 
                      onClick: this.turnSignalIntoProspect, 
            style: {fontWeight:'bold'}}, 
            "Prospect"
          )
          
        )
      )
    )
  }
})

},{"./company_detail.js.min.js":1}]},{},[2])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvc2lnbmFsX2RldGFpbC5qcy5taW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3BMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIil9dmFyIGY9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sZixmLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG52YXIgQ29tcGFueURldGFpbCA9IHJlcXVpcmUoJy4vY29tcGFueV9kZXRhaWwuanMubWluLmpzJylcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gU2lnbmFsRGV0YWlsXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGN1cnJlbnRTaWduYWw6ICdDb21wYW55U2lnbmFsJyxcbiAgICAgIHNpZ25hbHM6IFtdLFxuICAgICAgLy9hbGxQcm9zcGVjdGVkOiB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlUmVwb3J0LnByb3NwZWN0ZWQsXG4gICAgICBjb21wYW55Q291bnQ6ICd+JyxcbiAgICAgIHBlb3BsZUNvdW50OiAnficsXG4gICAgICBkZXRhaWxNb2RlOiBmYWxzZSxcbiAgICAgIGRldGFpbENvbXBhbnk6IHt9LFxuICAgIH1cbiAgfSxcblxuICBnZXRTaWduYWxzOiBmdW5jdGlvbihjdXJyZW50U2lnbmFsKSB7XG4gICAgdmFyIHRoaXNzc3MgPSB0aGlzO1xuICAgIGN1cnJlbnRSZXBvcnQgPSB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlUmVwb3J0Lm9iamVjdElkXG4gICAgY3VycmVudFByb2ZpbGVSZXBvcnQgPSBhcHBDb25maWcucG9pbnRlcignU2lnbmFsUmVwb3J0JywgY3VycmVudFJlcG9ydClcblxuICAgIHFyeSA9IHtcbiAgICAgIHdoZXJlOkpTT04uc3RyaW5naWZ5KHsgcmVwb3J0OiBjdXJyZW50UHJvZmlsZVJlcG9ydCB9KSxcbiAgICAgIGluY2x1ZGU6J2NvbXBhbnksc2lnbmFsLnNpZ25hbCxzaWduYWwnLFxuICAgICAgb3JkZXI6Jy1jcmVhdGVkQXQnLFxuICAgICAgbGltaXQ6MTAwXG4gICAgfVxuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvJytjdXJyZW50U2lnbmFsLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZygnU0lHTkFMIERFVEFJTCcpXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcy5yZXN1bHRzKVxuICAgICAgICBjb25zb2xlLmxvZygnUFJPRklMRSBSRVBPUlQnKVxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzc3NzLnByb3BzLmN1cnJlbnRQcm9maWxlUmVwb3J0Lm9iamVjdElkKVxuICAgICAgICB0aGlzc3NzLnNldFN0YXRlKHtzaWduYWxzOiByZXMucmVzdWx0c30pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2VUZXh0KSB9XG4gICAgfSk7XG4gIH0sXG5cbiAgc2V0Q29tcGFueVN0YXRlOiBmdW5jdGlvbigpIHsgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudFNpZ25hbDogJ0NvbXBhbnlTaWduYWwnfSkgfSwgXG4gIHNldFBlcnNvblN0YXRlOiBmdW5jdGlvbigpIHsgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudFNpZ25hbDogJ1Blb3BsZVNpZ25hbCd9KSB9LCBcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2RldGFpbCcpXG4gICAgY29uc29sZS5sb2codGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZVJlcG9ydC5vYmplY3RJZClcbiAgICB0aGlzLmdldFNpZ25hbHModGhpcy5zdGF0ZS5jdXJyZW50U2lnbmFsKVxuICAgIHFyeSA9IHtcbiAgICAgIHdoZXJlOkpTT04uc3RyaW5naWZ5KHsgcmVwb3J0OiBjdXJyZW50UHJvZmlsZVJlcG9ydCB9KSxcbiAgICAgIGNvdW50OiAxLFxuICAgICAgbGltaXQ6MTAwLFxuICAgICAgb3JkZXI6J2NyZWF0ZWRBdCdcbiAgICB9XG4gICAgdmFyIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Blb3BsZVNpZ25hbCcsXG4gICAgICBkYXRhOiBxcnksXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyB0aGlzcy5zZXRTdGF0ZSh7cGVvcGxlQ291bnQ6IHJlcy5jb3VudH0pfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlVGV4dCkgfSxcbiAgICB9KVxuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Db21wYW55U2lnbmFsJyxcbiAgICAgIGRhdGE6IHFyeSxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IHRoaXNzLnNldFN0YXRlKHtjb21wYW55Q291bnQ6IHJlcy5jb3VudH0pfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlVGV4dCkgfSxcbiAgICB9KVxuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxVcGRhdGU6IGZ1bmN0aW9uKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG4gICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50U2lnbmFsICE9IG5leHRTdGF0ZS5jdXJyZW50U2lnbmFsKVxuICAgICAgdGhpcy5nZXRTaWduYWxzKG5leHRTdGF0ZS5jdXJyZW50U2lnbmFsKVxuICB9LFxuXG4gIHJldHVyblRvQ2FsZW5kYXJWaWV3OiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygncmV0dXJuIHRvIGNhbGVuZGFyIHZpZXcnKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ0FMTCBQUk9TUEVDVEVEJylcbiAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLmFsbFByb3NwZWN0ZWQpXG4gICAgY29uc29sZS5sb2coJ0NVUlJFTlQgU0lHTkFMJylcbiAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLmN1cnJlbnRTaWduYWwpXG4gICAgY29uc29sZS5sb2coJ1NJR05BTCcpXG4gICAgY29uc29sZS5sb2codGhpcy5zdGF0ZS5zaWduYWxzKVxuICAgIHNpZ25hbHMgPSBbXVxuICAgIGZvcihpPTA7aTwgdGhpcy5zdGF0ZS5zaWduYWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZih0aGlzLnN0YXRlLmN1cnJlbnRTaWduYWwgPT0gJ0NvbXBhbnlTaWduYWwnKVxuICAgICAgICBzaWduYWxzLnB1c2goQ29tcGFueUhpcmluZ1NpZ25hbFJvdyh7c2lnbmFsOiB0aGlzLnN0YXRlLnNpZ25hbHNbaV0sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlRGV0YWlsTW9kZTogdGhpcy50b2dnbGVEZXRhaWxNb2RlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbFByb3NwZWN0ZWQ6IHRoaXMuc3RhdGUuYWxsUHJvc3BlY3RlZH0pKVxuICAgICAgZWxzZVxuICAgICAgICBzaWduYWxzLnB1c2goUGVvcGxlU2lnbmFsUm93KHtzaWduYWw6IHRoaXMuc3RhdGUuc2lnbmFsc1tpXSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxQcm9zcGVjdGVkOiB0aGlzLnN0YXRlLmFsbFByb3NwZWN0ZWR9KSlcbiAgICB9XG5cbiAgICBjdXJyZW50UHJvZmlsZVJlcG9ydCA9IHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGVSZXBvcnRcbiAgICBjb21wYW55QnRuID0gKHRoaXMuc3RhdGUuY3VycmVudFNpZ25hbCA9PSBcIkNvbXBhbnlTaWduYWxcIikgPyBcImJ0biBidG4teHMgYnRuLWRlZmF1bHQgYWN0aXZlXCIgOiBcImJ0biBidG4teHMgYnRuLWRlZmF1bHRcIlxuICAgIHBlb3BsZUJ0biA9ICh0aGlzLnN0YXRlLmN1cnJlbnRTaWduYWwgPT0gXCJQZW9wbGVTaWduYWxcIikgPyBcImJ0biBidG4teHMgYnRuLWRlZmF1bHQgYWN0aXZlXCIgOiBcImJ0biBidG4teHMgYnRuLWRlZmF1bHRcIlxuICAgIHNjb3JlX2NvbHVtbj0odGhpcy5zdGF0ZS5jdXJyZW50U2lnbmFsID09IFwiUGVvcGxlU2lnbmFsXCIpID8gUmVhY3QuRE9NLnRoKG51bGwsIFwiU2NvcmVcIikgOiBcIlwiXG4gICAgbG9nb19jb2x1bW49KHRoaXMuc3RhdGUuY3VycmVudFNpZ25hbCA9PSBcIkNvbXBhbnlTaWduYWxcIikgPyBSZWFjdC5ET00udGgobnVsbCkgOiBcIlwiXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb250YWluZXJcIiwgc3R5bGU6IHtoZWlnaHQ6NDU2LHBhZGRpbmdMZWZ0OjAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDowLHdpZHRoOicxMDAlJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtoZWlnaHQ6NDQsYm9yZGVyQm90dG9tOidzb2xpZCAxcHggcmdiKDIyMSwgMjIxLCAyMjEpJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDQoe29uQ2xpY2s6IHRoaXMucmV0dXJuVG9DYWxlbmRhclZpZXcsIFxuICAgICAgICAgICAgICBzdHlsZToge2Zsb2F0OidsZWZ0JyxjdXJzb3I6J3BvaW50ZXInLG1hcmdpblRvcDo3LGZvbnRXZWlnaHQ6MjAwLFxuICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OjIwLHBhZGRpbmdUb3A6NSxkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNhbGVuZGFyXCIsIHN0eWxlOiB7bWFyZ2luUmlnaHQ6NX19KSwgXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZS5uYW1lXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2ZvbnRTaXplOjEzLHBhZGRpbmdMZWZ0OjUscGFkZGluZ1RvcDo1LGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZXZyb24tcmlnaHRcIiwgc3R5bGU6IHtmb250U2l6ZTo5fX0pLCBcIiDCoFwiLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvY2stb1wifSksIFwiIMKgXCIsIFxuICAgICAgICAgICAgbW9tZW50KGN1cnJlbnRQcm9maWxlUmVwb3J0LmNyZWF0ZWRBdCkuZnJvbU5vdygpLCBcIiDCoFwiXG4gICAgICAgICAgKSwgXG5cbiAgICAgICAgICAodGhpcy5zdGF0ZS5hbGxQcm9zcGVjdGVkKSA/XG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgc3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJyxmbG9hdDoncmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OjEwLG1hcmdpblRvcDoxMH0sIFxuICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzIGRpc2FibGVkXCJ9LCBcbiAgICAgICAgICAgIFwiUHJvc3BlY3RlZFwiXG4gICAgICAgICAgKSA6XG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgc3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJyxmbG9hdDoncmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OjEwLG1hcmdpblRvcDoxMH0sIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucHJvc3BlY3RBbGwsIFxuICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzIGdyZWVuLWdyYWRpZW50XCJ9LCBcbiAgICAgICAgICAgIFwiUHJvc3BlY3QgQWxsXCJcbiAgICAgICAgICApLCBcbiAgICAgICAgICBcblxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXBcIiwgXG4gICAgICAgICAgICAgICBzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luVG9wOjEwLG1hcmdpblJpZ2h0OjEwfSwgXG4gICAgICAgICAgICAgICAnZGF0YS10b2dnbGUnOiBcImJ1dHRvbnNcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IHBlb3BsZUJ0biwgc3R5bGU6IHt3aWR0aDo1MH0sIFxuICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnNldFBlcnNvblN0YXRlfSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXVzZXJcIn0pLCBcIiDCoFwiLCBcbiAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5wZW9wbGVDb3VudFxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogY29tcGFueUJ0biwgc3R5bGU6IHt3aWR0aDo1MH0sIFxuICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnNldENvbXBhbnlTdGF0ZX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1idWlsZGluZ1wifSksIFwiIMKgXCIsIFxuICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNvbXBhbnlDb3VudFxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG5cbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0xMlwiLCBzdHlsZToge3BhZGRpbmdMZWZ0OjAscGFkZGluZ1JpZ2h0OjB9fSwgXG4gICAgICAgICAgKHRoaXMuc3RhdGUuZGV0YWlsTW9kZSkgPyBDb21wYW55RGV0YWlsKHt0b2dnbGVEZXRhaWxNb2RlOiB0aGlzLnRvZ2dsZURldGFpbE1vZGUsIGRldGFpbENvbXBhbnk6IHRoaXMuc3RhdGUuZGV0YWlsQ29tcGFueX0pIDogXCJcIiwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtvdmVyZmxvdzonYXV0bycsaGVpZ2h0OjQ1Nn19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50YWJsZSh7Y2xhc3NOYW1lOiBcInRhYmxlIHRhYmxlLXN0cmlwZWRcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGhlYWQobnVsbCwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyx3aWR0aDo5MH19LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvY2stb1wifSlcbiAgICAgICAgICAgICAgICApLCBcblxuICAgICAgICAgICAgICAgIGxvZ29fY29sdW1uLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7d2lkdGg6MjAwfX0sIFxuICAgICAgICAgICAgICAgICAgKHRoaXMuc3RhdGUuY3VycmVudFNpZ25hbCA9PSAnQ29tcGFueVNpZ25hbCcpID8gIFxuICAgICAgICAgICAgICAgICAgICBcIkNvbXBhbmllc1wiIDogXCJQZW9wbGVcIlxuICAgICAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3dpZHRoOjIwMH19LCBcIlNpZ25hbFwiKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiU291cmNlIFwiKSwgXG4gICAgICAgICAgICAgICAgc2NvcmVfY29sdW1uLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt3aWR0aDo5MCx0ZXh0QWxpZ246J2NlbnRlcid9fSwgXCIgXCIpXG5cbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50Ym9keSh7Y2xhc3NOYW1lOiBcInJlcG9ydHNcIn0sIFxuICAgICAgICAgICAgICAgIHNpZ25hbHNcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgcHJvc3BlY3RBbGw6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUuY3VycmVudFNpZ25hbClcbiAgICBjb25zb2xlLmxvZyh0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlUmVwb3J0Lm9iamVjdElkKVxuICAgIHJlcG9ydF9pZCA9IHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGVSZXBvcnQub2JqZWN0SWRcbiAgICB2YXIgdGhpc3MgPSB0aGlzO1xuICAgICQuYWpheCh7XG4gICAgICAvL3VybDogJ2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC9zaWduYWxfdG9fcHJvc3BlY3QnLFxuICAgICAgdXJsOiAnaHR0cHM6Ly9uYW1lbGVzcy1yZXRyZWF0LTM1MjUuaGVyb2t1YXBwLmNvbS9zaWduYWxfdG9fcHJvc3BlY3QnLFxuICAgICAgZGF0YToge2FsbF9zaWduYWxzOnRydWUsIHJlcG9ydF9pZDogcmVwb3J0X2lkLCBcbiAgICAgICAgICAgICBzaWduYWxfdHlwZTogdGhpc3Muc3RhdGUuY3VycmVudFNpZ25hbH0sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgY29uc29sZS5sb2cocmVzKX0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUubG9nKGVyci5yZXNwb25zZVRleHQpfSxcbiAgICB9KVxuICB9LFxuICB0b2dnbGVEZXRhaWxNb2RlOiBmdW5jdGlvbihjb21wYW55KSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7ZGV0YWlsTW9kZTogIXRoaXMuc3RhdGUuZGV0YWlsTW9kZX0pXG4gICAgdGhpcy5zZXRTdGF0ZSh7ZGV0YWlsQ29tcGFueTogY29tcGFueX0pXG4gIH1cbn0pO1xuXG52YXIgQ29tcGFueUhpcmluZ1NpZ25hbFJvdyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0NvbXBhbnlIaXJpbmdTaWduYWxSb3cnLFxuICB0b2dnbGVEZXRhaWxNb2RlOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnByb3BzLnRvZ2dsZURldGFpbE1vZGUodGhpcy5wcm9wcy5zaWduYWwuY29tcGFueSlcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIGNvbXBhbnkgPSB0aGlzLnByb3BzLnNpZ25hbC5jb21wYW55XG4gICAgc2lnbmFsID0gdGhpcy5wcm9wcy5zaWduYWwuc2lnbmFsWzBdXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS50cih7c3R5bGU6IHt9fSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcicsd2lkdGg6MTIwfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBcbiAgICAgICAgICAgIG1vbWVudCh0aGlzLnByb3BzLnNpZ25hbC5jcmVhdGVkQXQpLmZyb21Ob3coKVxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG5cbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7YmFja2dyb3VuZEltYWdlOiBcInVybChcIitjb21wYW55LmxvZ28rXCIpXCIsaGVpZ2h0OjYwLHdpZHRoOjYwfSwgXG4gICAgICAgICAgY2xhc3NOYW1lOiBcImNvbXBhbnktaW1nLXRodW1ibmFpbFwifSlcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt3aWR0aDoyMDB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgb25DbGljazogdGhpcy50b2dnbGVEZXRhaWxNb2RlfSwgY29tcGFueS5uYW1lKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIGNvbXBhbnkuaW5kdXN0cnkpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgKGNvbXBhbnkuYWRkcmVzcykgPyBjb21wYW55LmFkZHJlc3Mubm9ybWFsaXplZExvY2F0aW9uIDogXCJcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBjb21wYW55LnJldmVudWUpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgY29tcGFueS5oZWFkY291bnQpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIn0sIGNvbXBhbnkud2Vic2l0ZSkpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgY29tcGFueS5jaXR5KVxuICAgICAgICApLCBcblxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7d2lkdGg6MjAwfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBzaWduYWwuam9iX3RpdGxlKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIHNpZ25hbC5jb21wYW55X25hbWUpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgc2lnbmFsLmxvY2F0aW9uKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIHNpZ25hbC5zdW1tYXJ5KVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgIHNpZ25hbC5zb3VyY2UsIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBtb21lbnQoc2lnbmFsLnRpbWVzdGFtcCoxMDAwKS5mcm9tTm93KCkpXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgKHRoaXMucHJvcHMuYWxsUHJvc3BlY3RlZCkgPyBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHMgZGlzYWJsZWQgZ3JlZW4tZ3JhZGllbnRcIiwgXG4gICAgICAgICAgICBzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnfX0sIFxuICAgICAgICAgICAgXCJQcm9zcGVjdGVkXCJcbiAgICAgICAgICAgICkgOiBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14cyBncmVlbi1ncmFkaWVudFwiLCBcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMudHVybkNvbXBhbnlTaWduYWxUb1Byb3NwZWN0LCBcbiAgICAgICAgICAgIHN0eWxlOiB7Zm9udFdlaWdodDonYm9sZCd9fSwgXG4gICAgICAgICAgICBcIlByb3NwZWN0XCJcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH0sXG4gIHR1cm5Db21wYW55U2lnbmFsVG9Qcm9zcGVjdDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgLy91cmw6ICdodHRwczovL25hbWVsZXNzLXJldHJlYXQtJyxcbiAgICAgIC8vdXJsOiAnaHR0cDovLzEyNy4wLjAuMTo1MDAwL3NpZ25hbF90b19wcm9zcGVjdCcsXG4gICAgICB1cmw6ICdodHRwczovL25hbWVsZXNzLXJldHJlYXQtMzUyNS5oZXJva3VhcHAuY29tL3NpZ25hbF90b19wcm9zcGVjdCcsXG4gICAgICBkYXRhOiB7YWxsX3NpZ25hbHM6ZmFsc2UsIHNpZ25hbF9pZDogY29tcGFueS5vYmplY3RJZCxcbiAgICAgICAgICAgICBzaWduYWxfdHlwZTogJ0NvbXBhbnlTaWduYWwnfSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyBjb25zb2xlLmxvZyhyZXMpfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlVGV4dCl9LFxuICAgIH0pXG4gIH1cbn0pXG5cbnZhciBQZW9wbGVTaWduYWxSb3cgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdQZW9wbGVTaWduYWxSb3cnLFxuICB0dXJuU2lnbmFsSW50b1Byb3NwZWN0OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGhpc3MgPSB0aGlzO1xuICAgIGNvbnNvbGUubG9nKHRoaXMucHJvcHMuc2lnbmFsKVxuICAgICQuYWpheCh7XG4gICAgICAvL3VybDonaHR0cDovLzEyNy4wLjAuMTo1MDAwL3NpZ25hbF90b19wcm9zcGVjdCcsXG4gICAgICB1cmw6J2h0dHA6Ly9uYW1lbGVzcy1yZXRyZWF0LTM1MjUuaGVyb2t1YXBwLmNvbS9zaWduYWxfdG9fcHJvc3BlY3QnLFxuICAgICAgZGF0YToge3NpZ25hbF9pZDogdGhpc3MucHJvcHMuc2lnbmFsLm9iamVjdElkLCBzaWduYWxfdHlwZTonUGVvcGxlU2lnbmFsJyxcbiAgICAgICAgICAgICBhbGxfc2lnbmFsczpmYWxzZX0sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgY29uc29sZS5sb2cocmVzKSB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2VUZXh0KSB9IFxuICAgIH0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAvL2NvbnNvbGUubG9nKGNvbXBhbnkpXG4gICAgcGVvcGxlID0gKHRoaXMucHJvcHMuc2lnbmFsKSA/IHRoaXMucHJvcHMuc2lnbmFsIDoge31cbiAgICBjb21wYW55ID0gcGVvcGxlLmNvbXBhbnlcbiAgICBzaWduYWwgPSBwZW9wbGUuc2lnbmFsLnNpZ25hbFswXVxuICAgIGNvbnNvbGUubG9nKHBlb3BsZSlcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnRyKHtzdHlsZToge319LCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyx3aWR0aDoxMjB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIFxuICAgICAgICAgICAgbW9tZW50KHRoaXMucHJvcHMuc2lnbmFsLmNyZWF0ZWRBdCkuZnJvbU5vdygpXG4gICAgICAgICAgKVxuICAgICAgICApLCBcblxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgcGVvcGxlLnRpdGxlX3Njb3JlXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIHBlb3BsZS5uYW1lICsgXCIgLSBcIiwgXCIgXCIsIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2ZvbnRTdHlsZTonaXRhbGljJ319LCBcbiAgICAgICAgICAgICAgcGVvcGxlLnRpdGxlKSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwifSwgY29tcGFueS53ZWJzaXRlKSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBjb21wYW55Lm5hbWUpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgY29tcGFueS5jaXR5KVxuICAgICAgICApLCBcblxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIHNpZ25hbC5qb2JfdGl0bGUpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgc2lnbmFsLmNvbXBhbnlfbmFtZSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBzaWduYWwubG9jYXRpb24pLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgc2lnbmFsLnN1bW1hcnkpXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgc2lnbmFsLnNvdXJjZSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIG1vbWVudChzaWduYWwudGltZXN0YW1wKjEwMDApLmZyb21Ob3coKSlcbiAgICAgICAgKSwgXG5cbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgICh0aGlzLnByb3BzLmFsbFByb3NwZWN0ZWQpID8gXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHMgZ3JlZW4tZ3JhZGllbnQgZGlzYWJsZWRcIiwgXG4gICAgICAgICAgICBzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnfX0sIFxuICAgICAgICAgICAgXCJQcm9zcGVjdGVkXCJcbiAgICAgICAgICAgICkgOiBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14cyBncmVlbi1ncmFkaWVudFwiLCBcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnR1cm5TaWduYWxJbnRvUHJvc3BlY3QsIFxuICAgICAgICAgICAgc3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJ319LCBcbiAgICAgICAgICAgIFwiUHJvc3BlY3RcIlxuICAgICAgICAgIClcbiAgICAgICAgICBcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfVxufSlcbiJdfQ==
