(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
   //Analytics
  render: function () {
    return (
      React.DOM.div({style: {height:'400px'}, className: ""}, 
        React.DOM.div({className: "container", style: {width:'100%',padding:'0',height:'100%'}}, 
          AnalyticsSideMenu(null), 
          React.DOM.div({className: "col-md-3", style: {padding:'0'}}, 
            React.DOM.table({className: "table table-striped"}, 
              React.DOM.thead(null, 
                React.DOM.th(null, "Stat"), 
                React.DOM.th(null, "#")
              ), 
              React.DOM.tbody(null, 
                React.DOM.tr(null, React.DOM.td(null, "# of People Prospected"), React.DOM.td(null, "lil")), 
                React.DOM.tr(null, React.DOM.td(null, "# of Companies Prospected"), React.DOM.td(null, "lil")), 
                React.DOM.tr(null, React.DOM.td(null, "# of Emails Sent"), React.DOM.td(null, "lil")), 
                React.DOM.tr(null, React.DOM.td(null, "# of Emails Delivered"), React.DOM.td(null, "lil")), 
                React.DOM.tr(null, React.DOM.td(null, "# of Emails Delivery Failures"), React.DOM.td(null, "lil"))
              )
            )
          )
        )
      )
    );
  }
});

var AnalyticsSideMenu = React.createClass({displayName: 'AnalyticsSideMenu',
  render: function() {
    return (
      React.DOM.div({className: "col-md-2", style: {padding:'0',height:'100%',backgroundColor:'rgb(90, 107, 119)',borderBottomLeftRadius:'3px'}}, 
        React.DOM.div({className: "btn-group-vertical", style: {width:'100%'}}, 
          React.DOM.button({type: "button", className: "sharp btn btn-default"}, 
            React.DOM.i({className: "fa fa-search"}), "   Prospecting Overview"
          ), 
          React.DOM.button({type: "button", className: "sharp btn btn-default"}, 
            React.DOM.i({className: "fa fa-paper-plane"}), "   Email Outreach"
          ), 
          React.DOM.button({type: "button", className: "sharp btn btn-default"}, 
            React.DOM.i({className: "fa fa-user"}), "   Team Stats"
          ), 
          React.DOM.button({type: "button", className: "sharp btn btn-default"}, 
            React.DOM.i({className: "fa fa-cloud"}), "   CRM Integration"
          ), 
          React.DOM.button({type: "button", className: "sharp btn btn-default"}, 
            React.DOM.i({className: "fa fa-circle-o"}), "   Sales Cycle"
          )
        )
      )
    );
  }
});

},{}]},{},[1])


},{}],2:[function(require,module,exports){
/** @jsx React.DOM */

/* TODO
 * 
 * - All count change, when prospect is archived
 * - When is list is chaanged from all and then returned to All prospects take a long     time to load
 * - Fix pagination issues
 *
 * - Parallelize Workers
 * - Scale up google scrape to hundreds of workers (heroku)
 *
 * - Company Shortcuts 
 * - Add ability to switch accounts for admins
 * - Add email uneditable email fields
 */

var Prospects = require('./prospects.js.min.js');
var CompanyProspect = require('./company.js.min.js');
var CompanyProspects = require('./company_prospects.js.min.js');
var DataTable = require('./data_table.js.min.js');
var MiningJob = require('./mining_job.js.min.js');
var Campaigns = require('./email.js.min.js');
var Analytics = require('./analytics.js.min.js');
var SignUp = require('./signup.js.min.js');
var Login = require('./login.js.min.js');
var LandingPage = require('./landing_page.js.min.js');
var LandingPage = require('./landing_page_concept.js.min.js');
var FreeTrial = require('./free_trial.js.min.js');
var Pricing = require('./pricing.js.min.js');
var Signals = require('./signals.js.min.js');
var MouseTrap = require('../lib/mousetrap.min.min.js')
//var checkAuth = require('./auth.min.js')

var Home = React.createClass({displayName: 'Home',
  componentWillMount: function(){
    checkAuth()
  },

  getInitialState: function() {
    // num_of_pages
    console.log(this.props)
    return {prospects: [] , 
            currentPage: 1, 
            pages: 1, 
            count:"~", 
            prospectType:'Prospect', 
            //selectedScreen:'Prospects'}
            selectedScreen: this.props.selectedScreen}
  },

  toggleScreen: function(e) {
    e.preventDefault()
    this.setState({selectedScreen : $(e.target).text().trim()})
  },

  logout: function() {
    localStorage.clear()
    location.href = "#get_started"
  },

  listDropdown: function() {
    console.log('dropdown')
    //$('.dropdown-menu').dropdown()
    $('.prospect-list-select').css('border-bottom-right-radius','0px')
    $('.prospect-list-select').css('border-bottom-left-radius','0px')
      
    $('.list-select-dropdown').css('border-top-left-radius','0px')
    $('.list-select-dropdown').css('border-top-right-radius','0px')
  },

  selectChange : function() {

  },

  stripeCheckout: function() {
    handler.open({
      name: 'Customero',
      description: 'Get 900 free email credits!',
      amount: 0,
      panelLabel: "Start Your Free Trial!",
      opened: function() {
      },
      closed: function() {
        console.log("closed")
        location.reload()
      }
    });
  },

  componentDidMount: function() {
    // Credit Card Verified Check
    localStorage.selectedProspects = "[]"
    currentUser = JSON.parse(localStorage.currentUser)
    if(!currentUser.creditCardVerified)
      this.stripeCheckout()

    /*
     * Make Request To Get Most Up to Date Info
     * On Success Add To Intercom
    */

    /*
    $.ajax({
      url:''
      success: function(res) {
        // Number of Prospects for user
        // Number of Lists
        // Number of Emails found
        Intercom('boot', {
          app_id: 'abc12345',
          email: 'john.doe@example.com',
          created_at: 1234567890,
          name: 'John Doe',
          user_id: '9876'
        });
      },
      error: function(err) {
      }
    });
    */
    // Intercom
    // Mixpanel
  },

  render: function() {
    prospects = "choose btn btn-primary "
    companyProspects = "choose btn btn-primary "
    campaigns = "choose btn btn-primary "
    signals = "choose btn btn-primary "
    switch (this.state.selectedScreen) {
      case 'Prospects':
        currentScreen = Prospects(null)
        prospects = "choose btn btn-primary app-active"
        location.href= "#prospects"
        break;
      case 'Companies':
        currentScreen = CompanyProspects(null)
        currentScreen = DataTable({listClassName: 'CompanyProspectList', 
                                   tableHeader: ['Name','Added On','Industry',
                                                 '# of Prospects','Signals',
                                                 '',''], 
                                   className: 'CompanyProspect'})
        location.href= "#companies"
        companyProspects = "choose btn btn-primary app-active"
        break;
      case 'Mining Jobs':
        currentScreen = MiningJob(null)
        break;
      case 'Analytics':
        currentScreen = Analytics(null)
        break;
      case 'Campaigns':
        currentScreen = Campaigns(null)
        campaigns = "choose btn btn-primary app-active"
        location.href= "#campaigns"
        break;
      case 'Signals':
        currentScreen = Signals(null)
        signals = "choose btn btn-primary app-active"
        location.href= "#signals"
        break;
      case 'Settings':
        currentScreen = Settings(null)
        break;
    }

    return (
      React.DOM.div(null, 
      React.DOM.br(null), 
      React.DOM.br(null), 
      React.DOM.div({className: "container"}, 
        React.DOM.h1({style: {fontWeight:'bold',display:'inline',fontWeight:'100',color:'#1ca3fd'}}, 
          React.DOM.img({src: "build/img/network.png", 
            style: { height:32, marginTop:-4,
              marginRight:5, }}
          ), 
          React.DOM.span({style: {fontWeight:'bold',fontSize:32,fontFamily:'Proxima-Nova'}}, "Customero ")
        ), 
      React.DOM.span({style: {float:'right'}}, 
        React.DOM.img({src: "build/img/user.png", style: {height:'40px',width:'40px',padding:'2px',marginTop:'5px',borderRadius:'23px',display:'inline'}, className: "thumbnail"}), "   ",  
        React.DOM.h6({style: {marginTop:'20px',float:'right',display:'inline'}}, "Welcome")
      ), 
      React.DOM.span({style: {float:'right', marginRight:'150px'}}, 
        React.DOM.h6({style: {marginTop:'20px',float:'right',display:'inline',}}, React.DOM.a({href: "javascript:", onClick: this.logout, style: {color:'#1ca3fd'}}, "Logout")), 
        React.DOM.h6({style: {marginTop:'20px',float:'right',display:'inline',marginRight:'10px'}}, React.DOM.a({href: "#pricing", style: {color:'#1ca3fd'}}, "Pricing")), 
        React.DOM.h6({style: {marginTop:'20px',float:'right',display:'inline', marginRight:'10px'}}, 
          React.DOM.a({href: "http://resources.customerohq.com", style: {color:'#1ca3fd'}}, "Resources")
        ), 
          React.DOM.a({href: "javascript:", 
            style: {marginTop:15, float:'right',marginRight:10,
                    backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}, 
            className: "btn btn-primary btn-xs", 
            onClick: this.downloadSocialProspecter}, 
            React.DOM.i({className: "fa fa-download"}), "  " + ' ' +
            "Download Chrome Social Prospecter"
          )
      ), 
      React.DOM.br(null), 
      React.DOM.br(null), 
        React.DOM.div({className: "panel panel-default"}, 
        React.DOM.div({id: "navbar", className: "panel-heading"}, 

          React.DOM.div({className: "btn-group col-md-offset-4"}, 
            React.DOM.a({href: "javascript:", className: signals, style: {display:'block'}, onClick: this.toggleScreen}, 
                React.DOM.i({className: "fa fa-wifi"}), " Signals"
            ), 
            React.DOM.a({href: "javascript:", className: prospects, onClick: this.toggleScreen}, 
                React.DOM.i({className: "fa fa-user"}), " Prospects"
            ), 
            React.DOM.a({href: "javascript:", className: "choose btn btn-primary", style: {display:'none'}, onClick: this.toggleScreen}, 
                React.DOM.i({className: "fa fa-bar-chart-o"}), " Analytics"
            ), 
            React.DOM.a({href: "javascript:", className: "choose btn btn-primary", 
                  style: {width:162,display:'none'}, 
                  onClick: this.toggleScreen}, 
                React.DOM.i({className: "fa fa-tasks"}), " Mining Jobs  ", 
                React.DOM.span({className: "label label-default"}, "BETA")
            ), 
            React.DOM.a({href: "javascript:", className: companyProspects, onClick: this.toggleScreen}, 
                React.DOM.i({className: "fa fa-building"}), " Companies"
            ), 
            React.DOM.a({href: "javascript:", className: campaigns, style: {display:'block'}, onClick: this.toggleScreen}, 
                React.DOM.i({className: "fa fa-envelope"}), " Campaigns"
            )
          )
        ), 

          currentScreen

        )
      )
      )
    );
  },
  
  downloadSocialProspecter: function() {
    //chrome.webstore.install('https://chrome.google.com/webstore/detail/ofcalkjbogaiipekcocdefjenclioeci')
    //chrome.webstore.install()
    window.open('https://chrome.google.com/webstore/detail/customero-prospecter/ofcalkjbogaiipekcocdefjenclioeci')
  },

  /*
          <a href="#" className="btn btn-success" onClick={this.downloadFile}
                  style={{float:'right',marginTop:'6px'}}>
            <i className="fa fa-download" />&nbsp;&nbsp;
            <h5 style={{display:'inline'}} >Download CSV</h5>
          </a>
  */

  deleteProspect: function(objectId, endpoint) {
    var filtered = _.filter(this.state.prospects, function(item) {
       return item.objectId != objectId
    });
    this.setState({prospects: filtered})

    $.ajax({
      url:'https://api.parse.com/1/classes/'+endpoint+'/'+objectId,
      type:'DELETE',
      headers: parse_headers,
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
      }
    });
  }
});


var Workspace = Backbone.Router.extend({
  routes: {
    //landing_page
    ""            : "prospects",
    "get_started" : "landing_page",
    "free_trial"  : "free_trial",
    "signup"      : "signup",
    "login"       : "login",
    "pricing"     : "pricing",
    
    "signals"     : "signals",
    "prospects"   : "prospects",
    "companies"   : "companies",
    "campaigns"   : "campaigns",

    "prospects/p:page"       : "prospects",
    "prospects/list/:list"   : "prospects_list",

    "companies/p:page"       : "companies",
    "companies/list/:list"   : "companies_list",

    "signals/profile/:profile"  : "signals_profile",
    "signals/calendar/:profile" : "signals_calendar",

    "campaigns/followup_feed"      : "campaigns",
    "campaigns/sent_emails"         : "campaigns",
    "campaigns/template/:template" : "campaigns",
  },

  mainRoute: function(route) {
    console.log(route)
    currentUser = localStorage.getItem('currentUser')
    $('#content').html('')
    if (currentUser) 
      React.renderComponent(Home({selectedScreen: route}), 
                            document.getElementById('content'));
    else
      location.href = "#get_started"
  },

  signals  : function() { this.mainRoute('Signals') },
  prospects: function() { this.mainRoute('Prospects') },
  companies: function() { this.mainRoute('Companies') },
  campaigns: function() { this.mainRoute('Campaigns') },

  home: function() {
    currentUser = localStorage.getItem('currentUser')
    if (currentUser) 
      React.renderComponent(Home({selectedScreen: "Prospects"}), 
                            document.getElementById('content'));
    else
      location.href = "#get_started"
  },
  landing_page: function() {
    React.renderComponent(LandingPage(), document.getElementById('content'));
  },
  free_trial: function() {
    React.renderComponent(FreeTrial(), document.getElementById('content'));
  },

  signup: function() {
    React.renderComponent(SignUp(), document.getElementById('content'));
  },
  login: function() {
    React.renderComponent(Login(), document.getElementById('content'));
  },
  pricing: function() {
    React.renderComponent(Pricing(), document.getElementById('content'));
  }
});

$(document).ready(function(){
  checkAuth()
  var workspace = new Workspace;
  Backbone.history.start();
});

},{"../lib/mousetrap.min.min.js":55,"./analytics.js.min.js":1,"./company.js.min.js":5,"./company_prospects.js.min.js":6,"./data_table.js.min.js":18,"./email.js.min.js":21,"./free_trial.js.min.js":24,"./landing_page.js.min.js":25,"./landing_page_concept.js.min.js":26,"./login.js.min.js":28,"./mining_job.js.min.js":30,"./pricing.js.min.js":35,"./prospects.js.min.js":36,"./signals.js.min.js":46,"./signup.js.min.js":47}],3:[function(require,module,exports){
/** @jsx React.DOM */
var TemplatesMenu = require('./templates_menu.js.min.js');
var EditTemplateView = require('./edit_template.js.min.js');
var CreateTemplateView = require('./create_template.js.min.js');
var FollowupTimeline = require('./followup_timeline.js.min.js');

module.exports = React.createClass({displayName: 'exports',
  // Campaign Detail
  getInitialState: function() {
    return {
      selectedTemplate: 0,
      templateDetailMode: false,
      editMode: false,
      followupDay: 0,
      templates:[],
      currentTemplate:'',
      prospectListCount:'~',
      prospects:[],
    }
  },

  componentDidMount: function() {
     thissss = this;
     company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
     qry = 'where={"company":'+company+'}'
    $.ajax({
      url:'https://api.parse.com/1/classes/Template',
      headers: appConfig.headers,
      data: qry,
      success: function(res) { thissss.setState({templates: res.results}) },
      error: function(err) { console.log('error') }
    });

    currentList = JSON.stringify({
      '__type'    : 'Pointer', 
      'className' : 'ProspectList',
      'objectId'  : this.props.selectedCampaign.prospect_list.objectId, 
    })
    qry = 'where={"lists":'+currentList+'}&limit=1000&count=1'
    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospect',
      headers: appConfig.headers,
      data: qry,
      success: function (res) {
        thissss.setState({
          prospects: res.results,
          prospectListCount: res.count 
        })
      },
      error: function(err) { }
    })
  },

  returnToOverview: function() {
    this.props.toggleScreen('Campaigns')
  },

  render: function() {
    //console.log('campaign detail')
    thiss = this;
    return (
      React.DOM.div({className: "container", 
           style: {width:'100%',height:'100%',paddingLeft:0,paddingRight:0}}, 
        React.DOM.div({style: {marginBottom:30}, id: "campaign-top-detail"}, 
        React.DOM.h5({style: {marginTop:20,marginLeft:20}}, 
          React.DOM.a({href: "javascript:", onClick: this.returnToOverview}, "Campaigns "), 
          React.DOM.small(null, 
            React.DOM.i({style: {marginLeft:10, marginRight:10}, 
               className: "fa fa-chevron-right"})
          ), 
          this.props.selectedCampaign.name
        ), 
        React.DOM.h6({style: {marginLeft:20,display:'inline-block',marginRight:15}}, 
          React.DOM.span({className: "text-muted"}, "Prospect List:"), "  ", 
          (this.props.selectedCampaign.prospect_list.signal_list) ? React.DOM.span(null, React.DOM.i({className: "fa fa-wifi"}), " ") : "", 
          this.props.selectedCampaign.prospect_list.name
        ), 
        React.DOM.span({className: "badge"}, this.state.prospectListCount), 

        React.DOM.h6({style: {marginLeft:20,display:'inline-block',marginRight:15}}, 
          "Batches :"
        ), 
        React.DOM.span({className: "badge"}, "2"), 
        React.DOM.a({href: "javascript:", 
           style: {float: 'right', marginTop: -35, marginRight: 30, display:'none'}, 
           className: "btn btn-success btn-sm"}, 
          React.DOM.i({className: "fa fa-envelope"}), " Send!"
        )
        ), 
          React.DOM.div({className: "col-md-8 panel panel-default", 
               style: {height:'443px',paddingLeft:305,paddingTop:50,overflow:'auto',borderRight:0,borderRadius:0}}, 
               FollowupTimeline({
                  templates: this.state.templates, 
                  prospects: this.state.prospects, 
                  currentCampaign: this.props.selectedCampaign, 
                  toggleTemplateEditMenu: this.toggleTemplateEditMenu, 
                  initialFollowups: this.props.selectedCampaign.followups})
          ), 
          React.DOM.div({className: "col-md-4", 
               style: {paddingLeft:0,paddingRight:0,height:443}}, 
            TemplatesMenu({
              templates: this.state.templates, 
              toggleTemplateEditMenu: this.toggleTemplateEditMenu})
          ), 

          (this.state.templateDetailMode) ? EditTemplateView({
            editMode: this.state.editMode, 
            initialTemplateValues: this.state.currentTemplate, 
            saveTemplate: this.saveTemplate, 
            prospect: this.state.prospects[0], 
            toggleTemplateEditMenu: this.toggleTemplateEditMenu, 
            followupDay: this.state.followupDay}) : ""
      )
    );
  },

  saveTemplate: function(template, newTemplate) {
    templates = this.state.templates
    for(i=0;i< this.state.templates.length; i++)
      if(this.state.templates[i].name == template.name)
        break
    
    console.log(template)
    if(newTemplate){
      template.subject = template.subject
      template.name = template.name
      template.body = template.body
      templates.push(template)

      $.ajax({
        url:'https://api.parse.com/1/classes/Template',
        headers:appConfig.headers,
        type:'POST',
        data:JSON.stringify({
          name : template.name,
          subject: template.subject,
          body: template.body,
          user:{
            __type: 'Pointer',
            className:'_User',
            objectId:JSON.parse(localStorage.currentUser).objectId,
          },
          company:JSON.parse(localStorage.currentUser).company,
        }),
        success: function(res) {
          console.log(res)
        },
        error: function() {
        }
      })
    } else {
      templates[i].subject = template.subject
      templates[i].body = template.body

      $.ajax({
        url:'https://api.parse.com/1/classes/Template/'+templates[i].objectId,
        type:'PUT',
        headers:appConfig.headers,
        data:JSON.stringify({
          name : template.name,
          subject: template.subject,
          body: template.body,
        }),
        success: function(res) {
          console.log(res)
        },
        error: function() {
        }
      })
    }

    this.setState({templates: templates })

  },

  toggleTemplateEditMenu: function(currentTemplate, editMode) {
    editMode = (editMode) ? true : false
    this.setState({
      currentTemplate: currentTemplate,
      templateDetailMode: !this.state.templateDetailMode,
    })
  }
});

},{"./create_template.js.min.js":16,"./edit_template.js.min.js":20,"./followup_timeline.js.min.js":23,"./templates_menu.js.min.js":49}],4:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Campaigns
  getInitialState: function() {
    return {
      selectedScreen: 'Overview',
    }
  },

  changeSelectedCampaign: function(campaign) {
    //this.props.toggleScreen('CampaignDetail')
    this.props.changeSelectedCampaign('CampaignDetail', campaign)
  },

  render: function() {
    campaigns = []
    console.log(this.props)
    for(i=0;i< this.props.campaigns.length; i++){ 
      campaigns.push(CampaignRow({
                        toggleScreen: this.toggleScreen, 
                        changeSelectedCampaign: this.changeSelectedCampaign, 
                        campaign: this.props.campaigns[i]}) )
    }
    return (
      React.DOM.div({style: {overflow:'auto',height:550}}, 
        React.DOM.table({className: "table table-striped"}, 
          React.DOM.thead(null, 
            React.DOM.th(null), 
            React.DOM.th(null, "Campaign Name"), 
            React.DOM.th(null, "Prospect List"), 
            React.DOM.th({style: {textAlign:'center'}}, "Delivered"), 
            React.DOM.th({style: {textAlign:'center'}}, "Opened"), 
            React.DOM.th({style: {textAlign:'center',display:'none'}}, "Replied"), 
            React.DOM.th({style: {textAlign:'center',display:'none'}}, "Link Clicks"), 
            React.DOM.th({style: {textAlign:'center'}}, "Bounces"), 
            React.DOM.th({style: {width:150,textAlign:'center'}}, " ")
          ), 
          React.DOM.tbody(null, 
            campaigns
          )
        )
      )
    );
  }
});

var CampaignRow = React.createClass({displayName: 'CampaignRow',
  toggleScreen: function() {
    //this.props.toggleScreen()
    this.props.changeSelectedCampaign(this.props.campaign)
  },

  render: function() {
    prospect_list = (this.props.campaign.prospect_list) ? this.props.campaign.prospect_list : {list_type:"", name:""}
    if(prospect_list.list_type == "signal_list")
        iconType = React.DOM.i({className: "fa fa-wifi", style: {marginRight:5}})
    else if(prospect_list.list_type == "mining_job")
        iconType = React.DOM.i({className: "fa fa-cloud-download", style: {marginRight:5}})
    else 
        iconType =""
    return (
      React.DOM.tr({style: {cursor:'pointer'}, onClick: this.toggleScreen}, 
        React.DOM.td(null), 
        React.DOM.td(null, " ", React.DOM.h6(null, 
            this.props.campaign.name
        ), " "), 
        React.DOM.td(null, " ", React.DOM.h6(null, 
            iconType, 
            prospect_list.name
        ), " "), 
        React.DOM.td({style: {textAlign:'center',padding:12}}, 
          React.DOM.span({className: "badge", style: {backgroundColor:'#f0ad4e'}}, 
            React.DOM.i({className: "fa fa-paper-plane"}), "  " + ' ' +
            "100%"
          )
        ), 
        React.DOM.td({style: {textAlign:'center',padding:12}}, 
          React.DOM.span({className: "label label-success"}, 
            React.DOM.i({className: "fa fa-eye"}), "  " + ' ' +
            "100%")
        ), 
        React.DOM.td({style: {textAlign:'center',padding:12,display:'none'}}, 
          React.DOM.span({className: "label label-primary"}, 
            React.DOM.i({className: "fa fa-mail-reply"}), "  " + ' ' +
            "100%")
        ), 
        React.DOM.td({style: {textAlign:'center',padding:12,display:'none'}}, 
          React.DOM.span({className: "label label-info"}, 
            React.DOM.i({className: "fa fa-external-link-square"}), "  " + ' ' +
            "18%")
        ), 
        React.DOM.td({style: {textAlign:'center',padding:12}}, 
          React.DOM.span({className: "label label-default"}, 
            React.DOM.i({className: "fa fa-exclamation-circle"}), "  " + ' ' +
            "11%")
        ), 
        React.DOM.td({style: {textAlign:'center',paddingTop:12}}, 
          React.DOM.a({href: "javascript:", className: "btn btn-primary btn-xs", 
            style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%) !important;',display:'none'}}, 
            React.DOM.i({className: "fa fa-copy", style: {fontWeight:'bold'}}), "  Clone"), 
          React.DOM.a({href: "javascript:", className: "btn-default", 
            style: {marginLeft:5}}, " ", React.DOM.i({className: "fa fa-trash-o"}))
        ), 
        React.DOM.td({style: {textAlign:'center',padding:12,display:'none'}}, 
          React.DOM.h4({style: {margin:0}}, 
            React.DOM.span({className: "label label-success"}, "Ready")
          )
        )
      )
    )
  }
});

},{}],5:[function(require,module,exports){
/** @jsx React.DOM */
// 

module.exports = React.createClass({displayName: 'exports',
  //CompanyProspect
  render: function () {
    prospect = this.props.prospect
    website = (prospect.website) ? React.DOM.a({href: 'http://'+prospect.website}, React.DOM.i({className: "fa fa-globe"})) : ''
    linkedin_profile = (prospect.profile != "") ? React.DOM.a({href: prospect.profile}, React.DOM.i({className: "fa fa-linkedin-square"})) : ''

  /*
            <a href="javascript:" className="btn btn-success btn-xs"
              style={{background: 'linear-gradient(#34c520,#219211)'}}> 
              <i className="fa fa-search" /> &nbsp;
              Find Prospects
            </a>
  */

  console.log

  //<td><a href="javascript:" onClick={this.deleteProspect}><i className="fa fa-times-circle" /></a></td>
    return (
        React.DOM.tr(null, 
          React.DOM.td({style: {width:'300px'}}, 
            React.DOM.span({style: {fontWeight:'bold'}}, prospect.name), 
            React.DOM.h6({style: {fontWeight:'400',margin:'0px'}}, prospect.headcount)
          ), 
          React.DOM.td(null, 
            React.DOM.h6({style: {margin:'0px'}}, moment(prospect.createdAt,'YYYY-MM-DDTh:mm:ss').fromNow())), 
          React.DOM.td(null, 
            React.DOM.h6({style: {margin:'0px'}}, prospect.industry)
          ), 
          React.DOM.td({style: {textAlign:'center',width:137,display:'none'}}, 
            React.DOM.span({className: "label label-primary", style: {display: 'block', width: 'auto', marginRight: 'auto', marginLeft: 'auto', width: '25px'}}, "0")
          ), 
          React.DOM.td({style: {display:'none'}}, 
            React.DOM.span({className: "label label-info"}, "Hiring")), 
          React.DOM.td({style: {width:320}}, 
            "   ", 
            React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", 
              onClick: this.openLinkedinCompanyProfile, 
              style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
              React.DOM.i({className: "fa fa-search"}), "  " + ' ' +
              "Search Profiles"
            ), 
            "   ", 
            React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", 
              onClick: this.openSimilarCompanies, 
              style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
              React.DOM.i({className: "fa fa-copy"}), "  " + ' ' +
              "Find Similar Companies"
            )
          ), 
          React.DOM.td(null, " ", linkedin_profile, "   ", website, " ")
        )
    );
  },

  openLinkedinCompanyProfile: function(e) {
    e.preventDefault()
    cid = this.props.prospect.profile.split('?')[0].split('/company/')[1]
    window.open("https://www.linkedin.com/vsearch/p?f_CC="+cid)
    e.stopPropagation()
  },

  openSimilarCompanies: function(e) {
    cid = this.props.prospect.profile.split('?')[0].split('/company/')[1]
    window.open("https://www.linkedin.com/vsearch/c?rsid=526440371409184768175&pivotType=sim&pid="+cid+"&trk=sim_companies_res_sim&trkInfo=VSRPsearchId%3A526440371409184768175%2CVSRPtargetId%3A1025%2CVSRPcmpt%3Aprimary")
  },

  deleteProspect: function() {
    this.props.deleteProspect(this.props.prospect.objectId, 'CompanyProspect')
  }
});

},{}],6:[function(require,module,exports){
/** @jsx React.DOM */

var CompanyProspect = require('./company.js.min.js');
var LoadingSpinner = require('./loading_spinner.js.min.js')
var SideMenuProspects = require('./side_menu_user_prospects.js.min.js');

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {  prospects   : [],
              currentPage : 1,
              loading     : true,
              pages       : 1,
              count       : "~", }
  },
  /*
   *
    cid = this.props.prospect.profile.split('?')[0].split('/company/')[1]
    console.log(this.props)
    window.open("https://www.linkedin.com/vsearch/p?f_CC="+cid)
  */
  
  render: function() {
    console.log('company')
    prospects = []
    for(i=0;i<this.state.prospects.length;i++) {
      url = this.state.prospects[i].url

      if(url != "no linkedin website" && typeof(url) != "undefined" && url != ""){
        url = url.replace('http://','')
        the_link = React.DOM.a({href: 'http://'+url}, React.DOM.i({className: "fa fa-globe"}))
      } else {
        the_link = ""
      }

      profile = this.state.prospects[i].profile
      //profile = profile.replace('http://','')
      li = React.DOM.a({href: 'http://'+profile}, React.DOM.i({className: "fa fa-linkedin-square"}))

      if(this.props.prospectType == 'Prospect') {
        prospects.push(
          UserProspect({deleteProspect: this.deleteProspect, 
                        prospect: this.state.prospects[i], 
                        key: this.generate_id(), 
                        link: the_link, li: li})
        )
      } else {
        prospects.push(
          CompanyProspect({deleteProspect: this.deleteProspect, 
                           key: this.generate_id(), 
                           prospect: this.state.prospects[i]})
        )
      }
    }

    previous = (this.state.currentPage - 1) ? '' : 'disabled'
    forward = (this.state.currentPage == this.state.pages) ? 'disabled' : ''

    lowerLimit = (this.state.currentPage-1)*100
    upperLimit = this.state.currentPage*100

    lowerLimit = (lowerLimit) ? lowerLimit : 1
    upperLimit = (upperLimit > this.state.count) ? this.state.count : upperLimit
  
    console.log(prospects.length)
    companyStyle= (prospects.length) ? {padding:'0'} : {display:'none'}

    return (
      React.DOM.div(null, 
      React.DOM.div({className: "container bg-radius", style: {width:'100%',padding:'0'}}, 
        (prospects.length == 0 && this.state.loading == false) ? EmptyCompanyProspectsPanel(null) : "", 
        (this.state.loading) ? LoadingSpinner(null) : "", 
        React.DOM.div({className: "col-md-12", style: companyStyle}, 
          React.DOM.div({id: "autoscroll", style: {height:'400px',overflow:'auto'}}, 
            React.DOM.table({className: "table table-striped"}, 
              React.DOM.thead({style: {backgroundColor:'white'}}, 
                CompanyProspectHeader(null)
              ), 
              React.DOM.tbody(null, 
                prospects
              )
            )
          )
        )
      ), 
        React.DOM.div({className: "panel-footing", id: "navbar", style: {height:'35px',padding:'0px',paddingTop:'7px'}}, 
          React.DOM.span({style: {float:'right',marginRight:'20px'}}, 
          React.DOM.a({href: "javascript:", style: {marginRight:'5px'}, onClick: this.paginatePrevious, className: "blue-gradient btn btn-primary btn-xs " + previous}, React.DOM.i({className: "fa fa-fast-backward"})), 
          React.DOM.a({href: "javascript:", onClick: this.paginatePrevious, className: "blue-gradient btn btn-primary btn-xs " + previous}, React.DOM.i({className: "fa fa-chevron-left"})), 
          "   ", 
          React.DOM.span({className: ""}, lowerLimit + ' - '+upperLimit+' of '+this.state.count), 
          "   ", 
          React.DOM.a({href: "javascript:", onClick: this.paginateForward, className: "blue-gradient btn btn-primary btn-xs " + forward}, React.DOM.i({className: "fa fa-chevron-right"})), 
          React.DOM.a({href: "javascript:", style: {marginLeft:'5px'}, onClick: this.paginateForward, className: "blue-gradient btn btn-primary btn-xs " + forward}, React.DOM.i({className: "fa fa-fast-forward"}))
          )
        )
      )
    );
  },

  componentDidMount: function() {
    thisss = this;
    parse_headers = {'X-Parse-Application-Id':'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 'X-Parse-REST-API-Key':'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb'}
    company = JSON.stringify(JSON.parse(localStorage.currentUser).company)

    $.ajax({
      url: 'https://api.parse.com/1/classes/CompanyProspect',
      type:'GET',
      headers: parse_headers,
      async: true,
      data: 'where={"company":'+company+'}&count=1&order=-createdAt',
      success: function(res){
        thisss.setState({prospects: res.results})
        thisss.setState({count: res.count})
        thisss.setState({pages: Math.ceil(res.count/100)})
        thisss.setState({loading: false})
      },
      error: function(res){
        console.log('error')
        console.log(res)
      }
    });
  },

  generate_id : function () {
    return '_' + Math.random().toString(36).substr(2, 9);
  },
});

var SideMenuCompanyProspects = React.createClass({displayName: 'SideMenuCompanyProspects',
  render: function() {
        
    return (
      React.DOM.div({className: "col-md-2", style: {padding:'0',height:'400px',backgroundColor:'#e0e9ee',borderRight:'1px solid #b0b8bf',textAlign:'center'}}, 
        React.DOM.div({className: "prospect-list-header"}, 
          "Lists"
        ), 
        React.DOM.div({className: "btn-group-vertical", style: {width:'100%'}}, 
          React.DOM.button({type: "button", className: "list-names btn btn-default"}, "Templates"), 
          React.DOM.button({type: "button", className: "list-names btn btn-default"}, "Schedules"), 
          React.DOM.button({type: "button", className: "list-names btn btn-default"}, "Rules")
        ), 
        React.DOM.br(null), 
        React.DOM.br(null), 
        React.DOM.a({href: "javascript:", className: "btn btn-primary", 
              style: { backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
          React.DOM.i({className: "fa fa-plus-circle"}), " New Class"
        ), 
        React.DOM.br(null)
      )
    );
  },

  paginatePrevious: function() {
    console.log('previous')
    console.log((this.state.currentPage - 1)*100)
    thiss = this;
    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospect?skip='+(thiss.state.currentPage-2)*100,
      type:'GET',
      headers: parse_headers,
      data: 'where={"company":'+company+'}&count=1',
      success: function(res){
        thiss.setState({prospects: res.results})
        thiss.setState({currentPage: thiss.state.currentPage - 1})
      },
      error: function(res){
        console.log(res)
      }
    });
  },

  paginateForward: function() {
    console.log('forward')

    thiss = this;
    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospect?skip='+thiss.state.currentPage*100,
      type:'GET',
      headers: parse_headers,
      data: 'where={"company":'+company+'}&count=1',
      success: function(res){
        thiss.setState({prospects: res.results})
        thiss.setState({currentPage: thiss.state.currentPage + 1})
      },
      error: function(res){
        console.log(res)
      }
    });
  },
});

var EmptyCompanyProspectsPanel = React.createClass({displayName: 'EmptyCompanyProspectsPanel',
  openLinkedinWindow: function() {
    window.open('https://www.linkedin.com/vsearch/c?type=companies')
  },

  render: function() {
    return (
      React.DOM.div({className: "col-md-offset-3 col-md-6", style: {height:400}}, 
      React.DOM.div({className: "panel panel-default", style: {marginTop:100,height:200}}, 
        React.DOM.div({className: "panel-body"}, 
          React.DOM.h1({className: "lead", style: {textAlign:'center'}}, "Start Prospecting On Linkedin"), 
          React.DOM.a({href: "javascript:", onClick: this.openLinkedinWindow, className: "btn btn-success", style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%) !important',display:'block',marginRight:'auto',marginLeft:'auto',width:200, marginTop:50}}, 
            React.DOM.i({className: "fa fa-search"}), "  " + ' ' +
            "Search for companies!")
        )
      )
    )
    );
  }
});

var CompanyProspectHeader = React.createClass({displayName: 'CompanyProspectHeader',
  render: function() {
    return (
      React.DOM.tr(null, 
        React.DOM.th(null, "Name"), 
        React.DOM.th(null, "Added On"), 
        React.DOM.th(null, "Industry"), 
        React.DOM.th(null, "# of Prospects"), 
        React.DOM.th(null, "Signals"), 
        React.DOM.th(null, " "), 
        React.DOM.th(null, " ")
      )
    );
  }
});

},{"./company.js.min.js":5,"./loading_spinner.js.min.js":27,"./side_menu_user_prospects.js.min.js":41}],7:[function(require,module,exports){
/** @jsx React.DOM */


module.exports = React.createClass({displayName: 'exports',
  // SignalCard
  render: function() {
    company = this.props.company
    return (
      React.DOM.div({className: "panel panel-default signal-card"}, 
        React.DOM.div({className: "panel-body", style: {paddingLeft:25, paddingRight:25}}, 
          React.DOM.h4({style: {display:'inline-block',width:'100%'}}, 
            React.DOM.span({style: { float:'left',maxWidth: '60%', whiteSpace: 'nowrap',
                overflow: 'hidden', textOverflow: 'ellipsis'}}, 
              company.name), 
            React.DOM.span({className: "label label-success", 
              style: {marginLeft:7, float:'right',fontSize:12,
                maxWidth: '40%', whiteSpace: 'nowrap',
                overflow: 'hidden', textOverflow: 'ellipsis'}}, 
              React.DOM.i({className: "fa fa-suitcase"}), "  ", 
              (company.signals) ? company.signals[0].job_title : ""
            )
          ), 
          React.DOM.a({href: "javascript:", className: "btn btn-success", 
            style: {float:'right',marginTop:15, fontWeight:'bold'}}, 
            "Prospect This Company"), 
          React.DOM.p({style: {fontSize:12,width:'75%'}}, 
            React.DOM.span(null, 
            (company.signals) ? company.signals[0].summary : ""
            )
          ), 
          React.DOM.h6(null, " ", React.DOM.i({className: "fa fa-map-marker"}), 
             " ", (company.signals) ? company.signals[0].location : ""
            )
        )
      )
    );
  }
});

},{}],8:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createListModal
  createList: function() {
    console.log($('#listTitle').val())

    data =  {
      'name'        : $('#listTitle').val().trim(),   //Waiting , Running
      'user'        : { '__type':'Pointer',
                      'className':'_User',
                      'objectId':'xWESiw5Smd' },
    }

    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectList',
      type:'POST',
      headers: appConfig.parseHeaders,
      data: JSON.stringify(data),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });

    data.count = 0

    this.props.createList(data)
    
    $('#createListModal').modal('hide')
    $('body').removeClass('modal-open');
    $('.modal-backdrop').remove();
    //$('button.close').click()
  },

  createCampaign: function(e) {
    e.preventDefault()
    //console.log($('#newListName').val())
    newCampaignName = $('#newCampaignName').val()
    prospectListName = $('#prospect_lists').val()
    thiss = this
    for(i=0;i< this.props.prospectLists.length; i++){
      if(this.props.prospectLists[i].name == prospectListName){
        prospect_list = this.props.prospectLists[i]; 
        break;
      }
    }
    if(newCampaignName.trim() != "")
      this.props.createCampaign({
        name: newCampaignName,
        prospect_list: prospect_list
      })
    // Disable Modal
    $('.modal-backdrop').click()
    $('.fade').click()
    $('#newCampaignName').val('')
  },

  render: function() {
    prospect_lists = []
    for(i=0;i< this.props.prospectLists.length; i++) {
      prospect_lists.push( React.DOM.option(null, this.props.prospectLists[i].name))
    }

    return (
      React.DOM.div({className: "modal fade bs-createCampaign-modal-sm", 
           tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 
           'aria-hidden': "true", id: "createListModal", style: {top:'200px'}}, 
            React.DOM.div({className: "modal-dialog modal-sm"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-envelope"}), "  Create Campaign")
                ), 

                React.DOM.div({className: "modal-body"}, 
                  React.DOM.form({onSubmit: this.createCampaign}, 
                    React.DOM.input({id: "newCampaignName", 
                           type: "text", 
                           placeholder: "Enter Campaign Name...", 
                           className: "form-control"}), 

                    React.DOM.select({className: "form-control", 
                            id: "prospect_lists", 
                            style: {marginTop:20,marginBottom:20}}, 
                      prospect_lists
                    ), 

                    React.DOM.a({href: "javascript:", 
                      onClick: this.createCampaign, 
                      className: "btn btn-success", 
                      style: {display:'block', width:'100%'}}, 
                      "Create Campaign"
                    )
                  )
                )
              )
            )
          )
    );
  }
});


},{}],9:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createCompanyProfileModal
  render: function() {
    return (
      React.DOM.div({className: "modal fade bs-createSignal-modal-md", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", 
           id: "createCompanyProfileModal", 
           style: {top:'50px',overflow:'hidden'}}, 
            React.DOM.div({className: "modal-dialog modal-sm", style: {width:650}}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    "Create Company Profile"
                  ), 
                  React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                     onClick: this.createCompanyProfile, 
                     style: {float:'right',marginTop:-28,marginRight:-5}}, 
                    "Create Profile"
                  )
                ), 
                React.DOM.div({className: "modal-body"}, 
                  CreateHiringSignal(null)
                ), 
              React.DOM.div({className: "modal-footer", style: {display:'none'}}, 
                React.DOM.button({type: "button", className: "btn btn-default"}, 
                  "Close"
                ), 
                React.DOM.button({type: "button", className: "btn btn-primary"}, 
                  "Send Email"
                )
              )
              )
            )
          )
    );
  },

  createCompanyProfile: function() {
    profileName = $(".company-profile-name").val()
    industryProfile = {
      'className': 'IndustryProfile',
      'industries' : $('.company-profile-industries').tagsinput('items').reverse()
    }

    locationProfile = {
      'className': 'LocationProfile',
      'locale'    : $('.company-profile-location').tagsinput('items').reverse()
    }

    employeeProfile = {
      'className':'EmployeeProfile', 
      'employees': _.map($('#company-profile-employeeBtns').find('.active'), 
                        function(revBtn){ return $(revBtn).text().trim() }).reverse()
    }

    revenueProfile = {
      'className':'RevenueProfile', 
      'revenues': _.map($('#company-profile-companyRevenueBtns').find('.active'), 
                        function(revBtn){ return $(revBtn).text().trim() }).reverse()
    }

    console.log(locationProfile)
    
    profiles = [industryProfile, locationProfile,
                employeeProfile, revenueProfile]

    nonemptyProfiles = _.filter(profiles, function(profile) {
      if(_.values(profile)[1]){ return _.values(profile)[1].length }
    });

    newProfile = {
      name: profileName,
      profiles: nonemptyProfiles,
      mining_job:true,
      user:{
        __type:'Pointer',
        className:'_User',
        objectId:JSON.parse(localStorage.currentUser).objectId
      },
      company: JSON.parse(localStorage.currentUser).company
    }

    if(nonemptyProfiles.length) {
      this.persistSignal(nonemptyProfiles, 
                         _.omit(newProfile,'profiles'))
      this.props.addProfile(newProfile)
      $('.modal').click()
    }
  },

  persistSignal: function(nonemptyProfiles, newProfile) {
    console.log('NEW PROFILE')
    console.log(newProfile)
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectProfile',
      headers:appConfig.headers,
      type:'POST',
      data:JSON.stringify(newProfile),
      success:function(ress) {
        // Add Signal List
        _.map(nonemptyProfiles, function(profile) {
          $.ajax({
            url:'https://api.parse.com/1/classes/'+_.values(profile)[0],
            headers:appConfig.headers,
            type:'POST',
            data:JSON.stringify( _.pick(profile, _.keys(profile)[1]) ),
            success:function(res) {
              $.ajax({
                url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
                type:'PUT',
                headers:appConfig.headers,
                data:JSON.stringify({profiles:{
                  __op: 'AddUnique',
                  objects:[{
                    __type:'Pointer',
                    className: _.values(profile)[0],
                    objectId:res.objectId
                  }]}
                }),
              })
            },
          })
        });

      },
    })
  },

});

var CreateHiringSignal = React.createClass({displayName: 'CreateHiringSignal',
  componentDidMount: function() {
    _.map($('.hiring-role'),function(input){$(input).tagsinput()})
    $(this.getDOMNode()).find('.hiring-role').tagsinput()
    $('.bootstrap-tagsinput').width(400)

    $(this.getDOMNode()).find('.btn-default').click(function(e) {

      if($(e.target).parent('label').hasClass('active'))
        $(e.target).parent('label').removeClass('active')
      else
        $(e.target).parent('label').addClass('active')

      console.log($(e.target).parent('label'))
    });
  },

  render: function(){
    return (
      React.DOM.div(null, 
        React.DOM.form({className: "createSignal", onSubmit: this.createSignal}, 
          React.DOM.span(null, 
            React.DOM.h6({style: {width:140,display:'inline-block',marginBottom:20}}, 
              "Company Profile Name:  "), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%'}, 
                   className: "form-control company-profile-name", 
                   placeholder: "Company Profile Name ..."})
          ), 
          React.DOM.br(null), 
          React.DOM.span({style: {display:'block',marginBottom:-10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, 
              "Industries:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control hiring-role company-profile-industries"}), 

                React.DOM.a({href: "javascript:", 
                   className: "btn btn-xs btn-success", style: {display:'none'}}, 
                  React.DOM.i({className: "fa fa-plus"})
                )
          ), 
          React.DOM.br(null), 
          React.DOM.span({style: {display:'block',marginBottom:-10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, 
              "Location:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control hiring-role company-profile-location"}), 

            React.DOM.a({href: "javascript:", 
               className: "btn btn-xs btn-success", style: {display:'none'}}, 
              React.DOM.i({className: "fa fa-plus"})
            )
          ), 
        React.DOM.div(null, 
            React.DOM.br(null), 
            React.DOM.h6({style: {display:'inline-block',margin:0,
                        width:140,marginBottom:20}}, "Company Size "), 
              React.DOM.div({className: "btn-group", 'data-toggle': "buttons", 
                style: {width:'73.5%'}, 
                id: "company-profile-employeeBtns"}, 
                React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                  React.DOM.input({type: "checkbox"}), " 1 - 50"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                  React.DOM.input({type: "checkbox"}), " 50 - 250"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                  React.DOM.input({type: "checkbox"}), " 250 - 1000"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                  React.DOM.input({type: "checkbox"}), " 1000 +"
                )
              ), 

              React.DOM.br(null), " ", React.DOM.h6({style: {display:'none',margin:0,width:140}}, 
                "Approx. Revenue  "), 
              React.DOM.div({className: "btn-group", 'data-toggle': "buttons", 
                style: {display:'none'}, 
                id: "company-profile-companyRevenueBtns"}, 
                React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                  React.DOM.input({type: "checkbox"}), " ", '< $1M'
                ), 
                React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                  React.DOM.input({type: "checkbox"}), " $1M - $5M"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                  React.DOM.input({type: "checkbox"}), " $5M - $25M"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                  React.DOM.input({type: "checkbox"}), " $25M +"
                )
              )
        ), 

          React.DOM.div({style: {marginTop:10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, "Auto Prospect:  "), 
            React.DOM.div({className: "btn-group autoprospect", 'data-toggle': "buttons"}, 
              React.DOM.label({className: "btn btn-sm btn-default active"}, 
                React.DOM.input({type: "radio"}), " Yes"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "radio"}), " No"
              )
            )
          )
        )
      )
    )
  },
});

},{}],10:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createCompanyProfileModal
  createProfile: function(e) {
    e.preventDefault()
    profileName = $('.funding-profile-name').val()
    
    //Stage
    //Amount Raised
    //Company Size
    //Approx Revenue

    amountRaisedProfile = {
      'className':'FundingProfile', 
      'revenues': _.map($('#amountRaisedBtns').find('.active'), 
                        function(revBtn){ return $(revBtn).text().trim() }).reverse()
    }

    console.log(amountRaisedProfile)
    profiles = [amountRaisedProfile]

    nonemptyProfiles = _.filter(profiles, function(profile) {
      if(_.values(profile)[1]){ return _.values(profile)[1].length }
    });

    newProfile = {
      name: profileName,
      profiles: nonemptyProfiles,
      user:{
        __type:'Pointer',
        className:'_User',
        objectId:JSON.parse(localStorage.currentUser).objectId
      },
      company: JSON.parse(localStorage.currentUser).company
    }

    if(nonemptyProfiles.length) {
      this.persistSignal(nonemptyProfiles.reverse(), 
                         _.omit(newProfile,'profiles'))

      this.props.addProfile(newProfile)
      $('.modal').click()
    }
  },

  persistSignal: function(nonemptyProfiles, newProfile) {
    console.log('NEW PROFILE')
    console.log(newProfile)
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectProfile',
      headers:appConfig.headers,
      type:'POST',
      data:JSON.stringify(newProfile),
      success:function(ress) {
        // Add Signal List
        _.map(nonemptyProfiles, function(profile) {
          $.ajax({
            url:'https://api.parse.com/1/classes/'+_.values(profile)[0],
            headers:appConfig.headers,
            type:'POST',
            data:JSON.stringify( _.pick(profile, _.keys(profile)[1]) ),
            success:function(res) {
              $.ajax({
                url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
                type:'PUT',
                headers:appConfig.headers,
                data:JSON.stringify({profiles:{
                  __op: 'AddUnique',
                  objects:[{
                    __type:'Pointer',
                    className: _.values(profile)[0],
                    objectId:res.objectId
                  }]}
                }),
              })
            },
          })
        });

      },
    })
  },

  render: function() {
    return (
      React.DOM.div({className: "modal fade ", tabIndex: "-1", role: "dialog", 
           'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", 
           id: "createFundingSignalModal", 
           style: {top:'50px',overflow:'hidden'}}, 
            React.DOM.div({className: "modal-dialog modal-sm", style: {width:650}}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    "Create Funding Signal"
                  ), 
                  React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                     onClick: this.createProfile, 
                     style: {float:'right',marginTop:-28,marginRight:-5}}, 
                    "Create Profile"
                  )
                ), 
                React.DOM.div({className: "modal-body"}, 

                  React.DOM.div(null, 
                    React.DOM.form({className: "createSignal", onSubmit: this.createProfile}, 
                      React.DOM.span(null, 
                        React.DOM.h6({style: {width:140,display:'inline-block',
                                    marginBottom:20}}, 
                          "Funding Profile Name:  "), 
                        React.DOM.input({type: "text", 
                               style: {display:'inline-block',width:'73.1%'}, 
                               className: "form-control funding-profile-name", 
                               placeholder: "Funding Profile Name ..."})
                      ), 
                      CompanyProfile(null), 

                      React.DOM.div({style: {marginTop:10,display:'none'}}, 
                        React.DOM.h6({style: {width:140,display:'inline-block'}}, 
                          "Auto Prospect:  "), 
                        React.DOM.div({className: "btn-group autoprospect", 
                              'data-toggle': "buttons"}, 
                          React.DOM.label({className: "btn btn-sm btn-default active"}, 
                            React.DOM.input({type: "radio"}), " Yes"
                          ), 
                          React.DOM.label({className: "btn btn-sm btn-default"}, 
                            React.DOM.input({type: "radio"}), " No"
                          )
                        )
                      )
                    )
                  )

                )
              )
            )
          )
    );
  },

  createFundingProfile: function() {
  },

  componentDidMount: function() {
    _.map($('.hiring-role'),function(input){$(input).tagsinput()})
    $(this.getDOMNode()).find('.hiring-role').tagsinput()
    $('.bootstrap-tagsinput').width('59.1%')
  },

});

var CompanyProfile = React.createClass({displayName: 'CompanyProfile',
  companyFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $(this.getDOMNode()).find('.btn-default').click(function(e) {
      label = $(e.target).parent('label')
      if(label.hasClass('active'))
        label.removeClass('active')
      else
        label.addClass('active')
    });
  },

  render: function() {
    return (
      React.DOM.div(null, 
          React.DOM.h6({style: {display:'none',margin:0,
                      width:140,marginBottom:20}}, "Stage "), 
          React.DOM.div({className: "btn-group", 'data-toggle': "buttons", id: "employeeBtns", 
              style: {display:'none'}}, 
              React.DOM.label({className: "btn btn-sm btn-default", style: {width:'20%'}}, 
                React.DOM.input({type: "checkbox"}), " Seed"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default ", style: {width:'20%'}}, 
                React.DOM.input({type: "checkbox"}), " Series A"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default", style: {width:'20%'}}, 
                React.DOM.input({type: "checkbox"}), " Series B"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default", style: {width:'20%'}}, 
                React.DOM.input({type: "checkbox"}), " Series C"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default", style: {width:'20%'}}, 
                React.DOM.input({type: "checkbox"}), " Series D+"
              )
            ), 
            React.DOM.br(null), 
            React.DOM.h6({style: {display:'inline-block',margin:0,width:140,marginBottom:20}}, 
              "Amount Raised  "), 
            React.DOM.div({className: "btn-group profile-btns", 'data-toggle': "buttons", 
              id: "amountRaisedBtns", style: {width:'74%'}}, 
              React.DOM.label({className: "btn btn-sm btn-default amountRaisedBtn", style: {width:'25%'}}, 
                React.DOM.input({type: "checkbox"}), " ", '< $1M'
              ), 
              React.DOM.label({className: "btn btn-sm btn-default amountRaisedBtn", style: {width:'25%'}}, 
                React.DOM.input({type: "checkbox"}), " $1M - $5M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default amountRaisedBtn", style: {width:'25%'}}, 
                React.DOM.input({type: "checkbox"}), " $5M - $25M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default amountRaisedBtn", style: {width:'25%'}}, 
                React.DOM.input({type: "checkbox"}), " $25M +"
              )
            ), 

          React.DOM.br(null), 


          React.DOM.h6({style: {display:'none',margin:0,
                      width:140,marginBottom:20}}, "Company Size "), 
            React.DOM.div({className: "btn-group", 'data-toggle': "buttons", id: "employeeBtns", 
              style: {display:'none'}}, 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 1 - 50"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 50 - 250"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 250 - 1000"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 1000 +"
              )
            ), 

            React.DOM.br(null), " ", React.DOM.h6({style: {display:'none',margin:0,width:140}}, 
              "Approx. Revenue  "), 
            React.DOM.div({className: "btn-group", 'data-toggle': "buttons", id: "revenueBtns", 
              style: {display:'none'}}, 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " ", '< $1M'
              ), 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " $1M - $5M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " $5M - $25M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " $25M +"
              )
            )
      )
    )
  }
});

},{}],11:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // CreateHiringSignalModal
  createSignal: function() {
    profileName = $('.hiring-profile-name').val()
    autoProspect = $('.autoprospect > .active').text() ==  " Yes"

    hiringProfile = {
      'className': 'HiringProfile',
      'roles'    : $('.hiring-roles').tagsinput('items')
    }

    revenueProfile = {
      'className':'RevenueProfile', 
      'revenues': _.map($('#hiring-revenueBtns').find('.active'), 
                        function(revBtn){ return $(revBtn).text().trim() })
    }

    employeeProfile = {
      'className':'EmployeeProfile', 
      'employees': _.map($('#hiring-employeeBtns').find('.active'), 
                         function(empBtn){ return $(empBtn).text().trim() })
    }

    prospectProfile = {
      'className':'ProspectTitleProfile',
      'title_keywords' : $('.prospectRoleKeywords').tagsinput('items')
    }

    profiles = [hiringProfile, revenueProfile, 
                employeeProfile, prospectProfile]

    nonemptyProfiles = _.filter(profiles, function(profile) {
      if(_.values(profile)[1]){ return _.values(profile)[1].length }
    });


    newProfile = {
      name: profileName,
      autoProspect: autoProspect,
      profiles: nonemptyProfiles,
      user:{
        __type:'Pointer',
        className:'_User',
        objectId:JSON.parse(localStorage.currentUser).objectId
      },
      company: JSON.parse(localStorage.currentUser).company
    }

    if(nonemptyProfiles.length) {
      this.persistSignal(nonemptyProfiles, 
                         _.omit(newProfile,'profiles'))
      this.props.addProfile(newProfile)
      $('.modal').click()
    }
  },

  persistSignal: function(nonemptyProfiles, newProfile) {
    console.log('NEW PROFILE')
    console.log(newProfile)
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectProfile',
      headers:appConfig.headers,
      type:'POST',
      data:JSON.stringify(newProfile),
      success:function(ress) {
        // Add Signal List
        _.map(nonemptyProfiles, function(profile) {
          $.ajax({
            url:'https://api.parse.com/1/classes/'+_.values(profile)[0],
            headers:appConfig.headers,
            type:'POST',
            data:JSON.stringify( _.pick(profile, _.keys(profile)[1]) ),
            success:function(res) {
              $.ajax({
                url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
                type:'PUT',
                headers:appConfig.headers,
                data:JSON.stringify({profiles:{
                  __op: 'AddUnique',
                  objects:[{
                    __type:'Pointer',
                    className: _.values(profile)[0],
                    objectId:res.objectId
                  }]}
                }),
              })
            },
          })
        });

        // Start Mining Job
        $.ajax({
          //url:'https://nameless-retreat-3525.herokuapp.com/mining_job/title',
          ///url:'https://nameless-retreat-3525.herokuapp.com/title_mining_job',
          url:'http://127.0.0.1:5000/signal/hiring',
          type:'GET',
          data: {prospect_profile: ress.objectId},
          success: function(res) { console.log(res) },
          error: function(err) { console.log(err) }
        })
      

      },
    })
  },

  render: function() {
    return (
      React.DOM.div({className: "modal fade bs-createSignal-modal-md", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "createHiringSignalModal", 
           style: {top:'50px',overflow:'hidden'}}, 
            React.DOM.div({className: "modal-dialog modal-sm", style: {width:650}}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    "Create Hiring Signal"
                  ), 
                  React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                     onClick: this.createSignal, 
                     style: {float:'right',marginTop:-28,marginRight:-5}}, 
                    "Create Signal"
                  )
                ), 
                React.DOM.div({className: "modal-body"}, 
                  CreateHiringSignal(null)
                )
              )
            )
          )
    );
  }
});

var CreateHiringSignal = React.createClass({displayName: 'CreateHiringSignal',
  getInitialState: function() {
    return {
      addCompany: false,
      addProspect: false,
      hideCompanyDetails: false,
      hideProspectDetails: false,
    }
  },

  componentDidMount: function() {

  },
  
  toggleCompany : function() {
    this.setState({addCompany: !this.state.addCompany})
  },

  toggleProspect : function() {
    this.setState({addProspect: !this.state.addProspect})
  },

  toggleCompanyDetails: function() {
    this.setState({hideCompanyDetails: !this.state.hideCompanyDetails})
  },

  toggleProspectDetails: function() {
    this.setState({hideProspectDetails: !this.state.hideProspectDetails})
  },

  componentDidMount: function() {
    $(this.getDOMNode()).find('.hiring-role').tagsinput()
    $('.bootstrap-tagsinput').width(400)
  },

  render: function(){
    addCompany = (!this.state.addCompany) ? React.DOM.a({href: "javascript:", 
                                           onClick: this.toggleCompany, 
                                           className: "btn btn-sm btn-default"}, 
                                          React.DOM.i({className: "fa fa-plus"}), " " + ' ' +
                                          "Add Company Details"
                                        ) : CompanyProfile({hideCompanyDetails: this.state.hideCompanyDetails})

    addProspect = (!this.state.addProspect) ? React.DOM.a({href: "javascript:", 
                                           onClick: this.toggleProspect, 
                                           className: "btn btn-sm btn-default"}, 
                                          React.DOM.i({className: "fa fa-plus"}), " " + ' ' +
                                          "Add Prospect Details"
                                        ) : ProspectProfile({hideProspectDetails: this.state.hideProspectDetails})
    addCompanyStyle = (!this.state.addCompany) ? {display:'block',textAlign:'center'} : {}
    addProspectStyle = (!this.state.addProspect) ? {display:'block',textAlign:'center'} : {}

    closeCompanyBtns = (!this.state.addCompany) ? "" : React.DOM.span(null, React.DOM.a({href: "javascript:", className: "btn btn-xs btn-default", 
               onClick: this.toggleCompany, 
               style: {float:'right',marginTop:-5}}, 
               React.DOM.i({className: "fa fa-times"})), 
               React.DOM.a({href: "javascript:", className: "btn btn-xs btn-default", 
                  onClick: this.toggleCompanyDetails, 
                  style: {float:'right',marginTop:-5,marginRight:5}}, 
              React.DOM.i({className: (this.state.hideCompanyDetails) ? "fa fa-plus" :"fa fa-minus"})
          ))

    closeProspectBtns = (!this.state.addProspect) ? "" : React.DOM.span(null, React.DOM.a({href: "javascript:", className: "btn btn-xs btn-default", 
               onClick: this.toggleProspect, 
               style: {float:'right',marginTop:-5}}, 
               React.DOM.i({className: "fa fa-times"})), 
               React.DOM.a({href: "javascript:", className: "btn btn-xs btn-default", 
               onClick: this.toggleProspectDetails, 
               style: {float:'right',marginTop:-5,marginRight:5}}, 
              React.DOM.i({className: (this.state.hideProspectDetails) ? "fa fa-plus" :"fa fa-minus"})
          ))

    companyHeading = (!this.state.addCompany) ? "" : React.DOM.h5(null, React.DOM.i({className: "fa fa-building"}), "  Company Details")
    prospectHeading = (!this.state.addProspect) ? "" : React.DOM.h5(null, React.DOM.i({className: "fa fa-user"}), "  Prospect Details")
    return (
      React.DOM.div(null, 
        React.DOM.form({className: "createSignal", onSubmit: this.createSignal}, 
          React.DOM.span(null, 
            React.DOM.h6({style: {width:140,display:'inline-block',marginBottom:20}}, 
              "Hiring Profile Name:  "), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'413px'}, 
                   className: "form-control hiring-profile-name", 
                   placeholder: "Hiring Profile Name ..."})
          ), 
          React.DOM.br(null), 
          React.DOM.span(null, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, 
              "Hiring Role Name:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'50%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control hiring-role hiring-roles"}), 

                React.DOM.a({href: "javascript:", 
                   className: "btn btn-xs btn-success", style: {display:'none'}}, 
                  React.DOM.i({className: "fa fa-plus"})
                )
          ), 
          React.DOM.div({style: {marginTop:10}}, 
          React.DOM.h6({style: {width:140,display:'inline-block'}}, "Auto Prospect:  "), 
          React.DOM.div({className: "btn-group autoprospect", 'data-toggle': "buttons"}, 
            React.DOM.label({className: "btn btn-sm btn-default active"}, 
              React.DOM.input({type: "radio"}), " Yes"
            ), 
            React.DOM.label({className: "btn btn-sm btn-default"}, 
              React.DOM.input({type: "radio"}), " No"
            )
          )
          ), 
          React.DOM.div({style: {display:'none'}}, 
            React.DOM.hr(null), " ", closeCompanyBtns, " ", companyHeading, 
            React.DOM.div({style: addCompanyStyle}, " ", addCompany, " "), 

            React.DOM.hr(null), " ", closeProspectBtns, " ", prospectHeading, 
            React.DOM.div({style: addProspectStyle}, " ", addProspect, " ")
          )
        )
      )
    )
  },
  createSignal: function(e) { e.preventDefault() }
});

var CompanyProfile = React.createClass({displayName: 'CompanyProfile',
  companyFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $(this.getDOMNode()).find('.btn-default').click(function(e) {

      if($(e.target).parent('label').hasClass('active'))
        $(e.target).parent('label').removeClass('active')
      else
        $(e.target).parent('label').addClass('active')

      console.log($(e.target).parent('label'))
    });
  },

  render: function() {
    showDetails = (this.props.hideCompanyDetails) ? {display: 'none'} : {display:'block'}
    return (
      React.DOM.div({style: showDetails}, 
        React.DOM.form({className: "createSignal", onSubmit: this.companyFormSubmit}, 
          React.DOM.br(null), 
          React.DOM.h6({style: {display:'inline-block',margin:0,
                      width:140,marginBottom:20}}, "Company Size "), 
            React.DOM.div({className: "btn-group", 'data-toggle': "buttons", id: "hiring-employeeBtns"}, 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " 1 - 50"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " 50 - 250"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " 250 - 1000"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " 1000 +"
              )
            ), 

            React.DOM.br(null), " ", React.DOM.h6({style: {display:'inline-block',margin:0,width:140}}, 
              "Revenue Amount "), 
            React.DOM.div({className: "btn-group", 'data-toggle': "buttons", id: "hiring-revenueBtns"}, 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " ", '< $1M'
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " $1M - $5M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " $5M - $25M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " $25M +"
              )
            )
        )
      )
    )
  }
});

var ProspectProfile = React.createClass({displayName: 'ProspectProfile',
  prospectFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $('.prospectRoleKeywords').tagsinput({
      maxTags: 5,
    })

    $('.bootstrap-tagsinput').width(400)
  },

  render: function() {
    showDetails = (this.props.hideProspectDetails) ? {display: 'none'} : {display:'block'}
    return (
      React.DOM.div({style: showDetails}, 
        React.DOM.form({className: "createSignal", onSubmit: this.prospectFormSubmit}, 
          React.DOM.span(null, 
            React.DOM.span({style: {width:140,display:'inline-block'}}, 
              React.DOM.h6(null, "Job Title Keyword:  ")
            ), 
            React.DOM.input({type: "text", 
                   'data-role': "tagsinput", 
                   style: {width:'400px !important'}, 
                   className: "form-control prospectRoleKeywords", 
                   placeholder: ""})
          )

        )
      )
    )
  }
})

/*
  Funding Profile
  - Amount Raised
  - Stage

  People Profile
  - Locale
  - Title

  Company Profile
  - Industries
  - Revenue
  - Locale
  - # of Employees
*/

var GeneralForm = React.createClass({displayName: 'GeneralForm',

  render: function() {
    return (
        React.DOM.form({className: "createSignal", onSubmit: this.createSignal}, 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-suitcase"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Find Companies Hiring For ..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-users"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Number of Employees ..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-institution"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Amount of Funding ..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-money"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Revenue Amount ..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-wrench"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Using Technologies Such As..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.a({href: "javascript:", 
            onClick: this.createSignal, 
            className: "btn btn-default btn-success", 
            style: {display:'block', width:'100%'}}, 
            "Create Signal"
          )
        )
    )
  }
})

},{}],12:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createListModal
  createList: function() {
    console.log($('#listTitle').val())

    data =  {
      'name'        : $('#listTitle').val().trim(),   //Waiting , Running
      'user'        : { '__type':'Pointer',
                      'className':'_User',
                      'objectId':'xWESiw5Smd' },
    }

    thiss = this;
    listClassName = (this.props.listClassName) ? this.props.listClassName : 'ProspectList'
    $.ajax({
      url:'https://api.parse.com/1/classes/'+listClassName,
      type:'POST',
      headers: appConfig.parseHeaders,
      data: JSON.stringify(data),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });

    data.count = 0

    this.props.createList(data)
    
    $('#createListModal').modal('hide')
    $('body').removeClass('modal-open');
    $('.modal-backdrop').remove();
    //$('button.close').click()
  },

  createListButtonClick: function() {
    if($('#listTitle').val().trim() != "")
      this.createList()
  },

  createMiningJob: function(e) {
    e.preventDefault()
    console.log('lmao')
    if($('#listTitle').val().trim() != "")
      this.createList()
  },

  render: function() {
    return (
          React.DOM.div({className: "modal fade bs-example-modal-sm", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "createListModal", style: {top:'200px'}}, 
            React.DOM.div({className: "modal-dialog modal-sm"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-list"}), "  Create List")
                ), 
                React.DOM.div({className: "modal-body"}, 
                  React.DOM.form({onSubmit: this.createMiningJob}, 
                    React.DOM.input({id: "listTitle", type: "text", placeholder: "Enter list title...", className: "form-control"}), 
                    React.DOM.br(null), 
                    React.DOM.a({href: "javascript:", onClick: this.createListButtonClick, placeholder: "Enter City Area...", className: "btn btn-success", style: {display:'block', width:'100%'}}, "Create List")
                  )

                )
              )
            )
          )
    );
  }
});


},{}],13:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createSignalModal
  createMiningJob: function(date) {
    this.props.createMiningJob(this.props.currentProfile, date)
  },

  render: function() {
    // moment.utc(moment().startOf('day')).valueOf()/1000
    // recieve completed days as props
    //console.log(this.props.currentProfile)
    mining_days = this.props.currentProfile.mining_days
    dates = []
    for(i=0;i< 30; i++) {  
      date = moment().subtract((i+1), 'days').startOf('day')
      mining_day = _.indexOf(mining_days, date.valueOf()/1000) != -1
      dates.push(DownloadDateRow({updateDate: this.updateDate, 
                                  createMiningJob: this.createMiningJob, 
                                  mining_day: mining_day, 
                                  date: date}))
    }

    return (
      React.DOM.div({className: "modal fade bs-createMiningJob-modal-md", 
           tabIndex: "-1", role: "dialog", 
           'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", 
           id: "createMiningJobModal", 
           style: {top:'50px',overflow:'hidden'}}, 
        React.DOM.div({className: "modal-dialog modal-sm", style: {width:350}}, 
          React.DOM.div({className: "modal-content"}, 
            React.DOM.div({className: "modal-header"}, 
              React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                React.DOM.i({className: "fa fa-cloud-download"}), " " + ' ' +
                "Download Prospects"
              ), 
              React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                 onClick: this.createMiningJob, 
                 style: {float:'right',marginTop:-28,
                         marginRight:-5,display:'none'}}, 
                 "Download"
              )
            ), 
            React.DOM.div({className: "modal-body"}, 

              React.DOM.ul({className: "list-group date-download-prospects", 
                  style: {height:400,overflow:'auto',
                  borderBottom:'solid 1px #ddd',
                  cursor:'pointer',
                  borderTop:'solid 1px #ddd'}}, 
                React.DOM.h6({style: {margin:0}}, dates)
              )

            )
          )
        )
      )
    );
  },
});

var DownloadDateRow = React.createClass({displayName: 'DownloadDateRow',
  updateDate: function() {
    //this.createMiningJob()
    date = this.props.date.startOf('day').valueOf()/1000
    //date = moment().subtract((i+1), 'days').startOf('day')
    this.props.createMiningJob(date)
  },

  render: function() {
    loading = (this.props.mining_day) ?  React.DOM.div({className: "profile-loading", style: {float:'right',height:20,width:20}}, 
            React.DOM.div({className: "double-bounce1", style: {backgroundColor:'#5cb85c'}}), 
            React.DOM.div({className: "double-bounce2", style: {backgroundColor:'#5cb85c'}})
          ) : ""
    loading = ""
    return (
        React.DOM.li({onClick: this.updateDate, style: {textAlign:'center'}, 
          className: "list-group-item download-date bg-success", 
          style: (this.props.mining_day) ? {backgroundColor:'#dff0d8',textAlign:'center'} : {textAlign:'center'}}, 
          React.DOM.span({style: {width:85}}, 
            React.DOM.i({className: "fa fa-calendar"}), " ", 
            this.props.date.format('ll'), "      "
          ), 
          React.DOM.a({href: "javascript:", style: {width:89}, 
      className: (this.props.mining_day) ? "btn btn-success btn-xs disabled" : "btn btn-success btn-xs"}, 
            (this.props.mining_day) ? "Downloading" : "Download"), 
          loading
        )
    )
  }
})


},{}],14:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createProspectListFromCompanyListModal
  createProfile: function() {
    //profileName = $(".profileName").val()
    titleProfile = {
      'className': 'ProspectTitleProfile',
      'title_keywords' : $('.prospectRoleKeywords').tagsinput('items').reverse()
    }

    listProfile = {
      'className': 'ListProfile',
      'listName':this.props.currentList,
      'list' : appConfig.pointer('CompanyProspectList', 
                                  this.props.currentListObjectId),
    }

    profiles = [titleProfile, listProfile]

    nonemptyProfiles = _.filter(profiles, function(profile) {
      if(_.values(profile)[1]){ return _.values(profile)[1].length }
    });

    //nonemptyProfiles.push(listProfile)
    nonemptyProfiles.reverse()

    console.log(nonemptyProfiles)
    console.log(this.props.currentList)

    newProfile = {
      name: this.props.currentList,
      profiles: nonemptyProfiles,
      type: 'prospect_profile',
      mining_job:true,
      list_type:"mining_job",
      only_people:true,
      user:{
        __type:'Pointer',
        className:'_User',
        objectId:JSON.parse(localStorage.currentUser).objectId
      },
      company: JSON.parse(localStorage.currentUser).company
    }

    if(nonemptyProfiles.length) {
      this.persistSignal(nonemptyProfiles, _.omit(newProfile,'profiles'))
      $('.modal').click()
      //this.props.addProfile(newProfile)
      $('.prospect-profile-title').val('')
    }
  },

  persistSignal: function(nonemptyProfiles, newProfile) {
    console.log('NEW PROFILE')
    console.log(newProfile)
    updateProfile = this.props.updateProfileWithObjectId

    thissss = this;
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectProfile',
      headers:appConfig.headers,
      type:'POST',
      data:JSON.stringify(newProfile),
      success:function(ress) {
        console.log('Prospect Profile')
        console.log(ress)

        //thissss.props.updateProfileWithObjectId(newProfile, ress.objectId)
        
        user_id = JSON.parse(localStorage.currentUser).objectId
        newProfile.user = appConfig.pointer('_User', user_id) 
        newProfile.company = JSON.parse(localStorage.currentUser).company

        if(newProfile.type == 'prospect_profile')
          newProfile.mining_job_list = true
          newProfile.list_type = "mining_job"
          newProfile.only_people = true

        $.ajax({
          url: 'https://api.parse.com/1/classes/ProspectList',
          type: 'POST',
          headers: appConfig.headers,
          data:JSON.stringify(_.pick(newProfile, 
                                     'name','user','list_type',
                                     'open_people', 'company',
                                     'mining_job_list')),
          success: function(res) {
            $.ajax({
              url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
              type:'PUT',
              headers: appConfig.headers,
              data: JSON.stringify({'prospect_list':{ __type:'Pointer',
                                    className:'ProspectList',objectId:res.objectId } }),
              success: function(res){ console.log(res); 
                $('.modal').click()
                //location.href="#signals" 
              },
              error: function(err){ console.log(err) }
            })
          },
          error: function() { }
        })

        // Start Mining Job
        if(newProfile.type == 'prospect_profile') {
          $.ajax({
            //url:'https://nameless-retreat-3525.herokuapp.com/mining_job/title',
            ///url:'https://nameless-retreat-3525.herokuapp.com/title_mining_job',
            url:'http://127.0.0.1:5000/title_mining_job',
            type:'GET',
            data: {prospect_profile: ress.objectId},
            success: function(res) { console.log(res) },
            error: function(err) { console.log(err) }
          })
        }

        // Create Profiles
        _.map(nonemptyProfiles, function(profile) {
          $.ajax({
            url:'https://api.parse.com/1/classes/'+_.values(profile)[0],
            headers:appConfig.headers,
            type:'POST',
            data:JSON.stringify( _.pick(profile, _.keys(profile)[1]) ),
            success:function(res) {
              $.ajax({
                url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
                type:'PUT',
                headers:appConfig.headers,
                data:JSON.stringify({profiles:{
                  __op: 'AddUnique',
                  objects:[{
                    __type:'Pointer',
                    className: _.values(profile)[0],
                    objectId:res.objectId
                  }]}
                }),
              })
            }
          })
        });
      }
    })
  },

  render: function() {
    return (
      React.DOM.div({className: "modal fade ", tabIndex: "-1", role: "dialog", 
           'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", 
           id: "createProspectListFromCompanyListModal", 
           style: {top:'50px',overflow:'hidden'}}, 
            React.DOM.div({className: "modal-dialog modal-sm", style: {width:650}}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    "Find Prospects At These Companies"
                  ), 
                  React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                     onClick: this.createProfile, 
                     style: {float:'right',marginTop:-28,marginRight:-5}}, 
                    "Create Profile"
                  )
                ), 
                React.DOM.div({className: "modal-body"}, 
                  ProspectProfile(null)
                )
              )
            )
          )
    );
  },
});

var ProspectProfile = React.createClass({displayName: 'ProspectProfile',
  prospectFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $('.prospectRoleKeywords').tagsinput({
      maxTags: 5,
    })
    $('.bootstrap-tagsinput').width(400)
  },

  render: function() {
    showDetails = (this.props.hideProspectDetails) ? {display: 'none'} : {display:'block'}
    return (
      React.DOM.div({style: showDetails}, 
        React.DOM.form({className: "createSignal", onSubmit: this.prospectFormSubmit}, 
          React.DOM.span(null, 
            React.DOM.span({style: {width:140,display:'inline-block'}}, 
              React.DOM.h6(null, "Job Title Keyword:  ")
            ), 
            React.DOM.input({type: "text", 
                   'data-role': "tagsinput", 
                   style: {width:'400px !important'}, 
                   className: "form-control prospectRoleKeywords", 
                   placeholder: ""})
          )
        )
      )
    )
  }
})

},{}],15:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createCompanyProfileModal
  createProfile: function() {
    profileName = $(".profileName").val()

    titleProfile = {
      'className': 'ProspectTitleProfile',
      'title_keywords'    : $('.prospect-profile-title').tagsinput('items').reverse()
    }

    /*
    locationProfile = {
      'className': 'LocationProfile',
      'locale'    : $('.prospect-location-profile').tagsinput('items').reverse()
    }

    companySizeProfile = {
      'className':'EmployeeProfile', 
      'employees': _.map($('#prospect-profile-companySizeBtns').find('.active'), 
                        function(revBtn){ return $(revBtn).text().trim() }).reverse()
    }

    revenueProfile = {
      'className':'RevenueProfile', 
      'revenues': _.map($('#prospect-profile-companyRevenueBtns').find('.active'), 
                        function(revBtn){ return $(revBtn).text().trim() }).reverse()
    }

    profiles = [titleProfile, locationProfile,
                companySizeProfile, revenueProfile]
    */
    
    profiles = [titleProfile]

    nonemptyProfiles = _.filter(profiles, function(profile) {
      if(_.values(profile)[1]){ return _.values(profile)[1].length }
    });
    console.log(nonemptyProfiles)

    newProfile = {
      name: profileName,
      profiles: nonemptyProfiles,
      type: 'prospect_profile',
      mining_job:true,
      list_type:"mining_job",
      only_people:true,
      timestamp: moment().valueOf(),
      done: 0,
      user:{
        __type:'Pointer',
        className:'_User',
        objectId:JSON.parse(localStorage.currentUser).objectId
      },
      company: JSON.parse(localStorage.currentUser).company
    }

    if(nonemptyProfiles.length) {
      this.props.addProfile(newProfile)
      this.persistSignal(nonemptyProfiles, newProfile)
      $('.modal').click()
      $('.prospect-profile-title').val('')
    }
  },

  persistSignal: function(nonemptyProfiles, newProfile) {
    console.log('NEW PROFILE')
    console.log(newProfile)

    var thissss = this;
    var thiss = this;
    var _this = this;
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectProfile',
      headers:appConfig.headers,
      type:'POST',
      data:JSON.stringify(_.omit(newProfile, 'profiles')),
      success:function(ress) {
        
        user_id = JSON.parse(localStorage.currentUser).objectId
        newProfile.user = appConfig.pointer('_User', user_id) 
        newProfile.company = JSON.parse(localStorage.currentUser).company

        $.ajax({
          url: 'https://api.parse.com/1/classes/ProspectList',
          type: 'POST',
          headers: appConfig.headers,
          data:JSON.stringify(_.pick(newProfile, 
                                     'name','user','list_type',
                                     'open_people', 'company',
                                     'mining_job_list')),
          success: function(res) {
            console.log(res)
            prospectList = appConfig.pointer('ProspectList',res.objectId)
            $.ajax({
              url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
              type:'PUT',
              headers: appConfig.headers,
              data: JSON.stringify({'prospect_list':prospectList}),
              success: function(res){ console.log(res) },
              error: function(err){ console.log(err) }
            })
          },
          error: function() { }
        })

        // Start Mining Job
        if(newProfile.type == 'prospect_profile') {
          $.ajax({
            //url:'https://nameless-retreat-3525.herokuapp.com/mining_job/title',
            ///url:'https://nameless-retreat-3525.herokuapp.com/title_mining_job',
            url:'http://127.0.0.1:5000/title_mining_job',
            type:'GET',
            data: {prospect_profile: ress.objectId},
            success: function(res) { console.log(res) },
            error: function(err) { console.log(err) }
          })
        }

        // Create Profiles
        _.map(nonemptyProfiles, function(profile) {
          $.ajax({
            url:'https://api.parse.com/1/classes/'+_.values(profile)[0],
            headers:appConfig.headers,
            type:'POST',
            data:JSON.stringify( _.pick(profile, _.keys(profile)[1]) ),
            success:function(res) {
              $.ajax({
                url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
                type:'PUT',
                headers:appConfig.headers,
                data:JSON.stringify({profiles:{
                  __op: 'AddUnique',
                  objects:[{
                    __type:'Pointer',
                    className: _.values(profile)[0],
                    objectId:res.objectId
                  }]}
                }),
              })
            }
          })
        });

        thiss.props.updateProfileWithObjectId(newProfile.timestamp, ress.objectId)
      }
    })
  },

  render: function() {
    return (
      React.DOM.div({className: "modal fade ", tabIndex: "-1", role: "dialog", 
           'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", 
           id: "createProspectProfileModal", 
           style: {top:'50px',overflow:'hidden'}}, 
            React.DOM.div({className: "modal-dialog modal-sm", style: {width:650}}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    "Create Prospect Profile"
                  ), 
                  React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                     onClick: this.createProfile, 
                     style: {float:'right',marginTop:-28,marginRight:-5}}, 
                    "Create Profile"
                  )
                ), 
                React.DOM.div({className: "modal-body"}, 
                  CreateHiringSignal(null)
                ), 
              React.DOM.div({className: "modal-footer", style: {display:'none'}}, 
                React.DOM.button({type: "button", className: "btn btn-default"}, 
                  "Close"
                ), 
                React.DOM.button({type: "button", className: "btn btn-primary"}, 
                  "Send Email"
                )
              )
              )
            )
          )
    );
  },
  createCompanyProfile: function() {
  },
});

var CreateHiringSignal = React.createClass({displayName: 'CreateHiringSignal',
  getInitialState: function() {
    return {
      addCompany: false,
      addProspect: false,
      hideCompanyDetails: false,
      hideProspectDetails: false,
    }
  },

  componentDidMount: function() {

  },
  
  toggleCompany : function() {
    this.setState({addCompany: !this.state.addCompany})
  },

  toggleProspect : function() {
    this.setState({addProspect: !this.state.addProspect})
  },

  toggleCompanyDetails: function() {
    this.setState({hideCompanyDetails: !this.state.hideCompanyDetails})
  },

  toggleProspectDetails: function() {
    this.setState({hideProspectDetails: !this.state.hideProspectDetails})
  },

  componentDidMount: function() {
    _.map($('.hiring-role'),function(input){$(input).tagsinput()})
    $(this.getDOMNode()).find('.hiring-role').tagsinput()
    $('.bootstrap-tagsinput').width('59.1%')
  },

  render: function(){
    return (
      React.DOM.div(null, 
        React.DOM.form({className: "createSignal", onSubmit: this.createProfile}, 
          React.DOM.span(null, 
            React.DOM.h6({style: {width:140,display:'inline-block',marginBottom:20}}, 
              "Prospect Profile Name:  "), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%'}, 
                   className: "form-control hiring-profile-name profileName", 
                   placeholder: "Prospect Profile Name ..."})
          ), 
          React.DOM.br(null), 
          React.DOM.span({style: {display:'block',marginBottom:-10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, 
              "Title:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control hiring-role prospect-profile-title"}), 

                React.DOM.a({href: "javascript:", 
                   className: "btn btn-xs btn-success", style: {display:'none'}}, 
                  React.DOM.i({className: "fa fa-plus"})
                )
          ), 
          React.DOM.br(null), 
          React.DOM.span({style: {display:'block',marginBottom:-10}}, 
            React.DOM.h6({style: {width:140,display:'none'}}, 
              "Location:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'none',width:'73.1%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control prospect-location-profile-tmp"}), 

                React.DOM.a({href: "javascript:", 
                   className: "btn btn-xs btn-success", style: {display:'none'}}, 
                  React.DOM.i({className: "fa fa-plus"})
                )
          ), 
          React.DOM.span({style: {display:'none',marginBottom:-10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, 
              "Industries:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control "}), 

            React.DOM.a({href: "javascript:", 
               className: "btn btn-xs btn-success", style: {display:'none'}}, 
              React.DOM.i({className: "fa fa-plus"})
            )
          ), 
          CompanyProfile(null), 

          React.DOM.div({style: {display:'none'}}, 
          React.DOM.div({style: {marginTop:10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, "Auto Prospect:  "), 
            React.DOM.div({className: "btn-group autoprospect", 'data-toggle': "buttons"}, 
              React.DOM.label({className: "btn btn-sm btn-default active"}, 
                React.DOM.input({type: "radio"}), " Yes"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "radio"}), " No"
              )
            )
          )
        )
        )
      )
    )
  },
  createSignal: function(e) { e.preventDefault() }
});

var CompanyProfile = React.createClass({displayName: 'CompanyProfile',
  companyFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $(this.getDOMNode()).find('.btn-default').click(function(e) {

      if($(e.target).parent('label').hasClass('active'))
        $(e.target).parent('label').removeClass('active')
      else
        $(e.target).parent('label').addClass('active')

      console.log($(e.target).parent('label'))
    });
  },

  render: function() {
    return (
      React.DOM.div(null, 
          React.DOM.br(null), 
          React.DOM.div({style: {display:'none'}}, 
          React.DOM.h6({style: {display:'inline-block',margin:0,
                      width:140,marginBottom:20}}, "Company Size "), 
                    React.DOM.div({className: "btn-group", 'data-toggle': "buttons", 
                      style: {width:'73.5%'}, id: "prospect-profile-companySizeBtns"}, 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 1 - 50"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 50 - 250"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 250 - 1000"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 1000 +"
              )
            )
          ), 

          React.DOM.div({style: {display:'none'}}, 
            React.DOM.br(null), " ", React.DOM.h6({style: {display:'inline-block',margin:0,width:140}}, 
              "Approx. Revenue  "), 
            React.DOM.div({className: "btn-group", 'data-toggle': "buttons", 
              style: {width:'73.5%'}, id: "prospect-profile-companyRevenueBtns"}, 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " ", '< $1M'
              ), 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " $1M - $5M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " $5M - $25M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " $25M +"
              )
            )
          )
      )
    )
  }
});

var ProspectProfile = React.createClass({displayName: 'ProspectProfile',
  prospectFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $('.prospectRoleKeywords').tagsinput({
      maxTags: 5,
    })
    $('.bootstrap-tagsinput').width(400)
  },

  render: function() {
    showDetails = (this.props.hideProspectDetails) ? {display: 'none'} : {display:'block'}
    return (
      React.DOM.div({style: showDetails}, 
        React.DOM.form({className: "createSignal", onSubmit: this.prospectFormSubmit}, 
          React.DOM.span(null, 
            React.DOM.span({style: {width:140,display:'inline-block'}}, 
              React.DOM.h6(null, "Job Title Keyword:  ")
            ), 
            React.DOM.input({type: "text", 
                   'data-role': "tagsinput", 
                   style: {width:'400px !important'}, 
                   className: "form-control prospectRoleKeywords", 
                   placeholder: ""})
          )
        )
      )
    )
  }
})

},{}],16:[function(require,module,exports){
/** @jsx react.dom */

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {
      
    }
  },

  componentDidMount: function() {
    $('.template-body').html(this.state.templateBody)
  },

  clickedOverlay: function() {
    console.log('clicked overlay')
    this.props.toggleTemplateEditMenu()
  },

  changeMode: function() {
    // Update template html on toggle
    console.log('EDIT MODE')
    console.log(this.state.editMode)
    parse_headers = appConfig.parseHeaders
    if(this.state.editMode){
      $('.summer').destroy();
      this.props.saveTemplate({
        name: this.state.name,
        templateBody: $('.summer').code(),
        templateSubject: $('.subject').val(),
      })
      this.setState({
        templateBody: $('.summer').code(),
        templateSubject: $('.subject').val(),
        editMode: !this.state.editMode,
      })
      $.ajax({
        url:'https://api.parse.com/1/classes/Templates/'+this.props.initialTemplateValues.objectId,
        type:'PUT',
        headers:parse_headers,
        data:JSON.stringify({body: $('.summer').code(),subject: $('.subject').val()}),
        success: function(res) {
          console.log(res)
        },
        error: function(err) {
          console.log(err)
        }
      });
    } else {
      this.setState({ editMode: !this.state.editMode })
    }
  },

  componentDidUpdate: function() {
    /* thiss = this; */

    console.log('OTHER')
    if(this.state.editMode){
      console.log('CALLED')
      // Replace Subject 
      $('.subject').val(this.state.templateSubject)

      $('.summer').summernote({
        height: 200,
        toolbar: [
          ['style', ['bold', 'italic', 'underline', 'clear']],
          ['font', ['strikethrough']],
          ['fontsize', ['fontsize']],
          ['color', ['color']],
          ['para', ['ul', 'ol', 'paragraph']],
          ['height', ['height']],
        ]
      })

      // Initialize Editor with html
      $('.summer').code(this.state.templateBody)
    }
  },


  render: function() {
    subjectPlace = (this.state.editMode) ? react.dom.input({style: {display:'inline',width:480}, className: "form-control subject"}) : this.state.templateSubject

    if(this.state.editMode){
       toggleButton = react.dom.a({href: "javascript:", 
             onClick: this.changeMode, 
             className: "btn btn-success btn-xs", 
             style: {display:'block',float:'right',marginTop:5}}, 
            react.dom.i({className: "fa fa-save"}), "   Save Template")
    } else {
       toggleButton = react.dom.a({href: "javascript:", 
             onClick: this.changeMode, 
             className: "btn btn-primary btn-xs", 
             style: {display:'block',float:'right',marginTop:5}}, 
            react.dom.i({className: "fa fa-pencil-square"}), "   Edit Template")
    }

    return (
      react.dom.div(null, 
      react.dom.div({onClick: this.clickedOverlay, id: "editTemplateOverlay"}), 
      react.dom.div({id: "editTemplateView", 
           className: "panel panel-info", 
           style: {display:'block'}}, 
           react.dom.div({className: "panel-heading", style: {height:50}}, 
             react.dom.h6({style: {float:'left'}}, 
               react.dom.i({className: "fa fa-file-text-o"}), 
               "  " + this.props.initialTemplateValues.name
             ), 
          toggleButton
        ), 
        react.dom.div({className: "panel-body"}, 
          react.dom.div({className: "editTemplateTitle"}, 
            react.dom.span(null, "Subject: "), 
            subjectPlace
          ), 
         react.dom.br(null), 
         react.dom.div({className: "templateDetails"}, 
           react.dom.h6({style: {marginBottom:'0'}, className: "text-muted"}, 
             "Created by Mark on Jul. 21, 2014"
           ), 
           react.dom.h6({style: {marginTop:'0'}, className: "text-muted"}, 
             "last updated 7 days ago"
           )
         ), 
        react.dom.br(null), 
        react.dom.div({className: "panel panel-default"}, 
          react.dom.div({className: "panel-body summer template-body"}
          )
        )
    )
)
)
    );
  }
});

},{}],17:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // DataRow
  getInitialState: function() {
    return { }
  },

  clickCheck: function() {
    domNode = this.getDOMNode()
    isChecked = $($(domNode).find('input[type="checkbox"]')[0]).prop('checked')
    //console.log(isChecked)
    this.setState({checked: isChecked})
    this.props.checkboxAction(isChecked, this.props.prospect.objectId)
  },

  rowClick: function() {
    $($(this.getDOMNode()).find('input[type="checkbox"]')[0]).click()
  },

  keyboardClick: function() {
    $($('.keySelect').find('input[type="checkbox"]')[0]).click()
  },

  componentDidMount: function() { },

  render: function() {
    keyboardSelected = {borderLeft:'7px solid rgba(0,0,0,0)'}
    thissss = this
    if(this.props.keyboardSelected) {
      // Adjust Scroll depending on where the prospect is
      keyboardSelected = {borderLeft:'7px solid #0096ff !important'}
      Mousetrap.unbind('x')
      Mousetrap.bind('x', function() { 
        thissss.keyboardClick()
        if(thissss.state.checked)
          console.log("lmao")
      });
    }

    prospect = this.props.prospect

    if(this.props.masterCheckboxChecked && this.state.checked)
      checked = true
    else if(this.props.alreadyChecked)
      checked = true
    else if(this.state.checked)
      checked = true
    else if(this.props.masterCheckboxChecked || this.state.checked)
      checked = true
    else
      checked = false

    //console.log(this.state.checked)
    //console.log(checked)
    //{prospect.employeeCountRange.name + " employees" }
    
    color = {}
    if(this.state.checked || this.props.alreadyChecked)
      color = {backgroundColor: '#eef8ff'}
      
    rowCl = (this.props.keyboardSelected) ? "prospects-tr keySelect" : "prospects-tr"
    websiteBtn = (prospect.websiteUrl) ?  React.DOM.a({href: "http://"+prospect.websiteUrl.replace('http://','')}, " ", React.DOM.i({className: "fa fa-globe"}), " ") : ""
    return (
      React.DOM.tr({className: rowCl, 
          onClick: this.rowClick, 
          style: keyboardSelected}, 
          React.DOM.td({style: color}, 
              React.DOM.input({type: "checkbox", 
                     onChange: this.clickCheck, 
                     checked: checked})
          ), 

          React.DOM.td({style: color, 
              className: "fixed-data-column"}, 
            React.DOM.span({style: {fontWeight:'bold'}}, prospect.name), 
            React.DOM.h6({style: {fontWeight:'400',margin:'0px'}}, prospect.headcount)
          ), 

          React.DOM.td({style: color, 
              className: "fixed-data-column"}, 
            React.DOM.h6({style: {margin:'0px'}}, moment(prospect.createdAt,'YYYY-MM-DDTh:mm:ss').fromNow())
          ), 

          React.DOM.td({style: color, 
              className: "fixed-data-column"}, 
            React.DOM.h6({style: {margin:'0px'}}, prospect.industry)
          ), 

          React.DOM.td({style: color}, 
            "   ", 
            React.DOM.a({href: "javascript:", className: "btn btn-primary btn-xs", 
              onClick: this.openLinkedinCompanyProfile, 
              style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
              React.DOM.i({className: "fa fa-search"}), "  " + ' ' +
              "Search Profiles"
            ), 
            "   ", 
            React.DOM.a({href: "javascript:", className: "btn btn-primary btn-xs", 
              onClick: this.openSimilarCompanies, 
              style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
              React.DOM.i({className: "fa fa-copy"}), "  " + ' ' +
              "Find Similar Companies"
            )
          ), 

          React.DOM.td({style: color}, 
            React.DOM.h6({style: {margin:'0px'}}, prospect.city)
          ), 

          React.DOM.td({style: color}, 
            this.props.li, " ", this.props.link, 
            websiteBtn
          )
        )
    );
  },

  openLinkedinCompanyProfile: function(e) {
    cid = this.props.prospect.profile.split('?')[0].split('/company/')[1]
    window.open("https://www.linkedin.com/vsearch/p?f_CC="+cid)
    e.stopPropagation()
  },

  openSimilarCompanies: function(e) {
    cid = this.props.prospect.profile.split('?')[0].split('/company/')[1]
    window.open("https://www.linkedin.com/vsearch/c?rsid=526440371409184768175&pivotType=sim&pid="+cid+"&trk=sim_companies_res_sim&trkInfo=VSRPsearchId%3A526440371409184768175%2CVSRPtargetId%3A1025%2CVSRPcmpt%3Aprimary")
    e.stopPropagation()
  },

  deleteProspect: function() {
    this.props.deleteProspect(this.props.prospect.objectId, 'Prospect')
  }
});


},{}],18:[function(require,module,exports){
/** @jsx React.DOM */

//TODO - abstract lists
var SideMenuProspects = require('./side_menu_user_prospects.js.min.js');

var UserProspect = require('./user_prospect.js.min.js');
var DataRow = require('./data_row.js.min.js');

var UserProspectHeader = require('./user_prospect_header.js.min.js');
var SideMenuListOption = require('./user_side_menu_list.js.min.js');
var LoadingSpinner = require('./loading_spinner.js.min.js')
var PanelFooting = require('./panel_footing.js.min.js')
var Messenger = require('./messenger.js.min.js')
var DeleteListModal = require('./delete_list_modal.js.min.js')
var RenameListModal = require('./rename_list_modal.js.min.js')
var CompanyProspect = require('./company.js.min.js');
var CreateProspectListFromCompanyListModal = require('./create_prospect_list_from_company_list.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {  currentPage : 1,
              className: this.props.className,  
              listClassName: this.props.listClassName,
              customRow: this.props.tableRow,
              pages       : 1,
              currentList : 'All',
              currentListObjectId : '',
              loading: true,
              lists : [],
              masterCheckboxChecked: false,
              prospectsPerPage: 50,         //classNames per page
              keyboardActiveProspect: 0,    //first
              selectedProspects: [],        //selectedClassName
              prospects   : [],             //className
              totalCount  : "~", 
              count       : "~", }
  },

  createList: function(data) {
    lists = this.state.lists
    lists.push(data)
    this.setState({ lists: lists })
  },

  renameList: function(newListName) {
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      'Content-Type': 'application/json'
    }
    console.log(this.state.currentListObjectId)
    console.log(this.state.currentList)
    console.log(newListName)

    // Update Local State
    thiss = this;
    var filtered = _.filter(this.state.lists, function(item) {
      if(item.name == thiss.state.currentList){
        item.name = newListName
        return item
      }
      return item
    });

    this.setState({lists : filtered})
    this.setState({currentList: newListName})

    $('.modal').click()
    $('#newListName').val('')
    $('.modal-backdrop').click()

    // Persist / Ajax
    listClassName = this.state.listClassName
    $.ajax({
      url:'https://api.parse.com/1/classes/'+listClassName+'/'+this.state.currentListObjectId,
      headers: parseHeaders,
      type:'PUT',
      data:JSON.stringify({'name':newListName}),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  deleteList: function() {
    // TODO 
    // Get All Members Of This List
    // Remove From List Array
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      'Content-Type': 'application/json'
    }
    
    var filtered = _.filter(this.state.lists, function(item) {
      if(item.objectId == thiss.state.currentListObjectId)
        return false
      return true
    });

    this.setState({lists: filtered})
    this.setState({currentList: 'All'})
    this.changeList('All', '')

    // Remove
    $('.modal').click()
    $('#newListName').val('')
    $('.modal-backdrop').click()

    // Persist / Ajax
    listClassName = this.state.listClassName

    $.ajax({
      url:'https://api.parse.com/1/classes/'+listClassName+'/'+this.state.currentListObjectId,
      headers: parseHeaders,
      type:'DELETE',
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  changeList: function(newListName,objectId) {
    // add overlay loading
    //console.log(newListName)
    //console.log(objectId)

    localStorage.selectedProspects = JSON.stringify([])

    this.setState({currentList : newListName})
    this.setState({currentListObjectId : objectId})
    this.setState({prospects  : []    })
    this.setState({count      : '~'   })
    this.setState({pages      : 1     })
    this.setState({loading    : true  })
    this.setState({currentPage: 1})
    this.setState({keyboardActiveProspect: 0})

    qry = 'where={"company":'+company+',"archived":true}&count=1&order=-createdAt'
    console.log(newListName)

    if(this.state.currentList != 'All' || typeof(objectId) != "undefined" && newListName != 'Archived'){
      currentList = JSON.stringify({
        'objectId'  : objectId, 
        '__type'    : 'Pointer', 
        'className' : this.state.listClassName
      })

      company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
      qry = 'where={"company":'+company+'}&count=1'
      qry = 'where={"lists":'+currentList+'}&count=1&order=-createdAt'
    } else if (newListName == 'Archived') {
      qry = 'where={"company":'+company+',"archived":false}&count=1&order=-createdAt'
    }
    console.log(qry)

    className = this.state.className

    $.ajax({
      url: 'https://api.parse.com/1/classes/'+className,
      type:'GET',
      headers: parse_headers,
      async: true,
      data: qry,
      ajaxStart: function() {
        console.log('started list')
      },
      success: function(res){
        thisss.setState({prospects: res.results})
        thisss.setState({count: res.count})
        //thisss.setState({totalCount: res.count})
        thisss.setState({pages: Math.ceil(res.count/thisss.props.prospectsPerPage)})
        thisss.setState({loading: false})
      },
      error: function(res){
        //console.log('error')
        //console.log(res)
      }
    })
  },

  checkboxAction: function(checkedState, objId) {
    /* Storing Checked Prospects In LocalStorage To Make it Easier To
     * Copy and Move Prospects 
     *
     * Move To User_Prospects?
     */
    
    selectedProspects = JSON.parse(localStorage.selectedProspects)
    //console.log(checkedState)
    if(checkedState)
      selectedProspects.push(objId)
    else
      selectedProspects = _.reject(selectedProspects, 
                                   function(id){return id == objId})

    console.log(selectedProspects)
    localStorage.selectedProspects = JSON.stringify(selectedProspects)
    this.setState({selectedProspects: selectedProspects})
  },

  masterCheckboxChanged: function(masterCheckboxValue) {
    this.setState({masterCheckboxChecked: masterCheckboxValue})
  },

  render: function() {


    this.startKeyboardShortcuts()
    $('body').css({overflow:'auto'})

    prospects = []
    for(i=0;i< this.state.prospects.length;i++) {
      url = this.state.prospects[i].url
      prospect = this.state.prospects[i]

      if(url != "no linkedin website" && typeof(url) != "undefined" && url != ""){
        url = url.replace('http://','')
        the_link = React.DOM.a({href: 'http://'+url}, React.DOM.i({className: "fa fa-globe"}))
      } else {
        the_link = ""
      }

      profile = this.state.prospects[i].profile.replace('http://','')
      profile = this.state.prospects[i].profile.replace('https://','')
      profile = (typeof(profile) != "undefined") ? profile : ""
      li = React.DOM.a({href: profile, className: "linkedin_link"}, React.DOM.i({className: "fa fa-linkedin-square"}))

      keyboardSelected = (i == this.state.keyboardActiveProspect)

      selectedProspects = JSON.parse(localStorage.selectedProspects)
      alreadyChecked=false
      for(ii=0;ii< selectedProspects.length;ii++)
        if(prospect.objectId == selectedProspects[ii])
          alreadyChecked = true

      prospects.push(
        DataRow({deleteProspect: this.deleteProspect, 
                 prospect: this.state.prospects[i], 
                 masterCheckboxChecked: this.state.masterCheckboxChecked, 
                 key: this.generate_id(), 
                 link: the_link, 
                 keyboardSelected: keyboardSelected, 
                 checkboxAction: this.checkboxAction, 
                 alreadyChecked: alreadyChecked, 
                 li: li}))
    }

    listType = (this.state.currentList == "All") ? {display:'none'} : {float:'left'}
    listNameStyle = (this.state.currentList == "All") ? {display:'none'} : {float:'left',display:'inline-block', fontWeight: 200, marginTop: 1, paddingRight: 10, marginLeft: -10}
    listBtn = (this.state.currentList == "All") ? {display:'none'} : {float:'left',marginLeft:5}
    listOptions = (this.state.currentList == "All") ? {display:'none'} : {float:'right'}
    copyDropdownStyle = (this.state.currentList == "All") ? {width:114, right:4} : {width:114, right:36}
    currentList = this.state.currentList
    return (
        React.DOM.div(null, 
      React.DOM.div({className: "container", style: {width:'100%',padding:'0', background: 'linear-gradient(#dae8ff,#dae8ff)', backgroundImage: 'radial-gradient(circle at center center,#fff,#dff1fd 900px)'}}, 
        SideMenuProspects({currentList: this.state.currentList, 
                           count: this.state.count, 
                           totalCount: this.state.totalCount, 
                           changeList: this.changeList, 
                           listClassName: this.state.listClassName, 
                           createList: this.createList, 
                           lists: this.state.lists}), 

        React.DOM.div({className: "col-md-10", style: {padding:'0'}}, 
              React.DOM.div({id: "prospectDetailButtons"}, 
                ListDetailButtons({
                  renameList: this.renameList, 
                  deleteList: this.deleteList, 
                  currentListName: this.state.currentList, 
                  currentList: this.state.currentListObjectId}), 

                React.DOM.div({className: "dropdown"}, 
                  React.DOM.a({href: "javascript:", 
                     className: "btn btn-primary btn-xs list-options", 
                     id: "", 
                     style: {display:'none'}
                     }, 
                    React.DOM.i({className: "fa fa-bars"})
                  )
                ), 

                React.DOM.div({className: "dropdown"}, 
                  React.DOM.a({'data-toggle': "dropdown", 
                     id: "copyToList", 
                     href: "javascript:", 
                     className: "drop-target btn btn-primary btn-xs list-options"}, 
                     React.DOM.i({className: "fa fa-copy"}), 
                       "  Copy To List  ",  
                     React.DOM.i({className: "fa fa-caret-down"})
                ), 
                CurrentListsTwo({lists: this.state.lists, 
                                 copyDropdownStyle: copyDropdownStyle, 
                                 listAction: this.copySelectedProspects})
                ), 
  
                React.DOM.div({className: "dropdown"}, 
                  React.DOM.a({'data-toggle': "dropdown", 
                     href: "javascript:", 
                     id: "moveToList", 
                     style: listOptions, 
                     className: "btn btn-primary btn-xs list-options"}, 
                     React.DOM.i({className: "fa fa-share"}), 
                     "  Move To List  ",  
                     React.DOM.i({className: "fa fa-caret-down"})
                ), 
                CurrentLists({lists: this.state.lists, 
                              listAction: this.moveSelectedProspects})
                ), 

                React.DOM.a({onClick: this.downloadFile, 
                   href: "javascript:", 
                   id: "downloadProspects", 
                   className: "drop-target btn btn-primary btn-xs list-options"}, 
                  React.DOM.i({className: "fa fa-download"}), "   Download CSV  " 
                ), 

                React.DOM.a({onClick: this.launchProspectListFromCompanyListModal, 
                   style: listOptions, 
                   href: "javascript:", 
                   id: "downloadProspects", 
                   className: "drop-target btn btn-primary btn-xs list-options"}, 
                  React.DOM.i({className: "fa fa-cloud-download"}), "   Find Prospects   " 
                )
              ), 
        

          React.DOM.div({id: "autoscroll", style: {height:'400px',overflow:'auto'}}, 
            React.DOM.table({className: "prospects-table table table-striped", style: {marginBottom:'0px'}}, 
              React.DOM.thead({style: {backgroundColor:'white'}}, 
                CompanyProspectHeader({masterCheckboxChanged: this.masterCheckboxChanged})
              ), 
              React.DOM.tbody(null, 
                prospects
              )
            ), 
            (this.state.loading) ? LoadingSpinner(null) : ""
          )
        )
      ), 

      PanelFooting({currentPage: this.state.currentPage, 
                    count: this.state.count, 
                    paginate: this.paginate, 
                    prospectsPerPage: this.state.prospectsPerPage, 
                    pages: this.state.pages}), 
      Messenger(null), 
      CreateProspectListFromCompanyListModal({currentList: this.state.currentList, currentListObjectId: this.state.currentListObjectId})
    )
    );
  },

  paginate: function(newProspects, newPage) {
    this.setState({
      prospects: newProspects,
      currentPage: newPage,
      keyboardActiveProspect: 0
    })
    this.startKeyboardShortcuts()
    document.getElementById('autoscroll').scrollTop = 0
  },

  launchProspectListFromCompanyListModal: function() {
    
    $('#createProspectListFromCompanyListModal').modal()
  },

  downloadFile: function() {
    parse_headers = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
    }

    // Get List Count
    list = JSON.stringify({
      '__type'   :  'Pointer',
      'className':  this.state.listClassName,
      'objectId' :  this.state.currentListObjectId
    })
    console.log(list)
    // Add Support For More than 1000
    // num_of_requests
    //this.props.paginate(res.results, this.props.currentPage + 1)
    localStorage.download_total = Math.ceil(this.state.count/1000)
    localStorage.downloads      = 0

    if(this.state.currentList == "All")
      qry = 'where={"company":'+company+'}&count=1'
    else
      qry = 'where={"lists":'+list+'}&count=1'

    className = this.state.className

    for(i=0;i< Math.ceil(this.state.count/1000); i++){
      $.ajax({
        url: 'https://api.parse.com/1/classes/'+className+'?limit=1000&skip='+i,
        type:'GET',
        headers: parse_headers,
        downloadFile: 'download_'+i,
        data: qry,
        success: function(res){
          // Clean Results
          // Remove Certain Parse Columns - created_at, updated_at, objectId
          // Rename createdAt as date prospected
          for(i=0;i< res.results.length;i++) {
            delete res.results[i].company
            delete res.results[i].pos
            delete res.results[i].user
            delete res.results[i].objectId
            delete res.results[i].createdAt
            delete res.results[i].updatedAt
          }

          // Add Results To LocalStorage
          localStorage.downloads = JSON.parse(localStorage.downloads) + 1 
          localStorage.setItem(this.downloadFile, JSON.stringify(res.results))

          // Check to see if all ajax reqs in for loop are complete
          if(localStorage.downloads == localStorage.download_total) {
            console.log('matched')
            // Merge all localStorage results
            prospects = []
            for(ii=0;ii < JSON.parse(localStorage.download_total); ii++){
              prospects = prospects.concat(JSON.parse(localStorage.getItem('download_'+ii)))
              console.log(prospects)
            }

            console.log(prospects)
            // Output as CSV
            var blob = new Blob([Papa.unparse(prospects)], {type: "text/plain;charset=utf-8"});
            console.log(blob)
            saveAs(blob, "prospects.csv");
          }
      },

      error: function(res){
        console.log(res)
      }
      });
    }
    
    company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
    

  },

  removeSelectedProspects: function() {
    // If List Type is All Archive the prospect
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      "Content-Type" : "application/json"
    }

    selectedProspects = JSON.parse(localStorage.selectedProspects)
    batchData = []

    for(i=0;i< selectedProspects.length;i++){
      if(this.state.currentList != 'All'){
        tmp = {
          method:'PUT',
          path:'/1/classes/'+this.state.className+'/'+selectedProspects[i],
          body: {
            lists: {
              '__op'    : 'Remove',
              "objects" : [{ 
                  '__type':'Pointer',
                  'className':this.state.listClassName,
                  'objectId':this.state.currentListObjectId
              }]
            }
          }
        }
      }else{
        tmp = {
          method:'PUT',
          path:'/1/classes/'+this.state.className+'/'+selectedProspects[i],
          body: {
            archived:false,
          }
        }
      }
      batchData.push(tmp)
    }

    thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/batch',
      type:'POST',
      headers:parseHeaders,
      data: JSON.stringify({requests: batchData}),
      success:function(res) {
        console.log(res)
        lists = thiss.state.lists

        for(i=0;i< lists.length; i++) { 
          // Subtract From Old List - Not Working For Archive
          if(lists[i].objectId == thiss.state.currentListObjectId)
            lists[i].count = parseInt(lists[i].count) - parseInt(selectedProspects.length)
        }
        // Update local list count
        thiss.setState({lists: lists})

        // remove from current list ui
        selectedProspects = JSON.parse(localStorage.selectedProspects)
        console.log('remove selected prospects')
        console.log(selectedProspects)
        console.log(thiss.state.prospects)
        var filtered = _.filter(thiss.state.prospects, function(item) {
          for(i=0;i< selectedProspects.length;i++) 
            if(item.objectId == selectedProspects[i])
              return false
          return true
        });
        console.log(filtered)
        thiss.setState({prospects: filtered})
        localStorage.selectedProspects = JSON.stringify([])

        // add alert to inform user
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  moveSelectedProspects: function(listObjectId) {
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      "Content-Type" : "application/json"
    }

    // get the selected objectId from selectedProspects state
    selectedProspects = JSON.parse(localStorage.selectedProspects)
    batchData = []


    // Batch Update Parse
    // - Remove All Selected Prospects From Current List
    for(i=0;i< selectedProspects.length;i++){
      tmp = {
        method:'PUT',
        path:'/1/classes/'+this.state.className+'/'+selectedProspects[i],
        body: {
          lists: {
            '__op'    : 'Remove',
            "objects" : [{ 
                '__type':'Pointer',
                'className':this.state.listClassName,
                'objectId':this.state.currentListObjectId
            }]
          }
        }
      }
      batchData.push(tmp)
    }
    
    // - Add Other List 
    for(i=0;i< selectedProspects.length;i++){
      tmp = {
        method:'PUT',
        path:'/1/classes/'+this.state.className+'/'+selectedProspects[i],
        body: {
          lists: {
            '__op'    : 'AddUnique',
            "objects" : [{ 
                '__type':'Pointer',
                'className':this.state.listClassName,
                'objectId':listObjectId
            }]
          }
        }
      }
      batchData.push(tmp)
    }

    thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/batch',
      type:'POST',
      headers:parseHeaders,
      data: JSON.stringify({requests: batchData}),
      success:function(res) {
        console.log(res)
        lists = thiss.state.lists

        for(i=0;i< lists.length; i++) { 
          // Add To New List
          if(lists[i].objectId == listObjectId)
            lists[i].count = parseInt(lists[i].count) + parseInt(selectedProspects.length)
          // Subtract From Old List
          if(lists[i].objectId == thiss.state.currentListObjectId)
            lists[i].count = parseInt(lists[i].count) - parseInt(selectedProspects.length)
        }
        // Update local list count
        thiss.setState({lists: lists})

        // remove from current list ui
        console.log('selectedProspects')
        console.log(thiss.state.prospects)
        var filtered = _.filter(thiss.state.prospects, function(item) {
          is_selected = true
          for(i=0;i< selectedProspects.length;i++) 
            if(item.objectId == selectedProspects[i])
              is_selected = false
          return is_selected
        });
        console.log(filtered)
        thiss.setState({prospects: filtered})
        localStorage.selectedProspects = JSON.stringify([])

        // add alert to inform user
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  copySelectedProspects: function(listObjectId) {
    console.log(listObjectId)
    
    // make batch ajax request to parse
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      "Content-Type" : "application/json"
    }

    // Add Loading Sign To List

    selectedProspects = JSON.parse(localStorage.selectedProspects)
    batchData = []
    for(i=0;i< selectedProspects.length;i++){
      tmp = {
        method:'PUT',
        path:'/1/classes/'+this.state.className+'/'+selectedProspects[i],
        body: {
          lists: {
            '__op'    : 'AddUnique',
            "objects" : [{ 
                '__type':'Pointer',
                'className':this.state.listClassName,
                'objectId':listObjectId
            }]
          }
        }
      }
      batchData.push(tmp)
    }

    thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/batch',
      type:'POST',
      headers:parseHeaders,
      data: JSON.stringify({requests: batchData}),
      success:function(res) {
        console.log(res)
        // Update With the number of successes
        // Update local list count
        lists = thiss.state.lists
        for(i=0;i< lists.length; i++) { 
          if(lists[i].objectId == listObjectId)
            lists[i].count = parseInt(lists[i].count) + parseInt(res.length)
        }
        thiss.setState({lists: lists})
        localStorage.selectedProspects = "[]"
        thiss.setState({selectedProspects : [] })
        
        // add alert to inform user
        // Unselect all selected
      },
      error: function(err) {
        console.log(err)
      }
    });

  },

  hideAlert: function() {
    $('.alert').hide()
  },

  adjustHeight: function(whichOne) {
    prospectWindowTop = $('#prospectDetailButtons').position().top
    prospectWindowTop = prospectWindowTop + $('#prospectDetailButtons').height()
    prospectWindowBottom = $('#autoscroll').position().top + $('#autoscroll').height()

    if(whichOne == 'j')
      activeProspect = this.state.keyboardActiveProspect +1 
    else
      activeProspect = this.state.keyboardActiveProspect -1 

    activeTop = $($('.prospects-tr')[activeProspect]).position().top
    selectedHeight = $($('.prospects-tr')[activeProspect]).height()
    activeBottom = $($('.prospects-tr')[activeProspect]).position().top+selectedHeight

    console.log(prospectWindowTop, prospectWindowBottom)
    console.log(activeTop, activeBottom)

    scrollTop = document.getElementById('autoscroll').scrollTop
    if(activeBottom > prospectWindowBottom)
      document.getElementById('autoscroll').scrollTop = scrollTop + activeBottom - prospectWindowBottom

    if(activeTop < 0)
      document.getElementById('autoscroll').scrollTop = scrollTop + activeTop - 37
    else if(activeTop == $($('.prospects-tr')[0]).position().top)
      document.getElementById('autoscroll').scrollTop = 0
      
    // Get Postion of Top
    // Get Position of Bottom 
    // Get Position of Current Selected
    // Adjust by scrolling down or up
  },

  startKeyboardShortcuts: function() {
    /* Keyboard Shortcuts */
    Mousetrap.reset()
    //Mousetrap.unbind(['j','k','o'])
    thiss = this;

    /* Prospect Table Shortcuts */
    Mousetrap.bind('j', function() { 
      keyboard = thiss.state.keyboardActiveProspect
      if(keyboard != thiss.state.prospectsPerPage+1)
        thiss.adjustHeight('j')
        thiss.setState({keyboardActiveProspect: keyboard+1})
    });

    Mousetrap.bind('k', function() { 
      keyboard = thiss.state.keyboardActiveProspect
      if(keyboard != 1)
        thiss.adjustHeight('k')
        thiss.setState({keyboardActiveProspect: keyboard-1})
    });


    Mousetrap.bind('o', function() { 
      console.log('open current prospect')
      console.log($($('.keySelect').find('a.linkedin_link')[0]).attr('href'))
      link = $($('.keySelect').find('a.linkedin_link')[0]).attr('href')
      /*
      window.open(link, '_blank')
      console.log('new')
      */
      //popupWindow.blur();
      //window.focus();
      // keyboard = thiss.state.keyboardActiveProspect
      
      var a = document.createElement("a");
      a.href = link
      var evt = document.createEvent("MouseEvents");
      //the tenth parameter of initMouseEvent sets ctrl key
      // For Mac This Works Check For - Windows
      evt.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0,
                                  false, false, false, true, 0, null);
      a.dispatchEvent(evt);
    });



    /* List Modification Shortcuts */
    Mousetrap.bind('tab+r', function(){
      //console.log('reload')
      $('#renameListBtn').click()
    })

    Mousetrap.bind('tab+d', function(){
      //console.log('reload')
      $('#deleteListModal').click()
    })

    Mousetrap.bind('tab+s', function(){
      //console.log('reload')
      //$('#downloadProspects').click()
      thiss.downloadFile()
    })

    Mousetrap.bind('shift+l', function(){
      //console.log('reload')
      //$('#downloadProspects').click()
      //thiss.downloadFile()
      $('.new-list-btn').click()
    })

    Mousetrap.bind('e', function(){
      console.log('reload')
      //$('#downloadProspects').click()
      thiss.removeSelectedProspects()
    })

    Mousetrap.bind('c', function() { 
      console.log('copy')
      $('#copyToList').click()
    });

    Mousetrap.bind('m', function() { 
      console.log('copy')
      $('#moveToList').click()
    });

    //Mousetrap.bind('e', function() { console.log('e'); });
    Mousetrap.bind('right', function() { console.log('right'); });
    Mousetrap.bind('left', function() { console.log('left'); });

  },

  componentDidMount: function() {
    /* OnLoad For The First Time Function */
    localStorage.selectedProspects = JSON.stringify([])
    thisss = this;

    //this.startKeyboardShortcuts()

    parse_headers = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb'
    }

    company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
    cuid = JSON.parse(localStorage.currentUser).objectId
    user = JSON.stringify({'__type':'Pointer',
                           'objectId':cuid, 
                           'className': 'User'})
    archiveList = JSON.stringify({ //hardCode
      'objectId':'SerPQjckve',
      '__type':'Pointer', 
      'className' : this.state.listClassName
    })

    qry = 'where={"company":'+company+',"archived":true}&count=1&order=-createdAt'

    if(this.state.currentList != 'All'){
      currentList = {
        'objectId':this.state.currentListObjectId, 
        '__type':'Pointer', 
        'className' : this.state.listClassName
      }
      currentList = JSON.stringify(currentList)
      user = JSON.stringify({'__type':'Pointer',
                             'objectId':'xThAXc0LZT',
                             'className':'User'})

      // add company to prospects added through mining job
      qry = 'where={"company":'+company+',"lists":'+currentList+'}&count=1'
    }

    className = this.state.className
    $.ajax({
      url: 'https://api.parse.com/1/classes/'+className+'?limit='+thisss.state.prospectsPerPage,
      type:'GET',
      headers: parse_headers,
      cache: true,
      data: qry,
      success: function(res){
        console.log('COMPANY RESULTS')
        console.log(res.results)
        console.log(res.results.length)
        thisss.setState({prospects: res.results})
        thisss.setState({count: res.count})
        thisss.setState({totalCount: res.count})
        thisss.setState({pages: Math.ceil(res.count/thisss.props.prospectsPerPage)})
        thisss.setState({loading: false})
      },
      error: function(res){
        console.log('error')
        console.log(res)
      }
    })

    parse_headers = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
    }

    currentUser = { 
      '__type'   : 'Pointer',
      'className': '_User',
      'objectId' : JSON.parse(localStorage.currentUser).objectId
    }

    thiss = this;
    listClassName = this.state.listClassName
    $.ajax({
      url: 'https://api.parse.com/1/classes/'+listClassName,
      type: 'GET',
      headers: parse_headers,
      data: 'where={"user":'+JSON.stringify(currentUser)+"}&count=1&order=-createdAt",
      success: function(res) {
        console.log(res)
        results = res.results
        for(i=0;i< results.length; i++) {
          results.count = '~'
        }
        thiss.setState({lists: results})
        // Make batch request to get list counts after they are loaded
        for(i=0;i < res.results.length; i++) {
          localStorage.setItem(res.results[i].objectId, "")
        }

        for(i=0;i< res.results.length; i++) {
          list = {
            '__type'    : 'Pointer',
            'objectId'  : res.results[i].objectId,
            'className' : thiss.state.listClassName,
          }

          className = thiss.state.className
          $.ajax({
            url:'https://api.parse.com/1/classes/'+className,
            type:'GET',
            headers:parse_headers,
            listObjectId: res.results[i].objectId,
            data: 'where={"lists":'+JSON.stringify(list)+'}&count=1',
            success: function(res) {
              //console.log(this.listObjectId)
              localStorage.setItem(this.listObjectId, res.count)
              amount = 0
              for(ii=0;ii< results.length;ii++){
                if(localStorage.getItem(results[ii].objectId) == "")
                  amount = amount + 1
              }

              if(amount == 0) {
                for(ii=0;ii< results.length;ii++)
                  results[ii].count = localStorage.getItem(results[ii].objectId)

                thiss.setState({lists: results})
                //console.log('Got Counts')
              }

              // updated res.count
              //thiss.setState({count: res.count})
            },
            error: function(err) {
              console.log(err)
            }
          })
        }
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });
  },

  generate_id : function () {
    return '_' + Math.random().toString(36).substr(2, 9);
  },
});

/*  Dropdown Menus */

var CurrentLists = React.createClass({displayName: 'CurrentLists',
  listAction: function(e) {
    listName = $(e.target).text()
    
    var listSelect = _.filter(this.props.lists, function(item) {
       return item.name == listName
    });

    this.props.listAction(listSelect[0].objectId)
  },

  render: function() {
    lists = [] 
    for(i=0;i< this.props.lists.length;i++) {
      lists.push(
        React.DOM.li(null, React.DOM.a({style: {fontWeight:'bold',fontSize:'10px'}, href: "javascript:", onClick: this.listAction}, this.props.lists[i].name))
      )
    }
    //console.log(this.props.copyDropdownStyle)
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: {right:158}}, 
        lists
      )
    );
  }
});

var ListsMenu = React.createClass({displayName: 'ListsMenu',
  render: function() {
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: {
            minWidth:'inherit',
            top: '20px',
            width: '125px',
            right: '154px',
            left:'auto'
          }}, 
        React.DOM.li(null, React.DOM.a({href: "#books"}, 
          React.DOM.i({className: "fa fa-times"}), "  " + ' ' +
          "Delete List"
        )), 
        React.DOM.li(null, React.DOM.a({href: "#podcasts"}, 
          "Rename Lists"
        ))
      )
    );
  }
});

var CurrentListsTwo = React.createClass({displayName: 'CurrentListsTwo',
  listAction: function(e) {
    listName = $(e.target).text()
    
    var listSelect = _.filter(this.props.lists, function(item) {
       return item.name == listName
    });

    this.props.listAction(listSelect[0].objectId)
  },

  render: function() {
    lists = [] 
    for(i=0;i<this.props.lists.length;i++) {
      lists.push(
        React.DOM.li(null, React.DOM.a({style: {fontWeight:'bold',fontSize:'10px'}, 
               href: "javascript:", 
               onClick: this.listAction}, 
          this.props.lists[i].name))
      )
    }
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: this.props.copyDropdownStyle}, 
        lists
      )
    );
  }
});

var ListDetailButtons = React.createClass({displayName: 'ListDetailButtons',
  // Rename List
  getInitialState: function() {
    return {
      editMode: false
    }
  },
  render: function() {
    //console.log(this.props.currentListObjectId)
    if(!this.state.editMode) {
      stuff = React.DOM.span({className: "", style: listNameStyle}, 
            (this.props.currentListName == "All") ? '' : React.DOM.i({className: "fa fa-bars", style: {fontSize:16, marginTop:-5}}), 
            (this.props.currentListName == "All") ? '' : "   " +this.props.currentListName
              )
    } else {
      stuff = React.DOM.input({className: "form-control", style: {width: 100, float: 'left', height: 24, marginTop: -1}})
    }
    return (

          React.DOM.div(null, 
            React.DOM.h4({style: {margin:0}}, 
              stuff, 
              React.DOM.a({href: "javascript:", 
                style: listBtn, 
                'data-toggle': "modal", 
                id: "renameListBtn", 
                'data-target': ".bs-renameList-modal-sm", 
                className: " btn btn-xs btn-default"}, 
                React.DOM.i({className: "fa fa-pencil"})
              ), 
              React.DOM.a({href: "javascript:", 
                style: listBtn, 
                'data-toggle': "modal", 
                id: "deleteListModal", 
                'data-target': ".bs-deleteList-modal-sm", 
                className: "btn btn-xs btn-default"}, 
                React.DOM.i({className: "fa fa-trash-o"})
              )
            ), 

            RenameListModal({renameList: this.props.renameList}), 
            DeleteListModal({deleteList: this.props.deleteList})
          )
      );
  },

  renameList: function(newListName) {
    this.props.renameList(newListName)
  },

  deleteList: function(){
    this.props.deleteList()
  },

  toggleEdit: function() {
    this.setState({editMode: !this.state.editMode })
  }
});

var CompanyProspectHeader = React.createClass({displayName: 'CompanyProspectHeader',
  render: function() {
    return (
      React.DOM.tr(null, 
        React.DOM.th(null), 
        React.DOM.th({style: {width:300}}, "Name"), 
        React.DOM.th({style: {width:100}}, "Added On"), 
        React.DOM.th(null, "Industry"), 
        React.DOM.th({style: {width:137,display:'none'}}, "# of Prospects"), 
        React.DOM.th({style: {display:'none'}}, "Signals"), 
        React.DOM.th({style: {width:600}}, " "), 
        React.DOM.th(null, " "), 
        React.DOM.th(null, " ")
      )
    );
  }
});

},{"./company.js.min.js":5,"./create_prospect_list_from_company_list.js.min.js":14,"./data_row.js.min.js":17,"./delete_list_modal.js.min.js":19,"./loading_spinner.js.min.js":27,"./messenger.js.min.js":29,"./panel_footing.js.min.js":33,"./rename_list_modal.js.min.js":37,"./side_menu_user_prospects.js.min.js":41,"./user_prospect.js.min.js":51,"./user_prospect_header.js.min.js":52,"./user_side_menu_list.js.min.js":53}],19:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createListModal
  createList: function() {
    console.log($('#listTitle').val())

    data =  {
      'name'        : $('#listTitle').val().trim(),   //Waiting , Running
      'user'        : { '__type':'Pointer',
                      'className':'_User',
                      'objectId':'xWESiw5Smd' },
    }

    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectList',
      type:'POST',
      headers: appConfig.parseHeaders,
      data: JSON.stringify(data),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });

    data.count = 0

    this.props.createList(data)
    
    $('#createListModal').modal('hide')
    $('body').removeClass('modal-open');
    $('.modal-backdrop').remove();
    //$('button.close').click()
  },

  createListButtonClick: function() {
    if($('#listTitle').val().trim() != "")
      this.createList()
  },

  createMiningJob: function(e) {
    e.preventDefault()
    console.log('lmao')
    if($('#listTitle').val().trim() != "")
      this.createList()
  },

  deleteList: function() {
    this.props.deleteList()
  },

  render: function() {
    return (
          React.DOM.div({className: "modal fade bs-deleteList-modal-sm", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "createListModal", style: {top:'200px'}}, 
            React.DOM.div({className: "modal-dialog modal-sm"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-trash-o"}), "  Delete List?")
                ), 
                React.DOM.div({className: "modal-body"}, 
                  React.DOM.form({className: "deleteForm", onSubmit: this.deleteList}, 
                    React.DOM.a({href: "javascript:", 
                      onClick: this.deleteList, 
                      className: "btn btn-danger", 
                      style: {display:'block', width:'100%'}}, 
                      "Delete"
                    ), 
                    React.DOM.br(null), 
                    React.DOM.a({href: "javascript:", 
                      onClick: this.deleteList, 
                      className: "btn btn-default", 
                      style: {display:'block', width:'100%'}}, 
                      "Cancel"
                    )
                  )

                )
              )
            )
          )
    );
  }
});


},{}],20:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {
      name: this.props.initialTemplateValues.name,
      body: this.props.initialTemplateValues.body,
      subject: this.props.initialTemplateValues.subject,
      editMode: this.props.initialTemplateValues.editMode
    }
  },

  componentDidMount: function() {
    console.log('did mount')
    $('.template-body').html(this.state.body)
    if(this.state.editMode) {
      $('.summer').summernote({
        height: 200,
        toolbar: [
          ['style', ['bold', 'italic', 'underline', 'clear']],
          ['font', ['strikethrough']],
          ['fontsize', ['fontsize']],
          ['color', ['color']],
          ['para', ['ul', 'ol', 'paragraph']],
          ['height', ['height']],
        ]
      })
    }

    renderjson.set_show_to_level('all')
    prospect = _.pick(this.props.prospect, 
      'company_name', 'name', 'pos'
    )
    prospect.first_name = prospect.name.split(' ')[0]
    prospect.last_name = _.last(prospect.name.split(' '))
    prospect = _.omit(prospect, 'name')

    document.getElementById("editTemplate").appendChild(renderjson(prospect));
    $('#editTemplateOverlay').html()
    thiss = this;
    $('.renderjson').click(function() {
      thiss.props.toggleTemplateEditMenu()
    })

    $('.renderjson').css({
      'position': 'absolute',
      'z-index': '1000000000',
      'background-color':'rgba(0,0,0,0)',
      'border':'0',
      'color':'white',
      'margin-top':'0px',
      'height': '542px',
      'overflow':'auto',
      'width':'380px'
    })

    $('.key').css({
      'cursor':'pointer'
    })

    $('.timeline').css({
      '-webkit-filter': 'blur(10px)',
    })
    $('#campaign-top-detail').css({
      '-webkit-filter': 'blur(10px)',
    })
  },
  componentWillUnmount:function() {
    $('.timeline').css({
      '-webkit-filter': '',
    })
    $('#campaign-top-detail').css({
      '-webkit-filter': '',
    })
  },

  clickedOverlay: function() {
    console.log('clicked overlay')
    this.props.toggleTemplateEditMenu()
  },

  changeMode: function() {
    // Update template html on toggle
    parse_headers = appConfig.parseHeaders
    if(this.state.editMode){
      $('.summer').destroy();
      $('.timeline').css({
        '-webkit-filter': 'blur(20px)',
      })

      console.log('look at this')
      console.log(name)
      name = (this.props.initialTemplateValues.newTemplate) ? $('#template-name').val() : this.state.name
      this.props.saveTemplate({
        name: name,
        body: $('.summer').code(),
        subject: $('.subject').val(),
      }, this.props.initialTemplateValues.newTemplate)

      this.setState({
        name: $('#template-name').val(),
        body: $('.summer').code(),
        subject: $('.subject').val(),
        editMode: !this.state.editMode,
      })

      objId = this.props.initialTemplateValues.objectId
      $.ajax({
        url:'https://api.parse.com/1/classes/Templates/'+objId,
        type:'PUT',
        headers:parse_headers,
        data:JSON.stringify({body: $('.summer').code(),
                             subject: $('.subject').val()}),
        success: function(res) {
          console.log(res)
        },
        error: function(err) {
          console.log(err)
        }
      });
    } else {
      this.setState({ editMode: !this.state.editMode })
      $('.timeline').css({
        '-webkit-filter': 'blur(20px)',
      })
    }
  },

  componentWillUpdate: function(newProps) {
    console.log('THE NEW PROPS')
    console.log(newProps)
  },

  componentDidUpdate: function() {
    /* thiss = this; */
    console.log('OTHER')
    if(this.state.editMode){
      console.log('CALLED')
      // Replace Subject 
      $('.subject').val(this.state.subject)
      $('#template-name').val(this.state.name)

      $('.summer').summernote({
        height: 200,
        toolbar: [
          ['style', ['bold', 'italic', 'underline', 'clear']],
          ['font', ['strikethrough']],
          ['fontsize', ['fontsize']],
          ['color', ['color']],
          ['para', ['ul', 'ol', 'paragraph']],
          ['height', ['height']],
        ]
      })

      // Initialize Editor with html
      $('.summer').code(this.state.body)
    }
  },


  render: function() {
    subjectPlace = (this.state.editMode) ? React.DOM.input({style: {display:'inline',width:480}, className: "form-control subject"}) : this.state.subject

    if(this.state.editMode){
       toggleButton = React.DOM.a({href: "javascript:", 
             onClick: this.changeMode, 
             className: "btn btn-success btn-xs", 
             style: {display:'block',float:'right',marginTop:5}}, 
            React.DOM.i({className: "fa fa-save"}), "   Save Template")

       if(this.props.initialTemplateValues.newTemplate){
         the_name = React.DOM.input({className: "form-control", 
                           id: "template-name", 
                           style: {float:'left',width:200}})
       }
    } else {
       toggleButton = React.DOM.a({href: "javascript:", 
             onClick: this.changeMode, 
             className: "btn btn-primary btn-xs", 
             style: {display:'block',float:'right',marginTop:5}}, 
            React.DOM.i({className: "fa fa-pencil-square"}), "   Edit Template")

       the_name = React.DOM.h6({style: {float:'left'}}, 
                   React.DOM.i({className: "fa fa-file-text-o"}), " ", 
                   this.state.name
                  )
    }

    return (
      React.DOM.div({id: "editTemplate"}, 
        React.DOM.h5({className: "example-template-title"}, "Example Template Values"), 
        React.DOM.div({className: "example-template-title", 
             style: {marginLeft:215, marginTop:8}}, 
          React.DOM.a({href: "javascript:", 
            className: "btn btn-default btn-xs"}, 
            React.DOM.i({className: "fa fa-chevron-left"})), 
          React.DOM.a({href: "javascript:", 
            style: {marginLeft:5}, 
            className: "btn btn-default btn-xs"}, 
            React.DOM.i({className: "fa fa-chevron-right"}))
        ), 
        React.DOM.div({onClick: this.clickedOverlay, id: "editTemplateOverlay"}), 
          React.DOM.div({id: "editTemplateView", 
               className: "panel panel-default", 
               style: {display:'block'}}, 
               React.DOM.div({className: "panel-heading", style: {height:50}}, 
                 the_name, 
              React.DOM.a({href: "javascript:", 
                className: "btn btn-default btn-xs", 
                style: {float:'right',marginLeft:5,marginTop:5}}, 
                React.DOM.i({className: "fa fa-trash"})
              ), 
              toggleButton
            ), 
            React.DOM.div({className: "panel-body"}, 
              React.DOM.div({className: "editTemplateTitle"}, 
                React.DOM.span(null, "Subject: "), 
                subjectPlace
              ), 
             React.DOM.br(null), 
             React.DOM.div({className: "templateDetails"}, 
               React.DOM.h6({style: {marginBottom:'0'}, className: "text-muted"}, 
                 "Created by Mark on Jul. 21, 2014"
               ), 
               React.DOM.h6({style: {marginTop:'0'}, className: "text-muted"}, 
                 "last updated 7 days ago"
               )
             ), 
            React.DOM.br(null), 
            React.DOM.div({className: "panel panel-default"}, 
              React.DOM.div({className: "panel-body summer template-body"}
              )
            )
        )
      )
    )
    );
  }
});

},{}],21:[function(require,module,exports){
/** @jsx React.DOM */

var Templates = require('./templates.js.min.js');
var Schedules = require('./schedule.js.min.js');
var Campaigns = require('./campaigns.js.min.js');
var SentMail = require('./sent_mail.js.min.js');
var FollowupFeed = require('./followup_feed.js.min.js');
var CampaignDetail = require('./campaign_detail.js.min.js');
var CreateCampaignModal = require('./create_campaign.js.min.js');

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {
      selectedScreen: 'Campaigns',
      selectedCampaign:'',
      prospectLists: [],
      campaigns: []
    }
  },

  componentDidMount: function() {
    thiss = this;
     company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
     qry = 'where={"company":'+company+'}&include=prospect_list,followups,followups.template&order=-createdAt'
     $.ajax({
       url:'https://api.parse.com/1/classes/Campaign',
      headers: appConfig.headers,
      data: qry,
      success: function(res) {
        console.log(res.results)
        thiss.setState({campaigns: res.results})
        // TODO  - Add Get Prospect List Count
        // Follow Up Feed Feature
        // - Shows what stages different prospects are at and whether you 
        //   should send a follow up to them.
        // How to get the stage of Prospect List
        // - Where to persist last email sent
        // - What is stored at the campaign level
        // - What is stored at the prospect level
        // - Timeline (General 7 x 7 cadences)
        //   - 
        // - Rules (Sankey / Flow View)
        //   - Shows all or only the ones that havent responded 
        //   - Show all the ones hthat haven't replied
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
     });
    $.ajax({
      url: 'https://api.parse.com/1/classes/ProspectList',
      headers: appConfig.headers,
      // TODO
      // - Company Specific
      success: function(res) {
        thiss.setState({prospectLists: res.results})
      },
      error: function(err) {

      }
    })


  },
  
  toggleScreen: function(screen) {
    this.setState({selectedScreen : screen})
  },

  changeSelectedCampaign: function(screen, selectedCampaign) {
    console.log(selectedCampaign)
    this.setState({
      selectedCampaign : selectedCampaign,
      selectedScreen: screen,
    })
  },

  render: function() {
    thiss = this
    console.log(this.state.selectedCampaign)
    console.log(this.state.selectedScreen)
    console.log(this.state.campaigns)
    switch (this.state.selectedScreen){
      case 'Campaigns':
        CurrentScreen = Campaigns({campaigns: thiss.state.campaigns, 
                            changeSelectedCampaign: thiss.changeSelectedCampaign, 
                            toggleScreen: thiss.toggleScreen})
        break;
      case 'CampaignDetail':
        CurrentScreen = CampaignDetail({
                        selectedCampaign: thiss.state.selectedCampaign, 
                      selectedCampaignObjectId: thiss.state.selectedCampaginObjectId, 
                        toggleScreen: thiss.toggleScreen})
        break;
      case 'Templates':
        CurrentScreen = Templates(null)
        break;
      case 'Overview':
        CurrentScreen = Campaigns({campaigns: thiss.state.campaigns, 
                            changeSelectedCampaign: thiss.changeSelectedCampaign, 
                            toggleScreen: thiss.toggleScreen})
        break;
      case 'Sent Mail':
        CurrentScreen = SentMail(null)
        break;
      case 'Followup Feed':
        CurrentScreen = FollowupFeed(null)
        break;
      case 'Schedules':
        CurrentScreen = Schedules(null)
        break;
    }

    return (
      React.DOM.div({className: "", style: {height:'550px'}}, 
        React.DOM.div({className: "container", style: {padding:'0',width:'100%',height:'100%'}}, 
          SideMenu({
                createCampaign: this.createCampaign, 
                prospectLists: this.state.prospectLists, 
                toggleScreen: this.toggleScreen}), 
              React.DOM.div({className: "col-md-10", 
                   style: {padding:'0',height:'100%'}}, 
            CurrentScreen
          )
        )
      )
    );
  },

  persistCampaign: function(newCampaign) {
    Campaign = {}
    Campaign.name = newCampaign.name
    Campaign.company = JSON.parse(localStorage.currentUser).company
    thiss = this;

    $.ajax({
      url:'https://api.parse.com/1/classes/Campaign',
      type:'POST',
      headers:appConfig.headers,
      data:JSON.stringify(Campaign),
      success: function(res) {
        the_campaign = _.find(thiss.state.campaigns, function(campaign){
          first = campaign.name == newCampaign.name 
          second = campaign.prospect_list == newCampaign.prospect_list
          return first && second
        })
        console.log(res)
        console.log(res.objectId)

        the_campaign.objectId = res.objectId
        campaigns = _.filter(thiss.state.campaigns, function(campaign){
          first = campaign.name == newCampaign.name 
          second = campaign.prospect_list == newCampaign.prospect_list
          return !(first && second)
        })
        campaigns.push(the_campaign)
        console.log(campaigns)

        thiss.setState({campaigns:  campaigns})

        $.ajax({
          url:'https://api.parse.com/1/classes/Campaign/'+res.objectId,
          type:'PUT',
          data: JSON.stringify({prospect_list:{
            '__type':'Pointer',
            'className':'ProspectList',
            'objectId':newCampaign.prospect_list.objectId,
          }}),
          headers:appConfig.headers,
          success: function(res){
          },
          error: function() {

          }
        })
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  createCampaign: function(newCampaign) {
    campaigns = this.state.campaigns
    campaigns.push(newCampaign)
    this.setState({campaigns: campaigns})
    console.log(newCampaign)

    $('.modal').click()
    $('.modal-backdrop').click()

    this.persistCampaign(newCampaign)
  }
});

var SideMenu = React.createClass({displayName: 'SideMenu',
  toggleScreen: function(e) {
    this.props.toggleScreen($(e.target).text().trim())
  },

  /*
    <button type="button" className="sharp btn btn-default" onClick={this.toggleScreen}>
      <i className="fa fa-file-text" /> &nbsp; Templates
    </button>
    <button type="button" className="sharp btn btn-default" onClick={this.toggleScreen}>
      <i className="fa fa-clock-o" /> &nbsp; Schedules
    </button>
  */
  createCampaignModal: function() {

  },

  render: function() {
    return (
      React.DOM.div({className: "col-md-2", 
        style: {padding:'0',height:'100%', backgroundColor:'rgb(90, 107, 119)',borderBottomLeftRadius:'3px'}}, 
        React.DOM.div({className: "btn-group-vertical", style: {width:'100%'}}, 
          React.DOM.button({type: "button", 
                  className: "sharp btn btn-default", 
                  onClick: this.toggleScreen}, 
            React.DOM.span({style: {marginLeft:'27px'}}, "Overview")
          ), 
          React.DOM.button({type: "button", 
                  className: "sharp btn btn-default", 
                  onClick: this.toggleScreen}, 
            React.DOM.i({className: "fa fa-newspaper-o"}), "  ",  
            React.DOM.span({style: {marginLeft:'4px'}}, "Followup Feed")
          ), 
          React.DOM.button({type: "button", style: {display:'none'}, 
                  className: "sharp btn btn-default"}, 
            React.DOM.i({className: "fa fa-code-fork"}), "  ",  
            React.DOM.span({style: {marginLeft:'4px'}}, "Rules")
          ), 
          React.DOM.button({type: "button", style: {display:'none'}, 
                  className: "sharp btn btn-default", onClick: this.toggleScreen}, 
            React.DOM.i({className: "fa fa-pie-chart"}), "   Analytics"
          ), 
          React.DOM.button({type: "button", 
                  className: "sharp btn btn-default", 
                  onClick: this.toggleScreen}, 
            React.DOM.i({className: "fa fa-paper-plane"}), "   Sent Mail"
          )
        ), 

        React.DOM.div({className: "", style: {width:'100%',textAlign:'center',marginTop:100}}, 
          React.DOM.a({href: "javascript:", className: "btn btn-primary new-list-btn", 
                'data-toggle': "modal", 'data-target': ".bs-createCampaign-modal-sm", 
                style: { backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
            React.DOM.i({className: "fa fa-plus-circle"}), "  New Campaign"
          )
        ), 
        CreateCampaignModal({prospectLists: this.props.prospectLists, 
                             createCampaign: this.createCampaign})
      )
    );
  },

  createCampaign: function(newCampaign) {
    this.props.createCampaign(newCampaign)
  }
});

},{"./campaign_detail.js.min.js":3,"./campaigns.js.min.js":4,"./create_campaign.js.min.js":8,"./followup_feed.js.min.js":22,"./schedule.js.min.js":38,"./sent_mail.js.min.js":40,"./templates.js.min.js":48}],22:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // FollowupFeed
  getInitialState: function() {
    return {
      scheduledFollowups: []
    }
  },


  render: function() {
    scheduledFollowups = []
    for(i=0;i< this.state.scheduledFollowups.length; i++){ 
      scheduledFollowups.push(ScheduledFollowupRow(null))
    }

    return (
      React.DOM.div({style: {overflow:'auto', height:550}}, 
        React.DOM.table({className: "table table-striped", style: {marginBottom:0}}, 
          React.DOM.thead(null, 
            React.DOM.th(null), 
            React.DOM.th(null, "Prospect Name"), 
            React.DOM.th(null, "Prospect Email"), 
            React.DOM.th({style: {textAlign:'center'}}, "Status")
          ), 
          React.DOM.tbody(null, 
            scheduledFollowups
          )
        )
      )
    );
  }
});

var ScheduledFollowupRow = React.createClass({displayName: 'ScheduledFollowupRow',
  render: function() {
    return (
      React.DOM.tr(null

      )
    );
  }
})

},{}],23:[function(require,module,exports){
/** @jsx React.DOM */
var SendEmailModal = require('./send_email_modal.js.min.js')
var TimelineDayElement = require('./timeline_day_element.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  // FollowupTimeline
  getInitialState: function() {
    initialFollowups = this.props.initialFollowups
    initialFollowups = (initialFollowups) ? initialFollowups : []

    return {
      followups: initialFollowups,
      loading: false,
      currentTemplate:''
    }
  },

  componentDidMount: function() {
    thiss = this;
    $('.day').tooltip({
      placement: 'right',
      title:'+ Add a follow-up'
    })
    // Followups that belong to campaign
     company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
     currentCampaign = {
       '__type': 'Pointer',
       'className':'Campaign',
       'objectId':this.props.currentCampaign.objectId
     }
     currentCampaign = JSON.stringify(currentCampaign)
     //qry = 'where={"company":'+company+',"campaign":'+currentCampaign+'}&include=template'
     qry = 'where={"campaign":'+currentCampaign+'}&include=template'
     //qry = 'where={"campaign":'+currentCampaign+'}'
     $.ajax({
       url:'https://api.parse.com/1/classes/Followup',
       type:'GET',
       headers: appConfig.headers,
       data: qry,
       success: function(res) {
         console.log('followup timeline')
         console.log(res.results)
       },
       error: function(err) {
         console.log('error')
         console.log(err)
       }
     })
  },
  
  render: function() {
    batches =  _.countBy(this.props.prospects, 
                      function(prospect) { return prospect.last_contacted })

    timelineElements = []
    followups = (this.state.followups) ? this.state.followups : []
    console.log(followups)
    for(i=0;i< 31;i++){
      batchCount = (batches[i]) ? batches[i] : 0
      
      addTemplateMode = false; 
      currentTemplate = false;
      elementType = false
      for(ii=0;ii< followups.length; ii++){
        // TODO - Replace with underscore method
        //console.log('FOLLOWUPS ERROR')
        //console.log(followups)
        elementType = i == followups[ii].day
        if(elementType) {
          addTemplateMode = (followups[ii].addTemplateMode) ? true : false
          currentTemplate = followups[ii].template
          break
        }
      }

      timelineElements.push(TimelineDayElement({
                              dayCount: i, 
                              templates: this.props.templates, 
                              currentTemplate: currentTemplate, 
                              batchCount: batchCount, 
                              addTemplateMode: addTemplateMode, 
                              elementType: !elementType, 
                              addFollowup: this.addFollowup, 
                              editFollowup: this.editFollowup, 
                              saveFollowup: this.saveFollowup, 
                              removeFollowup: this.removeFollowup, 
                              setCurrentTemplate: this.setCurrentTemplate}))
    }
    return (
      React.DOM.div(null, 
        React.DOM.div({className: "timeline", 
             style: {height:'100%',backgroundColor:'rgb(90, 107, 119)',
                     width:5,marginTop:-35}}, 
             timelineElements
        ), 
        SendEmailModal({prospects: this.props.prospects, 
                        currentTemplate: this.state.currentTemplate})
      )
    );
  },

  createFollowup: function() {
    //
  },         

  addFollowup: function(day) {
    //console.log('called template edit menu')
    followups = this.state.followups
    followups.push({addTemplateMode: true, day: day})
    this.setState({
      followups: followups
    })
  },

  editFollowup: function(day) {
    // find template set editmode is false
    for(i=0;i< this.state.followups.length; i++){
      if(this.state.followups[i].day == day){
        break
      }
    }

    followups = this.state.followups
    followups[i].addTemplateMode = true
    this.setState({followups: followups})
  },

  saveFollowup: function(day, chosenTemplate) {
    new_followups = this.state.followups
    new_followups[day].addTemplateMode = false
    new_followups[day].template = chosenTemplate

    this.setState({followups: new_followups})

    if(new_followups[day].objectId){
      url = "/"+new_followups[i].objectId; type="PUT"

      data = {template:{
        __type:'Pointer',
        className:'Template',
        objectId: chosenTemplate.objectId
      }}
    } else {
      url = ""; type="POST";

      data = {
        day: day,
        campaign: {
          __type: 'Pointer',
          className:'Campaign',
          objectId: this.props.currentCampaign.objectId
        },
        template: {
          __type: 'Pointer',
          className:'Template',
          objectId:chosenTemplate.objectId,
        }
      }
    }

    thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/classes/Followup',
      type:type,
      data:JSON.stringify(data),
      headers:appConfig.headers,
      success: function(res) {
        
        new_followups[day].objectId = res.objectId
        thiss.setState({followups: new_followups})

        console.log(res)
        $.ajax({
          url:'https://api.parse.com/1/classes/Campaign/'+thiss.props.currentCampaign.objectId,
          type:'PUT',
          data:JSON.stringify({followups: {
            __op: 'AddUnique',
            objects:[{
              __type:'Pointer', 
              className:'Followup',
              objectId:res.objectId
            }]
          }}),
          headers:appConfig.headers,
          success: function() {
          },
          error: function() {
          }
        })
      },
      error: function() {

      },
    })
  },

  removeFollowup: function(day) {
    followups = []
    for(i=0;i< this.state.followups.length;i++)
      if(this.state.followups[i].day != day)
        followups.push(this.state.followups[i])
      
    for(i=0;i< this.state.followups.length;i++)
      if(this.state.followups[i].day == day)
        break
    
    this.setState({followups: followups}) 
    id = this.state.followups[i]

    thiss = this;
    if(id) {
      id = id.objectId
      $.ajax({
        url:'https://api.parse.com/1/classes/Followup/'+id,
        headers:appConfig.headers,
        type:'DELETE',
        success: function(res) {
          console.log(res)
        }
      })

     console.log('REMOVE ARRAY')
      $.ajax({
        url:'https://api.parse.com/1/classes/Campaign/'+thiss.props.currentCampaign.objectId,
        headers:appConfig.headers,
        type:'PUT',
        data: JSON.stringify({
          followups: {
            __op : 'Remove',
            objects: [{
              __type: 'Pointer',
              className: 'Followup',
              objectId: id
            }]
          }
        }),
        success: function(res){
          console.log(res)
        },
        error: function() {
        }
      })
    }
  },

  setCurrentTemplate: function(template) {
    this.setState({currentTemplate: template })
  }
});



},{"./send_email_modal.js.min.js":39,"./timeline_day_element.js.min.js":50}],24:[function(require,module,exports){
/** @jsx React.DOM */

data = require('../lib/data.min.js') 

module.exports = React.createClass({displayName: 'exports',
  // free trial
  open: function() {
    console.log('open')
    handler.open({
      name: 'Customero',
      description: 'Get 900 free email credits!',
      amount: 0,
      panelLabel: "Start Your Free Trial!",
      open: function() {
        console.log($('.close'))
        $('.close').hide()
      },
      closed: function() {
        console.log("closed")
      }
    });
  },

  componentDidMount: function() {
    $('body').css({overflow:'hidden'})


    //console.log(this.getDOMNode())
    /*
    $(this.getDOMNode()).append(' <form action="" method="POST"> <script src="https://checkout.stripe.com/checkout.js" class="stripe-button" data-key="pk_test_4T5Pftl4ho0EgFVo1G7OKRda" data-amount="2000" data-name="Demo Site" data-description="2 widgets ($20.00)" data-image=""> </script> </form>')

  setTimeout(function() {
    console.log($('.stripe-button-el').html())
    $('.stripe-button-el').click()

  }, 400)
*/

  },

  render: function() { 
  data = data()
    imgs_1 = []
    imgs_2 = []
    for(i=0;i < 120; i++) {
      imgs_1.push(React.DOM.img({src: data[i], className: "prospect-img"}))
    }
    for(i=15;i < 30; i++) {
      imgs_2.push(React.DOM.img({src: data[i], className: "prospect-img"}))
    }

  console.log(data)
    return (
      React.DOM.div(null, 
      React.DOM.div({id: "signup"}, " "), 

      React.DOM.div(null, 
        React.DOM.h1({className: "title"}, "Customero."), 
        React.DOM.h5({className: "tagline"}, "Get 900 free email credits. 100% refund guarantee.  We will only start charging your card after 1 month.")

      ), 

      React.DOM.div({id: "", style: {position:'absolute',zIndex:'-2',top:0,left:0}}, 
        React.DOM.div({className: "", style: {marginLeft:34}}, 
        imgs_1, 
        imgs_2
        )
      )
      )
    )
  }
});

},{"../lib/data.min.js":54}],25:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Landing Page
  login: function() {
    console.log('login')
    email = $('#email').val()
    password = $('#password').val()
    p = {"X-Parse-Application-Id": "N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ",
         "X-Parse-REST-API-Key": "VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb"}
    $.ajax({
      url:'https://api.parse.com/1/login',
      headers: p,
      type:'GET',
      data: {
        'username':email,
        'password':password
      },
      success:function(res) {
        localStorage.setItem('currentUser', JSON.stringify(res))
        location.href = "#"
      },
      error: function(res) {
        console.log(res)
      }
    });
  },

  render: function() {
    $('body').css({overflow:'auto'})

    return (
      React.DOM.div({className: ""}, 
        React.DOM.div({className: "background-image"}), 
        React.DOM.nav({className: "thenavbar navbar navbar-default navbar-fixed-top", role: "navigation"}, 
          React.DOM.div({className: "container-fluid"}, 
            React.DOM.a({className: "the-title tk-foco brand navbar-brand", style: {fontWeight:'100'}, 
                href: "#"}, 
              "Customero", 
              React.DOM.span({style: {fontSize:'22px',marginLeft:'30px'}}, "Supercharge your sales! ")
            )
          ), 
          React.DOM.a({href: "#login", className: "btn-lg btn login-btn"}, "Log In")
        ), 
        React.DOM.div({className: "col-md-12", style: {marginTop:'100px',paddingTop:'100px'}}, 
          React.DOM.h1({style: {color:'#1ca3fd',fontWeight:'bold',textAlign:'center',fontSize:'56px'}}, " Generate High Quality Prospect Lists "), 
          React.DOM.h1({style: {color:'#1ca3fd',fontWeight:'100',textAlign:'center',fontSize:'56px'}}, " Accelerate Sales "), 
          React.DOM.a({href: "#signup", className: "btn-lg btn-success btn start-trial"}, "Start Your Free Trial Today"), 

          React.DOM.div({className: "panel panel-default", style: {display:'none'}}, 
          React.DOM.div({className: "panel-heading"}, " "), 
            React.DOM.div({className: "panel-body"}, 
              React.DOM.form({onSubmit: this.login}, 
              React.DOM.input({placeholder: "Email", id: "email", type: "text", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Password", type: "password", id: "password", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.a({href: "javascript:", onClick: this.login, className: "btn btn-success btn-lg", style: {display:'block',backgroundColor:'#1ca3fd'}}, "Log In")
              )
            ), 
          React.DOM.div({className: "panel-footer"}, " ")
          )
        ), 
        React.DOM.div({className: "gradient"}, " ")
      )
    );
  }
});

},{}],26:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Landing Page
  login: function() {
    console.log('login')
    email = $('#email').val()
    password = $('#password').val()
    p = {"X-Parse-Application-Id": "N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ",
         "X-Parse-REST-API-Key": "VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb"}
    $.ajax({
      url:'https://api.parse.com/1/login',
      headers: p,
      type:'GET',
      data: {
        'username':email,
        'password':password
      },
      success:function(res) {
        localStorage.setItem('currentUser', JSON.stringify(res))
        location.href = "#"
      },
      error: function(res) {
        console.log(res)
      }
    });
  },

  render: function() {
    $('body').css({overflow:'auto'})

    return (
      React.DOM.div({className: ""}, 
        React.DOM.div({className: "background-image"}), 
        React.DOM.nav({className: "thenavbar navbar navbar-default navbar-fixed-top", role: "navigation"}, 
          React.DOM.div({className: "container-fluid"}, 
            React.DOM.img({className: "network-logo", src: "build/img/network.png"}), 
            React.DOM.a({className: "the-title tk-foco brand navbar-brand", style: {fontWeight:'100'}, 
                href: "#"}, 
              "Customero", 
              React.DOM.span({style: {fontSize:'20px',marginLeft:'30px',fontFamily:'Open Sans'}}, "Social Prospecting On Steroids ")
            )
          ), 
          React.DOM.a({href: "#login", className: "btn-lg btn login-btn", style: {fontFamily:'proxima-nova'}}, "LOG IN")
        ), 

        React.DOM.div({className: "col-md-7 col-sm-7", style: {marginTop:'100px',paddingTop:'80px'}}, 
          React.DOM.h1({style: {color:'#1ca3fd',fontWeight:'100',color:'white',textAlign:'center',fontSize:'38px',fontFamily:'Open Sans',fontSize:'40px'}}, " Generate High Quality Prospect Lists "), 
          React.DOM.h1({style: {color:'#1ca3fd',fontWeight:'100',textAlign:'center',color:'white',fontSize:'46px',fontFamily:'Open Sans', fontStyle:'italic'}}, " Accelerate Sales "), 
          React.DOM.a({href: "#signup", className: "btn-lg btn-success btn start-trial"}, "Start Your Free Trial Today"), 

          React.DOM.div({className: "panel panel-default", style: {display:'none'}}, 
          React.DOM.div({className: "panel-heading"}, " "), 
            React.DOM.div({className: "panel-body"}, 
              React.DOM.form({onSubmit: this.login}, 
              React.DOM.input({placeholder: "Email", id: "email", type: "text", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Password", type: "password", id: "password", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.a({href: "javascript:", onClick: this.login, className: "btn btn-success btn-lg", style: {display:'block',backgroundColor:'#1ca3fd'}}, "Log In")
              )
            ), 
          React.DOM.div({className: "panel-footer"}, " ")
          )
        ), 
        React.DOM.div({className: "gradient"}, " "), 

        React.DOM.div({className: "col-md-5 col-sm-5", id: "network-picture", 
             style: {height:500,backgroundImage:"url('build/img/network_icon_1.png')"}}
        )
      )
    );
  }
});

},{}],27:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // LoadingSpinner
  render: function() {
    return (
    React.DOM.div({className: "spinner", style: {marginTop:'180px'}}, 
      React.DOM.div({className: "spinner-container container1"}, 
        React.DOM.div({className: "circle circle1"}), 
        React.DOM.div({className: "circle circle2"}), 
        React.DOM.div({className: "circle circle3"}), 
        React.DOM.div({className: "circle circle4"})
      ), 
      React.DOM.div({className: "spinner-container container2"}, 
        React.DOM.div({className: "circle circle1"}), 
        React.DOM.div({className: "circle circle2"}), 
        React.DOM.div({className: "circle circle3"}), 
        React.DOM.div({className: "circle circle4"})
      ), 
      React.DOM.div({className: "spinner-container container3"}, 
        React.DOM.div({className: "circle circle1"}), 
        React.DOM.div({className: "circle circle2"}), 
        React.DOM.div({className: "circle circle3"}), 
        React.DOM.div({className: "circle circle4"})
      )
    )
    )
  }
});

},{}],28:[function(require,module,exports){
/** @jsx React.DOM */

theData = require('../lib/data.min.js') 

module.exports = React.createClass({displayName: 'exports',
  // SignUp
  componentDidMount: function() {
    $('body').css({overflow:'hidden'})
  },

  login: function() {
    console.log('login')
    email = $('#email').val()
    password = $('#password').val()
    p = {"X-Parse-Application-Id": "N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ",
         "X-Parse-REST-API-Key": "VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb"}
    $.ajax({
      url:'https://api.parse.com/1/login',
      headers: p,
      type:'GET',
      data: {
        'username':email,
        'password':password
      },
      success:function(res) {
        localStorage.setItem('currentUser', JSON.stringify(res))
        location.href = "#"
      },
      error: function(res) {
        console.log(res)
      }
    });
  },

  render: function() { 
    data = theData()
    imgs_1 = []
    imgs_2 = []
    for(i=0;i < 120; i++) {
      imgs_1.push(React.DOM.img({src: data[i], className: "prospect-img"}))
    }
    for(i=15;i < 30; i++) {
      imgs_2.push(React.DOM.img({src: data[i], className: "prospect-img"}))
    }

  console.log(data)
    return (
      React.DOM.div(null, 
      React.DOM.div({id: "signup"}, " "), 
      React.DOM.div(null, 
        React.DOM.h1({className: "title"}, "Customero."), 
        React.DOM.h5({className: "tagline"}, "Generate high quality prospect lists. Accelerate Sales."), 
          React.DOM.div({className: "panel panel-default login-info", style: {display:'block'}}, 
            React.DOM.div({className: "panel-body"}, 
              React.DOM.form({onSubmit: this.login}, 
              React.DOM.input({placeholder: "Email", id: "email", type: "text", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Password", type: "password", id: "password", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.a({href: "javascript:", onClick: this.login, className: "btn btn-success btn-lg", style: {display:'block',backgroundColor:'#1ca3fd'}}, "Log In")
              )
            )
          )
      ), 

        React.DOM.div({id: "", style: {position:'absolute',zIndex:'-2',top:0,left:0}}, 
          React.DOM.div({className: "", style: {marginLeft:34, display:'none'}}, 
          imgs_1, 
          imgs_2
          )
        )
      )
    )
  }
});

},{"../lib/data.min.js":54}],29:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  //Messenger
  render: function() {
    return (
        React.DOM.div({className: "alert alert-success", 
             'data-alert': "alert", 
             style: {position:'absolute',
                     top: 31, 
                     right:30, 
                     display:'none',
                     width:200}}, 
                     React.DOM.a({className: "close", 
                       href: "javascript:", 
                       onClick: this.hideAlert}, "×"), 
            "Test"
        )
    );
  }
});

},{}],30:[function(require,module,exports){
/** @jsx React.DOM */

var LoadingSpinner = require('./loading_spinner.js.min.js')

var Job = React.createClass({displayName: 'Job',
  startJob: function() {
    // Add Linkedin Locations
    // Email When Completed
    // Have Report For Number of Profiles Found / number of emails found per mining job
    
    miningJob = this.props.miningJob
    miningJob.status = "Running"
    miningJob.last_ran = Math.round(+new Date()/1000)

    $.ajax({
      url: 'https://api.parse.com/1/classes/MiningJob/'+miningJob.objectId,
      type:'PUT',
      headers: appConfig.parseHeaders,
      // status should be waiting
      data : JSON.stringify({'status':'Running', 'last_ran':Math.round(+new Date()/1000)+"" }),
      success: function(res) {
        console.log(res)
        // make request to heroku api
        $.ajax({
          //url: 'https://0.0.0.0:5000/mining_job' ,
          url: 'http://agile-plains-2430.herokuapp.com/mining_job' ,
          //type:'POST',
          crossDomain: true,
          data:{'locale':miningJob.locale, 
                'current_title':miningJob.prospect_title,
                'current_user_id':JSON.parse(localStorage.currentUser).objectId,
                'company_id':JSON.parse(localStorage.currentUser).company.objectId,
                'mining_job_id':miningJob.objectId},
          success: function(res) {
            console.log(res)
          },
          error: function(err) {
            console.log(err)
          }
        })
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });

    this.setState({miningJob: miningJob})
  },

  deleteJob: function() {
    //console.log(this.state.miningJob)
    this.props.deleteJob(this.state.miningJob)
      /*
    $.ajax({
      url: 'https://api.parse.com/1/classes/MiningJob/'+this.state.miningJob.objectId,
      type:'DELETE',
      headers: appConfig.parseHeaders,
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });
      */
  },

  cancelJob: function() {
    miningJob = this.state.miningJob
    miningJob.status = ""

    $.ajax({
      url: 'https://api.parse.com/1/classes/MiningJob/'+miningJob.objectId,
      type:'PUT',
      headers: appConfig.parseHeaders,
      data : JSON.stringify({'status':''}),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });
    this.setState({miningJob: miningJob})
  },

  render: function(){
    miningJob = this.props.miningJob
    button = (miningJob.status == "") ? React.DOM.a({href: "javascript:", className: "btn btn-xs btn-success", onClick: this.startJob}, " ", React.DOM.i({className: "fa fa-check"}), " Run ") : React.DOM.a({href: "javascript:", className: "btn btn-xs btn-danger", onClick: this.cancelJob}, " ", React.DOM.i({className: "fa fa-times"}), " Cancel ")

    disabled = ""
    disabled_trash = ""
    /*
    disabled = (miningJob.status == "") ? "btn btn-xs btn-success" : "btn btn-xs btn-success disabled"
    disabled_trash = (miningJob.status == "") ? "btn btn-xs btn-default" :  "btn btn-xs btn-default disabled"
    button = <a href="javascript:" className={disabled} onClick={this.startJob}> <i className="fa fa-check" />&nbsp;Run </a> 
    */

    //console.log(miningJob)
    return (
      React.DOM.tr(null, 
        React.DOM.td(null, React.DOM.h6(null, miningJob.prospect_title)), 
        React.DOM.td(null, React.DOM.h6(null, miningJob.locale)), 
        React.DOM.td(null, React.DOM.h6(null, (miningJob.last_ran == "" ) ? "----" : moment.unix(miningJob.last_ran).fromNow())), 
        React.DOM.td(null, 
          React.DOM.span({className: "badge"}, 
            (miningJob.results == "") ? 0 : miningJob.results
          ), " ",  
          React.DOM.h6({style: {display:'inline-block'}}, "profiles found")
        ), 
        React.DOM.td({style: {paddingTop:'12px'}}, 
          React.DOM.span({className: (miningJob.status == "" ) ? "label label-primary" : "label label-success"}, 
            (miningJob.status == "") ? "Ready" : miningJob.status
          )
        ), 
        React.DOM.td({style: {paddingTop:'13px',width:'105px'}}, 
          button, 
          " ", 
          React.DOM.a({href: "javascript:", className: disabled_trash, 
                  onClick: this.deleteJob}, 
            React.DOM.i({className: "fa fa-trash-o"})
          )
        )
      )
    );
  }
});


module.exports = React.createClass({displayName: 'exports',
  // Mining Jobs
  //{(prospects.length == 0 && this.state.loading == false) ? <EmptyCompanyProspectsPanel /> : ""}
  getInitialState: function() {
    return { 
      miningJobs : [],
      loading    : true
    }
  },

  deleteJob: function(job) {
    //console.log(job.objectId)
    var filtered = _.filter(this.state.miningJobs, function(item) {
       console.log(item.objectId != job.objectId)
       return item.objectId != job.objectId
    });
    //console.log(filtered)
    this.setState({miningJobs: filtered})
  },

  render: function () {
    //console.log('render')
    miningJobs = []
    for(i=0;i<this.state.miningJobs.length;i++){
      miningJob = this.state.miningJobs[i]
      miningJobs.push(
        Job({deleteJob: this.deleteJob, miningJob: miningJob})
      )
    }

    return (
      React.DOM.div(null, 
      React.DOM.div({className: "mining-job-toolbar container", style: {width:'100%'}}, 
        React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", 'data-toggle': "modal", 'data-target': ".bs-example-modal-sm"}, 
          React.DOM.i({className: "fa fa-plus"}), "   Find Prospects By Title and Area"
        ), 
        "   ", 
        React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs disabled", 'data-toggle': "modal", 'data-target': ".bs-example-modal-sm"}, 
          React.DOM.i({className: "fa fa-plus"}), "   Find Companies Hiring For Roles"
        ), 
        "   ", 
        React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs disabled", 'data-toggle': "modal", 'data-target': ".bs-example-modal-sm"}, 
          React.DOM.i({className: "fa fa-plus"}), "   Find Companies Who Just Raised Funding"
        ), 
        "   ", 
        React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs disabled", 'data-toggle': "modal", 'data-target': ".bs-example-modal-sm"}, 
          React.DOM.i({className: "fa fa-plus"}), "   Find Companies By Industy And Area"
        ), 
        "   ", 
        React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs disabled", 'data-toggle': "modal", 'data-target': ".bs-example-modal-sm"}, 
          React.DOM.i({className: "fa fa-plus"}), "   Press Coverage"
        )
    ), 
      React.DOM.div({id: "autoscroll", style: {height:'400px',overflow:'auto'}}, 
        React.DOM.table({className: "table table-striped"}, 
          React.DOM.thead(null, 
            React.DOM.th(null, "Job Title"), 
            React.DOM.th(null, "City"), 
            React.DOM.th(null, "Last Ran"), 
            React.DOM.th(null, "Results"), 
            React.DOM.th(null, "Status"), 
            React.DOM.th(null, " ")
          ), 
          React.DOM.tbody(null, 
            miningJobs
          )
        ), 
          (this.state.loading) ? LoadingSpinner(null) : "", 
        createJobModal({createJob: this.createJob})
      )
      )
    );
  },
  
  runMiningJob: function() {

  },

  createJob: function(data) {
    miningJobs = this.state.miningJobs
    miningJobs.push(data)
    this.setState({ miningJobs: miningJobs })

    $('#miningJobModal').modal('hide')
    $('body').removeClass('modal-open');
    $('.modal-backdrop').remove();
  },

  componentDidMount: function() {
    console.log('this did mount')
    thiss = this;
    qry = 'where={"company":'+company+'}&count=1&order=-createdAt'
    $.ajax({
      url:'https://api.parse.com/1/classes/MiningJob',
      type:'GET',
      headers: appConfig.parseHeaders,
      data: qry,
      success: function(res) {
        thiss.setState({miningJobs : res.results})
        thiss.setState({loading    : false})
        console.log(res)
      },
      error: function(err) {
        console.log(err)
      }
    });
  }

});

var createJobModal = React.createClass({displayName: 'createJobModal',
  createMiningJob: function() {
    console.log('mining job')
    console.log($('#prospectTitle').val())
    console.log($('#locale').val())

    data =  {
      'prospect_title': $('#prospectTitle').val(),
      'locale'        : $('#locale').val(),
      'last_ran'      : '',
      'results'       : '',
      'status'        : '',   //Waiting , Running
    }
    //  update local jobs state
    $.ajax({
      url:'https://api.parse.com/1/classes/MiningJob',
      type:'POST',
      headers: appConfig.parseHeaders,
      data: JSON.stringify(data),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });

    this.props.createJob(data)
    
    //$('button.close').click()
  },

  render: function() {
    return (
          React.DOM.div({className: "modal fade bs-example-modal-sm", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "miningJobModal", style: {top:'200px'}}, 
            React.DOM.div({className: "modal-dialog modal-sm"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-bolt"}), "  Create Mining Job")
                ), 
                React.DOM.div({className: "modal-body"}, 
                  React.DOM.form({onSubmit: this.createMiningJob}, 
                    React.DOM.input({id: "prospectTitle", type: "text", placeholder: "Enter prospect title...", className: "form-control"}), 
                    React.DOM.br(null), 
                    React.DOM.input({id: "locale", type: "text", placeholder: "Enter City Area...", className: "form-control"}), 
                    React.DOM.br(null), 
                    React.DOM.a({href: "javascript:", onClick: this.createMiningJob, placeholder: "Enter City Area...", className: "btn btn-success", style: {display:'block', width:'100%'}}, "Start Mining!")
                  )

                )
              )
            )
          )
    );
  }
});

var EmptyMiningJob = React.createClass({displayName: 'EmptyMiningJob',
  render: function() {
    return (
      React.DOM.div({className: "col-md-offset-3 col-md-6", style: {height:400}}, 
      React.DOM.div({className: "panel panel-default", style: {marginTop:100,height:200}}, 
        React.DOM.div({className: "panel-body"}, 
          React.DOM.h1({className: "lead", style: {textAlign:'center'}}, "Start Prospecting On Linkedin"), 
          React.DOM.a({href: "javascript:", onClick: this.openLinkedinWindow, className: "btn btn-success", style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%) !important',display:'block',marginRight:'auto',marginLeft:'auto',width:200, marginTop:50}}, 
            React.DOM.i({className: "fa fa-search"}), "  " + ' ' +
            "Search for companies!")
        )
      )
    )
    );
  }
});

},{"./loading_spinner.js.min.js":27}],31:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // MiningJobCalendar
  getInitialState: function() {
    return {
      reports : []
    }
  },

  getSignalReport: function() {
    thissss = this;
    profile = JSON.stringify({profile: appConfig.pointer('ProspectProfile',
                                          this.props.currentProfile.objectId)})
    $.ajax({
      url: 'https://api.parse.com/1/classes/SignalReport?order=-createdAt',
      type:'GET',
      data: {where: profile},
      headers:appConfig.parseHeaders,
      success: function(res) {
        thissss.setState({reports: res.results})
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  getResults: function() {
    thissss = this;
    profile = JSON.stringify({profile: appConfig.pointer('ProspectProfile',
                                          this.props.currentProfile.objectId)})
    console.log(this.props)
    theProfile = this.props.currentProfile
    $.ajax({
      url: 'https://api.parse.com/1/classes/PeopleSignal',
      type:'GET',
      data: {where: profile, order: '-createdAt',count:true},
      headers:appConfig.parseHeaders,
      success: function(res) {
        // divide results into groups of 100
        // schedule them for 1 intervals
        number_of_reports = Math.ceil(res.count/100)
        reports = []
        for(i=0;i< number_of_reports;i++){
          count = (i == number_of_reports-1) ? res.count % 100 : 100
          console.log(theProfile.done)
          reports.push({
          scheduledAt: moment.unix(theProfile.done).add(i,'day').fromNow(),
          people_count: count,
          })
        }
        thissss.setState({reports: reports})
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  componentDidMount: function() {
    this.getResults()
  },

  componentWillRecieveProps: function() {
    //this.getResults()
  },

  setCurrentReport: function(newReport) {
    console.log('CURRENT REPORT')
    console.log(newReport)
    this.props.setCurrentReport(newReport)
  },

  render: function() {
    reports = []
    for(i=0;i< this.state.reports.length; i++)
      reports.push(SignalReportRow({setCurrentReport: this.setCurrentReport, 
                                    setCurrentView: this.setCurrentView, 
                                    report: this.state.reports[i]}))

    return (
      React.DOM.div({className: "container", style: {height:400, overflow:'auto',paddingLeft:0,
                                         paddingRight:0,width:'100%'}}, 
        React.DOM.div({style: {height:44,borderBottom:'solid 1px rgb(221, 221, 221)'}}, 
          React.DOM.h4({onClick: this.returnToCalendarView, 
              style: {float:'left',cursor:'pointer',marginTop:7,fontWeight:200,
                paddingLeft:20,paddingTop:5, display:'inline-block'}}, 
                React.DOM.i({className: "fa fa-calendar", style: {marginRight:5}}), 
                this.props.currentProfile.name
          )
        ), 
        React.DOM.div({className: "col-md-12", style: {paddingLeft:0,paddingRight:0,
                                           overflow:'auto',height:356}}, 
          React.DOM.div({style: {overflow:'auto'}}, 
            React.DOM.table({className: "table table-striped", style: {marginBottom:0}}, 
              React.DOM.thead(null, 
                React.DOM.th(null), 
                React.DOM.th(null), 
                React.DOM.th({style: {textAlign:'center'}}, 
                    React.DOM.i({className: "fa fa-clock-o"}), " " + ' ' +
                    "Scheduled"
                ), 
                React.DOM.th({style: {textAlign:'center'}}, "Prospects"), 
                React.DOM.th({style: {width:150,textAlign:'center'}})
              ), 
              React.DOM.tbody({className: "reports"}, 
                reports
              )
            )
          )
        )
      )
    );
  }
});

var SignalReportRow = React.createClass({displayName: 'SignalReportRow',
  rowClick: function() {
    this.props.setCurrentReport(this.props.report)
  },

  prospectAllSignalReportProspects: function(e) {
    /*
    e.stopPropagation()
    // Update UI
    console.log(this.props.report.objectId)
    thiss = this
    $.ajax({
      //url:'http://nameless-retreat-3525.herokuapp.com/prospect_signal_report',
      url:'http://127.0.0.1:5000/prospect_signal_report',
      data: {signal_report_id: thiss.props.report.objectId },
      success: function(res) { console.log(res) },
      error: function(err) { console.log(err) }
    })
    */
  },

  render: function() {
    return (
      React.DOM.tr({onClick: this.rowClick, style: {cursor:'pointer'}}, 
        React.DOM.td(null), 
        React.DOM.td({style: {textAlign:'right',paddingTop:15}}, 
          React.DOM.i({className: "fa fa-cloud-download", style: {color:'#555'}})
        ), 
        React.DOM.td({style: {textAlign:'center'}}, 
          React.DOM.h6(null, 
            this.props.report.scheduledAt
          )
        ), 
        React.DOM.td({style: {textAlign:'center'}}, 
          React.DOM.span({className: "label label-success"}, 
            this.props.report.people_count
          ), 
          React.DOM.h6({style: {display:'inline-block'}}, 
            "  People found."
          )
        ), 
        React.DOM.td(null, 
          React.DOM.a({href: "javascript:", 
            onClick: this.prospectAllSignalReportProspects, 
             style: {fontWeight:'bold',marginTop:5}, 
             className: "btn btn-xs btn-success"}, 
            "Prospect All"
          )
        )
      )
    )
  }
});

},{}],32:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // SignalLoading
  getInitialState: function() {
    return {
      count: '~',
      prospectName : '~',
      prospectTitle : '~',
      companyName : '~',
    }
  },

  initialize: function() {
    var thiss = this;
    var pusher = new Pusher('1a68a96c8fde938fa75a');
    objectId = this.props.currentProfile.objectId
    var channel = pusher.subscribe(objectId);
    channel.bind("my-event", function(data) {
      console.log(data)
      thiss.setState({
        count: data.count,
        prospectName: data.name,
        prospectTitle: data.title,
        companyName: data.company
      })
    });

    // Get Signal Report Count
    // Get Last PeopleSignal Found
    qry = { profile: appConfig.pointer('ProspectProfile',objectId) }
    $.ajax({
      url:'https://api.parse.com/1/classes/SignalReport',
      headers:appConfig.headers,
      data: {'where':JSON.stringify(qry),order:'-createdAt'},
      success: function(res) {
        //console.log(res)
        count = (res.results[0]) ? res.results[0].people_count : 0
        
        thiss.setState({count: count })
      },
    });
    $.ajax({
      url:'https://api.parse.com/1/classes/PeopleSignal',
      headers:appConfig.headers,
      data: {'where':JSON.stringify(qry),order:'-createdAt'},
      success: function(res) {
        //console.log(res)
        thiss.setState({
          prospectName: (res.results[0]) ? res.results[0].link_text : "",
          prospectTitle: (res.results[0]) ? res.results[0].title : "",
          companyName: (res.results[0]) ? res.results[0].company : ""
        })
      },
    });
  },

  componentDidMount: function() {
    Pusher.log = function(message) {
      if (window.console && window.console.log) {
        //window.console.log(message);
      }
    };

    this.initialize()
  },

  componentDidUpdate: function() {
  },

  componentWillReceiveProps: function() {
    this.setState({
      count: '~',
      prospectName : '~',
      prospectTitle : '~',
      companyName : '~',
    })
    this.initialize()
  },

  render: function() {
    // Show companies for hiring signals
    return (
      React.DOM.div({style: {background:'linear-gradient(#dae8ff,#dae8ff)', backgroundImage: 'radial-gradient(circle at center center,#fff,#dff1fd 900px)',height:'100%',paddingTop:10}}, 
        React.DOM.div({className: "signal-card", style: {
            width:500,textAlign:'center',display:'block',marginRight:'auto',
            marginLeft:'auto',marginTop:0,height:200
          }}, 

        React.DOM.div({className: "loading-two-balls", style: {height:20,width:20}}, 
          React.DOM.div({className: "dot1", style: {color:'red'}}), 
          React.DOM.div({className: "dot2", style: {color:'red'}})
        ), 
        React.DOM.div({id: "", style: {color:'#1ca3fd', fontWeight:'bold',marginTop:-10,
                          marginLeft:-200, fontSize:32, fontFamily:'Proxima-Nova'}}, 
            this.state.count + " people found."
          ), 
          React.DOM.div({style: {float:'right',marginTop:-48,marginRight:55}}, 
            React.DOM.h6({style: {marginBottom:3, fontWeight:'bold'}}, this.state.prospectName, " -  ", 
              React.DOM.span({style: {fontWeight:500, fontStyle:'italic'}}, 
                this.state.prospectTitle)), 
            React.DOM.h6({style: {marginTop:0,textAlign:'left'}}, 
              this.state.companyName
            )
          )
        )
      )
    )
  },
});

},{}],33:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Panel Footing
  paginatePrevious: function() {
    thiss = this;

    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospects?skip='+(thiss.props.currentPage-2)*thiss.props.prospectsPerPage,
      type:'GET',
      headers: parse_headers,
      data: 'where={"company":'+company+',"archived":true}&count=1',
      success: function(res){
        //thiss.setState({prospects: res.results})
        //thiss.setState({currentPage: this.props.currentPage - 1})
        thiss.props.paginate(res.results, thiss.props.currentPage - 1)
      },
      error: function(res){
        console.log(res)
      }
    });
  },


  paginate: function(direction) {
    prospectsPerPage = this.props.prospectsPerPage
    if(direction=='previous')
      skip = (this.props.currentPage - 2)*prospectsPerPage
    else if(direction=="forward")
      skip = this.props.currentPage*prospectsPerPage

    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospect?skip='+skip,
      type:'GET',
      headers: parse_headers,
      data: 'where={"company":'+company+'}&count=1',
      success: function(res){
        //thiss.setState({prospects: res.results})
        //thiss.setState({currentPage: this.props.currentPage + 1})
        this.props.paginate(res.results, this.props.currentPage + 1)
      },
      error: function(res){
        console.log(res)
      }
    });
  },

  paginateForward: function() {
    thiss = this;
    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospects?skip='+thiss.props.currentPage*thiss.props.prospectsPerPage,
      type:'GET',
      headers: parse_headers,
      data: 'where={"company":'+company+',"archived":true}&count=1',
      success: function(res){
        //thiss.setState({prospects: res.results})
        //thiss.setState({currentPage: thiss.props.currentPage + 1})
        console.log("success")
        thiss.props.paginate(res.results, thiss.props.currentPage + 1)
      },
      error: function(res){
        console.log(res)
      }
    });
  },
  componentDidMount: function() {
    paginateForward = this.paginateForward
    paginatePrevious = this.paginatePrevious

    Mousetrap.bind('l', function() { 
      console.log('new forward')
      paginateForward()
    });

    Mousetrap.bind('h', function() { 
      console.log('new back')
      paginatePrevious()
    });
  },

  render: function() {
    // Should be handled by Panle Footing


    previous = (this.props.currentPage - 1) ? '' : 'disabled'
    forward = (this.props.currentPage == this.props.pages) ? 'disabled' : ''

    lowerLimit = (this.props.currentPage-1)*this.props.prospectsPerPage
    upperLimit = this.props.currentPage*this.props.prospectsPerPage

    lowerLimit = (lowerLimit) ? lowerLimit : 1
    upperLimit = (upperLimit > this.props.count) ? this.props.count : upperLimit

    return (
      React.DOM.div({className: "panel-footing", 
           id: "navbar", 
           style: {height:'35px',padding:'0px', paddingTop:'7px'}}, 
          React.DOM.span({style: {float:'right',marginRight:'20px'}}, 
            React.DOM.a({href: "javascript:", 
               style: {marginRight:'5px'}, 
               onClick: this.paginatePrevious, 
               className: "blue-gradient btn btn-primary btn-xs "+previous}, 
            React.DOM.i({className: "fa fa-fast-backward"})
          ), 
          React.DOM.a({href: "javascript:", 
             onClick: this.paginatePrevious, 
             className: "paginate-back-btn blue-gradient btn btn-primary btn-xs "+previous}, 
            React.DOM.i({className: "fa fa-chevron-left"})
          ), 
          React.DOM.span({style: {marginLeft:5, marginRight:5,display:'inline-block',width:115, textAlign:'center'}}, 
            lowerLimit+' - '+upperLimit+' of '+this.props.count
          ), 
          React.DOM.a({href: "javascript:", 
             onClick: this.paginateForward, 
             className: "paginate-forward-btn blue-gradient btn btn-primary btn-xs "+forward}, 
            React.DOM.i({className: "fa fa-chevron-right"})
          ), 
          React.DOM.a({href: "javascript:", 
             style: {marginLeft:'5px'}, 
             onClick: this.paginateForward, 
             className: "blue-gradient btn btn-primary btn-xs "+forward}, 
            React.DOM.i({className: "fa fa-fast-forward"}))
          )
        )
    );
  }
});

},{}],34:[function(require,module,exports){
/** @jsx React.DOM */


module.exports = React.createClass({displayName: 'exports',
  // SignalCard
  prospectPerson: function() {
    // Add To Signal List
    // Add Company
    // Add Prospect
    person = this.props.person
    personId = person.objectId
    company = this.props.person.company
    companyId = company.objectId
    person.signalId = person.signalId
    company.signalId = company.objectId
    p = person; c = company;
    delete p.objectId; delete c.objectId;
    delete p.className; delete c.className;
    delete p.__type; delete c.__type;
    delete p.createdAt; delete c.createdAt;
    delete p.updatedAt; delete c.updatedAt;
    p.companySignal = p.company
    delete p.company

    p.linkedin_url = p.url
    p.company = JSON.parse(localStorage.currentUser).company
    p.archived = true
    p.loading = true
    p.city = p.title.split('-')[0]
    p.pos = p.title.split('-').slice(-1)[0].split(' at ')[0]
    p.company_name = p.title.split('-').slice(-1)[0].split(' at ').slice(-1)[0] 
    name = p.link_text.split('|')[0]
    name = name.split('-')[0]
    p.name = name
    p.websiteUrl = company.websiteUrl
    // Automatically Add To The Signal List It Belongs To
    
    console.log(this.props.profile)
    p.lists = [{'__type':'Pointer','className':'ProspectList','objectId':this.props.profile.prospect_list.objectId}] 

    $.ajax({
      url:'https://api.parse.com/1/classes/Prospects',
      type:'POST',
      headers:appConfig.headers,
      data:JSON.stringify(p),
      success: function(res) {
        console.log(res)
         $.ajax({
          url:'https://api.parse.com/1/classes/PeopleSignal/'+personId,
          type:'PUT',
          headers:appConfig.headers,
          data: JSON.stringify({prospectId: res.objectId, prospected_on: Date.now()/1000}),
          success:function(res) { console.log(res) },
          error: function() { }
         })
      },
      error: function(err) { }
    })

    //Create Company Prospect with Pointer to CompanySignal
    $.ajax({
      url:'https://api.parse.com/1/classes/CompanyProspects',
      type:'POST',
      headers:appConfig.headers,
      data:JSON.stringify(c),
      success: function(res) {
        //Update Company Signal With Pointer to Company Prospect and date prospected
        console.log(res)
         $.ajax({
           url:'https://api.parse.com/1/classes/CompanySignal/'+companyId,
          type:'PUT',
          headers:appConfig.headers,
          data: JSON.stringify({prospectId: res.objectId, prospected_on: Date.now()/1000}),
          success:function(res) { console.log(res) },
          error: function(err) { }
         })
      },
      error: function(err) { }
    })
  },

  render: function() {
    person = this.props.person
    signal = (person.signals) ? person.signals[0] : {}
    
    return (
      React.DOM.div({className: "panel panel-default signal-card"}, 
        React.DOM.div({className: "panel-body", style: {paddingLeft:25, paddingRight:25}}, 
          React.DOM.h4(null, 
            person.title
          ), 
          React.DOM.h6({style: {display:'inline-block',width:'100%'}}, 
            React.DOM.span({style: { float:'left',maxWidth: '60%', whiteSpace: 'nowrap',
                overflow: 'hidden', textOverflow: 'ellipsis'}}, 
              person.link_text)
          ), 
        React.DOM.div({id: "signal-stuff", 
            style: (_.isEqual(signal, {})) ? {display:'none'} : {display:'block'}}, 
          React.DOM.h6(null, " ", React.DOM.i({className: "fa fa-building"}), 
            "  ", signal.company), 
          React.DOM.h6(null, " ", React.DOM.i({className: "fa fa-map-marker"}), 
            "  ", signal.location), 
          React.DOM.h6(null, " ", React.DOM.i({className: "fa fa-suitcase"}), 
            " ", signal.job_title, " ")
        ), 

          React.DOM.a({href: "javascript:", className: "btn btn-success", 
            onClick: this.prospectPerson, 
            style: {float:'right',marginTop:15, fontWeight:'bold',width:'100%'}}, 
            "Prospect This Person")
        )
      )
    );
  }
});

},{}],35:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  render: function() {
    $('body').css({overflow:'hidden'})
    return (
      React.DOM.div(null, 
        React.DOM.div({className: "background-image"}), 
        React.DOM.nav({className: "thenavbar navbar navbar-default navbar-fixed-top", role: "navigation"}, 
          React.DOM.div({className: "container-fluid"}, 
            React.DOM.a({className: "the-title tk-foco brand navbar-brand", style: {fontWeight:'100'}, 
                href: "#"}, 
              "Customero", 
              React.DOM.span({style: {fontSize:'22px',marginLeft:'30px'}}, "Supercharge your sales! ")
            )
          )
        ), 
          PricingTables(null), 
        React.DOM.div({className: "gradient"}, " ")
      )
    )
    /*
              <a href="#signup" className="btn btn-success btn-lg" style={{display:'block',backgroundColor:'#1ca3fd',float:'right',marginTop:'13px' }}>Log In</a>
    */
  }
});

var PricingTables = React.createClass({displayName: 'PricingTables',
  render: function() {
    return (
      React.DOM.div(null, 
    React.DOM.div({className: "container", style: {marginTop:150}}, 
        React.DOM.div({className: "row flat"}, 
            React.DOM.div({className: "col-lg-3 col-md-3 col-xs-6"}, 
                React.DOM.ul({className: "signal-card plan plan2"}, 
                    React.DOM.li({className: "plan-name"}, " Startup "), 
                    React.DOM.li({className: "plan-price"}, 
                      React.DOM.h1({style: {fontWeight:'bold',color:'#0294f5'}}, "$499 ", React.DOM.small(null, "/ month"))
                    ), 

                  React.DOM.li(null, " ", React.DOM.strong(null, "Up to 1000 Email Credits"), " "), 
                  React.DOM.li(null, " ", React.DOM.strong(null, "Up to 10 Team Members")), 
                  React.DOM.li({style: {padding:0}}, " ", React.DOM.strong(null), " Includes: "), 
                  React.DOM.li(null, " ", React.DOM.strong(null, 'Emails & Phone Numbers')), 
                  React.DOM.li(null, " ", React.DOM.strong(null, "Quick Start Package")), 
                  React.DOM.li(null, " ", React.DOM.strong(null, "Signals")), 
                  React.DOM.li({className: "", style: {paddingBottom:0}}, 
                    React.DOM.a({href: "#", className: "btn btn-primary btn-md cool-btn"}, "Sign Up")
                  )
             )
         ), 

         React.DOM.div({className: "col-lg-3 col-md-3 col-xs-6"}, 
            React.DOM.ul({className: "signal-card plan plan3 featured"}, 
                React.DOM.li({className: "plan-name"}, " Growth "), 
                React.DOM.li({className: "plan-price"}, 
                  React.DOM.h1({style: {fontWeight:'bold',color:'#0294f5'}}, "$1299 ", React.DOM.small(null, "/ month"))
                ), 

            React.DOM.li(null, " ", React.DOM.strong(null, "Up to 2500 Email Credits"), " "), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Up to 25 Team Members")), 
            React.DOM.li({style: {padding:0}}, " ", React.DOM.strong(null), " Includes: "), 
            React.DOM.li(null, " ", React.DOM.strong(null, "All Startup Features ")), 
            React.DOM.li({style: {padding:0}}, " ", React.DOM.i({className: "fa fa-plus"})), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Bulk Salesforce Integration")), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Mining Jobs")), 
            React.DOM.li({className: "", style: {paddingBottom:0}}, 
              React.DOM.a({href: "#", className: "btn btn-primary btn-md cool-btn"}, "Sign Up")
            )
         )
     ), 

     React.DOM.div({className: "col-lg-3 col-md-3 col-xs-6"}, 
        React.DOM.ul({className: "signal-card plan plan4"}, 
            React.DOM.li({className: "plan-name"}, " Premium "), 
            React.DOM.li({className: "plan-price"}, 
              React.DOM.h1({style: {fontWeight:'bold',color:'#0294f5'}}, "$2999 ", React.DOM.small(null, "/ month"))
            ), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Up to 7500 Email Credits"), " "), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Up to 50 Team Members")), 
            React.DOM.li({style: {padding:0}}, " ", React.DOM.strong(null), " Includes: "), 
            React.DOM.li(null, " ", React.DOM.strong(null, "All Growth Features ")), 
            React.DOM.li({style: {padding:0}}, " ", React.DOM.i({className: "fa fa-plus"})), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Dedicated Happiness Officer")), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Improved territory planning")), 
            React.DOM.li({className: "", style: {paddingBottom:0}}, 
              React.DOM.a({href: "#", className: "btn btn-primary btn-md cool-btn"}, "Sign Up")
            )
         )
       ), 
            React.DOM.div({className: "col-lg-3 col-md-3 col-xs-6"}, 
                React.DOM.ul({className: "signal-card plan plan1"}, 
                    React.DOM.li({className: "plan-name"}, " Enterprise "), 
                    React.DOM.li({className: ""}, " "), 
                    React.DOM.li(null, " ", React.DOM.strong(null), " "), 
                    React.DOM.li(null, " ", React.DOM.strong(null), " "), 
                    React.DOM.li({style: {fontSize:22}}, " ", React.DOM.strong(null, "Contact Us"), " "), 
                    React.DOM.li(null, " ", React.DOM.strong(null), " "), 
                    React.DOM.li(null, " ", React.DOM.strong(null), "  ")
                )
            )

)

)
      )
    );
  },
});

},{}],36:[function(require,module,exports){
/** @jsx React.DOM */

//TODO - abstract lists
var SideMenuProspects = require('./side_menu_user_prospects.js.min.js');

var UserProspect = require('./user_prospect.js.min.js');
var UserProspectHeader = require('./user_prospect_header.js.min.js');
var SideMenuListOption = require('./user_side_menu_list.js.min.js');
var LoadingSpinner = require('./loading_spinner.js.min.js')
var PanelFooting = require('./panel_footing.js.min.js')
var Messenger = require('./messenger.js.min.js')

var DeleteListModal = require('./delete_list_modal.js.min.js')
var RenameListModal = require('./rename_list_modal.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {  prospects   : [],
              currentPage : 1,
              className: 'Prospect',
              listClassName: 'ProspectList',
              pages       : 1,
              currentList : 'All',
              currentListObjectId : '',
              loading: true,
              prospectsPerPage: 50,
              lists : [],
              masterCheckboxChecked: false,
              keyboardActiveProspect: 0, //first
              selectedProspects: [],
              totalCount  : "~", 
              count       : "~", }
  },

  createList: function(data) {
    lists = this.state.lists
    lists.push(data)
    this.setState({ lists: lists })
  },

  renameList: function(newListName) {
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      'Content-Type': 'application/json'
    }
    console.log(this.state.currentListObjectId)
    console.log(this.state.currentList)
    console.log(newListName)

    // Update Local State
    thiss = this;
    var filtered = _.filter(this.state.lists, function(item) {
      if(item.name == thiss.state.currentList){
        item.name = newListName
        return item
      }
      return item
    });

    this.setState({lists : filtered})
    this.setState({currentList: newListName})

    $('.modal').click()
    $('#newListName').val('')
    $('.modal-backdrop').click()

    // Persist / Ajax
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectList/'+this.state.currentListObjectId,
      headers: parseHeaders,
      type:'PUT',
      data:JSON.stringify({'name':newListName}),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  deleteList: function() {
    // TODO 
    // Get All Members Of This List
    // Remove From List Array
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      'Content-Type': 'application/json'
    }
    
    var filtered = _.filter(this.state.lists, function(item) {
      if(item.objectId == thiss.state.currentListObjectId)
        return false
      return true
    });

    this.setState({lists: filtered})
    this.setState({currentList: 'All'})
    this.changeList('All', '')

    // Remove
    $('.modal').click()
    $('#newListName').val('')
    $('.modal-backdrop').click()

    // Persist / Ajax
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectList/'+this.state.currentListObjectId,
      headers: parseHeaders,
      type:'DELETE',
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  changeList: function(newListName,objectId) {
    // add overlay loading
    //console.log(newListName)
    //console.log(objectId)

    localStorage.selectedProspects = JSON.stringify([])

    this.setState({currentList : newListName})
    this.setState({currentListObjectId : objectId})
    this.setState({prospects  : []    })
    this.setState({count      : '~'   })
    this.setState({pages      : 1     })
    this.setState({loading    : true  })
    this.setState({currentPage: 1})
    this.setState({keyboardActiveProspect: 0})

    company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
    qry = 'where={"company":'+company+',"archived":true}&count=1&order=-createdAt'
    console.log(newListName)

    if(this.state.currentList != 'All' || typeof(objectId) != "undefined" && newListName != 'Archived'){
      currentList = JSON.stringify({
        'objectId'  : objectId, 
        '__type'    : 'Pointer', 
        'className' : 'ProspectList' 
      })

      company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
      qry = 'where={"company":'+company+'}&count=1'
      qry = 'where={"lists":'+currentList+'}&count=1&order=-createdAt&include=email_guesses,email_guesses.pattern'
    } else if (newListName == 'Archived') {
      qry = 'where={"company":'+company+',"archived":false}&count=1&order=-createdAt&include=email_guesses,email_guesses.pattern'
    }
    console.log(qry)

    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospect',
      type:'GET',
      headers: parse_headers,
      async: true,
      data: qry,
      ajaxStart: function() {
        console.log('started list')
      },
      success: function(res){
        thisss.setState({prospects: res.results})
        thisss.setState({count: res.count})
        //thisss.setState({totalCount: res.count})
        thisss.setState({pages: Math.ceil(res.count/thisss.props.prospectsPerPage)})
        thisss.setState({loading: false})
      },
      error: function(res){
        //console.log('error')
        //console.log(res)
      }
    })
  },

  checkboxAction: function(checkedState, objId) {
    /* Storing Checked Prospects In LocalStorage To Make it Easier To
     * Copy and Move Prospects 
     *
     * Move To User_Prospects?
     */
    
    selectedProspects = JSON.parse(localStorage.selectedProspects)
    //console.log(checkedState)
    if(checkedState)
      selectedProspects.push(objId)
    else
      selectedProspects = _.reject(selectedProspects, 
                                   function(id){return id == objId})

    console.log(selectedProspects)
    localStorage.selectedProspects = JSON.stringify(selectedProspects)
    this.setState({selectedProspects: selectedProspects})
  },

  masterCheckboxChanged: function(masterCheckboxValue) {
    this.setState({masterCheckboxChecked: masterCheckboxValue})
  },

  render: function() {
    this.startKeyboardShortcuts()
    $('body').css({overflow:'auto'})

    prospects = []
    for(i=0;i<this.state.prospects.length;i++) {
      url = this.state.prospects[i].url
      prospect = this.state.prospects[i]

      if(url != "no linkedin website" && typeof(url) != "undefined" && url != ""){
        url = url.replace('http://','')
        the_link = React.DOM.a({href: 'http://'+url}, React.DOM.i({className: "fa fa-globe"}))
      } else {
        the_link = ""
      }

      profile = this.state.prospects[i].linkedin_url.replace('http://','')
      profile = this.state.prospects[i].linkedin_url.replace('https://','')
      li = React.DOM.a({href: 'http://'+profile, className: "linkedin_link"}, React.DOM.i({className: "fa fa-linkedin-square"}))

      keyboardSelected = (i == this.state.keyboardActiveProspect)

      selectedProspects = JSON.parse(localStorage.selectedProspects)
      alreadyChecked=false
      for(ii=0;ii< selectedProspects.length;ii++)
        if(prospect.objectId == selectedProspects[ii])
          alreadyChecked = true

        //console.log(alreadyChecked)

      prospects.push(
        UserProspect({deleteProspect: this.deleteProspect, 
                      prospect: this.state.prospects[i], 
                      masterCheckboxChecked: this.state.masterCheckboxChecked, 
                      key: this.generate_id(), 
                      link: the_link, 
                      keyboardSelected: keyboardSelected, 
                      checkboxAction: this.checkboxAction, 
                      alreadyChecked: alreadyChecked, 
                      li: li}))
    }

    listType = (this.state.currentList == "All") ? {display:'none'} : {float:'left'}
    listNameStyle = (this.state.currentList == "All") ? {display:'none'} : {float:'left',display:'inline-block', fontWeight: 200, marginTop: 1, paddingRight: 10, marginLeft: -10}
    listBtn = (this.state.currentList == "All") ? {display:'none'} : {float:'left',marginLeft:5}
    listOptions = (this.state.currentList == "All") ? {display:'none'} : {float:'right'}
    copyDropdownStyle = (this.state.currentList == "All") ? {width:114, right:4} : {width:114, right:36}
    currentList = this.state.currentList
    return (
        React.DOM.div(null, 
      React.DOM.div({className: "container", style: {width:'100%',padding:'0', background: 'linear-gradient(#dae8ff,#dae8ff)', backgroundImage: 'radial-gradient(circle at center center,#fff,#dff1fd 900px)'}}, 
        SideMenuProspects({currentList: this.state.currentList, 
                           count: this.state.count, 
                           totalCount: this.state.totalCount, 
                           changeList: this.changeList, 
                           createList: this.createList, 
                           lists: this.state.lists}), 

        React.DOM.div({className: "col-ld-10 col-md-10 col-sm-10 col-xs-10", style: {padding:'0'}}, 
              React.DOM.div({id: "prospectDetailButtons"}, 
                ListDetailButtons({
                  renameList: this.renameList, 
                  deleteList: this.deleteList, 
                  currentListName: this.state.currentList, 
                  currentList: this.state.currentListObjectId}), 

                React.DOM.div({className: "dropdown", style: {display:'none'}}, 
                  React.DOM.a({href: "javascript:", 
                     className: "btn btn-primary btn-xs list-options", 
                     id: "", 
                     style: listOptions}, 
                    React.DOM.i({className: "fa fa-bars"})
                  )
                ), 

                React.DOM.div({className: "dropdown"}, 
                  React.DOM.a({'data-toggle': "dropdown", 
                     id: "copyToList", 
                     href: "javascript:", 
                     className: "drop-target btn btn-primary btn-xs list-options"}, 
                     React.DOM.i({className: "fa fa-copy"}), 
                       "  Copy To List  ",  
                     React.DOM.i({className: "fa fa-caret-down"})
                ), 
                CurrentListsTwo({lists: this.state.lists, 
                                 copyDropdownStyle: copyDropdownStyle, 
                                 listAction: this.copySelectedProspects})
                ), 
  
                React.DOM.div({className: "dropdown"}, 
                  React.DOM.a({'data-toggle': "dropdown", 
                     href: "javascript:", 
                     id: "moveToList", 
                     style: listOptions, 
                     className: "btn btn-primary btn-xs list-options"}, 
                     React.DOM.i({className: "fa fa-share"}), 
                     "  Move To List  ",  
                     React.DOM.i({className: "fa fa-caret-down"})
                ), 
                CurrentLists({lists: this.state.lists, 
                              listAction: this.moveSelectedProspects})
                ), 

                React.DOM.a({onClick: this.downloadFile, 
                   href: "javascript:", 
                   id: "downloadProspects", 
                   className: "drop-target btn btn-primary btn-xs list-options"}, 
                  React.DOM.i({className: "fa fa-download"}), "   Download CSV  " 
                ), 
                React.DOM.a({onClick: this.downloadFile, 
                     style: listOptions, 
                   href: "javascript:", 
                   id: "downloadProspects", 
                   className: "drop-target btn btn-primary btn-xs list-options"}, 
                  React.DOM.i({className: "fa fa-building"}), "   Generate Company List  " 
                )
              ), 
        

          React.DOM.div({id: "autoscroll", style: {height:'400px',overflow:'auto'}}, 
            React.DOM.table({className: "prospects-table table table-striped", style: {marginBottom:'0px'}}, 
              React.DOM.thead({style: {backgroundColor:'white'}}, 
                UserProspectHeader({masterCheckboxChanged: this.masterCheckboxChanged})
              ), 
              React.DOM.tbody(null, 
                prospects
              )
            ), 
            (this.state.loading) ? LoadingSpinner(null) : ""
          )
        )
      ), 

      PanelFooting({currentPage: this.state.currentPage, 
                    count: this.state.count, 
                    paginate: this.paginate, 
                    prospectsPerPage: this.state.prospectsPerPage, 
                    pages: this.state.pages}), 
      Messenger(null)
    )
    );
  },

  paginate: function(newProspects, newPage) {
    this.setState({
      prospects: newProspects,
      currentPage: newPage,
      keyboardActiveProspect: 0
    })
    this.startKeyboardShortcuts()
    document.getElementById('autoscroll').scrollTop = 0
  },

  downloadFile: function() {
    parse_headers = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
    }

    // Get List Count
    list = JSON.stringify({
      '__type'   :  'Pointer',
      'className':  'ProspectList',
      'objectId' :  this.state.currentListObjectId
    })
    console.log(list)
    // Add Support For More than 1000
    // num_of_requests
    localStorage.download_total = Math.ceil(this.state.count/1000)
    localStorage.downloads      = 0

    if(this.state.currentList == "All")
      qry = 'where={"company":'+company+'}&count=1'
    else
      qry = 'where={"lists":'+list+'}&count=1'

    for(i=0;i< Math.ceil(this.state.count/1000); i++){
      $.ajax({
        url: 'https://api.parse.com/1/classes/Prospect?limit=1000&skip='+i,
        type:'GET',
        headers: parse_headers,
        downloadFile: 'download_'+i,
        data: qry,
        success: function(res){
          // Clean Results
          // Remove Certain Parse Columns - created_at, updated_at, objectId
          // Rename createdAt as date prospected
          for(i=0;i< res.results.length;i++) {
            delete res.results[i].company
            delete res.results[i].pos
            delete res.results[i].user
            delete res.results[i].objectId
            delete res.results[i].createdAt
            delete res.results[i].updatedAt
          }

          // Add Results To LocalStorage
          localStorage.downloads = JSON.parse(localStorage.downloads) + 1 
          localStorage.setItem(this.downloadFile, JSON.stringify(res.results))

          // Check to see if all ajax reqs in for loop are complete
          if(localStorage.downloads == localStorage.download_total) {
            console.log('matched')
            // Merge all localStorage results
            prospects = []
            for(ii=0;ii < JSON.parse(localStorage.download_total); ii++){
              prospects = prospects.concat(JSON.parse(localStorage.getItem('download_'+ii)))
              console.log(prospects)
            }

            console.log(prospects)
            // Output as CSV
            var blob = new Blob([Papa.unparse(prospects)], {type: "text/plain;charset=utf-8"});
            console.log(blob)
            saveAs(blob, "prospects.csv");
          }
      },

      error: function(res){
        console.log(res)
      }
      });
    }
    
    company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
    

  },

  removeSelectedProspects: function() {
    // If List Type is All Archive the prospect
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      "Content-Type" : "application/json"
    }

    selectedProspects = JSON.parse(localStorage.selectedProspects)
    batchData = []

    for(i=0;i< selectedProspects.length;i++){
      if(this.state.currentList != 'All'){
        tmp = {
          method:'PUT',
          path:'/1/classes/Prospect/'+selectedProspects[i],
          body: {
            lists: {
              '__op'    : 'Remove',
              "objects" : [{ 
                  '__type':'Pointer',
                  'className':'ProspectList',
                  'objectId':this.state.currentListObjectId
              }]
            }
          }
        }
      }else{
        tmp = {
          method:'PUT',
          path:'/1/classes/Prospect/'+selectedProspects[i],
          body: {
            archived:false,
          }
        }
      }
      batchData.push(tmp)
    }

    thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/batch',
      type:'POST',
      headers:parseHeaders,
      data: JSON.stringify({requests: batchData}),
      success:function(res) {
        console.log(res)
        lists = thiss.state.lists

        for(i=0;i< lists.length; i++) { 
          // Subtract From Old List - Not Working For Archive
          if(lists[i].objectId == thiss.state.currentListObjectId)
            lists[i].count = parseInt(lists[i].count) - parseInt(selectedProspects.length)
        }
        // Update local list count
        thiss.setState({lists: lists})

        // remove from current list ui
        selectedProspects = JSON.parse(localStorage.selectedProspects)
        console.log('remove selected prospects')
        console.log(selectedProspects)
        console.log(thiss.state.prospects)
        var filtered = _.filter(thiss.state.prospects, function(item) {
          for(i=0;i< selectedProspects.length;i++) 
            if(item.objectId == selectedProspects[i])
              return false
          return true
        });
        console.log(filtered)
        thiss.setState({prospects: filtered})
        localStorage.selectedProspects = JSON.stringify([])

        // add alert to inform user
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  moveSelectedProspects: function(listObjectId) {
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      "Content-Type" : "application/json"
    }

    // get the selected objectId from selectedProspects state
    selectedProspects = JSON.parse(localStorage.selectedProspects)
    batchData = []


    // Batch Update Parse
    // - Remove All Selected Prospects From Current List
    for(i=0;i< selectedProspects.length;i++){
      tmp = {
        method:'PUT',
        path:'/1/classes/Prospect/'+selectedProspects[i],
        body: {
          lists: {
            '__op'    : 'Remove',
            "objects" : [{ 
                '__type':'Pointer',
                'className':'ProspectList',
                'objectId':this.state.currentListObjectId
            }]
          }
        }
      }
      batchData.push(tmp)
    }
    
    // - Add Other List 
    for(i=0;i< selectedProspects.length;i++){
      tmp = {
        method:'PUT',
        path:'/1/classes/Prospect/'+selectedProspects[i],
        body: {
          lists: {
            '__op'    : 'AddUnique',
            "objects" : [{ 
                '__type':'Pointer',
                'className':'ProspectList',
                'objectId':listObjectId
            }]
          }
        }
      }
      batchData.push(tmp)
    }

    thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/batch',
      type:'POST',
      headers:parseHeaders,
      data: JSON.stringify({requests: batchData}),
      success:function(res) {
        console.log(res)
        lists = thiss.state.lists

        for(i=0;i< lists.length; i++) { 
          // Add To New List
          if(lists[i].objectId == listObjectId)
            lists[i].count = parseInt(lists[i].count) + parseInt(selectedProspects.length)
          // Subtract From Old List
          if(lists[i].objectId == thiss.state.currentListObjectId)
            lists[i].count = parseInt(lists[i].count) - parseInt(selectedProspects.length)
        }
        // Update local list count
        thiss.setState({lists: lists})

        // remove from current list ui
        console.log('selectedProspects')
        console.log(thiss.state.prospects)
        var filtered = _.filter(thiss.state.prospects, function(item) {
          is_selected = true
          for(i=0;i< selectedProspects.length;i++) 
            if(item.objectId == selectedProspects[i])
              is_selected = false
          return is_selected
        });
        console.log(filtered)
        thiss.setState({prospects: filtered})
        localStorage.selectedProspects = JSON.stringify([])

        // add alert to inform user
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  copySelectedProspects: function(listObjectId) {
    console.log(listObjectId)
    
    // make batch ajax request to parse
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      "Content-Type" : "application/json"
    }

    // Add Loading Sign To List

    selectedProspects = JSON.parse(localStorage.selectedProspects)
    batchData = []
    for(i=0;i< selectedProspects.length;i++){
      tmp = {
        method:'PUT',
        path:'/1/classes/Prospect/'+selectedProspects[i],
        body: {
          lists: {
            '__op'    : 'AddUnique',
            "objects" : [{ 
                '__type':'Pointer',
                'className':'ProspectList',
                'objectId':listObjectId
            }]
          }
        }
      }
      batchData.push(tmp)
    }

    thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/batch',
      type:'POST',
      headers:parseHeaders,
      data: JSON.stringify({requests: batchData}),
      success:function(res) {
        console.log(res)
        // Update With the number of successes
        // Update local list count
        lists = thiss.state.lists
        for(i=0;i< lists.length; i++) { 
          if(lists[i].objectId == listObjectId)
            lists[i].count = parseInt(lists[i].count) + parseInt(res.length)
        }
        thiss.setState({lists: lists})
        localStorage.selectedProspects = "[]"
        thiss.setState({selectedProspects : [] })
        
        // add alert to inform user
        // Unselect all selected
      },
      error: function(err) {
        console.log(err)
      }
    });

  },

  hideAlert: function() {
    $('.alert').hide()
  },

  adjustHeight: function(whichOne) {
    prospectWindowTop = $('#prospectDetailButtons').position().top
    prospectWindowTop = prospectWindowTop + $('#prospectDetailButtons').height()
    prospectWindowBottom = $('#autoscroll').position().top + $('#autoscroll').height()

    if(whichOne == 'j')
      activeProspect = this.state.keyboardActiveProspect +1 
    else
      activeProspect = this.state.keyboardActiveProspect -1 

    activeTop = $($('.prospects-tr')[activeProspect]).position().top
    selectedHeight = $($('.prospects-tr')[activeProspect]).height()
    activeBottom = $($('.prospects-tr')[activeProspect]).position().top+selectedHeight

    console.log(prospectWindowTop, prospectWindowBottom)
    console.log(activeTop, activeBottom)

    scrollTop = document.getElementById('autoscroll').scrollTop
    if(activeBottom > prospectWindowBottom)
      document.getElementById('autoscroll').scrollTop = scrollTop + activeBottom - prospectWindowBottom

    if(activeTop < 0)
      document.getElementById('autoscroll').scrollTop = scrollTop + activeTop - 37
    else if(activeTop == $($('.prospects-tr')[0]).position().top)
      document.getElementById('autoscroll').scrollTop = 0
      
    // Get Postion of Top
    // Get Position of Bottom 
    // Get Position of Current Selected
    // Adjust by scrolling down or up
  },

  startKeyboardShortcuts: function() {
    /* Keyboard Shortcuts */
    Mousetrap.reset()
    //Mousetrap.unbind(['j','k','o'])
    thiss = this;

    /* Prospect Table Shortcuts */
    Mousetrap.bind('j', function() { 
      keyboard = thiss.state.keyboardActiveProspect
      if(keyboard != thiss.state.prospectsPerPage+1)
        thiss.adjustHeight('j')
        thiss.setState({keyboardActiveProspect: keyboard+1})
    });

    Mousetrap.bind('k', function() { 
      keyboard = thiss.state.keyboardActiveProspect
      if(keyboard != 1)
        thiss.adjustHeight('k')
        thiss.setState({keyboardActiveProspect: keyboard-1})
    });


    Mousetrap.bind('o', function() { 
      console.log('open current prospect')
      console.log($($('.keySelect').find('a.linkedin_link')[0]).attr('href'))
      link = $($('.keySelect').find('a.linkedin_link')[0]).attr('href')
      /*
      window.open(link, '_blank')
      console.log('new')
      */
      //popupWindow.blur();
      //window.focus();
      // keyboard = thiss.state.keyboardActiveProspect
      
      var a = document.createElement("a");
      a.href = link
      var evt = document.createEvent("MouseEvents");
      //the tenth parameter of initMouseEvent sets ctrl key
      // For Mac This Works Check For - Windows
      evt.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0,
                                  false, false, false, true, 0, null);
      a.dispatchEvent(evt);
    });



    /* List Modification Shortcuts */
    Mousetrap.bind('tab+r', function(){
      //console.log('reload')
      $('#renameListBtn').click()
    })

    Mousetrap.bind('tab+d', function(){
      //console.log('reload')
      $('#deleteListModal').click()
    })

    Mousetrap.bind('tab+s', function(){
      //console.log('reload')
      //$('#downloadProspects').click()
      thiss.downloadFile()
    })

    Mousetrap.bind('shift+l', function(){
      //console.log('reload')
      //$('#downloadProspects').click()
      //thiss.downloadFile()
      $('.new-list-btn').click()
    })

    Mousetrap.bind('e', function(){
      console.log('reload')
      //$('#downloadProspects').click()
      thiss.removeSelectedProspects()
    })

    Mousetrap.bind('c', function() { 
      console.log('copy')
      $('#copyToList').click()
    });

    Mousetrap.bind('m', function() { 
      console.log('copy')
      $('#moveToList').click()
    });

    //Mousetrap.bind('e', function() { console.log('e'); });
    Mousetrap.bind('right', function() { console.log('right'); });
    Mousetrap.bind('left', function() { console.log('left'); });

  },

  componentDidMount: function() {
    /* OnLoad For The First Time Function */
    localStorage.selectedProspects = JSON.stringify([])
    thisss = this;

    //this.startKeyboardShortcuts()

    parse_headers = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb'
    }

    cuid = JSON.parse(localStorage.currentUser).objectId
    user = JSON.stringify({'__type':'Pointer',
                           'objectId':cuid, 
                           'className': 'User'})
    archiveList = JSON.stringify({ //hardCode
      'objectId':'SerPQjckve', // Differente For Wach User
      '__type':'Pointer', 
      'className' : 'ProspectList' 
    })

    qry = {
      where: JSON.stringify({
        company: JSON.parse(localStorage.currentUser).company,
        archived: true,
      }),
      count: 1,
      order: '-createdAt',
      limit: this.state.prospectPerPage,
      include: 'email_guesses,email_guesses.pattern'
    }

    //qry = 'where={"company":'+company+',"archived":true}&count=1&order=-createdAt&incude=email_guesses'

    if(this.state.currentList != 'All'){
      currentList = {
        'objectId':this.state.currentListObjectId, 
        '__type':'Pointer', 
        'className' : 'ProspectList' 
      }
      currentList = JSON.stringify(currentList)
      user = JSON.stringify({'__type':'Pointer',
                             'objectId':'xThAXc0LZT',
                             'className':'User'})

      // add company to prospects added through mining job
      qry = 'where={"company":'+company+',"lists":'+currentList+'}&count=1'
    }

    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospect',
      type:'GET',
      headers: appConfig.parseHeaders,
      cache: true,
      data: qry,
      success: function(res){
        console.log(res)
        thisss.setState({prospects: res.results})
        thisss.setState({count: res.count})
        thisss.setState({totalCount: res.count})
        thisss.setState({pages: Math.ceil(res.count/thisss.props.prospectsPerPage)})
        thisss.setState({loading: false})
      },
      error: function(res){
        console.log('error')
        console.log(res)
      }
    })

    parse_headers = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
    }

    currentUser = { 
      '__type'   : 'Pointer',
      'className': '_User',
      'objectId' : JSON.parse(localStorage.currentUser).objectId
    }

    thiss = this;
    $.ajax({
      url: 'https://api.parse.com/1/classes/ProspectList',
      type: 'GET',
      headers: parse_headers,
      data: 'where={"user":'+JSON.stringify(currentUser)+"}&count=1&order=-createdAt",
      success: function(res) {
        console.log(res)
        results = res.results
        for(i=0;i< results.length; i++) {
          results.count = '~'
        }
        thiss.setState({lists: results})
        // Make batch request to get list counts after they are loaded
        for(i=0;i < res.results.length; i++) {
          localStorage.setItem(res.results[i].objectId, "")
        }

        for(i=0;i< res.results.length; i++) {
          list = {
            '__type'    : 'Pointer',
            'objectId'  : res.results[i].objectId,
            'className' : 'ProspectList', 
          }

          $.ajax({
            url:'https://api.parse.com/1/classes/Prospect',
            type:'GET',
            headers:parse_headers,
            listObjectId: res.results[i].objectId,
            data: 'where={"lists":'+JSON.stringify(list)+'}&count=1',
            success: function(res) {
              //console.log(this.listObjectId)
              localStorage.setItem(this.listObjectId, res.count)
              amount = 0
              for(ii=0;ii< results.length;ii++){
                if(localStorage.getItem(results[ii].objectId) == "")
                  amount = amount + 1
              }

              if(amount == 0) {
                for(ii=0;ii< results.length;ii++)
                  results[ii].count = localStorage.getItem(results[ii].objectId)

                thiss.setState({lists: results})
                //console.log('Got Counts')
              }

              // updated res.count
              //thiss.setState({count: res.count})
            },
            error: function(err) {
              console.log(err)
            }
          })
        }
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });
  },

  generate_id : function () {
    return '_' + Math.random().toString(36).substr(2, 9);
  },
});

/*  Dropdown Menus */

var CurrentLists = React.createClass({displayName: 'CurrentLists',
  listAction: function(e) {
    listName = $(e.target).text()
    
    var listSelect = _.filter(this.props.lists, function(item) {
       return item.name == listName
    });

    this.props.listAction(listSelect[0].objectId)
  },

  render: function() {
    lists = [] 
    for(i=0;i< this.props.lists.length;i++) {
      lists.push(
        React.DOM.li(null, React.DOM.a({style: {fontWeight:'bold',fontSize:'10px'}, href: "javascript:", onClick: this.listAction}, this.props.lists[i].name))
      )
    }
    //console.log(this.props.copyDropdownStyle)
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: {right:158}}, 
        lists
      )
    );
  }
});

var ListsMenu = React.createClass({displayName: 'ListsMenu',
  render: function() {
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: {
            minWidth:'inherit',
            top: '20px',
            width: '125px',
            right: '154px',
            left:'auto'
          }}, 
        React.DOM.li(null, React.DOM.a({href: "#books"}, 
          React.DOM.i({className: "fa fa-times"}), "  " + ' ' +
          "Delete List"
        )), 
        React.DOM.li(null, React.DOM.a({href: "#podcasts"}, 
          "Rename Lists"
        ))
      )
    );
  }
});

var CurrentListsTwo = React.createClass({displayName: 'CurrentListsTwo',
  listAction: function(e) {
    listName = $(e.target).text()
    
    var listSelect = _.filter(this.props.lists, function(item) {
       return item.name == listName
    });

    this.props.listAction(listSelect[0].objectId)
  },

  render: function() {
    lists = [] 
    for(i=0;i<this.props.lists.length;i++) {
      lists.push(
        React.DOM.li(null, React.DOM.a({style: {fontWeight:'bold',fontSize:'10px'}, 
               href: "javascript:", 
               onClick: this.listAction}, 
          this.props.lists[i].name))
      )
    }
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: this.props.copyDropdownStyle}, 
        lists
      )
    );
  }
});

var ListDetailButtons = React.createClass({displayName: 'ListDetailButtons',
  // Rename List
  getInitialState: function() {
    return {
      editMode: false
    }
  },
  render: function() {
    //console.log(this.props.currentListObjectId)
    if(!this.state.editMode) {
      stuff = React.DOM.span({className: "", style: listNameStyle}, 
            (this.props.currentListName == "All") ? '' : React.DOM.i({className: "fa fa-bars", style: {fontSize:16, marginTop:-5}}), 
            (this.props.currentListName == "All") ? '' : "   " +this.props.currentListName
              )
    } else {
      stuff = React.DOM.input({className: "form-control", style: {width: 100, float: 'left', height: 24, marginTop: -1}})
    }
    return (

          React.DOM.div(null, 
            React.DOM.h4({style: {margin:0}}, 
              stuff, 
              React.DOM.a({href: "javascript:", 
                style: listBtn, 
                'data-toggle': "modal", 
                id: "renameListBtn", 
                'data-target': ".bs-renameList-modal-sm", 
                className: "btn btn-xs btn-default"}, 
                React.DOM.i({className: "fa fa-pencil"})
              ), 
              React.DOM.a({href: "javascript:", 
                onClick: this.deleteList, 
                style: listBtn, 
                className: "btn btn-xs btn-default"}, 
                React.DOM.i({className: "fa fa-trash-o"})
              )
            ), 

            RenameListModal({renameList: this.props.renameList}), 
            DeleteListModal({deleteList: this.props.deleteList})
          )
      );
  },

  renameList: function(newListName) {
    this.props.renameList(newListName)
  },

  deleteList: function(){
    thiss = this;
    swal({   
      title: "Are you sure?",   
      text: "Your will not be able to recover this prospect list!",   
      type: "warning",   
      showCancelButton: true,   
      confirmButtonColor: "#DD6B55",   
      confirmButtonText: "Yes, delete it!",   
      closeOnConfirm: false }, 
      function(){   swal("Deleted!", "Your prospect list has been deleted.", "success"); 
        console.log('deleted')
        thiss.props.deleteList()
      });
  },

  toggleEdit: function() {
    this.setState({editMode: !this.state.editMode })
  }
});


},{"./delete_list_modal.js.min.js":19,"./loading_spinner.js.min.js":27,"./messenger.js.min.js":29,"./panel_footing.js.min.js":33,"./rename_list_modal.js.min.js":37,"./side_menu_user_prospects.js.min.js":41,"./user_prospect.js.min.js":51,"./user_prospect_header.js.min.js":52,"./user_side_menu_list.js.min.js":53}],37:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createListModal
  createList: function() {
    console.log($('#listTitle').val())

    data =  {
      'name'        : $('#listTitle').val().trim(),   //Waiting , Running
      'user'        : { '__type':'Pointer',
                      'className':'_User',
                      'objectId':'xWESiw5Smd' },
    }

    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectList',
      type:'POST',
      headers: appConfig.parseHeaders,
      data: JSON.stringify(data),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });

    data.count = 0

    this.props.createList(data)
    
    $('#createListModal').modal('hide')
    $('body').removeClass('modal-open');
    $('.modal-backdrop').remove();
    //$('button.close').click()
  },

  renameList: function(e) {
    e.preventDefault()
    //console.log($('#newListName').val())
    newListName = $('#newListName').val()
    if(newListName.trim() != "")
      this.props.renameList(newListName)
    // Disable Modal
  },

  render: function() {
    return (
          React.DOM.div({className: "modal fade bs-renameList-modal-sm", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "createListModal", style: {top:'200px'}}, 
            React.DOM.div({className: "modal-dialog modal-sm"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-list"}), "  Rename List")
                ), 
                React.DOM.div({className: "modal-body"}, 
                  React.DOM.form({onSubmit: this.renameList}, 
                    React.DOM.input({id: "newListName", type: "text", placeholder: "Enter list title...", className: "form-control"}), 
                    React.DOM.br(null), 
                    React.DOM.a({href: "javascript:", 
                      onClick: this.renameList, 
                      className: "btn btn-success", 
                      style: {display:'block', width:'100%'}}, 
                      "Create List"
                    )
                  )
                )
              )
            )
          )
    );
  }
});


},{}],38:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  render: function() {
    return (
      React.DOM.div(null, 
        "Scheduls"
      )
    );
  }
});

},{}],39:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {
      currentProspect: 0,
    }
  },
  //SendEmailModal
  render: function() {
    //console.log(this.props.currentTemplate)
    prospect = this.props.prospects[this.state.currentProspect]
    prospect = (prospect) ? prospect : {'name':'','email':''}
    //console.log(prospect)
    prospects = []
    for(i=0; i< this.props.prospects.length; i++){
      prospects.push(UserPlaceHolder({prospect: this.props.prospects[i]}))
    }
    email = (prospect.email) ? prospect.email.toLowerCase() : ""
    return (
          React.DOM.div({className: "modal fade bs-sendEmail-modal-lg", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "sendEmailModal", style: {top:'10px'}}, 
            React.DOM.div({className: "modal-dialog modal-lg"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
        React.DOM.button({type: "button", 
                style: {float:'right'}, 
                className: "btn btn-primary btn-sm"}, 
                React.DOM.i({className: "fa fa-paper-plane"}), " " + ' ' +
                "Send Email"), 
        React.DOM.button({type: "button", style: {marginRight:10, float:'right'}, 
                className: "btn btn-default btn-sm", 'data-dismiss': "modal"}, "Close"), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-envelope"}), "  Send Email" + ' ' +
                    "  ", 
                    React.DOM.small(null, "("+this.props.prospects.length+")")
                  )
                ), 
                React.DOM.div({className: "modal-body", style: {paddingTop:5}}, 
                  React.DOM.h4(null, "People"), 
                  
                  React.DOM.div({className: "prospect-container"}, 
                    prospects
                  ), 
                  React.DOM.br(null), 
                  React.DOM.h4({style: {display:'inline-block'}}, "Emails    ", 
                    React.DOM.small(null, (this.state.currentProspect+1)+' of '+this.props.prospects.length)), 
                  "   ", 
                  React.DOM.a({href: "javascript:", 
              className: (this.state.currentProspect == 0 ) ? "btn disabled" : "btn", 
                    onClick: this.previousProspect}, React.DOM.i({className: "fa fa-arrow-left"})), 
                  React.DOM.a({href: "javascript:", 
            className: (this.state.currentProspect == 135 ) ? "btn disabled" : "btn", 
                    onClick: this.nextProspect}, React.DOM.i({className: "fa fa-arrow-right"})), 

                  React.DOM.div(null, 

React.DOM.ul({className: "list-group email-holder", style: {borderTop:'solid 1px #eee'}}, 
  React.DOM.li({className: "list-group-item"}, 
    React.DOM.h5({style: {display:'inline-block',marginTop:0,marginBottom:0}}, "To:  "), 
    prospect.name + " - " + email
  ), 
  React.DOM.li({className: "list-group-item"}, 
    React.DOM.h5({style: {display:'inline-block',marginTop:0,marginBottom:0}}, "Subject:  "), " ", this.props.currentTemplate.subject
  ), 
  React.DOM.li({className: "list-group-item body"})
)
  
                  )

                ), 

      React.DOM.div({className: "modal-footer", style: {display:'none'}}, 
        React.DOM.button({type: "button", 
                className: "btn btn-default", 'data-dismiss': "modal"}, "Close"), 
        React.DOM.button({type: "button", 
                className: "btn btn-primary"}, "Send Email")
      )
              )
            )
          )
    );
  },

  previousProspect: function() {
    this.setState({currentProspect: this.state.currentProspect-1 })
  },

  nextProspect: function() {
    this.setState({currentProspect: this.state.currentProspect+1 })
  },

  parseTemplate: function(templateBody) {
    first_name = prospect.name.split(' ')[0]
    //hiring_signal = prospect.signals

    signals = (prospect.signals) ? prospect.signals[0] : ""
    templateBody = Mustache.render(templateBody, {
      hiring_signal: signals,
      first_name: prospect.name.split(' ')[0]
    })

    console.log(templateBody)
      
    return templateBody
  },

  componentDidUpdate: function() {
    //console.log(this.props.currentTemplate)
    parsedTemplate = this.parseTemplate(this.props.currentTemplate.body)
    
    //$('.body').html(this.props.currentTemplate.body)
    $('.body').html(parsedTemplate)
  }
});

var UserPlaceHolder = React.createClass({displayName: 'UserPlaceHolder',
  render: function() {
    return (
        React.DOM.div({className: "btn-group", style: {marginRight:5,marginBottom:5}}, 
          React.DOM.div({className: "btn-group"}, 
            React.DOM.button({type: "button", 
                    className: "btn btn-success btn-sm"}, 
              React.DOM.i({className: "fa fa-user"}), "  ", 
              (this.props.prospect) ? this.props.prospect.name : ""
            )
          ), 
          React.DOM.button({type: "button", className: "btn btn-success btn-sm"}, 
            React.DOM.i({className: "fa fa-trash-o"})
          )
        )
    )
  }
});

},{}],40:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Sent Mail
  getInitialState: function() {
    return {
      sentEmails: []
    }
  },

  componentDidMount: function() {
    thiss = this;
    $.ajax({
      url: 'https://api.parse.com/1/classes/SentEmail',
      data:{include: 'campaign,prospect,prospect.email_guesses.pattern'},
      headers: appConfig.headers,
      success: function(res) { thiss.setState({sentEmails: res.results}) },
      error: function() {}
    })
  },

  render: function() {
    sentEmails = []
    for(i=0;i< this.state.sentEmails.length; i++) 
      sentEmails.push(SentEmailRow({sentEmail: this.state.sentEmails[i]}))

    return (
      React.DOM.div({style: {overflow:'auto',height:550}}, 
        React.DOM.table({className: "table table-striped", style: {marginBottom:0}}, 
          React.DOM.thead(null, 
            React.DOM.th(null), 
            React.DOM.th(null, "Prospect Name"), 
            React.DOM.th(null, "Prospect Email"), 
            React.DOM.th({style: {width:290}}, "Status")
          ), 
          React.DOM.tbody(null, 
            sentEmails
          )
        )
      )
    );
  }
});

var SentEmailRow = React.createClass({displayName: 'SentEmailRow',
  render: function() {
    sentEmail = this.props.sentEmail
    //console.log(sentEmail)

    email = sentEmail.email
    if(email == "no_email"){
      first = sentEmail.prospect.name.split(' ')[0]
      last = _.last(sentEmail.prospect.name.split(' '))

      pattern = _.findWhere(sentEmail.prospect.email_guesses, {'tried':false})
      data = {first: first, last: last, fi: first[0], li: last[0]}
      email = Mustache.render(pattern.pattern.pattern, data).toLowerCase()
    }

    return (
      React.DOM.tr(null, 
        React.DOM.td(null, React.DOM.h6(null, 
            React.DOM.i({className: "fa fa-clock"}), 
            moment(sentEmail.createdAt).fromNow())), 
        React.DOM.td(null, 
          React.DOM.h6({style: {fontSize:14,fontWeight:'bold',marginBottom:0}}, sentEmail.prospect.name), 
          React.DOM.h6({style: {marginTop:4,marginBottom:0}}, sentEmail.prospect.pos.trim()), 
          React.DOM.h6({style: {marginTop:4}}, sentEmail.prospect.company_name)
        ), 
        React.DOM.td(null, React.DOM.h6(null, email)), 
        React.DOM.td({style: {paddingTop:13}}, 
          React.DOM.span({className: "label label-default"}, "Queued"), 
          React.DOM.i({className: "fa fa-chevron-circle-right text-muted", 
             style: {paddingLeft:5,paddingRight:5}}), 
          React.DOM.span({className: "label label-success"}, "Opened"), 
          React.DOM.i({className: "fa fa-chevron-circle-right text-muted", 
             style: {paddingLeft:5,paddingRight:5}}), 
          React.DOM.span({className: "label label-default"}, "Delivered"), 
          React.DOM.i({className: "fa fa-chevron-circle-right text-muted", 
             style: {paddingLeft:5,paddingRight:5}}), 
          React.DOM.span({className: "label label-default"}, "Replied")
        )
      )
    )
  }
})

},{}],41:[function(require,module,exports){
/** @jsx React.DOM */

var SideMenuListOption = require('./user_side_menu_list.js.min.js');
var createListModal = require('./create_list_modal.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  //SideMenuProspects - SideList
  getInitialState: function() {
    return {
      /*
      createList: 
      renameList:
      deleteList:
      changeList:
      currentList:
      totalCount:
      lists:
      */
    }
  },

  createList: function (data) {
    this.props.createList(data)
  },

  componentDidMount: function() {
  },

  changeList: function(e) {
    /*
    currentList = $(e.target).parent()//.data('list')
    console.log(currentList)
    this.props.changeList(currentList.name, currentList.objectId)
    */
  },

  render: function() {
    if(this.props.currentList == "All")
      styles = {'backgroundColor':'rgb(0, 122, 255)', 'color':'white'} 
    else
      styles =  {}

    lists = [SideMenuListOption({list: {name: 'All',count: this.props.totalCount}, 
                                 iconType: 'users', 
                                 changeList: this.props.changeList}), 
             SideMenuListOption({list: {name: 'Archived', count: '~'}, 
                                 iconType: 'archive', 
                                 changeList: this.props.changeList, 
                                 hideCount: true})]

    for(i=0;i< this.props.lists.length;i++){
      list = this.props.lists[i]
      if(list.list_type == "signal_list")
        iconType = "wifi"
      else if (list.list_type == "mining_job")
        iconType = "cloudDownload"
      if(list.list_type)
        lists.push( SideMenuListOption({list: list, 
                                        iconType: iconType, 
                                        changeList: this.props.changeList}))
      else 
        lists.push( SideMenuListOption({list: list, 
                                        changeList: this.props.changeList}))
    }

    return (
      React.DOM.div({className: "col-lg-2 col-md-2 col-sm-2 col-xs-2", 
           style: {padding:'0',height:'438px',backgroundColor:'#e0e9ee',
                   borderRight:'1px solid #b0b8bf',textAlign:'center'}}, 
        React.DOM.div({className: "prospect-list-header"}, " Lists "), 
        React.DOM.div({className: "btn-group-vertical", 
             style: {width:'100%', height: '320px', overflow: 'auto'}}, 
          lists
        ), 
        React.DOM.br(null), React.DOM.br(null), 
        React.DOM.a({href: "javascript:", className: "btn btn-primary new-list-btn", 
              'data-toggle': "modal", 'data-target': ".bs-example-modal-sm", 
              style: { backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
          React.DOM.i({className: "fa fa-plus-circle"}), "  New List"
        ), 
        createListModal({createList: this.createList, 
                         listClassName: this.props.listClassName}), " ", React.DOM.br(null)
      )
    );
  },
});

},{"./create_list_modal.js.min.js":12,"./user_side_menu_list.js.min.js":53}],42:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // SignalCalendar
  getInitialState: function() {
    return {
      reports : []
    }
  },

  getSignalReport: function() {
    thissss = this;
    qry = {'where' : JSON.stringify({profile:{
      __type:'Pointer',
      className:'ProspectProfile',
      objectId:this.props.currentProfile.objectId
    }})}

    // Get Signal Reports Of Current Profile
    $.ajax({
      url: 'https://api.parse.com/1/classes/SignalReport?order=-createdAt',
      type:'GET',
      data: qry,
      headers:appConfig.parseHeaders,
      success: function(res) {
        //console.log(res.results)
        thissss.setState({reports: res.results})
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  componentDidMount: function() {
    //this.getSignalReport()
  },

  componentDidUpdate: function() {
    //this.getSignalReport()
  },

  render: function() {
    reports = []
    for(i=0;i< this.props.reports.length; i++) {
      reports.push(SignalReportRow({setCurrentReport: this.setCurrentReport, 
                                    prospectSignalReport: this.prospectSignalReport, 
                                    setCurrentView: this.setCurrentView, 
                                    report: this.props.reports[i]}))
    }

    return (
      React.DOM.div({className: "container", style: {paddingLeft:0,
                                         paddingRight:0,width:'100%'}}, 
        React.DOM.div({style: {height:44,borderBottom:'solid 1px rgb(221, 221, 221)'}}, 
          React.DOM.h4({onClick: this.returnToCalendarView, 
              style: {fontWeight:200, float:'left',cursor:'pointer',marginTop:7,
                      paddingLeft:20,paddingTop:5, display:'inline-block'}}, 
                React.DOM.i({className: "fa fa-calendar", style: {marginRight:5}}), 
                this.props.currentProfile.name
          )
          

        ), 
        React.DOM.div({className: "col-md-12", style: {paddingLeft:0,paddingRight:0,
                                           height:356,overflow:'auto'}}, 
          React.DOM.div({style: {overflow:'auto'}}, 
            React.DOM.table({className: "table table-striped", style: {marginBottom:0}}, 
              React.DOM.thead(null, 
                React.DOM.th(null), 
                React.DOM.th({style: {textAlign:'center'}}, 
                  React.DOM.i({className: "fa fa-clock-o"}), " Last Ran"
                ), 
                React.DOM.th({style: {textAlign:'center'}}, "Posted Job Listing"), 
                React.DOM.th(null, "Company Signals"), 
                React.DOM.th({style: {display:'none'}}, "Prospect Signals"), 
                React.DOM.th({style: {width:150,textAlign:'center'}})
              ), 
              React.DOM.tbody({className: "reports"}, 
                reports
              )
            )
          )
        )
      )
    );
  },

  setCurrentReport: function(newReport) {
    this.props.setCurrentReport(newReport)
  },

  prospectSignalReport: function(signalReport) {
    this.props.prospectSignalReport(this.props.currentProfile, signalReport)
  },
});

var SignalReportRow = React.createClass({displayName: 'SignalReportRow',
  rowClick: function() {
    if(this.props.report.done)
      this.props.setCurrentReport(this.props.report)
    else
      alertify.log("This mining job is still in progress. You'll be notified when it's completed")
  },

  prospectSignalReport: function(e) {
    this.props.prospectSignalReport(this.props.report)
    e.stopPropagation()
  },


  render: function() {
    prospected = this.props.report.prospected
    if(!this.props.report.mining_job)
      icon = React.DOM.i({className: "fa fa-wifi"})
    else
      icon = React.DOM.i({className: "fa fa-cloud-download", style: {color:'#555'}})

    loading = (!this.props.report.done) ? React.DOM.div({className: "profile-loading", style: {marginLeft:30}}, 
          React.DOM.div({className: "double-bounce1", style: {backgroundColor:'#5cb85c'}}), 
          React.DOM.div({className: "double-bounce2", style: {backgroundColor:'#5cb85c'}})
          ) : React.DOM.a({href: "javascript:", 
                    onClick: this.prospectSignalReport, 
             style: {fontWeight:'bold',marginTop:5}, 
     className: (prospected) ? "btn btn-xs btn-success disabled" : "btn btn-xs btn-success"}, 
             (prospected) ? 'Prospected' : 'Prospect All'
          )
    // Make an Alert when somebody clicks on in progress signal report
    return (
      React.DOM.tr({onClick: this.rowClick, style: {cursor:'pointer'}}, 
        React.DOM.td({style: {textAlign:'right',paddingTop:15}}, 
          icon
        ), 
        React.DOM.td({style: {textAlign:'center'}}, 
          React.DOM.h6(null, 
            moment(this.props.report.createdAt).fromNow()
          )
        ), 
        React.DOM.td({style: {textAlign:'center'}}, 
          React.DOM.h6(null, 
          'lol'
          )
        ), 
        React.DOM.td(null, 
          React.DOM.span({className: "label label-success"}, 
            this.props.report.company_count
          ), 
          React.DOM.h6({style: {display:'inline-block'}}, 
            "  Companies found."
          )
        ), 
        React.DOM.td({style: {display:'none'}}, 
          React.DOM.span({className: "label label-success"}, 
            this.props.report.people_count
          ), 
          React.DOM.h6({style: {display:'inline-block'}}, 
            "  People found."
          )
        ), 
        React.DOM.td({style: (this.props.report.done) ? {} : {paddingTop:17}}, 
          loading
        )
      )
    )
  }
});

},{}],43:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // SignalDetail
  getInitialState: function() {
    return {
      signals: []
    }
  },

  componentDidMount: function() {
    thissss = this;
    currentProfileReport = JSON.stringify({
      __type: 'Pointer',
      className: 'SignalReport',
      objectId: this.props.currentProfileReport.objectId
    })

    console.log('CURRENT PROFILE')
    console.log(currentProfileReport)
    qry = 'where={"signal_report":'+currentProfileReport+'}&include=company_signal,company_signal.signals&order=-createdAt'
    $.ajax({
      url: 'https://api.parse.com/1/classes/PeopleSignal?'+qry,
      type:'GET',
      headers:appConfig.parseHeaders,
      success: function(res) {
        console.log('SIGNAL DETAIL')
        console.log(res.results)
        thissss.setState({signals: res.results})
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  returnToCalendarView: function() {
    console.log('return to calendar view')
  },

  render: function() {
    signals = []
    for(i=0;i< this.state.signals.length; i++)
      signals.push(SignalRow({signal: this.state.signals[i]}))

    currentProfileReport = this.props.currentProfileReport
    return (
      React.DOM.div({className: "container", style: {height:356,paddingLeft:0,
                                         paddingRight:0,width:'100%'}}, 
        React.DOM.div({style: {height:44,borderBottom:'solid 1px rgb(221, 221, 221)'}}, 
          React.DOM.h4({onClick: this.returnToCalendarView, 
              style: {float:'left',cursor:'pointer',marginTop:7,fontWeight:200,
                      paddingLeft:20,paddingTop:5,display:'inline-block'}}, 
              
                React.DOM.i({className: "fa fa-calendar", style: {marginRight:5}}), 
                this.props.currentProfile.name
          ), 
          React.DOM.h6({style: {fontSize:13,paddingLeft:5,paddingTop:5,display:'inline-block'}}, 
            React.DOM.i({className: "fa fa-chevron-right", style: {fontSize:9}}), "  ", 
            React.DOM.i({className: "fa fa-clock-o"}), "  ", 
            moment(currentProfileReport.createdAt).fromNow(), "  "
          ), 

          React.DOM.a({href: "javascript:", style: {fontWeight:'bold',float:'right',
                                        marginRight:10,marginTop:10}, 
             className: "btn btn-success btn-xs"}, 
            "Prospect All"
          ), 

          React.DOM.div({className: "btn-group", 
               style: {float:'right',marginTop:10,marginRight:10}, 
               'data-toggle': "buttons"}, 
            React.DOM.label({className: "btn btn-xs btn-default active", style: {width:30}}, 
              React.DOM.input({type: "checkbox"}), 
              React.DOM.i({className: "fa fa-user"})
            ), 
            React.DOM.label({className: "btn btn-xs btn-default", style: {width:30}}, 
              React.DOM.input({type: "checkbox"}), 
              React.DOM.i({className: "fa fa-building"})
            )
          )

        ), 
        React.DOM.div({className: "col-md-12", style: {paddingLeft:0,paddingRight:0}}, 
          React.DOM.div({style: {overflow:'auto',height:356}}, 
            React.DOM.table({className: "table table-striped"}, 
              React.DOM.thead(null, 
                React.DOM.th({style: {textAlign:'center',width:90}}, 
                  React.DOM.i({className: "fa fa-clock-o"})
                ), 

                React.DOM.th(null, "People"), 

                React.DOM.th(null, "Companies"), 

                React.DOM.th({style: {width:90,textAlign:'center'}}
                )

              ), 
              React.DOM.tbody({className: "reports"}, 
                signals
              )
            )
          )
        )
      )
    );
  }
});

var SignalRow = React.createClass({displayName: 'SignalRow',
  render: function() {
    company = (this.props.signal.company_signal) ? this.props.signal.company_signal : {}
    return (
      React.DOM.tr(null, 
        React.DOM.td({style: {textAlign:'center'}}, 
          React.DOM.h6(null, 
            moment(this.props.signal.createdAt).fromNow()
          )
        ), 

        React.DOM.td(null, 
          React.DOM.h6(null, this.props.signal.link_text), 
          React.DOM.h6(null, this.props.signal.title)
        ), 

        React.DOM.td(null, 
          React.DOM.h6(null, company.name), 
          React.DOM.h6(null, this.props.signal.title)
        ), 

        React.DOM.td(null, 
          React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", 
            style: {fontWeight:'bold'}}, 
            "Prospect"
          )
        )
      )
    )
  }
})

},{}],44:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // SignalLoading
  getInitialState: function() {
    return {
      count: '~',
      prospectName : '~',
      prospectTitle : '~',
      companyName : '~',
    }
  },

  initialize: function() {
    var thiss = this;
    var pusher = new Pusher('1a68a96c8fde938fa75a');
    objectId = this.props.currentProfile.objectId
    var channel = pusher.subscribe(objectId);
    channel.bind("my-event", function(data) {
      console.log(data)
      thiss.setState({
        count: data.count,
        prospectName: data.name,
        prospectTitle: data.title,
        companyName: data.company
      })
    });

    // Get Signal Report Count
    // Get Last PeopleSignal Found
    qry = { profile: appConfig.pointer('ProspectProfile',objectId) }
    $.ajax({
      url:'https://api.parse.com/1/classes/SignalReport',
      headers:appConfig.headers,
      data: {'where':JSON.stringify(qry),order:'-createdAt'},
      success: function(res) {
        //console.log(res)
        count = (res.results[0]) ? res.results[0].people_count : 0
        
        thiss.setState({count: count })
      },
    });
    $.ajax({
      url:'https://api.parse.com/1/classes/PeopleSignal',
      headers:appConfig.headers,
      data: {'where':JSON.stringify(qry),order:'-createdAt'},
      success: function(res) {
        //console.log(res)
        thiss.setState({
          prospectName: (res.results[0]) ? res.results[0].link_text : "",
          prospectTitle: (res.results[0]) ? res.results[0].title : "",
          companyName: (res.results[0]) ? res.results[0].company : ""
        })
      },
    });
  },

  componentDidMount: function() {
    Pusher.log = function(message) {
      if (window.console && window.console.log) {
        //window.console.log(message);
      }
    };

    this.initialize()
  },

  componentDidUpdate: function() {
  },

  componentWillReceiveProps: function() {
    this.setState({
      count: '~',
      prospectName : '~',
      prospectTitle : '~',
      companyName : '~',
    })
    this.initialize()
  },

  render: function() {
    // Show companies for hiring signals
    return (
      React.DOM.div({style: {background:'linear-gradient(#dae8ff,#dae8ff)', backgroundImage: 'radial-gradient(circle at center center,#fff,#dff1fd 900px)',height:'100%',paddingTop:10}}, 
        React.DOM.div({className: "signal-card", style: {
            width:500,textAlign:'center',display:'block',marginRight:'auto',
            marginLeft:'auto',marginTop:0,height:200
          }}, 

        React.DOM.div({className: "loading-two-balls", style: {height:20,width:20}}, 
          React.DOM.div({className: "dot1", style: {color:'black'}}), 
          React.DOM.div({className: "dot2", style: {color:'black'}})
        ), 
        React.DOM.div({id: "", style: {color:'#1ca3fd', fontWeight:'bold',marginTop:-10,
                          marginLeft:-200, fontSize:32, fontFamily:'Proxima-Nova'}}, 
            this.state.count + " people found."
          ), 
          React.DOM.div({style: {float:'right',marginTop:-48,marginRight:55}}, 
            React.DOM.h6({style: {marginBottom:3, fontWeight:'bold'}}, this.state.prospectName, " -  ", 
              React.DOM.span({style: {fontWeight:500, fontStyle:'italic'}}, 
                this.state.prospectTitle)), 
            React.DOM.h6({style: {marginTop:0,textAlign:'left'}}, 
              this.state.companyName
            )
          )
        )
      )
    )
  },
});

},{}],45:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // SignalProfile
  setCurrentView: function(e) {
    if(!this.props.profile.mining_job)
      this.props.setCurrentView('Calendar')
    else
      this.props.setCurrentView('MiningJobCalendar')
    //e.stopPropagation()
  },

  calendarClick:function(e) {
    this.props.setCurrentProfile(this.props.profile)
    if(!this.props.profile.mining_job)
      this.props.setCurrentView('Calendar')
    else
      this.props.setCurrentView('MiningJobCalendar')
    e.stopPropagation()
  },

  setCurrentProfile: function() {
    this.props.setCurrentProfile(this.props.profile)
    this.props.setCurrentView('Feed')
  },

  removeTheProfile: function() {
    this.props.removeProfile(this.props.profile)
  },

  removeProfile: function() {
    thissss = this;
    console.log(thiss.removeTheProfile)

    swal({   
      title: "Are you sure?",   
      text: "Your will not be able to recover this prospect list!",   
      type: "warning",   
      showCancelButton: true,   
      confirmButtonColor: "#DD6B55",   
      confirmButtonText: "Yes, delete it!",   
      closeOnConfirm: false }, 
      function(){   
        swal("Deleted!", "Your prospect list has been deleted.", "success"); 
        thissss.removeTheProfile()
        console.log('deleted')
      });
  },

  //componentDidUpdate: function(prevProps, prevState) { },
  componentWillReceiveProps: function(nextProps) {
  //componentWillUpdate: function(nextProps) {
    if(typeof(this.props.profile.objectId) == "undefined") {
      console.log('RECEIVE PROPS')

      var pusher = new Pusher('1a68a96c8fde938fa75a');
      var thiss = this;
      console.log(nextProps)
      console.log(nextProps.profile)
      console.log(_.keys(nextProps.profile))
      console.log(nextProps.profile.objectId)
      objectId = nextProps.profile.objectId
      console.log('new pusher channel -> '+ objectId)

      var channel = pusher.subscribe(objectId);
      channel.bind("done", function(data) {
        console.log(data)
        console.log(thiss.props)
        //thiss.setState({ done: data.done_timestamp })
        thiss.props.updateMiningJobDone(thiss.props.profile)
        alertify.success("Success notification");
      });
    }
  },

  componentDidMount: function() {
    var pusher = new Pusher('1a68a96c8fde938fa75a');
    objectId = this.props.profile.objectId
    console.log('new pusher channel ->', objectId)
    var channel = pusher.subscribe(objectId);
    var thiss = this;
    channel.bind("done", function(data) {
      console.log(data)
      console.log(thiss.props)
      //thiss.setState({ done: data.done_timestamp })
      thiss.props.updateMiningJobDone(thiss.props.profile)
      alertify.success("Success notification");
    });
  },

  render: function() {
    signalDetails = []
    for(i=0;i< this.props.profile.profiles.length; i++) {
      signalDetails.push(ProfileType({profile: this.props.profile.profiles[i]}))
    }
    if(!this.props.profile.mining_job) 
      icon = React.DOM.i({className: "fa fa-wifi", style: {marginRight:5}})
    else
      icon = React.DOM.i({className: "fa fa-cloud-download", style: {marginRight:5}})

    loading = (!this.props.profile.done) ? React.DOM.div({className: "profile-loading"}, 
            React.DOM.div({className: "double-bounce1"}), 
            React.DOM.div({className: "double-bounce2"})
          ) : ""
    
    if(this.props.profile.mining_job && this.props.profile.done)
      mining_job_done = React.DOM.i({className: "fa fa-check-circle", style: {color:'#0096ff',marginLeft:5,fontSize:15}})
    else
      mining_job_done = ""

    selectedStyle = {paddingTop:5,borderLeft:0,paddingLeft:10, borderRight:'1px solid #ddd', borderLeft: '5px solid #0096ff !important'}
    regularStyle = {paddingTop:5,borderLeft:0,paddingLeft:10, borderRight:'1px solid #ddd', borderLeft: '5px solid red !important'}
    regularStyle = {paddingTop:5,borderLeft:0,paddingLeft:10, borderRight:'1px solid #ddd', borderLeft:'5px solid rgba(0,0,0,0)'}
    selected= this.props.profile.objectId == this.props.currentProfile.objectId
    itemStyle = (selected) ? selectedStyle : regularStyle
    itemClass = (selected) ? "list-group-item ideal-company-profile list-group-selected" : "list-group-item ideal-company-profile"


    return (
      React.DOM.div({className: itemClass, 
           onClick: this.setCurrentProfile, 
           style: regularStyle}, 
        React.DOM.span({className: "profile-title"}, 
          React.DOM.h6({className: "label label-default profile-name"}, 
            icon, 
            this.props.profile.name
          ), 
          loading, mining_job_done, 
          React.DOM.a({href: "javascript:", 
             className: "btn btn-primary btn-xs signal-detail-btn", 
             onClick: this.removeProfile}, 
            React.DOM.i({className: "fa fa-archive"})), 
          React.DOM.a({href: "javascript:", 
            style: {display:'none'}, 
            className: "btn btn-primary btn-xs signal-detail-btn"}, 
            React.DOM.i({className: "fa fa-cog"})), 
          React.DOM.a({href: "javascript:", className: "btn btn-primary btn-xs signal-detail-btn", 
             onClick: this.calendarClick}, 
            React.DOM.i({className: "fa fa-calendar"})), 
          React.DOM.a({href: "javascript:", 
             onClick: this.launchModal, 
             style: (this.props.profile.mining_job) ? {display:'none'}:{display:'block'}, 
             className: "btn btn-primary btn-xs signal-detail-btn"}, 
            React.DOM.i({className: "fa fa-cloud-download"}))
        ), 

        React.DOM.div({className: "profile-body", style: {marginTop:5}}, 
          signalDetails
        )
      )
    );
  },

  launchModal: function(e) {
    $('#createMiningJobModal').modal()
    this.props.setCurrentProfile(this.props.profile)
    if(this.props.currentView == 'Calendar')
      this.props.setCurrentView('Calendar')
    else if(this.props.currentView == 'Feed')
      this.props.setCurrentView('Feed')
    e.stopPropagation()
  }
});

var ProfileType = React.createClass({displayName: 'ProfileType',
  render: function() {

  if(this.props.profile){
    if(this.props.profile.className == "HiringProfile") {
      signalIcon = React.DOM.i({className: "fa fa-suitcase"})
      signalName = "Hiring"
      signalValue = _.reduce(this.props.profile.roles, function(result, role) {
        return role + ", "+ result
      }, "");
      //console.log('wtf')
      //console.log(signalValue)
    } else if (this.props.profile.className  == "EmployeeProfile") {
      signalIcon = React.DOM.i({className: "fa fa-users"})
      signalName = "Company Size"
      signalValue = _.reduce(this.props.profile.employees, function(result, role) {
        return role + ", "+ result
      }, "");
    } else if (this.props.profile.className  == "FundingProfile") {
      signalIcon = React.DOM.i({className: "fa fa-institution"})
      signalName = "Funding"
      signalValue = _.reduce(this.props.profile.revenues, function(result, role) {
        return role + ", "+ result
      }, "");
    } else if (this.props.profile.className  == "RevenueProfile") {
      signalIcon = React.DOM.i({className: "fa fa-money"})
      signalName = "Revenue"
      signalValue = _.reduce(this.props.profile.revenues, function(result, role) {
        return role + ", "+ result
      }, "");
    } else if (this.props.profile.className  == "TechnologyProfile") {
      signalIcon = React.DOM.i({className: "fa fa-wrench"})
      signalName = "Technology"
    } else if (this.props.profile.className  == "LocationProfile") {
      signalIcon = React.DOM.i({className: "fa fa-map-marker"})
      signalName = "Locale"
      signalValue = _.reduce(this.props.profile.locale, function(result, role) {
        return role + ", "+ result
      }, "");
    } else if (this.props.profile.className  == "IndustryProfile") {
      signalIcon = React.DOM.i({className: "fa fa-building"})
      signalName = "Industries"
      signalValue = _.reduce(this.props.profile.industries, function(result, role) {
        return role + ", "+ result
      }, "");
    } else if (this.props.profile.className  == "CompanySizeProfile") {
      signalIcon = React.DOM.i({className: "fa fa-wrench"})
      signalName = "Technology"
    } else if (this.props.profile.className  == "ListProfile") {
      signalIcon = React.DOM.i({className: "fa fa-list-alt"})
      signalName = "Company List"
      signalValue = this.props.profile.listName
    } else if (this.props.profile.className  == "ProspectTitleProfile") {
      signalIcon = React.DOM.i({className: "fa fa-user"})
      signalName = "Titles"
      signalValue = _.reduce(this.props.profile.title_keywords, 
     function(result, role) {
        return role + ", "+ result
      }, "");
    } else {
      signalIcon = "not found"
      signalName = "Not found"
      signalValue= "Not found"
    }
  } else {
      signalIcon = "not found"
      signalName = "Not found"
      signalValue= "Not found"

  }

    return (
      React.DOM.span({className: "ideal-profile"}, " ", signalIcon, 
        React.DOM.h6({className: "profile-signal-name"}, signalName, " - "), 
        React.DOM.span({className: "profile-signal-value"}, " "+signalValue)
      )
    );
  }
});

/*
  Funding Profile
  - Amount Raised - btn group
  - Stage - btn group

  People Profile
  - Locale - tags w/ typahead
  - Title - tags w/ typahead

  Company Profile
  - Industries - tags with typahead
  - Revenue - btn group
  - # of Employees - btn group
  - Locale - tags with typahead
*/


},{}],46:[function(require,module,exports){
/** @jsx React.DOM */

var SignalProfile = require('./signal_profile.js.min.js')
var SignalLoading = require('./signal_loading.js.min.js')
var MiningJobLoading = require('./mining_job_loading.js.min.js')
var CompanySignalCard = require('./company_signal_card.js.min.js')
var PeopleSignalCard = require('./people_signal_card.js.min.js')
var SignalCalendar = require('./signal_calendar.js.min.js')
var MiningJobCalendar = require('./mining_job_calendar.js.min.js')
var SignalsDetail = require('./signal_detail.js.min.js')

var CreateHiringSignalModal = require('./create_hiring_signal_modal.js.min.js')
var CreateFundingSignalModal = require('./create_funding_signal_modal.js.min.js')
var CreateProspectProfileModal = require('./create_prospect_profile_modal.js.min.js')
var CreateCompanyProfileModal = require('./create_company_profile_modal.js.min.js')
var CreateMiningJobModal = require('./create_mining_job_modal.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {
      signalType: 'CompanySignal',
      currentProfile: {name:'All'},
      currentProfileObjectId: {},
      currentProfileReport: {},
      signals: [],
      currentView: 'Feed',
      profiles: [],
    }
  },

  setCurrentReport: function(newProfileReport) {
    console.log('NEW REPORT')
    console.log(newProfileReport)

    this.setState({ 
      currentView:'Detail',
      currentProfileReport: newProfileReport 
    })
  },

  prospectSignalReport: function(profile, report) {
    profiles = _.map(this.state.profiles, function(_profile) {
                  if(_profile.objectId == profile.objectId){
                    reports = _.map(_profile.reports, function(_report) {
                                if(_report.objectId == report.objectId){
                                  _report.prospected = true
                                  return _report
                                }
                                return _report
                              })
                    _profile.reports = reports
                    return _profile
                  }
                  return _profile
                })
                //console.log(profiles)
    this.setState({profiles: profiles})
    $.ajax({
      url:'https://api.parse.com/1/classes/SignalReport/'+report.objectId,
      type:'PUT',
      headers:appConfig.headers,
      data:JSON.stringify({prospected:moment().valueOf()/1000}),
      success: function(res) {},
      error: function(err) {}
    })
  },

  setCurrentView: function(newSignalView) {
    this.setState({currentView: newSignalView})
  },

  render: function() {
    currentProfile = this.state.currentProfile
    reports = this.state.currentProfile.reports
    reports = (reports) ? reports : []
    reports = _.sortBy(reports, function(o){ return o.createdAt }).reverse()
    //console.log(currentProfile)
    if(currentProfile.name == "All" || currentProfile.done){
      if(this.state.currentView == "Feed") {
        signalView = React.DOM.div(null, 
            SignalDetailButtons({signalType: this.state.signalType, 
                                 currentProfile: this.state.currentProfile, 
                                 setSignalType: this.setSignalType}), 
            SignalsFeed({setCurrentView: this.setCurrentView, 
                         signalType: this.state.signalType, 
                         profile: this.state.currentProfile, 
                         signals: this.state.signals})
            )
      } else if(this.state.currentView == "Calendar"){
        signalView = SignalCalendar({currentProfile: this.state.currentProfile, 
                                    prospectSignalReport: this.prospectSignalReport, 
                                     reports: reports, 
                                     setCurrentReport: this.setCurrentReport, 
                                     setCurrentView: this.setCurrentView})
      } else if(this.state.currentView == "Detail"){
        signalView = SignalsDetail({currentProfile: this.state.currentProfile, 
                                    currentProfileReport: this.state.currentProfileReport, 
                                    setCurrentView: this.setCurrentView})
      } else if(this.state.currentView == "MiningJobCalendar"){
        signalView = MiningJobCalendar({currentProfile: this.state.currentProfile, 
                                        setCurrentReport: this.setCurrentReport, 
                                        setCurrentView: this.setCurrentView})
      }
    } else {
      // Show Calendar Even When Signal Is Loading
      if(this.state.currentView == "Calendar"){
        signalView = SignalCalendar({currentProfile: this.state.currentProfile, 
                                     setCurrentReport: this.setCurrentReport, 
                                     reports: reports, 
                                     setCurrentView: this.setCurrentView})
      } else {
        console.log(this.state.currentProfile)
        if(this.state.currentProfile.type == "prospect_profile")
          signalView =MiningJobLoading({currentProfile: this.state.currentProfile})
        else
          signalView = SignalLoading({currentProfile: this.state.currentProfile})
      }
    }

   return (
      React.DOM.div({style: {height:400}}, 
        React.DOM.div({className: "container", style: {padding:0, width:'100%', height:'100%'}}, 
          React.DOM.div({className: "col-md-3 signal-list", 
               style: { height:'102.8%', padding:0}}, 
              SignalsOptions({profiles: this.state.profiles, 
                              addProfile: this.addProfile, 
                              updateMiningJobDone: this.updateMiningJobDone, 
                              removeProfile: this.removeProfile, 
                              setCurrentView: this.setCurrentView, 
                              currentProfile: this.state.currentProfile, 
                              setCurrentProfile: this.setCurrentProfile})
          ), 
          React.DOM.div({className: "col-md-9", style: {height:'100%',padding:0}}, 
            signalView
          )
        ), 

        CreateMiningJobModal({createMiningJob: this.createMiningJob, 
                              currentProfile: this.state.currentProfile}), 
        CreateHiringSignalModal({addProfile: this.addProfile}), 
        CreateFundingSignalModal({addProfile: this.addProfile}), 
        CreateCompanyProfileModal({addProfile: this.addProfile}), 
        CreateProspectProfileModal({addProfile: this.addProfile, 
                      updateProfileWithObjectId: this.updateProfileWithObjectId})
      )
    )
  },

  createMiningJob: function(theProfile, date) {
    console.log('create mining job')
    var thiss = this;
    report = {
      //createdAt: moment().valueOf(),
      company_count: 0,
      people_count: 0,
      list_type:'mining_job',
      done: 0,
      mining_job: true,
    }

    profiles=_.map(this.state.profiles, function(profile) {
      if(_.isEqual(theProfile, profile)){
        if(profile.mining_days){
          profile.mining_days.push(date)
        }else{
          profile.mining_days = [date]
        }

        if(profile.reports){
          profile.reports = [report].concat(profile.reports)
        }else{
          profile.reports = [report]
        }
        
        thiss.setState({currentProfile: profile})
        thiss.persistMiningJob(date, report)
        return profile
      }
      return profile
    })
    thiss.setState({profiles: profiles})
  },

  persistMiningJob: function(date, report) {
    console.log(this.state)
    objectId = this.state.currentProfile.objectId
    $.ajax({
      url:'https://api.parse.com/1/classes/SignalReport',
      type:'POST',
      headers:appConfig.headers,
      data:JSON.stringify(report),
      success: function(res) {
        console.log(res)
        $.ajax({
          url:'https://api.parse.com/1/classes/ProspectProfile/'+objectId,
          type:'PUT',
          headers:appConfig.headers,
          data:JSON.stringify({
            mining_days: {
              __op:'AddUnique',
              objects:[date],
            },
            reports: {
              __op:'AddUnique',
              objects:[appConfig.pointer('SignalReport', res.objectId)]
            }
          }),
          success: function(res) { console.log(res) },
          error: function(err) {},
        })
      },
      error: function(err) {},
    })
  },

  addProfile: function(newProfile) {
    profiles = this.state.profiles
    this.setState({profiles: [newProfile].concat(profiles)})
    this.setCurrentProfile(newProfile)
  },

  removeProfile: function(oldProfile) {
    this.setState({profiles: _.reject(this.state.profiles, function(profile) {
      return _.isEqual(oldProfile, profile)
    })})

    if(oldProfile.objectId){
      $.ajax({
        url:'https://api.parse.com/1/classes/ProspectProfile/'+oldProfile.objectId,
        headers:appConfig.headers,
        type:'DELETE',
      })
    }
  },

  updateMiningJobDone: function(profile) {
    profiles = _.map(this.state.profiles, function(_profile) {
                  if(_profile.objectId == profile.objectId) {
                    _profile.done = true
                    return _profile
                  }
                  return _profile
                })
    this.setState({profiles: profiles})
  },

  updateProfileWithObjectId: function(timestamp, objectId) {
    console.log('UPDATE PROFILES')
    newProfiles = _.map(this.state.profiles, function(profile) {
        if(profile.timestamp == timestamp) {
          profile.objectId = objectId
          return profile
        }
      return profile
    })
    
    console.log(newProfiles)
    this.setState({profiles: newProfiles})
    console.log(objectId)

    var pusher = new Pusher('1a68a96c8fde938fa75a');
    console.log('new pusher channel ->', objectId)
    var channel = pusher.subscribe(objectId);
    var thiss = this;
    channel.bind("done", function(data) {
      thiss.updateMiningJobDone(_.findWhere(thiss.state.profiles, {timestamp: timestamp}))
      alertify.success("New Success notification");
    });
  },

  setCurrentProfile: function(newProfile) {
    if(newProfile.only_people) {
      this.getSignals('PeopleSignal', 
                      JSON.stringify({
                         __type: 'Pointer',
                         className: 'ProspectProfile', 
                         objectId: newProfile.objectId}))
      this.setState({
        signalType: 'PeopleSignal',
        currentProfile: newProfile 
      })
    } else {
      this.setState({currentProfile: newProfile })
    }

    this.getSignals('PeopleSignal', newProfile)
  },

  componentDidMount: function() {
    this.getSignals(this.state.signalType)
    currentUser = JSON.parse(localStorage.currentUser)
    user = JSON.stringify(appConfig.pointer('_User', currentUser.objectId))
    company = JSON.stringify(currentUser.company)
    qry = 'where={"company":'+company+',"user":'+user+'}'
    qry = qry+'&include=profiles,reports,prospect_list&order=-createdAt'
  
    thisss = this
    $.ajax({
      url: 'https://api.parse.com/1/classes/ProspectProfile',
      type:'GET',
      data: qry,
      headers:appConfig.parseHeaders,
      success: function(res) {
        console.log('Prospect Profile')
        console.log(res.results)
        //thisss.setCurrentProfile(res.results[0])
        thisss.setState({profiles: res.results})
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  setSignalType: function(labelText) {
    if(labelText == "People")
      currentSignal = "PeopleSignal"
    else if(labelText == "Companies")
      currentSignal = "CompanySignal"
    this.getSignals(currentSignal)
    this.setState({signalType: currentSignal})
  },

  componentDidUpdate: function(nextProps, nextState) {
  },

  getSignals: function(signalType, currentProfile) {
    currentUser = JSON.parse(localStorage.currentUser)
    user = {
      '__type'    : 'Pointer',
      'className' : '_User',
      'objectId'  : currentUser.objectId
    }

    user = JSON.stringify(user)
    company = JSON.stringify(currentUser.company)
    profiles = this.state.currentProfile.profiles

    if(profiles){
      //qry = 'where={"company":'+company+',"user":'+user+',"profile":'+currentProfile+'}'
      profile = JSON.stringify({
        __type:'Pointer',
        className:'ProspectProfile',
        objectId:currentProfile.objectId
      })
      qry = 'where={"profile":'+profile+'}'
      //qry = qry + ',"profiles":{"$all":'+JSON.stringify(profiles)+'}}'
      if(signalType == 'PeopleSignal')
        qry = qry + '&include=signals'
      else
        qry = qry + '&include=signals,company'

    } else {
      qry = {'include':['signals','company']}
    }
  
    thiss = this
    $.ajax({
      url: 'https://api.parse.com/1/classes/'+signalType,
      //url: 'https://api.parse.com/1/classes/CompanySignal',
      type:'GET',
      data: qry,
      headers:appConfig.parseHeaders,
      success: function(res) {
        //console.log(res.results)
        thiss.setState({signals: res.results})
      },
      error: function(err) { console.log(err) }
    });
  },
});

var SignalDetailButtons = React.createClass({displayName: 'SignalDetailButtons',
  setSignalType: function(e) {
    this.props.setSignalType($(e.target).text().trim())
  },

  render: function() {
    ppl = (this.props.signalType == "PeopleSignal") ? "choose btn btn-primary app-active" : "choose btn btn-primary"
    cmp = (this.props.signalType == "CompanySignal") ? "choose btn btn-primary app-active" : "choose btn btn-primary"

    cmp = (this.props.currentProfile.only_people)  ? cmp + " disabled" : cmp

    return (
      React.DOM.div(null, 
        React.DOM.div({id: "signalDetailButtons", style: {height:44}}, 
          React.DOM.h4({style: {display:'inline-block',float:'left',width:300,
                      fontWeight:200,marginTop:4,paddingLeft:20}}, 
            React.DOM.i({className: "fa fa-newspaper-o"}), " ",  
            this.props.currentProfile.name
          ), 
          React.DOM.div({className: "btn-group", style: {marginLeft:'0%'}}, 
            React.DOM.a({className: ppl, 
               style: {padding:2}, 
               onClick: this.setSignalType}, 
                React.DOM.i({className: "fa fa-user"}), " People"
            ), 
            React.DOM.a({className: cmp, 
               style: {padding:2}, 
               onClick: this.setSignalType}, 
                React.DOM.i({className: "fa fa-building"}), " Companies"
            )
          )
        )
      )
    );
  }
});

var SignalsOptions = React.createClass({displayName: 'SignalsOptions',
  addProfile: function(newProfile) {
    this.props.addProfile(newProfile)
  },

  setCurrentProfile: function(currentProfile) {
    this.props.setCurrentProfile(currentProfile)
  },

  removeProfile: function(oldProfile) {
    this.props.removeProfile(oldProfile)
  },

  componentDidMount: function() {
  },

  setCurrentView: function(newView) {
    console.log(newView)
    this.props.setCurrentView(newView)
  },

  render: function() {
    profs = []
    //console.log('signals render')
    for(i=0; i< this.props.profiles.length;i++) {
      select= this.props.profiles[i].objectId == this.props.currentProfile.objectId
      profs.push(SignalProfile({setCurrentProfile: this.setCurrentProfile, 
                                updateMiningJobDone: this.props.updateMiningJobDone, 
                                setCurrentView: this.setCurrentView, 
                                currentProfile: this.props.currentProfile, 
                                selected: select, 
                                removeProfile: this.removeProfile, 
                                profile: this.props.profiles[i]}))
    }

    profiles_num = (this.props.profiles.length) ? this.props.profiles.length : "~"
    return (
      React.DOM.div(null, 
      React.DOM.div({className: "list-group"}, 
        React.DOM.li({className: "list-group-item", 
            style: {borderTop:0,borderLeft:0,height:44,paddingRight:5,paddingLeft:10,
                    backgroundColor:'#e0e6ea',
                    backgroundImage:'linear-gradient(#f5f7f8,#e0e6ea);'}}, 
            React.DOM.h4({style: {margin:0,textAlign:'center',fontWeight:200,
                        float:'left',marginTop:2}}, "Profiles (", profiles_num, ")"), 
          React.DOM.a({href: "javascript:", 
             className: "btn btn-xs btn-primary create-profile-dropdown", 
             'data-toggle': "dropdown", 
             onClick: this.launchDropdown, 
             style: {float:'right',
              backgroundImage:'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
            React.DOM.i({className: "fa fa-plus"}), "  Create Profile"
          ), 

          React.DOM.ul({className: "dropdown-menu", 
              style: {marginLeft:175,marginTop:-10}, 
              role: "menu", 'aria-labelledby': "dropdownMenu1"}, 
            React.DOM.li({role: "presentation"}, 
              React.DOM.a({href: "javascript:", 
                 onClick: this.launchModal, 
                 style: {paddingLeft:5}}, 
                 React.DOM.h6({style: {margin:2}}, 
                   React.DOM.i({className: "fa fa-suitcase", style: {width:10}}), 
                  "  Create Hiring Signal"
                )
              )
            ), 
            React.DOM.li({role: "presentation", style: {display:'none'}}, 
              React.DOM.a({href: "javascript:", 
                 onClick: this.launchModal, 
                 style: {paddingLeft:5}}, 
                React.DOM.h6({style: {margin:2}}, React.DOM.i({className: "fa fa-institution", style: {width:10}}), 
                  "  Create Funding Signal"
                )
              )
            ), 
            React.DOM.li({role: "presentation"}, 
              React.DOM.a({onClick: this.launchModal, 
                 style: {paddingLeft:5,paddingRight:2}, 
                 href: "javascript"}, 
                React.DOM.h6({style: {margin:2}}, 
                  React.DOM.i({className: "fa fa-user", style: {width:10}}), 
                  "  Create Prospect Profile"
                )
              )
            ), 
            React.DOM.li({role: "presentation", style: {display:'none'}}, 
              React.DOM.a({role: "menuitem", tabindex: "-1", 
                 onClick: this.launchModal, 
                 style: {paddingLeft:5,paddingRight:2}, href: "#"}, 
                 React.DOM.h6({style: {margin:2}}, 
                   React.DOM.i({className: "fa fa-building", style: {width:10}}), 
                   "  Create Company Profile"
                 )
              )
            )
          )
        ), 
        React.DOM.div({id: "profiles-menu", style: {height:356, overflow:'auto',marginTop:1}}, 
          profs
        )
      )
    )
    );
  },

  launchModal: function(e) {
    e.preventDefault()
    console.log($(e.target).text().trim())
    if($(e.target).text().trim() == 'Create Hiring Signal')
      $('#createHiringSignalModal').modal()
    else if($(e.target).text().trim() == 'Create Funding Signal')
      $('#createFundingSignalModal').modal()
    else if($(e.target).text().trim() == 'Create Prospect Profile')
      $('#createProspectProfileModal').modal()
    else if($(e.target).text().trim() == 'Create Company Profile')
      $('#createCompanyProfileModal').modal()
  },

  launchDropdown: function(e) {
    e.preventDefault()
    $('.create-profile-dropdown').dropdown()
  }
});

var SignalsFeed = React.createClass({displayName: 'SignalsFeed',
  render: function() {
    //this.getSignals()

    signalCards = []
    for(i=0;i< this.props.signals.length;i++) {
      if(this.props.signalType == "CompanySignal")
        signalCards.push(CompanySignalCard({company: this.props.signals[i]}))
      else if(this.props.signalType == "PeopleSignal")
        signalCards.push(PeopleSignalCard({profile: this.props.profile, person: this.props.signals[i]}))
    }
    
    content = (this.props.signals.length) ? signalCards : React.DOM.div({className: "signal-card"}, "LOL")
    content = signalCards

    return (
      React.DOM.div({className: "container signal-card-background", style: {height:356, overflow:'auto'}}, 
        React.DOM.div({className: "col-md-8 col-md-offset-2"}, 
          content
        )
      )
    );
  }
});

},{"./company_signal_card.js.min.js":7,"./create_company_profile_modal.js.min.js":9,"./create_funding_signal_modal.js.min.js":10,"./create_hiring_signal_modal.js.min.js":11,"./create_mining_job_modal.js.min.js":13,"./create_prospect_profile_modal.js.min.js":15,"./mining_job_calendar.js.min.js":31,"./mining_job_loading.js.min.js":32,"./people_signal_card.js.min.js":34,"./signal_calendar.js.min.js":42,"./signal_detail.js.min.js":43,"./signal_loading.js.min.js":44,"./signal_profile.js.min.js":45}],47:[function(require,module,exports){
/** @jsx React.DOM */

theData = require('../lib/data.min.js') 

module.exports = React.createClass({displayName: 'exports',
  // SignUp
  componentDidMount: function() {
    $('body').css({overflow:'hidden'})
  },

  retrieveUser: function(objectId) {
    headers = {
      "X-Parse-Application-Id": "N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ",
      "X-Parse-REST-API-Key": "VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb"
    }
    $.ajax({
      url:'https://api.parse.com/1/users/'+objectId,
      headers: headers,
      type:'GET',
      success:function(res) {
        localStorage.setItem('currentUser', JSON.stringify(res))
        location.href = "#"
      },
      error: function(res) {
        console.log(res)
      }
    });
  },

  signup: function() {
    console.log('signup')
    email = $('#email').val()
    password = $('#password').val()
    p = {
      "X-Parse-Application-Id"  : "N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ",
      "X-Parse-REST-API-Key"    : "VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb",
      "Content-Type"            : "application/json"
    }
    thiss = this;

    $.ajax({
      url:'https://api.parse.com/1/classes/Company',
      type:'POST',
      headers: p,
      data: JSON.stringify({
        'name': $('#company').val(),
      }),
      success:function(res) {
        $.ajax({
          url:'https://api.parse.com/1/users',
          type:'POST',
          headers: p,
          data: JSON.stringify({
            'username':email,
            'password':password,
            'company':{
              '__type'    : 'Pointer',
              'className' : 'Company',
              'objectId'  : res.objectId,
            }
          }),
          success:function(res) {
            // Do another request to get current user
            localStorage.setItem('currentUser', JSON.stringify(res))
            thiss.retrieveUser(res.objectId)
          },
          error: function(res) {
            console.log(res)
          }
        });
      },
      error: function(res) {
        console.log(res)
      }
    });
  },

  render: function() { 
    data = theData()
    imgs_1 = []
    imgs_2 = []
    for(i=0;i < 120; i++) {
      imgs_1.push(React.DOM.img({src: data[i], className: "prospect-img"}))
    }
    for(i=15;i < 30; i++) {
      imgs_2.push(React.DOM.img({src: data[i], className: "prospect-img"}))
    }

  console.log(data)
    return (
      React.DOM.div(null, 
      React.DOM.div({id: "signup"}, " "), 

      React.DOM.div(null, 
        React.DOM.h1({className: "title"}, "Customero."), 
        React.DOM.h5({className: "tagline"}, "Generate high quality prospect lists. Accelerate Sales."), 
          React.DOM.div({className: "panel panel-default login-info", style: {display:'block',marginTop:50}}, 
            React.DOM.div({className: "panel-body"}, 
              React.DOM.form({onSubmit: this.login}, 
              React.DOM.input({placeholder: "Email", id: "email", type: "text", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Company", type: "text", id: "company", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Password", type: "password", id: "password", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Repeat Password", type: "password", id: "repeat_password", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.a({href: "javascript:", onClick: this.signup, className: "btn btn-success btn-lg", style: {display:'block',backgroundColor:'#1ca3fd'}}, "Sign Up")
              )
            )
          )
      ), 

      React.DOM.div({id: "", style: {position:'absolute',zIndex:'-2',top:0,left:0}}, 
        React.DOM.div({className: "", style: {marginLeft:34}}, 
        imgs_1, 
        imgs_2
        )
      )
      )
    )
  }
});

},{"../lib/data.min.js":54}],48:[function(require,module,exports){
/** @jsx React.DOM */

var EditTemplateView = require('./edit_template.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  //Templates
  getInitialState: function() {
    return {
      selectedTemplate: 0,
      editMode: false
    }
  },

  changeMode: function() {
    this.setState({editMode: !this.state.editeMode})
  },

  render: function() {
    templateView = (!this.state.editMode) ? TemplateView({changeMode: this.changeMode}) : EditTemplateView(null)
    return (
      React.DOM.div(null, 
        React.DOM.div({style: {height:'100%'}}, 
          TemplateSideMenu(null), 
          React.DOM.div({className: "col-md-9", style: {padding:0,height:'100%'}}, 
              templateView
          )
        )
      )
    );
  }
});


var TemplateView = React.createClass({displayName: 'TemplateView',
  changeMode: function() {
    this.props.changeMode()
  },
  render: function() {
    return (
      React.DOM.div({className: "panel panel-info", style: {width:'100%',height:'100%',border:0}}, 
        React.DOM.div({className: "panel-heading"}, 
          "Template Name",  
          React.DOM.a({href: "javascript:", 
             onClick: this.changeMode, 
             className: "btn btn-primary btn-xs", 
             style: {display:'block',float:'right',marginTop:'0px'}}, 
            React.DOM.i({className: "fa fa-pencil-square"}), "   Edit Template")
        ), 
        React.DOM.div({className: "panel-body"}, 
        React.DOM.h4(null, "Followup - Prospecting SAAS Outreach"), 
        React.DOM.h6({style: {marginBottom:'0'}, className: "text-muted"}, "Created by Mark on Jul. 21, 2014"), 
        React.DOM.h6({style: {marginTop:'0'}, className: "text-muted"}, "last updated 7 days ago"), 
        React.DOM.br(null), 
        React.DOM.br(null), 

        React.DOM.div({className: "panel panel-default"}, 

          React.DOM.div({className: "panel-body"}, 
          "15 minutes to get company_name more customers" + ' ' +
          "Hey first_name," + ' ' +

          "Would you like to hear an idea for a 15 minute hack that could significantly increase the number of prospects your sales people have access to ?" + ' ' +
           
          "Recently one of our B2B clients saw a huge increase in trial sign ups after working with us. first_name, lets schedule a 15 minute call this week to see if this would be a good fit for both of us." + ' ' +
           
          "What the best time for you this week ?" + ' ' +
           
          "--" + ' ' +
          "Mark" + ' ' + 
          "Customero" + ' ' +
          "mark@customerohq.com"
          
          )
        )
      )
    )
    );
  },
});

var TemplateSideMenu = React.createClass({displayName: 'TemplateSideMenu',
  getInitialState: function() {
    return {
      templates: [],
    }
  },

  componentDidMount: function() {
    //Ajax Request For Templates
    /*
     $.ajax({
      url:'',
      headers: "",
      data: "",
      success: function() {
      },
      error: function() {
      }
     });
    */
  },

  render: function() {
    templates = []
    for(i=0;i< this.state.templates.length; i++)
      templates.push(React.DOM.a({href: "javascript:", className: "list-group-item"}, "templates[i].name"))
    return (
      React.DOM.div({className: "col-md-3", style: {padding:'0', borderRight:'1px solid #ddd',height:'100%',textAlign:'center'}}, 
        React.DOM.div({className: "panel panel-default", style: {border:0}}, 
          React.DOM.div({className: "panel-heading", style: {height:60}}, 
            React.DOM.span({style: {float:'left',fontSize:20,fontWeight:'bold'}}, 
              "Templates"
            ), 
            React.DOM.a({href: "javascript:", className: "btn btn-success ", 
                style: {float:'right'}}, 
              React.DOM.i({className: "fa fa-plus"})
            )
          ), 
          React.DOM.ul({className: "list-group", style: {textAlign:'left'}}, 
            templates
          )
        )
      )
    )
  }
});

},{"./edit_template.js.min.js":20}],49:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  //TemplatesMenu
  toggleTemplateEditMenu: function(currentTemplate) {
    this.props.toggleTemplateEditMenu(currentTemplate)
  },

  createTemplate: function() {
    this.props.toggleTemplateEditMenu({
      name: '',
      body:'',
      subject:'',
      editMode:true,
      newTemplate: true
    }, true)
  },

  render: function() {
    //console.log(this.props.templates)
    templates = []
    for(i=0;i< this.props.templates.length; i++) {
      templates.push(
        TemplateListItem({
          toggleTemplateEditMenu: this.toggleTemplateEditMenu, 
          template: this.props.templates[i]})
      )
    }

    return (
      React.DOM.div({className: "", style: {padding:'0', borderRight:'2px solid rgba(0,0,0,0)',height:'100%',textAlign:'center'}}, 
        React.DOM.div({className: "panel panel-default", 
             style: {borderRight:0,borderRadius:0,height:'100%', overflow:'auto'}}, 
          React.DOM.div({className: "panel-heading", style: {height:40}}, 
            React.DOM.span({style: {float:'left',fontSize:14,fontWeight:'bold'}}, 
              React.DOM.i({className: "fa fa-file-text-o"}), 
              React.DOM.span({style: {marginLeft:5}}, "Templates")
            ), 
            React.DOM.a({href: "javascript:", 
              className: "btn btn-success btn-xs", 
              onClick: this.createTemplate, 
                style: {float:'right'}}, 
              React.DOM.i({className: "fa fa-plus"}), 
              React.DOM.span({style: {marginLeft:5}}, "Create Template")
            )
          ), 
          React.DOM.ul({className: "list-group", 
              style: {textAlign:'left'}}, 
            templates
          )
        )
      )
    )
  }
});

var TemplateListItem = React.createClass({displayName: 'TemplateListItem',
  toggleTemplateEditMenu: function() {
    console.log(this.props.template)
    template = this.props.template
    template.editMode = false
    this.props.toggleTemplateEditMenu(template)
  },

  render: function() {
    return (
      React.DOM.div(null, 
        React.DOM.a({href: "javascript:", 
          style: {borderBottom: '1px solid rgb(221, 221, 221)',paddingTop:5,paddingBottom:0}, 
           onClick: this.toggleTemplateEditMenu, 
           className: "list-group-item"}, 
           React.DOM.span({className: "label label-default"}, 
             this.props.template.name
           ), 
           React.DOM.h6(null, "Subject:", React.DOM.span({className: "text text-muted"}, 
             " " + this.props.template.subject
           ))
         )
      )
    );
  }
});

},{}],50:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // TimelineDayElement
  // TODO
  // - add prospect list progression
  // - add scheduled followup
  //

  addFollowup: function() {
    this.props.addFollowup(this.props.dayCount)
  },

  render: function() {
    batchCount = this.props.batchCount
    batchStage = (batchCount) ? BatchStage({batchCount: this.props.batchCount}) : ""

    if(this.props.addTemplateMode) {
      mode = EditTemplate({addFollowup: this.props.addFollowup, 
                           saveFollowup: this.props.saveFollowup, 
                           removeFollowup: this.props.removeFollowup, 
                           dayCount: this.props.dayCount, 
                           templates: this.props.templates})
    } else {
      mode = TemplateFollowup({currentTemplate: this.props.currentTemplate, 
                               editFollowup: this.props.editFollowup, 
                               dayCount: this.props.dayCount, 
                               removeFollowup: this.props.removeFollowup, 
                               setCurrentTemplate: this.props.setCurrentTemplate})
    }
    mode = (this.props.elementType) ? "" : mode
    addFollowup = (this.props.elementType) ? this.addFollowup : ""

    return (
      React.DOM.div(null, 
        React.DOM.div({onClick: addFollowup, className: "day", 'data-trigger': "manual"}, 
          "D"+this.props.dayCount
        ), 
        batchStage, mode
      )
    )
  },

  setCurrentTemplate: function(template) {
    this.props.setCurrentTemplate(template)
  }
});

var TemplateFollowup = React.createClass({displayName: 'TemplateFollowup',
  // EditMode False

  setCurrentTemplate: function() {
    this.props.setCurrentTemplate(this.props.currentTemplate)
  },

  render: function() {
    return (
      React.DOM.div({className: "followup-placement arrow_box_1 tmp_2"}, 
        React.DOM.h6({style: {width:130,display:'inline-block'}}, 
          React.DOM.i({className: "fa fa-file-text-o"}), "  ", 
          (this.props.currentTemplate) ? this.props.currentTemplate.name : ""
        ), 
        React.DOM.button({className: "win-btn btn btn-success btn-xs", 
                'data-target': ".bs-sendEmail-modal-lg", 
                onClick: this.setCurrentTemplate, 
                'data-toggle': "modal"}, 
          React.DOM.i({className: "fa fa-paper-plane"}), " Send"), " ", 
        React.DOM.button({onClick: this.editFollowup, 
                className: "win-btn btn btn-default btn-xs"}, 
          React.DOM.i({className: "fa fa-pencil"})), " ", 
        React.DOM.button({onClick: this.removeFollowup, 
                className: "win-btn btn btn-default btn-xs"}, 
          React.DOM.i({className: "fa fa-trash-o"}))
      )
    );
  },

  editFollowup: function(e) { 
    e.preventDefault()
    console.log(this.props.dayCount)
    this.props.editFollowup(this.props.dayCount)
  },

  removeFollowup: function() {
    console.log('remove')
    this.props.removeFollowup(this.props.dayCount)
  }
});

var BatchStage = React.createClass({displayName: 'BatchStage',
  // Different Stages of People Added to Prospect List
  render: function() {
    return (
      React.DOM.div({className: "followup-placement arrow_box tmp"}, 
        React.DOM.span({className: "badge"}, 
          this.props.batchCount
        ), " ", 
        React.DOM.h6({style: {display:'inline-block'}}, 
          "prospects in the sales cycle.")
      )
    );
  }
});

var EditTemplate = React.createClass({displayName: 'EditTemplate',
  // Edit Mode - True
  render: function() {
    options = []
    for(i=0;i< this.props.templates.length; i++) {
      options.push( React.DOM.option(null, this.props.templates[i].name))
    }
    return (
      React.DOM.div({className: "followup-placement arrow_box_1 tmp_2"}, 
        React.DOM.h6({style: {width:55,display:'inline-block'}, 
            className: "text-muted"}, 
          "Choose :"
        ), 
        React.DOM.select({className: "form-control input-sm", 
                id: "chooseTemplateForFollowup", 
                style: {display:'inline-block',width:127,marginRight:5}}, 
          options
        ), 

        React.DOM.button({className: "win-btn btn btn-success btn-xs", 
                onClick: this.saveFollowup, 
                style: {marginRight:5}}, 
          React.DOM.i({className: "fa fa-check"})), 
        React.DOM.button({className: "win-btn btn btn-default btn-xs", 
                onClick: this.removeFollowup}, 
          React.DOM.i({className: "fa fa-trash-o"}))
      )
    )
  },

  saveFollowup: function(e) {
    //get template from currentTemplate
    e.preventDefault()
    chosenTemplate = $('#chooseTemplateForFollowup').val()
    console.log(chosenTemplate)
    for(i=0;i< this.props.templates.length; i++){
      if(this.props.templates[i].name == chosenTemplate){
        chosenTemplate = this.props.templates[i]
        break
      }
    }
    console.log(chosenTemplate)
    
    this.props.saveFollowup(this.props.dayCount, chosenTemplate)
  },

  removeFollowup: function(day) {
    this.props.removeFollowup(this.props.dayCount)
  },
});


},{}],51:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // UserProspect
  getInitialState: function() {
    return { }
  },

  clickCheck: function() {
    domNode = this.getDOMNode()
    isChecked = $($(domNode).find('input[type="checkbox"]')[0]).prop('checked')
    //console.log(isChecked)
    this.setState({checked: isChecked})
    this.props.checkboxAction(isChecked, this.props.prospect.objectId)
  },

  rowClick: function() {
    $($(this.getDOMNode()).find('input[type="checkbox"]')[0]).click()
  },

  keyboardClick: function() {
    $($('.keySelect').find('input[type="checkbox"]')[0]).click()
  },

  componentDidMount: function() { },

  render: function() {
    keyboardSelected = {borderLeft:'7px solid rgba(0,0,0,0)'}
    thissss = this
    if(this.props.keyboardSelected) {
      // Adjust Scroll depending on where the prospect is
      keyboardSelected = {borderLeft:'7px solid #0096ff !important'}
      Mousetrap.unbind('x')
      Mousetrap.bind('x', function() { 
        thissss.keyboardClick()
        if(thissss.state.checked)
          console.log("lmao")
      });
    }

    prospect = this.props.prospect

    if(this.props.masterCheckboxChecked && this.state.checked)
      checked = true
    else if(this.props.alreadyChecked)
      checked = true
    else if(this.state.checked)
      checked = true
    else if(this.props.masterCheckboxChecked || this.state.checked)
      checked = true
    else
      checked = false

    //console.log(this.state.checked)
    //console.log(checked)
    //{prospect.employeeCountRange.name + " employees" }
    
    color = {}
    if(this.state.checked || this.props.alreadyChecked)
      color = {backgroundColor: '#eef8ff'}
      
    rowCl = (this.props.keyboardSelected) ? "prospects-tr keySelect" : "prospects-tr"
    websiteBtn = (prospect.websiteUrl) ?  React.DOM.a({href: "http://"+prospect.websiteUrl.replace('http://','')}, " ", React.DOM.i({className: "fa fa-globe"}), " ") : ""
    
    prospect_email = prospect.email
    if(prospect.email == "no_email"){
      if(prospect.email_guesses) {
        //console.log(prospect)
        // Get First Untried Email ther
        prospect.email_guesses = prospect.email_guesses.reverse()
        guess = _.findWhere(prospect.email_guesses, {tried: false})
        name = this.props.prospect.name
        vars = {
          first: _.first(name.split(' ')),
          last: _.last(name.split(' ')),
          fi: _.first(name.split(' '))[0],
          li: _.last(name.split(' '))[0]
        }
        console.log(guess.pattern.pattern)
        prospect_email = Mustache.render(guess.pattern.pattern, vars)
      }
    }
     prospect_email = (prospect_email) ? prospect_email.toLowerCase() : ""

    return (
      React.DOM.tr({className: rowCl, 
          onClick: this.rowClick, 
          style: keyboardSelected}, 
          React.DOM.td({style: color}, 
              React.DOM.input({type: "checkbox", 
                     onChange: this.clickCheck, 
                     checked: checked})
          ), 
          React.DOM.td({style: color, 
              className: "fixed-data-column"}, 
            React.DOM.span({style: {fontWeight:'bold'}}, prospect.name), 
            React.DOM.h6({style: {fontWeight:'400',margin:'0px'}}, 
              (prospect.pos) ? prospect.pos.trim() : ""
            )
          ), 
          React.DOM.td({style: color, 
              className: "fixed-data-column"}, 
            React.DOM.span({style: {fontWeight:'bold'}}, 
              prospect.company_name
            ), 
            React.DOM.h6({style: {fontWeight:'400',margin:'0px'}}, 
              (prospect.employeeCountRange) ? prospect.employeeCountRange.name + " employees" : ""
            )
          ), 

          React.DOM.td({style: color}, 
            React.DOM.h6({style: {margin:'0px'}}, prospect.city)), 
          React.DOM.td({style: color}, 
            React.DOM.a({href: "mailto:"+prospect_email, 
               style: {margin:'0px'}}, 
               prospect_email
          )), 
          React.DOM.td({style: color}, this.props.li, " ", this.props.link), 
          React.DOM.td({style: color}, 
            websiteBtn
          )
        )
    );
  },

  deleteProspect: function() {
    this.props.deleteProspect(this.props.prospect.objectId, 'Prospect')
  }
});


},{}],52:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  checkboxAction: function(e) {
    checkboxVal = $(e.target).is(':checked')
    this.props.masterCheckboxChanged(checkboxVal)
  },

  componentDidMount: function() {

  },

  render: function() {
    return (
            React.DOM.tr(null, 
              React.DOM.th(null, React.DOM.input({type: "checkbox", onChange: this.checkboxAction})), 
              React.DOM.th(null, "Name"), 
              React.DOM.th(null, "Company"), 
              React.DOM.th({style: {width:'170px'}}, "City"), 
              React.DOM.th(null, "Email"), 
              React.DOM.th(null, " "), 
              React.DOM.th(null, " ")
            )
    );
  }
});

},{}],53:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  //SideMenuListOption
  getInitialState: function() {
    return {count: '~'}
  },

  componentDidMount: function() {
    // make ajax request to get each requests 
    /*
    list = {
      '__type'    : 'Pointer',
      'objectId'  : this.props.list.objectId,
      'className' : 'ProspectList', 
    }

    parse_headers = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
    }

    thiss = this;

    //console.log(this.props.list.name)
    $.ajax({
      url:'https://api.parse.com/1/classes/Prospects',
      type:'GET',
      headers:parse_headers,
      data: 'where={"lists":'+JSON.stringify(list)+'}&count=1',
      success: function(res) {
        thiss.setState({count: res.count})
      },
      error: function(err) {
        console.log(err)
      }
    })
    */
  },

  changeList: function() {
    this.props.changeList(this.props.list.name, this.props.list.objectId)
  },

  render: function() {
    listName = this.props.list.name
    propsCount = this.props.count
    count = (typeof(propsCount)== "undefined") ? this.state.count : propsCount

    //console.log(this.props.iconType)
    icon = ""
    if(this.props.iconType == "archive"){
      icon = React.DOM.i({className: "fa fa-archive"})
    } else if(this.props.iconType == "users"){
      icon = React.DOM.i({className: "fa fa-user"})
    } else if(this.props.iconType == "wifi"){
      icon = React.DOM.i({className: "fa fa-wifi"})
    } else if(this.props.iconType == "cloudDownload"){
      icon = React.DOM.i({className: "fa fa-cloud-download"})
    }


    countStyle = (this.props.hideCount) ? {'display':'none'} : {backgroundColor:'#999',float:'right',marginTop:'1px'}
    return (
      React.DOM.button({type: "button", 
              onClick: this.changeList, 
              className: "list-names btn btn-default"}, 
              icon, 
              " ", 
              listName, 
              React.DOM.span({style: countStyle, 
                className: "badge badge-default"}, this.props.list.count)
      )
    );
  }
});


},{}],54:[function(require,module,exports){
module.exports = function () {
  return {"0":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/8353a3fc05724cbe45e8c23b347a39e7_0994d458faff1d0b71f0f8e534299335a5765ba4a672ed817669729f6a0a1e9d","1":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/107fc2691bb8b3333ba78a18600fa561_9a832b2e27c2aa8ce6ed12c62fb665939e4de38f30ec9bebd92f813ea677f8c3","2":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/4432a5df98c5ead32ca3ec898e175c90_f93ef0a7ddba9ac960c6a15941a69a124a5d5961fde34455cb7cee6c97f712ba","3":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/229580b716606a4eb2142b1eaaca10e7_2398d5050e191d15ff5cf9eb68cc683690c06d3949345dbf790394437a465c08","4":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/499d8a863d7872d6e239512124af9ddc_771182dc7b6c0801de6e571deed89b437ab122372b547e1f7d8dacae9cb17275","5":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/a9e97a6445a8ac187561310b16b4bbd8_96ce9289fd8e6f2a6bf262b4baf548367ad7f53aac9a9ec1157020465de07e67","6":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/35af508daa4a580806961236bfb743a1_1a4afe2656f8d95e3717751f96a0c6ce6c5b1d25920f4d45e5cfe9bba05de0c8","7":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/a1003503ef5e2254e6694eebbd2b4499_a8cd2caefe691476e3f02351369dc2c07c1a3d6ce0f87b187f58fdf4b20292c5","8":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/01dcb5278f55225b7e9c0cff6aa3d6e6_b40f92b9c5ef3b8c81d478bb70b7a094f076ed59b7d36d7a6401f0fd9d95eacf","9":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/61d79e3c25105099f73668c625ea361c_1d7c1255968258c03d0564e141284b4bddbd2db52091cf8d75cb384b23949390","10":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/ca808450a6222c9b09d5b86924a08fbb_f90e02c1e981e5f6caf8af76fefef7653d0a451da51ba5a22ac0f265874bc6cb","11":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/97de93a99b8a9159dede2b9ff17c7887_3e90df8e7894c0c12963abf2fadb205e44365f58b537f15b677a4a7e9c557bcd","12":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/9bf8404d673c9d6178f23548caa4c9a4_46606dba9df4d10cf282fa7add23e8a87b7f976d0e3a153fad0ff181e1be4e17","13":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/7f3a4754a634fc1e39090c5dd6c46808_42d3294b34c4ac9c6f99f66bc3ad9a195d20e98b09c7579fe341d0cf42f9c93f","14":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/b4bebbfbfbe47e50f435b4c2efe0db0f_181a3119f12fd03b6bb517352c636508497bec61f9078b0e281515efd192b345","15":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/ec1f6190e2b9a80a3f7cf101649ccc63_0026017f4380585a2e540f05936a6f58fe725fe7e8e0378aae98039628c4bdf2","16":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/9dd921f41fa8d4ab29bcc1c45348b5a2_158df8a22c1f1570e8a2c17ab5e30169248030593665fbd8792f5f2f01516290","17":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/b9786c9b56c94caa13e74d59b9a9da48_1f195fbcdf95c0d2618d571e0192ff1be2e4921d88aed8b7b9fd9e1444749271","18":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/aa8577f878858f318858aced5abd037f_cb926a07d0e468660e3569279cc1354aa7243cdc951f970325273993c89e9ee7","19":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c11b322d8a8007037ee3e3242b260930_2a63c13b315a38b069f38da657b189aad6c7af5941a19859111dfb3c70c94b41","20":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/19b6c3989a808be845718d8af24352ff_a8e72abb2b5772706ac1c79e5cbaf59b3c2f20efb0aca9b93d04ae8a24920967","21":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/f4120970a686a56b4759585808177cc7_8e175e495b1de922ccd9a92a5de97b95433444aca422b3e632c2ea4ed48d3bc9","22":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/aee7e40b2dd4c4c9961323d98249c826_c1c387c714e89d5dfccf06d3fe0fed332992eff877cdbd60bc4e94e7a2ed38ff","23":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/66d18bafff4f9b8d077c107bb73b2912_f8055289eae58fad00cc0f6727b2b5cf0f72b837963351b7ca6250ba4e2632a1","24":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/2da8546c3b6a99b191249ae69207e31a_db86681331d0d2b9850e5596ce7711ac386f4e1469c526934267978af3498338","25":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/5617f7787cdf0176e54c4f13e9ccc54e_da7cc169f46585de72acf5f705cd34a52c688a40dc8aa72ea720d556a7022f72","26":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/f7e2712aa8cfab88c55d1f6c78ef2e45_5c895ca06f40e30369e07b19c64b7bf1fe5be0977e5bbfc0c2212b73ea6e6512","27":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/29ab72c2b97b25c4e3e1c280e3264f80_069b94caad3b14e2bb3b2012a51d94ed8e476f0a3d9a368aac36db9d716a12af","28":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/ee17a7d90c8065a3abcd0a6720b52e66_3b9938c2693e142ba37065de24dabec556a192add4b84b4f29785cea3b74853f","29":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/16f61ebf1810ac333f7c936ce711b28a_35d43f3d1c762b21d629634b4584d0cd95aecdfd9a3087f24a9eb729d134b769","30":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/e318ccc5121cfeb3b99c21d055e6ece9_edc606d4bcd3d76f8e45da96d9dbd651bf0c067a7ca159e1073e3b44b03530c9","31":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/df9c90f2b93a9e488d94fe52725bd798_3b0e3396d9dea866960d8ce6f67af10c8809f154b6831fc278b8ed34390a9f27","32":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/6eee357d121c814a97b6362c4e55526a_cbff4ac439c2054813dea8da8b8f1ec3b5e0c644acf0dc2ae625741e97f0bea0","33":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/560aed1bee8e220f0980190dedb7add6_9ad2de7c6ebfdd724f2a17c85efd5192f8393a477dddf0a0c8c9260e17d5a515","34":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/850f1242ddd6539ad8b27f69908c7f9e_08ffecd2b6d184e7d70ab70abbbbabe7132269250c93dbbdcba7f22e86f0692e","35":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/075c06c481eea429f6cc816697fcbbf8_c55b99be050bdcb1f32c9578cb8e17f6f4d6f200c1f37f528c24fee65a26182a","36":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/028b3110aa60554e7434f1a2473229cf_d15e1c7f00c82755e144773d46bb4e0e964fcfa425a254ca05ac1313fcea3bae","37":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c3719f85d24bafef64eada64e735ca73_025880c51ff42bd3ff79ba35d456d8cb14b6fbc7ee17ba3b98612e71aa1d74b9","38":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/22356ab6ae4467c44a074a4134bad937_a9909c37e6e23b4343ce19582c9118cfb3748b8977f1db8230aa992d640f1217","39":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/2132e5a2fcd89a54e7c42c5fa0b8ef77_ff0dc46511b150a4b0af9cdf866af2e06ce898d7119b7ab21350e0b3304d8065","40":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/45aaa73b693aeec414b34fd44262ef8f_51c22532abe0b615f0e6e3c0e91cb1a9bca41a6f6c0ec6f33c3693d128fd1755","41":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/57bc2d1a2ab692e38284f3550f58b381_03bd441172001e3c2e5084f3390ee0ca0327b502b0c1dc794c8c8ac2b3d2130e","42":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/4745ad07807ccad97e0726fc7ba18170_48911a727474c0398c3fc701880d623faedc592f16677310f8e8111a25e2be37","43":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/cd1594c62a31c831d124e286b6909700_0cd9d060392c5f5d575f29a8930c55c69a54501c1d7636929682c38e4e069d5e","44":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/1f3db7712313a3bcfe5ff4a99b67fcdf_a66bec0a43179531bce8020aaade3d85967b7c9df54ab2bdf41f12f6cd60d3ef","45":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/2643e008752dbffd17cd7e4cea30bb08_867fd9b76c5342b914bd9b285756ac10cf04e1b3ad8cb6524a2c96d7ab75c07a","46":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/d89fd2959f9efdcf70778801253a4920_97a906684f843e8ea3f3237797adc601c4d20dfcc79e7b6e756630206312fe89","47":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/d0b7922821c73bb34357b9a7bbf2267c_d63a4e4655665268ea92da08063c95f309646f9698125b318b0621487b906ca4","48":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/b76f8da9538eea9eb4d897656f4aed8b_f49ffb97513493d056f42fe316650f1fb507fc1ebe7a04ad8454fd2b58c50ea7","49":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/190285c653fe1d18db3257eeaf4be43b_60aac5615b8c09ff3cfc840eafbb0208a8dc4824d942df10637ed1dc43198896","50":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/bdee1144909768544fb2165d5e053e65_01eeb0b68fbe038b33bd0d952ce60590b2ff52c32da32bceee518652a89e8140","51":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/67f3816ffae3f72be42a7853607ff545_9b77f7ee9ed399fe77664a0c6cded309a14187ed325b7dace9b74f58d384fa70","52":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/4314b6591ccecaa3eb265e4e890021f5_135f42ac525c7160c6680d99d08463cca4f4f86b4a0a11252b26c57f7f6552e2","53":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/dc2498a2210f5c8dfc938909670ba68f_bb4edb324aeb76f4809d2f2ffef036815497400fd276f836d923e7e0999c3552","54":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/8ea2f8aecb65bcc3cec691be061822a6_c9e8cc4ff670def26a2014b4658f561bb39af755727ab31a04b66c703faa6bfc","55":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/cc6220508d6b50993e8cb49e6c072a3a_266d57d40828595dcf9964076955242cbc6d9cdc78bbc323ba39f0883c05fda8","56":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/6d200ee39f4096f49b523d98d8536b03_0e0d1927f658b14ff35a24c9d8fc693190c9f739a6d14b3638a69e901b1a494c","57":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/deaf0d4d4431d6bb2dcc6bda12575dc8_786be7e8e3573170e142d1c3974f18d6d69d4c4dd3ca06593467f2f53f831895","58":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/ebf339b29639355c01a7e1d0c9055ba3_0c2c6354af58c71eee179f772b8f9c9556111c042eddec488642205fce901f6a","59":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/adf758a8dc032239d05c2bf30a4a0edf_1de695275aaf84c5d9624872efacc21f2bb35d76907c032789f0a8a91007a751","60":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/fcfd73b6e3eb5a9e249b379a6f559fc7_7f12feeefb777c52da2c175bfc33dd19db40749b388af435f4a68c0f06b4f9ad","61":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/3c82d08bca770099bb1fcdbda21484ea_4b1b1a31571711440446327a37327cf86685307f7dd58ad26a5b564b384d54c9","62":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/da085ddf61fabfc523a6d5bc22ea305b_f198dc476413ae524e230ebcd428f4649509a64794bb12dfde0d8fc2d9cf8782","63":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/510c57ac818d053701321d16cfed8b3e_74210d99aa6597b227fe521b0c7e128b66510da6b2cfbd67f4d0d0f8be7a1c12","64":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/40122334960a5954255cca87d01ba5ae_1d6fa7ab07a15df79e4c61cec5a369e6e7dcc7e57ebfd52fd937630e056dbf32","65":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/281bc010da64604545531ca4074eda2e_91c47782e1e7e19e58d3d5da9e43c1c53505a145de4adcd22931721f951edced","66":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/1f0306ac15f2a11707fb6637b64ab5bc_bbf75d7a31aff638916b154d263b2fa1af9f3f53ef3124e5d470289b1b4dc5c4","67":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/99147b426f02ea63f52d7b9096bfba95_2af91854e89a8214667222ea871d98eb8c1ccaf4969ec129356be0fce2eeca51","68":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/ecebb17e5ca23da7f420fa357472bf3e_9dcc92e6966d688c956e1e6a0abf42499687f9e82b82a2499d56bb93a59b2bd8","69":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/aa968d512815321b5c74af48f3d53c3d_74f7b92a66f45f8e050a46f94cb675db7fc257acefed7ced6fe85a82caa93139","70":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/2451efa39cb6ee7576b41e14b907925a_f48ec903ab22812a385743625e972e76773bdbd3e323c73689f27eccaa9d90bc","71":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/6eca5c460748018fe91f919d35f1de02_2116d7e9c833021c7fb58237db1e8abd3e37a32f652e5449feb94cd287ca63cd","72":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/d233d65df2a27b4e6c177ab37f726c33_cea7dbcb7770a9798a49fce3a8d55689c6b79ad710e8f3aa0121bcabd9b0176b","73":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/0632159435e67bdd2a5ffd68471361f0_b7711b96d49bfe07ba4c6a9700618c69425c667999209ccbd7575925805b0b5b","74":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/1f6edebd5597bae7da63e7ad86214ccd_0bcc5ee18a9539043524fdad5d9cbdb527514143e755a1a05169e05e06c37941","75":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/31874c12d9df2dfd89cb6a446bdc4042_611644e0e6bd66f29270be999af5d4aee37a5898d93dd41c46dee111f4e63fa3","76":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/95bad31c8127deef8aef7a8c0d96285f_05b558b86db9ed61bdb134e7e32e56ddea960d18067c4d44cb7b207ceb592e5b","77":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/e1a21b6a465ba8c05aec97fa7568efb5_888ab8ab424a32a58b00808ca2f716b903993a7d076b4925c52117a2467ff04b","78":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/d8c25b3ed91a8fc91f93ac56377c9dcc_72afd96cb39f5d07ea286361edb264627d1f234e871ce48371dca57bc44c7a82","79":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/95b193e0db0f8965de5c70a5b96bb071_4b587a38a5b3b5f2eb6ad37d745531e723edc07e38eb6d4cfec3a9386f65b1e8","80":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/90b3da7e62bbd996b722975a3230f0f3_b3e89ebe3a0f9d1a6508771e1108627885b5df79377b291413a35284cc506f5e","81":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/3242156353c906577e9ea40f92139719_76cb67bcb821ef4a83b4796832b15d3ab4402627534de36c3ff592ba0e0cacb0","82":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/a4beb634fb972ef9caefecf47527e345_a18d6851882d03d4370fa12c866fcd91caa907b0cd2263a722378c399fb592b5","83":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/0447cd25e4515569c3b613bc4bd88a05_c3656ddbbf5dfc84e44c3616cfad41267c8d730e00db5918ccc77573fac07d49","84":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/1e01a4ecbeb9ca46a63b745c6a2e462d_3ebbbab14df0e2db43a2948c0298ad67ded53029efe9aba6bd40b3fd99d5aa18","85":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/559c502aea7aab4a11e121743c9d7c43_69caccfee49f747e72a4768ad4274c8b6875848e9ab7b2c8517e209d36bdfb32","86":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/b27a3afa95d849b7375a304769bd3bf3_acada7bbca2083ce55ab119e88666ca0ae10a4aac448ad5d7f45edf0077897a1","87":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/de24ae6e6b531bad57c37bffcac1954d_2c15f3da3593c9526078bb80bc7faa66ec081b1ccaea231b5c259bdb827f6fd8","88":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/7375a308c764e405f92ab9d943942949_6b7b392f5694abcfbb70daf458c22369db2f9b890583e3e2d713b046cd84ec89","89":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/a1fc8b4cb5e89f1dc3ed74ec8bafc3a5_4d0efc716f3f2cb7bda689e5daa7ba5d954ee54a8f94f7755b303043970b1d99","90":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c4f7d2b628c661d1baad6ff1f4722da8_149e2b6f3ad488d10fce67144ccee6b66519d9d7f8482a1ff0c9ae627f1ddbca","91":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/09459647f3928e77752449f418a85c27_7a704f8cfaea62a1953dfd1e345eb6e3aee02114189f186f0181bff3a7e77fe6","92":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/655a7db862ccdfa162b6ea0dffa3ef1e_6eb133e705878e640a427b664656189f1ea9330285133e4a73a943a097606da6","93":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/434d82b430279d26bcdd9bd13ddec76f_5cbad7d7eb6740debc9e2e3c1b7197f861b705e6e74379307a5bc900d75250f5","94":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/142e64b0535a2b0c3bb5253c0d2266a9_6c7403cda6f8dc61eb9d2b32d37f608c34c641101d6a2f35c073907898a7e4ae","95":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/3f8790f1134f0514af3d2bbc05209060_6377e5dcdf0d232f1aa8139022b8c9280f8b4297f70efff3e0f7d52417c1eb23","96":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/220a705290eb7adbcdf052ddb2d11c99_06374d8546d5c745671d98686f1b4b0dd31d777b1c7bcdd0e6dfe63d0a23e719","97":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/51249bb6f506e42e17bf9241ef88b6b2_c1221205f854390df1d21aa05e5d0de264b1b953c659a10c18478cfd7f755efd","98":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/284c00b5ff1189d2bddf67df408edc4e_01c1917a244fcadf0bfd3933af21c684dd90ca274111248212025361d855ab39","99":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/37483ffe36725e05af0954a5d9a55a26_daf0a2f0e10c98c2b72be9c0da24b38322f0f956733a42565365ee615568ba07","100":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c6b03531fed44f96acecab26828fbe37_30393b6fa3096a74bfa51cad1cb58f7660848263f01f2f7d2e12dae3a5b1c3ed","101":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/5dc9345ee6092ca006f777b42b34e853_df13ad7c61407d1a00e261fcd5fcd93c16e1a0c1be13d0903d76a21a89cd3459","102":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/1dbef9840938d5e30563c3f844b9ebac_12fe10df66a6ee48bffe72578a6f42d340ff0b4f75d4fe65f6bed2b75841e978","103":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c3af292a916339e6c57ba0d03712a445_273c38be422269a46466d48494c513daf53b3a66440b6401c94c37f1e55070c2","104":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/b44ded0b090097528af2c4ad694c2a40_3f5ed56c662da89e1e0f3ae62a67f9e14ea2384f2985277b1cdfa6ebfe1d18c9","105":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/df8ea86906de307c52cb9cf3b2228043_312bdbd9536ec36e42d8328def8af1afcaaf3f705917a628ea4add00ba77b8b5","106":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/6846f61d6bfcf77aecd7206c6adb5be9_64e149247e52e86b671fdd2b71ac27852d54ae6eb6f4059458bdb1161f300dac","107":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/ef4a1765911453dcae8e4bdd5d3203a1_321cf3bc8710a6a19576dfe93677def4666da0b4744489c26aa44f75a753333e","108":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/dc381f9e0b6193e8be5d94595ed1c4b7_d612afde7baf43ac5daeae9e0efe42781867bc3451e3e8814253cbfc4410bb4a","109":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/9579d5dd8523c493e0590e3881e25041_106c39b7e97fdd57abb992ec7ff7c0f0b15f0f83a348e3a3698e3fcbdcdf2836","110":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/95cfda0cb7bfaac0fc789cf05c7e513e_a509049aea02886eb409c53a15e03a6cf5eb6583120267bbca75c2206027c0b1","111":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/6e05daaab9a81a2ea5348b70833bdfb6_023eb1e947686aef7764a3ce4c9683b47d2235c51a031e36b947e4398ef6906d","112":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/d29d4fcb1b25a9d424a12800869a3b65_991d563880a3345073ebb4cc3cd57778ef5cfbc3ae625cefec2ffc3b690a5aa5","113":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/983764cb5075eedbd96ec034df1374a1_a94f5a1f0c9b45b9082044ebe72774b0313a58e5a2f58d00a63827ad7d48bb62","114":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/9abafed7a919fe54046abe458a6b3140_4003c5226083b7beb7b5901c79027e3833be0aec78da9aa3fc05f0293f5bb43e","115":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/4268a231e34c78a807bd51c7d5e1064e_a9049cfd9cbbb250474c1364710dcd276e1896297b2dee37b6ffad96a882bda9","116":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/b80be54bf0fbb43ebd8a20dca4d8f6f0_544d5a34e1d959e4e7794c58503b3478de33eb4ef21e8b74839b950adda7dedd","117":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/4ce28371de65a22a241dee28128dda4d_0daec6dffe6bd726f3031d51a39728c4f88f48482ebbae6c05f758ca24dd0890","118":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c55284b8098cbaa9a1db08cbdf46bae8_6baa7acefb038acbb2fedbfdce556766c48349c5d13374347a26bd83e2acf283","119":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/dd77cf42f690e808bb9d8131b7cec48b_0b3713716d1127b36eb335737778cca3d4b7b476a99a571a11dc118e71463d2b","120":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c657e3f25ab9ae85a99e421231a6c6a8_06deb81cfec70dbd14da6bb6471b8ee4bcc142ee08b60714af9f91683b461e6a","121":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/cd4fc426707d63e4d9b8bc9205dea3fc_cb648ffe70ec0942be80f294a1a07c5e64958570265b70cfd84da78072877fe7"}
}

},{}],55:[function(require,module,exports){
/* mousetrap v1.4.6 craig.is/killing/mice */
(function(J,r,f){function s(a,b,d){a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent("on"+b,d)}function A(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);a.shiftKey||(b=b.toLowerCase());return b}return h[a.which]?h[a.which]:B[a.which]?B[a.which]:String.fromCharCode(a.which).toLowerCase()}function t(a){a=a||{};var b=!1,d;for(d in n)a[d]?b=!0:n[d]=0;b||(u=!1)}function C(a,b,d,c,e,v){var g,k,f=[],h=d.type;if(!l[a])return[];"keyup"==h&&w(a)&&(b=[a]);for(g=0;g<l[a].length;++g)if(k=
l[a][g],!(!c&&k.seq&&n[k.seq]!=k.level||h!=k.action||("keypress"!=h||d.metaKey||d.ctrlKey)&&b.sort().join(",")!==k.modifiers.sort().join(","))){var m=c&&k.seq==c&&k.level==v;(!c&&k.combo==e||m)&&l[a].splice(g,1);f.push(k)}return f}function K(a){var b=[];a.shiftKey&&b.push("shift");a.altKey&&b.push("alt");a.ctrlKey&&b.push("ctrl");a.metaKey&&b.push("meta");return b}function x(a,b,d,c){m.stopCallback(b,b.target||b.srcElement,d,c)||!1!==a(b,d)||(b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation?
b.stopPropagation():b.cancelBubble=!0)}function y(a){"number"!==typeof a.which&&(a.which=a.keyCode);var b=A(a);b&&("keyup"==a.type&&z===b?z=!1:m.handleKey(b,K(a),a))}function w(a){return"shift"==a||"ctrl"==a||"alt"==a||"meta"==a}function L(a,b,d,c){function e(b){return function(){u=b;++n[a];clearTimeout(D);D=setTimeout(t,1E3)}}function v(b){x(d,b,a);"keyup"!==c&&(z=A(b));setTimeout(t,10)}for(var g=n[a]=0;g<b.length;++g){var f=g+1===b.length?v:e(c||E(b[g+1]).action);F(b[g],f,c,a,g)}}function E(a,b){var d,
c,e,f=[];d="+"===a?["+"]:a.split("+");for(e=0;e<d.length;++e)c=d[e],G[c]&&(c=G[c]),b&&"keypress"!=b&&H[c]&&(c=H[c],f.push("shift")),w(c)&&f.push(c);d=c;e=b;if(!e){if(!p){p={};for(var g in h)95<g&&112>g||h.hasOwnProperty(g)&&(p[h[g]]=g)}e=p[d]?"keydown":"keypress"}"keypress"==e&&f.length&&(e="keydown");return{key:c,modifiers:f,action:e}}function F(a,b,d,c,e){q[a+":"+d]=b;a=a.replace(/\s+/g," ");var f=a.split(" ");1<f.length?L(a,f,b,d):(d=E(a,d),l[d.key]=l[d.key]||[],C(d.key,d.modifiers,{type:d.action},
c,a,e),l[d.key][c?"unshift":"push"]({callback:b,modifiers:d.modifiers,action:d.action,seq:c,level:e,combo:a}))}var h={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},B={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},H={"~":"`","!":"1",
"@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},G={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},p,l={},q={},n={},D,z=!1,I=!1,u=!1;for(f=1;20>f;++f)h[111+f]="f"+f;for(f=0;9>=f;++f)h[f+96]=f;s(r,"keypress",y);s(r,"keydown",y);s(r,"keyup",y);var m={bind:function(a,b,d){a=a instanceof Array?a:[a];for(var c=0;c<a.length;++c)F(a[c],b,d);return this},
unbind:function(a,b){return m.bind(a,function(){},b)},trigger:function(a,b){if(q[a+":"+b])q[a+":"+b]({},a);return this},reset:function(){l={};q={};return this},stopCallback:function(a,b){return-1<(" "+b.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.isContentEditable},handleKey:function(a,b,d){var c=C(a,b,d),e;b={};var f=0,g=!1;for(e=0;e<c.length;++e)c[e].seq&&(f=Math.max(f,c[e].level));for(e=0;e<c.length;++e)c[e].seq?c[e].level==f&&(g=!0,
b[c[e].seq]=1,x(c[e].callback,d,c[e].combo,c[e].seq)):g||x(c[e].callback,d,c[e].combo);c="keypress"==d.type&&I;d.type!=u||w(a)||c||t(b);I=g&&"keydown"==d.type}};J.Mousetrap=m;"function"===typeof define&&define.amd&&define(m)})(window,document);

},{}]},{},[2])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvYXBwLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY2FtcGFpZ25fZGV0YWlsLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY2FtcGFpZ25zLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY29tcGFueS5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL2NvbXBhbnlfcHJvc3BlY3RzLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY29tcGFueV9zaWduYWxfY2FyZC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL2NyZWF0ZV9jYW1wYWlnbi5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL2NyZWF0ZV9jb21wYW55X3Byb2ZpbGVfbW9kYWwuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9jcmVhdGVfZnVuZGluZ19zaWduYWxfbW9kYWwuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9jcmVhdGVfaGlyaW5nX3NpZ25hbF9tb2RhbC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL2NyZWF0ZV9saXN0X21vZGFsLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY3JlYXRlX21pbmluZ19qb2JfbW9kYWwuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9jcmVhdGVfcHJvc3BlY3RfbGlzdF9mcm9tX2NvbXBhbnlfbGlzdC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL2NyZWF0ZV9wcm9zcGVjdF9wcm9maWxlX21vZGFsLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY3JlYXRlX3RlbXBsYXRlLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvZGF0YV9yb3cuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9kYXRhX3RhYmxlLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvZGVsZXRlX2xpc3RfbW9kYWwuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9lZGl0X3RlbXBsYXRlLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvZW1haWwuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9mb2xsb3d1cF9mZWVkLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvZm9sbG93dXBfdGltZWxpbmUuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9mcmVlX3RyaWFsLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvbGFuZGluZ19wYWdlLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvbGFuZGluZ19wYWdlX2NvbmNlcHQuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9sb2FkaW5nX3NwaW5uZXIuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9sb2dpbi5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL21lc3Nlbmdlci5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL21pbmluZ19qb2IuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9taW5pbmdfam9iX2NhbGVuZGFyLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvbWluaW5nX2pvYl9sb2FkaW5nLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvcGFuZWxfZm9vdGluZy5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3Blb3BsZV9zaWduYWxfY2FyZC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3ByaWNpbmcuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9wcm9zcGVjdHMuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9yZW5hbWVfbGlzdF9tb2RhbC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NjaGVkdWxlLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvc2VuZF9lbWFpbF9tb2RhbC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NlbnRfbWFpbC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NpZGVfbWVudV91c2VyX3Byb3NwZWN0cy5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NpZ25hbF9jYWxlbmRhci5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NpZ25hbF9kZXRhaWwuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9zaWduYWxfbG9hZGluZy5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NpZ25hbF9wcm9maWxlLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvc2lnbmFscy5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NpZ251cC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3RlbXBsYXRlcy5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3RlbXBsYXRlc19tZW51LmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvdGltZWxpbmVfZGF5X2VsZW1lbnQuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy91c2VyX3Byb3NwZWN0LmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvdXNlcl9wcm9zcGVjdF9oZWFkZXIuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy91c2VyX3NpZGVfbWVudV9saXN0LmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2xpYi9kYXRhLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2xpYi9tb3VzZXRyYXAubWluLm1pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN2REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDelZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25PQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeFBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3haQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM01BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNobUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL09BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdFFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9UQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3prQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcFFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlpQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdFQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxuLyogVE9ET1xuICogXG4gKiAtIEFsbCBjb3VudCBjaGFuZ2UsIHdoZW4gcHJvc3BlY3QgaXMgYXJjaGl2ZWRcbiAqIC0gV2hlbiBpcyBsaXN0IGlzIGNoYWFuZ2VkIGZyb20gYWxsIGFuZCB0aGVuIHJldHVybmVkIHRvIEFsbCBwcm9zcGVjdHMgdGFrZSBhIGxvbmcgICAgIHRpbWUgdG8gbG9hZFxuICogLSBGaXggcGFnaW5hdGlvbiBpc3N1ZXNcbiAqXG4gKiAtIFBhcmFsbGVsaXplIFdvcmtlcnNcbiAqIC0gU2NhbGUgdXAgZ29vZ2xlIHNjcmFwZSB0byBodW5kcmVkcyBvZiB3b3JrZXJzIChoZXJva3UpXG4gKlxuICogLSBDb21wYW55IFNob3J0Y3V0cyBcbiAqIC0gQWRkIGFiaWxpdHkgdG8gc3dpdGNoIGFjY291bnRzIGZvciBhZG1pbnNcbiAqIC0gQWRkIGVtYWlsIHVuZWRpdGFibGUgZW1haWwgZmllbGRzXG4gKi9cblxudmFyIFByb3NwZWN0cyA9IHJlcXVpcmUoJy4vcHJvc3BlY3RzLmpzLm1pbi5qcycpO1xudmFyIENvbXBhbnlQcm9zcGVjdCA9IHJlcXVpcmUoJy4vY29tcGFueS5qcy5taW4uanMnKTtcbnZhciBDb21wYW55UHJvc3BlY3RzID0gcmVxdWlyZSgnLi9jb21wYW55X3Byb3NwZWN0cy5qcy5taW4uanMnKTtcbnZhciBEYXRhVGFibGUgPSByZXF1aXJlKCcuL2RhdGFfdGFibGUuanMubWluLmpzJyk7XG52YXIgTWluaW5nSm9iID0gcmVxdWlyZSgnLi9taW5pbmdfam9iLmpzLm1pbi5qcycpO1xudmFyIENhbXBhaWducyA9IHJlcXVpcmUoJy4vZW1haWwuanMubWluLmpzJyk7XG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnLi9hbmFseXRpY3MuanMubWluLmpzJyk7XG52YXIgU2lnblVwID0gcmVxdWlyZSgnLi9zaWdudXAuanMubWluLmpzJyk7XG52YXIgTG9naW4gPSByZXF1aXJlKCcuL2xvZ2luLmpzLm1pbi5qcycpO1xudmFyIExhbmRpbmdQYWdlID0gcmVxdWlyZSgnLi9sYW5kaW5nX3BhZ2UuanMubWluLmpzJyk7XG52YXIgTGFuZGluZ1BhZ2UgPSByZXF1aXJlKCcuL2xhbmRpbmdfcGFnZV9jb25jZXB0LmpzLm1pbi5qcycpO1xudmFyIEZyZWVUcmlhbCA9IHJlcXVpcmUoJy4vZnJlZV90cmlhbC5qcy5taW4uanMnKTtcbnZhciBQcmljaW5nID0gcmVxdWlyZSgnLi9wcmljaW5nLmpzLm1pbi5qcycpO1xudmFyIFNpZ25hbHMgPSByZXF1aXJlKCcuL3NpZ25hbHMuanMubWluLmpzJyk7XG52YXIgTW91c2VUcmFwID0gcmVxdWlyZSgnLi4vbGliL21vdXNldHJhcC5taW4ubWluLmpzJylcbi8vdmFyIGNoZWNrQXV0aCA9IHJlcXVpcmUoJy4vYXV0aC5taW4uanMnKVxuXG52YXIgSG9tZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0hvbWUnLFxuICBjb21wb25lbnRXaWxsTW91bnQ6IGZ1bmN0aW9uKCl7XG4gICAgY2hlY2tBdXRoKClcbiAgfSxcblxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIC8vIG51bV9vZl9wYWdlc1xuICAgIGNvbnNvbGUubG9nKHRoaXMucHJvcHMpXG4gICAgcmV0dXJuIHtwcm9zcGVjdHM6IFtdICwgXG4gICAgICAgICAgICBjdXJyZW50UGFnZTogMSwgXG4gICAgICAgICAgICBwYWdlczogMSwgXG4gICAgICAgICAgICBjb3VudDpcIn5cIiwgXG4gICAgICAgICAgICBwcm9zcGVjdFR5cGU6J1Byb3NwZWN0JywgXG4gICAgICAgICAgICAvL3NlbGVjdGVkU2NyZWVuOidQcm9zcGVjdHMnfVxuICAgICAgICAgICAgc2VsZWN0ZWRTY3JlZW46IHRoaXMucHJvcHMuc2VsZWN0ZWRTY3JlZW59XG4gIH0sXG5cbiAgdG9nZ2xlU2NyZWVuOiBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRTY3JlZW4gOiAkKGUudGFyZ2V0KS50ZXh0KCkudHJpbSgpfSlcbiAgfSxcblxuICBsb2dvdXQ6IGZ1bmN0aW9uKCkge1xuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpXG4gICAgbG9jYXRpb24uaHJlZiA9IFwiI2dldF9zdGFydGVkXCJcbiAgfSxcblxuICBsaXN0RHJvcGRvd246IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdkcm9wZG93bicpXG4gICAgLy8kKCcuZHJvcGRvd24tbWVudScpLmRyb3Bkb3duKClcbiAgICAkKCcucHJvc3BlY3QtbGlzdC1zZWxlY3QnKS5jc3MoJ2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzJywnMHB4JylcbiAgICAkKCcucHJvc3BlY3QtbGlzdC1zZWxlY3QnKS5jc3MoJ2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXMnLCcwcHgnKVxuICAgICAgXG4gICAgJCgnLmxpc3Qtc2VsZWN0LWRyb3Bkb3duJykuY3NzKCdib3JkZXItdG9wLWxlZnQtcmFkaXVzJywnMHB4JylcbiAgICAkKCcubGlzdC1zZWxlY3QtZHJvcGRvd24nKS5jc3MoJ2JvcmRlci10b3AtcmlnaHQtcmFkaXVzJywnMHB4JylcbiAgfSxcblxuICBzZWxlY3RDaGFuZ2UgOiBmdW5jdGlvbigpIHtcblxuICB9LFxuXG4gIHN0cmlwZUNoZWNrb3V0OiBmdW5jdGlvbigpIHtcbiAgICBoYW5kbGVyLm9wZW4oe1xuICAgICAgbmFtZTogJ0N1c3RvbWVybycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0dldCA5MDAgZnJlZSBlbWFpbCBjcmVkaXRzIScsXG4gICAgICBhbW91bnQ6IDAsXG4gICAgICBwYW5lbExhYmVsOiBcIlN0YXJ0IFlvdXIgRnJlZSBUcmlhbCFcIixcbiAgICAgIG9wZW5lZDogZnVuY3Rpb24oKSB7XG4gICAgICB9LFxuICAgICAgY2xvc2VkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJjbG9zZWRcIilcbiAgICAgICAgbG9jYXRpb24ucmVsb2FkKClcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgLy8gQ3JlZGl0IENhcmQgVmVyaWZpZWQgQ2hlY2tcbiAgICBsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMgPSBcIltdXCJcbiAgICBjdXJyZW50VXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKVxuICAgIGlmKCFjdXJyZW50VXNlci5jcmVkaXRDYXJkVmVyaWZpZWQpXG4gICAgICB0aGlzLnN0cmlwZUNoZWNrb3V0KClcblxuICAgIC8qXG4gICAgICogTWFrZSBSZXF1ZXN0IFRvIEdldCBNb3N0IFVwIHRvIERhdGUgSW5mb1xuICAgICAqIE9uIFN1Y2Nlc3MgQWRkIFRvIEludGVyY29tXG4gICAgKi9cblxuICAgIC8qXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonJ1xuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIC8vIE51bWJlciBvZiBQcm9zcGVjdHMgZm9yIHVzZXJcbiAgICAgICAgLy8gTnVtYmVyIG9mIExpc3RzXG4gICAgICAgIC8vIE51bWJlciBvZiBFbWFpbHMgZm91bmRcbiAgICAgICAgSW50ZXJjb20oJ2Jvb3QnLCB7XG4gICAgICAgICAgYXBwX2lkOiAnYWJjMTIzNDUnLFxuICAgICAgICAgIGVtYWlsOiAnam9obi5kb2VAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6IDEyMzQ1Njc4OTAsXG4gICAgICAgICAgbmFtZTogJ0pvaG4gRG9lJyxcbiAgICAgICAgICB1c2VyX2lkOiAnOTg3NidcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgfVxuICAgIH0pO1xuICAgICovXG4gICAgLy8gSW50ZXJjb21cbiAgICAvLyBNaXhwYW5lbFxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcHJvc3BlY3RzID0gXCJjaG9vc2UgYnRuIGJ0bi1wcmltYXJ5IFwiXG4gICAgY29tcGFueVByb3NwZWN0cyA9IFwiY2hvb3NlIGJ0biBidG4tcHJpbWFyeSBcIlxuICAgIGNhbXBhaWducyA9IFwiY2hvb3NlIGJ0biBidG4tcHJpbWFyeSBcIlxuICAgIHNpZ25hbHMgPSBcImNob29zZSBidG4gYnRuLXByaW1hcnkgXCJcbiAgICBzd2l0Y2ggKHRoaXMuc3RhdGUuc2VsZWN0ZWRTY3JlZW4pIHtcbiAgICAgIGNhc2UgJ1Byb3NwZWN0cyc6XG4gICAgICAgIGN1cnJlbnRTY3JlZW4gPSBQcm9zcGVjdHMobnVsbClcbiAgICAgICAgcHJvc3BlY3RzID0gXCJjaG9vc2UgYnRuIGJ0bi1wcmltYXJ5IGFwcC1hY3RpdmVcIlxuICAgICAgICBsb2NhdGlvbi5ocmVmPSBcIiNwcm9zcGVjdHNcIlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0NvbXBhbmllcyc6XG4gICAgICAgIGN1cnJlbnRTY3JlZW4gPSBDb21wYW55UHJvc3BlY3RzKG51bGwpXG4gICAgICAgIGN1cnJlbnRTY3JlZW4gPSBEYXRhVGFibGUoe2xpc3RDbGFzc05hbWU6ICdDb21wYW55UHJvc3BlY3RMaXN0JywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlSGVhZGVyOiBbJ05hbWUnLCdBZGRlZCBPbicsJ0luZHVzdHJ5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIyBvZiBQcm9zcGVjdHMnLCdTaWduYWxzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJywnJ10sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdDb21wYW55UHJvc3BlY3QnfSlcbiAgICAgICAgbG9jYXRpb24uaHJlZj0gXCIjY29tcGFuaWVzXCJcbiAgICAgICAgY29tcGFueVByb3NwZWN0cyA9IFwiY2hvb3NlIGJ0biBidG4tcHJpbWFyeSBhcHAtYWN0aXZlXCJcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdNaW5pbmcgSm9icyc6XG4gICAgICAgIGN1cnJlbnRTY3JlZW4gPSBNaW5pbmdKb2IobnVsbClcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdBbmFseXRpY3MnOlxuICAgICAgICBjdXJyZW50U2NyZWVuID0gQW5hbHl0aWNzKG51bGwpXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnQ2FtcGFpZ25zJzpcbiAgICAgICAgY3VycmVudFNjcmVlbiA9IENhbXBhaWducyhudWxsKVxuICAgICAgICBjYW1wYWlnbnMgPSBcImNob29zZSBidG4gYnRuLXByaW1hcnkgYXBwLWFjdGl2ZVwiXG4gICAgICAgIGxvY2F0aW9uLmhyZWY9IFwiI2NhbXBhaWduc1wiXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnU2lnbmFscyc6XG4gICAgICAgIGN1cnJlbnRTY3JlZW4gPSBTaWduYWxzKG51bGwpXG4gICAgICAgIHNpZ25hbHMgPSBcImNob29zZSBidG4gYnRuLXByaW1hcnkgYXBwLWFjdGl2ZVwiXG4gICAgICAgIGxvY2F0aW9uLmhyZWY9IFwiI3NpZ25hbHNcIlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ1NldHRpbmdzJzpcbiAgICAgICAgY3VycmVudFNjcmVlbiA9IFNldHRpbmdzKG51bGwpXG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmgxKHtzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLGRpc3BsYXk6J2lubGluZScsZm9udFdlaWdodDonMTAwJyxjb2xvcjonIzFjYTNmZCd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmltZyh7c3JjOiBcImJ1aWxkL2ltZy9uZXR3b3JrLnBuZ1wiLCBcbiAgICAgICAgICAgIHN0eWxlOiB7IGhlaWdodDozMiwgbWFyZ2luVG9wOi00LFxuICAgICAgICAgICAgICBtYXJnaW5SaWdodDo1LCB9fVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLGZvbnRTaXplOjMyLGZvbnRGYW1pbHk6J1Byb3hpbWEtTm92YSd9fSwgXCJDdXN0b21lcm8gXCIpXG4gICAgICAgICksIFxuICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7ZmxvYXQ6J3JpZ2h0J319LCBcbiAgICAgICAgUmVhY3QuRE9NLmltZyh7c3JjOiBcImJ1aWxkL2ltZy91c2VyLnBuZ1wiLCBzdHlsZToge2hlaWdodDonNDBweCcsd2lkdGg6JzQwcHgnLHBhZGRpbmc6JzJweCcsbWFyZ2luVG9wOic1cHgnLGJvcmRlclJhZGl1czonMjNweCcsZGlzcGxheTonaW5saW5lJ30sIGNsYXNzTmFtZTogXCJ0aHVtYm5haWxcIn0pLCBcIsKgwqDCoFwiLCAgXG4gICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5Ub3A6JzIwcHgnLGZsb2F0OidyaWdodCcsZGlzcGxheTonaW5saW5lJ319LCBcIldlbGNvbWVcIilcbiAgICAgICksIFxuICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7ZmxvYXQ6J3JpZ2h0JywgbWFyZ2luUmlnaHQ6JzE1MHB4J319LCBcbiAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpblRvcDonMjBweCcsZmxvYXQ6J3JpZ2h0JyxkaXNwbGF5OidpbmxpbmUnLH19LCBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLmxvZ291dCwgc3R5bGU6IHtjb2xvcjonIzFjYTNmZCd9fSwgXCJMb2dvdXRcIikpLCBcbiAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpblRvcDonMjBweCcsZmxvYXQ6J3JpZ2h0JyxkaXNwbGF5OidpbmxpbmUnLG1hcmdpblJpZ2h0OicxMHB4J319LCBSZWFjdC5ET00uYSh7aHJlZjogXCIjcHJpY2luZ1wiLCBzdHlsZToge2NvbG9yOicjMWNhM2ZkJ319LCBcIlByaWNpbmdcIikpLCBcbiAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpblRvcDonMjBweCcsZmxvYXQ6J3JpZ2h0JyxkaXNwbGF5OidpbmxpbmUnLCBtYXJnaW5SaWdodDonMTBweCd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiaHR0cDovL3Jlc291cmNlcy5jdXN0b21lcm9ocS5jb21cIiwgc3R5bGU6IHtjb2xvcjonIzFjYTNmZCd9fSwgXCJSZXNvdXJjZXNcIilcbiAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICBzdHlsZToge21hcmdpblRvcDoxNSwgZmxvYXQ6J3JpZ2h0JyxtYXJnaW5SaWdodDoxMCxcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiAnbGluZWFyLWdyYWRpZW50KDE4MGRlZywgIzAwOTZmZiAwJSwgIzAwNWRmZiAxMDAlKSd9LCBcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgYnRuLXhzXCIsIFxuICAgICAgICAgICAgb25DbGljazogdGhpcy5kb3dubG9hZFNvY2lhbFByb3NwZWN0ZXJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZG93bmxvYWRcIn0pLCBcIiDCoFwiICsgJyAnICtcbiAgICAgICAgICAgIFwiRG93bmxvYWQgQ2hyb21lIFNvY2lhbCBQcm9zcGVjdGVyXCJcbiAgICAgICAgICApXG4gICAgICApLCBcbiAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwgcGFuZWwtZGVmYXVsdFwifSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcIm5hdmJhclwiLCBjbGFzc05hbWU6IFwicGFuZWwtaGVhZGluZ1wifSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwIGNvbC1tZC1vZmZzZXQtNFwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IHNpZ25hbHMsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snfSwgb25DbGljazogdGhpcy50b2dnbGVTY3JlZW59LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXdpZmlcIn0pLCBcIsKgU2lnbmFsc1wiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogcHJvc3BlY3RzLCBvbkNsaWNrOiB0aGlzLnRvZ2dsZVNjcmVlbn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdXNlclwifSksIFwiwqBQcm9zcGVjdHNcIlxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiY2hvb3NlIGJ0biBidG4tcHJpbWFyeVwiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfSwgb25DbGljazogdGhpcy50b2dnbGVTY3JlZW59LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWJhci1jaGFydC1vXCJ9KSwgXCIgQW5hbHl0aWNzXCJcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImNob29zZSBidG4gYnRuLXByaW1hcnlcIiwgXG4gICAgICAgICAgICAgICAgICBzdHlsZToge3dpZHRoOjE2MixkaXNwbGF5Oidub25lJ30sIFxuICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy50b2dnbGVTY3JlZW59LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXRhc2tzXCJ9KSwgXCIgTWluaW5nIEpvYnMgwqBcIiwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1kZWZhdWx0XCJ9LCBcIkJFVEFcIilcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBjb21wYW55UHJvc3BlY3RzLCBvbkNsaWNrOiB0aGlzLnRvZ2dsZVNjcmVlbn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYnVpbGRpbmdcIn0pLCBcIiBDb21wYW5pZXNcIlxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IGNhbXBhaWducywgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9LCBvbkNsaWNrOiB0aGlzLnRvZ2dsZVNjcmVlbn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZW52ZWxvcGVcIn0pLCBcIsKgQ2FtcGFpZ25zXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgICksIFxuXG4gICAgICAgICAgY3VycmVudFNjcmVlblxuXG4gICAgICAgIClcbiAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9LFxuICBcbiAgZG93bmxvYWRTb2NpYWxQcm9zcGVjdGVyOiBmdW5jdGlvbigpIHtcbiAgICAvL2Nocm9tZS53ZWJzdG9yZS5pbnN0YWxsKCdodHRwczovL2Nocm9tZS5nb29nbGUuY29tL3dlYnN0b3JlL2RldGFpbC9vZmNhbGtqYm9nYWlpcGVrY29jZGVmamVuY2xpb2VjaScpXG4gICAgLy9jaHJvbWUud2Vic3RvcmUuaW5zdGFsbCgpXG4gICAgd2luZG93Lm9wZW4oJ2h0dHBzOi8vY2hyb21lLmdvb2dsZS5jb20vd2Vic3RvcmUvZGV0YWlsL2N1c3RvbWVyby1wcm9zcGVjdGVyL29mY2Fsa2pib2dhaWlwZWtjb2NkZWZqZW5jbGlvZWNpJylcbiAgfSxcblxuICAvKlxuICAgICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1zdWNjZXNzXCIgb25DbGljaz17dGhpcy5kb3dubG9hZEZpbGV9XG4gICAgICAgICAgICAgICAgICBzdHlsZT17e2Zsb2F0OidyaWdodCcsbWFyZ2luVG9wOic2cHgnfX0+XG4gICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1kb3dubG9hZFwiIC8+Jm5ic3A7Jm5ic3A7XG4gICAgICAgICAgICA8aDUgc3R5bGU9e3tkaXNwbGF5OidpbmxpbmUnfX0gPkRvd25sb2FkIENTVjwvaDU+XG4gICAgICAgICAgPC9hPlxuICAqL1xuXG4gIGRlbGV0ZVByb3NwZWN0OiBmdW5jdGlvbihvYmplY3RJZCwgZW5kcG9pbnQpIHtcbiAgICB2YXIgZmlsdGVyZWQgPSBfLmZpbHRlcih0aGlzLnN0YXRlLnByb3NwZWN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgIHJldHVybiBpdGVtLm9iamVjdElkICE9IG9iamVjdElkXG4gICAgfSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7cHJvc3BlY3RzOiBmaWx0ZXJlZH0pXG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzLycrZW5kcG9pbnQrJy8nK29iamVjdElkLFxuICAgICAgdHlwZTonREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHBhcnNlX2hlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSk7XG5cblxudmFyIFdvcmtzcGFjZSA9IEJhY2tib25lLlJvdXRlci5leHRlbmQoe1xuICByb3V0ZXM6IHtcbiAgICAvL2xhbmRpbmdfcGFnZVxuICAgIFwiXCIgICAgICAgICAgICA6IFwicHJvc3BlY3RzXCIsXG4gICAgXCJnZXRfc3RhcnRlZFwiIDogXCJsYW5kaW5nX3BhZ2VcIixcbiAgICBcImZyZWVfdHJpYWxcIiAgOiBcImZyZWVfdHJpYWxcIixcbiAgICBcInNpZ251cFwiICAgICAgOiBcInNpZ251cFwiLFxuICAgIFwibG9naW5cIiAgICAgICA6IFwibG9naW5cIixcbiAgICBcInByaWNpbmdcIiAgICAgOiBcInByaWNpbmdcIixcbiAgICBcbiAgICBcInNpZ25hbHNcIiAgICAgOiBcInNpZ25hbHNcIixcbiAgICBcInByb3NwZWN0c1wiICAgOiBcInByb3NwZWN0c1wiLFxuICAgIFwiY29tcGFuaWVzXCIgICA6IFwiY29tcGFuaWVzXCIsXG4gICAgXCJjYW1wYWlnbnNcIiAgIDogXCJjYW1wYWlnbnNcIixcblxuICAgIFwicHJvc3BlY3RzL3A6cGFnZVwiICAgICAgIDogXCJwcm9zcGVjdHNcIixcbiAgICBcInByb3NwZWN0cy9saXN0LzpsaXN0XCIgICA6IFwicHJvc3BlY3RzX2xpc3RcIixcblxuICAgIFwiY29tcGFuaWVzL3A6cGFnZVwiICAgICAgIDogXCJjb21wYW5pZXNcIixcbiAgICBcImNvbXBhbmllcy9saXN0LzpsaXN0XCIgICA6IFwiY29tcGFuaWVzX2xpc3RcIixcblxuICAgIFwic2lnbmFscy9wcm9maWxlLzpwcm9maWxlXCIgIDogXCJzaWduYWxzX3Byb2ZpbGVcIixcbiAgICBcInNpZ25hbHMvY2FsZW5kYXIvOnByb2ZpbGVcIiA6IFwic2lnbmFsc19jYWxlbmRhclwiLFxuXG4gICAgXCJjYW1wYWlnbnMvZm9sbG93dXBfZmVlZFwiICAgICAgOiBcImNhbXBhaWduc1wiLFxuICAgIFwiY2FtcGFpZ25zL3NlbnRfZW1haWxzXCIgICAgICAgICA6IFwiY2FtcGFpZ25zXCIsXG4gICAgXCJjYW1wYWlnbnMvdGVtcGxhdGUvOnRlbXBsYXRlXCIgOiBcImNhbXBhaWduc1wiLFxuICB9LFxuXG4gIG1haW5Sb3V0ZTogZnVuY3Rpb24ocm91dGUpIHtcbiAgICBjb25zb2xlLmxvZyhyb3V0ZSlcbiAgICBjdXJyZW50VXNlciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW50VXNlcicpXG4gICAgJCgnI2NvbnRlbnQnKS5odG1sKCcnKVxuICAgIGlmIChjdXJyZW50VXNlcikgXG4gICAgICBSZWFjdC5yZW5kZXJDb21wb25lbnQoSG9tZSh7c2VsZWN0ZWRTY3JlZW46IHJvdXRlfSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50JykpO1xuICAgIGVsc2VcbiAgICAgIGxvY2F0aW9uLmhyZWYgPSBcIiNnZXRfc3RhcnRlZFwiXG4gIH0sXG5cbiAgc2lnbmFscyAgOiBmdW5jdGlvbigpIHsgdGhpcy5tYWluUm91dGUoJ1NpZ25hbHMnKSB9LFxuICBwcm9zcGVjdHM6IGZ1bmN0aW9uKCkgeyB0aGlzLm1haW5Sb3V0ZSgnUHJvc3BlY3RzJykgfSxcbiAgY29tcGFuaWVzOiBmdW5jdGlvbigpIHsgdGhpcy5tYWluUm91dGUoJ0NvbXBhbmllcycpIH0sXG4gIGNhbXBhaWduczogZnVuY3Rpb24oKSB7IHRoaXMubWFpblJvdXRlKCdDYW1wYWlnbnMnKSB9LFxuXG4gIGhvbWU6IGZ1bmN0aW9uKCkge1xuICAgIGN1cnJlbnRVc2VyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRVc2VyJylcbiAgICBpZiAoY3VycmVudFVzZXIpIFxuICAgICAgUmVhY3QucmVuZGVyQ29tcG9uZW50KEhvbWUoe3NlbGVjdGVkU2NyZWVuOiBcIlByb3NwZWN0c1wifSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50JykpO1xuICAgIGVsc2VcbiAgICAgIGxvY2F0aW9uLmhyZWYgPSBcIiNnZXRfc3RhcnRlZFwiXG4gIH0sXG4gIGxhbmRpbmdfcGFnZTogZnVuY3Rpb24oKSB7XG4gICAgUmVhY3QucmVuZGVyQ29tcG9uZW50KExhbmRpbmdQYWdlKCksIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50JykpO1xuICB9LFxuICBmcmVlX3RyaWFsOiBmdW5jdGlvbigpIHtcbiAgICBSZWFjdC5yZW5kZXJDb21wb25lbnQoRnJlZVRyaWFsKCksIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50JykpO1xuICB9LFxuXG4gIHNpZ251cDogZnVuY3Rpb24oKSB7XG4gICAgUmVhY3QucmVuZGVyQ29tcG9uZW50KFNpZ25VcCgpLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpKTtcbiAgfSxcbiAgbG9naW46IGZ1bmN0aW9uKCkge1xuICAgIFJlYWN0LnJlbmRlckNvbXBvbmVudChMb2dpbigpLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpKTtcbiAgfSxcbiAgcHJpY2luZzogZnVuY3Rpb24oKSB7XG4gICAgUmVhY3QucmVuZGVyQ29tcG9uZW50KFByaWNpbmcoKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKSk7XG4gIH1cbn0pO1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuICBjaGVja0F1dGgoKVxuICB2YXIgd29ya3NwYWNlID0gbmV3IFdvcmtzcGFjZTtcbiAgQmFja2JvbmUuaGlzdG9yeS5zdGFydCgpO1xufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cbnZhciBUZW1wbGF0ZXNNZW51ID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXNfbWVudS5qcy5taW4uanMnKTtcbnZhciBFZGl0VGVtcGxhdGVWaWV3ID0gcmVxdWlyZSgnLi9lZGl0X3RlbXBsYXRlLmpzLm1pbi5qcycpO1xudmFyIENyZWF0ZVRlbXBsYXRlVmlldyA9IHJlcXVpcmUoJy4vY3JlYXRlX3RlbXBsYXRlLmpzLm1pbi5qcycpO1xudmFyIEZvbGxvd3VwVGltZWxpbmUgPSByZXF1aXJlKCcuL2ZvbGxvd3VwX3RpbWVsaW5lLmpzLm1pbi5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBDYW1wYWlnbiBEZXRhaWxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2VsZWN0ZWRUZW1wbGF0ZTogMCxcbiAgICAgIHRlbXBsYXRlRGV0YWlsTW9kZTogZmFsc2UsXG4gICAgICBlZGl0TW9kZTogZmFsc2UsXG4gICAgICBmb2xsb3d1cERheTogMCxcbiAgICAgIHRlbXBsYXRlczpbXSxcbiAgICAgIGN1cnJlbnRUZW1wbGF0ZTonJyxcbiAgICAgIHByb3NwZWN0TGlzdENvdW50Oid+JyxcbiAgICAgIHByb3NwZWN0czpbXSxcbiAgICB9XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICB0aGlzc3NzID0gdGhpcztcbiAgICAgY29tcGFueSA9IEpTT04uc3RyaW5naWZ5KEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55KVxuICAgICBxcnkgPSAnd2hlcmU9e1wiY29tcGFueVwiOicrY29tcGFueSsnfSdcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1RlbXBsYXRlJyxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IHRoaXNzc3Muc2V0U3RhdGUoe3RlbXBsYXRlczogcmVzLnJlc3VsdHN9KSB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZygnZXJyb3InKSB9XG4gICAgfSk7XG5cbiAgICBjdXJyZW50TGlzdCA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICdfX3R5cGUnICAgIDogJ1BvaW50ZXInLCBcbiAgICAgICdjbGFzc05hbWUnIDogJ1Byb3NwZWN0TGlzdCcsXG4gICAgICAnb2JqZWN0SWQnICA6IHRoaXMucHJvcHMuc2VsZWN0ZWRDYW1wYWlnbi5wcm9zcGVjdF9saXN0Lm9iamVjdElkLCBcbiAgICB9KVxuICAgIHFyeSA9ICd3aGVyZT17XCJsaXN0c1wiOicrY3VycmVudExpc3QrJ30mbGltaXQ9MTAwMCZjb3VudD0xJ1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0JyxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICB0aGlzc3NzLnNldFN0YXRlKHtcbiAgICAgICAgICBwcm9zcGVjdHM6IHJlcy5yZXN1bHRzLFxuICAgICAgICAgIHByb3NwZWN0TGlzdENvdW50OiByZXMuY291bnQgXG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyB9XG4gICAgfSlcbiAgfSxcblxuICByZXR1cm5Ub092ZXJ2aWV3OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnByb3BzLnRvZ2dsZVNjcmVlbignQ2FtcGFpZ25zJylcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIC8vY29uc29sZS5sb2coJ2NhbXBhaWduIGRldGFpbCcpXG4gICAgdGhpc3MgPSB0aGlzO1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCIsIFxuICAgICAgICAgICBzdHlsZToge3dpZHRoOicxMDAlJyxoZWlnaHQ6JzEwMCUnLHBhZGRpbmdMZWZ0OjAscGFkZGluZ1JpZ2h0OjB9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7bWFyZ2luQm90dG9tOjMwfSwgaWQ6IFwiY2FtcGFpZ24tdG9wLWRldGFpbFwifSwgXG4gICAgICAgIFJlYWN0LkRPTS5oNSh7c3R5bGU6IHttYXJnaW5Ub3A6MjAsbWFyZ2luTGVmdDoyMH19LCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLnJldHVyblRvT3ZlcnZpZXd9LCBcIkNhbXBhaWducyBcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zbWFsbChudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtzdHlsZToge21hcmdpbkxlZnQ6MTAsIG1hcmdpblJpZ2h0OjEwfSwgXG4gICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZmEgZmEtY2hldnJvbi1yaWdodFwifSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICB0aGlzLnByb3BzLnNlbGVjdGVkQ2FtcGFpZ24ubmFtZVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbkxlZnQ6MjAsZGlzcGxheTonaW5saW5lLWJsb2NrJyxtYXJnaW5SaWdodDoxNX19LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcInRleHQtbXV0ZWRcIn0sIFwiUHJvc3BlY3QgTGlzdDpcIiksIFwiIMKgXCIsIFxuICAgICAgICAgICh0aGlzLnByb3BzLnNlbGVjdGVkQ2FtcGFpZ24ucHJvc3BlY3RfbGlzdC5zaWduYWxfbGlzdCkgPyBSZWFjdC5ET00uc3BhbihudWxsLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXdpZmlcIn0pLCBcIsKgXCIpIDogXCJcIiwgXG4gICAgICAgICAgdGhpcy5wcm9wcy5zZWxlY3RlZENhbXBhaWduLnByb3NwZWN0X2xpc3QubmFtZVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJiYWRnZVwifSwgdGhpcy5zdGF0ZS5wcm9zcGVjdExpc3RDb3VudCksIFxuXG4gICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5MZWZ0OjIwLGRpc3BsYXk6J2lubGluZS1ibG9jaycsbWFyZ2luUmlnaHQ6MTV9fSwgXG4gICAgICAgICAgXCJCYXRjaGVzIDpcIlxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJiYWRnZVwifSwgXCIyXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6ICdyaWdodCcsIG1hcmdpblRvcDogLTM1LCBtYXJnaW5SaWdodDogMzAsIGRpc3BsYXk6J25vbmUnfSwgXG4gICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXNtXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWVudmVsb3BlXCJ9KSwgXCIgU2VuZCFcIlxuICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtOCBwYW5lbCBwYW5lbC1kZWZhdWx0XCIsIFxuICAgICAgICAgICAgICAgc3R5bGU6IHtoZWlnaHQ6JzQ0M3B4JyxwYWRkaW5nTGVmdDozMDUscGFkZGluZ1RvcDo1MCxvdmVyZmxvdzonYXV0bycsYm9yZGVyUmlnaHQ6MCxib3JkZXJSYWRpdXM6MH19LCBcbiAgICAgICAgICAgICAgIEZvbGxvd3VwVGltZWxpbmUoe1xuICAgICAgICAgICAgICAgICAgdGVtcGxhdGVzOiB0aGlzLnN0YXRlLnRlbXBsYXRlcywgXG4gICAgICAgICAgICAgICAgICBwcm9zcGVjdHM6IHRoaXMuc3RhdGUucHJvc3BlY3RzLCBcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRDYW1wYWlnbjogdGhpcy5wcm9wcy5zZWxlY3RlZENhbXBhaWduLCBcbiAgICAgICAgICAgICAgICAgIHRvZ2dsZVRlbXBsYXRlRWRpdE1lbnU6IHRoaXMudG9nZ2xlVGVtcGxhdGVFZGl0TWVudSwgXG4gICAgICAgICAgICAgICAgICBpbml0aWFsRm9sbG93dXBzOiB0aGlzLnByb3BzLnNlbGVjdGVkQ2FtcGFpZ24uZm9sbG93dXBzfSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTRcIiwgXG4gICAgICAgICAgICAgICBzdHlsZToge3BhZGRpbmdMZWZ0OjAscGFkZGluZ1JpZ2h0OjAsaGVpZ2h0OjQ0M319LCBcbiAgICAgICAgICAgIFRlbXBsYXRlc01lbnUoe1xuICAgICAgICAgICAgICB0ZW1wbGF0ZXM6IHRoaXMuc3RhdGUudGVtcGxhdGVzLCBcbiAgICAgICAgICAgICAgdG9nZ2xlVGVtcGxhdGVFZGl0TWVudTogdGhpcy50b2dnbGVUZW1wbGF0ZUVkaXRNZW51fSlcbiAgICAgICAgICApLCBcblxuICAgICAgICAgICh0aGlzLnN0YXRlLnRlbXBsYXRlRGV0YWlsTW9kZSkgPyBFZGl0VGVtcGxhdGVWaWV3KHtcbiAgICAgICAgICAgIGVkaXRNb2RlOiB0aGlzLnN0YXRlLmVkaXRNb2RlLCBcbiAgICAgICAgICAgIGluaXRpYWxUZW1wbGF0ZVZhbHVlczogdGhpcy5zdGF0ZS5jdXJyZW50VGVtcGxhdGUsIFxuICAgICAgICAgICAgc2F2ZVRlbXBsYXRlOiB0aGlzLnNhdmVUZW1wbGF0ZSwgXG4gICAgICAgICAgICBwcm9zcGVjdDogdGhpcy5zdGF0ZS5wcm9zcGVjdHNbMF0sIFxuICAgICAgICAgICAgdG9nZ2xlVGVtcGxhdGVFZGl0TWVudTogdGhpcy50b2dnbGVUZW1wbGF0ZUVkaXRNZW51LCBcbiAgICAgICAgICAgIGZvbGxvd3VwRGF5OiB0aGlzLnN0YXRlLmZvbGxvd3VwRGF5fSkgOiBcIlwiXG4gICAgICApXG4gICAgKTtcbiAgfSxcblxuICBzYXZlVGVtcGxhdGU6IGZ1bmN0aW9uKHRlbXBsYXRlLCBuZXdUZW1wbGF0ZSkge1xuICAgIHRlbXBsYXRlcyA9IHRoaXMuc3RhdGUudGVtcGxhdGVzXG4gICAgZm9yKGk9MDtpPCB0aGlzLnN0YXRlLnRlbXBsYXRlcy5sZW5ndGg7IGkrKylcbiAgICAgIGlmKHRoaXMuc3RhdGUudGVtcGxhdGVzW2ldLm5hbWUgPT0gdGVtcGxhdGUubmFtZSlcbiAgICAgICAgYnJlYWtcbiAgICBcbiAgICBjb25zb2xlLmxvZyh0ZW1wbGF0ZSlcbiAgICBpZihuZXdUZW1wbGF0ZSl7XG4gICAgICB0ZW1wbGF0ZS5zdWJqZWN0ID0gdGVtcGxhdGUuc3ViamVjdFxuICAgICAgdGVtcGxhdGUubmFtZSA9IHRlbXBsYXRlLm5hbWVcbiAgICAgIHRlbXBsYXRlLmJvZHkgPSB0ZW1wbGF0ZS5ib2R5XG4gICAgICB0ZW1wbGF0ZXMucHVzaCh0ZW1wbGF0ZSlcblxuICAgICAgJC5hamF4KHtcbiAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1RlbXBsYXRlJyxcbiAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgdHlwZTonUE9TVCcsXG4gICAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIG5hbWUgOiB0ZW1wbGF0ZS5uYW1lLFxuICAgICAgICAgIHN1YmplY3Q6IHRlbXBsYXRlLnN1YmplY3QsXG4gICAgICAgICAgYm9keTogdGVtcGxhdGUuYm9keSxcbiAgICAgICAgICB1c2VyOntcbiAgICAgICAgICAgIF9fdHlwZTogJ1BvaW50ZXInLFxuICAgICAgICAgICAgY2xhc3NOYW1lOidfVXNlcicsXG4gICAgICAgICAgICBvYmplY3RJZDpKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikub2JqZWN0SWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb21wYW55OkpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55LFxuICAgICAgICB9KSxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHRlbXBsYXRlc1tpXS5zdWJqZWN0ID0gdGVtcGxhdGUuc3ViamVjdFxuICAgICAgdGVtcGxhdGVzW2ldLmJvZHkgPSB0ZW1wbGF0ZS5ib2R5XG5cbiAgICAgICQuYWpheCh7XG4gICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9UZW1wbGF0ZS8nK3RlbXBsYXRlc1tpXS5vYmplY3RJZCxcbiAgICAgICAgdHlwZTonUFVUJyxcbiAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbmFtZSA6IHRlbXBsYXRlLm5hbWUsXG4gICAgICAgICAgc3ViamVjdDogdGVtcGxhdGUuc3ViamVjdCxcbiAgICAgICAgICBib2R5OiB0ZW1wbGF0ZS5ib2R5LFxuICAgICAgICB9KSxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7dGVtcGxhdGVzOiB0ZW1wbGF0ZXMgfSlcblxuICB9LFxuXG4gIHRvZ2dsZVRlbXBsYXRlRWRpdE1lbnU6IGZ1bmN0aW9uKGN1cnJlbnRUZW1wbGF0ZSwgZWRpdE1vZGUpIHtcbiAgICBlZGl0TW9kZSA9IChlZGl0TW9kZSkgPyB0cnVlIDogZmFsc2VcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGN1cnJlbnRUZW1wbGF0ZTogY3VycmVudFRlbXBsYXRlLFxuICAgICAgdGVtcGxhdGVEZXRhaWxNb2RlOiAhdGhpcy5zdGF0ZS50ZW1wbGF0ZURldGFpbE1vZGUsXG4gICAgfSlcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gQ2FtcGFpZ25zXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNlbGVjdGVkU2NyZWVuOiAnT3ZlcnZpZXcnLFxuICAgIH1cbiAgfSxcblxuICBjaGFuZ2VTZWxlY3RlZENhbXBhaWduOiBmdW5jdGlvbihjYW1wYWlnbikge1xuICAgIC8vdGhpcy5wcm9wcy50b2dnbGVTY3JlZW4oJ0NhbXBhaWduRGV0YWlsJylcbiAgICB0aGlzLnByb3BzLmNoYW5nZVNlbGVjdGVkQ2FtcGFpZ24oJ0NhbXBhaWduRGV0YWlsJywgY2FtcGFpZ24pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBjYW1wYWlnbnMgPSBbXVxuICAgIGNvbnNvbGUubG9nKHRoaXMucHJvcHMpXG4gICAgZm9yKGk9MDtpPCB0aGlzLnByb3BzLmNhbXBhaWducy5sZW5ndGg7IGkrKyl7IFxuICAgICAgY2FtcGFpZ25zLnB1c2goQ2FtcGFpZ25Sb3coe1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlU2NyZWVuOiB0aGlzLnRvZ2dsZVNjcmVlbiwgXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VTZWxlY3RlZENhbXBhaWduOiB0aGlzLmNoYW5nZVNlbGVjdGVkQ2FtcGFpZ24sIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FtcGFpZ246IHRoaXMucHJvcHMuY2FtcGFpZ25zW2ldfSkgKVxuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtvdmVyZmxvdzonYXV0bycsaGVpZ2h0OjU1MH19LCBcbiAgICAgICAgUmVhY3QuRE9NLnRhYmxlKHtjbGFzc05hbWU6IFwidGFibGUgdGFibGUtc3RyaXBlZFwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRoZWFkKG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIkNhbXBhaWduIE5hbWVcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiUHJvc3BlY3QgTGlzdFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInfX0sIFwiRGVsaXZlcmVkXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9fSwgXCJPcGVuZWRcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyxkaXNwbGF5Oidub25lJ319LCBcIlJlcGxpZWRcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyxkaXNwbGF5Oidub25lJ319LCBcIkxpbmsgQ2xpY2tzXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9fSwgXCJCb3VuY2VzXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt3aWR0aDoxNTAsdGV4dEFsaWduOidjZW50ZXInfX0sIFwiIFwiKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS50Ym9keShudWxsLCBcbiAgICAgICAgICAgIGNhbXBhaWduc1xuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgQ2FtcGFpZ25Sb3cgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdDYW1wYWlnblJvdycsXG4gIHRvZ2dsZVNjcmVlbjogZnVuY3Rpb24oKSB7XG4gICAgLy90aGlzLnByb3BzLnRvZ2dsZVNjcmVlbigpXG4gICAgdGhpcy5wcm9wcy5jaGFuZ2VTZWxlY3RlZENhbXBhaWduKHRoaXMucHJvcHMuY2FtcGFpZ24pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBwcm9zcGVjdF9saXN0ID0gKHRoaXMucHJvcHMuY2FtcGFpZ24ucHJvc3BlY3RfbGlzdCkgPyB0aGlzLnByb3BzLmNhbXBhaWduLnByb3NwZWN0X2xpc3QgOiB7bGlzdF90eXBlOlwiXCIsIG5hbWU6XCJcIn1cbiAgICBpZihwcm9zcGVjdF9saXN0Lmxpc3RfdHlwZSA9PSBcInNpZ25hbF9saXN0XCIpXG4gICAgICAgIGljb25UeXBlID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS13aWZpXCIsIHN0eWxlOiB7bWFyZ2luUmlnaHQ6NX19KVxuICAgIGVsc2UgaWYocHJvc3BlY3RfbGlzdC5saXN0X3R5cGUgPT0gXCJtaW5pbmdfam9iXCIpXG4gICAgICAgIGljb25UeXBlID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG91ZC1kb3dubG9hZFwiLCBzdHlsZToge21hcmdpblJpZ2h0OjV9fSlcbiAgICBlbHNlIFxuICAgICAgICBpY29uVHlwZSA9XCJcIlxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udHIoe3N0eWxlOiB7Y3Vyc29yOidwb2ludGVyJ30sIG9uQ2xpY2s6IHRoaXMudG9nZ2xlU2NyZWVufSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBcIiBcIiwgUmVhY3QuRE9NLmg2KG51bGwsIFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5jYW1wYWlnbi5uYW1lXG4gICAgICAgICksIFwiIFwiKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBcIiBcIiwgUmVhY3QuRE9NLmg2KG51bGwsIFxuICAgICAgICAgICAgaWNvblR5cGUsIFxuICAgICAgICAgICAgcHJvc3BlY3RfbGlzdC5uYW1lXG4gICAgICAgICksIFwiIFwiKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcicscGFkZGluZzoxMn19LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImJhZGdlXCIsIHN0eWxlOiB7YmFja2dyb3VuZENvbG9yOicjZjBhZDRlJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGFwZXItcGxhbmVcIn0pLCBcIiDCoFwiICsgJyAnICtcbiAgICAgICAgICAgIFwiMTAwJVwiXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyxwYWRkaW5nOjEyfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwibGFiZWwgbGFiZWwtc3VjY2Vzc1wifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWV5ZVwifSksIFwiIMKgXCIgKyAnICcgK1xuICAgICAgICAgICAgXCIxMDAlXCIpXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInLHBhZGRpbmc6MTIsZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1wcmltYXJ5XCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbWFpbC1yZXBseVwifSksIFwiIMKgXCIgKyAnICcgK1xuICAgICAgICAgICAgXCIxMDAlXCIpXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInLHBhZGRpbmc6MTIsZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1pbmZvXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZXh0ZXJuYWwtbGluay1zcXVhcmVcIn0pLCBcIiDCoFwiICsgJyAnICtcbiAgICAgICAgICAgIFwiMTglXCIpXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInLHBhZGRpbmc6MTJ9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZXhjbGFtYXRpb24tY2lyY2xlXCJ9KSwgXCIgwqBcIiArICcgJyArXG4gICAgICAgICAgICBcIjExJVwiKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyxwYWRkaW5nVG9wOjEyfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgYnRuLXhzXCIsIFxuICAgICAgICAgICAgc3R5bGU6IHtiYWNrZ3JvdW5kSW1hZ2U6ICdsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCAjMDA5NmZmIDAlLCAjMDA1ZGZmIDEwMCUpICFpbXBvcnRhbnQ7JyxkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY29weVwiLCBzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnfX0pLCBcIsKgIENsb25lXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuLWRlZmF1bHRcIiwgXG4gICAgICAgICAgICBzdHlsZToge21hcmdpbkxlZnQ6NX19LCBcIiBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS10cmFzaC1vXCJ9KSlcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcicscGFkZGluZzoxMixkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDQoe3N0eWxlOiB7bWFyZ2luOjB9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLXN1Y2Nlc3NcIn0sIFwiUmVhZHlcIilcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG4vLyBcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy9Db21wYW55UHJvc3BlY3RcbiAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgcHJvc3BlY3QgPSB0aGlzLnByb3BzLnByb3NwZWN0XG4gICAgd2Vic2l0ZSA9IChwcm9zcGVjdC53ZWJzaXRlKSA/IFJlYWN0LkRPTS5hKHtocmVmOiAnaHR0cDovLycrcHJvc3BlY3Qud2Vic2l0ZX0sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZ2xvYmVcIn0pKSA6ICcnXG4gICAgbGlua2VkaW5fcHJvZmlsZSA9IChwcm9zcGVjdC5wcm9maWxlICE9IFwiXCIpID8gUmVhY3QuRE9NLmEoe2hyZWY6IHByb3NwZWN0LnByb2ZpbGV9LCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWxpbmtlZGluLXNxdWFyZVwifSkpIDogJydcblxuICAvKlxuICAgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6XCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14c1wiXG4gICAgICAgICAgICAgIHN0eWxlPXt7YmFja2dyb3VuZDogJ2xpbmVhci1ncmFkaWVudCgjMzRjNTIwLCMyMTkyMTEpJ319PiBcbiAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtc2VhcmNoXCIgLz4gJm5ic3A7XG4gICAgICAgICAgICAgIEZpbmQgUHJvc3BlY3RzXG4gICAgICAgICAgICA8L2E+XG4gICovXG5cbiAgY29uc29sZS5sb2dcblxuICAvLzx0ZD48YSBocmVmPVwiamF2YXNjcmlwdDpcIiBvbkNsaWNrPXt0aGlzLmRlbGV0ZVByb3NwZWN0fT48aSBjbGFzc05hbWU9XCJmYSBmYS10aW1lcy1jaXJjbGVcIiAvPjwvYT48L3RkPlxuICAgIHJldHVybiAoXG4gICAgICAgIFJlYWN0LkRPTS50cihudWxsLCBcbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7d2lkdGg6JzMwMHB4J319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnfX0sIHByb3NwZWN0Lm5hbWUpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtmb250V2VpZ2h0Oic0MDAnLG1hcmdpbjonMHB4J319LCBwcm9zcGVjdC5oZWFkY291bnQpXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbjonMHB4J319LCBtb21lbnQocHJvc3BlY3QuY3JlYXRlZEF0LCdZWVlZLU1NLUREVGg6bW06c3MnKS5mcm9tTm93KCkpKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbjonMHB4J319LCBwcm9zcGVjdC5pbmR1c3RyeSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInLHdpZHRoOjEzNyxkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwibGFiZWwgbGFiZWwtcHJpbWFyeVwiLCBzdHlsZToge2Rpc3BsYXk6ICdibG9jaycsIHdpZHRoOiAnYXV0bycsIG1hcmdpblJpZ2h0OiAnYXV0bycsIG1hcmdpbkxlZnQ6ICdhdXRvJywgd2lkdGg6ICcyNXB4J319LCBcIjBcIilcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLWluZm9cIn0sIFwiSGlyaW5nXCIpKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3dpZHRoOjMyMH19LCBcbiAgICAgICAgICAgIFwiwqAgwqBcIiwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14c1wiLCBcbiAgICAgICAgICAgICAgb25DbGljazogdGhpcy5vcGVuTGlua2VkaW5Db21wYW55UHJvZmlsZSwgXG4gICAgICAgICAgICAgIHN0eWxlOiB7YmFja2dyb3VuZEltYWdlOiAnbGluZWFyLWdyYWRpZW50KDE4MGRlZywgIzAwOTZmZiAwJSwgIzAwNWRmZiAxMDAlKSd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc2VhcmNoXCJ9KSwgXCIgwqBcIiArICcgJyArXG4gICAgICAgICAgICAgIFwiU2VhcmNoIFByb2ZpbGVzXCJcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgXCLCoCDCoFwiLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzXCIsIFxuICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLm9wZW5TaW1pbGFyQ29tcGFuaWVzLCBcbiAgICAgICAgICAgICAgc3R5bGU6IHtiYWNrZ3JvdW5kSW1hZ2U6ICdsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCAjMDA5NmZmIDAlLCAjMDA1ZGZmIDEwMCUpJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jb3B5XCJ9KSwgXCIgwqBcIiArICcgJyArXG4gICAgICAgICAgICAgIFwiRmluZCBTaW1pbGFyIENvbXBhbmllc1wiXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFwiIFwiLCBsaW5rZWRpbl9wcm9maWxlLCBcIiDCoCBcIiwgd2Vic2l0ZSwgXCIgXCIpXG4gICAgICAgIClcbiAgICApO1xuICB9LFxuXG4gIG9wZW5MaW5rZWRpbkNvbXBhbnlQcm9maWxlOiBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY2lkID0gdGhpcy5wcm9wcy5wcm9zcGVjdC5wcm9maWxlLnNwbGl0KCc/JylbMF0uc3BsaXQoJy9jb21wYW55LycpWzFdXG4gICAgd2luZG93Lm9wZW4oXCJodHRwczovL3d3dy5saW5rZWRpbi5jb20vdnNlYXJjaC9wP2ZfQ0M9XCIrY2lkKVxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgfSxcblxuICBvcGVuU2ltaWxhckNvbXBhbmllczogZnVuY3Rpb24oZSkge1xuICAgIGNpZCA9IHRoaXMucHJvcHMucHJvc3BlY3QucHJvZmlsZS5zcGxpdCgnPycpWzBdLnNwbGl0KCcvY29tcGFueS8nKVsxXVxuICAgIHdpbmRvdy5vcGVuKFwiaHR0cHM6Ly93d3cubGlua2VkaW4uY29tL3ZzZWFyY2gvYz9yc2lkPTUyNjQ0MDM3MTQwOTE4NDc2ODE3NSZwaXZvdFR5cGU9c2ltJnBpZD1cIitjaWQrXCImdHJrPXNpbV9jb21wYW5pZXNfcmVzX3NpbSZ0cmtJbmZvPVZTUlBzZWFyY2hJZCUzQTUyNjQ0MDM3MTQwOTE4NDc2ODE3NSUyQ1ZTUlB0YXJnZXRJZCUzQTEwMjUlMkNWU1JQY21wdCUzQXByaW1hcnlcIilcbiAgfSxcblxuICBkZWxldGVQcm9zcGVjdDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcm9wcy5kZWxldGVQcm9zcGVjdCh0aGlzLnByb3BzLnByb3NwZWN0Lm9iamVjdElkLCAnQ29tcGFueVByb3NwZWN0JylcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxudmFyIENvbXBhbnlQcm9zcGVjdCA9IHJlcXVpcmUoJy4vY29tcGFueS5qcy5taW4uanMnKTtcbnZhciBMb2FkaW5nU3Bpbm5lciA9IHJlcXVpcmUoJy4vbG9hZGluZ19zcGlubmVyLmpzLm1pbi5qcycpXG52YXIgU2lkZU1lbnVQcm9zcGVjdHMgPSByZXF1aXJlKCcuL3NpZGVfbWVudV91c2VyX3Byb3NwZWN0cy5qcy5taW4uanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4geyAgcHJvc3BlY3RzICAgOiBbXSxcbiAgICAgICAgICAgICAgY3VycmVudFBhZ2UgOiAxLFxuICAgICAgICAgICAgICBsb2FkaW5nICAgICA6IHRydWUsXG4gICAgICAgICAgICAgIHBhZ2VzICAgICAgIDogMSxcbiAgICAgICAgICAgICAgY291bnQgICAgICAgOiBcIn5cIiwgfVxuICB9LFxuICAvKlxuICAgKlxuICAgIGNpZCA9IHRoaXMucHJvcHMucHJvc3BlY3QucHJvZmlsZS5zcGxpdCgnPycpWzBdLnNwbGl0KCcvY29tcGFueS8nKVsxXVxuICAgIGNvbnNvbGUubG9nKHRoaXMucHJvcHMpXG4gICAgd2luZG93Lm9wZW4oXCJodHRwczovL3d3dy5saW5rZWRpbi5jb20vdnNlYXJjaC9wP2ZfQ0M9XCIrY2lkKVxuICAqL1xuICBcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnY29tcGFueScpXG4gICAgcHJvc3BlY3RzID0gW11cbiAgICBmb3IoaT0wO2k8dGhpcy5zdGF0ZS5wcm9zcGVjdHMubGVuZ3RoO2krKykge1xuICAgICAgdXJsID0gdGhpcy5zdGF0ZS5wcm9zcGVjdHNbaV0udXJsXG5cbiAgICAgIGlmKHVybCAhPSBcIm5vIGxpbmtlZGluIHdlYnNpdGVcIiAmJiB0eXBlb2YodXJsKSAhPSBcInVuZGVmaW5lZFwiICYmIHVybCAhPSBcIlwiKXtcbiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoJ2h0dHA6Ly8nLCcnKVxuICAgICAgICB0aGVfbGluayA9IFJlYWN0LkRPTS5hKHtocmVmOiAnaHR0cDovLycrdXJsfSwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1nbG9iZVwifSkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGVfbGluayA9IFwiXCJcbiAgICAgIH1cblxuICAgICAgcHJvZmlsZSA9IHRoaXMuc3RhdGUucHJvc3BlY3RzW2ldLnByb2ZpbGVcbiAgICAgIC8vcHJvZmlsZSA9IHByb2ZpbGUucmVwbGFjZSgnaHR0cDovLycsJycpXG4gICAgICBsaSA9IFJlYWN0LkRPTS5hKHtocmVmOiAnaHR0cDovLycrcHJvZmlsZX0sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbGlua2VkaW4tc3F1YXJlXCJ9KSlcblxuICAgICAgaWYodGhpcy5wcm9wcy5wcm9zcGVjdFR5cGUgPT0gJ1Byb3NwZWN0Jykge1xuICAgICAgICBwcm9zcGVjdHMucHVzaChcbiAgICAgICAgICBVc2VyUHJvc3BlY3Qoe2RlbGV0ZVByb3NwZWN0OiB0aGlzLmRlbGV0ZVByb3NwZWN0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3NwZWN0OiB0aGlzLnN0YXRlLnByb3NwZWN0c1tpXSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHRoaXMuZ2VuZXJhdGVfaWQoKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rOiB0aGVfbGluaywgbGk6IGxpfSlcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvc3BlY3RzLnB1c2goXG4gICAgICAgICAgQ29tcGFueVByb3NwZWN0KHtkZWxldGVQcm9zcGVjdDogdGhpcy5kZWxldGVQcm9zcGVjdCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHRoaXMuZ2VuZXJhdGVfaWQoKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9zcGVjdDogdGhpcy5zdGF0ZS5wcm9zcGVjdHNbaV19KVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgcHJldmlvdXMgPSAodGhpcy5zdGF0ZS5jdXJyZW50UGFnZSAtIDEpID8gJycgOiAnZGlzYWJsZWQnXG4gICAgZm9yd2FyZCA9ICh0aGlzLnN0YXRlLmN1cnJlbnRQYWdlID09IHRoaXMuc3RhdGUucGFnZXMpID8gJ2Rpc2FibGVkJyA6ICcnXG5cbiAgICBsb3dlckxpbWl0ID0gKHRoaXMuc3RhdGUuY3VycmVudFBhZ2UtMSkqMTAwXG4gICAgdXBwZXJMaW1pdCA9IHRoaXMuc3RhdGUuY3VycmVudFBhZ2UqMTAwXG5cbiAgICBsb3dlckxpbWl0ID0gKGxvd2VyTGltaXQpID8gbG93ZXJMaW1pdCA6IDFcbiAgICB1cHBlckxpbWl0ID0gKHVwcGVyTGltaXQgPiB0aGlzLnN0YXRlLmNvdW50KSA/IHRoaXMuc3RhdGUuY291bnQgOiB1cHBlckxpbWl0XG4gIFxuICAgIGNvbnNvbGUubG9nKHByb3NwZWN0cy5sZW5ndGgpXG4gICAgY29tcGFueVN0eWxlPSAocHJvc3BlY3RzLmxlbmd0aCkgPyB7cGFkZGluZzonMCd9IDoge2Rpc3BsYXk6J25vbmUnfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyIGJnLXJhZGl1c1wiLCBzdHlsZToge3dpZHRoOicxMDAlJyxwYWRkaW5nOicwJ319LCBcbiAgICAgICAgKHByb3NwZWN0cy5sZW5ndGggPT0gMCAmJiB0aGlzLnN0YXRlLmxvYWRpbmcgPT0gZmFsc2UpID8gRW1wdHlDb21wYW55UHJvc3BlY3RzUGFuZWwobnVsbCkgOiBcIlwiLCBcbiAgICAgICAgKHRoaXMuc3RhdGUubG9hZGluZykgPyBMb2FkaW5nU3Bpbm5lcihudWxsKSA6IFwiXCIsIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTEyXCIsIHN0eWxlOiBjb21wYW55U3R5bGV9LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJhdXRvc2Nyb2xsXCIsIHN0eWxlOiB7aGVpZ2h0Oic0MDBweCcsb3ZlcmZsb3c6J2F1dG8nfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRhYmxlKHtjbGFzc05hbWU6IFwidGFibGUgdGFibGUtc3RyaXBlZFwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50aGVhZCh7c3R5bGU6IHtiYWNrZ3JvdW5kQ29sb3I6J3doaXRlJ319LCBcbiAgICAgICAgICAgICAgICBDb21wYW55UHJvc3BlY3RIZWFkZXIobnVsbClcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50Ym9keShudWxsLCBcbiAgICAgICAgICAgICAgICBwcm9zcGVjdHNcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1mb290aW5nXCIsIGlkOiBcIm5hdmJhclwiLCBzdHlsZToge2hlaWdodDonMzVweCcscGFkZGluZzonMHB4JyxwYWRkaW5nVG9wOic3cHgnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luUmlnaHQ6JzIwcHgnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIHN0eWxlOiB7bWFyZ2luUmlnaHQ6JzVweCd9LCBvbkNsaWNrOiB0aGlzLnBhZ2luYXRlUHJldmlvdXMsIGNsYXNzTmFtZTogXCJibHVlLWdyYWRpZW50IGJ0biBidG4tcHJpbWFyeSBidG4teHMgXCIgKyBwcmV2aW91c30sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZmFzdC1iYWNrd2FyZFwifSkpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLnBhZ2luYXRlUHJldmlvdXMsIGNsYXNzTmFtZTogXCJibHVlLWdyYWRpZW50IGJ0biBidG4tcHJpbWFyeSBidG4teHMgXCIgKyBwcmV2aW91c30sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2hldnJvbi1sZWZ0XCJ9KSksIFxuICAgICAgICAgIFwiwqAgwqBcIiwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJcIn0sIGxvd2VyTGltaXQgKyAnIC0gJyt1cHBlckxpbWl0Kycgb2YgJyt0aGlzLnN0YXRlLmNvdW50KSwgXG4gICAgICAgICAgXCLCoCDCoFwiLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLnBhZ2luYXRlRm9yd2FyZCwgY2xhc3NOYW1lOiBcImJsdWUtZ3JhZGllbnQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBcIiArIGZvcndhcmR9LCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZXZyb24tcmlnaHRcIn0pKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgc3R5bGU6IHttYXJnaW5MZWZ0Oic1cHgnfSwgb25DbGljazogdGhpcy5wYWdpbmF0ZUZvcndhcmQsIGNsYXNzTmFtZTogXCJibHVlLWdyYWRpZW50IGJ0biBidG4tcHJpbWFyeSBidG4teHMgXCIgKyBmb3J3YXJkfSwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1mYXN0LWZvcndhcmRcIn0pKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXNzcyA9IHRoaXM7XG4gICAgcGFyc2VfaGVhZGVycyA9IHsnWC1QYXJzZS1BcHBsaWNhdGlvbi1JZCc6J044NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkonLCAnWC1QYXJzZS1SRVNULUFQSS1LZXknOidWTjZFd1Z5Qlp3TzF1cGhzQlBzYXU4dDdKUVJwMDBVTTNLWXNpaVFiJ31cbiAgICBjb21wYW55ID0gSlNPTi5zdHJpbmdpZnkoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLmNvbXBhbnkpXG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Db21wYW55UHJvc3BlY3QnLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGhlYWRlcnM6IHBhcnNlX2hlYWRlcnMsXG4gICAgICBhc3luYzogdHJ1ZSxcbiAgICAgIGRhdGE6ICd3aGVyZT17XCJjb21wYW55XCI6Jytjb21wYW55Kyd9JmNvdW50PTEmb3JkZXI9LWNyZWF0ZWRBdCcsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe3Byb3NwZWN0czogcmVzLnJlc3VsdHN9KVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe2NvdW50OiByZXMuY291bnR9KVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe3BhZ2VzOiBNYXRoLmNlaWwocmVzLmNvdW50LzEwMCl9KVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe2xvYWRpbmc6IGZhbHNlfSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJylcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIGdlbmVyYXRlX2lkIDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAnXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSk7XG4gIH0sXG59KTtcblxudmFyIFNpZGVNZW51Q29tcGFueVByb3NwZWN0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1NpZGVNZW51Q29tcGFueVByb3NwZWN0cycsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIFxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTJcIiwgc3R5bGU6IHtwYWRkaW5nOicwJyxoZWlnaHQ6JzQwMHB4JyxiYWNrZ3JvdW5kQ29sb3I6JyNlMGU5ZWUnLGJvcmRlclJpZ2h0OicxcHggc29saWQgI2IwYjhiZicsdGV4dEFsaWduOidjZW50ZXInfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicHJvc3BlY3QtbGlzdC1oZWFkZXJcIn0sIFxuICAgICAgICAgIFwiTGlzdHNcIlxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cC12ZXJ0aWNhbFwiLCBzdHlsZToge3dpZHRoOicxMDAlJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBjbGFzc05hbWU6IFwibGlzdC1uYW1lcyBidG4gYnRuLWRlZmF1bHRcIn0sIFwiVGVtcGxhdGVzXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBjbGFzc05hbWU6IFwibGlzdC1uYW1lcyBidG4gYnRuLWRlZmF1bHRcIn0sIFwiU2NoZWR1bGVzXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBjbGFzc05hbWU6IFwibGlzdC1uYW1lcyBidG4gYnRuLWRlZmF1bHRcIn0sIFwiUnVsZXNcIilcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnlcIiwgXG4gICAgICAgICAgICAgIHN0eWxlOiB7IGJhY2tncm91bmRJbWFnZTogJ2xpbmVhci1ncmFkaWVudCgxODBkZWcsICMwMDk2ZmYgMCUsICMwMDVkZmYgMTAwJSknfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1cy1jaXJjbGVcIn0pLCBcIsKgTmV3IENsYXNzXCJcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5icihudWxsKVxuICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgcGFnaW5hdGVQcmV2aW91czogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ3ByZXZpb3VzJylcbiAgICBjb25zb2xlLmxvZygodGhpcy5zdGF0ZS5jdXJyZW50UGFnZSAtIDEpKjEwMClcbiAgICB0aGlzcyA9IHRoaXM7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3Q/c2tpcD0nKyh0aGlzcy5zdGF0ZS5jdXJyZW50UGFnZS0yKSoxMDAsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgaGVhZGVyczogcGFyc2VfaGVhZGVycyxcbiAgICAgIGRhdGE6ICd3aGVyZT17XCJjb21wYW55XCI6Jytjb21wYW55Kyd9JmNvdW50PTEnLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe3Byb3NwZWN0czogcmVzLnJlc3VsdHN9KVxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7Y3VycmVudFBhZ2U6IHRoaXNzLnN0YXRlLmN1cnJlbnRQYWdlIC0gMX0pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBwYWdpbmF0ZUZvcndhcmQ6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdmb3J3YXJkJylcblxuICAgIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdD9za2lwPScrdGhpc3Muc3RhdGUuY3VycmVudFBhZ2UqMTAwLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGhlYWRlcnM6IHBhcnNlX2hlYWRlcnMsXG4gICAgICBkYXRhOiAnd2hlcmU9e1wiY29tcGFueVwiOicrY29tcGFueSsnfSZjb3VudD0xJyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtwcm9zcGVjdHM6IHJlcy5yZXN1bHRzfSlcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2N1cnJlbnRQYWdlOiB0aGlzcy5zdGF0ZS5jdXJyZW50UGFnZSArIDF9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG59KTtcblxudmFyIEVtcHR5Q29tcGFueVByb3NwZWN0c1BhbmVsID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnRW1wdHlDb21wYW55UHJvc3BlY3RzUGFuZWwnLFxuICBvcGVuTGlua2VkaW5XaW5kb3c6IGZ1bmN0aW9uKCkge1xuICAgIHdpbmRvdy5vcGVuKCdodHRwczovL3d3dy5saW5rZWRpbi5jb20vdnNlYXJjaC9jP3R5cGU9Y29tcGFuaWVzJylcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLW9mZnNldC0zIGNvbC1tZC02XCIsIHN0eWxlOiB7aGVpZ2h0OjQwMH19LCBcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0XCIsIHN0eWxlOiB7bWFyZ2luVG9wOjEwMCxoZWlnaHQ6MjAwfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtYm9keVwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmgxKHtjbGFzc05hbWU6IFwibGVhZFwiLCBzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcIlN0YXJ0IFByb3NwZWN0aW5nIE9uIExpbmtlZGluXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLm9wZW5MaW5rZWRpbldpbmRvdywgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2Vzc1wiLCBzdHlsZToge2JhY2tncm91bmRJbWFnZTogJ2xpbmVhci1ncmFkaWVudCgxODBkZWcsICMwMDk2ZmYgMCUsICMwMDVkZmYgMTAwJSkgIWltcG9ydGFudCcsZGlzcGxheTonYmxvY2snLG1hcmdpblJpZ2h0OidhdXRvJyxtYXJnaW5MZWZ0OidhdXRvJyx3aWR0aDoyMDAsIG1hcmdpblRvcDo1MH19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc2VhcmNoXCJ9KSwgXCIgwqBcIiArICcgJyArXG4gICAgICAgICAgICBcIlNlYXJjaCBmb3IgY29tcGFuaWVzIVwiKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgQ29tcGFueVByb3NwZWN0SGVhZGVyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ29tcGFueVByb3NwZWN0SGVhZGVyJyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnRyKG51bGwsIFxuICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJOYW1lXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiQWRkZWQgT25cIiksIFxuICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJJbmR1c3RyeVwiKSwgXG4gICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIiMgb2YgUHJvc3BlY3RzXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiU2lnbmFsc1wiKSwgXG4gICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIsKgXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiwqBcIilcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIFNpZ25hbENhcmRcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBjb21wYW55ID0gdGhpcy5wcm9wcy5jb21wYW55XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0IHNpZ25hbC1jYXJkXCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWJvZHlcIiwgc3R5bGU6IHtwYWRkaW5nTGVmdDoyNSwgcGFkZGluZ1JpZ2h0OjI1fX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNCh7c3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOicxMDAlJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZTogeyBmbG9hdDonbGVmdCcsbWF4V2lkdGg6ICc2MCUnLCB3aGl0ZVNwYWNlOiAnbm93cmFwJyxcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsIHRleHRPdmVyZmxvdzogJ2VsbGlwc2lzJ319LCBcbiAgICAgICAgICAgICAgY29tcGFueS5uYW1lKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLXN1Y2Nlc3NcIiwgXG4gICAgICAgICAgICAgIHN0eWxlOiB7bWFyZ2luTGVmdDo3LCBmbG9hdDoncmlnaHQnLGZvbnRTaXplOjEyLFxuICAgICAgICAgICAgICAgIG1heFdpZHRoOiAnNDAlJywgd2hpdGVTcGFjZTogJ25vd3JhcCcsXG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLCB0ZXh0T3ZlcmZsb3c6ICdlbGxpcHNpcyd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc3VpdGNhc2VcIn0pLCBcIiDCoFwiLCBcbiAgICAgICAgICAgICAgKGNvbXBhbnkuc2lnbmFscykgPyBjb21wYW55LnNpZ25hbHNbMF0uam9iX3RpdGxlIDogXCJcIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3NcIiwgXG4gICAgICAgICAgICBzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luVG9wOjE1LCBmb250V2VpZ2h0Oidib2xkJ319LCBcbiAgICAgICAgICAgIFwiUHJvc3BlY3QgVGhpcyBDb21wYW55XCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00ucCh7c3R5bGU6IHtmb250U2l6ZToxMix3aWR0aDonNzUlJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKG51bGwsIFxuICAgICAgICAgICAgKGNvbXBhbnkuc2lnbmFscykgPyBjb21wYW55LnNpZ25hbHNbMF0uc3VtbWFyeSA6IFwiXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbWFwLW1hcmtlclwifSksIFxuICAgICAgICAgICAgIFwiwqBcIiwgKGNvbXBhbnkuc2lnbmFscykgPyBjb21wYW55LnNpZ25hbHNbMF0ubG9jYXRpb24gOiBcIlwiXG4gICAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBjcmVhdGVMaXN0TW9kYWxcbiAgY3JlYXRlTGlzdDogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJCgnI2xpc3RUaXRsZScpLnZhbCgpKVxuXG4gICAgZGF0YSA9ICB7XG4gICAgICAnbmFtZScgICAgICAgIDogJCgnI2xpc3RUaXRsZScpLnZhbCgpLnRyaW0oKSwgICAvL1dhaXRpbmcgLCBSdW5uaW5nXG4gICAgICAndXNlcicgICAgICAgIDogeyAnX190eXBlJzonUG9pbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzTmFtZSc6J19Vc2VyJyxcbiAgICAgICAgICAgICAgICAgICAgICAnb2JqZWN0SWQnOid4V0VTaXc1U21kJyB9LFxuICAgIH1cblxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RMaXN0JyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpXG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGRhdGEuY291bnQgPSAwXG5cbiAgICB0aGlzLnByb3BzLmNyZWF0ZUxpc3QoZGF0YSlcbiAgICBcbiAgICAkKCcjY3JlYXRlTGlzdE1vZGFsJykubW9kYWwoJ2hpZGUnKVxuICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnbW9kYWwtb3BlbicpO1xuICAgICQoJy5tb2RhbC1iYWNrZHJvcCcpLnJlbW92ZSgpO1xuICAgIC8vJCgnYnV0dG9uLmNsb3NlJykuY2xpY2soKVxuICB9LFxuXG4gIGNyZWF0ZUNhbXBhaWduOiBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy9jb25zb2xlLmxvZygkKCcjbmV3TGlzdE5hbWUnKS52YWwoKSlcbiAgICBuZXdDYW1wYWlnbk5hbWUgPSAkKCcjbmV3Q2FtcGFpZ25OYW1lJykudmFsKClcbiAgICBwcm9zcGVjdExpc3ROYW1lID0gJCgnI3Byb3NwZWN0X2xpc3RzJykudmFsKClcbiAgICB0aGlzcyA9IHRoaXNcbiAgICBmb3IoaT0wO2k8IHRoaXMucHJvcHMucHJvc3BlY3RMaXN0cy5sZW5ndGg7IGkrKyl7XG4gICAgICBpZih0aGlzLnByb3BzLnByb3NwZWN0TGlzdHNbaV0ubmFtZSA9PSBwcm9zcGVjdExpc3ROYW1lKXtcbiAgICAgICAgcHJvc3BlY3RfbGlzdCA9IHRoaXMucHJvcHMucHJvc3BlY3RMaXN0c1tpXTsgXG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZihuZXdDYW1wYWlnbk5hbWUudHJpbSgpICE9IFwiXCIpXG4gICAgICB0aGlzLnByb3BzLmNyZWF0ZUNhbXBhaWduKHtcbiAgICAgICAgbmFtZTogbmV3Q2FtcGFpZ25OYW1lLFxuICAgICAgICBwcm9zcGVjdF9saXN0OiBwcm9zcGVjdF9saXN0XG4gICAgICB9KVxuICAgIC8vIERpc2FibGUgTW9kYWxcbiAgICAkKCcubW9kYWwtYmFja2Ryb3AnKS5jbGljaygpXG4gICAgJCgnLmZhZGUnKS5jbGljaygpXG4gICAgJCgnI25ld0NhbXBhaWduTmFtZScpLnZhbCgnJylcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHByb3NwZWN0X2xpc3RzID0gW11cbiAgICBmb3IoaT0wO2k8IHRoaXMucHJvcHMucHJvc3BlY3RMaXN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgcHJvc3BlY3RfbGlzdHMucHVzaCggUmVhY3QuRE9NLm9wdGlvbihudWxsLCB0aGlzLnByb3BzLnByb3NwZWN0TGlzdHNbaV0ubmFtZSkpXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbCBmYWRlIGJzLWNyZWF0ZUNhbXBhaWduLW1vZGFsLXNtXCIsIFxuICAgICAgICAgICB0YWJJbmRleDogXCItMVwiLCByb2xlOiBcImRpYWxvZ1wiLCAnYXJpYS1sYWJlbGxlZGJ5JzogXCJteVNtYWxsTW9kYWxMYWJlbFwiLCBcbiAgICAgICAgICAgJ2FyaWEtaGlkZGVuJzogXCJ0cnVlXCIsIGlkOiBcImNyZWF0ZUxpc3RNb2RhbFwiLCBzdHlsZToge3RvcDonMjAwcHgnfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1zbVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1jb250ZW50XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtaGVhZGVyXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJjbG9zZVwiLCAnZGF0YS1kaXNtaXNzJzogXCJtb2RhbFwifSwgUmVhY3QuRE9NLnNwYW4oeydhcmlhLWhpZGRlbic6IFwidHJ1ZVwifSwgXCLDl1wiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwic3Itb25seVwifSwgXCJDbG9zZVwiKSksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1lbnZlbG9wZVwifSksIFwiIMKgQ3JlYXRlIENhbXBhaWduXCIpXG4gICAgICAgICAgICAgICAgKSwgXG5cbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtYm9keVwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uZm9ybSh7b25TdWJtaXQ6IHRoaXMuY3JlYXRlQ2FtcGFpZ259LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHtpZDogXCJuZXdDYW1wYWlnbk5hbWVcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJFbnRlciBDYW1wYWlnbiBOYW1lLi4uXCIsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbFwifSksIFxuXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5zZWxlY3Qoe2NsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwicHJvc3BlY3RfbGlzdHNcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHttYXJnaW5Ub3A6MjAsbWFyZ2luQm90dG9tOjIwfX0sIFxuICAgICAgICAgICAgICAgICAgICAgIHByb3NwZWN0X2xpc3RzXG4gICAgICAgICAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY3JlYXRlQ2FtcGFpZ24sIFxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3NcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsIHdpZHRoOicxMDAlJ319LCBcbiAgICAgICAgICAgICAgICAgICAgICBcIkNyZWF0ZSBDYW1wYWlnblwiXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBjcmVhdGVDb21wYW55UHJvZmlsZU1vZGFsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbCBmYWRlIGJzLWNyZWF0ZVNpZ25hbC1tb2RhbC1tZFwiLCB0YWJJbmRleDogXCItMVwiLCByb2xlOiBcImRpYWxvZ1wiLCAnYXJpYS1sYWJlbGxlZGJ5JzogXCJteVNtYWxsTW9kYWxMYWJlbFwiLCAnYXJpYS1oaWRkZW4nOiBcInRydWVcIiwgXG4gICAgICAgICAgIGlkOiBcImNyZWF0ZUNvbXBhbnlQcm9maWxlTW9kYWxcIiwgXG4gICAgICAgICAgIHN0eWxlOiB7dG9wOic1MHB4JyxvdmVyZmxvdzonaGlkZGVuJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1kaWFsb2cgbW9kYWwtc21cIiwgc3R5bGU6IHt3aWR0aDo2NTB9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1jb250ZW50XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtaGVhZGVyXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNCh7Y2xhc3NOYW1lOiBcIm1vZGFsLXRpdGxlXCIsIGlkOiBcIm15TW9kYWxMYWJlbFwifSwgXG4gICAgICAgICAgICAgICAgICAgIFwiQ3JlYXRlIENvbXBhbnkgUHJvZmlsZVwiXG4gICAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXNtXCIsIFxuICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5jcmVhdGVDb21wYW55UHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICBzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luVG9wOi0yOCxtYXJnaW5SaWdodDotNX19LCBcbiAgICAgICAgICAgICAgICAgICAgXCJDcmVhdGUgUHJvZmlsZVwiXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICAgICAgQ3JlYXRlSGlyaW5nU2lnbmFsKG51bGwpXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1mb290ZXJcIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICAgIFwiQ2xvc2VcIlxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnlcIn0sIFxuICAgICAgICAgICAgICAgICAgXCJTZW5kIEVtYWlsXCJcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICApO1xuICB9LFxuXG4gIGNyZWF0ZUNvbXBhbnlQcm9maWxlOiBmdW5jdGlvbigpIHtcbiAgICBwcm9maWxlTmFtZSA9ICQoXCIuY29tcGFueS1wcm9maWxlLW5hbWVcIikudmFsKClcbiAgICBpbmR1c3RyeVByb2ZpbGUgPSB7XG4gICAgICAnY2xhc3NOYW1lJzogJ0luZHVzdHJ5UHJvZmlsZScsXG4gICAgICAnaW5kdXN0cmllcycgOiAkKCcuY29tcGFueS1wcm9maWxlLWluZHVzdHJpZXMnKS50YWdzaW5wdXQoJ2l0ZW1zJykucmV2ZXJzZSgpXG4gICAgfVxuXG4gICAgbG9jYXRpb25Qcm9maWxlID0ge1xuICAgICAgJ2NsYXNzTmFtZSc6ICdMb2NhdGlvblByb2ZpbGUnLFxuICAgICAgJ2xvY2FsZScgICAgOiAkKCcuY29tcGFueS1wcm9maWxlLWxvY2F0aW9uJykudGFnc2lucHV0KCdpdGVtcycpLnJldmVyc2UoKVxuICAgIH1cblxuICAgIGVtcGxveWVlUHJvZmlsZSA9IHtcbiAgICAgICdjbGFzc05hbWUnOidFbXBsb3llZVByb2ZpbGUnLCBcbiAgICAgICdlbXBsb3llZXMnOiBfLm1hcCgkKCcjY29tcGFueS1wcm9maWxlLWVtcGxveWVlQnRucycpLmZpbmQoJy5hY3RpdmUnKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXZCdG4peyByZXR1cm4gJChyZXZCdG4pLnRleHQoKS50cmltKCkgfSkucmV2ZXJzZSgpXG4gICAgfVxuXG4gICAgcmV2ZW51ZVByb2ZpbGUgPSB7XG4gICAgICAnY2xhc3NOYW1lJzonUmV2ZW51ZVByb2ZpbGUnLCBcbiAgICAgICdyZXZlbnVlcyc6IF8ubWFwKCQoJyNjb21wYW55LXByb2ZpbGUtY29tcGFueVJldmVudWVCdG5zJykuZmluZCgnLmFjdGl2ZScpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJldkJ0bil7IHJldHVybiAkKHJldkJ0bikudGV4dCgpLnRyaW0oKSB9KS5yZXZlcnNlKClcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhsb2NhdGlvblByb2ZpbGUpXG4gICAgXG4gICAgcHJvZmlsZXMgPSBbaW5kdXN0cnlQcm9maWxlLCBsb2NhdGlvblByb2ZpbGUsXG4gICAgICAgICAgICAgICAgZW1wbG95ZWVQcm9maWxlLCByZXZlbnVlUHJvZmlsZV1cblxuICAgIG5vbmVtcHR5UHJvZmlsZXMgPSBfLmZpbHRlcihwcm9maWxlcywgZnVuY3Rpb24ocHJvZmlsZSkge1xuICAgICAgaWYoXy52YWx1ZXMocHJvZmlsZSlbMV0peyByZXR1cm4gXy52YWx1ZXMocHJvZmlsZSlbMV0ubGVuZ3RoIH1cbiAgICB9KTtcblxuICAgIG5ld1Byb2ZpbGUgPSB7XG4gICAgICBuYW1lOiBwcm9maWxlTmFtZSxcbiAgICAgIHByb2ZpbGVzOiBub25lbXB0eVByb2ZpbGVzLFxuICAgICAgbWluaW5nX2pvYjp0cnVlLFxuICAgICAgdXNlcjp7XG4gICAgICAgIF9fdHlwZTonUG9pbnRlcicsXG4gICAgICAgIGNsYXNzTmFtZTonX1VzZXInLFxuICAgICAgICBvYmplY3RJZDpKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikub2JqZWN0SWRcbiAgICAgIH0sXG4gICAgICBjb21wYW55OiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikuY29tcGFueVxuICAgIH1cblxuICAgIGlmKG5vbmVtcHR5UHJvZmlsZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnBlcnNpc3RTaWduYWwobm9uZW1wdHlQcm9maWxlcywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgXy5vbWl0KG5ld1Byb2ZpbGUsJ3Byb2ZpbGVzJykpXG4gICAgICB0aGlzLnByb3BzLmFkZFByb2ZpbGUobmV3UHJvZmlsZSlcbiAgICAgICQoJy5tb2RhbCcpLmNsaWNrKClcbiAgICB9XG4gIH0sXG5cbiAgcGVyc2lzdFNpZ25hbDogZnVuY3Rpb24obm9uZW1wdHlQcm9maWxlcywgbmV3UHJvZmlsZSkge1xuICAgIGNvbnNvbGUubG9nKCdORVcgUFJPRklMRScpXG4gICAgY29uc29sZS5sb2cobmV3UHJvZmlsZSlcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0UHJvZmlsZScsXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgdHlwZTonUE9TVCcsXG4gICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KG5ld1Byb2ZpbGUpLFxuICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXNzKSB7XG4gICAgICAgIC8vIEFkZCBTaWduYWwgTGlzdFxuICAgICAgICBfLm1hcChub25lbXB0eVByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK18udmFsdWVzKHByb2ZpbGUpWzBdLFxuICAgICAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSggXy5waWNrKHByb2ZpbGUsIF8ua2V5cyhwcm9maWxlKVsxXSkgKSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0UHJvZmlsZS8nK3Jlc3Mub2JqZWN0SWQsXG4gICAgICAgICAgICAgICAgdHlwZTonUFVUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoe3Byb2ZpbGVzOntcbiAgICAgICAgICAgICAgICAgIF9fb3A6ICdBZGRVbmlxdWUnLFxuICAgICAgICAgICAgICAgICAgb2JqZWN0czpbe1xuICAgICAgICAgICAgICAgICAgICBfX3R5cGU6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IF8udmFsdWVzKHByb2ZpbGUpWzBdLFxuICAgICAgICAgICAgICAgICAgICBvYmplY3RJZDpyZXMub2JqZWN0SWRcbiAgICAgICAgICAgICAgICAgIH1dfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcblxuICAgICAgfSxcbiAgICB9KVxuICB9LFxuXG59KTtcblxudmFyIENyZWF0ZUhpcmluZ1NpZ25hbCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0NyZWF0ZUhpcmluZ1NpZ25hbCcsXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICBfLm1hcCgkKCcuaGlyaW5nLXJvbGUnKSxmdW5jdGlvbihpbnB1dCl7JChpbnB1dCkudGFnc2lucHV0KCl9KVxuICAgICQodGhpcy5nZXRET01Ob2RlKCkpLmZpbmQoJy5oaXJpbmctcm9sZScpLnRhZ3NpbnB1dCgpXG4gICAgJCgnLmJvb3RzdHJhcC10YWdzaW5wdXQnKS53aWR0aCg0MDApXG5cbiAgICAkKHRoaXMuZ2V0RE9NTm9kZSgpKS5maW5kKCcuYnRuLWRlZmF1bHQnKS5jbGljayhmdW5jdGlvbihlKSB7XG5cbiAgICAgIGlmKCQoZS50YXJnZXQpLnBhcmVudCgnbGFiZWwnKS5oYXNDbGFzcygnYWN0aXZlJykpXG4gICAgICAgICQoZS50YXJnZXQpLnBhcmVudCgnbGFiZWwnKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcbiAgICAgIGVsc2VcbiAgICAgICAgJChlLnRhcmdldCkucGFyZW50KCdsYWJlbCcpLmFkZENsYXNzKCdhY3RpdmUnKVxuXG4gICAgICBjb25zb2xlLmxvZygkKGUudGFyZ2V0KS5wYXJlbnQoJ2xhYmVsJykpXG4gICAgfSk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpe1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICBSZWFjdC5ET00uZm9ybSh7Y2xhc3NOYW1lOiBcImNyZWF0ZVNpZ25hbFwiLCBvblN1Ym1pdDogdGhpcy5jcmVhdGVTaWduYWx9LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJyxtYXJnaW5Cb3R0b206MjB9fSwgXG4gICAgICAgICAgICAgIFwiQ29tcGFueSBQcm9maWxlIE5hbWU6IMKgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonNzMuMSUnfSwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBjb21wYW55LXByb2ZpbGUtbmFtZVwiLCBcbiAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJDb21wYW55IFByb2ZpbGUgTmFtZSAuLi5cIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtkaXNwbGF5OidibG9jaycsbWFyZ2luQm90dG9tOi0xMH19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgICAgXCJJbmR1c3RyaWVzOiDCoFwiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonNzMuMSUnLG1hcmdpblJpZ2h0OjEwfSwgXG4gICAgICAgICAgICAgICAgICAgJ2RhdGEtcm9sZSc6IFwidGFnc2lucHV0XCIsIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgaGlyaW5nLXJvbGUgY29tcGFueS1wcm9maWxlLWluZHVzdHJpZXNcIn0pLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXhzIGJ0bi1zdWNjZXNzXCIsIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7ZGlzcGxheTonYmxvY2snLG1hcmdpbkJvdHRvbTotMTB9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7d2lkdGg6MTQwLGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICAgIFwiTG9jYXRpb246IMKgXCJcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOic3My4xJScsbWFyZ2luUmlnaHQ6MTB9LCBcbiAgICAgICAgICAgICAgICAgICAnZGF0YS1yb2xlJzogXCJ0YWdzaW5wdXRcIiwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBoaXJpbmctcm9sZSBjb21wYW55LXByb2ZpbGUtbG9jYXRpb25cIn0pLCBcblxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tc3VjY2Vzc1wiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsbWFyZ2luOjAsXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDoxNDAsbWFyZ2luQm90dG9tOjIwfX0sIFwiQ29tcGFueSBTaXplIFwiKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXBcIiwgJ2RhdGEtdG9nZ2xlJzogXCJidXR0b25zXCIsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7d2lkdGg6JzczLjUlJ30sIFxuICAgICAgICAgICAgICAgIGlkOiBcImNvbXBhbnktcHJvZmlsZS1lbXBsb3llZUJ0bnNcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgZW1wbG95ZWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgMSAtIDUwXCJcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGVtcGxveWVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDUwIC0gMjUwXCJcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGVtcGxveWVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDI1MCAtIDEwMDBcIlxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgZW1wbG95ZWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgMTAwMCArXCJcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXCIgXCIsIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtkaXNwbGF5Oidub25lJyxtYXJnaW46MCx3aWR0aDoxNDB9fSwgXG4gICAgICAgICAgICAgICAgXCJBcHByb3guIFJldmVudWUgIFwiKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXBcIiwgJ2RhdGEtdG9nZ2xlJzogXCJidXR0b25zXCIsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9LCBcbiAgICAgICAgICAgICAgICBpZDogXCJjb21wYW55LXByb2ZpbGUtY29tcGFueVJldmVudWVCdG5zXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IHJldmVudWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgXCIsICc8ICQxTSdcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IHJldmVudWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgJDFNIC0gJDVNXCJcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IHJldmVudWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgJDVNIC0gJDI1TVwiXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCByZXZlbnVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiICQyNU0gK1wiXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICksIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHttYXJnaW5Ub3A6MTB9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7d2lkdGg6MTQwLGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXCJBdXRvIFByb3NwZWN0OiDCoFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwIGF1dG9wcm9zcGVjdFwiLCAnZGF0YS10b2dnbGUnOiBcImJ1dHRvbnNcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGFjdGl2ZVwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInJhZGlvXCJ9KSwgXCIgWWVzXCJcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJyYWRpb1wifSksIFwiIE5vXCJcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfSxcbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIGNyZWF0ZUNvbXBhbnlQcm9maWxlTW9kYWxcbiAgY3JlYXRlUHJvZmlsZTogZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHByb2ZpbGVOYW1lID0gJCgnLmZ1bmRpbmctcHJvZmlsZS1uYW1lJykudmFsKClcbiAgICBcbiAgICAvL1N0YWdlXG4gICAgLy9BbW91bnQgUmFpc2VkXG4gICAgLy9Db21wYW55IFNpemVcbiAgICAvL0FwcHJveCBSZXZlbnVlXG5cbiAgICBhbW91bnRSYWlzZWRQcm9maWxlID0ge1xuICAgICAgJ2NsYXNzTmFtZSc6J0Z1bmRpbmdQcm9maWxlJywgXG4gICAgICAncmV2ZW51ZXMnOiBfLm1hcCgkKCcjYW1vdW50UmFpc2VkQnRucycpLmZpbmQoJy5hY3RpdmUnKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXZCdG4peyByZXR1cm4gJChyZXZCdG4pLnRleHQoKS50cmltKCkgfSkucmV2ZXJzZSgpXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYW1vdW50UmFpc2VkUHJvZmlsZSlcbiAgICBwcm9maWxlcyA9IFthbW91bnRSYWlzZWRQcm9maWxlXVxuXG4gICAgbm9uZW1wdHlQcm9maWxlcyA9IF8uZmlsdGVyKHByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICBpZihfLnZhbHVlcyhwcm9maWxlKVsxXSl7IHJldHVybiBfLnZhbHVlcyhwcm9maWxlKVsxXS5sZW5ndGggfVxuICAgIH0pO1xuXG4gICAgbmV3UHJvZmlsZSA9IHtcbiAgICAgIG5hbWU6IHByb2ZpbGVOYW1lLFxuICAgICAgcHJvZmlsZXM6IG5vbmVtcHR5UHJvZmlsZXMsXG4gICAgICB1c2VyOntcbiAgICAgICAgX190eXBlOidQb2ludGVyJyxcbiAgICAgICAgY2xhc3NOYW1lOidfVXNlcicsXG4gICAgICAgIG9iamVjdElkOkpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5vYmplY3RJZFxuICAgICAgfSxcbiAgICAgIGNvbXBhbnk6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55XG4gICAgfVxuXG4gICAgaWYobm9uZW1wdHlQcm9maWxlcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMucGVyc2lzdFNpZ25hbChub25lbXB0eVByb2ZpbGVzLnJldmVyc2UoKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgXy5vbWl0KG5ld1Byb2ZpbGUsJ3Byb2ZpbGVzJykpXG5cbiAgICAgIHRoaXMucHJvcHMuYWRkUHJvZmlsZShuZXdQcm9maWxlKVxuICAgICAgJCgnLm1vZGFsJykuY2xpY2soKVxuICAgIH1cbiAgfSxcblxuICBwZXJzaXN0U2lnbmFsOiBmdW5jdGlvbihub25lbXB0eVByb2ZpbGVzLCBuZXdQcm9maWxlKSB7XG4gICAgY29uc29sZS5sb2coJ05FVyBQUk9GSUxFJylcbiAgICBjb25zb2xlLmxvZyhuZXdQcm9maWxlKVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RQcm9maWxlJyxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkobmV3UHJvZmlsZSksXG4gICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlc3MpIHtcbiAgICAgICAgLy8gQWRkIFNpZ25hbCBMaXN0XG4gICAgICAgIF8ubWFwKG5vbmVtcHR5UHJvZmlsZXMsIGZ1bmN0aW9uKHByb2ZpbGUpIHtcbiAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzLycrXy52YWx1ZXMocHJvZmlsZSlbMF0sXG4gICAgICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgICAgdHlwZTonUE9TVCcsXG4gICAgICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KCBfLnBpY2socHJvZmlsZSwgXy5rZXlzKHByb2ZpbGUpWzFdKSApLFxuICAgICAgICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RQcm9maWxlLycrcmVzcy5vYmplY3RJZCxcbiAgICAgICAgICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSh7cHJvZmlsZXM6e1xuICAgICAgICAgICAgICAgICAgX19vcDogJ0FkZFVuaXF1ZScsXG4gICAgICAgICAgICAgICAgICBvYmplY3RzOlt7XG4gICAgICAgICAgICAgICAgICAgIF9fdHlwZTonUG9pbnRlcicsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXy52YWx1ZXMocHJvZmlsZSlbMF0sXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdElkOnJlcy5vYmplY3RJZFxuICAgICAgICAgICAgICAgICAgfV19XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuXG4gICAgICB9LFxuICAgIH0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsIGZhZGUgXCIsIHRhYkluZGV4OiBcIi0xXCIsIHJvbGU6IFwiZGlhbG9nXCIsIFxuICAgICAgICAgICAnYXJpYS1sYWJlbGxlZGJ5JzogXCJteVNtYWxsTW9kYWxMYWJlbFwiLCAnYXJpYS1oaWRkZW4nOiBcInRydWVcIiwgXG4gICAgICAgICAgIGlkOiBcImNyZWF0ZUZ1bmRpbmdTaWduYWxNb2RhbFwiLCBcbiAgICAgICAgICAgc3R5bGU6IHt0b3A6JzUwcHgnLG92ZXJmbG93OidoaWRkZW4nfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1zbVwiLCBzdHlsZToge3dpZHRoOjY1MH19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWNvbnRlbnRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1oZWFkZXJcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgXCJDcmVhdGUgRnVuZGluZyBTaWduYWxcIlxuICAgICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1zbVwiLCBcbiAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY3JlYXRlUHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICBzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luVG9wOi0yOCxtYXJnaW5SaWdodDotNX19LCBcbiAgICAgICAgICAgICAgICAgICAgXCJDcmVhdGUgUHJvZmlsZVwiXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWJvZHlcIn0sIFxuXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uZm9ybSh7Y2xhc3NOYW1lOiBcImNyZWF0ZVNpZ25hbFwiLCBvblN1Ym1pdDogdGhpcy5jcmVhdGVQcm9maWxlfSwgXG4gICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4obnVsbCwgXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7d2lkdGg6MTQwLGRpc3BsYXk6J2lubGluZS1ibG9jaycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5Cb3R0b206MjB9fSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiRnVuZGluZyBQcm9maWxlIE5hbWU6IMKgXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonNzMuMSUnfSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBmdW5kaW5nLXByb2ZpbGUtbmFtZVwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJGdW5kaW5nIFByb2ZpbGUgTmFtZSAuLi5cIn0pXG4gICAgICAgICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgICAgICAgQ29tcGFueVByb2ZpbGUobnVsbCksIFxuXG4gICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHttYXJnaW5Ub3A6MTAsZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7d2lkdGg6MTQwLGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiQXV0byBQcm9zcGVjdDogwqBcIiksIFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cCBhdXRvcHJvc3BlY3RcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YS10b2dnbGUnOiBcImJ1dHRvbnNcIn0sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGFjdGl2ZVwifSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInJhZGlvXCJ9KSwgXCIgWWVzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJyYWRpb1wifSksIFwiIE5vXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgY3JlYXRlRnVuZGluZ1Byb2ZpbGU6IGZ1bmN0aW9uKCkge1xuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICBfLm1hcCgkKCcuaGlyaW5nLXJvbGUnKSxmdW5jdGlvbihpbnB1dCl7JChpbnB1dCkudGFnc2lucHV0KCl9KVxuICAgICQodGhpcy5nZXRET01Ob2RlKCkpLmZpbmQoJy5oaXJpbmctcm9sZScpLnRhZ3NpbnB1dCgpXG4gICAgJCgnLmJvb3RzdHJhcC10YWdzaW5wdXQnKS53aWR0aCgnNTkuMSUnKVxuICB9LFxuXG59KTtcblxudmFyIENvbXBhbnlQcm9maWxlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ29tcGFueVByb2ZpbGUnLFxuICBjb21wYW55Rm9ybVN1Ym1pdDogZnVuY3Rpb24oZSkgeyBlLnByZXZlbnREZWZhdWx0KCkgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgJCh0aGlzLmdldERPTU5vZGUoKSkuZmluZCgnLmJ0bi1kZWZhdWx0JykuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgbGFiZWwgPSAkKGUudGFyZ2V0KS5wYXJlbnQoJ2xhYmVsJylcbiAgICAgIGlmKGxhYmVsLmhhc0NsYXNzKCdhY3RpdmUnKSlcbiAgICAgICAgbGFiZWwucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG4gICAgICBlbHNlXG4gICAgICAgIGxhYmVsLmFkZENsYXNzKCdhY3RpdmUnKVxuICAgIH0pO1xuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J25vbmUnLG1hcmdpbjowLFxuICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOjE0MCxtYXJnaW5Cb3R0b206MjB9fSwgXCJTdGFnZSBcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXBcIiwgJ2RhdGEtdG9nZ2xlJzogXCJidXR0b25zXCIsIGlkOiBcImVtcGxveWVlQnRuc1wiLCBcbiAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFwiLCBzdHlsZToge3dpZHRoOicyMCUnfX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIFNlZWRcIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBcIiwgc3R5bGU6IHt3aWR0aDonMjAlJ319LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiBTZXJpZXMgQVwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCIsIHN0eWxlOiB7d2lkdGg6JzIwJSd9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgU2VyaWVzIEJcIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFwiLCBzdHlsZToge3dpZHRoOicyMCUnfX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIFNlcmllcyBDXCJcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIiwgc3R5bGU6IHt3aWR0aDonMjAlJ319LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiBTZXJpZXMgRCtcIlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyxtYXJnaW46MCx3aWR0aDoxNDAsbWFyZ2luQm90dG9tOjIwfX0sIFxuICAgICAgICAgICAgICBcIkFtb3VudCBSYWlzZWQgIFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwIHByb2ZpbGUtYnRuc1wiLCAnZGF0YS10b2dnbGUnOiBcImJ1dHRvbnNcIiwgXG4gICAgICAgICAgICAgIGlkOiBcImFtb3VudFJhaXNlZEJ0bnNcIiwgc3R5bGU6IHt3aWR0aDonNzQlJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBhbW91bnRSYWlzZWRCdG5cIiwgc3R5bGU6IHt3aWR0aDonMjUlJ319LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiBcIiwgJzwgJDFNJ1xuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBhbW91bnRSYWlzZWRCdG5cIiwgc3R5bGU6IHt3aWR0aDonMjUlJ319LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkMU0gLSAkNU1cIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBhbW91bnRSYWlzZWRCdG5cIiwgc3R5bGU6IHt3aWR0aDonMjUlJ319LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkNU0gLSAkMjVNXCJcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgYW1vdW50UmFpc2VkQnRuXCIsIHN0eWxlOiB7d2lkdGg6JzI1JSd9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgJDI1TSArXCJcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuXG5cbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonbm9uZScsbWFyZ2luOjAsXG4gICAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTQwLG1hcmdpbkJvdHRvbToyMH19LCBcIkNvbXBhbnkgU2l6ZSBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cFwiLCAnZGF0YS10b2dnbGUnOiBcImJ1dHRvbnNcIiwgaWQ6IFwiZW1wbG95ZWVCdG5zXCIsIFxuICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGVtcGxveWVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAxIC0gNTBcIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBlbXBsb3llZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgNTAgLSAyNTBcIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBlbXBsb3llZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgMjUwIC0gMTAwMFwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGVtcGxveWVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAxMDAwICtcIlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLCBcblxuICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcIiBcIiwgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J25vbmUnLG1hcmdpbjowLHdpZHRoOjE0MH19LCBcbiAgICAgICAgICAgICAgXCJBcHByb3guIFJldmVudWUgIFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwXCIsICdkYXRhLXRvZ2dsZSc6IFwiYnV0dG9uc1wiLCBpZDogXCJyZXZlbnVlQnRuc1wiLCBcbiAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCByZXZlbnVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiBcIiwgJzwgJDFNJ1xuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCByZXZlbnVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkMU0gLSAkNU1cIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCByZXZlbnVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkNU0gLSAkMjVNXCJcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgcmV2ZW51ZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgJDI1TSArXCJcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gQ3JlYXRlSGlyaW5nU2lnbmFsTW9kYWxcbiAgY3JlYXRlU2lnbmFsOiBmdW5jdGlvbigpIHtcbiAgICBwcm9maWxlTmFtZSA9ICQoJy5oaXJpbmctcHJvZmlsZS1uYW1lJykudmFsKClcbiAgICBhdXRvUHJvc3BlY3QgPSAkKCcuYXV0b3Byb3NwZWN0ID4gLmFjdGl2ZScpLnRleHQoKSA9PSAgXCIgWWVzXCJcblxuICAgIGhpcmluZ1Byb2ZpbGUgPSB7XG4gICAgICAnY2xhc3NOYW1lJzogJ0hpcmluZ1Byb2ZpbGUnLFxuICAgICAgJ3JvbGVzJyAgICA6ICQoJy5oaXJpbmctcm9sZXMnKS50YWdzaW5wdXQoJ2l0ZW1zJylcbiAgICB9XG5cbiAgICByZXZlbnVlUHJvZmlsZSA9IHtcbiAgICAgICdjbGFzc05hbWUnOidSZXZlbnVlUHJvZmlsZScsIFxuICAgICAgJ3JldmVudWVzJzogXy5tYXAoJCgnI2hpcmluZy1yZXZlbnVlQnRucycpLmZpbmQoJy5hY3RpdmUnKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXZCdG4peyByZXR1cm4gJChyZXZCdG4pLnRleHQoKS50cmltKCkgfSlcbiAgICB9XG5cbiAgICBlbXBsb3llZVByb2ZpbGUgPSB7XG4gICAgICAnY2xhc3NOYW1lJzonRW1wbG95ZWVQcm9maWxlJywgXG4gICAgICAnZW1wbG95ZWVzJzogXy5tYXAoJCgnI2hpcmluZy1lbXBsb3llZUJ0bnMnKS5maW5kKCcuYWN0aXZlJyksIFxuICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVtcEJ0bil7IHJldHVybiAkKGVtcEJ0bikudGV4dCgpLnRyaW0oKSB9KVxuICAgIH1cblxuICAgIHByb3NwZWN0UHJvZmlsZSA9IHtcbiAgICAgICdjbGFzc05hbWUnOidQcm9zcGVjdFRpdGxlUHJvZmlsZScsXG4gICAgICAndGl0bGVfa2V5d29yZHMnIDogJCgnLnByb3NwZWN0Um9sZUtleXdvcmRzJykudGFnc2lucHV0KCdpdGVtcycpXG4gICAgfVxuXG4gICAgcHJvZmlsZXMgPSBbaGlyaW5nUHJvZmlsZSwgcmV2ZW51ZVByb2ZpbGUsIFxuICAgICAgICAgICAgICAgIGVtcGxveWVlUHJvZmlsZSwgcHJvc3BlY3RQcm9maWxlXVxuXG4gICAgbm9uZW1wdHlQcm9maWxlcyA9IF8uZmlsdGVyKHByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICBpZihfLnZhbHVlcyhwcm9maWxlKVsxXSl7IHJldHVybiBfLnZhbHVlcyhwcm9maWxlKVsxXS5sZW5ndGggfVxuICAgIH0pO1xuXG5cbiAgICBuZXdQcm9maWxlID0ge1xuICAgICAgbmFtZTogcHJvZmlsZU5hbWUsXG4gICAgICBhdXRvUHJvc3BlY3Q6IGF1dG9Qcm9zcGVjdCxcbiAgICAgIHByb2ZpbGVzOiBub25lbXB0eVByb2ZpbGVzLFxuICAgICAgdXNlcjp7XG4gICAgICAgIF9fdHlwZTonUG9pbnRlcicsXG4gICAgICAgIGNsYXNzTmFtZTonX1VzZXInLFxuICAgICAgICBvYmplY3RJZDpKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikub2JqZWN0SWRcbiAgICAgIH0sXG4gICAgICBjb21wYW55OiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikuY29tcGFueVxuICAgIH1cblxuICAgIGlmKG5vbmVtcHR5UHJvZmlsZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnBlcnNpc3RTaWduYWwobm9uZW1wdHlQcm9maWxlcywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgXy5vbWl0KG5ld1Byb2ZpbGUsJ3Byb2ZpbGVzJykpXG4gICAgICB0aGlzLnByb3BzLmFkZFByb2ZpbGUobmV3UHJvZmlsZSlcbiAgICAgICQoJy5tb2RhbCcpLmNsaWNrKClcbiAgICB9XG4gIH0sXG5cbiAgcGVyc2lzdFNpZ25hbDogZnVuY3Rpb24obm9uZW1wdHlQcm9maWxlcywgbmV3UHJvZmlsZSkge1xuICAgIGNvbnNvbGUubG9nKCdORVcgUFJPRklMRScpXG4gICAgY29uc29sZS5sb2cobmV3UHJvZmlsZSlcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0UHJvZmlsZScsXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgdHlwZTonUE9TVCcsXG4gICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KG5ld1Byb2ZpbGUpLFxuICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXNzKSB7XG4gICAgICAgIC8vIEFkZCBTaWduYWwgTGlzdFxuICAgICAgICBfLm1hcChub25lbXB0eVByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK18udmFsdWVzKHByb2ZpbGUpWzBdLFxuICAgICAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSggXy5waWNrKHByb2ZpbGUsIF8ua2V5cyhwcm9maWxlKVsxXSkgKSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0UHJvZmlsZS8nK3Jlc3Mub2JqZWN0SWQsXG4gICAgICAgICAgICAgICAgdHlwZTonUFVUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoe3Byb2ZpbGVzOntcbiAgICAgICAgICAgICAgICAgIF9fb3A6ICdBZGRVbmlxdWUnLFxuICAgICAgICAgICAgICAgICAgb2JqZWN0czpbe1xuICAgICAgICAgICAgICAgICAgICBfX3R5cGU6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IF8udmFsdWVzKHByb2ZpbGUpWzBdLFxuICAgICAgICAgICAgICAgICAgICBvYmplY3RJZDpyZXMub2JqZWN0SWRcbiAgICAgICAgICAgICAgICAgIH1dfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTdGFydCBNaW5pbmcgSm9iXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgLy91cmw6J2h0dHBzOi8vbmFtZWxlc3MtcmV0cmVhdC0zNTI1Lmhlcm9rdWFwcC5jb20vbWluaW5nX2pvYi90aXRsZScsXG4gICAgICAgICAgLy8vdXJsOidodHRwczovL25hbWVsZXNzLXJldHJlYXQtMzUyNS5oZXJva3VhcHAuY29tL3RpdGxlX21pbmluZ19qb2InLFxuICAgICAgICAgIHVybDonaHR0cDovLzEyNy4wLjAuMTo1MDAwL3NpZ25hbC9oaXJpbmcnLFxuICAgICAgICAgIHR5cGU6J0dFVCcsXG4gICAgICAgICAgZGF0YToge3Byb3NwZWN0X3Byb2ZpbGU6IHJlc3Mub2JqZWN0SWR9LFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyBjb25zb2xlLmxvZyhyZXMpIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIpIH1cbiAgICAgICAgfSlcbiAgICAgIFxuXG4gICAgICB9LFxuICAgIH0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsIGZhZGUgYnMtY3JlYXRlU2lnbmFsLW1vZGFsLW1kXCIsIHRhYkluZGV4OiBcIi0xXCIsIHJvbGU6IFwiZGlhbG9nXCIsICdhcmlhLWxhYmVsbGVkYnknOiBcIm15U21hbGxNb2RhbExhYmVsXCIsICdhcmlhLWhpZGRlbic6IFwidHJ1ZVwiLCBpZDogXCJjcmVhdGVIaXJpbmdTaWduYWxNb2RhbFwiLCBcbiAgICAgICAgICAgc3R5bGU6IHt0b3A6JzUwcHgnLG92ZXJmbG93OidoaWRkZW4nfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1zbVwiLCBzdHlsZToge3dpZHRoOjY1MH19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWNvbnRlbnRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1oZWFkZXJcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgXCJDcmVhdGUgSGlyaW5nIFNpZ25hbFwiXG4gICAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXNtXCIsIFxuICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5jcmVhdGVTaWduYWwsIFxuICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDotMjgsbWFyZ2luUmlnaHQ6LTV9fSwgXG4gICAgICAgICAgICAgICAgICAgIFwiQ3JlYXRlIFNpZ25hbFwiXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICAgICAgQ3JlYXRlSGlyaW5nU2lnbmFsKG51bGwpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgQ3JlYXRlSGlyaW5nU2lnbmFsID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ3JlYXRlSGlyaW5nU2lnbmFsJyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYWRkQ29tcGFueTogZmFsc2UsXG4gICAgICBhZGRQcm9zcGVjdDogZmFsc2UsXG4gICAgICBoaWRlQ29tcGFueURldGFpbHM6IGZhbHNlLFxuICAgICAgaGlkZVByb3NwZWN0RGV0YWlsczogZmFsc2UsXG4gICAgfVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcblxuICB9LFxuICBcbiAgdG9nZ2xlQ29tcGFueSA6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2FkZENvbXBhbnk6ICF0aGlzLnN0YXRlLmFkZENvbXBhbnl9KVxuICB9LFxuXG4gIHRvZ2dsZVByb3NwZWN0IDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7YWRkUHJvc3BlY3Q6ICF0aGlzLnN0YXRlLmFkZFByb3NwZWN0fSlcbiAgfSxcblxuICB0b2dnbGVDb21wYW55RGV0YWlsczogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7aGlkZUNvbXBhbnlEZXRhaWxzOiAhdGhpcy5zdGF0ZS5oaWRlQ29tcGFueURldGFpbHN9KVxuICB9LFxuXG4gIHRvZ2dsZVByb3NwZWN0RGV0YWlsczogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7aGlkZVByb3NwZWN0RGV0YWlsczogIXRoaXMuc3RhdGUuaGlkZVByb3NwZWN0RGV0YWlsc30pXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICQodGhpcy5nZXRET01Ob2RlKCkpLmZpbmQoJy5oaXJpbmctcm9sZScpLnRhZ3NpbnB1dCgpXG4gICAgJCgnLmJvb3RzdHJhcC10YWdzaW5wdXQnKS53aWR0aCg0MDApXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpe1xuICAgIGFkZENvbXBhbnkgPSAoIXRoaXMuc3RhdGUuYWRkQ29tcGFueSkgPyBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZUNvbXBhbnksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSksIFwiwqBcIiArICcgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkFkZCBDb21wYW55IERldGFpbHNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBDb21wYW55UHJvZmlsZSh7aGlkZUNvbXBhbnlEZXRhaWxzOiB0aGlzLnN0YXRlLmhpZGVDb21wYW55RGV0YWlsc30pXG5cbiAgICBhZGRQcm9zcGVjdCA9ICghdGhpcy5zdGF0ZS5hZGRQcm9zcGVjdCkgPyBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZVByb3NwZWN0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pLCBcIsKgXCIgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJBZGQgUHJvc3BlY3QgRGV0YWlsc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IFByb3NwZWN0UHJvZmlsZSh7aGlkZVByb3NwZWN0RGV0YWlsczogdGhpcy5zdGF0ZS5oaWRlUHJvc3BlY3REZXRhaWxzfSlcbiAgICBhZGRDb21wYW55U3R5bGUgPSAoIXRoaXMuc3RhdGUuYWRkQ29tcGFueSkgPyB7ZGlzcGxheTonYmxvY2snLHRleHRBbGlnbjonY2VudGVyJ30gOiB7fVxuICAgIGFkZFByb3NwZWN0U3R5bGUgPSAoIXRoaXMuc3RhdGUuYWRkUHJvc3BlY3QpID8ge2Rpc3BsYXk6J2Jsb2NrJyx0ZXh0QWxpZ246J2NlbnRlcid9IDoge31cblxuICAgIGNsb3NlQ29tcGFueUJ0bnMgPSAoIXRoaXMuc3RhdGUuYWRkQ29tcGFueSkgPyBcIlwiIDogUmVhY3QuRE9NLnNwYW4obnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLWRlZmF1bHRcIiwgXG4gICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZUNvbXBhbnksIFxuICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDotNX19LCBcbiAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdGltZXNcIn0pKSwgXG4gICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwiLCBcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMudG9nZ2xlQ29tcGFueURldGFpbHMsIFxuICAgICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDotNSxtYXJnaW5SaWdodDo1fX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiAodGhpcy5zdGF0ZS5oaWRlQ29tcGFueURldGFpbHMpID8gXCJmYSBmYS1wbHVzXCIgOlwiZmEgZmEtbWludXNcIn0pXG4gICAgICAgICAgKSlcblxuICAgIGNsb3NlUHJvc3BlY3RCdG5zID0gKCF0aGlzLnN0YXRlLmFkZFByb3NwZWN0KSA/IFwiXCIgOiBSZWFjdC5ET00uc3BhbihudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwiLCBcbiAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMudG9nZ2xlUHJvc3BlY3QsIFxuICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDotNX19LCBcbiAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdGltZXNcIn0pKSwgXG4gICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwiLCBcbiAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMudG9nZ2xlUHJvc3BlY3REZXRhaWxzLCBcbiAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6LTUsbWFyZ2luUmlnaHQ6NX19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogKHRoaXMuc3RhdGUuaGlkZVByb3NwZWN0RGV0YWlscykgPyBcImZhIGZhLXBsdXNcIiA6XCJmYSBmYS1taW51c1wifSlcbiAgICAgICAgICApKVxuXG4gICAgY29tcGFueUhlYWRpbmcgPSAoIXRoaXMuc3RhdGUuYWRkQ29tcGFueSkgPyBcIlwiIDogUmVhY3QuRE9NLmg1KG51bGwsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYnVpbGRpbmdcIn0pLCBcIsKgIENvbXBhbnkgRGV0YWlsc1wiKVxuICAgIHByb3NwZWN0SGVhZGluZyA9ICghdGhpcy5zdGF0ZS5hZGRQcm9zcGVjdCkgPyBcIlwiIDogUmVhY3QuRE9NLmg1KG51bGwsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdXNlclwifSksIFwiwqAgUHJvc3BlY3QgRGV0YWlsc1wiKVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICBSZWFjdC5ET00uZm9ybSh7Y2xhc3NOYW1lOiBcImNyZWF0ZVNpZ25hbFwiLCBvblN1Ym1pdDogdGhpcy5jcmVhdGVTaWduYWx9LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJyxtYXJnaW5Cb3R0b206MjB9fSwgXG4gICAgICAgICAgICAgIFwiSGlyaW5nIFByb2ZpbGUgTmFtZTogwqBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOic0MTNweCd9LCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGhpcmluZy1wcm9maWxlLW5hbWVcIiwgXG4gICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiSGlyaW5nIFByb2ZpbGUgTmFtZSAuLi5cIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgICAgXCJIaXJpbmcgUm9sZSBOYW1lOiDCoFwiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonNTAlJyxtYXJnaW5SaWdodDoxMH0sIFxuICAgICAgICAgICAgICAgICAgICdkYXRhLXJvbGUnOiBcInRhZ3NpbnB1dFwiLCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGhpcmluZy1yb2xlIGhpcmluZy1yb2xlc1wifSksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLXN1Y2Nlc3NcIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHttYXJnaW5Ub3A6MTB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge3dpZHRoOjE0MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFwiQXV0byBQcm9zcGVjdDogwqBcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXAgYXV0b3Byb3NwZWN0XCIsICdkYXRhLXRvZ2dsZSc6IFwiYnV0dG9uc1wifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGFjdGl2ZVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJyYWRpb1wifSksIFwiIFllc1wiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwicmFkaW9cIn0pLCBcIiBOb1wiXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaHIobnVsbCksIFwiIFwiLCBjbG9zZUNvbXBhbnlCdG5zLCBcIiBcIiwgY29tcGFueUhlYWRpbmcsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IGFkZENvbXBhbnlTdHlsZX0sIFwiIFwiLCBhZGRDb21wYW55LCBcIiBcIiksIFxuXG4gICAgICAgICAgICBSZWFjdC5ET00uaHIobnVsbCksIFwiIFwiLCBjbG9zZVByb3NwZWN0QnRucywgXCIgXCIsIHByb3NwZWN0SGVhZGluZywgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZTogYWRkUHJvc3BlY3RTdHlsZX0sIFwiIFwiLCBhZGRQcm9zcGVjdCwgXCIgXCIpXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9LFxuICBjcmVhdGVTaWduYWw6IGZ1bmN0aW9uKGUpIHsgZS5wcmV2ZW50RGVmYXVsdCgpIH1cbn0pO1xuXG52YXIgQ29tcGFueVByb2ZpbGUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdDb21wYW55UHJvZmlsZScsXG4gIGNvbXBhbnlGb3JtU3VibWl0OiBmdW5jdGlvbihlKSB7IGUucHJldmVudERlZmF1bHQoKSB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMuZ2V0RE9NTm9kZSgpKS5maW5kKCcuYnRuLWRlZmF1bHQnKS5jbGljayhmdW5jdGlvbihlKSB7XG5cbiAgICAgIGlmKCQoZS50YXJnZXQpLnBhcmVudCgnbGFiZWwnKS5oYXNDbGFzcygnYWN0aXZlJykpXG4gICAgICAgICQoZS50YXJnZXQpLnBhcmVudCgnbGFiZWwnKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcbiAgICAgIGVsc2VcbiAgICAgICAgJChlLnRhcmdldCkucGFyZW50KCdsYWJlbCcpLmFkZENsYXNzKCdhY3RpdmUnKVxuXG4gICAgICBjb25zb2xlLmxvZygkKGUudGFyZ2V0KS5wYXJlbnQoJ2xhYmVsJykpXG4gICAgfSk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBzaG93RGV0YWlscyA9ICh0aGlzLnByb3BzLmhpZGVDb21wYW55RGV0YWlscykgPyB7ZGlzcGxheTogJ25vbmUnfSA6IHtkaXNwbGF5OidibG9jayd9XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiBzaG93RGV0YWlsc30sIFxuICAgICAgICBSZWFjdC5ET00uZm9ybSh7Y2xhc3NOYW1lOiBcImNyZWF0ZVNpZ25hbFwiLCBvblN1Ym1pdDogdGhpcy5jb21wYW55Rm9ybVN1Ym1pdH0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsbWFyZ2luOjAsXG4gICAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTQwLG1hcmdpbkJvdHRvbToyMH19LCBcIkNvbXBhbnkgU2l6ZSBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cFwiLCAnZGF0YS10b2dnbGUnOiBcImJ1dHRvbnNcIiwgaWQ6IFwiaGlyaW5nLWVtcGxveWVlQnRuc1wifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDEgLSA1MFwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiA1MCAtIDI1MFwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAyNTAgLSAxMDAwXCJcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDEwMDAgK1wiXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFwiIFwiLCBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyxtYXJnaW46MCx3aWR0aDoxNDB9fSwgXG4gICAgICAgICAgICAgIFwiUmV2ZW51ZSBBbW91bnQgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXBcIiwgJ2RhdGEtdG9nZ2xlJzogXCJidXR0b25zXCIsIGlkOiBcImhpcmluZy1yZXZlbnVlQnRuc1wifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIFwiLCAnPCAkMU0nXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkMU0gLSAkNU1cIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgJDVNIC0gJDI1TVwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkMjVNICtcIlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH1cbn0pO1xuXG52YXIgUHJvc3BlY3RQcm9maWxlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnUHJvc3BlY3RQcm9maWxlJyxcbiAgcHJvc3BlY3RGb3JtU3VibWl0OiBmdW5jdGlvbihlKSB7IGUucHJldmVudERlZmF1bHQoKSB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAkKCcucHJvc3BlY3RSb2xlS2V5d29yZHMnKS50YWdzaW5wdXQoe1xuICAgICAgbWF4VGFnczogNSxcbiAgICB9KVxuXG4gICAgJCgnLmJvb3RzdHJhcC10YWdzaW5wdXQnKS53aWR0aCg0MDApXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBzaG93RGV0YWlscyA9ICh0aGlzLnByb3BzLmhpZGVQcm9zcGVjdERldGFpbHMpID8ge2Rpc3BsYXk6ICdub25lJ30gOiB7ZGlzcGxheTonYmxvY2snfVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZTogc2hvd0RldGFpbHN9LCBcbiAgICAgICAgUmVhY3QuRE9NLmZvcm0oe2NsYXNzTmFtZTogXCJjcmVhdGVTaWduYWxcIiwgb25TdWJtaXQ6IHRoaXMucHJvc3BlY3RGb3JtU3VibWl0fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4obnVsbCwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIFwiSm9iIFRpdGxlIEtleXdvcmQ6IMKgXCIpXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgICdkYXRhLXJvbGUnOiBcInRhZ3NpbnB1dFwiLCBcbiAgICAgICAgICAgICAgICAgICBzdHlsZToge3dpZHRoOic0MDBweCAhaW1wb3J0YW50J30sIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgcHJvc3BlY3RSb2xlS2V5d29yZHNcIiwgXG4gICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiXCJ9KVxuICAgICAgICAgIClcblxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KVxuXG4vKlxuICBGdW5kaW5nIFByb2ZpbGVcbiAgLSBBbW91bnQgUmFpc2VkXG4gIC0gU3RhZ2VcblxuICBQZW9wbGUgUHJvZmlsZVxuICAtIExvY2FsZVxuICAtIFRpdGxlXG5cbiAgQ29tcGFueSBQcm9maWxlXG4gIC0gSW5kdXN0cmllc1xuICAtIFJldmVudWVcbiAgLSBMb2NhbGVcbiAgLSAjIG9mIEVtcGxveWVlc1xuKi9cblxudmFyIEdlbmVyYWxGb3JtID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnR2VuZXJhbEZvcm0nLFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgUmVhY3QuRE9NLmZvcm0oe2NsYXNzTmFtZTogXCJjcmVhdGVTaWduYWxcIiwgb25TdWJtaXQ6IHRoaXMuY3JlYXRlU2lnbmFsfSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4obnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc3VpdGNhc2VcIn0pLCBcIiDCoFwiLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonOTAlJ30sIFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbFwiLCBwbGFjZWhvbGRlcjogXCJGaW5kIENvbXBhbmllcyBIaXJpbmcgRm9yIC4uLlwifSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFwiIFwiLCBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXVzZXJzXCJ9KSwgXCIgwqBcIiwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwidGV4dFwiLCBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6JzkwJSd9LCBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIiwgcGxhY2Vob2xkZXI6IFwiTnVtYmVyIG9mIEVtcGxveWVlcyAuLi5cIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcIiBcIiwgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcIiBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1pbnN0aXR1dGlvblwifSksIFwiIMKgXCIsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgc3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOic5MCUnfSwgXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sXCIsIHBsYWNlaG9sZGVyOiBcIkFtb3VudCBvZiBGdW5kaW5nIC4uLlwifSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFwiIFwiLCBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLW1vbmV5XCJ9KSwgXCIgwqBcIiwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwidGV4dFwiLCBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6JzkwJSd9LCBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIiwgcGxhY2Vob2xkZXI6IFwiUmV2ZW51ZSBBbW91bnQgLi4uXCJ9KVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXCIgXCIsIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4obnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtd3JlbmNoXCJ9KSwgXCIgwqBcIiwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwidGV4dFwiLCBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6JzkwJSd9LCBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIiwgcGxhY2Vob2xkZXI6IFwiVXNpbmcgVGVjaG5vbG9naWVzIFN1Y2ggQXMuLi5cIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcIiBcIiwgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY3JlYXRlU2lnbmFsLCBcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLWRlZmF1bHQgYnRuLXN1Y2Nlc3NcIiwgXG4gICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJywgd2lkdGg6JzEwMCUnfX0sIFxuICAgICAgICAgICAgXCJDcmVhdGUgU2lnbmFsXCJcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICApXG4gIH1cbn0pXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gY3JlYXRlTGlzdE1vZGFsXG4gIGNyZWF0ZUxpc3Q6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCQoJyNsaXN0VGl0bGUnKS52YWwoKSlcblxuICAgIGRhdGEgPSAge1xuICAgICAgJ25hbWUnICAgICAgICA6ICQoJyNsaXN0VGl0bGUnKS52YWwoKS50cmltKCksICAgLy9XYWl0aW5nICwgUnVubmluZ1xuICAgICAgJ3VzZXInICAgICAgICA6IHsgJ19fdHlwZSc6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICdjbGFzc05hbWUnOidfVXNlcicsXG4gICAgICAgICAgICAgICAgICAgICAgJ29iamVjdElkJzoneFdFU2l3NVNtZCcgfSxcbiAgICB9XG5cbiAgICB0aGlzcyA9IHRoaXM7XG4gICAgbGlzdENsYXNzTmFtZSA9ICh0aGlzLnByb3BzLmxpc3RDbGFzc05hbWUpID8gdGhpcy5wcm9wcy5saXN0Q2xhc3NOYW1lIDogJ1Byb3NwZWN0TGlzdCdcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzLycrbGlzdENsYXNzTmFtZSxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpXG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGRhdGEuY291bnQgPSAwXG5cbiAgICB0aGlzLnByb3BzLmNyZWF0ZUxpc3QoZGF0YSlcbiAgICBcbiAgICAkKCcjY3JlYXRlTGlzdE1vZGFsJykubW9kYWwoJ2hpZGUnKVxuICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnbW9kYWwtb3BlbicpO1xuICAgICQoJy5tb2RhbC1iYWNrZHJvcCcpLnJlbW92ZSgpO1xuICAgIC8vJCgnYnV0dG9uLmNsb3NlJykuY2xpY2soKVxuICB9LFxuXG4gIGNyZWF0ZUxpc3RCdXR0b25DbGljazogZnVuY3Rpb24oKSB7XG4gICAgaWYoJCgnI2xpc3RUaXRsZScpLnZhbCgpLnRyaW0oKSAhPSBcIlwiKVxuICAgICAgdGhpcy5jcmVhdGVMaXN0KClcbiAgfSxcblxuICBjcmVhdGVNaW5pbmdKb2I6IGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zb2xlLmxvZygnbG1hbycpXG4gICAgaWYoJCgnI2xpc3RUaXRsZScpLnZhbCgpLnRyaW0oKSAhPSBcIlwiKVxuICAgICAgdGhpcy5jcmVhdGVMaXN0KClcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsIGZhZGUgYnMtZXhhbXBsZS1tb2RhbC1zbVwiLCB0YWJJbmRleDogXCItMVwiLCByb2xlOiBcImRpYWxvZ1wiLCAnYXJpYS1sYWJlbGxlZGJ5JzogXCJteVNtYWxsTW9kYWxMYWJlbFwiLCAnYXJpYS1oaWRkZW4nOiBcInRydWVcIiwgaWQ6IFwiY3JlYXRlTGlzdE1vZGFsXCIsIHN0eWxlOiB7dG9wOicyMDBweCd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtZGlhbG9nIG1vZGFsLXNtXCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWNvbnRlbnRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1oZWFkZXJcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgY2xhc3NOYW1lOiBcImNsb3NlXCIsICdkYXRhLWRpc21pc3MnOiBcIm1vZGFsXCJ9LCBSZWFjdC5ET00uc3Bhbih7J2FyaWEtaGlkZGVuJzogXCJ0cnVlXCJ9LCBcIsOXXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJzci1vbmx5XCJ9LCBcIkNsb3NlXCIpKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDQoe2NsYXNzTmFtZTogXCJtb2RhbC10aXRsZVwiLCBpZDogXCJteU1vZGFsTGFiZWxcIn0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWxpc3RcIn0pLCBcIiDCoENyZWF0ZSBMaXN0XCIpXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmZvcm0oe29uU3VibWl0OiB0aGlzLmNyZWF0ZU1pbmluZ0pvYn0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe2lkOiBcImxpc3RUaXRsZVwiLCB0eXBlOiBcInRleHRcIiwgcGxhY2Vob2xkZXI6IFwiRW50ZXIgbGlzdCB0aXRsZS4uLlwiLCBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sXCJ9KSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIG9uQ2xpY2s6IHRoaXMuY3JlYXRlTGlzdEJ1dHRvbkNsaWNrLCBwbGFjZWhvbGRlcjogXCJFbnRlciBDaXR5IEFyZWEuLi5cIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2Vzc1wiLCBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJywgd2lkdGg6JzEwMCUnfX0sIFwiQ3JlYXRlIExpc3RcIilcbiAgICAgICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIGNyZWF0ZVNpZ25hbE1vZGFsXG4gIGNyZWF0ZU1pbmluZ0pvYjogZnVuY3Rpb24oZGF0ZSkge1xuICAgIHRoaXMucHJvcHMuY3JlYXRlTWluaW5nSm9iKHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGUsIGRhdGUpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAvLyBtb21lbnQudXRjKG1vbWVudCgpLnN0YXJ0T2YoJ2RheScpKS52YWx1ZU9mKCkvMTAwMFxuICAgIC8vIHJlY2lldmUgY29tcGxldGVkIGRheXMgYXMgcHJvcHNcbiAgICAvL2NvbnNvbGUubG9nKHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGUpXG4gICAgbWluaW5nX2RheXMgPSB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm1pbmluZ19kYXlzXG4gICAgZGF0ZXMgPSBbXVxuICAgIGZvcihpPTA7aTwgMzA7IGkrKykgeyAgXG4gICAgICBkYXRlID0gbW9tZW50KCkuc3VidHJhY3QoKGkrMSksICdkYXlzJykuc3RhcnRPZignZGF5JylcbiAgICAgIG1pbmluZ19kYXkgPSBfLmluZGV4T2YobWluaW5nX2RheXMsIGRhdGUudmFsdWVPZigpLzEwMDApICE9IC0xXG4gICAgICBkYXRlcy5wdXNoKERvd25sb2FkRGF0ZVJvdyh7dXBkYXRlRGF0ZTogdGhpcy51cGRhdGVEYXRlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVNaW5pbmdKb2I6IHRoaXMuY3JlYXRlTWluaW5nSm9iLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbmdfZGF5OiBtaW5pbmdfZGF5LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRlfSkpXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbCBmYWRlIGJzLWNyZWF0ZU1pbmluZ0pvYi1tb2RhbC1tZFwiLCBcbiAgICAgICAgICAgdGFiSW5kZXg6IFwiLTFcIiwgcm9sZTogXCJkaWFsb2dcIiwgXG4gICAgICAgICAgICdhcmlhLWxhYmVsbGVkYnknOiBcIm15U21hbGxNb2RhbExhYmVsXCIsICdhcmlhLWhpZGRlbic6IFwidHJ1ZVwiLCBcbiAgICAgICAgICAgaWQ6IFwiY3JlYXRlTWluaW5nSm9iTW9kYWxcIiwgXG4gICAgICAgICAgIHN0eWxlOiB7dG9wOic1MHB4JyxvdmVyZmxvdzonaGlkZGVuJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1zbVwiLCBzdHlsZToge3dpZHRoOjM1MH19LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtY29udGVudFwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtaGVhZGVyXCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNsb3VkLWRvd25sb2FkXCJ9KSwgXCLCoFwiICsgJyAnICtcbiAgICAgICAgICAgICAgICBcIkRvd25sb2FkIFByb3NwZWN0c1wiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1zbVwiLCBcbiAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5jcmVhdGVNaW5pbmdKb2IsIFxuICAgICAgICAgICAgICAgICBzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luVG9wOi0yOCxcbiAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDotNSxkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgICAgXCJEb3dubG9hZFwiXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWJvZHlcIn0sIFxuXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcImxpc3QtZ3JvdXAgZGF0ZS1kb3dubG9hZC1wcm9zcGVjdHNcIiwgXG4gICAgICAgICAgICAgICAgICBzdHlsZToge2hlaWdodDo0MDAsb3ZlcmZsb3c6J2F1dG8nLFxuICAgICAgICAgICAgICAgICAgYm9yZGVyQm90dG9tOidzb2xpZCAxcHggI2RkZCcsXG4gICAgICAgICAgICAgICAgICBjdXJzb3I6J3BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgYm9yZGVyVG9wOidzb2xpZCAxcHggI2RkZCd9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbjowfX0sIGRhdGVzKVxuICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9LFxufSk7XG5cbnZhciBEb3dubG9hZERhdGVSb3cgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdEb3dubG9hZERhdGVSb3cnLFxuICB1cGRhdGVEYXRlOiBmdW5jdGlvbigpIHtcbiAgICAvL3RoaXMuY3JlYXRlTWluaW5nSm9iKClcbiAgICBkYXRlID0gdGhpcy5wcm9wcy5kYXRlLnN0YXJ0T2YoJ2RheScpLnZhbHVlT2YoKS8xMDAwXG4gICAgLy9kYXRlID0gbW9tZW50KCkuc3VidHJhY3QoKGkrMSksICdkYXlzJykuc3RhcnRPZignZGF5JylcbiAgICB0aGlzLnByb3BzLmNyZWF0ZU1pbmluZ0pvYihkYXRlKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgbG9hZGluZyA9ICh0aGlzLnByb3BzLm1pbmluZ19kYXkpID8gIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwcm9maWxlLWxvYWRpbmdcIiwgc3R5bGU6IHtmbG9hdDoncmlnaHQnLGhlaWdodDoyMCx3aWR0aDoyMH19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJkb3VibGUtYm91bmNlMVwiLCBzdHlsZToge2JhY2tncm91bmRDb2xvcjonIzVjYjg1Yyd9fSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRvdWJsZS1ib3VuY2UyXCIsIHN0eWxlOiB7YmFja2dyb3VuZENvbG9yOicjNWNiODVjJ319KVxuICAgICAgICAgICkgOiBcIlwiXG4gICAgbG9hZGluZyA9IFwiXCJcbiAgICByZXR1cm4gKFxuICAgICAgICBSZWFjdC5ET00ubGkoe29uQ2xpY2s6IHRoaXMudXBkYXRlRGF0ZSwgc3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9LCBcbiAgICAgICAgICBjbGFzc05hbWU6IFwibGlzdC1ncm91cC1pdGVtIGRvd25sb2FkLWRhdGUgYmctc3VjY2Vzc1wiLCBcbiAgICAgICAgICBzdHlsZTogKHRoaXMucHJvcHMubWluaW5nX2RheSkgPyB7YmFja2dyb3VuZENvbG9yOicjZGZmMGQ4Jyx0ZXh0QWxpZ246J2NlbnRlcid9IDoge3RleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHt3aWR0aDo4NX19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2FsZW5kYXJcIn0pLCBcIsKgXCIsIFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5kYXRlLmZvcm1hdCgnbGwnKSwgXCIgwqAgwqAgwqBcIlxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIHN0eWxlOiB7d2lkdGg6ODl9LCBcbiAgICAgIGNsYXNzTmFtZTogKHRoaXMucHJvcHMubWluaW5nX2RheSkgPyBcImJ0biBidG4tc3VjY2VzcyBidG4teHMgZGlzYWJsZWRcIiA6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14c1wifSwgXG4gICAgICAgICAgICAodGhpcy5wcm9wcy5taW5pbmdfZGF5KSA/IFwiRG93bmxvYWRpbmdcIiA6IFwiRG93bmxvYWRcIiksIFxuICAgICAgICAgIGxvYWRpbmdcbiAgICAgICAgKVxuICAgIClcbiAgfVxufSlcblxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIGNyZWF0ZVByb3NwZWN0TGlzdEZyb21Db21wYW55TGlzdE1vZGFsXG4gIGNyZWF0ZVByb2ZpbGU6IGZ1bmN0aW9uKCkge1xuICAgIC8vcHJvZmlsZU5hbWUgPSAkKFwiLnByb2ZpbGVOYW1lXCIpLnZhbCgpXG4gICAgdGl0bGVQcm9maWxlID0ge1xuICAgICAgJ2NsYXNzTmFtZSc6ICdQcm9zcGVjdFRpdGxlUHJvZmlsZScsXG4gICAgICAndGl0bGVfa2V5d29yZHMnIDogJCgnLnByb3NwZWN0Um9sZUtleXdvcmRzJykudGFnc2lucHV0KCdpdGVtcycpLnJldmVyc2UoKVxuICAgIH1cblxuICAgIGxpc3RQcm9maWxlID0ge1xuICAgICAgJ2NsYXNzTmFtZSc6ICdMaXN0UHJvZmlsZScsXG4gICAgICAnbGlzdE5hbWUnOnRoaXMucHJvcHMuY3VycmVudExpc3QsXG4gICAgICAnbGlzdCcgOiBhcHBDb25maWcucG9pbnRlcignQ29tcGFueVByb3NwZWN0TGlzdCcsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY3VycmVudExpc3RPYmplY3RJZCksXG4gICAgfVxuXG4gICAgcHJvZmlsZXMgPSBbdGl0bGVQcm9maWxlLCBsaXN0UHJvZmlsZV1cblxuICAgIG5vbmVtcHR5UHJvZmlsZXMgPSBfLmZpbHRlcihwcm9maWxlcywgZnVuY3Rpb24ocHJvZmlsZSkge1xuICAgICAgaWYoXy52YWx1ZXMocHJvZmlsZSlbMV0peyByZXR1cm4gXy52YWx1ZXMocHJvZmlsZSlbMV0ubGVuZ3RoIH1cbiAgICB9KTtcblxuICAgIC8vbm9uZW1wdHlQcm9maWxlcy5wdXNoKGxpc3RQcm9maWxlKVxuICAgIG5vbmVtcHR5UHJvZmlsZXMucmV2ZXJzZSgpXG5cbiAgICBjb25zb2xlLmxvZyhub25lbXB0eVByb2ZpbGVzKVxuICAgIGNvbnNvbGUubG9nKHRoaXMucHJvcHMuY3VycmVudExpc3QpXG5cbiAgICBuZXdQcm9maWxlID0ge1xuICAgICAgbmFtZTogdGhpcy5wcm9wcy5jdXJyZW50TGlzdCxcbiAgICAgIHByb2ZpbGVzOiBub25lbXB0eVByb2ZpbGVzLFxuICAgICAgdHlwZTogJ3Byb3NwZWN0X3Byb2ZpbGUnLFxuICAgICAgbWluaW5nX2pvYjp0cnVlLFxuICAgICAgbGlzdF90eXBlOlwibWluaW5nX2pvYlwiLFxuICAgICAgb25seV9wZW9wbGU6dHJ1ZSxcbiAgICAgIHVzZXI6e1xuICAgICAgICBfX3R5cGU6J1BvaW50ZXInLFxuICAgICAgICBjbGFzc05hbWU6J19Vc2VyJyxcbiAgICAgICAgb2JqZWN0SWQ6SlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLm9iamVjdElkXG4gICAgICB9LFxuICAgICAgY29tcGFueTogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLmNvbXBhbnlcbiAgICB9XG5cbiAgICBpZihub25lbXB0eVByb2ZpbGVzLmxlbmd0aCkge1xuICAgICAgdGhpcy5wZXJzaXN0U2lnbmFsKG5vbmVtcHR5UHJvZmlsZXMsIF8ub21pdChuZXdQcm9maWxlLCdwcm9maWxlcycpKVxuICAgICAgJCgnLm1vZGFsJykuY2xpY2soKVxuICAgICAgLy90aGlzLnByb3BzLmFkZFByb2ZpbGUobmV3UHJvZmlsZSlcbiAgICAgICQoJy5wcm9zcGVjdC1wcm9maWxlLXRpdGxlJykudmFsKCcnKVxuICAgIH1cbiAgfSxcblxuICBwZXJzaXN0U2lnbmFsOiBmdW5jdGlvbihub25lbXB0eVByb2ZpbGVzLCBuZXdQcm9maWxlKSB7XG4gICAgY29uc29sZS5sb2coJ05FVyBQUk9GSUxFJylcbiAgICBjb25zb2xlLmxvZyhuZXdQcm9maWxlKVxuICAgIHVwZGF0ZVByb2ZpbGUgPSB0aGlzLnByb3BzLnVwZGF0ZVByb2ZpbGVXaXRoT2JqZWN0SWRcblxuICAgIHRoaXNzc3MgPSB0aGlzO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RQcm9maWxlJyxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkobmV3UHJvZmlsZSksXG4gICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlc3MpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1Byb3NwZWN0IFByb2ZpbGUnKVxuICAgICAgICBjb25zb2xlLmxvZyhyZXNzKVxuXG4gICAgICAgIC8vdGhpc3Nzcy5wcm9wcy51cGRhdGVQcm9maWxlV2l0aE9iamVjdElkKG5ld1Byb2ZpbGUsIHJlc3Mub2JqZWN0SWQpXG4gICAgICAgIFxuICAgICAgICB1c2VyX2lkID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLm9iamVjdElkXG4gICAgICAgIG5ld1Byb2ZpbGUudXNlciA9IGFwcENvbmZpZy5wb2ludGVyKCdfVXNlcicsIHVzZXJfaWQpIFxuICAgICAgICBuZXdQcm9maWxlLmNvbXBhbnkgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikuY29tcGFueVxuXG4gICAgICAgIGlmKG5ld1Byb2ZpbGUudHlwZSA9PSAncHJvc3BlY3RfcHJvZmlsZScpXG4gICAgICAgICAgbmV3UHJvZmlsZS5taW5pbmdfam9iX2xpc3QgPSB0cnVlXG4gICAgICAgICAgbmV3UHJvZmlsZS5saXN0X3R5cGUgPSBcIm1pbmluZ19qb2JcIlxuICAgICAgICAgIG5ld1Byb2ZpbGUub25seV9wZW9wbGUgPSB0cnVlXG5cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0TGlzdCcsXG4gICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoXy5waWNrKG5ld1Byb2ZpbGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICduYW1lJywndXNlcicsJ2xpc3RfdHlwZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29wZW5fcGVvcGxlJywgJ2NvbXBhbnknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtaW5pbmdfam9iX2xpc3QnKSksXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RQcm9maWxlLycrcmVzcy5vYmplY3RJZCxcbiAgICAgICAgICAgICAgdHlwZTonUFVUJyxcbiAgICAgICAgICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHsncHJvc3BlY3RfbGlzdCc6eyBfX3R5cGU6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOidQcm9zcGVjdExpc3QnLG9iamVjdElkOnJlcy5vYmplY3RJZCB9IH0pLFxuICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpeyBjb25zb2xlLmxvZyhyZXMpOyBcbiAgICAgICAgICAgICAgICAkKCcubW9kYWwnKS5jbGljaygpXG4gICAgICAgICAgICAgICAgLy9sb2NhdGlvbi5ocmVmPVwiI3NpZ25hbHNcIiBcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycil7IGNvbnNvbGUubG9nKGVycikgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbigpIHsgfVxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIFN0YXJ0IE1pbmluZyBKb2JcbiAgICAgICAgaWYobmV3UHJvZmlsZS50eXBlID09ICdwcm9zcGVjdF9wcm9maWxlJykge1xuICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAvL3VybDonaHR0cHM6Ly9uYW1lbGVzcy1yZXRyZWF0LTM1MjUuaGVyb2t1YXBwLmNvbS9taW5pbmdfam9iL3RpdGxlJyxcbiAgICAgICAgICAgIC8vL3VybDonaHR0cHM6Ly9uYW1lbGVzcy1yZXRyZWF0LTM1MjUuaGVyb2t1YXBwLmNvbS90aXRsZV9taW5pbmdfam9iJyxcbiAgICAgICAgICAgIHVybDonaHR0cDovLzEyNy4wLjAuMTo1MDAwL3RpdGxlX21pbmluZ19qb2InLFxuICAgICAgICAgICAgdHlwZTonR0VUJyxcbiAgICAgICAgICAgIGRhdGE6IHtwcm9zcGVjdF9wcm9maWxlOiByZXNzLm9iamVjdElkfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyBjb25zb2xlLmxvZyhyZXMpIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUubG9nKGVycikgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgUHJvZmlsZXNcbiAgICAgICAgXy5tYXAobm9uZW1wdHlQcm9maWxlcywgZnVuY3Rpb24ocHJvZmlsZSkge1xuICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvJytfLnZhbHVlcyhwcm9maWxlKVswXSxcbiAgICAgICAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgICB0eXBlOidQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoIF8ucGljayhwcm9maWxlLCBfLmtleXMocHJvZmlsZSlbMV0pICksXG4gICAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdFByb2ZpbGUvJytyZXNzLm9iamVjdElkLFxuICAgICAgICAgICAgICAgIHR5cGU6J1BVVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KHtwcm9maWxlczp7XG4gICAgICAgICAgICAgICAgICBfX29wOiAnQWRkVW5pcXVlJyxcbiAgICAgICAgICAgICAgICAgIG9iamVjdHM6W3tcbiAgICAgICAgICAgICAgICAgICAgX190eXBlOidQb2ludGVyJyxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBfLnZhbHVlcyhwcm9maWxlKVswXSxcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0SWQ6cmVzLm9iamVjdElkXG4gICAgICAgICAgICAgICAgICB9XX1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbCBmYWRlIFwiLCB0YWJJbmRleDogXCItMVwiLCByb2xlOiBcImRpYWxvZ1wiLCBcbiAgICAgICAgICAgJ2FyaWEtbGFiZWxsZWRieSc6IFwibXlTbWFsbE1vZGFsTGFiZWxcIiwgJ2FyaWEtaGlkZGVuJzogXCJ0cnVlXCIsIFxuICAgICAgICAgICBpZDogXCJjcmVhdGVQcm9zcGVjdExpc3RGcm9tQ29tcGFueUxpc3RNb2RhbFwiLCBcbiAgICAgICAgICAgc3R5bGU6IHt0b3A6JzUwcHgnLG92ZXJmbG93OidoaWRkZW4nfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1zbVwiLCBzdHlsZToge3dpZHRoOjY1MH19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWNvbnRlbnRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1oZWFkZXJcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgXCJGaW5kIFByb3NwZWN0cyBBdCBUaGVzZSBDb21wYW5pZXNcIlxuICAgICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1zbVwiLCBcbiAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY3JlYXRlUHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICBzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luVG9wOi0yOCxtYXJnaW5SaWdodDotNX19LCBcbiAgICAgICAgICAgICAgICAgICAgXCJDcmVhdGUgUHJvZmlsZVwiXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICAgICAgUHJvc3BlY3RQcm9maWxlKG51bGwpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICk7XG4gIH0sXG59KTtcblxudmFyIFByb3NwZWN0UHJvZmlsZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1Byb3NwZWN0UHJvZmlsZScsXG4gIHByb3NwZWN0Rm9ybVN1Ym1pdDogZnVuY3Rpb24oZSkgeyBlLnByZXZlbnREZWZhdWx0KCkgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgJCgnLnByb3NwZWN0Um9sZUtleXdvcmRzJykudGFnc2lucHV0KHtcbiAgICAgIG1heFRhZ3M6IDUsXG4gICAgfSlcbiAgICAkKCcuYm9vdHN0cmFwLXRhZ3NpbnB1dCcpLndpZHRoKDQwMClcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHNob3dEZXRhaWxzID0gKHRoaXMucHJvcHMuaGlkZVByb3NwZWN0RGV0YWlscykgPyB7ZGlzcGxheTogJ25vbmUnfSA6IHtkaXNwbGF5OidibG9jayd9XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiBzaG93RGV0YWlsc30sIFxuICAgICAgICBSZWFjdC5ET00uZm9ybSh7Y2xhc3NOYW1lOiBcImNyZWF0ZVNpZ25hbFwiLCBvblN1Ym1pdDogdGhpcy5wcm9zcGVjdEZvcm1TdWJtaXR9LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge3dpZHRoOjE0MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgXCJKb2IgVGl0bGUgS2V5d29yZDogwqBcIilcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgJ2RhdGEtcm9sZSc6IFwidGFnc2lucHV0XCIsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7d2lkdGg6JzQwMHB4ICFpbXBvcnRhbnQnfSwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBwcm9zcGVjdFJvbGVLZXl3b3Jkc1wiLCBcbiAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJcIn0pXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KVxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIGNyZWF0ZUNvbXBhbnlQcm9maWxlTW9kYWxcbiAgY3JlYXRlUHJvZmlsZTogZnVuY3Rpb24oKSB7XG4gICAgcHJvZmlsZU5hbWUgPSAkKFwiLnByb2ZpbGVOYW1lXCIpLnZhbCgpXG5cbiAgICB0aXRsZVByb2ZpbGUgPSB7XG4gICAgICAnY2xhc3NOYW1lJzogJ1Byb3NwZWN0VGl0bGVQcm9maWxlJyxcbiAgICAgICd0aXRsZV9rZXl3b3JkcycgICAgOiAkKCcucHJvc3BlY3QtcHJvZmlsZS10aXRsZScpLnRhZ3NpbnB1dCgnaXRlbXMnKS5yZXZlcnNlKClcbiAgICB9XG5cbiAgICAvKlxuICAgIGxvY2F0aW9uUHJvZmlsZSA9IHtcbiAgICAgICdjbGFzc05hbWUnOiAnTG9jYXRpb25Qcm9maWxlJyxcbiAgICAgICdsb2NhbGUnICAgIDogJCgnLnByb3NwZWN0LWxvY2F0aW9uLXByb2ZpbGUnKS50YWdzaW5wdXQoJ2l0ZW1zJykucmV2ZXJzZSgpXG4gICAgfVxuXG4gICAgY29tcGFueVNpemVQcm9maWxlID0ge1xuICAgICAgJ2NsYXNzTmFtZSc6J0VtcGxveWVlUHJvZmlsZScsIFxuICAgICAgJ2VtcGxveWVlcyc6IF8ubWFwKCQoJyNwcm9zcGVjdC1wcm9maWxlLWNvbXBhbnlTaXplQnRucycpLmZpbmQoJy5hY3RpdmUnKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXZCdG4peyByZXR1cm4gJChyZXZCdG4pLnRleHQoKS50cmltKCkgfSkucmV2ZXJzZSgpXG4gICAgfVxuXG4gICAgcmV2ZW51ZVByb2ZpbGUgPSB7XG4gICAgICAnY2xhc3NOYW1lJzonUmV2ZW51ZVByb2ZpbGUnLCBcbiAgICAgICdyZXZlbnVlcyc6IF8ubWFwKCQoJyNwcm9zcGVjdC1wcm9maWxlLWNvbXBhbnlSZXZlbnVlQnRucycpLmZpbmQoJy5hY3RpdmUnKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXZCdG4peyByZXR1cm4gJChyZXZCdG4pLnRleHQoKS50cmltKCkgfSkucmV2ZXJzZSgpXG4gICAgfVxuXG4gICAgcHJvZmlsZXMgPSBbdGl0bGVQcm9maWxlLCBsb2NhdGlvblByb2ZpbGUsXG4gICAgICAgICAgICAgICAgY29tcGFueVNpemVQcm9maWxlLCByZXZlbnVlUHJvZmlsZV1cbiAgICAqL1xuICAgIFxuICAgIHByb2ZpbGVzID0gW3RpdGxlUHJvZmlsZV1cblxuICAgIG5vbmVtcHR5UHJvZmlsZXMgPSBfLmZpbHRlcihwcm9maWxlcywgZnVuY3Rpb24ocHJvZmlsZSkge1xuICAgICAgaWYoXy52YWx1ZXMocHJvZmlsZSlbMV0peyByZXR1cm4gXy52YWx1ZXMocHJvZmlsZSlbMV0ubGVuZ3RoIH1cbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZyhub25lbXB0eVByb2ZpbGVzKVxuXG4gICAgbmV3UHJvZmlsZSA9IHtcbiAgICAgIG5hbWU6IHByb2ZpbGVOYW1lLFxuICAgICAgcHJvZmlsZXM6IG5vbmVtcHR5UHJvZmlsZXMsXG4gICAgICB0eXBlOiAncHJvc3BlY3RfcHJvZmlsZScsXG4gICAgICBtaW5pbmdfam9iOnRydWUsXG4gICAgICBsaXN0X3R5cGU6XCJtaW5pbmdfam9iXCIsXG4gICAgICBvbmx5X3Blb3BsZTp0cnVlLFxuICAgICAgdGltZXN0YW1wOiBtb21lbnQoKS52YWx1ZU9mKCksXG4gICAgICBkb25lOiAwLFxuICAgICAgdXNlcjp7XG4gICAgICAgIF9fdHlwZTonUG9pbnRlcicsXG4gICAgICAgIGNsYXNzTmFtZTonX1VzZXInLFxuICAgICAgICBvYmplY3RJZDpKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikub2JqZWN0SWRcbiAgICAgIH0sXG4gICAgICBjb21wYW55OiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikuY29tcGFueVxuICAgIH1cblxuICAgIGlmKG5vbmVtcHR5UHJvZmlsZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnByb3BzLmFkZFByb2ZpbGUobmV3UHJvZmlsZSlcbiAgICAgIHRoaXMucGVyc2lzdFNpZ25hbChub25lbXB0eVByb2ZpbGVzLCBuZXdQcm9maWxlKVxuICAgICAgJCgnLm1vZGFsJykuY2xpY2soKVxuICAgICAgJCgnLnByb3NwZWN0LXByb2ZpbGUtdGl0bGUnKS52YWwoJycpXG4gICAgfVxuICB9LFxuXG4gIHBlcnNpc3RTaWduYWw6IGZ1bmN0aW9uKG5vbmVtcHR5UHJvZmlsZXMsIG5ld1Byb2ZpbGUpIHtcbiAgICBjb25zb2xlLmxvZygnTkVXIFBST0ZJTEUnKVxuICAgIGNvbnNvbGUubG9nKG5ld1Byb2ZpbGUpXG5cbiAgICB2YXIgdGhpc3NzcyA9IHRoaXM7XG4gICAgdmFyIHRoaXNzID0gdGhpcztcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RQcm9maWxlJyxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoXy5vbWl0KG5ld1Byb2ZpbGUsICdwcm9maWxlcycpKSxcbiAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzcykge1xuICAgICAgICBcbiAgICAgICAgdXNlcl9pZCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5vYmplY3RJZFxuICAgICAgICBuZXdQcm9maWxlLnVzZXIgPSBhcHBDb25maWcucG9pbnRlcignX1VzZXInLCB1c2VyX2lkKSBcbiAgICAgICAgbmV3UHJvZmlsZS5jb21wYW55ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLmNvbXBhbnlcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RMaXN0JyxcbiAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeShfLnBpY2sobmV3UHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25hbWUnLCd1c2VyJywnbGlzdF90eXBlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3Blbl9wZW9wbGUnLCAnY29tcGFueScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21pbmluZ19qb2JfbGlzdCcpKSxcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgICAgIHByb3NwZWN0TGlzdCA9IGFwcENvbmZpZy5wb2ludGVyKCdQcm9zcGVjdExpc3QnLHJlcy5vYmplY3RJZClcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdFByb2ZpbGUvJytyZXNzLm9iamVjdElkLFxuICAgICAgICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICAgICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoeydwcm9zcGVjdF9saXN0Jzpwcm9zcGVjdExpc3R9KSxcbiAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKXsgY29uc29sZS5sb2cocmVzKSB9LFxuICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKXsgY29uc29sZS5sb2coZXJyKSB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkgeyB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gU3RhcnQgTWluaW5nIEpvYlxuICAgICAgICBpZihuZXdQcm9maWxlLnR5cGUgPT0gJ3Byb3NwZWN0X3Byb2ZpbGUnKSB7XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIC8vdXJsOidodHRwczovL25hbWVsZXNzLXJldHJlYXQtMzUyNS5oZXJva3VhcHAuY29tL21pbmluZ19qb2IvdGl0bGUnLFxuICAgICAgICAgICAgLy8vdXJsOidodHRwczovL25hbWVsZXNzLXJldHJlYXQtMzUyNS5oZXJva3VhcHAuY29tL3RpdGxlX21pbmluZ19qb2InLFxuICAgICAgICAgICAgdXJsOidodHRwOi8vMTI3LjAuMC4xOjUwMDAvdGl0bGVfbWluaW5nX2pvYicsXG4gICAgICAgICAgICB0eXBlOidHRVQnLFxuICAgICAgICAgICAgZGF0YToge3Byb3NwZWN0X3Byb2ZpbGU6IHJlc3Mub2JqZWN0SWR9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IGNvbnNvbGUubG9nKHJlcykgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyKSB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBQcm9maWxlc1xuICAgICAgICBfLm1hcChub25lbXB0eVByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK18udmFsdWVzKHByb2ZpbGUpWzBdLFxuICAgICAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSggXy5waWNrKHByb2ZpbGUsIF8ua2V5cyhwcm9maWxlKVsxXSkgKSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0UHJvZmlsZS8nK3Jlc3Mub2JqZWN0SWQsXG4gICAgICAgICAgICAgICAgdHlwZTonUFVUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoe3Byb2ZpbGVzOntcbiAgICAgICAgICAgICAgICAgIF9fb3A6ICdBZGRVbmlxdWUnLFxuICAgICAgICAgICAgICAgICAgb2JqZWN0czpbe1xuICAgICAgICAgICAgICAgICAgICBfX3R5cGU6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IF8udmFsdWVzKHByb2ZpbGUpWzBdLFxuICAgICAgICAgICAgICAgICAgICBvYmplY3RJZDpyZXMub2JqZWN0SWRcbiAgICAgICAgICAgICAgICAgIH1dfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXNzLnByb3BzLnVwZGF0ZVByb2ZpbGVXaXRoT2JqZWN0SWQobmV3UHJvZmlsZS50aW1lc3RhbXAsIHJlc3Mub2JqZWN0SWQpXG4gICAgICB9XG4gICAgfSlcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwgZmFkZSBcIiwgdGFiSW5kZXg6IFwiLTFcIiwgcm9sZTogXCJkaWFsb2dcIiwgXG4gICAgICAgICAgICdhcmlhLWxhYmVsbGVkYnknOiBcIm15U21hbGxNb2RhbExhYmVsXCIsICdhcmlhLWhpZGRlbic6IFwidHJ1ZVwiLCBcbiAgICAgICAgICAgaWQ6IFwiY3JlYXRlUHJvc3BlY3RQcm9maWxlTW9kYWxcIiwgXG4gICAgICAgICAgIHN0eWxlOiB7dG9wOic1MHB4JyxvdmVyZmxvdzonaGlkZGVuJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1kaWFsb2cgbW9kYWwtc21cIiwgc3R5bGU6IHt3aWR0aDo2NTB9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1jb250ZW50XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtaGVhZGVyXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNCh7Y2xhc3NOYW1lOiBcIm1vZGFsLXRpdGxlXCIsIGlkOiBcIm15TW9kYWxMYWJlbFwifSwgXG4gICAgICAgICAgICAgICAgICAgIFwiQ3JlYXRlIFByb3NwZWN0IFByb2ZpbGVcIlxuICAgICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1zbVwiLCBcbiAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY3JlYXRlUHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICBzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luVG9wOi0yOCxtYXJnaW5SaWdodDotNX19LCBcbiAgICAgICAgICAgICAgICAgICAgXCJDcmVhdGUgUHJvZmlsZVwiXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICAgICAgQ3JlYXRlSGlyaW5nU2lnbmFsKG51bGwpXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1mb290ZXJcIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICAgIFwiQ2xvc2VcIlxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnlcIn0sIFxuICAgICAgICAgICAgICAgICAgXCJTZW5kIEVtYWlsXCJcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICApO1xuICB9LFxuICBjcmVhdGVDb21wYW55UHJvZmlsZTogZnVuY3Rpb24oKSB7XG4gIH0sXG59KTtcblxudmFyIENyZWF0ZUhpcmluZ1NpZ25hbCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0NyZWF0ZUhpcmluZ1NpZ25hbCcsXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFkZENvbXBhbnk6IGZhbHNlLFxuICAgICAgYWRkUHJvc3BlY3Q6IGZhbHNlLFxuICAgICAgaGlkZUNvbXBhbnlEZXRhaWxzOiBmYWxzZSxcbiAgICAgIGhpZGVQcm9zcGVjdERldGFpbHM6IGZhbHNlLFxuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG5cbiAgfSxcbiAgXG4gIHRvZ2dsZUNvbXBhbnkgOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldFN0YXRlKHthZGRDb21wYW55OiAhdGhpcy5zdGF0ZS5hZGRDb21wYW55fSlcbiAgfSxcblxuICB0b2dnbGVQcm9zcGVjdCA6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2FkZFByb3NwZWN0OiAhdGhpcy5zdGF0ZS5hZGRQcm9zcGVjdH0pXG4gIH0sXG5cbiAgdG9nZ2xlQ29tcGFueURldGFpbHM6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2hpZGVDb21wYW55RGV0YWlsczogIXRoaXMuc3RhdGUuaGlkZUNvbXBhbnlEZXRhaWxzfSlcbiAgfSxcblxuICB0b2dnbGVQcm9zcGVjdERldGFpbHM6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2hpZGVQcm9zcGVjdERldGFpbHM6ICF0aGlzLnN0YXRlLmhpZGVQcm9zcGVjdERldGFpbHN9KVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICBfLm1hcCgkKCcuaGlyaW5nLXJvbGUnKSxmdW5jdGlvbihpbnB1dCl7JChpbnB1dCkudGFnc2lucHV0KCl9KVxuICAgICQodGhpcy5nZXRET01Ob2RlKCkpLmZpbmQoJy5oaXJpbmctcm9sZScpLnRhZ3NpbnB1dCgpXG4gICAgJCgnLmJvb3RzdHJhcC10YWdzaW5wdXQnKS53aWR0aCgnNTkuMSUnKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKXtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgUmVhY3QuRE9NLmZvcm0oe2NsYXNzTmFtZTogXCJjcmVhdGVTaWduYWxcIiwgb25TdWJtaXQ6IHRoaXMuY3JlYXRlUHJvZmlsZX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge3dpZHRoOjE0MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snLG1hcmdpbkJvdHRvbToyMH19LCBcbiAgICAgICAgICAgICAgXCJQcm9zcGVjdCBQcm9maWxlIE5hbWU6IMKgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonNzMuMSUnfSwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBoaXJpbmctcHJvZmlsZS1uYW1lIHByb2ZpbGVOYW1lXCIsIFxuICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIlByb3NwZWN0IFByb2ZpbGUgTmFtZSAuLi5cIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtkaXNwbGF5OidibG9jaycsbWFyZ2luQm90dG9tOi0xMH19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgICAgXCJUaXRsZTogwqBcIlxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwidGV4dFwiLCBcbiAgICAgICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6JzczLjElJyxtYXJnaW5SaWdodDoxMH0sIFxuICAgICAgICAgICAgICAgICAgICdkYXRhLXJvbGUnOiBcInRhZ3NpbnB1dFwiLCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGhpcmluZy1yb2xlIHByb3NwZWN0LXByb2ZpbGUtdGl0bGVcIn0pLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXhzIGJ0bi1zdWNjZXNzXCIsIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7ZGlzcGxheTonYmxvY2snLG1hcmdpbkJvdHRvbTotMTB9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7d2lkdGg6MTQwLGRpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICBcIkxvY2F0aW9uOiDCoFwiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonbm9uZScsd2lkdGg6JzczLjElJyxtYXJnaW5SaWdodDoxMH0sIFxuICAgICAgICAgICAgICAgICAgICdkYXRhLXJvbGUnOiBcInRhZ3NpbnB1dFwiLCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIHByb3NwZWN0LWxvY2F0aW9uLXByb2ZpbGUtdG1wXCJ9KSwgXG5cbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tc3VjY2Vzc1wiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wbHVzXCJ9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtkaXNwbGF5Oidub25lJyxtYXJnaW5Cb3R0b206LTEwfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge3dpZHRoOjE0MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFxuICAgICAgICAgICAgICBcIkluZHVzdHJpZXM6IMKgXCJcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOic3My4xJScsbWFyZ2luUmlnaHQ6MTB9LCBcbiAgICAgICAgICAgICAgICAgICAnZGF0YS1yb2xlJzogXCJ0YWdzaW5wdXRcIiwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBcIn0pLCBcblxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tc3VjY2Vzc1wiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgQ29tcGFueVByb2ZpbGUobnVsbCksIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge21hcmdpblRvcDoxMH19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcIkF1dG8gUHJvc3BlY3Q6IMKgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXAgYXV0b3Byb3NwZWN0XCIsICdkYXRhLXRvZ2dsZSc6IFwiYnV0dG9uc1wifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgYWN0aXZlXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwicmFkaW9cIn0pLCBcIiBZZXNcIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInJhZGlvXCJ9KSwgXCIgTm9cIlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH0sXG4gIGNyZWF0ZVNpZ25hbDogZnVuY3Rpb24oZSkgeyBlLnByZXZlbnREZWZhdWx0KCkgfVxufSk7XG5cbnZhciBDb21wYW55UHJvZmlsZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0NvbXBhbnlQcm9maWxlJyxcbiAgY29tcGFueUZvcm1TdWJtaXQ6IGZ1bmN0aW9uKGUpIHsgZS5wcmV2ZW50RGVmYXVsdCgpIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICQodGhpcy5nZXRET01Ob2RlKCkpLmZpbmQoJy5idG4tZGVmYXVsdCcpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcblxuICAgICAgaWYoJChlLnRhcmdldCkucGFyZW50KCdsYWJlbCcpLmhhc0NsYXNzKCdhY3RpdmUnKSlcbiAgICAgICAgJChlLnRhcmdldCkucGFyZW50KCdsYWJlbCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxuICAgICAgZWxzZVxuICAgICAgICAkKGUudGFyZ2V0KS5wYXJlbnQoJ2xhYmVsJykuYWRkQ2xhc3MoJ2FjdGl2ZScpXG5cbiAgICAgIGNvbnNvbGUubG9nKCQoZS50YXJnZXQpLnBhcmVudCgnbGFiZWwnKSlcbiAgICB9KTtcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyxtYXJnaW46MCxcbiAgICAgICAgICAgICAgICAgICAgICB3aWR0aDoxNDAsbWFyZ2luQm90dG9tOjIwfX0sIFwiQ29tcGFueSBTaXplIFwiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXBcIiwgJ2RhdGEtdG9nZ2xlJzogXCJidXR0b25zXCIsIFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7d2lkdGg6JzczLjUlJ30sIGlkOiBcInByb3NwZWN0LXByb2ZpbGUtY29tcGFueVNpemVCdG5zXCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBlbXBsb3llZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgMSAtIDUwXCJcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgZW1wbG95ZWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDUwIC0gMjUwXCJcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgZW1wbG95ZWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDI1MCAtIDEwMDBcIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBlbXBsb3llZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgMTAwMCArXCJcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICksIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXCIgXCIsIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLG1hcmdpbjowLHdpZHRoOjE0MH19LCBcbiAgICAgICAgICAgICAgXCJBcHByb3guIFJldmVudWUgIFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwXCIsICdkYXRhLXRvZ2dsZSc6IFwiYnV0dG9uc1wiLCBcbiAgICAgICAgICAgICAgc3R5bGU6IHt3aWR0aDonNzMuNSUnfSwgaWQ6IFwicHJvc3BlY3QtcHJvZmlsZS1jb21wYW55UmV2ZW51ZUJ0bnNcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IHJldmVudWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIFwiLCAnPCAkMU0nXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IHJldmVudWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiICQxTSAtICQ1TVwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IHJldmVudWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiICQ1TSAtICQyNU1cIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCByZXZlbnVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkMjVNICtcIlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfVxufSk7XG5cbnZhciBQcm9zcGVjdFByb2ZpbGUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdQcm9zcGVjdFByb2ZpbGUnLFxuICBwcm9zcGVjdEZvcm1TdWJtaXQ6IGZ1bmN0aW9uKGUpIHsgZS5wcmV2ZW50RGVmYXVsdCgpIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICQoJy5wcm9zcGVjdFJvbGVLZXl3b3JkcycpLnRhZ3NpbnB1dCh7XG4gICAgICBtYXhUYWdzOiA1LFxuICAgIH0pXG4gICAgJCgnLmJvb3RzdHJhcC10YWdzaW5wdXQnKS53aWR0aCg0MDApXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBzaG93RGV0YWlscyA9ICh0aGlzLnByb3BzLmhpZGVQcm9zcGVjdERldGFpbHMpID8ge2Rpc3BsYXk6ICdub25lJ30gOiB7ZGlzcGxheTonYmxvY2snfVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZTogc2hvd0RldGFpbHN9LCBcbiAgICAgICAgUmVhY3QuRE9NLmZvcm0oe2NsYXNzTmFtZTogXCJjcmVhdGVTaWduYWxcIiwgb25TdWJtaXQ6IHRoaXMucHJvc3BlY3RGb3JtU3VibWl0fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4obnVsbCwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIFwiSm9iIFRpdGxlIEtleXdvcmQ6IMKgXCIpXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgICdkYXRhLXJvbGUnOiBcInRhZ3NpbnB1dFwiLCBcbiAgICAgICAgICAgICAgICAgICBzdHlsZToge3dpZHRoOic0MDBweCAhaW1wb3J0YW50J30sIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgcHJvc3BlY3RSb2xlS2V5d29yZHNcIiwgXG4gICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiXCJ9KVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfVxufSlcbiIsIi8qKiBAanN4IHJlYWN0LmRvbSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBcbiAgICB9XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICQoJy50ZW1wbGF0ZS1ib2R5JykuaHRtbCh0aGlzLnN0YXRlLnRlbXBsYXRlQm9keSlcbiAgfSxcblxuICBjbGlja2VkT3ZlcmxheTogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2NsaWNrZWQgb3ZlcmxheScpXG4gICAgdGhpcy5wcm9wcy50b2dnbGVUZW1wbGF0ZUVkaXRNZW51KClcbiAgfSxcblxuICBjaGFuZ2VNb2RlOiBmdW5jdGlvbigpIHtcbiAgICAvLyBVcGRhdGUgdGVtcGxhdGUgaHRtbCBvbiB0b2dnbGVcbiAgICBjb25zb2xlLmxvZygnRURJVCBNT0RFJylcbiAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLmVkaXRNb2RlKVxuICAgIHBhcnNlX2hlYWRlcnMgPSBhcHBDb25maWcucGFyc2VIZWFkZXJzXG4gICAgaWYodGhpcy5zdGF0ZS5lZGl0TW9kZSl7XG4gICAgICAkKCcuc3VtbWVyJykuZGVzdHJveSgpO1xuICAgICAgdGhpcy5wcm9wcy5zYXZlVGVtcGxhdGUoe1xuICAgICAgICBuYW1lOiB0aGlzLnN0YXRlLm5hbWUsXG4gICAgICAgIHRlbXBsYXRlQm9keTogJCgnLnN1bW1lcicpLmNvZGUoKSxcbiAgICAgICAgdGVtcGxhdGVTdWJqZWN0OiAkKCcuc3ViamVjdCcpLnZhbCgpLFxuICAgICAgfSlcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICB0ZW1wbGF0ZUJvZHk6ICQoJy5zdW1tZXInKS5jb2RlKCksXG4gICAgICAgIHRlbXBsYXRlU3ViamVjdDogJCgnLnN1YmplY3QnKS52YWwoKSxcbiAgICAgICAgZWRpdE1vZGU6ICF0aGlzLnN0YXRlLmVkaXRNb2RlLFxuICAgICAgfSlcbiAgICAgICQuYWpheCh7XG4gICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9UZW1wbGF0ZXMvJyt0aGlzLnByb3BzLmluaXRpYWxUZW1wbGF0ZVZhbHVlcy5vYmplY3RJZCxcbiAgICAgICAgdHlwZTonUFVUJyxcbiAgICAgICAgaGVhZGVyczpwYXJzZV9oZWFkZXJzLFxuICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KHtib2R5OiAkKCcuc3VtbWVyJykuY29kZSgpLHN1YmplY3Q6ICQoJy5zdWJqZWN0JykudmFsKCl9KSxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVkaXRNb2RlOiAhdGhpcy5zdGF0ZS5lZGl0TW9kZSB9KVxuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgIC8qIHRoaXNzID0gdGhpczsgKi9cblxuICAgIGNvbnNvbGUubG9nKCdPVEhFUicpXG4gICAgaWYodGhpcy5zdGF0ZS5lZGl0TW9kZSl7XG4gICAgICBjb25zb2xlLmxvZygnQ0FMTEVEJylcbiAgICAgIC8vIFJlcGxhY2UgU3ViamVjdCBcbiAgICAgICQoJy5zdWJqZWN0JykudmFsKHRoaXMuc3RhdGUudGVtcGxhdGVTdWJqZWN0KVxuXG4gICAgICAkKCcuc3VtbWVyJykuc3VtbWVybm90ZSh7XG4gICAgICAgIGhlaWdodDogMjAwLFxuICAgICAgICB0b29sYmFyOiBbXG4gICAgICAgICAgWydzdHlsZScsIFsnYm9sZCcsICdpdGFsaWMnLCAndW5kZXJsaW5lJywgJ2NsZWFyJ11dLFxuICAgICAgICAgIFsnZm9udCcsIFsnc3RyaWtldGhyb3VnaCddXSxcbiAgICAgICAgICBbJ2ZvbnRzaXplJywgWydmb250c2l6ZSddXSxcbiAgICAgICAgICBbJ2NvbG9yJywgWydjb2xvciddXSxcbiAgICAgICAgICBbJ3BhcmEnLCBbJ3VsJywgJ29sJywgJ3BhcmFncmFwaCddXSxcbiAgICAgICAgICBbJ2hlaWdodCcsIFsnaGVpZ2h0J11dLFxuICAgICAgICBdXG4gICAgICB9KVxuXG4gICAgICAvLyBJbml0aWFsaXplIEVkaXRvciB3aXRoIGh0bWxcbiAgICAgICQoJy5zdW1tZXInKS5jb2RlKHRoaXMuc3RhdGUudGVtcGxhdGVCb2R5KVxuICAgIH1cbiAgfSxcblxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgc3ViamVjdFBsYWNlID0gKHRoaXMuc3RhdGUuZWRpdE1vZGUpID8gcmVhY3QuZG9tLmlucHV0KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZScsd2lkdGg6NDgwfSwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBzdWJqZWN0XCJ9KSA6IHRoaXMuc3RhdGUudGVtcGxhdGVTdWJqZWN0XG5cbiAgICBpZih0aGlzLnN0YXRlLmVkaXRNb2RlKXtcbiAgICAgICB0b2dnbGVCdXR0b24gPSByZWFjdC5kb20uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmNoYW5nZU1vZGUsIFxuICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzXCIsIFxuICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snLGZsb2F0OidyaWdodCcsbWFyZ2luVG9wOjV9fSwgXG4gICAgICAgICAgICByZWFjdC5kb20uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXNhdmVcIn0pLCBcIiDCoCBTYXZlIFRlbXBsYXRlXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgICB0b2dnbGVCdXR0b24gPSByZWFjdC5kb20uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmNoYW5nZU1vZGUsIFxuICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgYnRuLXhzXCIsIFxuICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snLGZsb2F0OidyaWdodCcsbWFyZ2luVG9wOjV9fSwgXG4gICAgICAgICAgICByZWFjdC5kb20uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBlbmNpbC1zcXVhcmVcIn0pLCBcIiDCoCBFZGl0IFRlbXBsYXRlXCIpXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIHJlYWN0LmRvbS5kaXYobnVsbCwgXG4gICAgICByZWFjdC5kb20uZGl2KHtvbkNsaWNrOiB0aGlzLmNsaWNrZWRPdmVybGF5LCBpZDogXCJlZGl0VGVtcGxhdGVPdmVybGF5XCJ9KSwgXG4gICAgICByZWFjdC5kb20uZGl2KHtpZDogXCJlZGl0VGVtcGxhdGVWaWV3XCIsIFxuICAgICAgICAgICBjbGFzc05hbWU6IFwicGFuZWwgcGFuZWwtaW5mb1wiLCBcbiAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9fSwgXG4gICAgICAgICAgIHJlYWN0LmRvbS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1oZWFkaW5nXCIsIHN0eWxlOiB7aGVpZ2h0OjUwfX0sIFxuICAgICAgICAgICAgIHJlYWN0LmRvbS5oNih7c3R5bGU6IHtmbG9hdDonbGVmdCd9fSwgXG4gICAgICAgICAgICAgICByZWFjdC5kb20uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWZpbGUtdGV4dC1vXCJ9KSwgXG4gICAgICAgICAgICAgICBcIiAgXCIgKyB0aGlzLnByb3BzLmluaXRpYWxUZW1wbGF0ZVZhbHVlcy5uYW1lXG4gICAgICAgICAgICAgKSwgXG4gICAgICAgICAgdG9nZ2xlQnV0dG9uXG4gICAgICAgICksIFxuICAgICAgICByZWFjdC5kb20uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtYm9keVwifSwgXG4gICAgICAgICAgcmVhY3QuZG9tLmRpdih7Y2xhc3NOYW1lOiBcImVkaXRUZW1wbGF0ZVRpdGxlXCJ9LCBcbiAgICAgICAgICAgIHJlYWN0LmRvbS5zcGFuKG51bGwsIFwiU3ViamVjdDogXCIpLCBcbiAgICAgICAgICAgIHN1YmplY3RQbGFjZVxuICAgICAgICAgICksIFxuICAgICAgICAgcmVhY3QuZG9tLmJyKG51bGwpLCBcbiAgICAgICAgIHJlYWN0LmRvbS5kaXYoe2NsYXNzTmFtZTogXCJ0ZW1wbGF0ZURldGFpbHNcIn0sIFxuICAgICAgICAgICByZWFjdC5kb20uaDYoe3N0eWxlOiB7bWFyZ2luQm90dG9tOicwJ30sIGNsYXNzTmFtZTogXCJ0ZXh0LW11dGVkXCJ9LCBcbiAgICAgICAgICAgICBcIkNyZWF0ZWQgYnkgTWFyayBvbiBKdWwuIDIxLCAyMDE0XCJcbiAgICAgICAgICAgKSwgXG4gICAgICAgICAgIHJlYWN0LmRvbS5oNih7c3R5bGU6IHttYXJnaW5Ub3A6JzAnfSwgY2xhc3NOYW1lOiBcInRleHQtbXV0ZWRcIn0sIFxuICAgICAgICAgICAgIFwibGFzdCB1cGRhdGVkIDcgZGF5cyBhZ29cIlxuICAgICAgICAgICApXG4gICAgICAgICApLCBcbiAgICAgICAgcmVhY3QuZG9tLmJyKG51bGwpLCBcbiAgICAgICAgcmVhY3QuZG9tLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsIHBhbmVsLWRlZmF1bHRcIn0sIFxuICAgICAgICAgIHJlYWN0LmRvbS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1ib2R5IHN1bW1lciB0ZW1wbGF0ZS1ib2R5XCJ9XG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgKVxuKVxuKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIERhdGFSb3dcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4geyB9XG4gIH0sXG5cbiAgY2xpY2tDaGVjazogZnVuY3Rpb24oKSB7XG4gICAgZG9tTm9kZSA9IHRoaXMuZ2V0RE9NTm9kZSgpXG4gICAgaXNDaGVja2VkID0gJCgkKGRvbU5vZGUpLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpWzBdKS5wcm9wKCdjaGVja2VkJylcbiAgICAvL2NvbnNvbGUubG9nKGlzQ2hlY2tlZClcbiAgICB0aGlzLnNldFN0YXRlKHtjaGVja2VkOiBpc0NoZWNrZWR9KVxuICAgIHRoaXMucHJvcHMuY2hlY2tib3hBY3Rpb24oaXNDaGVja2VkLCB0aGlzLnByb3BzLnByb3NwZWN0Lm9iamVjdElkKVxuICB9LFxuXG4gIHJvd0NsaWNrOiBmdW5jdGlvbigpIHtcbiAgICAkKCQodGhpcy5nZXRET01Ob2RlKCkpLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpWzBdKS5jbGljaygpXG4gIH0sXG5cbiAga2V5Ym9hcmRDbGljazogZnVuY3Rpb24oKSB7XG4gICAgJCgkKCcua2V5U2VsZWN0JykuZmluZCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJylbMF0pLmNsaWNrKClcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7IH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBrZXlib2FyZFNlbGVjdGVkID0ge2JvcmRlckxlZnQ6JzdweCBzb2xpZCByZ2JhKDAsMCwwLDApJ31cbiAgICB0aGlzc3NzID0gdGhpc1xuICAgIGlmKHRoaXMucHJvcHMua2V5Ym9hcmRTZWxlY3RlZCkge1xuICAgICAgLy8gQWRqdXN0IFNjcm9sbCBkZXBlbmRpbmcgb24gd2hlcmUgdGhlIHByb3NwZWN0IGlzXG4gICAgICBrZXlib2FyZFNlbGVjdGVkID0ge2JvcmRlckxlZnQ6JzdweCBzb2xpZCAjMDA5NmZmICFpbXBvcnRhbnQnfVxuICAgICAgTW91c2V0cmFwLnVuYmluZCgneCcpXG4gICAgICBNb3VzZXRyYXAuYmluZCgneCcsIGZ1bmN0aW9uKCkgeyBcbiAgICAgICAgdGhpc3Nzcy5rZXlib2FyZENsaWNrKClcbiAgICAgICAgaWYodGhpc3Nzcy5zdGF0ZS5jaGVja2VkKVxuICAgICAgICAgIGNvbnNvbGUubG9nKFwibG1hb1wiKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJvc3BlY3QgPSB0aGlzLnByb3BzLnByb3NwZWN0XG5cbiAgICBpZih0aGlzLnByb3BzLm1hc3RlckNoZWNrYm94Q2hlY2tlZCAmJiB0aGlzLnN0YXRlLmNoZWNrZWQpXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgIGVsc2UgaWYodGhpcy5wcm9wcy5hbHJlYWR5Q2hlY2tlZClcbiAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgZWxzZSBpZih0aGlzLnN0YXRlLmNoZWNrZWQpXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgIGVsc2UgaWYodGhpcy5wcm9wcy5tYXN0ZXJDaGVja2JveENoZWNrZWQgfHwgdGhpcy5zdGF0ZS5jaGVja2VkKVxuICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICBlbHNlXG4gICAgICBjaGVja2VkID0gZmFsc2VcblxuICAgIC8vY29uc29sZS5sb2codGhpcy5zdGF0ZS5jaGVja2VkKVxuICAgIC8vY29uc29sZS5sb2coY2hlY2tlZClcbiAgICAvL3twcm9zcGVjdC5lbXBsb3llZUNvdW50UmFuZ2UubmFtZSArIFwiIGVtcGxveWVlc1wiIH1cbiAgICBcbiAgICBjb2xvciA9IHt9XG4gICAgaWYodGhpcy5zdGF0ZS5jaGVja2VkIHx8IHRoaXMucHJvcHMuYWxyZWFkeUNoZWNrZWQpXG4gICAgICBjb2xvciA9IHtiYWNrZ3JvdW5kQ29sb3I6ICcjZWVmOGZmJ31cbiAgICAgIFxuICAgIHJvd0NsID0gKHRoaXMucHJvcHMua2V5Ym9hcmRTZWxlY3RlZCkgPyBcInByb3NwZWN0cy10ciBrZXlTZWxlY3RcIiA6IFwicHJvc3BlY3RzLXRyXCJcbiAgICB3ZWJzaXRlQnRuID0gKHByb3NwZWN0LndlYnNpdGVVcmwpID8gIFJlYWN0LkRPTS5hKHtocmVmOiBcImh0dHA6Ly9cIitwcm9zcGVjdC53ZWJzaXRlVXJsLnJlcGxhY2UoJ2h0dHA6Ly8nLCcnKX0sIFwiIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWdsb2JlXCJ9KSwgXCIgXCIpIDogXCJcIlxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udHIoe2NsYXNzTmFtZTogcm93Q2wsIFxuICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucm93Q2xpY2ssIFxuICAgICAgICAgIHN0eWxlOiBrZXlib2FyZFNlbGVjdGVkfSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3J9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCIsIFxuICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuY2xpY2tDaGVjaywgXG4gICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBjaGVja2VkfSlcbiAgICAgICAgICApLCBcblxuICAgICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IGNvbG9yLCBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZpeGVkLWRhdGEtY29sdW1uXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnfX0sIHByb3NwZWN0Lm5hbWUpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtmb250V2VpZ2h0Oic0MDAnLG1hcmdpbjonMHB4J319LCBwcm9zcGVjdC5oZWFkY291bnQpXG4gICAgICAgICAgKSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiBjb2xvciwgXG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmaXhlZC1kYXRhLWNvbHVtblwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luOicwcHgnfX0sIG1vbWVudChwcm9zcGVjdC5jcmVhdGVkQXQsJ1lZWVktTU0tRERUaDptbTpzcycpLmZyb21Ob3coKSlcbiAgICAgICAgICApLCBcblxuICAgICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IGNvbG9yLCBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZpeGVkLWRhdGEtY29sdW1uXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW46JzBweCd9fSwgcHJvc3BlY3QuaW5kdXN0cnkpXG4gICAgICAgICAgKSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiBjb2xvcn0sIFxuICAgICAgICAgICAgXCLCoCDCoFwiLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgYnRuLXhzXCIsIFxuICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLm9wZW5MaW5rZWRpbkNvbXBhbnlQcm9maWxlLCBcbiAgICAgICAgICAgICAgc3R5bGU6IHtiYWNrZ3JvdW5kSW1hZ2U6ICdsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCAjMDA5NmZmIDAlLCAjMDA1ZGZmIDEwMCUpJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1zZWFyY2hcIn0pLCBcIiDCoFwiICsgJyAnICtcbiAgICAgICAgICAgICAgXCJTZWFyY2ggUHJvZmlsZXNcIlxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBcIsKgIMKgXCIsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4teHNcIiwgXG4gICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMub3BlblNpbWlsYXJDb21wYW5pZXMsIFxuICAgICAgICAgICAgICBzdHlsZToge2JhY2tncm91bmRJbWFnZTogJ2xpbmVhci1ncmFkaWVudCgxODBkZWcsICMwMDk2ZmYgMCUsICMwMDVkZmYgMTAwJSknfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNvcHlcIn0pLCBcIiDCoFwiICsgJyAnICtcbiAgICAgICAgICAgICAgXCJGaW5kIFNpbWlsYXIgQ29tcGFuaWVzXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLCBcblxuICAgICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IGNvbG9yfSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luOicwcHgnfX0sIHByb3NwZWN0LmNpdHkpXG4gICAgICAgICAgKSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiBjb2xvcn0sIFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5saSwgXCLCoFwiLCB0aGlzLnByb3BzLmxpbmssIFxuICAgICAgICAgICAgd2Vic2l0ZUJ0blxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgb3BlbkxpbmtlZGluQ29tcGFueVByb2ZpbGU6IGZ1bmN0aW9uKGUpIHtcbiAgICBjaWQgPSB0aGlzLnByb3BzLnByb3NwZWN0LnByb2ZpbGUuc3BsaXQoJz8nKVswXS5zcGxpdCgnL2NvbXBhbnkvJylbMV1cbiAgICB3aW5kb3cub3BlbihcImh0dHBzOi8vd3d3LmxpbmtlZGluLmNvbS92c2VhcmNoL3A/Zl9DQz1cIitjaWQpXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICB9LFxuXG4gIG9wZW5TaW1pbGFyQ29tcGFuaWVzOiBmdW5jdGlvbihlKSB7XG4gICAgY2lkID0gdGhpcy5wcm9wcy5wcm9zcGVjdC5wcm9maWxlLnNwbGl0KCc/JylbMF0uc3BsaXQoJy9jb21wYW55LycpWzFdXG4gICAgd2luZG93Lm9wZW4oXCJodHRwczovL3d3dy5saW5rZWRpbi5jb20vdnNlYXJjaC9jP3JzaWQ9NTI2NDQwMzcxNDA5MTg0NzY4MTc1JnBpdm90VHlwZT1zaW0mcGlkPVwiK2NpZCtcIiZ0cms9c2ltX2NvbXBhbmllc19yZXNfc2ltJnRya0luZm89VlNSUHNlYXJjaElkJTNBNTI2NDQwMzcxNDA5MTg0NzY4MTc1JTJDVlNSUHRhcmdldElkJTNBMTAyNSUyQ1ZTUlBjbXB0JTNBcHJpbWFyeVwiKVxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgfSxcblxuICBkZWxldGVQcm9zcGVjdDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcm9wcy5kZWxldGVQcm9zcGVjdCh0aGlzLnByb3BzLnByb3NwZWN0Lm9iamVjdElkLCAnUHJvc3BlY3QnKVxuICB9XG59KTtcblxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbi8vVE9ETyAtIGFic3RyYWN0IGxpc3RzXG52YXIgU2lkZU1lbnVQcm9zcGVjdHMgPSByZXF1aXJlKCcuL3NpZGVfbWVudV91c2VyX3Byb3NwZWN0cy5qcy5taW4uanMnKTtcblxudmFyIFVzZXJQcm9zcGVjdCA9IHJlcXVpcmUoJy4vdXNlcl9wcm9zcGVjdC5qcy5taW4uanMnKTtcbnZhciBEYXRhUm93ID0gcmVxdWlyZSgnLi9kYXRhX3Jvdy5qcy5taW4uanMnKTtcblxudmFyIFVzZXJQcm9zcGVjdEhlYWRlciA9IHJlcXVpcmUoJy4vdXNlcl9wcm9zcGVjdF9oZWFkZXIuanMubWluLmpzJyk7XG52YXIgU2lkZU1lbnVMaXN0T3B0aW9uID0gcmVxdWlyZSgnLi91c2VyX3NpZGVfbWVudV9saXN0LmpzLm1pbi5qcycpO1xudmFyIExvYWRpbmdTcGlubmVyID0gcmVxdWlyZSgnLi9sb2FkaW5nX3NwaW5uZXIuanMubWluLmpzJylcbnZhciBQYW5lbEZvb3RpbmcgPSByZXF1aXJlKCcuL3BhbmVsX2Zvb3RpbmcuanMubWluLmpzJylcbnZhciBNZXNzZW5nZXIgPSByZXF1aXJlKCcuL21lc3Nlbmdlci5qcy5taW4uanMnKVxudmFyIERlbGV0ZUxpc3RNb2RhbCA9IHJlcXVpcmUoJy4vZGVsZXRlX2xpc3RfbW9kYWwuanMubWluLmpzJylcbnZhciBSZW5hbWVMaXN0TW9kYWwgPSByZXF1aXJlKCcuL3JlbmFtZV9saXN0X21vZGFsLmpzLm1pbi5qcycpXG52YXIgQ29tcGFueVByb3NwZWN0ID0gcmVxdWlyZSgnLi9jb21wYW55LmpzLm1pbi5qcycpO1xudmFyIENyZWF0ZVByb3NwZWN0TGlzdEZyb21Db21wYW55TGlzdE1vZGFsID0gcmVxdWlyZSgnLi9jcmVhdGVfcHJvc3BlY3RfbGlzdF9mcm9tX2NvbXBhbnlfbGlzdC5qcy5taW4uanMnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7ICBjdXJyZW50UGFnZSA6IDEsXG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogdGhpcy5wcm9wcy5jbGFzc05hbWUsICBcbiAgICAgICAgICAgICAgbGlzdENsYXNzTmFtZTogdGhpcy5wcm9wcy5saXN0Q2xhc3NOYW1lLFxuICAgICAgICAgICAgICBjdXN0b21Sb3c6IHRoaXMucHJvcHMudGFibGVSb3csXG4gICAgICAgICAgICAgIHBhZ2VzICAgICAgIDogMSxcbiAgICAgICAgICAgICAgY3VycmVudExpc3QgOiAnQWxsJyxcbiAgICAgICAgICAgICAgY3VycmVudExpc3RPYmplY3RJZCA6ICcnLFxuICAgICAgICAgICAgICBsb2FkaW5nOiB0cnVlLFxuICAgICAgICAgICAgICBsaXN0cyA6IFtdLFxuICAgICAgICAgICAgICBtYXN0ZXJDaGVja2JveENoZWNrZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICBwcm9zcGVjdHNQZXJQYWdlOiA1MCwgICAgICAgICAvL2NsYXNzTmFtZXMgcGVyIHBhZ2VcbiAgICAgICAgICAgICAga2V5Ym9hcmRBY3RpdmVQcm9zcGVjdDogMCwgICAgLy9maXJzdFxuICAgICAgICAgICAgICBzZWxlY3RlZFByb3NwZWN0czogW10sICAgICAgICAvL3NlbGVjdGVkQ2xhc3NOYW1lXG4gICAgICAgICAgICAgIHByb3NwZWN0cyAgIDogW10sICAgICAgICAgICAgIC8vY2xhc3NOYW1lXG4gICAgICAgICAgICAgIHRvdGFsQ291bnQgIDogXCJ+XCIsIFxuICAgICAgICAgICAgICBjb3VudCAgICAgICA6IFwiflwiLCB9XG4gIH0sXG5cbiAgY3JlYXRlTGlzdDogZnVuY3Rpb24oZGF0YSkge1xuICAgIGxpc3RzID0gdGhpcy5zdGF0ZS5saXN0c1xuICAgIGxpc3RzLnB1c2goZGF0YSlcbiAgICB0aGlzLnNldFN0YXRlKHsgbGlzdHM6IGxpc3RzIH0pXG4gIH0sXG5cbiAgcmVuYW1lTGlzdDogZnVuY3Rpb24obmV3TGlzdE5hbWUpIHtcbiAgICBwYXJzZUhlYWRlcnMgPSB7XG4gICAgICAnWC1QYXJzZS1BcHBsaWNhdGlvbi1JZCcgIDogJ044NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkonLCBcbiAgICAgICdYLVBhcnNlLVJFU1QtQVBJLUtleScgICAgOiAnVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYicsXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfVxuICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZClcbiAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLmN1cnJlbnRMaXN0KVxuICAgIGNvbnNvbGUubG9nKG5ld0xpc3ROYW1lKVxuXG4gICAgLy8gVXBkYXRlIExvY2FsIFN0YXRlXG4gICAgdGhpc3MgPSB0aGlzO1xuICAgIHZhciBmaWx0ZXJlZCA9IF8uZmlsdGVyKHRoaXMuc3RhdGUubGlzdHMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgIGlmKGl0ZW0ubmFtZSA9PSB0aGlzcy5zdGF0ZS5jdXJyZW50TGlzdCl7XG4gICAgICAgIGl0ZW0ubmFtZSA9IG5ld0xpc3ROYW1lXG4gICAgICAgIHJldHVybiBpdGVtXG4gICAgICB9XG4gICAgICByZXR1cm4gaXRlbVxuICAgIH0pO1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7bGlzdHMgOiBmaWx0ZXJlZH0pXG4gICAgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudExpc3Q6IG5ld0xpc3ROYW1lfSlcblxuICAgICQoJy5tb2RhbCcpLmNsaWNrKClcbiAgICAkKCcjbmV3TGlzdE5hbWUnKS52YWwoJycpXG4gICAgJCgnLm1vZGFsLWJhY2tkcm9wJykuY2xpY2soKVxuXG4gICAgLy8gUGVyc2lzdCAvIEFqYXhcbiAgICBsaXN0Q2xhc3NOYW1lID0gdGhpcy5zdGF0ZS5saXN0Q2xhc3NOYW1lXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK2xpc3RDbGFzc05hbWUrJy8nK3RoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZCxcbiAgICAgIGhlYWRlcnM6IHBhcnNlSGVhZGVycyxcbiAgICAgIHR5cGU6J1BVVCcsXG4gICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KHsnbmFtZSc6bmV3TGlzdE5hbWV9KSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgZGVsZXRlTGlzdDogZnVuY3Rpb24oKSB7XG4gICAgLy8gVE9ETyBcbiAgICAvLyBHZXQgQWxsIE1lbWJlcnMgT2YgVGhpcyBMaXN0XG4gICAgLy8gUmVtb3ZlIEZyb20gTGlzdCBBcnJheVxuICAgIHBhcnNlSGVhZGVycyA9IHtcbiAgICAgICdYLVBhcnNlLUFwcGxpY2F0aW9uLUlkJyAgOiAnTjg1UU9rdGVFRVFrdVpWSktBdnQ4TVZlczBzakc2cU5wRUdxUUZWSicsIFxuICAgICAgJ1gtUGFyc2UtUkVTVC1BUEktS2V5JyAgICA6ICdWTjZFd1Z5Qlp3TzF1cGhzQlBzYXU4dDdKUVJwMDBVTTNLWXNpaVFiJyxcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9XG4gICAgXG4gICAgdmFyIGZpbHRlcmVkID0gXy5maWx0ZXIodGhpcy5zdGF0ZS5saXN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgaWYoaXRlbS5vYmplY3RJZCA9PSB0aGlzcy5zdGF0ZS5jdXJyZW50TGlzdE9iamVjdElkKVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHtsaXN0czogZmlsdGVyZWR9KVxuICAgIHRoaXMuc2V0U3RhdGUoe2N1cnJlbnRMaXN0OiAnQWxsJ30pXG4gICAgdGhpcy5jaGFuZ2VMaXN0KCdBbGwnLCAnJylcblxuICAgIC8vIFJlbW92ZVxuICAgICQoJy5tb2RhbCcpLmNsaWNrKClcbiAgICAkKCcjbmV3TGlzdE5hbWUnKS52YWwoJycpXG4gICAgJCgnLm1vZGFsLWJhY2tkcm9wJykuY2xpY2soKVxuXG4gICAgLy8gUGVyc2lzdCAvIEFqYXhcbiAgICBsaXN0Q2xhc3NOYW1lID0gdGhpcy5zdGF0ZS5saXN0Q2xhc3NOYW1lXG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzLycrbGlzdENsYXNzTmFtZSsnLycrdGhpcy5zdGF0ZS5jdXJyZW50TGlzdE9iamVjdElkLFxuICAgICAgaGVhZGVyczogcGFyc2VIZWFkZXJzLFxuICAgICAgdHlwZTonREVMRVRFJyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgY2hhbmdlTGlzdDogZnVuY3Rpb24obmV3TGlzdE5hbWUsb2JqZWN0SWQpIHtcbiAgICAvLyBhZGQgb3ZlcmxheSBsb2FkaW5nXG4gICAgLy9jb25zb2xlLmxvZyhuZXdMaXN0TmFtZSlcbiAgICAvL2NvbnNvbGUubG9nKG9iamVjdElkKVxuXG4gICAgbG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5zdHJpbmdpZnkoW10pXG5cbiAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50TGlzdCA6IG5ld0xpc3ROYW1lfSlcbiAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50TGlzdE9iamVjdElkIDogb2JqZWN0SWR9KVxuICAgIHRoaXMuc2V0U3RhdGUoe3Byb3NwZWN0cyAgOiBbXSAgICB9KVxuICAgIHRoaXMuc2V0U3RhdGUoe2NvdW50ICAgICAgOiAnficgICB9KVxuICAgIHRoaXMuc2V0U3RhdGUoe3BhZ2VzICAgICAgOiAxICAgICB9KVxuICAgIHRoaXMuc2V0U3RhdGUoe2xvYWRpbmcgICAgOiB0cnVlICB9KVxuICAgIHRoaXMuc2V0U3RhdGUoe2N1cnJlbnRQYWdlOiAxfSlcbiAgICB0aGlzLnNldFN0YXRlKHtrZXlib2FyZEFjdGl2ZVByb3NwZWN0OiAwfSlcblxuICAgIHFyeSA9ICd3aGVyZT17XCJjb21wYW55XCI6Jytjb21wYW55KycsXCJhcmNoaXZlZFwiOnRydWV9JmNvdW50PTEmb3JkZXI9LWNyZWF0ZWRBdCdcbiAgICBjb25zb2xlLmxvZyhuZXdMaXN0TmFtZSlcblxuICAgIGlmKHRoaXMuc3RhdGUuY3VycmVudExpc3QgIT0gJ0FsbCcgfHwgdHlwZW9mKG9iamVjdElkKSAhPSBcInVuZGVmaW5lZFwiICYmIG5ld0xpc3ROYW1lICE9ICdBcmNoaXZlZCcpe1xuICAgICAgY3VycmVudExpc3QgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICdvYmplY3RJZCcgIDogb2JqZWN0SWQsIFxuICAgICAgICAnX190eXBlJyAgICA6ICdQb2ludGVyJywgXG4gICAgICAgICdjbGFzc05hbWUnIDogdGhpcy5zdGF0ZS5saXN0Q2xhc3NOYW1lXG4gICAgICB9KVxuXG4gICAgICBjb21wYW55ID0gSlNPTi5zdHJpbmdpZnkoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLmNvbXBhbnkpXG4gICAgICBxcnkgPSAnd2hlcmU9e1wiY29tcGFueVwiOicrY29tcGFueSsnfSZjb3VudD0xJ1xuICAgICAgcXJ5ID0gJ3doZXJlPXtcImxpc3RzXCI6JytjdXJyZW50TGlzdCsnfSZjb3VudD0xJm9yZGVyPS1jcmVhdGVkQXQnXG4gICAgfSBlbHNlIGlmIChuZXdMaXN0TmFtZSA9PSAnQXJjaGl2ZWQnKSB7XG4gICAgICBxcnkgPSAnd2hlcmU9e1wiY29tcGFueVwiOicrY29tcGFueSsnLFwiYXJjaGl2ZWRcIjpmYWxzZX0mY291bnQ9MSZvcmRlcj0tY3JlYXRlZEF0J1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhxcnkpXG5cbiAgICBjbGFzc05hbWUgPSB0aGlzLnN0YXRlLmNsYXNzTmFtZVxuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvJytjbGFzc05hbWUsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgaGVhZGVyczogcGFyc2VfaGVhZGVycyxcbiAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgYWpheFN0YXJ0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3N0YXJ0ZWQgbGlzdCcpXG4gICAgICB9LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgdGhpc3NzLnNldFN0YXRlKHtwcm9zcGVjdHM6IHJlcy5yZXN1bHRzfSlcbiAgICAgICAgdGhpc3NzLnNldFN0YXRlKHtjb3VudDogcmVzLmNvdW50fSlcbiAgICAgICAgLy90aGlzc3Muc2V0U3RhdGUoe3RvdGFsQ291bnQ6IHJlcy5jb3VudH0pXG4gICAgICAgIHRoaXNzcy5zZXRTdGF0ZSh7cGFnZXM6IE1hdGguY2VpbChyZXMuY291bnQvdGhpc3NzLnByb3BzLnByb3NwZWN0c1BlclBhZ2UpfSlcbiAgICAgICAgdGhpc3NzLnNldFN0YXRlKHtsb2FkaW5nOiBmYWxzZX0pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ2Vycm9yJylcbiAgICAgICAgLy9jb25zb2xlLmxvZyhyZXMpXG4gICAgICB9XG4gICAgfSlcbiAgfSxcblxuICBjaGVja2JveEFjdGlvbjogZnVuY3Rpb24oY2hlY2tlZFN0YXRlLCBvYmpJZCkge1xuICAgIC8qIFN0b3JpbmcgQ2hlY2tlZCBQcm9zcGVjdHMgSW4gTG9jYWxTdG9yYWdlIFRvIE1ha2UgaXQgRWFzaWVyIFRvXG4gICAgICogQ29weSBhbmQgTW92ZSBQcm9zcGVjdHMgXG4gICAgICpcbiAgICAgKiBNb3ZlIFRvIFVzZXJfUHJvc3BlY3RzP1xuICAgICAqL1xuICAgIFxuICAgIHNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMpXG4gICAgLy9jb25zb2xlLmxvZyhjaGVja2VkU3RhdGUpXG4gICAgaWYoY2hlY2tlZFN0YXRlKVxuICAgICAgc2VsZWN0ZWRQcm9zcGVjdHMucHVzaChvYmpJZClcbiAgICBlbHNlXG4gICAgICBzZWxlY3RlZFByb3NwZWN0cyA9IF8ucmVqZWN0KHNlbGVjdGVkUHJvc3BlY3RzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oaWQpe3JldHVybiBpZCA9PSBvYmpJZH0pXG5cbiAgICBjb25zb2xlLmxvZyhzZWxlY3RlZFByb3NwZWN0cylcbiAgICBsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnN0cmluZ2lmeShzZWxlY3RlZFByb3NwZWN0cylcbiAgICB0aGlzLnNldFN0YXRlKHtzZWxlY3RlZFByb3NwZWN0czogc2VsZWN0ZWRQcm9zcGVjdHN9KVxuICB9LFxuXG4gIG1hc3RlckNoZWNrYm94Q2hhbmdlZDogZnVuY3Rpb24obWFzdGVyQ2hlY2tib3hWYWx1ZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe21hc3RlckNoZWNrYm94Q2hlY2tlZDogbWFzdGVyQ2hlY2tib3hWYWx1ZX0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcblxuXG4gICAgdGhpcy5zdGFydEtleWJvYXJkU2hvcnRjdXRzKClcbiAgICAkKCdib2R5JykuY3NzKHtvdmVyZmxvdzonYXV0byd9KVxuXG4gICAgcHJvc3BlY3RzID0gW11cbiAgICBmb3IoaT0wO2k8IHRoaXMuc3RhdGUucHJvc3BlY3RzLmxlbmd0aDtpKyspIHtcbiAgICAgIHVybCA9IHRoaXMuc3RhdGUucHJvc3BlY3RzW2ldLnVybFxuICAgICAgcHJvc3BlY3QgPSB0aGlzLnN0YXRlLnByb3NwZWN0c1tpXVxuXG4gICAgICBpZih1cmwgIT0gXCJubyBsaW5rZWRpbiB3ZWJzaXRlXCIgJiYgdHlwZW9mKHVybCkgIT0gXCJ1bmRlZmluZWRcIiAmJiB1cmwgIT0gXCJcIil7XG4gICAgICAgIHVybCA9IHVybC5yZXBsYWNlKCdodHRwOi8vJywnJylcbiAgICAgICAgdGhlX2xpbmsgPSBSZWFjdC5ET00uYSh7aHJlZjogJ2h0dHA6Ly8nK3VybH0sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZ2xvYmVcIn0pKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhlX2xpbmsgPSBcIlwiXG4gICAgICB9XG5cbiAgICAgIHByb2ZpbGUgPSB0aGlzLnN0YXRlLnByb3NwZWN0c1tpXS5wcm9maWxlLnJlcGxhY2UoJ2h0dHA6Ly8nLCcnKVxuICAgICAgcHJvZmlsZSA9IHRoaXMuc3RhdGUucHJvc3BlY3RzW2ldLnByb2ZpbGUucmVwbGFjZSgnaHR0cHM6Ly8nLCcnKVxuICAgICAgcHJvZmlsZSA9ICh0eXBlb2YocHJvZmlsZSkgIT0gXCJ1bmRlZmluZWRcIikgPyBwcm9maWxlIDogXCJcIlxuICAgICAgbGkgPSBSZWFjdC5ET00uYSh7aHJlZjogcHJvZmlsZSwgY2xhc3NOYW1lOiBcImxpbmtlZGluX2xpbmtcIn0sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbGlua2VkaW4tc3F1YXJlXCJ9KSlcblxuICAgICAga2V5Ym9hcmRTZWxlY3RlZCA9IChpID09IHRoaXMuc3RhdGUua2V5Ym9hcmRBY3RpdmVQcm9zcGVjdClcblxuICAgICAgc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cylcbiAgICAgIGFscmVhZHlDaGVja2VkPWZhbHNlXG4gICAgICBmb3IoaWk9MDtpaTwgc2VsZWN0ZWRQcm9zcGVjdHMubGVuZ3RoO2lpKyspXG4gICAgICAgIGlmKHByb3NwZWN0Lm9iamVjdElkID09IHNlbGVjdGVkUHJvc3BlY3RzW2lpXSlcbiAgICAgICAgICBhbHJlYWR5Q2hlY2tlZCA9IHRydWVcblxuICAgICAgcHJvc3BlY3RzLnB1c2goXG4gICAgICAgIERhdGFSb3coe2RlbGV0ZVByb3NwZWN0OiB0aGlzLmRlbGV0ZVByb3NwZWN0LCBcbiAgICAgICAgICAgICAgICAgcHJvc3BlY3Q6IHRoaXMuc3RhdGUucHJvc3BlY3RzW2ldLCBcbiAgICAgICAgICAgICAgICAgbWFzdGVyQ2hlY2tib3hDaGVja2VkOiB0aGlzLnN0YXRlLm1hc3RlckNoZWNrYm94Q2hlY2tlZCwgXG4gICAgICAgICAgICAgICAgIGtleTogdGhpcy5nZW5lcmF0ZV9pZCgpLCBcbiAgICAgICAgICAgICAgICAgbGluazogdGhlX2xpbmssIFxuICAgICAgICAgICAgICAgICBrZXlib2FyZFNlbGVjdGVkOiBrZXlib2FyZFNlbGVjdGVkLCBcbiAgICAgICAgICAgICAgICAgY2hlY2tib3hBY3Rpb246IHRoaXMuY2hlY2tib3hBY3Rpb24sIFxuICAgICAgICAgICAgICAgICBhbHJlYWR5Q2hlY2tlZDogYWxyZWFkeUNoZWNrZWQsIFxuICAgICAgICAgICAgICAgICBsaTogbGl9KSlcbiAgICB9XG5cbiAgICBsaXN0VHlwZSA9ICh0aGlzLnN0YXRlLmN1cnJlbnRMaXN0ID09IFwiQWxsXCIpID8ge2Rpc3BsYXk6J25vbmUnfSA6IHtmbG9hdDonbGVmdCd9XG4gICAgbGlzdE5hbWVTdHlsZSA9ICh0aGlzLnN0YXRlLmN1cnJlbnRMaXN0ID09IFwiQWxsXCIpID8ge2Rpc3BsYXk6J25vbmUnfSA6IHtmbG9hdDonbGVmdCcsZGlzcGxheTonaW5saW5lLWJsb2NrJywgZm9udFdlaWdodDogMjAwLCBtYXJnaW5Ub3A6IDEsIHBhZGRpbmdSaWdodDogMTAsIG1hcmdpbkxlZnQ6IC0xMH1cbiAgICBsaXN0QnRuID0gKHRoaXMuc3RhdGUuY3VycmVudExpc3QgPT0gXCJBbGxcIikgPyB7ZGlzcGxheTonbm9uZSd9IDoge2Zsb2F0OidsZWZ0JyxtYXJnaW5MZWZ0OjV9XG4gICAgbGlzdE9wdGlvbnMgPSAodGhpcy5zdGF0ZS5jdXJyZW50TGlzdCA9PSBcIkFsbFwiKSA/IHtkaXNwbGF5Oidub25lJ30gOiB7ZmxvYXQ6J3JpZ2h0J31cbiAgICBjb3B5RHJvcGRvd25TdHlsZSA9ICh0aGlzLnN0YXRlLmN1cnJlbnRMaXN0ID09IFwiQWxsXCIpID8ge3dpZHRoOjExNCwgcmlnaHQ6NH0gOiB7d2lkdGg6MTE0LCByaWdodDozNn1cbiAgICBjdXJyZW50TGlzdCA9IHRoaXMuc3RhdGUuY3VycmVudExpc3RcbiAgICByZXR1cm4gKFxuICAgICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lclwiLCBzdHlsZToge3dpZHRoOicxMDAlJyxwYWRkaW5nOicwJywgYmFja2dyb3VuZDogJ2xpbmVhci1ncmFkaWVudCgjZGFlOGZmLCNkYWU4ZmYpJywgYmFja2dyb3VuZEltYWdlOiAncmFkaWFsLWdyYWRpZW50KGNpcmNsZSBhdCBjZW50ZXIgY2VudGVyLCNmZmYsI2RmZjFmZCA5MDBweCknfX0sIFxuICAgICAgICBTaWRlTWVudVByb3NwZWN0cyh7Y3VycmVudExpc3Q6IHRoaXMuc3RhdGUuY3VycmVudExpc3QsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IHRoaXMuc3RhdGUuY291bnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxDb3VudDogdGhpcy5zdGF0ZS50b3RhbENvdW50LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZUxpc3Q6IHRoaXMuY2hhbmdlTGlzdCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0Q2xhc3NOYW1lOiB0aGlzLnN0YXRlLmxpc3RDbGFzc05hbWUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlTGlzdDogdGhpcy5jcmVhdGVMaXN0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RzOiB0aGlzLnN0YXRlLmxpc3RzfSksIFxuXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtMTBcIiwgc3R5bGU6IHtwYWRkaW5nOicwJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7aWQ6IFwicHJvc3BlY3REZXRhaWxCdXR0b25zXCJ9LCBcbiAgICAgICAgICAgICAgICBMaXN0RGV0YWlsQnV0dG9ucyh7XG4gICAgICAgICAgICAgICAgICByZW5hbWVMaXN0OiB0aGlzLnJlbmFtZUxpc3QsIFxuICAgICAgICAgICAgICAgICAgZGVsZXRlTGlzdDogdGhpcy5kZWxldGVMaXN0LCBcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRMaXN0TmFtZTogdGhpcy5zdGF0ZS5jdXJyZW50TGlzdCwgXG4gICAgICAgICAgICAgICAgICBjdXJyZW50TGlzdDogdGhpcy5zdGF0ZS5jdXJyZW50TGlzdE9iamVjdElkfSksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRyb3Bkb3duXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4teHMgbGlzdC1vcHRpb25zXCIsIFxuICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiXCIsIFxuICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5Oidub25lJ31cbiAgICAgICAgICAgICAgICAgICAgIH0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWJhcnNcIn0pXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSwgXG5cbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZHJvcGRvd25cIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoeydkYXRhLXRvZ2dsZSc6IFwiZHJvcGRvd25cIiwgXG4gICAgICAgICAgICAgICAgICAgICBpZDogXCJjb3B5VG9MaXN0XCIsIFxuICAgICAgICAgICAgICAgICAgICAgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJkcm9wLXRhcmdldCBidG4gYnRuLXByaW1hcnkgYnRuLXhzIGxpc3Qtb3B0aW9uc1wifSwgXG4gICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNvcHlcIn0pLCBcbiAgICAgICAgICAgICAgICAgICAgICAgXCLCoCBDb3B5IFRvIExpc3QgwqBcIiwgIFxuICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jYXJldC1kb3duXCJ9KVxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIEN1cnJlbnRMaXN0c1R3byh7bGlzdHM6IHRoaXMuc3RhdGUubGlzdHMsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weURyb3Bkb3duU3R5bGU6IGNvcHlEcm9wZG93blN0eWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RBY3Rpb246IHRoaXMuY29weVNlbGVjdGVkUHJvc3BlY3RzfSlcbiAgICAgICAgICAgICAgICApLCBcbiAgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRyb3Bkb3duXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHsnZGF0YS10b2dnbGUnOiBcImRyb3Bkb3duXCIsIFxuICAgICAgICAgICAgICAgICAgICAgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgIGlkOiBcIm1vdmVUb0xpc3RcIiwgXG4gICAgICAgICAgICAgICAgICAgICBzdHlsZTogbGlzdE9wdGlvbnMsIFxuICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4teHMgbGlzdC1vcHRpb25zXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc2hhcmVcIn0pLCBcbiAgICAgICAgICAgICAgICAgICAgIFwiwqAgTW92ZSBUbyBMaXN0IMKgXCIsICBcbiAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2FyZXQtZG93blwifSlcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBDdXJyZW50TGlzdHMoe2xpc3RzOiB0aGlzLnN0YXRlLmxpc3RzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RBY3Rpb246IHRoaXMubW92ZVNlbGVjdGVkUHJvc3BlY3RzfSlcbiAgICAgICAgICAgICAgICApLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtvbkNsaWNrOiB0aGlzLmRvd25sb2FkRmlsZSwgXG4gICAgICAgICAgICAgICAgICAgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICBpZDogXCJkb3dubG9hZFByb3NwZWN0c1wiLCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZHJvcC10YXJnZXQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBsaXN0LW9wdGlvbnNcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1kb3dubG9hZFwifSksIFwiIMKgIERvd25sb2FkIENTViDCoFwiIFxuICAgICAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe29uQ2xpY2s6IHRoaXMubGF1bmNoUHJvc3BlY3RMaXN0RnJvbUNvbXBhbnlMaXN0TW9kYWwsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiBsaXN0T3B0aW9ucywgXG4gICAgICAgICAgICAgICAgICAgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICBpZDogXCJkb3dubG9hZFByb3NwZWN0c1wiLCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZHJvcC10YXJnZXQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBsaXN0LW9wdGlvbnNcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG91ZC1kb3dubG9hZFwifSksIFwiIMKgIEZpbmQgUHJvc3BlY3RzICDCoFwiIFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7aWQ6IFwiYXV0b3Njcm9sbFwiLCBzdHlsZToge2hlaWdodDonNDAwcHgnLG92ZXJmbG93OidhdXRvJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50YWJsZSh7Y2xhc3NOYW1lOiBcInByb3NwZWN0cy10YWJsZSB0YWJsZSB0YWJsZS1zdHJpcGVkXCIsIHN0eWxlOiB7bWFyZ2luQm90dG9tOicwcHgnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGhlYWQoe3N0eWxlOiB7YmFja2dyb3VuZENvbG9yOid3aGl0ZSd9fSwgXG4gICAgICAgICAgICAgICAgQ29tcGFueVByb3NwZWN0SGVhZGVyKHttYXN0ZXJDaGVja2JveENoYW5nZWQ6IHRoaXMubWFzdGVyQ2hlY2tib3hDaGFuZ2VkfSlcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50Ym9keShudWxsLCBcbiAgICAgICAgICAgICAgICBwcm9zcGVjdHNcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAodGhpcy5zdGF0ZS5sb2FkaW5nKSA/IExvYWRpbmdTcGlubmVyKG51bGwpIDogXCJcIlxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKSwgXG5cbiAgICAgIFBhbmVsRm9vdGluZyh7Y3VycmVudFBhZ2U6IHRoaXMuc3RhdGUuY3VycmVudFBhZ2UsIFxuICAgICAgICAgICAgICAgICAgICBjb3VudDogdGhpcy5zdGF0ZS5jb3VudCwgXG4gICAgICAgICAgICAgICAgICAgIHBhZ2luYXRlOiB0aGlzLnBhZ2luYXRlLCBcbiAgICAgICAgICAgICAgICAgICAgcHJvc3BlY3RzUGVyUGFnZTogdGhpcy5zdGF0ZS5wcm9zcGVjdHNQZXJQYWdlLCBcbiAgICAgICAgICAgICAgICAgICAgcGFnZXM6IHRoaXMuc3RhdGUucGFnZXN9KSwgXG4gICAgICBNZXNzZW5nZXIobnVsbCksIFxuICAgICAgQ3JlYXRlUHJvc3BlY3RMaXN0RnJvbUNvbXBhbnlMaXN0TW9kYWwoe2N1cnJlbnRMaXN0OiB0aGlzLnN0YXRlLmN1cnJlbnRMaXN0LCBjdXJyZW50TGlzdE9iamVjdElkOiB0aGlzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWR9KVxuICAgIClcbiAgICApO1xuICB9LFxuXG4gIHBhZ2luYXRlOiBmdW5jdGlvbihuZXdQcm9zcGVjdHMsIG5ld1BhZ2UpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHByb3NwZWN0czogbmV3UHJvc3BlY3RzLFxuICAgICAgY3VycmVudFBhZ2U6IG5ld1BhZ2UsXG4gICAgICBrZXlib2FyZEFjdGl2ZVByb3NwZWN0OiAwXG4gICAgfSlcbiAgICB0aGlzLnN0YXJ0S2V5Ym9hcmRTaG9ydGN1dHMoKVxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvc2Nyb2xsJykuc2Nyb2xsVG9wID0gMFxuICB9LFxuXG4gIGxhdW5jaFByb3NwZWN0TGlzdEZyb21Db21wYW55TGlzdE1vZGFsOiBmdW5jdGlvbigpIHtcbiAgICBcbiAgICAkKCcjY3JlYXRlUHJvc3BlY3RMaXN0RnJvbUNvbXBhbnlMaXN0TW9kYWwnKS5tb2RhbCgpXG4gIH0sXG5cbiAgZG93bmxvYWRGaWxlOiBmdW5jdGlvbigpIHtcbiAgICBwYXJzZV9oZWFkZXJzID0ge1xuICAgICAgJ1gtUGFyc2UtQXBwbGljYXRpb24tSWQnICA6ICdOODVRT2t0ZUVFUWt1WlZKS0F2dDhNVmVzMHNqRzZxTnBFR3FRRlZKJywgXG4gICAgICAnWC1QYXJzZS1SRVNULUFQSS1LZXknICAgIDogJ1ZONkV3VnlCWndPMXVwaHNCUHNhdTh0N0pRUnAwMFVNM0tZc2lpUWInLFxuICAgIH1cblxuICAgIC8vIEdldCBMaXN0IENvdW50XG4gICAgbGlzdCA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICdfX3R5cGUnICAgOiAgJ1BvaW50ZXInLFxuICAgICAgJ2NsYXNzTmFtZSc6ICB0aGlzLnN0YXRlLmxpc3RDbGFzc05hbWUsXG4gICAgICAnb2JqZWN0SWQnIDogIHRoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZFxuICAgIH0pXG4gICAgY29uc29sZS5sb2cobGlzdClcbiAgICAvLyBBZGQgU3VwcG9ydCBGb3IgTW9yZSB0aGFuIDEwMDBcbiAgICAvLyBudW1fb2ZfcmVxdWVzdHNcbiAgICAvL3RoaXMucHJvcHMucGFnaW5hdGUocmVzLnJlc3VsdHMsIHRoaXMucHJvcHMuY3VycmVudFBhZ2UgKyAxKVxuICAgIGxvY2FsU3RvcmFnZS5kb3dubG9hZF90b3RhbCA9IE1hdGguY2VpbCh0aGlzLnN0YXRlLmNvdW50LzEwMDApXG4gICAgbG9jYWxTdG9yYWdlLmRvd25sb2FkcyAgICAgID0gMFxuXG4gICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50TGlzdCA9PSBcIkFsbFwiKVxuICAgICAgcXJ5ID0gJ3doZXJlPXtcImNvbXBhbnlcIjonK2NvbXBhbnkrJ30mY291bnQ9MSdcbiAgICBlbHNlXG4gICAgICBxcnkgPSAnd2hlcmU9e1wibGlzdHNcIjonK2xpc3QrJ30mY291bnQ9MSdcblxuICAgIGNsYXNzTmFtZSA9IHRoaXMuc3RhdGUuY2xhc3NOYW1lXG5cbiAgICBmb3IoaT0wO2k8IE1hdGguY2VpbCh0aGlzLnN0YXRlLmNvdW50LzEwMDApOyBpKyspe1xuICAgICAgJC5hamF4KHtcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK2NsYXNzTmFtZSsnP2xpbWl0PTEwMDAmc2tpcD0nK2ksXG4gICAgICAgIHR5cGU6J0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHBhcnNlX2hlYWRlcnMsXG4gICAgICAgIGRvd25sb2FkRmlsZTogJ2Rvd25sb2FkXycraSxcbiAgICAgICAgZGF0YTogcXJ5LFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICAgIC8vIENsZWFuIFJlc3VsdHNcbiAgICAgICAgICAvLyBSZW1vdmUgQ2VydGFpbiBQYXJzZSBDb2x1bW5zIC0gY3JlYXRlZF9hdCwgdXBkYXRlZF9hdCwgb2JqZWN0SWRcbiAgICAgICAgICAvLyBSZW5hbWUgY3JlYXRlZEF0IGFzIGRhdGUgcHJvc3BlY3RlZFxuICAgICAgICAgIGZvcihpPTA7aTwgcmVzLnJlc3VsdHMubGVuZ3RoO2krKykge1xuICAgICAgICAgICAgZGVsZXRlIHJlcy5yZXN1bHRzW2ldLmNvbXBhbnlcbiAgICAgICAgICAgIGRlbGV0ZSByZXMucmVzdWx0c1tpXS5wb3NcbiAgICAgICAgICAgIGRlbGV0ZSByZXMucmVzdWx0c1tpXS51c2VyXG4gICAgICAgICAgICBkZWxldGUgcmVzLnJlc3VsdHNbaV0ub2JqZWN0SWRcbiAgICAgICAgICAgIGRlbGV0ZSByZXMucmVzdWx0c1tpXS5jcmVhdGVkQXRcbiAgICAgICAgICAgIGRlbGV0ZSByZXMucmVzdWx0c1tpXS51cGRhdGVkQXRcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBBZGQgUmVzdWx0cyBUbyBMb2NhbFN0b3JhZ2VcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UuZG93bmxvYWRzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZG93bmxvYWRzKSArIDEgXG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5kb3dubG9hZEZpbGUsIEpTT04uc3RyaW5naWZ5KHJlcy5yZXN1bHRzKSlcblxuICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiBhbGwgYWpheCByZXFzIGluIGZvciBsb29wIGFyZSBjb21wbGV0ZVxuICAgICAgICAgIGlmKGxvY2FsU3RvcmFnZS5kb3dubG9hZHMgPT0gbG9jYWxTdG9yYWdlLmRvd25sb2FkX3RvdGFsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbWF0Y2hlZCcpXG4gICAgICAgICAgICAvLyBNZXJnZSBhbGwgbG9jYWxTdG9yYWdlIHJlc3VsdHNcbiAgICAgICAgICAgIHByb3NwZWN0cyA9IFtdXG4gICAgICAgICAgICBmb3IoaWk9MDtpaSA8IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmRvd25sb2FkX3RvdGFsKTsgaWkrKyl7XG4gICAgICAgICAgICAgIHByb3NwZWN0cyA9IHByb3NwZWN0cy5jb25jYXQoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZG93bmxvYWRfJytpaSkpKVxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9zcGVjdHMpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb3NwZWN0cylcbiAgICAgICAgICAgIC8vIE91dHB1dCBhcyBDU1ZcbiAgICAgICAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW1BhcGEudW5wYXJzZShwcm9zcGVjdHMpXSwge3R5cGU6IFwidGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04XCJ9KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGJsb2IpXG4gICAgICAgICAgICBzYXZlQXMoYmxvYiwgXCJwcm9zcGVjdHMuY3N2XCIpO1xuICAgICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIGVycm9yOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgY29tcGFueSA9IEpTT04uc3RyaW5naWZ5KEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55KVxuICAgIFxuXG4gIH0sXG5cbiAgcmVtb3ZlU2VsZWN0ZWRQcm9zcGVjdHM6IGZ1bmN0aW9uKCkge1xuICAgIC8vIElmIExpc3QgVHlwZSBpcyBBbGwgQXJjaGl2ZSB0aGUgcHJvc3BlY3RcbiAgICBwYXJzZUhlYWRlcnMgPSB7XG4gICAgICAnWC1QYXJzZS1BcHBsaWNhdGlvbi1JZCcgIDogJ044NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkonLCBcbiAgICAgICdYLVBhcnNlLVJFU1QtQVBJLUtleScgICAgOiAnVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYicsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiIDogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9XG5cbiAgICBzZWxlY3RlZFByb3NwZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzKVxuICAgIGJhdGNoRGF0YSA9IFtdXG5cbiAgICBmb3IoaT0wO2k8IHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aDtpKyspe1xuICAgICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50TGlzdCAhPSAnQWxsJyl7XG4gICAgICAgIHRtcCA9IHtcbiAgICAgICAgICBtZXRob2Q6J1BVVCcsXG4gICAgICAgICAgcGF0aDonLzEvY2xhc3Nlcy8nK3RoaXMuc3RhdGUuY2xhc3NOYW1lKycvJytzZWxlY3RlZFByb3NwZWN0c1tpXSxcbiAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICBsaXN0czoge1xuICAgICAgICAgICAgICAnX19vcCcgICAgOiAnUmVtb3ZlJyxcbiAgICAgICAgICAgICAgXCJvYmplY3RzXCIgOiBbeyBcbiAgICAgICAgICAgICAgICAgICdfX3R5cGUnOidQb2ludGVyJyxcbiAgICAgICAgICAgICAgICAgICdjbGFzc05hbWUnOnRoaXMuc3RhdGUubGlzdENsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAgICdvYmplY3RJZCc6dGhpcy5zdGF0ZS5jdXJyZW50TGlzdE9iamVjdElkXG4gICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9ZWxzZXtcbiAgICAgICAgdG1wID0ge1xuICAgICAgICAgIG1ldGhvZDonUFVUJyxcbiAgICAgICAgICBwYXRoOicvMS9jbGFzc2VzLycrdGhpcy5zdGF0ZS5jbGFzc05hbWUrJy8nK3NlbGVjdGVkUHJvc3BlY3RzW2ldLFxuICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgIGFyY2hpdmVkOmZhbHNlLFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYmF0Y2hEYXRhLnB1c2godG1wKVxuICAgIH1cblxuICAgIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9iYXRjaCcsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGhlYWRlcnM6cGFyc2VIZWFkZXJzLFxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe3JlcXVlc3RzOiBiYXRjaERhdGF9KSxcbiAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgbGlzdHMgPSB0aGlzcy5zdGF0ZS5saXN0c1xuXG4gICAgICAgIGZvcihpPTA7aTwgbGlzdHMubGVuZ3RoOyBpKyspIHsgXG4gICAgICAgICAgLy8gU3VidHJhY3QgRnJvbSBPbGQgTGlzdCAtIE5vdCBXb3JraW5nIEZvciBBcmNoaXZlXG4gICAgICAgICAgaWYobGlzdHNbaV0ub2JqZWN0SWQgPT0gdGhpc3Muc3RhdGUuY3VycmVudExpc3RPYmplY3RJZClcbiAgICAgICAgICAgIGxpc3RzW2ldLmNvdW50ID0gcGFyc2VJbnQobGlzdHNbaV0uY291bnQpIC0gcGFyc2VJbnQoc2VsZWN0ZWRQcm9zcGVjdHMubGVuZ3RoKVxuICAgICAgICB9XG4gICAgICAgIC8vIFVwZGF0ZSBsb2NhbCBsaXN0IGNvdW50XG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtsaXN0czogbGlzdHN9KVxuXG4gICAgICAgIC8vIHJlbW92ZSBmcm9tIGN1cnJlbnQgbGlzdCB1aVxuICAgICAgICBzZWxlY3RlZFByb3NwZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzKVxuICAgICAgICBjb25zb2xlLmxvZygncmVtb3ZlIHNlbGVjdGVkIHByb3NwZWN0cycpXG4gICAgICAgIGNvbnNvbGUubG9nKHNlbGVjdGVkUHJvc3BlY3RzKVxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzcy5zdGF0ZS5wcm9zcGVjdHMpXG4gICAgICAgIHZhciBmaWx0ZXJlZCA9IF8uZmlsdGVyKHRoaXNzLnN0YXRlLnByb3NwZWN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgIGZvcihpPTA7aTwgc2VsZWN0ZWRQcm9zcGVjdHMubGVuZ3RoO2krKykgXG4gICAgICAgICAgICBpZihpdGVtLm9iamVjdElkID09IHNlbGVjdGVkUHJvc3BlY3RzW2ldKVxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coZmlsdGVyZWQpXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtwcm9zcGVjdHM6IGZpbHRlcmVkfSlcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5zdHJpbmdpZnkoW10pXG5cbiAgICAgICAgLy8gYWRkIGFsZXJ0IHRvIGluZm9ybSB1c2VyXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgbW92ZVNlbGVjdGVkUHJvc3BlY3RzOiBmdW5jdGlvbihsaXN0T2JqZWN0SWQpIHtcbiAgICBwYXJzZUhlYWRlcnMgPSB7XG4gICAgICAnWC1QYXJzZS1BcHBsaWNhdGlvbi1JZCcgIDogJ044NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkonLCBcbiAgICAgICdYLVBhcnNlLVJFU1QtQVBJLUtleScgICAgOiAnVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYicsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiIDogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9XG5cbiAgICAvLyBnZXQgdGhlIHNlbGVjdGVkIG9iamVjdElkIGZyb20gc2VsZWN0ZWRQcm9zcGVjdHMgc3RhdGVcbiAgICBzZWxlY3RlZFByb3NwZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzKVxuICAgIGJhdGNoRGF0YSA9IFtdXG5cblxuICAgIC8vIEJhdGNoIFVwZGF0ZSBQYXJzZVxuICAgIC8vIC0gUmVtb3ZlIEFsbCBTZWxlY3RlZCBQcm9zcGVjdHMgRnJvbSBDdXJyZW50IExpc3RcbiAgICBmb3IoaT0wO2k8IHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aDtpKyspe1xuICAgICAgdG1wID0ge1xuICAgICAgICBtZXRob2Q6J1BVVCcsXG4gICAgICAgIHBhdGg6Jy8xL2NsYXNzZXMvJyt0aGlzLnN0YXRlLmNsYXNzTmFtZSsnLycrc2VsZWN0ZWRQcm9zcGVjdHNbaV0sXG4gICAgICAgIGJvZHk6IHtcbiAgICAgICAgICBsaXN0czoge1xuICAgICAgICAgICAgJ19fb3AnICAgIDogJ1JlbW92ZScsXG4gICAgICAgICAgICBcIm9iamVjdHNcIiA6IFt7IFxuICAgICAgICAgICAgICAgICdfX3R5cGUnOidQb2ludGVyJyxcbiAgICAgICAgICAgICAgICAnY2xhc3NOYW1lJzp0aGlzLnN0YXRlLmxpc3RDbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgJ29iamVjdElkJzp0aGlzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWRcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBiYXRjaERhdGEucHVzaCh0bXApXG4gICAgfVxuICAgIFxuICAgIC8vIC0gQWRkIE90aGVyIExpc3QgXG4gICAgZm9yKGk9MDtpPCBzZWxlY3RlZFByb3NwZWN0cy5sZW5ndGg7aSsrKXtcbiAgICAgIHRtcCA9IHtcbiAgICAgICAgbWV0aG9kOidQVVQnLFxuICAgICAgICBwYXRoOicvMS9jbGFzc2VzLycrdGhpcy5zdGF0ZS5jbGFzc05hbWUrJy8nK3NlbGVjdGVkUHJvc3BlY3RzW2ldLFxuICAgICAgICBib2R5OiB7XG4gICAgICAgICAgbGlzdHM6IHtcbiAgICAgICAgICAgICdfX29wJyAgICA6ICdBZGRVbmlxdWUnLFxuICAgICAgICAgICAgXCJvYmplY3RzXCIgOiBbeyBcbiAgICAgICAgICAgICAgICAnX190eXBlJzonUG9pbnRlcicsXG4gICAgICAgICAgICAgICAgJ2NsYXNzTmFtZSc6dGhpcy5zdGF0ZS5saXN0Q2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICdvYmplY3RJZCc6bGlzdE9iamVjdElkXG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYmF0Y2hEYXRhLnB1c2godG1wKVxuICAgIH1cblxuICAgIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9iYXRjaCcsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGhlYWRlcnM6cGFyc2VIZWFkZXJzLFxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe3JlcXVlc3RzOiBiYXRjaERhdGF9KSxcbiAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgbGlzdHMgPSB0aGlzcy5zdGF0ZS5saXN0c1xuXG4gICAgICAgIGZvcihpPTA7aTwgbGlzdHMubGVuZ3RoOyBpKyspIHsgXG4gICAgICAgICAgLy8gQWRkIFRvIE5ldyBMaXN0XG4gICAgICAgICAgaWYobGlzdHNbaV0ub2JqZWN0SWQgPT0gbGlzdE9iamVjdElkKVxuICAgICAgICAgICAgbGlzdHNbaV0uY291bnQgPSBwYXJzZUludChsaXN0c1tpXS5jb3VudCkgKyBwYXJzZUludChzZWxlY3RlZFByb3NwZWN0cy5sZW5ndGgpXG4gICAgICAgICAgLy8gU3VidHJhY3QgRnJvbSBPbGQgTGlzdFxuICAgICAgICAgIGlmKGxpc3RzW2ldLm9iamVjdElkID09IHRoaXNzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWQpXG4gICAgICAgICAgICBsaXN0c1tpXS5jb3VudCA9IHBhcnNlSW50KGxpc3RzW2ldLmNvdW50KSAtIHBhcnNlSW50KHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aClcbiAgICAgICAgfVxuICAgICAgICAvLyBVcGRhdGUgbG9jYWwgbGlzdCBjb3VudFxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7bGlzdHM6IGxpc3RzfSlcblxuICAgICAgICAvLyByZW1vdmUgZnJvbSBjdXJyZW50IGxpc3QgdWlcbiAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGVkUHJvc3BlY3RzJylcbiAgICAgICAgY29uc29sZS5sb2codGhpc3Muc3RhdGUucHJvc3BlY3RzKVxuICAgICAgICB2YXIgZmlsdGVyZWQgPSBfLmZpbHRlcih0aGlzcy5zdGF0ZS5wcm9zcGVjdHMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICBpc19zZWxlY3RlZCA9IHRydWVcbiAgICAgICAgICBmb3IoaT0wO2k8IHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aDtpKyspIFxuICAgICAgICAgICAgaWYoaXRlbS5vYmplY3RJZCA9PSBzZWxlY3RlZFByb3NwZWN0c1tpXSlcbiAgICAgICAgICAgICAgaXNfc2VsZWN0ZWQgPSBmYWxzZVxuICAgICAgICAgIHJldHVybiBpc19zZWxlY3RlZFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coZmlsdGVyZWQpXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtwcm9zcGVjdHM6IGZpbHRlcmVkfSlcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5zdHJpbmdpZnkoW10pXG5cbiAgICAgICAgLy8gYWRkIGFsZXJ0IHRvIGluZm9ybSB1c2VyXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgY29weVNlbGVjdGVkUHJvc3BlY3RzOiBmdW5jdGlvbihsaXN0T2JqZWN0SWQpIHtcbiAgICBjb25zb2xlLmxvZyhsaXN0T2JqZWN0SWQpXG4gICAgXG4gICAgLy8gbWFrZSBiYXRjaCBhamF4IHJlcXVlc3QgdG8gcGFyc2VcbiAgICBwYXJzZUhlYWRlcnMgPSB7XG4gICAgICAnWC1QYXJzZS1BcHBsaWNhdGlvbi1JZCcgIDogJ044NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkonLCBcbiAgICAgICdYLVBhcnNlLVJFU1QtQVBJLUtleScgICAgOiAnVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYicsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiIDogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9XG5cbiAgICAvLyBBZGQgTG9hZGluZyBTaWduIFRvIExpc3RcblxuICAgIHNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMpXG4gICAgYmF0Y2hEYXRhID0gW11cbiAgICBmb3IoaT0wO2k8IHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aDtpKyspe1xuICAgICAgdG1wID0ge1xuICAgICAgICBtZXRob2Q6J1BVVCcsXG4gICAgICAgIHBhdGg6Jy8xL2NsYXNzZXMvJyt0aGlzLnN0YXRlLmNsYXNzTmFtZSsnLycrc2VsZWN0ZWRQcm9zcGVjdHNbaV0sXG4gICAgICAgIGJvZHk6IHtcbiAgICAgICAgICBsaXN0czoge1xuICAgICAgICAgICAgJ19fb3AnICAgIDogJ0FkZFVuaXF1ZScsXG4gICAgICAgICAgICBcIm9iamVjdHNcIiA6IFt7IFxuICAgICAgICAgICAgICAgICdfX3R5cGUnOidQb2ludGVyJyxcbiAgICAgICAgICAgICAgICAnY2xhc3NOYW1lJzp0aGlzLnN0YXRlLmxpc3RDbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgJ29iamVjdElkJzpsaXN0T2JqZWN0SWRcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBiYXRjaERhdGEucHVzaCh0bXApXG4gICAgfVxuXG4gICAgdGhpc3MgPSB0aGlzO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2JhdGNoJyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczpwYXJzZUhlYWRlcnMsXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7cmVxdWVzdHM6IGJhdGNoRGF0YX0pLFxuICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICAvLyBVcGRhdGUgV2l0aCB0aGUgbnVtYmVyIG9mIHN1Y2Nlc3Nlc1xuICAgICAgICAvLyBVcGRhdGUgbG9jYWwgbGlzdCBjb3VudFxuICAgICAgICBsaXN0cyA9IHRoaXNzLnN0YXRlLmxpc3RzXG4gICAgICAgIGZvcihpPTA7aTwgbGlzdHMubGVuZ3RoOyBpKyspIHsgXG4gICAgICAgICAgaWYobGlzdHNbaV0ub2JqZWN0SWQgPT0gbGlzdE9iamVjdElkKVxuICAgICAgICAgICAgbGlzdHNbaV0uY291bnQgPSBwYXJzZUludChsaXN0c1tpXS5jb3VudCkgKyBwYXJzZUludChyZXMubGVuZ3RoKVxuICAgICAgICB9XG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtsaXN0czogbGlzdHN9KVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMgPSBcIltdXCJcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe3NlbGVjdGVkUHJvc3BlY3RzIDogW10gfSlcbiAgICAgICAgXG4gICAgICAgIC8vIGFkZCBhbGVydCB0byBpbmZvcm0gdXNlclxuICAgICAgICAvLyBVbnNlbGVjdCBhbGwgc2VsZWN0ZWRcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcblxuICB9LFxuXG4gIGhpZGVBbGVydDogZnVuY3Rpb24oKSB7XG4gICAgJCgnLmFsZXJ0JykuaGlkZSgpXG4gIH0sXG5cbiAgYWRqdXN0SGVpZ2h0OiBmdW5jdGlvbih3aGljaE9uZSkge1xuICAgIHByb3NwZWN0V2luZG93VG9wID0gJCgnI3Byb3NwZWN0RGV0YWlsQnV0dG9ucycpLnBvc2l0aW9uKCkudG9wXG4gICAgcHJvc3BlY3RXaW5kb3dUb3AgPSBwcm9zcGVjdFdpbmRvd1RvcCArICQoJyNwcm9zcGVjdERldGFpbEJ1dHRvbnMnKS5oZWlnaHQoKVxuICAgIHByb3NwZWN0V2luZG93Qm90dG9tID0gJCgnI2F1dG9zY3JvbGwnKS5wb3NpdGlvbigpLnRvcCArICQoJyNhdXRvc2Nyb2xsJykuaGVpZ2h0KClcblxuICAgIGlmKHdoaWNoT25lID09ICdqJylcbiAgICAgIGFjdGl2ZVByb3NwZWN0ID0gdGhpcy5zdGF0ZS5rZXlib2FyZEFjdGl2ZVByb3NwZWN0ICsxIFxuICAgIGVsc2VcbiAgICAgIGFjdGl2ZVByb3NwZWN0ID0gdGhpcy5zdGF0ZS5rZXlib2FyZEFjdGl2ZVByb3NwZWN0IC0xIFxuXG4gICAgYWN0aXZlVG9wID0gJCgkKCcucHJvc3BlY3RzLXRyJylbYWN0aXZlUHJvc3BlY3RdKS5wb3NpdGlvbigpLnRvcFxuICAgIHNlbGVjdGVkSGVpZ2h0ID0gJCgkKCcucHJvc3BlY3RzLXRyJylbYWN0aXZlUHJvc3BlY3RdKS5oZWlnaHQoKVxuICAgIGFjdGl2ZUJvdHRvbSA9ICQoJCgnLnByb3NwZWN0cy10cicpW2FjdGl2ZVByb3NwZWN0XSkucG9zaXRpb24oKS50b3Arc2VsZWN0ZWRIZWlnaHRcblxuICAgIGNvbnNvbGUubG9nKHByb3NwZWN0V2luZG93VG9wLCBwcm9zcGVjdFdpbmRvd0JvdHRvbSlcbiAgICBjb25zb2xlLmxvZyhhY3RpdmVUb3AsIGFjdGl2ZUJvdHRvbSlcblxuICAgIHNjcm9sbFRvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvc2Nyb2xsJykuc2Nyb2xsVG9wXG4gICAgaWYoYWN0aXZlQm90dG9tID4gcHJvc3BlY3RXaW5kb3dCb3R0b20pXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0b3Njcm9sbCcpLnNjcm9sbFRvcCA9IHNjcm9sbFRvcCArIGFjdGl2ZUJvdHRvbSAtIHByb3NwZWN0V2luZG93Qm90dG9tXG5cbiAgICBpZihhY3RpdmVUb3AgPCAwKVxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dG9zY3JvbGwnKS5zY3JvbGxUb3AgPSBzY3JvbGxUb3AgKyBhY3RpdmVUb3AgLSAzN1xuICAgIGVsc2UgaWYoYWN0aXZlVG9wID09ICQoJCgnLnByb3NwZWN0cy10cicpWzBdKS5wb3NpdGlvbigpLnRvcClcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvc2Nyb2xsJykuc2Nyb2xsVG9wID0gMFxuICAgICAgXG4gICAgLy8gR2V0IFBvc3Rpb24gb2YgVG9wXG4gICAgLy8gR2V0IFBvc2l0aW9uIG9mIEJvdHRvbSBcbiAgICAvLyBHZXQgUG9zaXRpb24gb2YgQ3VycmVudCBTZWxlY3RlZFxuICAgIC8vIEFkanVzdCBieSBzY3JvbGxpbmcgZG93biBvciB1cFxuICB9LFxuXG4gIHN0YXJ0S2V5Ym9hcmRTaG9ydGN1dHM6IGZ1bmN0aW9uKCkge1xuICAgIC8qIEtleWJvYXJkIFNob3J0Y3V0cyAqL1xuICAgIE1vdXNldHJhcC5yZXNldCgpXG4gICAgLy9Nb3VzZXRyYXAudW5iaW5kKFsnaicsJ2snLCdvJ10pXG4gICAgdGhpc3MgPSB0aGlzO1xuXG4gICAgLyogUHJvc3BlY3QgVGFibGUgU2hvcnRjdXRzICovXG4gICAgTW91c2V0cmFwLmJpbmQoJ2onLCBmdW5jdGlvbigpIHsgXG4gICAgICBrZXlib2FyZCA9IHRoaXNzLnN0YXRlLmtleWJvYXJkQWN0aXZlUHJvc3BlY3RcbiAgICAgIGlmKGtleWJvYXJkICE9IHRoaXNzLnN0YXRlLnByb3NwZWN0c1BlclBhZ2UrMSlcbiAgICAgICAgdGhpc3MuYWRqdXN0SGVpZ2h0KCdqJylcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2tleWJvYXJkQWN0aXZlUHJvc3BlY3Q6IGtleWJvYXJkKzF9KVxuICAgIH0pO1xuXG4gICAgTW91c2V0cmFwLmJpbmQoJ2snLCBmdW5jdGlvbigpIHsgXG4gICAgICBrZXlib2FyZCA9IHRoaXNzLnN0YXRlLmtleWJvYXJkQWN0aXZlUHJvc3BlY3RcbiAgICAgIGlmKGtleWJvYXJkICE9IDEpXG4gICAgICAgIHRoaXNzLmFkanVzdEhlaWdodCgnaycpXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtrZXlib2FyZEFjdGl2ZVByb3NwZWN0OiBrZXlib2FyZC0xfSlcbiAgICB9KTtcblxuXG4gICAgTW91c2V0cmFwLmJpbmQoJ28nLCBmdW5jdGlvbigpIHsgXG4gICAgICBjb25zb2xlLmxvZygnb3BlbiBjdXJyZW50IHByb3NwZWN0JylcbiAgICAgIGNvbnNvbGUubG9nKCQoJCgnLmtleVNlbGVjdCcpLmZpbmQoJ2EubGlua2VkaW5fbGluaycpWzBdKS5hdHRyKCdocmVmJykpXG4gICAgICBsaW5rID0gJCgkKCcua2V5U2VsZWN0JykuZmluZCgnYS5saW5rZWRpbl9saW5rJylbMF0pLmF0dHIoJ2hyZWYnKVxuICAgICAgLypcbiAgICAgIHdpbmRvdy5vcGVuKGxpbmssICdfYmxhbmsnKVxuICAgICAgY29uc29sZS5sb2coJ25ldycpXG4gICAgICAqL1xuICAgICAgLy9wb3B1cFdpbmRvdy5ibHVyKCk7XG4gICAgICAvL3dpbmRvdy5mb2N1cygpO1xuICAgICAgLy8ga2V5Ym9hcmQgPSB0aGlzcy5zdGF0ZS5rZXlib2FyZEFjdGl2ZVByb3NwZWN0XG4gICAgICBcbiAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICBhLmhyZWYgPSBsaW5rXG4gICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50c1wiKTtcbiAgICAgIC8vdGhlIHRlbnRoIHBhcmFtZXRlciBvZiBpbml0TW91c2VFdmVudCBzZXRzIGN0cmwga2V5XG4gICAgICAvLyBGb3IgTWFjIFRoaXMgV29ya3MgQ2hlY2sgRm9yIC0gV2luZG93c1xuICAgICAgZXZ0LmluaXRNb3VzZUV2ZW50KFwiY2xpY2tcIiwgdHJ1ZSwgdHJ1ZSwgd2luZG93LCAwLCAwLCAwLCAwLCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlLCBmYWxzZSwgZmFsc2UsIHRydWUsIDAsIG51bGwpO1xuICAgICAgYS5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gICAgfSk7XG5cblxuXG4gICAgLyogTGlzdCBNb2RpZmljYXRpb24gU2hvcnRjdXRzICovXG4gICAgTW91c2V0cmFwLmJpbmQoJ3RhYityJywgZnVuY3Rpb24oKXtcbiAgICAgIC8vY29uc29sZS5sb2coJ3JlbG9hZCcpXG4gICAgICAkKCcjcmVuYW1lTGlzdEJ0bicpLmNsaWNrKClcbiAgICB9KVxuXG4gICAgTW91c2V0cmFwLmJpbmQoJ3RhYitkJywgZnVuY3Rpb24oKXtcbiAgICAgIC8vY29uc29sZS5sb2coJ3JlbG9hZCcpXG4gICAgICAkKCcjZGVsZXRlTGlzdE1vZGFsJykuY2xpY2soKVxuICAgIH0pXG5cbiAgICBNb3VzZXRyYXAuYmluZCgndGFiK3MnLCBmdW5jdGlvbigpe1xuICAgICAgLy9jb25zb2xlLmxvZygncmVsb2FkJylcbiAgICAgIC8vJCgnI2Rvd25sb2FkUHJvc3BlY3RzJykuY2xpY2soKVxuICAgICAgdGhpc3MuZG93bmxvYWRGaWxlKClcbiAgICB9KVxuXG4gICAgTW91c2V0cmFwLmJpbmQoJ3NoaWZ0K2wnLCBmdW5jdGlvbigpe1xuICAgICAgLy9jb25zb2xlLmxvZygncmVsb2FkJylcbiAgICAgIC8vJCgnI2Rvd25sb2FkUHJvc3BlY3RzJykuY2xpY2soKVxuICAgICAgLy90aGlzcy5kb3dubG9hZEZpbGUoKVxuICAgICAgJCgnLm5ldy1saXN0LWJ0bicpLmNsaWNrKClcbiAgICB9KVxuXG4gICAgTW91c2V0cmFwLmJpbmQoJ2UnLCBmdW5jdGlvbigpe1xuICAgICAgY29uc29sZS5sb2coJ3JlbG9hZCcpXG4gICAgICAvLyQoJyNkb3dubG9hZFByb3NwZWN0cycpLmNsaWNrKClcbiAgICAgIHRoaXNzLnJlbW92ZVNlbGVjdGVkUHJvc3BlY3RzKClcbiAgICB9KVxuXG4gICAgTW91c2V0cmFwLmJpbmQoJ2MnLCBmdW5jdGlvbigpIHsgXG4gICAgICBjb25zb2xlLmxvZygnY29weScpXG4gICAgICAkKCcjY29weVRvTGlzdCcpLmNsaWNrKClcbiAgICB9KTtcblxuICAgIE1vdXNldHJhcC5iaW5kKCdtJywgZnVuY3Rpb24oKSB7IFxuICAgICAgY29uc29sZS5sb2coJ2NvcHknKVxuICAgICAgJCgnI21vdmVUb0xpc3QnKS5jbGljaygpXG4gICAgfSk7XG5cbiAgICAvL01vdXNldHJhcC5iaW5kKCdlJywgZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKCdlJyk7IH0pO1xuICAgIE1vdXNldHJhcC5iaW5kKCdyaWdodCcsIGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygncmlnaHQnKTsgfSk7XG4gICAgTW91c2V0cmFwLmJpbmQoJ2xlZnQnLCBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ2xlZnQnKTsgfSk7XG5cbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgLyogT25Mb2FkIEZvciBUaGUgRmlyc3QgVGltZSBGdW5jdGlvbiAqL1xuICAgIGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cyA9IEpTT04uc3RyaW5naWZ5KFtdKVxuICAgIHRoaXNzcyA9IHRoaXM7XG5cbiAgICAvL3RoaXMuc3RhcnRLZXlib2FyZFNob3J0Y3V0cygpXG5cbiAgICBwYXJzZV9oZWFkZXJzID0ge1xuICAgICAgJ1gtUGFyc2UtQXBwbGljYXRpb24tSWQnICA6ICdOODVRT2t0ZUVFUWt1WlZKS0F2dDhNVmVzMHNqRzZxTnBFR3FRRlZKJywgXG4gICAgICAnWC1QYXJzZS1SRVNULUFQSS1LZXknICAgIDogJ1ZONkV3VnlCWndPMXVwaHNCUHNhdTh0N0pRUnAwMFVNM0tZc2lpUWInXG4gICAgfVxuXG4gICAgY29tcGFueSA9IEpTT04uc3RyaW5naWZ5KEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55KVxuICAgIGN1aWQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikub2JqZWN0SWRcbiAgICB1c2VyID0gSlNPTi5zdHJpbmdpZnkoeydfX3R5cGUnOidQb2ludGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdvYmplY3RJZCc6Y3VpZCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3NOYW1lJzogJ1VzZXInfSlcbiAgICBhcmNoaXZlTGlzdCA9IEpTT04uc3RyaW5naWZ5KHsgLy9oYXJkQ29kZVxuICAgICAgJ29iamVjdElkJzonU2VyUFFqY2t2ZScsXG4gICAgICAnX190eXBlJzonUG9pbnRlcicsIFxuICAgICAgJ2NsYXNzTmFtZScgOiB0aGlzLnN0YXRlLmxpc3RDbGFzc05hbWVcbiAgICB9KVxuXG4gICAgcXJ5ID0gJ3doZXJlPXtcImNvbXBhbnlcIjonK2NvbXBhbnkrJyxcImFyY2hpdmVkXCI6dHJ1ZX0mY291bnQ9MSZvcmRlcj0tY3JlYXRlZEF0J1xuXG4gICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50TGlzdCAhPSAnQWxsJyl7XG4gICAgICBjdXJyZW50TGlzdCA9IHtcbiAgICAgICAgJ29iamVjdElkJzp0aGlzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWQsIFxuICAgICAgICAnX190eXBlJzonUG9pbnRlcicsIFxuICAgICAgICAnY2xhc3NOYW1lJyA6IHRoaXMuc3RhdGUubGlzdENsYXNzTmFtZVxuICAgICAgfVxuICAgICAgY3VycmVudExpc3QgPSBKU09OLnN0cmluZ2lmeShjdXJyZW50TGlzdClcbiAgICAgIHVzZXIgPSBKU09OLnN0cmluZ2lmeSh7J19fdHlwZSc6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb2JqZWN0SWQnOid4VGhBWGMwTFpUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzTmFtZSc6J1VzZXInfSlcblxuICAgICAgLy8gYWRkIGNvbXBhbnkgdG8gcHJvc3BlY3RzIGFkZGVkIHRocm91Z2ggbWluaW5nIGpvYlxuICAgICAgcXJ5ID0gJ3doZXJlPXtcImNvbXBhbnlcIjonK2NvbXBhbnkrJyxcImxpc3RzXCI6JytjdXJyZW50TGlzdCsnfSZjb3VudD0xJ1xuICAgIH1cblxuICAgIGNsYXNzTmFtZSA9IHRoaXMuc3RhdGUuY2xhc3NOYW1lXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvJytjbGFzc05hbWUrJz9saW1pdD0nK3RoaXNzcy5zdGF0ZS5wcm9zcGVjdHNQZXJQYWdlLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGhlYWRlcnM6IHBhcnNlX2hlYWRlcnMsXG4gICAgICBjYWNoZTogdHJ1ZSxcbiAgICAgIGRhdGE6IHFyeSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIGNvbnNvbGUubG9nKCdDT01QQU5ZIFJFU1VMVFMnKVxuICAgICAgICBjb25zb2xlLmxvZyhyZXMucmVzdWx0cylcbiAgICAgICAgY29uc29sZS5sb2cocmVzLnJlc3VsdHMubGVuZ3RoKVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe3Byb3NwZWN0czogcmVzLnJlc3VsdHN9KVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe2NvdW50OiByZXMuY291bnR9KVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe3RvdGFsQ291bnQ6IHJlcy5jb3VudH0pXG4gICAgICAgIHRoaXNzcy5zZXRTdGF0ZSh7cGFnZXM6IE1hdGguY2VpbChyZXMuY291bnQvdGhpc3NzLnByb3BzLnByb3NwZWN0c1BlclBhZ2UpfSlcbiAgICAgICAgdGhpc3NzLnNldFN0YXRlKHtsb2FkaW5nOiBmYWxzZX0pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcGFyc2VfaGVhZGVycyA9IHtcbiAgICAgICdYLVBhcnNlLUFwcGxpY2F0aW9uLUlkJyAgOiAnTjg1UU9rdGVFRVFrdVpWSktBdnQ4TVZlczBzakc2cU5wRUdxUUZWSicsIFxuICAgICAgJ1gtUGFyc2UtUkVTVC1BUEktS2V5JyAgICA6ICdWTjZFd1Z5Qlp3TzF1cGhzQlBzYXU4dDdKUVJwMDBVTTNLWXNpaVFiJyxcbiAgICB9XG5cbiAgICBjdXJyZW50VXNlciA9IHsgXG4gICAgICAnX190eXBlJyAgIDogJ1BvaW50ZXInLFxuICAgICAgJ2NsYXNzTmFtZSc6ICdfVXNlcicsXG4gICAgICAnb2JqZWN0SWQnIDogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLm9iamVjdElkXG4gICAgfVxuXG4gICAgdGhpc3MgPSB0aGlzO1xuICAgIGxpc3RDbGFzc05hbWUgPSB0aGlzLnN0YXRlLmxpc3RDbGFzc05hbWVcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK2xpc3RDbGFzc05hbWUsXG4gICAgICB0eXBlOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHBhcnNlX2hlYWRlcnMsXG4gICAgICBkYXRhOiAnd2hlcmU9e1widXNlclwiOicrSlNPTi5zdHJpbmdpZnkoY3VycmVudFVzZXIpK1wifSZjb3VudD0xJm9yZGVyPS1jcmVhdGVkQXRcIixcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIHJlc3VsdHMgPSByZXMucmVzdWx0c1xuICAgICAgICBmb3IoaT0wO2k8IHJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICByZXN1bHRzLmNvdW50ID0gJ34nXG4gICAgICAgIH1cbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2xpc3RzOiByZXN1bHRzfSlcbiAgICAgICAgLy8gTWFrZSBiYXRjaCByZXF1ZXN0IHRvIGdldCBsaXN0IGNvdW50cyBhZnRlciB0aGV5IGFyZSBsb2FkZWRcbiAgICAgICAgZm9yKGk9MDtpIDwgcmVzLnJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShyZXMucmVzdWx0c1tpXS5vYmplY3RJZCwgXCJcIilcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcihpPTA7aTwgcmVzLnJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsaXN0ID0ge1xuICAgICAgICAgICAgJ19fdHlwZScgICAgOiAnUG9pbnRlcicsXG4gICAgICAgICAgICAnb2JqZWN0SWQnICA6IHJlcy5yZXN1bHRzW2ldLm9iamVjdElkLFxuICAgICAgICAgICAgJ2NsYXNzTmFtZScgOiB0aGlzcy5zdGF0ZS5saXN0Q2xhc3NOYW1lLFxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNsYXNzTmFtZSA9IHRoaXNzLnN0YXRlLmNsYXNzTmFtZVxuICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvJytjbGFzc05hbWUsXG4gICAgICAgICAgICB0eXBlOidHRVQnLFxuICAgICAgICAgICAgaGVhZGVyczpwYXJzZV9oZWFkZXJzLFxuICAgICAgICAgICAgbGlzdE9iamVjdElkOiByZXMucmVzdWx0c1tpXS5vYmplY3RJZCxcbiAgICAgICAgICAgIGRhdGE6ICd3aGVyZT17XCJsaXN0c1wiOicrSlNPTi5zdHJpbmdpZnkobGlzdCkrJ30mY291bnQ9MScsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmxpc3RPYmplY3RJZClcbiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5saXN0T2JqZWN0SWQsIHJlcy5jb3VudClcbiAgICAgICAgICAgICAgYW1vdW50ID0gMFxuICAgICAgICAgICAgICBmb3IoaWk9MDtpaTwgcmVzdWx0cy5sZW5ndGg7aWkrKyl7XG4gICAgICAgICAgICAgICAgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0ocmVzdWx0c1tpaV0ub2JqZWN0SWQpID09IFwiXCIpXG4gICAgICAgICAgICAgICAgICBhbW91bnQgPSBhbW91bnQgKyAxXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZihhbW91bnQgPT0gMCkge1xuICAgICAgICAgICAgICAgIGZvcihpaT0wO2lpPCByZXN1bHRzLmxlbmd0aDtpaSsrKVxuICAgICAgICAgICAgICAgICAgcmVzdWx0c1tpaV0uY291bnQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShyZXN1bHRzW2lpXS5vYmplY3RJZClcblxuICAgICAgICAgICAgICAgIHRoaXNzLnNldFN0YXRlKHtsaXN0czogcmVzdWx0c30pXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnR290IENvdW50cycpXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyB1cGRhdGVkIHJlcy5jb3VudFxuICAgICAgICAgICAgICAvL3RoaXNzLnNldFN0YXRlKHtjb3VudDogcmVzLmNvdW50fSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InKVxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgZ2VuZXJhdGVfaWQgOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICdfJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTtcbiAgfSxcbn0pO1xuXG4vKiAgRHJvcGRvd24gTWVudXMgKi9cblxudmFyIEN1cnJlbnRMaXN0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0N1cnJlbnRMaXN0cycsXG4gIGxpc3RBY3Rpb246IGZ1bmN0aW9uKGUpIHtcbiAgICBsaXN0TmFtZSA9ICQoZS50YXJnZXQpLnRleHQoKVxuICAgIFxuICAgIHZhciBsaXN0U2VsZWN0ID0gXy5maWx0ZXIodGhpcy5wcm9wcy5saXN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT0gbGlzdE5hbWVcbiAgICB9KTtcblxuICAgIHRoaXMucHJvcHMubGlzdEFjdGlvbihsaXN0U2VsZWN0WzBdLm9iamVjdElkKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgbGlzdHMgPSBbXSBcbiAgICBmb3IoaT0wO2k8IHRoaXMucHJvcHMubGlzdHMubGVuZ3RoO2krKykge1xuICAgICAgbGlzdHMucHVzaChcbiAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLGZvbnRTaXplOicxMHB4J30sIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgb25DbGljazogdGhpcy5saXN0QWN0aW9ufSwgdGhpcy5wcm9wcy5saXN0c1tpXS5uYW1lKSlcbiAgICAgIClcbiAgICB9XG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLnByb3BzLmNvcHlEcm9wZG93blN0eWxlKVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJkcm9wZG93bi1tZW51IGRyb3AtdGVzdFwiLCBpZDogXCJkcm9wZG93blwiLCBcbiAgICAgICAgICBzdHlsZToge3JpZ2h0OjE1OH19LCBcbiAgICAgICAgbGlzdHNcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxudmFyIExpc3RzTWVudSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0xpc3RzTWVudScsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcImRyb3Bkb3duLW1lbnUgZHJvcC10ZXN0XCIsIGlkOiBcImRyb3Bkb3duXCIsIFxuICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICBtaW5XaWR0aDonaW5oZXJpdCcsXG4gICAgICAgICAgICB0b3A6ICcyMHB4JyxcbiAgICAgICAgICAgIHdpZHRoOiAnMTI1cHgnLFxuICAgICAgICAgICAgcmlnaHQ6ICcxNTRweCcsXG4gICAgICAgICAgICBsZWZ0OidhdXRvJ1xuICAgICAgICAgIH19LCBcbiAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtocmVmOiBcIiNib29rc1wifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS10aW1lc1wifSksIFwiIMKgXCIgKyAnICcgK1xuICAgICAgICAgIFwiRGVsZXRlIExpc3RcIlxuICAgICAgICApKSwgXG4gICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCIjcG9kY2FzdHNcIn0sIFxuICAgICAgICAgIFwiUmVuYW1lIExpc3RzXCJcbiAgICAgICAgKSlcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxudmFyIEN1cnJlbnRMaXN0c1R3byA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0N1cnJlbnRMaXN0c1R3bycsXG4gIGxpc3RBY3Rpb246IGZ1bmN0aW9uKGUpIHtcbiAgICBsaXN0TmFtZSA9ICQoZS50YXJnZXQpLnRleHQoKVxuICAgIFxuICAgIHZhciBsaXN0U2VsZWN0ID0gXy5maWx0ZXIodGhpcy5wcm9wcy5saXN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT0gbGlzdE5hbWVcbiAgICB9KTtcblxuICAgIHRoaXMucHJvcHMubGlzdEFjdGlvbihsaXN0U2VsZWN0WzBdLm9iamVjdElkKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgbGlzdHMgPSBbXSBcbiAgICBmb3IoaT0wO2k8dGhpcy5wcm9wcy5saXN0cy5sZW5ndGg7aSsrKSB7XG4gICAgICBsaXN0cy5wdXNoKFxuICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe3N0eWxlOiB7Zm9udFdlaWdodDonYm9sZCcsZm9udFNpemU6JzEwcHgnfSwgXG4gICAgICAgICAgICAgICBocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5saXN0QWN0aW9ufSwgXG4gICAgICAgICAgdGhpcy5wcm9wcy5saXN0c1tpXS5uYW1lKSlcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcImRyb3Bkb3duLW1lbnUgZHJvcC10ZXN0XCIsIGlkOiBcImRyb3Bkb3duXCIsIFxuICAgICAgICAgIHN0eWxlOiB0aGlzLnByb3BzLmNvcHlEcm9wZG93blN0eWxlfSwgXG4gICAgICAgIGxpc3RzXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbnZhciBMaXN0RGV0YWlsQnV0dG9ucyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0xpc3REZXRhaWxCdXR0b25zJyxcbiAgLy8gUmVuYW1lIExpc3RcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZWRpdE1vZGU6IGZhbHNlXG4gICAgfVxuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIC8vY29uc29sZS5sb2codGhpcy5wcm9wcy5jdXJyZW50TGlzdE9iamVjdElkKVxuICAgIGlmKCF0aGlzLnN0YXRlLmVkaXRNb2RlKSB7XG4gICAgICBzdHVmZiA9IFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwiXCIsIHN0eWxlOiBsaXN0TmFtZVN0eWxlfSwgXG4gICAgICAgICAgICAodGhpcy5wcm9wcy5jdXJyZW50TGlzdE5hbWUgPT0gXCJBbGxcIikgPyAnJyA6IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYmFyc1wiLCBzdHlsZToge2ZvbnRTaXplOjE2LCBtYXJnaW5Ub3A6LTV9fSksIFxuICAgICAgICAgICAgKHRoaXMucHJvcHMuY3VycmVudExpc3ROYW1lID09IFwiQWxsXCIpID8gJycgOiBcIiAgIFwiICt0aGlzLnByb3BzLmN1cnJlbnRMaXN0TmFtZVxuICAgICAgICAgICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIHN0dWZmID0gUmVhY3QuRE9NLmlucHV0KHtjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sXCIsIHN0eWxlOiB7d2lkdGg6IDEwMCwgZmxvYXQ6ICdsZWZ0JywgaGVpZ2h0OiAyNCwgbWFyZ2luVG9wOiAtMX19KVxuICAgIH1cbiAgICByZXR1cm4gKFxuXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNCh7c3R5bGU6IHttYXJnaW46MH19LCBcbiAgICAgICAgICAgICAgc3R1ZmYsIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICBzdHlsZTogbGlzdEJ0biwgXG4gICAgICAgICAgICAgICAgJ2RhdGEtdG9nZ2xlJzogXCJtb2RhbFwiLCBcbiAgICAgICAgICAgICAgICBpZDogXCJyZW5hbWVMaXN0QnRuXCIsIFxuICAgICAgICAgICAgICAgICdkYXRhLXRhcmdldCc6IFwiLmJzLXJlbmFtZUxpc3QtbW9kYWwtc21cIiwgXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIiBidG4gYnRuLXhzIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBlbmNpbFwifSlcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiBsaXN0QnRuLCBcbiAgICAgICAgICAgICAgICAnZGF0YS10b2dnbGUnOiBcIm1vZGFsXCIsIFxuICAgICAgICAgICAgICAgIGlkOiBcImRlbGV0ZUxpc3RNb2RhbFwiLCBcbiAgICAgICAgICAgICAgICAnZGF0YS10YXJnZXQnOiBcIi5icy1kZWxldGVMaXN0LW1vZGFsLXNtXCIsIFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXhzIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXRyYXNoLW9cIn0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICBSZW5hbWVMaXN0TW9kYWwoe3JlbmFtZUxpc3Q6IHRoaXMucHJvcHMucmVuYW1lTGlzdH0pLCBcbiAgICAgICAgICAgIERlbGV0ZUxpc3RNb2RhbCh7ZGVsZXRlTGlzdDogdGhpcy5wcm9wcy5kZWxldGVMaXN0fSlcbiAgICAgICAgICApXG4gICAgICApO1xuICB9LFxuXG4gIHJlbmFtZUxpc3Q6IGZ1bmN0aW9uKG5ld0xpc3ROYW1lKSB7XG4gICAgdGhpcy5wcm9wcy5yZW5hbWVMaXN0KG5ld0xpc3ROYW1lKVxuICB9LFxuXG4gIGRlbGV0ZUxpc3Q6IGZ1bmN0aW9uKCl7XG4gICAgdGhpcy5wcm9wcy5kZWxldGVMaXN0KClcbiAgfSxcblxuICB0b2dnbGVFZGl0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtlZGl0TW9kZTogIXRoaXMuc3RhdGUuZWRpdE1vZGUgfSlcbiAgfVxufSk7XG5cbnZhciBDb21wYW55UHJvc3BlY3RIZWFkZXIgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdDb21wYW55UHJvc3BlY3RIZWFkZXInLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udHIobnVsbCwgXG4gICAgICAgIFJlYWN0LkRPTS50aChudWxsKSwgXG4gICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt3aWR0aDozMDB9fSwgXCJOYW1lXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3dpZHRoOjEwMH19LCBcIkFkZGVkIE9uXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiSW5kdXN0cnlcIiksIFxuICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7d2lkdGg6MTM3LGRpc3BsYXk6J25vbmUnfX0sIFwiIyBvZiBQcm9zcGVjdHNcIiksIFxuICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXCJTaWduYWxzXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3dpZHRoOjYwMH19LCBcIsKgXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiwqBcIiksIFxuICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCLCoFwiKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIGNyZWF0ZUxpc3RNb2RhbFxuICBjcmVhdGVMaXN0OiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygkKCcjbGlzdFRpdGxlJykudmFsKCkpXG5cbiAgICBkYXRhID0gIHtcbiAgICAgICduYW1lJyAgICAgICAgOiAkKCcjbGlzdFRpdGxlJykudmFsKCkudHJpbSgpLCAgIC8vV2FpdGluZyAsIFJ1bm5pbmdcbiAgICAgICd1c2VyJyAgICAgICAgOiB7ICdfX3R5cGUnOidQb2ludGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAnY2xhc3NOYW1lJzonX1VzZXInLFxuICAgICAgICAgICAgICAgICAgICAgICdvYmplY3RJZCc6J3hXRVNpdzVTbWQnIH0sXG4gICAgfVxuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdExpc3QnLFxuICAgICAgdHlwZTonUE9TVCcsXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJylcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZGF0YS5jb3VudCA9IDBcblxuICAgIHRoaXMucHJvcHMuY3JlYXRlTGlzdChkYXRhKVxuICAgIFxuICAgICQoJyNjcmVhdGVMaXN0TW9kYWwnKS5tb2RhbCgnaGlkZScpXG4gICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdtb2RhbC1vcGVuJyk7XG4gICAgJCgnLm1vZGFsLWJhY2tkcm9wJykucmVtb3ZlKCk7XG4gICAgLy8kKCdidXR0b24uY2xvc2UnKS5jbGljaygpXG4gIH0sXG5cbiAgY3JlYXRlTGlzdEJ1dHRvbkNsaWNrOiBmdW5jdGlvbigpIHtcbiAgICBpZigkKCcjbGlzdFRpdGxlJykudmFsKCkudHJpbSgpICE9IFwiXCIpXG4gICAgICB0aGlzLmNyZWF0ZUxpc3QoKVxuICB9LFxuXG4gIGNyZWF0ZU1pbmluZ0pvYjogZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnNvbGUubG9nKCdsbWFvJylcbiAgICBpZigkKCcjbGlzdFRpdGxlJykudmFsKCkudHJpbSgpICE9IFwiXCIpXG4gICAgICB0aGlzLmNyZWF0ZUxpc3QoKVxuICB9LFxuXG4gIGRlbGV0ZUxpc3Q6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucHJvcHMuZGVsZXRlTGlzdCgpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbCBmYWRlIGJzLWRlbGV0ZUxpc3QtbW9kYWwtc21cIiwgdGFiSW5kZXg6IFwiLTFcIiwgcm9sZTogXCJkaWFsb2dcIiwgJ2FyaWEtbGFiZWxsZWRieSc6IFwibXlTbWFsbE1vZGFsTGFiZWxcIiwgJ2FyaWEtaGlkZGVuJzogXCJ0cnVlXCIsIGlkOiBcImNyZWF0ZUxpc3RNb2RhbFwiLCBzdHlsZToge3RvcDonMjAwcHgnfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1zbVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1jb250ZW50XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtaGVhZGVyXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJjbG9zZVwiLCAnZGF0YS1kaXNtaXNzJzogXCJtb2RhbFwifSwgUmVhY3QuRE9NLnNwYW4oeydhcmlhLWhpZGRlbic6IFwidHJ1ZVwifSwgXCLDl1wiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwic3Itb25seVwifSwgXCJDbG9zZVwiKSksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS10cmFzaC1vXCJ9KSwgXCIgwqBEZWxldGUgTGlzdD9cIilcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtYm9keVwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uZm9ybSh7Y2xhc3NOYW1lOiBcImRlbGV0ZUZvcm1cIiwgb25TdWJtaXQ6IHRoaXMuZGVsZXRlTGlzdH0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmRlbGV0ZUxpc3QsIFxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLWRhbmdlclwiLCBcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJywgd2lkdGg6JzEwMCUnfX0sIFxuICAgICAgICAgICAgICAgICAgICAgIFwiRGVsZXRlXCJcbiAgICAgICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuZGVsZXRlTGlzdCwgXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tZGVmYXVsdFwiLCBcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJywgd2lkdGg6JzEwMCUnfX0sIFxuICAgICAgICAgICAgICAgICAgICAgIFwiQ2FuY2VsXCJcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5wcm9wcy5pbml0aWFsVGVtcGxhdGVWYWx1ZXMubmFtZSxcbiAgICAgIGJvZHk6IHRoaXMucHJvcHMuaW5pdGlhbFRlbXBsYXRlVmFsdWVzLmJvZHksXG4gICAgICBzdWJqZWN0OiB0aGlzLnByb3BzLmluaXRpYWxUZW1wbGF0ZVZhbHVlcy5zdWJqZWN0LFxuICAgICAgZWRpdE1vZGU6IHRoaXMucHJvcHMuaW5pdGlhbFRlbXBsYXRlVmFsdWVzLmVkaXRNb2RlXG4gICAgfVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnZGlkIG1vdW50JylcbiAgICAkKCcudGVtcGxhdGUtYm9keScpLmh0bWwodGhpcy5zdGF0ZS5ib2R5KVxuICAgIGlmKHRoaXMuc3RhdGUuZWRpdE1vZGUpIHtcbiAgICAgICQoJy5zdW1tZXInKS5zdW1tZXJub3RlKHtcbiAgICAgICAgaGVpZ2h0OiAyMDAsXG4gICAgICAgIHRvb2xiYXI6IFtcbiAgICAgICAgICBbJ3N0eWxlJywgWydib2xkJywgJ2l0YWxpYycsICd1bmRlcmxpbmUnLCAnY2xlYXInXV0sXG4gICAgICAgICAgWydmb250JywgWydzdHJpa2V0aHJvdWdoJ11dLFxuICAgICAgICAgIFsnZm9udHNpemUnLCBbJ2ZvbnRzaXplJ11dLFxuICAgICAgICAgIFsnY29sb3InLCBbJ2NvbG9yJ11dLFxuICAgICAgICAgIFsncGFyYScsIFsndWwnLCAnb2wnLCAncGFyYWdyYXBoJ11dLFxuICAgICAgICAgIFsnaGVpZ2h0JywgWydoZWlnaHQnXV0sXG4gICAgICAgIF1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmVuZGVyanNvbi5zZXRfc2hvd190b19sZXZlbCgnYWxsJylcbiAgICBwcm9zcGVjdCA9IF8ucGljayh0aGlzLnByb3BzLnByb3NwZWN0LCBcbiAgICAgICdjb21wYW55X25hbWUnLCAnbmFtZScsICdwb3MnXG4gICAgKVxuICAgIHByb3NwZWN0LmZpcnN0X25hbWUgPSBwcm9zcGVjdC5uYW1lLnNwbGl0KCcgJylbMF1cbiAgICBwcm9zcGVjdC5sYXN0X25hbWUgPSBfLmxhc3QocHJvc3BlY3QubmFtZS5zcGxpdCgnICcpKVxuICAgIHByb3NwZWN0ID0gXy5vbWl0KHByb3NwZWN0LCAnbmFtZScpXG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRUZW1wbGF0ZVwiKS5hcHBlbmRDaGlsZChyZW5kZXJqc29uKHByb3NwZWN0KSk7XG4gICAgJCgnI2VkaXRUZW1wbGF0ZU92ZXJsYXknKS5odG1sKClcbiAgICB0aGlzcyA9IHRoaXM7XG4gICAgJCgnLnJlbmRlcmpzb24nKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgIHRoaXNzLnByb3BzLnRvZ2dsZVRlbXBsYXRlRWRpdE1lbnUoKVxuICAgIH0pXG5cbiAgICAkKCcucmVuZGVyanNvbicpLmNzcyh7XG4gICAgICAncG9zaXRpb24nOiAnYWJzb2x1dGUnLFxuICAgICAgJ3otaW5kZXgnOiAnMTAwMDAwMDAwMCcsXG4gICAgICAnYmFja2dyb3VuZC1jb2xvcic6J3JnYmEoMCwwLDAsMCknLFxuICAgICAgJ2JvcmRlcic6JzAnLFxuICAgICAgJ2NvbG9yJzond2hpdGUnLFxuICAgICAgJ21hcmdpbi10b3AnOicwcHgnLFxuICAgICAgJ2hlaWdodCc6ICc1NDJweCcsXG4gICAgICAnb3ZlcmZsb3cnOidhdXRvJyxcbiAgICAgICd3aWR0aCc6JzM4MHB4J1xuICAgIH0pXG5cbiAgICAkKCcua2V5JykuY3NzKHtcbiAgICAgICdjdXJzb3InOidwb2ludGVyJ1xuICAgIH0pXG5cbiAgICAkKCcudGltZWxpbmUnKS5jc3Moe1xuICAgICAgJy13ZWJraXQtZmlsdGVyJzogJ2JsdXIoMTBweCknLFxuICAgIH0pXG4gICAgJCgnI2NhbXBhaWduLXRvcC1kZXRhaWwnKS5jc3Moe1xuICAgICAgJy13ZWJraXQtZmlsdGVyJzogJ2JsdXIoMTBweCknLFxuICAgIH0pXG4gIH0sXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50OmZ1bmN0aW9uKCkge1xuICAgICQoJy50aW1lbGluZScpLmNzcyh7XG4gICAgICAnLXdlYmtpdC1maWx0ZXInOiAnJyxcbiAgICB9KVxuICAgICQoJyNjYW1wYWlnbi10b3AtZGV0YWlsJykuY3NzKHtcbiAgICAgICctd2Via2l0LWZpbHRlcic6ICcnLFxuICAgIH0pXG4gIH0sXG5cbiAgY2xpY2tlZE92ZXJsYXk6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdjbGlja2VkIG92ZXJsYXknKVxuICAgIHRoaXMucHJvcHMudG9nZ2xlVGVtcGxhdGVFZGl0TWVudSgpXG4gIH0sXG5cbiAgY2hhbmdlTW9kZTogZnVuY3Rpb24oKSB7XG4gICAgLy8gVXBkYXRlIHRlbXBsYXRlIGh0bWwgb24gdG9nZ2xlXG4gICAgcGFyc2VfaGVhZGVycyA9IGFwcENvbmZpZy5wYXJzZUhlYWRlcnNcbiAgICBpZih0aGlzLnN0YXRlLmVkaXRNb2RlKXtcbiAgICAgICQoJy5zdW1tZXInKS5kZXN0cm95KCk7XG4gICAgICAkKCcudGltZWxpbmUnKS5jc3Moe1xuICAgICAgICAnLXdlYmtpdC1maWx0ZXInOiAnYmx1cigyMHB4KScsXG4gICAgICB9KVxuXG4gICAgICBjb25zb2xlLmxvZygnbG9vayBhdCB0aGlzJylcbiAgICAgIGNvbnNvbGUubG9nKG5hbWUpXG4gICAgICBuYW1lID0gKHRoaXMucHJvcHMuaW5pdGlhbFRlbXBsYXRlVmFsdWVzLm5ld1RlbXBsYXRlKSA/ICQoJyN0ZW1wbGF0ZS1uYW1lJykudmFsKCkgOiB0aGlzLnN0YXRlLm5hbWVcbiAgICAgIHRoaXMucHJvcHMuc2F2ZVRlbXBsYXRlKHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgYm9keTogJCgnLnN1bW1lcicpLmNvZGUoKSxcbiAgICAgICAgc3ViamVjdDogJCgnLnN1YmplY3QnKS52YWwoKSxcbiAgICAgIH0sIHRoaXMucHJvcHMuaW5pdGlhbFRlbXBsYXRlVmFsdWVzLm5ld1RlbXBsYXRlKVxuXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgbmFtZTogJCgnI3RlbXBsYXRlLW5hbWUnKS52YWwoKSxcbiAgICAgICAgYm9keTogJCgnLnN1bW1lcicpLmNvZGUoKSxcbiAgICAgICAgc3ViamVjdDogJCgnLnN1YmplY3QnKS52YWwoKSxcbiAgICAgICAgZWRpdE1vZGU6ICF0aGlzLnN0YXRlLmVkaXRNb2RlLFxuICAgICAgfSlcblxuICAgICAgb2JqSWQgPSB0aGlzLnByb3BzLmluaXRpYWxUZW1wbGF0ZVZhbHVlcy5vYmplY3RJZFxuICAgICAgJC5hamF4KHtcbiAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1RlbXBsYXRlcy8nK29iaklkLFxuICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICBoZWFkZXJzOnBhcnNlX2hlYWRlcnMsXG4gICAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoe2JvZHk6ICQoJy5zdW1tZXInKS5jb2RlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3Q6ICQoJy5zdWJqZWN0JykudmFsKCl9KSxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVkaXRNb2RlOiAhdGhpcy5zdGF0ZS5lZGl0TW9kZSB9KVxuICAgICAgJCgnLnRpbWVsaW5lJykuY3NzKHtcbiAgICAgICAgJy13ZWJraXQtZmlsdGVyJzogJ2JsdXIoMjBweCknLFxuICAgICAgfSlcbiAgICB9XG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbFVwZGF0ZTogZnVuY3Rpb24obmV3UHJvcHMpIHtcbiAgICBjb25zb2xlLmxvZygnVEhFIE5FVyBQUk9QUycpXG4gICAgY29uc29sZS5sb2cobmV3UHJvcHMpXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgICAvKiB0aGlzcyA9IHRoaXM7ICovXG4gICAgY29uc29sZS5sb2coJ09USEVSJylcbiAgICBpZih0aGlzLnN0YXRlLmVkaXRNb2RlKXtcbiAgICAgIGNvbnNvbGUubG9nKCdDQUxMRUQnKVxuICAgICAgLy8gUmVwbGFjZSBTdWJqZWN0IFxuICAgICAgJCgnLnN1YmplY3QnKS52YWwodGhpcy5zdGF0ZS5zdWJqZWN0KVxuICAgICAgJCgnI3RlbXBsYXRlLW5hbWUnKS52YWwodGhpcy5zdGF0ZS5uYW1lKVxuXG4gICAgICAkKCcuc3VtbWVyJykuc3VtbWVybm90ZSh7XG4gICAgICAgIGhlaWdodDogMjAwLFxuICAgICAgICB0b29sYmFyOiBbXG4gICAgICAgICAgWydzdHlsZScsIFsnYm9sZCcsICdpdGFsaWMnLCAndW5kZXJsaW5lJywgJ2NsZWFyJ11dLFxuICAgICAgICAgIFsnZm9udCcsIFsnc3RyaWtldGhyb3VnaCddXSxcbiAgICAgICAgICBbJ2ZvbnRzaXplJywgWydmb250c2l6ZSddXSxcbiAgICAgICAgICBbJ2NvbG9yJywgWydjb2xvciddXSxcbiAgICAgICAgICBbJ3BhcmEnLCBbJ3VsJywgJ29sJywgJ3BhcmFncmFwaCddXSxcbiAgICAgICAgICBbJ2hlaWdodCcsIFsnaGVpZ2h0J11dLFxuICAgICAgICBdXG4gICAgICB9KVxuXG4gICAgICAvLyBJbml0aWFsaXplIEVkaXRvciB3aXRoIGh0bWxcbiAgICAgICQoJy5zdW1tZXInKS5jb2RlKHRoaXMuc3RhdGUuYm9keSlcbiAgICB9XG4gIH0sXG5cblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHN1YmplY3RQbGFjZSA9ICh0aGlzLnN0YXRlLmVkaXRNb2RlKSA/IFJlYWN0LkRPTS5pbnB1dCh7c3R5bGU6IHtkaXNwbGF5OidpbmxpbmUnLHdpZHRoOjQ4MH0sIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgc3ViamVjdFwifSkgOiB0aGlzLnN0YXRlLnN1YmplY3RcblxuICAgIGlmKHRoaXMuc3RhdGUuZWRpdE1vZGUpe1xuICAgICAgIHRvZ2dsZUJ1dHRvbiA9IFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY2hhbmdlTW9kZSwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHNcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6NX19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc2F2ZVwifSksIFwiIMKgIFNhdmUgVGVtcGxhdGVcIilcblxuICAgICAgIGlmKHRoaXMucHJvcHMuaW5pdGlhbFRlbXBsYXRlVmFsdWVzLm5ld1RlbXBsYXRlKXtcbiAgICAgICAgIHRoZV9uYW1lID0gUmVhY3QuRE9NLmlucHV0KHtjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sXCIsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwidGVtcGxhdGUtbmFtZVwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J2xlZnQnLHdpZHRoOjIwMH19KVxuICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgIHRvZ2dsZUJ1dHRvbiA9IFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY2hhbmdlTW9kZSwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4teHNcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6NX19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGVuY2lsLXNxdWFyZVwifSksIFwiIMKgIEVkaXQgVGVtcGxhdGVcIilcblxuICAgICAgIHRoZV9uYW1lID0gUmVhY3QuRE9NLmg2KHtzdHlsZToge2Zsb2F0OidsZWZ0J319LCBcbiAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWZpbGUtdGV4dC1vXCJ9KSwgXCLCoFwiLCBcbiAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLm5hbWVcbiAgICAgICAgICAgICAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7aWQ6IFwiZWRpdFRlbXBsYXRlXCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmg1KHtjbGFzc05hbWU6IFwiZXhhbXBsZS10ZW1wbGF0ZS10aXRsZVwifSwgXCJFeGFtcGxlIFRlbXBsYXRlIFZhbHVlc1wiKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJleGFtcGxlLXRlbXBsYXRlLXRpdGxlXCIsIFxuICAgICAgICAgICAgIHN0eWxlOiB7bWFyZ2luTGVmdDoyMTUsIG1hcmdpblRvcDo4fX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tZGVmYXVsdCBidG4teHNcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jaGV2cm9uLWxlZnRcIn0pKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICBzdHlsZToge21hcmdpbkxlZnQ6NX0sIFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tZGVmYXVsdCBidG4teHNcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jaGV2cm9uLXJpZ2h0XCJ9KSlcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe29uQ2xpY2s6IHRoaXMuY2xpY2tlZE92ZXJsYXksIGlkOiBcImVkaXRUZW1wbGF0ZU92ZXJsYXlcIn0pLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJlZGl0VGVtcGxhdGVWaWV3XCIsIFxuICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcInBhbmVsIHBhbmVsLWRlZmF1bHRcIiwgXG4gICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJ319LCBcbiAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1oZWFkaW5nXCIsIHN0eWxlOiB7aGVpZ2h0OjUwfX0sIFxuICAgICAgICAgICAgICAgICB0aGVfbmFtZSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLWRlZmF1bHQgYnRuLXhzXCIsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxtYXJnaW5MZWZ0OjUsbWFyZ2luVG9wOjV9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS10cmFzaFwifSlcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIHRvZ2dsZUJ1dHRvblxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtYm9keVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJlZGl0VGVtcGxhdGVUaXRsZVwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4obnVsbCwgXCJTdWJqZWN0OiBcIiksIFxuICAgICAgICAgICAgICAgIHN1YmplY3RQbGFjZVxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJ0ZW1wbGF0ZURldGFpbHNcIn0sIFxuICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbkJvdHRvbTonMCd9LCBjbGFzc05hbWU6IFwidGV4dC1tdXRlZFwifSwgXG4gICAgICAgICAgICAgICAgIFwiQ3JlYXRlZCBieSBNYXJrIG9uIEp1bC4gMjEsIDIwMTRcIlxuICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luVG9wOicwJ30sIGNsYXNzTmFtZTogXCJ0ZXh0LW11dGVkXCJ9LCBcbiAgICAgICAgICAgICAgICAgXCJsYXN0IHVwZGF0ZWQgNyBkYXlzIGFnb1wiXG4gICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsIHBhbmVsLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtYm9keSBzdW1tZXIgdGVtcGxhdGUtYm9keVwifVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gICAgKTtcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxudmFyIFRlbXBsYXRlcyA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzLmpzLm1pbi5qcycpO1xudmFyIFNjaGVkdWxlcyA9IHJlcXVpcmUoJy4vc2NoZWR1bGUuanMubWluLmpzJyk7XG52YXIgQ2FtcGFpZ25zID0gcmVxdWlyZSgnLi9jYW1wYWlnbnMuanMubWluLmpzJyk7XG52YXIgU2VudE1haWwgPSByZXF1aXJlKCcuL3NlbnRfbWFpbC5qcy5taW4uanMnKTtcbnZhciBGb2xsb3d1cEZlZWQgPSByZXF1aXJlKCcuL2ZvbGxvd3VwX2ZlZWQuanMubWluLmpzJyk7XG52YXIgQ2FtcGFpZ25EZXRhaWwgPSByZXF1aXJlKCcuL2NhbXBhaWduX2RldGFpbC5qcy5taW4uanMnKTtcbnZhciBDcmVhdGVDYW1wYWlnbk1vZGFsID0gcmVxdWlyZSgnLi9jcmVhdGVfY2FtcGFpZ24uanMubWluLmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNlbGVjdGVkU2NyZWVuOiAnQ2FtcGFpZ25zJyxcbiAgICAgIHNlbGVjdGVkQ2FtcGFpZ246JycsXG4gICAgICBwcm9zcGVjdExpc3RzOiBbXSxcbiAgICAgIGNhbXBhaWduczogW11cbiAgICB9XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXNzID0gdGhpcztcbiAgICAgY29tcGFueSA9IEpTT04uc3RyaW5naWZ5KEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55KVxuICAgICBxcnkgPSAnd2hlcmU9e1wiY29tcGFueVwiOicrY29tcGFueSsnfSZpbmNsdWRlPXByb3NwZWN0X2xpc3QsZm9sbG93dXBzLGZvbGxvd3Vwcy50ZW1wbGF0ZSZvcmRlcj0tY3JlYXRlZEF0J1xuICAgICAkLmFqYXgoe1xuICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9DYW1wYWlnbicsXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgIGRhdGE6IHFyeSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMucmVzdWx0cylcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2NhbXBhaWduczogcmVzLnJlc3VsdHN9KVxuICAgICAgICAvLyBUT0RPICAtIEFkZCBHZXQgUHJvc3BlY3QgTGlzdCBDb3VudFxuICAgICAgICAvLyBGb2xsb3cgVXAgRmVlZCBGZWF0dXJlXG4gICAgICAgIC8vIC0gU2hvd3Mgd2hhdCBzdGFnZXMgZGlmZmVyZW50IHByb3NwZWN0cyBhcmUgYXQgYW5kIHdoZXRoZXIgeW91IFxuICAgICAgICAvLyAgIHNob3VsZCBzZW5kIGEgZm9sbG93IHVwIHRvIHRoZW0uXG4gICAgICAgIC8vIEhvdyB0byBnZXQgdGhlIHN0YWdlIG9mIFByb3NwZWN0IExpc3RcbiAgICAgICAgLy8gLSBXaGVyZSB0byBwZXJzaXN0IGxhc3QgZW1haWwgc2VudFxuICAgICAgICAvLyAtIFdoYXQgaXMgc3RvcmVkIGF0IHRoZSBjYW1wYWlnbiBsZXZlbFxuICAgICAgICAvLyAtIFdoYXQgaXMgc3RvcmVkIGF0IHRoZSBwcm9zcGVjdCBsZXZlbFxuICAgICAgICAvLyAtIFRpbWVsaW5lIChHZW5lcmFsIDcgeCA3IGNhZGVuY2VzKVxuICAgICAgICAvLyAgIC0gXG4gICAgICAgIC8vIC0gUnVsZXMgKFNhbmtleSAvIEZsb3cgVmlldylcbiAgICAgICAgLy8gICAtIFNob3dzIGFsbCBvciBvbmx5IHRoZSBvbmVzIHRoYXQgaGF2ZW50IHJlc3BvbmRlZCBcbiAgICAgICAgLy8gICAtIFNob3cgYWxsIHRoZSBvbmVzIGh0aGF0IGhhdmVuJ3QgcmVwbGllZFxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJylcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgICB9KTtcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdExpc3QnLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAvLyBUT0RPXG4gICAgICAvLyAtIENvbXBhbnkgU3BlY2lmaWNcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7cHJvc3BlY3RMaXN0czogcmVzLnJlc3VsdHN9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcblxuICAgICAgfVxuICAgIH0pXG5cblxuICB9LFxuICBcbiAgdG9nZ2xlU2NyZWVuOiBmdW5jdGlvbihzY3JlZW4pIHtcbiAgICB0aGlzLnNldFN0YXRlKHtzZWxlY3RlZFNjcmVlbiA6IHNjcmVlbn0pXG4gIH0sXG5cbiAgY2hhbmdlU2VsZWN0ZWRDYW1wYWlnbjogZnVuY3Rpb24oc2NyZWVuLCBzZWxlY3RlZENhbXBhaWduKSB7XG4gICAgY29uc29sZS5sb2coc2VsZWN0ZWRDYW1wYWlnbilcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHNlbGVjdGVkQ2FtcGFpZ24gOiBzZWxlY3RlZENhbXBhaWduLFxuICAgICAgc2VsZWN0ZWRTY3JlZW46IHNjcmVlbixcbiAgICB9KVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgdGhpc3MgPSB0aGlzXG4gICAgY29uc29sZS5sb2codGhpcy5zdGF0ZS5zZWxlY3RlZENhbXBhaWduKVxuICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUuc2VsZWN0ZWRTY3JlZW4pXG4gICAgY29uc29sZS5sb2codGhpcy5zdGF0ZS5jYW1wYWlnbnMpXG4gICAgc3dpdGNoICh0aGlzLnN0YXRlLnNlbGVjdGVkU2NyZWVuKXtcbiAgICAgIGNhc2UgJ0NhbXBhaWducyc6XG4gICAgICAgIEN1cnJlbnRTY3JlZW4gPSBDYW1wYWlnbnMoe2NhbXBhaWduczogdGhpc3Muc3RhdGUuY2FtcGFpZ25zLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VTZWxlY3RlZENhbXBhaWduOiB0aGlzcy5jaGFuZ2VTZWxlY3RlZENhbXBhaWduLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVTY3JlZW46IHRoaXNzLnRvZ2dsZVNjcmVlbn0pXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnQ2FtcGFpZ25EZXRhaWwnOlxuICAgICAgICBDdXJyZW50U2NyZWVuID0gQ2FtcGFpZ25EZXRhaWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDYW1wYWlnbjogdGhpc3Muc3RhdGUuc2VsZWN0ZWRDYW1wYWlnbiwgXG4gICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDYW1wYWlnbk9iamVjdElkOiB0aGlzcy5zdGF0ZS5zZWxlY3RlZENhbXBhZ2luT2JqZWN0SWQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlU2NyZWVuOiB0aGlzcy50b2dnbGVTY3JlZW59KVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ1RlbXBsYXRlcyc6XG4gICAgICAgIEN1cnJlbnRTY3JlZW4gPSBUZW1wbGF0ZXMobnVsbClcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdPdmVydmlldyc6XG4gICAgICAgIEN1cnJlbnRTY3JlZW4gPSBDYW1wYWlnbnMoe2NhbXBhaWduczogdGhpc3Muc3RhdGUuY2FtcGFpZ25zLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VTZWxlY3RlZENhbXBhaWduOiB0aGlzcy5jaGFuZ2VTZWxlY3RlZENhbXBhaWduLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVTY3JlZW46IHRoaXNzLnRvZ2dsZVNjcmVlbn0pXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnU2VudCBNYWlsJzpcbiAgICAgICAgQ3VycmVudFNjcmVlbiA9IFNlbnRNYWlsKG51bGwpXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRm9sbG93dXAgRmVlZCc6XG4gICAgICAgIEN1cnJlbnRTY3JlZW4gPSBGb2xsb3d1cEZlZWQobnVsbClcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdTY2hlZHVsZXMnOlxuICAgICAgICBDdXJyZW50U2NyZWVuID0gU2NoZWR1bGVzKG51bGwpXG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiXCIsIHN0eWxlOiB7aGVpZ2h0Oic1NTBweCd9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb250YWluZXJcIiwgc3R5bGU6IHtwYWRkaW5nOicwJyx3aWR0aDonMTAwJScsaGVpZ2h0OicxMDAlJ319LCBcbiAgICAgICAgICBTaWRlTWVudSh7XG4gICAgICAgICAgICAgICAgY3JlYXRlQ2FtcGFpZ246IHRoaXMuY3JlYXRlQ2FtcGFpZ24sIFxuICAgICAgICAgICAgICAgIHByb3NwZWN0TGlzdHM6IHRoaXMuc3RhdGUucHJvc3BlY3RMaXN0cywgXG4gICAgICAgICAgICAgICAgdG9nZ2xlU2NyZWVuOiB0aGlzLnRvZ2dsZVNjcmVlbn0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0xMFwiLCBcbiAgICAgICAgICAgICAgICAgICBzdHlsZToge3BhZGRpbmc6JzAnLGhlaWdodDonMTAwJSd9fSwgXG4gICAgICAgICAgICBDdXJyZW50U2NyZWVuXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfSxcblxuICBwZXJzaXN0Q2FtcGFpZ246IGZ1bmN0aW9uKG5ld0NhbXBhaWduKSB7XG4gICAgQ2FtcGFpZ24gPSB7fVxuICAgIENhbXBhaWduLm5hbWUgPSBuZXdDYW1wYWlnbi5uYW1lXG4gICAgQ2FtcGFpZ24uY29tcGFueSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55XG4gICAgdGhpc3MgPSB0aGlzO1xuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9DYW1wYWlnbicsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KENhbXBhaWduKSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICB0aGVfY2FtcGFpZ24gPSBfLmZpbmQodGhpc3Muc3RhdGUuY2FtcGFpZ25zLCBmdW5jdGlvbihjYW1wYWlnbil7XG4gICAgICAgICAgZmlyc3QgPSBjYW1wYWlnbi5uYW1lID09IG5ld0NhbXBhaWduLm5hbWUgXG4gICAgICAgICAgc2Vjb25kID0gY2FtcGFpZ24ucHJvc3BlY3RfbGlzdCA9PSBuZXdDYW1wYWlnbi5wcm9zcGVjdF9saXN0XG4gICAgICAgICAgcmV0dXJuIGZpcnN0ICYmIHNlY29uZFxuICAgICAgICB9KVxuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcy5vYmplY3RJZClcblxuICAgICAgICB0aGVfY2FtcGFpZ24ub2JqZWN0SWQgPSByZXMub2JqZWN0SWRcbiAgICAgICAgY2FtcGFpZ25zID0gXy5maWx0ZXIodGhpc3Muc3RhdGUuY2FtcGFpZ25zLCBmdW5jdGlvbihjYW1wYWlnbil7XG4gICAgICAgICAgZmlyc3QgPSBjYW1wYWlnbi5uYW1lID09IG5ld0NhbXBhaWduLm5hbWUgXG4gICAgICAgICAgc2Vjb25kID0gY2FtcGFpZ24ucHJvc3BlY3RfbGlzdCA9PSBuZXdDYW1wYWlnbi5wcm9zcGVjdF9saXN0XG4gICAgICAgICAgcmV0dXJuICEoZmlyc3QgJiYgc2Vjb25kKVxuICAgICAgICB9KVxuICAgICAgICBjYW1wYWlnbnMucHVzaCh0aGVfY2FtcGFpZ24pXG4gICAgICAgIGNvbnNvbGUubG9nKGNhbXBhaWducylcblxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7Y2FtcGFpZ25zOiAgY2FtcGFpZ25zfSlcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9DYW1wYWlnbi8nK3Jlcy5vYmplY3RJZCxcbiAgICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtwcm9zcGVjdF9saXN0OntcbiAgICAgICAgICAgICdfX3R5cGUnOidQb2ludGVyJyxcbiAgICAgICAgICAgICdjbGFzc05hbWUnOidQcm9zcGVjdExpc3QnLFxuICAgICAgICAgICAgJ29iamVjdElkJzpuZXdDYW1wYWlnbi5wcm9zcGVjdF9saXN0Lm9iamVjdElkLFxuICAgICAgICAgIH19KSxcbiAgICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgY3JlYXRlQ2FtcGFpZ246IGZ1bmN0aW9uKG5ld0NhbXBhaWduKSB7XG4gICAgY2FtcGFpZ25zID0gdGhpcy5zdGF0ZS5jYW1wYWlnbnNcbiAgICBjYW1wYWlnbnMucHVzaChuZXdDYW1wYWlnbilcbiAgICB0aGlzLnNldFN0YXRlKHtjYW1wYWlnbnM6IGNhbXBhaWduc30pXG4gICAgY29uc29sZS5sb2cobmV3Q2FtcGFpZ24pXG5cbiAgICAkKCcubW9kYWwnKS5jbGljaygpXG4gICAgJCgnLm1vZGFsLWJhY2tkcm9wJykuY2xpY2soKVxuXG4gICAgdGhpcy5wZXJzaXN0Q2FtcGFpZ24obmV3Q2FtcGFpZ24pXG4gIH1cbn0pO1xuXG52YXIgU2lkZU1lbnUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdTaWRlTWVudScsXG4gIHRvZ2dsZVNjcmVlbjogZnVuY3Rpb24oZSkge1xuICAgIHRoaXMucHJvcHMudG9nZ2xlU2NyZWVuKCQoZS50YXJnZXQpLnRleHQoKS50cmltKCkpXG4gIH0sXG5cbiAgLypcbiAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJzaGFycCBidG4gYnRuLWRlZmF1bHRcIiBvbkNsaWNrPXt0aGlzLnRvZ2dsZVNjcmVlbn0+XG4gICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1maWxlLXRleHRcIiAvPiAmbmJzcDsgVGVtcGxhdGVzXG4gICAgPC9idXR0b24+XG4gICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwic2hhcnAgYnRuIGJ0bi1kZWZhdWx0XCIgb25DbGljaz17dGhpcy50b2dnbGVTY3JlZW59PlxuICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtY2xvY2stb1wiIC8+ICZuYnNwOyBTY2hlZHVsZXNcbiAgICA8L2J1dHRvbj5cbiAgKi9cbiAgY3JlYXRlQ2FtcGFpZ25Nb2RhbDogZnVuY3Rpb24oKSB7XG5cbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTJcIiwgXG4gICAgICAgIHN0eWxlOiB7cGFkZGluZzonMCcsaGVpZ2h0OicxMDAlJywgYmFja2dyb3VuZENvbG9yOidyZ2IoOTAsIDEwNywgMTE5KScsYm9yZGVyQm90dG9tTGVmdFJhZGl1czonM3B4J319LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cC12ZXJ0aWNhbFwiLCBzdHlsZToge3dpZHRoOicxMDAlJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJzaGFycCBidG4gYnRuLWRlZmF1bHRcIiwgXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZVNjcmVlbn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7bWFyZ2luTGVmdDonMjdweCd9fSwgXCJPdmVydmlld1wiKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcInNoYXJwIGJ0biBidG4tZGVmYXVsdFwiLCBcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMudG9nZ2xlU2NyZWVufSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLW5ld3NwYXBlci1vXCJ9KSwgXCIgwqBcIiwgIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7bWFyZ2luTGVmdDonNHB4J319LCBcIkZvbGxvd3VwIEZlZWRcIilcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfSwgXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwic2hhcnAgYnRuIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY29kZS1mb3JrXCJ9KSwgXCIgwqBcIiwgIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7bWFyZ2luTGVmdDonNHB4J319LCBcIlJ1bGVzXCIpXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ30sIFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcInNoYXJwIGJ0biBidG4tZGVmYXVsdFwiLCBvbkNsaWNrOiB0aGlzLnRvZ2dsZVNjcmVlbn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1waWUtY2hhcnRcIn0pLCBcIiDCoCBBbmFseXRpY3NcIlxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcInNoYXJwIGJ0biBidG4tZGVmYXVsdFwiLCBcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMudG9nZ2xlU2NyZWVufSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBhcGVyLXBsYW5lXCJ9KSwgXCIgwqAgU2VudCBNYWlsXCJcbiAgICAgICAgICApXG4gICAgICAgICksIFxuXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJcIiwgc3R5bGU6IHt3aWR0aDonMTAwJScsdGV4dEFsaWduOidjZW50ZXInLG1hcmdpblRvcDoxMDB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBuZXctbGlzdC1idG5cIiwgXG4gICAgICAgICAgICAgICAgJ2RhdGEtdG9nZ2xlJzogXCJtb2RhbFwiLCAnZGF0YS10YXJnZXQnOiBcIi5icy1jcmVhdGVDYW1wYWlnbi1tb2RhbC1zbVwiLCBcbiAgICAgICAgICAgICAgICBzdHlsZTogeyBiYWNrZ3JvdW5kSW1hZ2U6ICdsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCAjMDA5NmZmIDAlLCAjMDA1ZGZmIDEwMCUpJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1cy1jaXJjbGVcIn0pLCBcIsKgwqBOZXcgQ2FtcGFpZ25cIlxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIENyZWF0ZUNhbXBhaWduTW9kYWwoe3Byb3NwZWN0TGlzdHM6IHRoaXMucHJvcHMucHJvc3BlY3RMaXN0cywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUNhbXBhaWduOiB0aGlzLmNyZWF0ZUNhbXBhaWdufSlcbiAgICAgIClcbiAgICApO1xuICB9LFxuXG4gIGNyZWF0ZUNhbXBhaWduOiBmdW5jdGlvbihuZXdDYW1wYWlnbikge1xuICAgIHRoaXMucHJvcHMuY3JlYXRlQ2FtcGFpZ24obmV3Q2FtcGFpZ24pXG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIEZvbGxvd3VwRmVlZFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzY2hlZHVsZWRGb2xsb3d1cHM6IFtdXG4gICAgfVxuICB9LFxuXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBzY2hlZHVsZWRGb2xsb3d1cHMgPSBbXVxuICAgIGZvcihpPTA7aTwgdGhpcy5zdGF0ZS5zY2hlZHVsZWRGb2xsb3d1cHMubGVuZ3RoOyBpKyspeyBcbiAgICAgIHNjaGVkdWxlZEZvbGxvd3Vwcy5wdXNoKFNjaGVkdWxlZEZvbGxvd3VwUm93KG51bGwpKVxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge292ZXJmbG93OidhdXRvJywgaGVpZ2h0OjU1MH19LCBcbiAgICAgICAgUmVhY3QuRE9NLnRhYmxlKHtjbGFzc05hbWU6IFwidGFibGUgdGFibGUtc3RyaXBlZFwiLCBzdHlsZToge21hcmdpbkJvdHRvbTowfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS50aGVhZChudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJQcm9zcGVjdCBOYW1lXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIlByb3NwZWN0IEVtYWlsXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9fSwgXCJTdGF0dXNcIilcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udGJvZHkobnVsbCwgXG4gICAgICAgICAgICBzY2hlZHVsZWRGb2xsb3d1cHNcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxudmFyIFNjaGVkdWxlZEZvbGxvd3VwUm93ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnU2NoZWR1bGVkRm9sbG93dXBSb3cnLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udHIobnVsbFxuXG4gICAgICApXG4gICAgKTtcbiAgfVxufSlcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xudmFyIFNlbmRFbWFpbE1vZGFsID0gcmVxdWlyZSgnLi9zZW5kX2VtYWlsX21vZGFsLmpzLm1pbi5qcycpXG52YXIgVGltZWxpbmVEYXlFbGVtZW50ID0gcmVxdWlyZSgnLi90aW1lbGluZV9kYXlfZWxlbWVudC5qcy5taW4uanMnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBGb2xsb3d1cFRpbWVsaW5lXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgaW5pdGlhbEZvbGxvd3VwcyA9IHRoaXMucHJvcHMuaW5pdGlhbEZvbGxvd3Vwc1xuICAgIGluaXRpYWxGb2xsb3d1cHMgPSAoaW5pdGlhbEZvbGxvd3VwcykgPyBpbml0aWFsRm9sbG93dXBzIDogW11cblxuICAgIHJldHVybiB7XG4gICAgICBmb2xsb3d1cHM6IGluaXRpYWxGb2xsb3d1cHMsXG4gICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgIGN1cnJlbnRUZW1wbGF0ZTonJ1xuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgdGhpc3MgPSB0aGlzO1xuICAgICQoJy5kYXknKS50b29sdGlwKHtcbiAgICAgIHBsYWNlbWVudDogJ3JpZ2h0JyxcbiAgICAgIHRpdGxlOicrIEFkZCBhIGZvbGxvdy11cCdcbiAgICB9KVxuICAgIC8vIEZvbGxvd3VwcyB0aGF0IGJlbG9uZyB0byBjYW1wYWlnblxuICAgICBjb21wYW55ID0gSlNPTi5zdHJpbmdpZnkoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLmNvbXBhbnkpXG4gICAgIGN1cnJlbnRDYW1wYWlnbiA9IHtcbiAgICAgICAnX190eXBlJzogJ1BvaW50ZXInLFxuICAgICAgICdjbGFzc05hbWUnOidDYW1wYWlnbicsXG4gICAgICAgJ29iamVjdElkJzp0aGlzLnByb3BzLmN1cnJlbnRDYW1wYWlnbi5vYmplY3RJZFxuICAgICB9XG4gICAgIGN1cnJlbnRDYW1wYWlnbiA9IEpTT04uc3RyaW5naWZ5KGN1cnJlbnRDYW1wYWlnbilcbiAgICAgLy9xcnkgPSAnd2hlcmU9e1wiY29tcGFueVwiOicrY29tcGFueSsnLFwiY2FtcGFpZ25cIjonK2N1cnJlbnRDYW1wYWlnbisnfSZpbmNsdWRlPXRlbXBsYXRlJ1xuICAgICBxcnkgPSAnd2hlcmU9e1wiY2FtcGFpZ25cIjonK2N1cnJlbnRDYW1wYWlnbisnfSZpbmNsdWRlPXRlbXBsYXRlJ1xuICAgICAvL3FyeSA9ICd3aGVyZT17XCJjYW1wYWlnblwiOicrY3VycmVudENhbXBhaWduKyd9J1xuICAgICAkLmFqYXgoe1xuICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Gb2xsb3d1cCcsXG4gICAgICAgdHlwZTonR0VUJyxcbiAgICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgICBkYXRhOiBxcnksXG4gICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICBjb25zb2xlLmxvZygnZm9sbG93dXAgdGltZWxpbmUnKVxuICAgICAgICAgY29uc29sZS5sb2cocmVzLnJlc3VsdHMpXG4gICAgICAgfSxcbiAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InKVxuICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgIH1cbiAgICAgfSlcbiAgfSxcbiAgXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgYmF0Y2hlcyA9ICBfLmNvdW50QnkodGhpcy5wcm9wcy5wcm9zcGVjdHMsIFxuICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHByb3NwZWN0KSB7IHJldHVybiBwcm9zcGVjdC5sYXN0X2NvbnRhY3RlZCB9KVxuXG4gICAgdGltZWxpbmVFbGVtZW50cyA9IFtdXG4gICAgZm9sbG93dXBzID0gKHRoaXMuc3RhdGUuZm9sbG93dXBzKSA/IHRoaXMuc3RhdGUuZm9sbG93dXBzIDogW11cbiAgICBjb25zb2xlLmxvZyhmb2xsb3d1cHMpXG4gICAgZm9yKGk9MDtpPCAzMTtpKyspe1xuICAgICAgYmF0Y2hDb3VudCA9IChiYXRjaGVzW2ldKSA/IGJhdGNoZXNbaV0gOiAwXG4gICAgICBcbiAgICAgIGFkZFRlbXBsYXRlTW9kZSA9IGZhbHNlOyBcbiAgICAgIGN1cnJlbnRUZW1wbGF0ZSA9IGZhbHNlO1xuICAgICAgZWxlbWVudFR5cGUgPSBmYWxzZVxuICAgICAgZm9yKGlpPTA7aWk8IGZvbGxvd3Vwcy5sZW5ndGg7IGlpKyspe1xuICAgICAgICAvLyBUT0RPIC0gUmVwbGFjZSB3aXRoIHVuZGVyc2NvcmUgbWV0aG9kXG4gICAgICAgIC8vY29uc29sZS5sb2coJ0ZPTExPV1VQUyBFUlJPUicpXG4gICAgICAgIC8vY29uc29sZS5sb2coZm9sbG93dXBzKVxuICAgICAgICBlbGVtZW50VHlwZSA9IGkgPT0gZm9sbG93dXBzW2lpXS5kYXlcbiAgICAgICAgaWYoZWxlbWVudFR5cGUpIHtcbiAgICAgICAgICBhZGRUZW1wbGF0ZU1vZGUgPSAoZm9sbG93dXBzW2lpXS5hZGRUZW1wbGF0ZU1vZGUpID8gdHJ1ZSA6IGZhbHNlXG4gICAgICAgICAgY3VycmVudFRlbXBsYXRlID0gZm9sbG93dXBzW2lpXS50ZW1wbGF0ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGltZWxpbmVFbGVtZW50cy5wdXNoKFRpbWVsaW5lRGF5RWxlbWVudCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlDb3VudDogaSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZXM6IHRoaXMucHJvcHMudGVtcGxhdGVzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUZW1wbGF0ZTogY3VycmVudFRlbXBsYXRlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhdGNoQ291bnQ6IGJhdGNoQ291bnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkVGVtcGxhdGVNb2RlOiBhZGRUZW1wbGF0ZU1vZGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFR5cGU6ICFlbGVtZW50VHlwZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRGb2xsb3d1cDogdGhpcy5hZGRGb2xsb3d1cCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0Rm9sbG93dXA6IHRoaXMuZWRpdEZvbGxvd3VwLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVGb2xsb3d1cDogdGhpcy5zYXZlRm9sbG93dXAsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRm9sbG93dXA6IHRoaXMucmVtb3ZlRm9sbG93dXAsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFRlbXBsYXRlOiB0aGlzLnNldEN1cnJlbnRUZW1wbGF0ZX0pKVxuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInRpbWVsaW5lXCIsIFxuICAgICAgICAgICAgIHN0eWxlOiB7aGVpZ2h0OicxMDAlJyxiYWNrZ3JvdW5kQ29sb3I6J3JnYig5MCwgMTA3LCAxMTkpJyxcbiAgICAgICAgICAgICAgICAgICAgIHdpZHRoOjUsbWFyZ2luVG9wOi0zNX19LCBcbiAgICAgICAgICAgICB0aW1lbGluZUVsZW1lbnRzXG4gICAgICAgICksIFxuICAgICAgICBTZW5kRW1haWxNb2RhbCh7cHJvc3BlY3RzOiB0aGlzLnByb3BzLnByb3NwZWN0cywgXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGVtcGxhdGU6IHRoaXMuc3RhdGUuY3VycmVudFRlbXBsYXRlfSlcbiAgICAgIClcbiAgICApO1xuICB9LFxuXG4gIGNyZWF0ZUZvbGxvd3VwOiBmdW5jdGlvbigpIHtcbiAgICAvL1xuICB9LCAgICAgICAgIFxuXG4gIGFkZEZvbGxvd3VwOiBmdW5jdGlvbihkYXkpIHtcbiAgICAvL2NvbnNvbGUubG9nKCdjYWxsZWQgdGVtcGxhdGUgZWRpdCBtZW51JylcbiAgICBmb2xsb3d1cHMgPSB0aGlzLnN0YXRlLmZvbGxvd3Vwc1xuICAgIGZvbGxvd3Vwcy5wdXNoKHthZGRUZW1wbGF0ZU1vZGU6IHRydWUsIGRheTogZGF5fSlcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGZvbGxvd3VwczogZm9sbG93dXBzXG4gICAgfSlcbiAgfSxcblxuICBlZGl0Rm9sbG93dXA6IGZ1bmN0aW9uKGRheSkge1xuICAgIC8vIGZpbmQgdGVtcGxhdGUgc2V0IGVkaXRtb2RlIGlzIGZhbHNlXG4gICAgZm9yKGk9MDtpPCB0aGlzLnN0YXRlLmZvbGxvd3Vwcy5sZW5ndGg7IGkrKyl7XG4gICAgICBpZih0aGlzLnN0YXRlLmZvbGxvd3Vwc1tpXS5kYXkgPT0gZGF5KXtcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb2xsb3d1cHMgPSB0aGlzLnN0YXRlLmZvbGxvd3Vwc1xuICAgIGZvbGxvd3Vwc1tpXS5hZGRUZW1wbGF0ZU1vZGUgPSB0cnVlXG4gICAgdGhpcy5zZXRTdGF0ZSh7Zm9sbG93dXBzOiBmb2xsb3d1cHN9KVxuICB9LFxuXG4gIHNhdmVGb2xsb3d1cDogZnVuY3Rpb24oZGF5LCBjaG9zZW5UZW1wbGF0ZSkge1xuICAgIG5ld19mb2xsb3d1cHMgPSB0aGlzLnN0YXRlLmZvbGxvd3Vwc1xuICAgIG5ld19mb2xsb3d1cHNbZGF5XS5hZGRUZW1wbGF0ZU1vZGUgPSBmYWxzZVxuICAgIG5ld19mb2xsb3d1cHNbZGF5XS50ZW1wbGF0ZSA9IGNob3NlblRlbXBsYXRlXG5cbiAgICB0aGlzLnNldFN0YXRlKHtmb2xsb3d1cHM6IG5ld19mb2xsb3d1cHN9KVxuXG4gICAgaWYobmV3X2ZvbGxvd3Vwc1tkYXldLm9iamVjdElkKXtcbiAgICAgIHVybCA9IFwiL1wiK25ld19mb2xsb3d1cHNbaV0ub2JqZWN0SWQ7IHR5cGU9XCJQVVRcIlxuXG4gICAgICBkYXRhID0ge3RlbXBsYXRlOntcbiAgICAgICAgX190eXBlOidQb2ludGVyJyxcbiAgICAgICAgY2xhc3NOYW1lOidUZW1wbGF0ZScsXG4gICAgICAgIG9iamVjdElkOiBjaG9zZW5UZW1wbGF0ZS5vYmplY3RJZFxuICAgICAgfX1cbiAgICB9IGVsc2Uge1xuICAgICAgdXJsID0gXCJcIjsgdHlwZT1cIlBPU1RcIjtcblxuICAgICAgZGF0YSA9IHtcbiAgICAgICAgZGF5OiBkYXksXG4gICAgICAgIGNhbXBhaWduOiB7XG4gICAgICAgICAgX190eXBlOiAnUG9pbnRlcicsXG4gICAgICAgICAgY2xhc3NOYW1lOidDYW1wYWlnbicsXG4gICAgICAgICAgb2JqZWN0SWQ6IHRoaXMucHJvcHMuY3VycmVudENhbXBhaWduLm9iamVjdElkXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlOiB7XG4gICAgICAgICAgX190eXBlOiAnUG9pbnRlcicsXG4gICAgICAgICAgY2xhc3NOYW1lOidUZW1wbGF0ZScsXG4gICAgICAgICAgb2JqZWN0SWQ6Y2hvc2VuVGVtcGxhdGUub2JqZWN0SWQsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzcyA9IHRoaXM7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Gb2xsb3d1cCcsXG4gICAgICB0eXBlOnR5cGUsXG4gICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBcbiAgICAgICAgbmV3X2ZvbGxvd3Vwc1tkYXldLm9iamVjdElkID0gcmVzLm9iamVjdElkXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtmb2xsb3d1cHM6IG5ld19mb2xsb3d1cHN9KVxuXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvQ2FtcGFpZ24vJyt0aGlzcy5wcm9wcy5jdXJyZW50Q2FtcGFpZ24ub2JqZWN0SWQsXG4gICAgICAgICAgdHlwZTonUFVUJyxcbiAgICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KHtmb2xsb3d1cHM6IHtcbiAgICAgICAgICAgIF9fb3A6ICdBZGRVbmlxdWUnLFxuICAgICAgICAgICAgb2JqZWN0czpbe1xuICAgICAgICAgICAgICBfX3R5cGU6J1BvaW50ZXInLCBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOidGb2xsb3d1cCcsXG4gICAgICAgICAgICAgIG9iamVjdElkOnJlcy5vYmplY3RJZFxuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9fSksXG4gICAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkge1xuXG4gICAgICB9LFxuICAgIH0pXG4gIH0sXG5cbiAgcmVtb3ZlRm9sbG93dXA6IGZ1bmN0aW9uKGRheSkge1xuICAgIGZvbGxvd3VwcyA9IFtdXG4gICAgZm9yKGk9MDtpPCB0aGlzLnN0YXRlLmZvbGxvd3Vwcy5sZW5ndGg7aSsrKVxuICAgICAgaWYodGhpcy5zdGF0ZS5mb2xsb3d1cHNbaV0uZGF5ICE9IGRheSlcbiAgICAgICAgZm9sbG93dXBzLnB1c2godGhpcy5zdGF0ZS5mb2xsb3d1cHNbaV0pXG4gICAgICBcbiAgICBmb3IoaT0wO2k8IHRoaXMuc3RhdGUuZm9sbG93dXBzLmxlbmd0aDtpKyspXG4gICAgICBpZih0aGlzLnN0YXRlLmZvbGxvd3Vwc1tpXS5kYXkgPT0gZGF5KVxuICAgICAgICBicmVha1xuICAgIFxuICAgIHRoaXMuc2V0U3RhdGUoe2ZvbGxvd3VwczogZm9sbG93dXBzfSkgXG4gICAgaWQgPSB0aGlzLnN0YXRlLmZvbGxvd3Vwc1tpXVxuXG4gICAgdGhpc3MgPSB0aGlzO1xuICAgIGlmKGlkKSB7XG4gICAgICBpZCA9IGlkLm9iamVjdElkXG4gICAgICAkLmFqYXgoe1xuICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvRm9sbG93dXAvJytpZCxcbiAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgdHlwZTonREVMRVRFJyxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgIGNvbnNvbGUubG9nKCdSRU1PVkUgQVJSQVknKVxuICAgICAgJC5hamF4KHtcbiAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL0NhbXBhaWduLycrdGhpc3MucHJvcHMuY3VycmVudENhbXBhaWduLm9iamVjdElkLFxuICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgZm9sbG93dXBzOiB7XG4gICAgICAgICAgICBfX29wIDogJ1JlbW92ZScsXG4gICAgICAgICAgICBvYmplY3RzOiBbe1xuICAgICAgICAgICAgICBfX3R5cGU6ICdQb2ludGVyJyxcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnRm9sbG93dXAnLFxuICAgICAgICAgICAgICBvYmplY3RJZDogaWRcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbigpIHtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH0sXG5cbiAgc2V0Q3VycmVudFRlbXBsYXRlOiBmdW5jdGlvbih0ZW1wbGF0ZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2N1cnJlbnRUZW1wbGF0ZTogdGVtcGxhdGUgfSlcbiAgfVxufSk7XG5cblxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbmRhdGEgPSByZXF1aXJlKCcuLi9saWIvZGF0YS5taW4uanMnKSBcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gZnJlZSB0cmlhbFxuICBvcGVuOiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnb3BlbicpXG4gICAgaGFuZGxlci5vcGVuKHtcbiAgICAgIG5hbWU6ICdDdXN0b21lcm8nLFxuICAgICAgZGVzY3JpcHRpb246ICdHZXQgOTAwIGZyZWUgZW1haWwgY3JlZGl0cyEnLFxuICAgICAgYW1vdW50OiAwLFxuICAgICAgcGFuZWxMYWJlbDogXCJTdGFydCBZb3VyIEZyZWUgVHJpYWwhXCIsXG4gICAgICBvcGVuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coJCgnLmNsb3NlJykpXG4gICAgICAgICQoJy5jbG9zZScpLmhpZGUoKVxuICAgICAgfSxcbiAgICAgIGNsb3NlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY2xvc2VkXCIpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICQoJ2JvZHknKS5jc3Moe292ZXJmbG93OidoaWRkZW4nfSlcblxuXG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLmdldERPTU5vZGUoKSlcbiAgICAvKlxuICAgICQodGhpcy5nZXRET01Ob2RlKCkpLmFwcGVuZCgnIDxmb3JtIGFjdGlvbj1cIlwiIG1ldGhvZD1cIlBPU1RcIj4gPHNjcmlwdCBzcmM9XCJodHRwczovL2NoZWNrb3V0LnN0cmlwZS5jb20vY2hlY2tvdXQuanNcIiBjbGFzcz1cInN0cmlwZS1idXR0b25cIiBkYXRhLWtleT1cInBrX3Rlc3RfNFQ1UGZ0bDRobzBFZ0ZWbzFHN09LUmRhXCIgZGF0YS1hbW91bnQ9XCIyMDAwXCIgZGF0YS1uYW1lPVwiRGVtbyBTaXRlXCIgZGF0YS1kZXNjcmlwdGlvbj1cIjIgd2lkZ2V0cyAoJDIwLjAwKVwiIGRhdGEtaW1hZ2U9XCJcIj4gPC9zY3JpcHQ+IDwvZm9ybT4nKVxuXG4gIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJCgnLnN0cmlwZS1idXR0b24tZWwnKS5odG1sKCkpXG4gICAgJCgnLnN0cmlwZS1idXR0b24tZWwnKS5jbGljaygpXG5cbiAgfSwgNDAwKVxuKi9cblxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7IFxuICBkYXRhID0gZGF0YSgpXG4gICAgaW1nc18xID0gW11cbiAgICBpbWdzXzIgPSBbXVxuICAgIGZvcihpPTA7aSA8IDEyMDsgaSsrKSB7XG4gICAgICBpbWdzXzEucHVzaChSZWFjdC5ET00uaW1nKHtzcmM6IGRhdGFbaV0sIGNsYXNzTmFtZTogXCJwcm9zcGVjdC1pbWdcIn0pKVxuICAgIH1cbiAgICBmb3IoaT0xNTtpIDwgMzA7IGkrKykge1xuICAgICAgaW1nc18yLnB1c2goUmVhY3QuRE9NLmltZyh7c3JjOiBkYXRhW2ldLCBjbGFzc05hbWU6IFwicHJvc3BlY3QtaW1nXCJ9KSlcbiAgICB9XG5cbiAgY29uc29sZS5sb2coZGF0YSlcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcInNpZ251cFwifSwgXCIgXCIpLCBcblxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgUmVhY3QuRE9NLmgxKHtjbGFzc05hbWU6IFwidGl0bGVcIn0sIFwiQ3VzdG9tZXJvLlwiKSwgXG4gICAgICAgIFJlYWN0LkRPTS5oNSh7Y2xhc3NOYW1lOiBcInRhZ2xpbmVcIn0sIFwiR2V0IDkwMCBmcmVlIGVtYWlsIGNyZWRpdHMuIDEwMCUgcmVmdW5kIGd1YXJhbnRlZS4gIFdlIHdpbGwgb25seSBzdGFydCBjaGFyZ2luZyB5b3VyIGNhcmQgYWZ0ZXIgMSBtb250aC5cIilcblxuICAgICAgKSwgXG5cbiAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcIlwiLCBzdHlsZToge3Bvc2l0aW9uOidhYnNvbHV0ZScsekluZGV4OictMicsdG9wOjAsbGVmdDowfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiXCIsIHN0eWxlOiB7bWFyZ2luTGVmdDozNH19LCBcbiAgICAgICAgaW1nc18xLCBcbiAgICAgICAgaW1nc18yXG4gICAgICAgIClcbiAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIExhbmRpbmcgUGFnZVxuICBsb2dpbjogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2xvZ2luJylcbiAgICBlbWFpbCA9ICQoJyNlbWFpbCcpLnZhbCgpXG4gICAgcGFzc3dvcmQgPSAkKCcjcGFzc3dvcmQnKS52YWwoKVxuICAgIHAgPSB7XCJYLVBhcnNlLUFwcGxpY2F0aW9uLUlkXCI6IFwiTjg1UU9rdGVFRVFrdVpWSktBdnQ4TVZlczBzakc2cU5wRUdxUUZWSlwiLFxuICAgICAgICAgXCJYLVBhcnNlLVJFU1QtQVBJLUtleVwiOiBcIlZONkV3VnlCWndPMXVwaHNCUHNhdTh0N0pRUnAwMFVNM0tZc2lpUWJcIn1cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9sb2dpbicsXG4gICAgICBoZWFkZXJzOiBwLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgJ3VzZXJuYW1lJzplbWFpbCxcbiAgICAgICAgJ3Bhc3N3b3JkJzpwYXNzd29yZFxuICAgICAgfSxcbiAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50VXNlcicsIEpTT04uc3RyaW5naWZ5KHJlcykpXG4gICAgICAgIGxvY2F0aW9uLmhyZWYgPSBcIiNcIlxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgJCgnYm9keScpLmNzcyh7b3ZlcmZsb3c6J2F1dG8nfSlcblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiXCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJhY2tncm91bmQtaW1hZ2VcIn0pLCBcbiAgICAgICAgUmVhY3QuRE9NLm5hdih7Y2xhc3NOYW1lOiBcInRoZW5hdmJhciBuYXZiYXIgbmF2YmFyLWRlZmF1bHQgbmF2YmFyLWZpeGVkLXRvcFwiLCByb2xlOiBcIm5hdmlnYXRpb25cIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb250YWluZXItZmx1aWRcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJ0aGUtdGl0bGUgdGstZm9jbyBicmFuZCBuYXZiYXItYnJhbmRcIiwgc3R5bGU6IHtmb250V2VpZ2h0OicxMDAnfSwgXG4gICAgICAgICAgICAgICAgaHJlZjogXCIjXCJ9LCBcbiAgICAgICAgICAgICAgXCJDdXN0b21lcm9cIiwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2ZvbnRTaXplOicyMnB4JyxtYXJnaW5MZWZ0OiczMHB4J319LCBcIlN1cGVyY2hhcmdlIHlvdXIgc2FsZXMhIFwiKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcIiNsb2dpblwiLCBjbGFzc05hbWU6IFwiYnRuLWxnIGJ0biBsb2dpbi1idG5cIn0sIFwiTG9nIEluXCIpXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTEyXCIsIHN0eWxlOiB7bWFyZ2luVG9wOicxMDBweCcscGFkZGluZ1RvcDonMTAwcHgnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oMSh7c3R5bGU6IHtjb2xvcjonIzFjYTNmZCcsZm9udFdlaWdodDonYm9sZCcsdGV4dEFsaWduOidjZW50ZXInLGZvbnRTaXplOic1NnB4J319LCBcIiBHZW5lcmF0ZSBIaWdoIFF1YWxpdHkgUHJvc3BlY3QgTGlzdHMgXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDEoe3N0eWxlOiB7Y29sb3I6JyMxY2EzZmQnLGZvbnRXZWlnaHQ6JzEwMCcsdGV4dEFsaWduOidjZW50ZXInLGZvbnRTaXplOic1NnB4J319LCBcIiBBY2NlbGVyYXRlIFNhbGVzIFwiKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiI3NpZ251cFwiLCBjbGFzc05hbWU6IFwiYnRuLWxnIGJ0bi1zdWNjZXNzIGJ0biBzdGFydC10cmlhbFwifSwgXCJTdGFydCBZb3VyIEZyZWUgVHJpYWwgVG9kYXlcIiksIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsIHBhbmVsLWRlZmF1bHRcIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtaGVhZGluZ1wifSwgXCLCoFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtYm9keVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5mb3JtKHtvblN1Ym1pdDogdGhpcy5sb2dpbn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3BsYWNlaG9sZGVyOiBcIkVtYWlsXCIsIGlkOiBcImVtYWlsXCIsIHR5cGU6IFwidGV4dFwiLCBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGlucHV0LWxnXCIsIHN0eWxlOiB7Zm9udFdlaWdodDonMTAwJyxmb250U2l6ZTonMjJweCd9fSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3BsYWNlaG9sZGVyOiBcIlBhc3N3b3JkXCIsIHR5cGU6IFwicGFzc3dvcmRcIiwgaWQ6IFwicGFzc3dvcmRcIiwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBpbnB1dC1sZ1wiLCBzdHlsZToge2ZvbnRXZWlnaHQ6JzEwMCcsZm9udFNpemU6JzIycHgnfX0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgb25DbGljazogdGhpcy5sb2dpbiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4tbGdcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsYmFja2dyb3VuZENvbG9yOicjMWNhM2ZkJ319LCBcIkxvZyBJblwiKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtZm9vdGVyXCJ9LCBcIsKgXCIpXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImdyYWRpZW50XCJ9LCBcIiBcIilcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBMYW5kaW5nIFBhZ2VcbiAgbG9naW46IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdsb2dpbicpXG4gICAgZW1haWwgPSAkKCcjZW1haWwnKS52YWwoKVxuICAgIHBhc3N3b3JkID0gJCgnI3Bhc3N3b3JkJykudmFsKClcbiAgICBwID0ge1wiWC1QYXJzZS1BcHBsaWNhdGlvbi1JZFwiOiBcIk44NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkpcIixcbiAgICAgICAgIFwiWC1QYXJzZS1SRVNULUFQSS1LZXlcIjogXCJWTjZFd1Z5Qlp3TzF1cGhzQlBzYXU4dDdKUVJwMDBVTTNLWXNpaVFiXCJ9XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvbG9naW4nLFxuICAgICAgaGVhZGVyczogcCxcbiAgICAgIHR5cGU6J0dFVCcsXG4gICAgICBkYXRhOiB7XG4gICAgICAgICd1c2VybmFtZSc6ZW1haWwsXG4gICAgICAgICdwYXNzd29yZCc6cGFzc3dvcmRcbiAgICAgIH0sXG4gICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlcykge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudFVzZXInLCBKU09OLnN0cmluZ2lmeShyZXMpKVxuICAgICAgICBsb2NhdGlvbi5ocmVmID0gXCIjXCJcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICQoJ2JvZHknKS5jc3Moe292ZXJmbG93OidhdXRvJ30pXG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIlwifSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJiYWNrZ3JvdW5kLWltYWdlXCJ9KSwgXG4gICAgICAgIFJlYWN0LkRPTS5uYXYoe2NsYXNzTmFtZTogXCJ0aGVuYXZiYXIgbmF2YmFyIG5hdmJhci1kZWZhdWx0IG5hdmJhci1maXhlZC10b3BcIiwgcm9sZTogXCJuYXZpZ2F0aW9uXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyLWZsdWlkXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbWcoe2NsYXNzTmFtZTogXCJuZXR3b3JrLWxvZ29cIiwgc3JjOiBcImJ1aWxkL2ltZy9uZXR3b3JrLnBuZ1wifSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJ0aGUtdGl0bGUgdGstZm9jbyBicmFuZCBuYXZiYXItYnJhbmRcIiwgc3R5bGU6IHtmb250V2VpZ2h0OicxMDAnfSwgXG4gICAgICAgICAgICAgICAgaHJlZjogXCIjXCJ9LCBcbiAgICAgICAgICAgICAgXCJDdXN0b21lcm9cIiwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2ZvbnRTaXplOicyMHB4JyxtYXJnaW5MZWZ0OiczMHB4Jyxmb250RmFtaWx5OidPcGVuIFNhbnMnfX0sIFwiU29jaWFsIFByb3NwZWN0aW5nIE9uIFN0ZXJvaWRzIFwiKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcIiNsb2dpblwiLCBjbGFzc05hbWU6IFwiYnRuLWxnIGJ0biBsb2dpbi1idG5cIiwgc3R5bGU6IHtmb250RmFtaWx5Oidwcm94aW1hLW5vdmEnfX0sIFwiTE9HIElOXCIpXG4gICAgICAgICksIFxuXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtNyBjb2wtc20tN1wiLCBzdHlsZToge21hcmdpblRvcDonMTAwcHgnLHBhZGRpbmdUb3A6JzgwcHgnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oMSh7c3R5bGU6IHtjb2xvcjonIzFjYTNmZCcsZm9udFdlaWdodDonMTAwJyxjb2xvcjond2hpdGUnLHRleHRBbGlnbjonY2VudGVyJyxmb250U2l6ZTonMzhweCcsZm9udEZhbWlseTonT3BlbiBTYW5zJyxmb250U2l6ZTonNDBweCd9fSwgXCIgR2VuZXJhdGUgSGlnaCBRdWFsaXR5IFByb3NwZWN0IExpc3RzIFwiKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmgxKHtzdHlsZToge2NvbG9yOicjMWNhM2ZkJyxmb250V2VpZ2h0OicxMDAnLHRleHRBbGlnbjonY2VudGVyJyxjb2xvcjond2hpdGUnLGZvbnRTaXplOic0NnB4Jyxmb250RmFtaWx5OidPcGVuIFNhbnMnLCBmb250U3R5bGU6J2l0YWxpYyd9fSwgXCIgQWNjZWxlcmF0ZSBTYWxlcyBcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcIiNzaWdudXBcIiwgY2xhc3NOYW1lOiBcImJ0bi1sZyBidG4tc3VjY2VzcyBidG4gc3RhcnQtdHJpYWxcIn0sIFwiU3RhcnQgWW91ciBGcmVlIFRyaWFsIFRvZGF5XCIpLCBcblxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0XCIsIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWhlYWRpbmdcIn0sIFwiwqBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZm9ybSh7b25TdWJtaXQ6IHRoaXMubG9naW59LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHtwbGFjZWhvbGRlcjogXCJFbWFpbFwiLCBpZDogXCJlbWFpbFwiLCB0eXBlOiBcInRleHRcIiwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBpbnB1dC1sZ1wiLCBzdHlsZToge2ZvbnRXZWlnaHQ6JzEwMCcsZm9udFNpemU6JzIycHgnfX0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHtwbGFjZWhvbGRlcjogXCJQYXNzd29yZFwiLCB0eXBlOiBcInBhc3N3b3JkXCIsIGlkOiBcInBhc3N3b3JkXCIsIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgaW5wdXQtbGdcIiwgc3R5bGU6IHtmb250V2VpZ2h0OicxMDAnLGZvbnRTaXplOicyMnB4J319KSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIG9uQ2xpY2s6IHRoaXMubG9naW4sIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLWxnXCIsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snLGJhY2tncm91bmRDb2xvcjonIzFjYTNmZCd9fSwgXCJMb2cgSW5cIilcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWZvb3RlclwifSwgXCLCoFwiKVxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJncmFkaWVudFwifSwgXCIgXCIpLCBcblxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTUgY29sLXNtLTVcIiwgaWQ6IFwibmV0d29yay1waWN0dXJlXCIsIFxuICAgICAgICAgICAgIHN0eWxlOiB7aGVpZ2h0OjUwMCxiYWNrZ3JvdW5kSW1hZ2U6XCJ1cmwoJ2J1aWxkL2ltZy9uZXR3b3JrX2ljb25fMS5wbmcnKVwifX1cbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIExvYWRpbmdTcGlubmVyXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwic3Bpbm5lclwiLCBzdHlsZToge21hcmdpblRvcDonMTgwcHgnfX0sIFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInNwaW5uZXItY29udGFpbmVyIGNvbnRhaW5lcjFcIn0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlIGNpcmNsZTFcIn0pLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZSBjaXJjbGUyXCJ9KSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUgY2lyY2xlM1wifSksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlIGNpcmNsZTRcIn0pXG4gICAgICApLCBcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJzcGlubmVyLWNvbnRhaW5lciBjb250YWluZXIyXCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZSBjaXJjbGUxXCJ9KSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUgY2lyY2xlMlwifSksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlIGNpcmNsZTNcIn0pLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZSBjaXJjbGU0XCJ9KVxuICAgICAgKSwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwic3Bpbm5lci1jb250YWluZXIgY29udGFpbmVyM1wifSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUgY2lyY2xlMVwifSksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlIGNpcmNsZTJcIn0pLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZSBjaXJjbGUzXCJ9KSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUgY2lyY2xlNFwifSlcbiAgICAgIClcbiAgICApXG4gICAgKVxuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG50aGVEYXRhID0gcmVxdWlyZSgnLi4vbGliL2RhdGEubWluLmpzJykgXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIFNpZ25VcFxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgJCgnYm9keScpLmNzcyh7b3ZlcmZsb3c6J2hpZGRlbid9KVxuICB9LFxuXG4gIGxvZ2luOiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnbG9naW4nKVxuICAgIGVtYWlsID0gJCgnI2VtYWlsJykudmFsKClcbiAgICBwYXNzd29yZCA9ICQoJyNwYXNzd29yZCcpLnZhbCgpXG4gICAgcCA9IHtcIlgtUGFyc2UtQXBwbGljYXRpb24tSWRcIjogXCJOODVRT2t0ZUVFUWt1WlZKS0F2dDhNVmVzMHNqRzZxTnBFR3FRRlZKXCIsXG4gICAgICAgICBcIlgtUGFyc2UtUkVTVC1BUEktS2V5XCI6IFwiVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYlwifVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2xvZ2luJyxcbiAgICAgIGhlYWRlcnM6IHAsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgZGF0YToge1xuICAgICAgICAndXNlcm5hbWUnOmVtYWlsLFxuICAgICAgICAncGFzc3dvcmQnOnBhc3N3b3JkXG4gICAgICB9LFxuICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1cnJlbnRVc2VyJywgSlNPTi5zdHJpbmdpZnkocmVzKSlcbiAgICAgICAgbG9jYXRpb24uaHJlZiA9IFwiI1wiXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHsgXG4gICAgZGF0YSA9IHRoZURhdGEoKVxuICAgIGltZ3NfMSA9IFtdXG4gICAgaW1nc18yID0gW11cbiAgICBmb3IoaT0wO2kgPCAxMjA7IGkrKykge1xuICAgICAgaW1nc18xLnB1c2goUmVhY3QuRE9NLmltZyh7c3JjOiBkYXRhW2ldLCBjbGFzc05hbWU6IFwicHJvc3BlY3QtaW1nXCJ9KSlcbiAgICB9XG4gICAgZm9yKGk9MTU7aSA8IDMwOyBpKyspIHtcbiAgICAgIGltZ3NfMi5wdXNoKFJlYWN0LkRPTS5pbWcoe3NyYzogZGF0YVtpXSwgY2xhc3NOYW1lOiBcInByb3NwZWN0LWltZ1wifSkpXG4gICAgfVxuXG4gIGNvbnNvbGUubG9nKGRhdGEpXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJzaWdudXBcIn0sIFwiIFwiKSwgXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICBSZWFjdC5ET00uaDEoe2NsYXNzTmFtZTogXCJ0aXRsZVwifSwgXCJDdXN0b21lcm8uXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLmg1KHtjbGFzc05hbWU6IFwidGFnbGluZVwifSwgXCJHZW5lcmF0ZSBoaWdoIHF1YWxpdHkgcHJvc3BlY3QgbGlzdHMuIEFjY2VsZXJhdGUgU2FsZXMuXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwgcGFuZWwtZGVmYXVsdCBsb2dpbi1pbmZvXCIsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZm9ybSh7b25TdWJtaXQ6IHRoaXMubG9naW59LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHtwbGFjZWhvbGRlcjogXCJFbWFpbFwiLCBpZDogXCJlbWFpbFwiLCB0eXBlOiBcInRleHRcIiwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBpbnB1dC1sZ1wiLCBzdHlsZToge2ZvbnRXZWlnaHQ6JzEwMCcsZm9udFNpemU6JzIycHgnfX0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHtwbGFjZWhvbGRlcjogXCJQYXNzd29yZFwiLCB0eXBlOiBcInBhc3N3b3JkXCIsIGlkOiBcInBhc3N3b3JkXCIsIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgaW5wdXQtbGdcIiwgc3R5bGU6IHtmb250V2VpZ2h0OicxMDAnLGZvbnRTaXplOicyMnB4J319KSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIG9uQ2xpY2s6IHRoaXMubG9naW4sIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLWxnXCIsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snLGJhY2tncm91bmRDb2xvcjonIzFjYTNmZCd9fSwgXCJMb2cgSW5cIilcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICksIFxuXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcIlwiLCBzdHlsZToge3Bvc2l0aW9uOidhYnNvbHV0ZScsekluZGV4OictMicsdG9wOjAsbGVmdDowfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJcIiwgc3R5bGU6IHttYXJnaW5MZWZ0OjM0LCBkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICBpbWdzXzEsIFxuICAgICAgICAgIGltZ3NfMlxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy9NZXNzZW5nZXJcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYWxlcnQgYWxlcnQtc3VjY2Vzc1wiLCBcbiAgICAgICAgICAgICAnZGF0YS1hbGVydCc6IFwiYWxlcnRcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHtwb3NpdGlvbjonYWJzb2x1dGUnLFxuICAgICAgICAgICAgICAgICAgICAgdG9wOiAzMSwgXG4gICAgICAgICAgICAgICAgICAgICByaWdodDozMCwgXG4gICAgICAgICAgICAgICAgICAgICBkaXNwbGF5Oidub25lJyxcbiAgICAgICAgICAgICAgICAgICAgIHdpZHRoOjIwMH19LCBcbiAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtjbGFzc05hbWU6IFwiY2xvc2VcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGlkZUFsZXJ0fSwgXCLDl1wiKSwgXG4gICAgICAgICAgICBcIlRlc3RcIlxuICAgICAgICApXG4gICAgKTtcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxudmFyIExvYWRpbmdTcGlubmVyID0gcmVxdWlyZSgnLi9sb2FkaW5nX3NwaW5uZXIuanMubWluLmpzJylcblxudmFyIEpvYiA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0pvYicsXG4gIHN0YXJ0Sm9iOiBmdW5jdGlvbigpIHtcbiAgICAvLyBBZGQgTGlua2VkaW4gTG9jYXRpb25zXG4gICAgLy8gRW1haWwgV2hlbiBDb21wbGV0ZWRcbiAgICAvLyBIYXZlIFJlcG9ydCBGb3IgTnVtYmVyIG9mIFByb2ZpbGVzIEZvdW5kIC8gbnVtYmVyIG9mIGVtYWlscyBmb3VuZCBwZXIgbWluaW5nIGpvYlxuICAgIFxuICAgIG1pbmluZ0pvYiA9IHRoaXMucHJvcHMubWluaW5nSm9iXG4gICAgbWluaW5nSm9iLnN0YXR1cyA9IFwiUnVubmluZ1wiXG4gICAgbWluaW5nSm9iLmxhc3RfcmFuID0gTWF0aC5yb3VuZCgrbmV3IERhdGUoKS8xMDAwKVxuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvTWluaW5nSm9iLycrbWluaW5nSm9iLm9iamVjdElkLFxuICAgICAgdHlwZTonUFVUJyxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5wYXJzZUhlYWRlcnMsXG4gICAgICAvLyBzdGF0dXMgc2hvdWxkIGJlIHdhaXRpbmdcbiAgICAgIGRhdGEgOiBKU09OLnN0cmluZ2lmeSh7J3N0YXR1cyc6J1J1bm5pbmcnLCAnbGFzdF9yYW4nOk1hdGgucm91bmQoK25ldyBEYXRlKCkvMTAwMCkrXCJcIiB9KSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIC8vIG1ha2UgcmVxdWVzdCB0byBoZXJva3UgYXBpXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgLy91cmw6ICdodHRwczovLzAuMC4wLjA6NTAwMC9taW5pbmdfam9iJyAsXG4gICAgICAgICAgdXJsOiAnaHR0cDovL2FnaWxlLXBsYWlucy0yNDMwLmhlcm9rdWFwcC5jb20vbWluaW5nX2pvYicgLFxuICAgICAgICAgIC8vdHlwZTonUE9TVCcsXG4gICAgICAgICAgY3Jvc3NEb21haW46IHRydWUsXG4gICAgICAgICAgZGF0YTp7J2xvY2FsZSc6bWluaW5nSm9iLmxvY2FsZSwgXG4gICAgICAgICAgICAgICAgJ2N1cnJlbnRfdGl0bGUnOm1pbmluZ0pvYi5wcm9zcGVjdF90aXRsZSxcbiAgICAgICAgICAgICAgICAnY3VycmVudF91c2VyX2lkJzpKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikub2JqZWN0SWQsXG4gICAgICAgICAgICAgICAgJ2NvbXBhbnlfaWQnOkpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55Lm9iamVjdElkLFxuICAgICAgICAgICAgICAgICdtaW5pbmdfam9iX2lkJzptaW5pbmdKb2Iub2JqZWN0SWR9LFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpXG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuc2V0U3RhdGUoe21pbmluZ0pvYjogbWluaW5nSm9ifSlcbiAgfSxcblxuICBkZWxldGVKb2I6IGZ1bmN0aW9uKCkge1xuICAgIC8vY29uc29sZS5sb2codGhpcy5zdGF0ZS5taW5pbmdKb2IpXG4gICAgdGhpcy5wcm9wcy5kZWxldGVKb2IodGhpcy5zdGF0ZS5taW5pbmdKb2IpXG4gICAgICAvKlxuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL01pbmluZ0pvYi8nK3RoaXMuc3RhdGUubWluaW5nSm9iLm9iamVjdElkLFxuICAgICAgdHlwZTonREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5wYXJzZUhlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJylcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuICAgICAgKi9cbiAgfSxcblxuICBjYW5jZWxKb2I6IGZ1bmN0aW9uKCkge1xuICAgIG1pbmluZ0pvYiA9IHRoaXMuc3RhdGUubWluaW5nSm9iXG4gICAgbWluaW5nSm9iLnN0YXR1cyA9IFwiXCJcblxuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL01pbmluZ0pvYi8nK21pbmluZ0pvYi5vYmplY3RJZCxcbiAgICAgIHR5cGU6J1BVVCcsXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgZGF0YSA6IEpTT04uc3RyaW5naWZ5KHsnc3RhdHVzJzonJ30pLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpXG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLnNldFN0YXRlKHttaW5pbmdKb2I6IG1pbmluZ0pvYn0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpe1xuICAgIG1pbmluZ0pvYiA9IHRoaXMucHJvcHMubWluaW5nSm9iXG4gICAgYnV0dG9uID0gKG1pbmluZ0pvYi5zdGF0dXMgPT0gXCJcIikgPyBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tc3VjY2Vzc1wiLCBvbkNsaWNrOiB0aGlzLnN0YXJ0Sm9ifSwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2hlY2tcIn0pLCBcIsKgUnVuIFwiKSA6IFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXhzIGJ0bi1kYW5nZXJcIiwgb25DbGljazogdGhpcy5jYW5jZWxKb2J9LCBcIiBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS10aW1lc1wifSksIFwiwqBDYW5jZWwgXCIpXG5cbiAgICBkaXNhYmxlZCA9IFwiXCJcbiAgICBkaXNhYmxlZF90cmFzaCA9IFwiXCJcbiAgICAvKlxuICAgIGRpc2FibGVkID0gKG1pbmluZ0pvYi5zdGF0dXMgPT0gXCJcIikgPyBcImJ0biBidG4teHMgYnRuLXN1Y2Nlc3NcIiA6IFwiYnRuIGJ0bi14cyBidG4tc3VjY2VzcyBkaXNhYmxlZFwiXG4gICAgZGlzYWJsZWRfdHJhc2ggPSAobWluaW5nSm9iLnN0YXR1cyA9PSBcIlwiKSA/IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwiIDogIFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdCBkaXNhYmxlZFwiXG4gICAgYnV0dG9uID0gPGEgaHJlZj1cImphdmFzY3JpcHQ6XCIgY2xhc3NOYW1lPXtkaXNhYmxlZH0gb25DbGljaz17dGhpcy5zdGFydEpvYn0+IDxpIGNsYXNzTmFtZT1cImZhIGZhLWNoZWNrXCIgLz4mbmJzcDtSdW4gPC9hPiBcbiAgICAqL1xuXG4gICAgLy9jb25zb2xlLmxvZyhtaW5pbmdKb2IpXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS50cihudWxsLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFJlYWN0LkRPTS5oNihudWxsLCBtaW5pbmdKb2IucHJvc3BlY3RfdGl0bGUpKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBSZWFjdC5ET00uaDYobnVsbCwgbWluaW5nSm9iLmxvY2FsZSkpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFJlYWN0LkRPTS5oNihudWxsLCAobWluaW5nSm9iLmxhc3RfcmFuID09IFwiXCIgKSA/IFwiLS0tLVwiIDogbW9tZW50LnVuaXgobWluaW5nSm9iLmxhc3RfcmFuKS5mcm9tTm93KCkpKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImJhZGdlXCJ9LCBcbiAgICAgICAgICAgIChtaW5pbmdKb2IucmVzdWx0cyA9PSBcIlwiKSA/IDAgOiBtaW5pbmdKb2IucmVzdWx0c1xuICAgICAgICAgICksIFwiwqBcIiwgIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFwicHJvZmlsZXMgZm91bmRcIilcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHtwYWRkaW5nVG9wOicxMnB4J319LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiAobWluaW5nSm9iLnN0YXR1cyA9PSBcIlwiICkgPyBcImxhYmVsIGxhYmVsLXByaW1hcnlcIiA6IFwibGFiZWwgbGFiZWwtc3VjY2Vzc1wifSwgXG4gICAgICAgICAgICAobWluaW5nSm9iLnN0YXR1cyA9PSBcIlwiKSA/IFwiUmVhZHlcIiA6IG1pbmluZ0pvYi5zdGF0dXNcbiAgICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7cGFkZGluZ1RvcDonMTNweCcsd2lkdGg6JzEwNXB4J319LCBcbiAgICAgICAgICBidXR0b24sIFxuICAgICAgICAgIFwiwqBcIiwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBkaXNhYmxlZF90cmFzaCwgXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmRlbGV0ZUpvYn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS10cmFzaC1vXCJ9KVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIE1pbmluZyBKb2JzXG4gIC8veyhwcm9zcGVjdHMubGVuZ3RoID09IDAgJiYgdGhpcy5zdGF0ZS5sb2FkaW5nID09IGZhbHNlKSA/IDxFbXB0eUNvbXBhbnlQcm9zcGVjdHNQYW5lbCAvPiA6IFwiXCJ9XG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHsgXG4gICAgICBtaW5pbmdKb2JzIDogW10sXG4gICAgICBsb2FkaW5nICAgIDogdHJ1ZVxuICAgIH1cbiAgfSxcblxuICBkZWxldGVKb2I6IGZ1bmN0aW9uKGpvYikge1xuICAgIC8vY29uc29sZS5sb2coam9iLm9iamVjdElkKVxuICAgIHZhciBmaWx0ZXJlZCA9IF8uZmlsdGVyKHRoaXMuc3RhdGUubWluaW5nSm9icywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgIGNvbnNvbGUubG9nKGl0ZW0ub2JqZWN0SWQgIT0gam9iLm9iamVjdElkKVxuICAgICAgIHJldHVybiBpdGVtLm9iamVjdElkICE9IGpvYi5vYmplY3RJZFxuICAgIH0pO1xuICAgIC8vY29uc29sZS5sb2coZmlsdGVyZWQpXG4gICAgdGhpcy5zZXRTdGF0ZSh7bWluaW5nSm9iczogZmlsdGVyZWR9KVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgIC8vY29uc29sZS5sb2coJ3JlbmRlcicpXG4gICAgbWluaW5nSm9icyA9IFtdXG4gICAgZm9yKGk9MDtpPHRoaXMuc3RhdGUubWluaW5nSm9icy5sZW5ndGg7aSsrKXtcbiAgICAgIG1pbmluZ0pvYiA9IHRoaXMuc3RhdGUubWluaW5nSm9ic1tpXVxuICAgICAgbWluaW5nSm9icy5wdXNoKFxuICAgICAgICBKb2Ioe2RlbGV0ZUpvYjogdGhpcy5kZWxldGVKb2IsIG1pbmluZ0pvYjogbWluaW5nSm9ifSlcbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtaW5pbmctam9iLXRvb2xiYXIgY29udGFpbmVyXCIsIHN0eWxlOiB7d2lkdGg6JzEwMCUnfX0sIFxuICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14c1wiLCAnZGF0YS10b2dnbGUnOiBcIm1vZGFsXCIsICdkYXRhLXRhcmdldCc6IFwiLmJzLWV4YW1wbGUtbW9kYWwtc21cIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSksIFwiIMKgIEZpbmQgUHJvc3BlY3RzIEJ5IFRpdGxlIGFuZCBBcmVhXCJcbiAgICAgICAgKSwgXG4gICAgICAgIFwiwqAgwqBcIiwgXG4gICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzIGRpc2FibGVkXCIsICdkYXRhLXRvZ2dsZSc6IFwibW9kYWxcIiwgJ2RhdGEtdGFyZ2V0JzogXCIuYnMtZXhhbXBsZS1tb2RhbC1zbVwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wbHVzXCJ9KSwgXCIgwqAgRmluZCBDb21wYW5pZXMgSGlyaW5nIEZvciBSb2xlc1wiXG4gICAgICAgICksIFxuICAgICAgICBcIsKgIMKgXCIsIFxuICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14cyBkaXNhYmxlZFwiLCAnZGF0YS10b2dnbGUnOiBcIm1vZGFsXCIsICdkYXRhLXRhcmdldCc6IFwiLmJzLWV4YW1wbGUtbW9kYWwtc21cIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSksIFwiIMKgIEZpbmQgQ29tcGFuaWVzIFdobyBKdXN0IFJhaXNlZCBGdW5kaW5nXCJcbiAgICAgICAgKSwgXG4gICAgICAgIFwiwqAgwqBcIiwgXG4gICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzIGRpc2FibGVkXCIsICdkYXRhLXRvZ2dsZSc6IFwibW9kYWxcIiwgJ2RhdGEtdGFyZ2V0JzogXCIuYnMtZXhhbXBsZS1tb2RhbC1zbVwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wbHVzXCJ9KSwgXCIgwqAgRmluZCBDb21wYW5pZXMgQnkgSW5kdXN0eSBBbmQgQXJlYVwiXG4gICAgICAgICksIFxuICAgICAgICBcIsKgIMKgXCIsIFxuICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14cyBkaXNhYmxlZFwiLCAnZGF0YS10b2dnbGUnOiBcIm1vZGFsXCIsICdkYXRhLXRhcmdldCc6IFwiLmJzLWV4YW1wbGUtbW9kYWwtc21cIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSksIFwiIMKgIFByZXNzIENvdmVyYWdlXCJcbiAgICAgICAgKVxuICAgICksIFxuICAgICAgUmVhY3QuRE9NLmRpdih7aWQ6IFwiYXV0b3Njcm9sbFwiLCBzdHlsZToge2hlaWdodDonNDAwcHgnLG92ZXJmbG93OidhdXRvJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLnRhYmxlKHtjbGFzc05hbWU6IFwidGFibGUgdGFibGUtc3RyaXBlZFwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRoZWFkKG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiSm9iIFRpdGxlXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIkNpdHlcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiTGFzdCBSYW5cIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiUmVzdWx0c1wiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJTdGF0dXNcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiwqBcIilcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udGJvZHkobnVsbCwgXG4gICAgICAgICAgICBtaW5pbmdKb2JzXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgICAodGhpcy5zdGF0ZS5sb2FkaW5nKSA/IExvYWRpbmdTcGlubmVyKG51bGwpIDogXCJcIiwgXG4gICAgICAgIGNyZWF0ZUpvYk1vZGFsKHtjcmVhdGVKb2I6IHRoaXMuY3JlYXRlSm9ifSlcbiAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9LFxuICBcbiAgcnVuTWluaW5nSm9iOiBmdW5jdGlvbigpIHtcblxuICB9LFxuXG4gIGNyZWF0ZUpvYjogZnVuY3Rpb24oZGF0YSkge1xuICAgIG1pbmluZ0pvYnMgPSB0aGlzLnN0YXRlLm1pbmluZ0pvYnNcbiAgICBtaW5pbmdKb2JzLnB1c2goZGF0YSlcbiAgICB0aGlzLnNldFN0YXRlKHsgbWluaW5nSm9iczogbWluaW5nSm9icyB9KVxuXG4gICAgJCgnI21pbmluZ0pvYk1vZGFsJykubW9kYWwoJ2hpZGUnKVxuICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnbW9kYWwtb3BlbicpO1xuICAgICQoJy5tb2RhbC1iYWNrZHJvcCcpLnJlbW92ZSgpO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygndGhpcyBkaWQgbW91bnQnKVxuICAgIHRoaXNzID0gdGhpcztcbiAgICBxcnkgPSAnd2hlcmU9e1wiY29tcGFueVwiOicrY29tcGFueSsnfSZjb3VudD0xJm9yZGVyPS1jcmVhdGVkQXQnXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9NaW5pbmdKb2InLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5wYXJzZUhlYWRlcnMsXG4gICAgICBkYXRhOiBxcnksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe21pbmluZ0pvYnMgOiByZXMucmVzdWx0c30pXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtsb2FkaW5nICAgIDogZmFsc2V9KVxuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxufSk7XG5cbnZhciBjcmVhdGVKb2JNb2RhbCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2NyZWF0ZUpvYk1vZGFsJyxcbiAgY3JlYXRlTWluaW5nSm9iOiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnbWluaW5nIGpvYicpXG4gICAgY29uc29sZS5sb2coJCgnI3Byb3NwZWN0VGl0bGUnKS52YWwoKSlcbiAgICBjb25zb2xlLmxvZygkKCcjbG9jYWxlJykudmFsKCkpXG5cbiAgICBkYXRhID0gIHtcbiAgICAgICdwcm9zcGVjdF90aXRsZSc6ICQoJyNwcm9zcGVjdFRpdGxlJykudmFsKCksXG4gICAgICAnbG9jYWxlJyAgICAgICAgOiAkKCcjbG9jYWxlJykudmFsKCksXG4gICAgICAnbGFzdF9yYW4nICAgICAgOiAnJyxcbiAgICAgICdyZXN1bHRzJyAgICAgICA6ICcnLFxuICAgICAgJ3N0YXR1cycgICAgICAgIDogJycsICAgLy9XYWl0aW5nICwgUnVubmluZ1xuICAgIH1cbiAgICAvLyAgdXBkYXRlIGxvY2FsIGpvYnMgc3RhdGVcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL01pbmluZ0pvYicsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5wYXJzZUhlYWRlcnMsXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InKVxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLnByb3BzLmNyZWF0ZUpvYihkYXRhKVxuICAgIFxuICAgIC8vJCgnYnV0dG9uLmNsb3NlJykuY2xpY2soKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwgZmFkZSBicy1leGFtcGxlLW1vZGFsLXNtXCIsIHRhYkluZGV4OiBcIi0xXCIsIHJvbGU6IFwiZGlhbG9nXCIsICdhcmlhLWxhYmVsbGVkYnknOiBcIm15U21hbGxNb2RhbExhYmVsXCIsICdhcmlhLWhpZGRlbic6IFwidHJ1ZVwiLCBpZDogXCJtaW5pbmdKb2JNb2RhbFwiLCBzdHlsZToge3RvcDonMjAwcHgnfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1zbVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1jb250ZW50XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtaGVhZGVyXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJjbG9zZVwiLCAnZGF0YS1kaXNtaXNzJzogXCJtb2RhbFwifSwgUmVhY3QuRE9NLnNwYW4oeydhcmlhLWhpZGRlbic6IFwidHJ1ZVwifSwgXCLDl1wiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwic3Itb25seVwifSwgXCJDbG9zZVwiKSksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1ib2x0XCJ9KSwgXCIgwqBDcmVhdGUgTWluaW5nIEpvYlwiKVxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1ib2R5XCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5mb3JtKHtvblN1Ym1pdDogdGhpcy5jcmVhdGVNaW5pbmdKb2J9LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHtpZDogXCJwcm9zcGVjdFRpdGxlXCIsIHR5cGU6IFwidGV4dFwiLCBwbGFjZWhvbGRlcjogXCJFbnRlciBwcm9zcGVjdCB0aXRsZS4uLlwiLCBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sXCJ9KSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7aWQ6IFwibG9jYWxlXCIsIHR5cGU6IFwidGV4dFwiLCBwbGFjZWhvbGRlcjogXCJFbnRlciBDaXR5IEFyZWEuLi5cIiwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbFwifSksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLmNyZWF0ZU1pbmluZ0pvYiwgcGxhY2Vob2xkZXI6IFwiRW50ZXIgQ2l0eSBBcmVhLi4uXCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3NcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsIHdpZHRoOicxMDAlJ319LCBcIlN0YXJ0IE1pbmluZyFcIilcbiAgICAgICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxudmFyIEVtcHR5TWluaW5nSm9iID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnRW1wdHlNaW5pbmdKb2InLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLW9mZnNldC0zIGNvbC1tZC02XCIsIHN0eWxlOiB7aGVpZ2h0OjQwMH19LCBcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0XCIsIHN0eWxlOiB7bWFyZ2luVG9wOjEwMCxoZWlnaHQ6MjAwfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtYm9keVwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmgxKHtjbGFzc05hbWU6IFwibGVhZFwiLCBzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcIlN0YXJ0IFByb3NwZWN0aW5nIE9uIExpbmtlZGluXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLm9wZW5MaW5rZWRpbldpbmRvdywgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2Vzc1wiLCBzdHlsZToge2JhY2tncm91bmRJbWFnZTogJ2xpbmVhci1ncmFkaWVudCgxODBkZWcsICMwMDk2ZmYgMCUsICMwMDVkZmYgMTAwJSkgIWltcG9ydGFudCcsZGlzcGxheTonYmxvY2snLG1hcmdpblJpZ2h0OidhdXRvJyxtYXJnaW5MZWZ0OidhdXRvJyx3aWR0aDoyMDAsIG1hcmdpblRvcDo1MH19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc2VhcmNoXCJ9KSwgXCIgwqBcIiArICcgJyArXG4gICAgICAgICAgICBcIlNlYXJjaCBmb3IgY29tcGFuaWVzIVwiKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIE1pbmluZ0pvYkNhbGVuZGFyXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlcG9ydHMgOiBbXVxuICAgIH1cbiAgfSxcblxuICBnZXRTaWduYWxSZXBvcnQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXNzc3MgPSB0aGlzO1xuICAgIHByb2ZpbGUgPSBKU09OLnN0cmluZ2lmeSh7cHJvZmlsZTogYXBwQ29uZmlnLnBvaW50ZXIoJ1Byb3NwZWN0UHJvZmlsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm9iamVjdElkKX0pXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvU2lnbmFsUmVwb3J0P29yZGVyPS1jcmVhdGVkQXQnLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGRhdGE6IHt3aGVyZTogcHJvZmlsZX0sXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5wYXJzZUhlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgdGhpc3Nzcy5zZXRTdGF0ZSh7cmVwb3J0czogcmVzLnJlc3VsdHN9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIGdldFJlc3VsdHM6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXNzc3MgPSB0aGlzO1xuICAgIHByb2ZpbGUgPSBKU09OLnN0cmluZ2lmeSh7cHJvZmlsZTogYXBwQ29uZmlnLnBvaW50ZXIoJ1Byb3NwZWN0UHJvZmlsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm9iamVjdElkKX0pXG4gICAgY29uc29sZS5sb2codGhpcy5wcm9wcylcbiAgICB0aGVQcm9maWxlID0gdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Blb3BsZVNpZ25hbCcsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgZGF0YToge3doZXJlOiBwcm9maWxlLCBvcmRlcjogJy1jcmVhdGVkQXQnLGNvdW50OnRydWV9LFxuICAgICAgaGVhZGVyczphcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIC8vIGRpdmlkZSByZXN1bHRzIGludG8gZ3JvdXBzIG9mIDEwMFxuICAgICAgICAvLyBzY2hlZHVsZSB0aGVtIGZvciAxIGludGVydmFsc1xuICAgICAgICBudW1iZXJfb2ZfcmVwb3J0cyA9IE1hdGguY2VpbChyZXMuY291bnQvMTAwKVxuICAgICAgICByZXBvcnRzID0gW11cbiAgICAgICAgZm9yKGk9MDtpPCBudW1iZXJfb2ZfcmVwb3J0cztpKyspe1xuICAgICAgICAgIGNvdW50ID0gKGkgPT0gbnVtYmVyX29mX3JlcG9ydHMtMSkgPyByZXMuY291bnQgJSAxMDAgOiAxMDBcbiAgICAgICAgICBjb25zb2xlLmxvZyh0aGVQcm9maWxlLmRvbmUpXG4gICAgICAgICAgcmVwb3J0cy5wdXNoKHtcbiAgICAgICAgICBzY2hlZHVsZWRBdDogbW9tZW50LnVuaXgodGhlUHJvZmlsZS5kb25lKS5hZGQoaSwnZGF5JykuZnJvbU5vdygpLFxuICAgICAgICAgIHBlb3BsZV9jb3VudDogY291bnQsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzc3NzLnNldFN0YXRlKHtyZXBvcnRzOiByZXBvcnRzfSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5nZXRSZXN1bHRzKClcbiAgfSxcblxuICBjb21wb25lbnRXaWxsUmVjaWV2ZVByb3BzOiBmdW5jdGlvbigpIHtcbiAgICAvL3RoaXMuZ2V0UmVzdWx0cygpXG4gIH0sXG5cbiAgc2V0Q3VycmVudFJlcG9ydDogZnVuY3Rpb24obmV3UmVwb3J0KSB7XG4gICAgY29uc29sZS5sb2coJ0NVUlJFTlQgUkVQT1JUJylcbiAgICBjb25zb2xlLmxvZyhuZXdSZXBvcnQpXG4gICAgdGhpcy5wcm9wcy5zZXRDdXJyZW50UmVwb3J0KG5ld1JlcG9ydClcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJlcG9ydHMgPSBbXVxuICAgIGZvcihpPTA7aTwgdGhpcy5zdGF0ZS5yZXBvcnRzLmxlbmd0aDsgaSsrKVxuICAgICAgcmVwb3J0cy5wdXNoKFNpZ25hbFJlcG9ydFJvdyh7c2V0Q3VycmVudFJlcG9ydDogdGhpcy5zZXRDdXJyZW50UmVwb3J0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRWaWV3OiB0aGlzLnNldEN1cnJlbnRWaWV3LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcG9ydDogdGhpcy5zdGF0ZS5yZXBvcnRzW2ldfSkpXG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lclwiLCBzdHlsZToge2hlaWdodDo0MDAsIG92ZXJmbG93OidhdXRvJyxwYWRkaW5nTGVmdDowLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6MCx3aWR0aDonMTAwJSd9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7aGVpZ2h0OjQ0LGJvcmRlckJvdHRvbTonc29saWQgMXB4IHJnYigyMjEsIDIyMSwgMjIxKSd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg0KHtvbkNsaWNrOiB0aGlzLnJldHVyblRvQ2FsZW5kYXJWaWV3LCBcbiAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDonbGVmdCcsY3Vyc29yOidwb2ludGVyJyxtYXJnaW5Ub3A6Nyxmb250V2VpZ2h0OjIwMCxcbiAgICAgICAgICAgICAgICBwYWRkaW5nTGVmdDoyMCxwYWRkaW5nVG9wOjUsIGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jYWxlbmRhclwiLCBzdHlsZToge21hcmdpblJpZ2h0OjV9fSksIFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGUubmFtZVxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtMTJcIiwgc3R5bGU6IHtwYWRkaW5nTGVmdDowLHBhZGRpbmdSaWdodDowLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OidhdXRvJyxoZWlnaHQ6MzU2fX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7b3ZlcmZsb3c6J2F1dG8nfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRhYmxlKHtjbGFzc05hbWU6IFwidGFibGUgdGFibGUtc3RyaXBlZFwiLCBzdHlsZToge21hcmdpbkJvdHRvbTowfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGhlYWQobnVsbCwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9fSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvY2stb1wifSksIFwiwqBcIiArICcgJyArXG4gICAgICAgICAgICAgICAgICAgIFwiU2NoZWR1bGVkXCJcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInfX0sIFwiUHJvc3BlY3RzXCIpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7d2lkdGg6MTUwLHRleHRBbGlnbjonY2VudGVyJ319KVxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnRib2R5KHtjbGFzc05hbWU6IFwicmVwb3J0c1wifSwgXG4gICAgICAgICAgICAgICAgcmVwb3J0c1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbnZhciBTaWduYWxSZXBvcnRSb3cgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdTaWduYWxSZXBvcnRSb3cnLFxuICByb3dDbGljazogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcm9wcy5zZXRDdXJyZW50UmVwb3J0KHRoaXMucHJvcHMucmVwb3J0KVxuICB9LFxuXG4gIHByb3NwZWN0QWxsU2lnbmFsUmVwb3J0UHJvc3BlY3RzOiBmdW5jdGlvbihlKSB7XG4gICAgLypcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgLy8gVXBkYXRlIFVJXG4gICAgY29uc29sZS5sb2codGhpcy5wcm9wcy5yZXBvcnQub2JqZWN0SWQpXG4gICAgdGhpc3MgPSB0aGlzXG4gICAgJC5hamF4KHtcbiAgICAgIC8vdXJsOidodHRwOi8vbmFtZWxlc3MtcmV0cmVhdC0zNTI1Lmhlcm9rdWFwcC5jb20vcHJvc3BlY3Rfc2lnbmFsX3JlcG9ydCcsXG4gICAgICB1cmw6J2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC9wcm9zcGVjdF9zaWduYWxfcmVwb3J0JyxcbiAgICAgIGRhdGE6IHtzaWduYWxfcmVwb3J0X2lkOiB0aGlzcy5wcm9wcy5yZXBvcnQub2JqZWN0SWQgfSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyBjb25zb2xlLmxvZyhyZXMpIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUubG9nKGVycikgfVxuICAgIH0pXG4gICAgKi9cbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udHIoe29uQ2xpY2s6IHRoaXMucm93Q2xpY2ssIHN0eWxlOiB7Y3Vyc29yOidwb2ludGVyJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjoncmlnaHQnLHBhZGRpbmdUb3A6MTV9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG91ZC1kb3dubG9hZFwiLCBzdHlsZToge2NvbG9yOicjNTU1J319KVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgXG4gICAgICAgICAgICB0aGlzLnByb3BzLnJlcG9ydC5zY2hlZHVsZWRBdFxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1zdWNjZXNzXCJ9LCBcbiAgICAgICAgICAgIHRoaXMucHJvcHMucmVwb3J0LnBlb3BsZV9jb3VudFxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFxuICAgICAgICAgICAgXCLCoCBQZW9wbGUgZm91bmQuXCJcbiAgICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnByb3NwZWN0QWxsU2lnbmFsUmVwb3J0UHJvc3BlY3RzLCBcbiAgICAgICAgICAgICBzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLG1hcmdpblRvcDo1fSwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLXN1Y2Nlc3NcIn0sIFxuICAgICAgICAgICAgXCJQcm9zcGVjdCBBbGxcIlxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gU2lnbmFsTG9hZGluZ1xuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjb3VudDogJ34nLFxuICAgICAgcHJvc3BlY3ROYW1lIDogJ34nLFxuICAgICAgcHJvc3BlY3RUaXRsZSA6ICd+JyxcbiAgICAgIGNvbXBhbnlOYW1lIDogJ34nLFxuICAgIH1cbiAgfSxcblxuICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGhpc3MgPSB0aGlzO1xuICAgIHZhciBwdXNoZXIgPSBuZXcgUHVzaGVyKCcxYTY4YTk2YzhmZGU5MzhmYTc1YScpO1xuICAgIG9iamVjdElkID0gdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZS5vYmplY3RJZFxuICAgIHZhciBjaGFubmVsID0gcHVzaGVyLnN1YnNjcmliZShvYmplY3RJZCk7XG4gICAgY2hhbm5lbC5iaW5kKFwibXktZXZlbnRcIiwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgY29uc29sZS5sb2coZGF0YSlcbiAgICAgIHRoaXNzLnNldFN0YXRlKHtcbiAgICAgICAgY291bnQ6IGRhdGEuY291bnQsXG4gICAgICAgIHByb3NwZWN0TmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBwcm9zcGVjdFRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICBjb21wYW55TmFtZTogZGF0YS5jb21wYW55XG4gICAgICB9KVxuICAgIH0pO1xuXG4gICAgLy8gR2V0IFNpZ25hbCBSZXBvcnQgQ291bnRcbiAgICAvLyBHZXQgTGFzdCBQZW9wbGVTaWduYWwgRm91bmRcbiAgICBxcnkgPSB7IHByb2ZpbGU6IGFwcENvbmZpZy5wb2ludGVyKCdQcm9zcGVjdFByb2ZpbGUnLG9iamVjdElkKSB9XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9TaWduYWxSZXBvcnQnLFxuICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgIGRhdGE6IHsnd2hlcmUnOkpTT04uc3RyaW5naWZ5KHFyeSksb3JkZXI6Jy1jcmVhdGVkQXQnfSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAvL2NvbnNvbGUubG9nKHJlcylcbiAgICAgICAgY291bnQgPSAocmVzLnJlc3VsdHNbMF0pID8gcmVzLnJlc3VsdHNbMF0ucGVvcGxlX2NvdW50IDogMFxuICAgICAgICBcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2NvdW50OiBjb3VudCB9KVxuICAgICAgfSxcbiAgICB9KTtcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Blb3BsZVNpZ25hbCcsXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgZGF0YTogeyd3aGVyZSc6SlNPTi5zdHJpbmdpZnkocXJ5KSxvcmRlcjonLWNyZWF0ZWRBdCd9LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2cocmVzKVxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgcHJvc3BlY3ROYW1lOiAocmVzLnJlc3VsdHNbMF0pID8gcmVzLnJlc3VsdHNbMF0ubGlua190ZXh0IDogXCJcIixcbiAgICAgICAgICBwcm9zcGVjdFRpdGxlOiAocmVzLnJlc3VsdHNbMF0pID8gcmVzLnJlc3VsdHNbMF0udGl0bGUgOiBcIlwiLFxuICAgICAgICAgIGNvbXBhbnlOYW1lOiAocmVzLnJlc3VsdHNbMF0pID8gcmVzLnJlc3VsdHNbMF0uY29tcGFueSA6IFwiXCJcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIFB1c2hlci5sb2cgPSBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgICBpZiAod2luZG93LmNvbnNvbGUgJiYgd2luZG93LmNvbnNvbGUubG9nKSB7XG4gICAgICAgIC8vd2luZG93LmNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmluaXRpYWxpemUoKVxuICB9LFxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBjb3VudDogJ34nLFxuICAgICAgcHJvc3BlY3ROYW1lIDogJ34nLFxuICAgICAgcHJvc3BlY3RUaXRsZSA6ICd+JyxcbiAgICAgIGNvbXBhbnlOYW1lIDogJ34nLFxuICAgIH0pXG4gICAgdGhpcy5pbml0aWFsaXplKClcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIC8vIFNob3cgY29tcGFuaWVzIGZvciBoaXJpbmcgc2lnbmFsc1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2JhY2tncm91bmQ6J2xpbmVhci1ncmFkaWVudCgjZGFlOGZmLCNkYWU4ZmYpJywgYmFja2dyb3VuZEltYWdlOiAncmFkaWFsLWdyYWRpZW50KGNpcmNsZSBhdCBjZW50ZXIgY2VudGVyLCNmZmYsI2RmZjFmZCA5MDBweCknLGhlaWdodDonMTAwJScscGFkZGluZ1RvcDoxMH19LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInNpZ25hbC1jYXJkXCIsIHN0eWxlOiB7XG4gICAgICAgICAgICB3aWR0aDo1MDAsdGV4dEFsaWduOidjZW50ZXInLGRpc3BsYXk6J2Jsb2NrJyxtYXJnaW5SaWdodDonYXV0bycsXG4gICAgICAgICAgICBtYXJnaW5MZWZ0OidhdXRvJyxtYXJnaW5Ub3A6MCxoZWlnaHQ6MjAwXG4gICAgICAgICAgfX0sIFxuXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJsb2FkaW5nLXR3by1iYWxsc1wiLCBzdHlsZToge2hlaWdodDoyMCx3aWR0aDoyMH19LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZG90MVwiLCBzdHlsZToge2NvbG9yOidyZWQnfX0pLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZG90MlwiLCBzdHlsZToge2NvbG9yOidyZWQnfX0pXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJcIiwgc3R5bGU6IHtjb2xvcjonIzFjYTNmZCcsIGZvbnRXZWlnaHQ6J2JvbGQnLG1hcmdpblRvcDotMTAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6LTIwMCwgZm9udFNpemU6MzIsIGZvbnRGYW1pbHk6J1Byb3hpbWEtTm92YSd9fSwgXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmNvdW50ICsgXCIgcGVvcGxlIGZvdW5kLlwiXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDotNDgsbWFyZ2luUmlnaHQ6NTV9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luQm90dG9tOjMsIGZvbnRXZWlnaHQ6J2JvbGQnfX0sIHRoaXMuc3RhdGUucHJvc3BlY3ROYW1lLCBcIiAtIMKgXCIsIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtmb250V2VpZ2h0OjUwMCwgZm9udFN0eWxlOidpdGFsaWMnfX0sIFxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucHJvc3BlY3RUaXRsZSkpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5Ub3A6MCx0ZXh0QWxpZ246J2xlZnQnfX0sIFxuICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNvbXBhbnlOYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9LFxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gUGFuZWwgRm9vdGluZ1xuICBwYWdpbmF0ZVByZXZpb3VzOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzcyA9IHRoaXM7XG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdHM/c2tpcD0nKyh0aGlzcy5wcm9wcy5jdXJyZW50UGFnZS0yKSp0aGlzcy5wcm9wcy5wcm9zcGVjdHNQZXJQYWdlLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGhlYWRlcnM6IHBhcnNlX2hlYWRlcnMsXG4gICAgICBkYXRhOiAnd2hlcmU9e1wiY29tcGFueVwiOicrY29tcGFueSsnLFwiYXJjaGl2ZWRcIjp0cnVlfSZjb3VudD0xJyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIC8vdGhpc3Muc2V0U3RhdGUoe3Byb3NwZWN0czogcmVzLnJlc3VsdHN9KVxuICAgICAgICAvL3RoaXNzLnNldFN0YXRlKHtjdXJyZW50UGFnZTogdGhpcy5wcm9wcy5jdXJyZW50UGFnZSAtIDF9KVxuICAgICAgICB0aGlzcy5wcm9wcy5wYWdpbmF0ZShyZXMucmVzdWx0cywgdGhpc3MucHJvcHMuY3VycmVudFBhZ2UgLSAxKVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cblxuICBwYWdpbmF0ZTogZnVuY3Rpb24oZGlyZWN0aW9uKSB7XG4gICAgcHJvc3BlY3RzUGVyUGFnZSA9IHRoaXMucHJvcHMucHJvc3BlY3RzUGVyUGFnZVxuICAgIGlmKGRpcmVjdGlvbj09J3ByZXZpb3VzJylcbiAgICAgIHNraXAgPSAodGhpcy5wcm9wcy5jdXJyZW50UGFnZSAtIDIpKnByb3NwZWN0c1BlclBhZ2VcbiAgICBlbHNlIGlmKGRpcmVjdGlvbj09XCJmb3J3YXJkXCIpXG4gICAgICBza2lwID0gdGhpcy5wcm9wcy5jdXJyZW50UGFnZSpwcm9zcGVjdHNQZXJQYWdlXG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdD9za2lwPScrc2tpcCxcbiAgICAgIHR5cGU6J0dFVCcsXG4gICAgICBoZWFkZXJzOiBwYXJzZV9oZWFkZXJzLFxuICAgICAgZGF0YTogJ3doZXJlPXtcImNvbXBhbnlcIjonK2NvbXBhbnkrJ30mY291bnQ9MScsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICAvL3RoaXNzLnNldFN0YXRlKHtwcm9zcGVjdHM6IHJlcy5yZXN1bHRzfSlcbiAgICAgICAgLy90aGlzcy5zZXRTdGF0ZSh7Y3VycmVudFBhZ2U6IHRoaXMucHJvcHMuY3VycmVudFBhZ2UgKyAxfSlcbiAgICAgICAgdGhpcy5wcm9wcy5wYWdpbmF0ZShyZXMucmVzdWx0cywgdGhpcy5wcm9wcy5jdXJyZW50UGFnZSArIDEpXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBwYWdpbmF0ZUZvcndhcmQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdHM/c2tpcD0nK3RoaXNzLnByb3BzLmN1cnJlbnRQYWdlKnRoaXNzLnByb3BzLnByb3NwZWN0c1BlclBhZ2UsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgaGVhZGVyczogcGFyc2VfaGVhZGVycyxcbiAgICAgIGRhdGE6ICd3aGVyZT17XCJjb21wYW55XCI6Jytjb21wYW55KycsXCJhcmNoaXZlZFwiOnRydWV9JmNvdW50PTEnLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgLy90aGlzcy5zZXRTdGF0ZSh7cHJvc3BlY3RzOiByZXMucmVzdWx0c30pXG4gICAgICAgIC8vdGhpc3Muc2V0U3RhdGUoe2N1cnJlbnRQYWdlOiB0aGlzcy5wcm9wcy5jdXJyZW50UGFnZSArIDF9KVxuICAgICAgICBjb25zb2xlLmxvZyhcInN1Y2Nlc3NcIilcbiAgICAgICAgdGhpc3MucHJvcHMucGFnaW5hdGUocmVzLnJlc3VsdHMsIHRoaXNzLnByb3BzLmN1cnJlbnRQYWdlICsgMSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgcGFnaW5hdGVGb3J3YXJkID0gdGhpcy5wYWdpbmF0ZUZvcndhcmRcbiAgICBwYWdpbmF0ZVByZXZpb3VzID0gdGhpcy5wYWdpbmF0ZVByZXZpb3VzXG5cbiAgICBNb3VzZXRyYXAuYmluZCgnbCcsIGZ1bmN0aW9uKCkgeyBcbiAgICAgIGNvbnNvbGUubG9nKCduZXcgZm9yd2FyZCcpXG4gICAgICBwYWdpbmF0ZUZvcndhcmQoKVxuICAgIH0pO1xuXG4gICAgTW91c2V0cmFwLmJpbmQoJ2gnLCBmdW5jdGlvbigpIHsgXG4gICAgICBjb25zb2xlLmxvZygnbmV3IGJhY2snKVxuICAgICAgcGFnaW5hdGVQcmV2aW91cygpXG4gICAgfSk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAvLyBTaG91bGQgYmUgaGFuZGxlZCBieSBQYW5sZSBGb290aW5nXG5cblxuICAgIHByZXZpb3VzID0gKHRoaXMucHJvcHMuY3VycmVudFBhZ2UgLSAxKSA/ICcnIDogJ2Rpc2FibGVkJ1xuICAgIGZvcndhcmQgPSAodGhpcy5wcm9wcy5jdXJyZW50UGFnZSA9PSB0aGlzLnByb3BzLnBhZ2VzKSA/ICdkaXNhYmxlZCcgOiAnJ1xuXG4gICAgbG93ZXJMaW1pdCA9ICh0aGlzLnByb3BzLmN1cnJlbnRQYWdlLTEpKnRoaXMucHJvcHMucHJvc3BlY3RzUGVyUGFnZVxuICAgIHVwcGVyTGltaXQgPSB0aGlzLnByb3BzLmN1cnJlbnRQYWdlKnRoaXMucHJvcHMucHJvc3BlY3RzUGVyUGFnZVxuXG4gICAgbG93ZXJMaW1pdCA9IChsb3dlckxpbWl0KSA/IGxvd2VyTGltaXQgOiAxXG4gICAgdXBwZXJMaW1pdCA9ICh1cHBlckxpbWl0ID4gdGhpcy5wcm9wcy5jb3VudCkgPyB0aGlzLnByb3BzLmNvdW50IDogdXBwZXJMaW1pdFxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1mb290aW5nXCIsIFxuICAgICAgICAgICBpZDogXCJuYXZiYXJcIiwgXG4gICAgICAgICAgIHN0eWxlOiB7aGVpZ2h0OiczNXB4JyxwYWRkaW5nOicwcHgnLCBwYWRkaW5nVG9wOic3cHgnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luUmlnaHQ6JzIwcHgnfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICBzdHlsZToge21hcmdpblJpZ2h0Oic1cHgnfSwgXG4gICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnBhZ2luYXRlUHJldmlvdXMsIFxuICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJsdWUtZ3JhZGllbnQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBcIitwcmV2aW91c30sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1mYXN0LWJhY2t3YXJkXCJ9KVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucGFnaW5hdGVQcmV2aW91cywgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcInBhZ2luYXRlLWJhY2stYnRuIGJsdWUtZ3JhZGllbnQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBcIitwcmV2aW91c30sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jaGV2cm9uLWxlZnRcIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7bWFyZ2luTGVmdDo1LCBtYXJnaW5SaWdodDo1LGRpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6MTE1LCB0ZXh0QWxpZ246J2NlbnRlcid9fSwgXG4gICAgICAgICAgICBsb3dlckxpbWl0KycgLSAnK3VwcGVyTGltaXQrJyBvZiAnK3RoaXMucHJvcHMuY291bnRcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnBhZ2luYXRlRm9yd2FyZCwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcInBhZ2luYXRlLWZvcndhcmQtYnRuIGJsdWUtZ3JhZGllbnQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBcIitmb3J3YXJkfSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZXZyb24tcmlnaHRcIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHttYXJnaW5MZWZ0Oic1cHgnfSwgXG4gICAgICAgICAgICAgb25DbGljazogdGhpcy5wYWdpbmF0ZUZvcndhcmQsIFxuICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJibHVlLWdyYWRpZW50IGJ0biBidG4tcHJpbWFyeSBidG4teHMgXCIrZm9yd2FyZH0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1mYXN0LWZvcndhcmRcIn0pKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gU2lnbmFsQ2FyZFxuICBwcm9zcGVjdFBlcnNvbjogZnVuY3Rpb24oKSB7XG4gICAgLy8gQWRkIFRvIFNpZ25hbCBMaXN0XG4gICAgLy8gQWRkIENvbXBhbnlcbiAgICAvLyBBZGQgUHJvc3BlY3RcbiAgICBwZXJzb24gPSB0aGlzLnByb3BzLnBlcnNvblxuICAgIHBlcnNvbklkID0gcGVyc29uLm9iamVjdElkXG4gICAgY29tcGFueSA9IHRoaXMucHJvcHMucGVyc29uLmNvbXBhbnlcbiAgICBjb21wYW55SWQgPSBjb21wYW55Lm9iamVjdElkXG4gICAgcGVyc29uLnNpZ25hbElkID0gcGVyc29uLnNpZ25hbElkXG4gICAgY29tcGFueS5zaWduYWxJZCA9IGNvbXBhbnkub2JqZWN0SWRcbiAgICBwID0gcGVyc29uOyBjID0gY29tcGFueTtcbiAgICBkZWxldGUgcC5vYmplY3RJZDsgZGVsZXRlIGMub2JqZWN0SWQ7XG4gICAgZGVsZXRlIHAuY2xhc3NOYW1lOyBkZWxldGUgYy5jbGFzc05hbWU7XG4gICAgZGVsZXRlIHAuX190eXBlOyBkZWxldGUgYy5fX3R5cGU7XG4gICAgZGVsZXRlIHAuY3JlYXRlZEF0OyBkZWxldGUgYy5jcmVhdGVkQXQ7XG4gICAgZGVsZXRlIHAudXBkYXRlZEF0OyBkZWxldGUgYy51cGRhdGVkQXQ7XG4gICAgcC5jb21wYW55U2lnbmFsID0gcC5jb21wYW55XG4gICAgZGVsZXRlIHAuY29tcGFueVxuXG4gICAgcC5saW5rZWRpbl91cmwgPSBwLnVybFxuICAgIHAuY29tcGFueSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55XG4gICAgcC5hcmNoaXZlZCA9IHRydWVcbiAgICBwLmxvYWRpbmcgPSB0cnVlXG4gICAgcC5jaXR5ID0gcC50aXRsZS5zcGxpdCgnLScpWzBdXG4gICAgcC5wb3MgPSBwLnRpdGxlLnNwbGl0KCctJykuc2xpY2UoLTEpWzBdLnNwbGl0KCcgYXQgJylbMF1cbiAgICBwLmNvbXBhbnlfbmFtZSA9IHAudGl0bGUuc3BsaXQoJy0nKS5zbGljZSgtMSlbMF0uc3BsaXQoJyBhdCAnKS5zbGljZSgtMSlbMF0gXG4gICAgbmFtZSA9IHAubGlua190ZXh0LnNwbGl0KCd8JylbMF1cbiAgICBuYW1lID0gbmFtZS5zcGxpdCgnLScpWzBdXG4gICAgcC5uYW1lID0gbmFtZVxuICAgIHAud2Vic2l0ZVVybCA9IGNvbXBhbnkud2Vic2l0ZVVybFxuICAgIC8vIEF1dG9tYXRpY2FsbHkgQWRkIFRvIFRoZSBTaWduYWwgTGlzdCBJdCBCZWxvbmdzIFRvXG4gICAgXG4gICAgY29uc29sZS5sb2codGhpcy5wcm9wcy5wcm9maWxlKVxuICAgIHAubGlzdHMgPSBbeydfX3R5cGUnOidQb2ludGVyJywnY2xhc3NOYW1lJzonUHJvc3BlY3RMaXN0Jywnb2JqZWN0SWQnOnRoaXMucHJvcHMucHJvZmlsZS5wcm9zcGVjdF9saXN0Lm9iamVjdElkfV0gXG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0cycsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KHApLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Blb3BsZVNpZ25hbC8nK3BlcnNvbklkLFxuICAgICAgICAgIHR5cGU6J1BVVCcsXG4gICAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7cHJvc3BlY3RJZDogcmVzLm9iamVjdElkLCBwcm9zcGVjdGVkX29uOiBEYXRlLm5vdygpLzEwMDB9KSxcbiAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlcykgeyBjb25zb2xlLmxvZyhyZXMpIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkgeyB9XG4gICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgfVxuICAgIH0pXG5cbiAgICAvL0NyZWF0ZSBDb21wYW55IFByb3NwZWN0IHdpdGggUG9pbnRlciB0byBDb21wYW55U2lnbmFsXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Db21wYW55UHJvc3BlY3RzJyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoYyksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgLy9VcGRhdGUgQ29tcGFueSBTaWduYWwgV2l0aCBQb2ludGVyIHRvIENvbXBhbnkgUHJvc3BlY3QgYW5kIGRhdGUgcHJvc3BlY3RlZFxuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvQ29tcGFueVNpZ25hbC8nK2NvbXBhbnlJZCxcbiAgICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe3Byb3NwZWN0SWQ6IHJlcy5vYmplY3RJZCwgcHJvc3BlY3RlZF9vbjogRGF0ZS5ub3coKS8xMDAwfSksXG4gICAgICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpIHsgY29uc29sZS5sb2cocmVzKSB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgfVxuICAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IH1cbiAgICB9KVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcGVyc29uID0gdGhpcy5wcm9wcy5wZXJzb25cbiAgICBzaWduYWwgPSAocGVyc29uLnNpZ25hbHMpID8gcGVyc29uLnNpZ25hbHNbMF0gOiB7fVxuICAgIFxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwgcGFuZWwtZGVmYXVsdCBzaWduYWwtY2FyZFwifSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1ib2R5XCIsIHN0eWxlOiB7cGFkZGluZ0xlZnQ6MjUsIHBhZGRpbmdSaWdodDoyNX19LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDQobnVsbCwgXG4gICAgICAgICAgICBwZXJzb24udGl0bGVcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonMTAwJSd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHsgZmxvYXQ6J2xlZnQnLG1heFdpZHRoOiAnNjAlJywgd2hpdGVTcGFjZTogJ25vd3JhcCcsXG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLCB0ZXh0T3ZlcmZsb3c6ICdlbGxpcHNpcyd9fSwgXG4gICAgICAgICAgICAgIHBlcnNvbi5saW5rX3RleHQpXG4gICAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcInNpZ25hbC1zdHVmZlwiLCBcbiAgICAgICAgICAgIHN0eWxlOiAoXy5pc0VxdWFsKHNpZ25hbCwge30pKSA/IHtkaXNwbGF5Oidub25lJ30gOiB7ZGlzcGxheTonYmxvY2snfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBcIiBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1idWlsZGluZ1wifSksIFxuICAgICAgICAgICAgXCLCoCBcIiwgc2lnbmFsLmNvbXBhbnkpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbWFwLW1hcmtlclwifSksIFxuICAgICAgICAgICAgXCLCoCBcIiwgc2lnbmFsLmxvY2F0aW9uKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIFwiIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXN1aXRjYXNlXCJ9KSwgXG4gICAgICAgICAgICBcIsKgXCIsIHNpZ25hbC5qb2JfdGl0bGUsIFwiIFwiKVxuICAgICAgICApLCBcblxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3NcIiwgXG4gICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnByb3NwZWN0UGVyc29uLCBcbiAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6MTUsIGZvbnRXZWlnaHQ6J2JvbGQnLHdpZHRoOicxMDAlJ319LCBcbiAgICAgICAgICAgIFwiUHJvc3BlY3QgVGhpcyBQZXJzb25cIilcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgJCgnYm9keScpLmNzcyh7b3ZlcmZsb3c6J2hpZGRlbid9KVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYmFja2dyb3VuZC1pbWFnZVwifSksIFxuICAgICAgICBSZWFjdC5ET00ubmF2KHtjbGFzc05hbWU6IFwidGhlbmF2YmFyIG5hdmJhciBuYXZiYXItZGVmYXVsdCBuYXZiYXItZml4ZWQtdG9wXCIsIHJvbGU6IFwibmF2aWdhdGlvblwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lci1mbHVpZFwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcInRoZS10aXRsZSB0ay1mb2NvIGJyYW5kIG5hdmJhci1icmFuZFwiLCBzdHlsZToge2ZvbnRXZWlnaHQ6JzEwMCd9LCBcbiAgICAgICAgICAgICAgICBocmVmOiBcIiNcIn0sIFxuICAgICAgICAgICAgICBcIkN1c3RvbWVyb1wiLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7Zm9udFNpemU6JzIycHgnLG1hcmdpbkxlZnQ6JzMwcHgnfX0sIFwiU3VwZXJjaGFyZ2UgeW91ciBzYWxlcyEgXCIpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgICBQcmljaW5nVGFibGVzKG51bGwpLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImdyYWRpZW50XCJ9LCBcIiBcIilcbiAgICAgIClcbiAgICApXG4gICAgLypcbiAgICAgICAgICAgICAgPGEgaHJlZj1cIiNzaWdudXBcIiBjbGFzc05hbWU9XCJidG4gYnRuLXN1Y2Nlc3MgYnRuLWxnXCIgc3R5bGU9e3tkaXNwbGF5OidibG9jaycsYmFja2dyb3VuZENvbG9yOicjMWNhM2ZkJyxmbG9hdDoncmlnaHQnLG1hcmdpblRvcDonMTNweCcgfX0+TG9nIEluPC9hPlxuICAgICovXG4gIH1cbn0pO1xuXG52YXIgUHJpY2luZ1RhYmxlcyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1ByaWNpbmdUYWJsZXMnLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb250YWluZXJcIiwgc3R5bGU6IHttYXJnaW5Ub3A6MTUwfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicm93IGZsYXRcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1sZy0zIGNvbC1tZC0zIGNvbC14cy02XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJzaWduYWwtY2FyZCBwbGFuIHBsYW4yXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwicGxhbi1uYW1lXCJ9LCBcIiBTdGFydHVwIFwiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcInBsYW4tcHJpY2VcIn0sIFxuICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oMSh7c3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJyxjb2xvcjonIzAyOTRmNSd9fSwgXCIkNDk5wqBcIiwgUmVhY3QuRE9NLnNtYWxsKG51bGwsIFwiLyBtb250aFwiKSlcbiAgICAgICAgICAgICAgICAgICAgKSwgXG5cbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsLCBcIlVwIHRvIDEwMDAgRW1haWwgQ3JlZGl0c1wiKSwgXCIgXCIpLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsLCBcIlVwIHRvIDEwIFRlYW0gTWVtYmVyc1wiKSksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtzdHlsZToge3BhZGRpbmc6MH19LCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsKSwgXCIgSW5jbHVkZXM6IFwiKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgJ0VtYWlscyAmIFBob25lIE51bWJlcnMnKSksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uc3Ryb25nKG51bGwsIFwiUXVpY2sgU3RhcnQgUGFja2FnZVwiKSksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uc3Ryb25nKG51bGwsIFwiU2lnbmFsc1wiKSksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwiXCIsIHN0eWxlOiB7cGFkZGluZ0JvdHRvbTowfX0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCIjXCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgYnRuLW1kIGNvb2wtYnRuXCJ9LCBcIlNpZ24gVXBcIilcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICApXG4gICAgICAgICApLCBcblxuICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1sZy0zIGNvbC1tZC0zIGNvbC14cy02XCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcInNpZ25hbC1jYXJkIHBsYW4gcGxhbjMgZmVhdHVyZWRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcInBsYW4tbmFtZVwifSwgXCIgR3Jvd3RoIFwiKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwicGxhbi1wcmljZVwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDEoe3N0eWxlOiB7Zm9udFdlaWdodDonYm9sZCcsY29sb3I6JyMwMjk0ZjUnfX0sIFwiJDEyOTnCoFwiLCBSZWFjdC5ET00uc21hbGwobnVsbCwgXCIvIG1vbnRoXCIpKVxuICAgICAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgXCJVcCB0byAyNTAwIEVtYWlsIENyZWRpdHNcIiksIFwiIFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgXCJVcCB0byAyNSBUZWFtIE1lbWJlcnNcIikpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHtwYWRkaW5nOjB9fSwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCksIFwiIEluY2x1ZGVzOiBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uc3Ryb25nKG51bGwsIFwiQWxsIFN0YXJ0dXAgRmVhdHVyZXMgXCIpKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkoe3N0eWxlOiB7cGFkZGluZzowfX0sIFwiIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgXCJCdWxrIFNhbGVzZm9yY2UgSW50ZWdyYXRpb25cIikpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsLCBcIk1pbmluZyBKb2JzXCIpKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJcIiwgc3R5bGU6IHtwYWRkaW5nQm90dG9tOjB9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcIiNcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4tbWQgY29vbC1idG5cIn0sIFwiU2lnbiBVcFwiKVxuICAgICAgICAgICAgKVxuICAgICAgICAgKVxuICAgICApLCBcblxuICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLWxnLTMgY29sLW1kLTMgY29sLXhzLTZcIn0sIFxuICAgICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJzaWduYWwtY2FyZCBwbGFuIHBsYW40XCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcInBsYW4tbmFtZVwifSwgXCIgUHJlbWl1bSBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwicGxhbi1wcmljZVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5oMSh7c3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJyxjb2xvcjonIzAyOTRmNSd9fSwgXCIkMjk5OcKgXCIsIFJlYWN0LkRPTS5zbWFsbChudWxsLCBcIi8gbW9udGhcIikpXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsLCBcIlVwIHRvIDc1MDAgRW1haWwgQ3JlZGl0c1wiKSwgXCIgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsLCBcIlVwIHRvIDUwIFRlYW0gTWVtYmVyc1wiKSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtzdHlsZToge3BhZGRpbmc6MH19LCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsKSwgXCIgSW5jbHVkZXM6IFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgXCJBbGwgR3Jvd3RoIEZlYXR1cmVzIFwiKSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtzdHlsZToge3BhZGRpbmc6MH19LCBcIiBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wbHVzXCJ9KSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uc3Ryb25nKG51bGwsIFwiRGVkaWNhdGVkIEhhcHBpbmVzcyBPZmZpY2VyXCIpKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgXCJJbXByb3ZlZCB0ZXJyaXRvcnkgcGxhbm5pbmdcIikpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcIlwiLCBzdHlsZToge3BhZGRpbmdCb3R0b206MH19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiI1wiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi1tZCBjb29sLWJ0blwifSwgXCJTaWduIFVwXCIpXG4gICAgICAgICAgICApXG4gICAgICAgICApXG4gICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLWxnLTMgY29sLW1kLTMgY29sLXhzLTZcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcInNpZ25hbC1jYXJkIHBsYW4gcGxhbjFcIn0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJwbGFuLW5hbWVcIn0sIFwiIEVudGVycHJpc2UgXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwiXCJ9LCBcIiBcIiksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCksIFwiIFwiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsKSwgXCIgXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtzdHlsZToge2ZvbnRTaXplOjIyfX0sIFwiIFwiLCBSZWFjdC5ET00uc3Ryb25nKG51bGwsIFwiQ29udGFjdCBVc1wiKSwgXCIgXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uc3Ryb25nKG51bGwpLCBcIiBcIiksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCksIFwiICBcIilcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG5cbilcblxuKVxuICAgICAgKVxuICAgICk7XG4gIH0sXG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG4vL1RPRE8gLSBhYnN0cmFjdCBsaXN0c1xudmFyIFNpZGVNZW51UHJvc3BlY3RzID0gcmVxdWlyZSgnLi9zaWRlX21lbnVfdXNlcl9wcm9zcGVjdHMuanMubWluLmpzJyk7XG5cbnZhciBVc2VyUHJvc3BlY3QgPSByZXF1aXJlKCcuL3VzZXJfcHJvc3BlY3QuanMubWluLmpzJyk7XG52YXIgVXNlclByb3NwZWN0SGVhZGVyID0gcmVxdWlyZSgnLi91c2VyX3Byb3NwZWN0X2hlYWRlci5qcy5taW4uanMnKTtcbnZhciBTaWRlTWVudUxpc3RPcHRpb24gPSByZXF1aXJlKCcuL3VzZXJfc2lkZV9tZW51X2xpc3QuanMubWluLmpzJyk7XG52YXIgTG9hZGluZ1NwaW5uZXIgPSByZXF1aXJlKCcuL2xvYWRpbmdfc3Bpbm5lci5qcy5taW4uanMnKVxudmFyIFBhbmVsRm9vdGluZyA9IHJlcXVpcmUoJy4vcGFuZWxfZm9vdGluZy5qcy5taW4uanMnKVxudmFyIE1lc3NlbmdlciA9IHJlcXVpcmUoJy4vbWVzc2VuZ2VyLmpzLm1pbi5qcycpXG5cbnZhciBEZWxldGVMaXN0TW9kYWwgPSByZXF1aXJlKCcuL2RlbGV0ZV9saXN0X21vZGFsLmpzLm1pbi5qcycpXG52YXIgUmVuYW1lTGlzdE1vZGFsID0gcmVxdWlyZSgnLi9yZW5hbWVfbGlzdF9tb2RhbC5qcy5taW4uanMnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7ICBwcm9zcGVjdHMgICA6IFtdLFxuICAgICAgICAgICAgICBjdXJyZW50UGFnZSA6IDEsXG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogJ1Byb3NwZWN0JyxcbiAgICAgICAgICAgICAgbGlzdENsYXNzTmFtZTogJ1Byb3NwZWN0TGlzdCcsXG4gICAgICAgICAgICAgIHBhZ2VzICAgICAgIDogMSxcbiAgICAgICAgICAgICAgY3VycmVudExpc3QgOiAnQWxsJyxcbiAgICAgICAgICAgICAgY3VycmVudExpc3RPYmplY3RJZCA6ICcnLFxuICAgICAgICAgICAgICBsb2FkaW5nOiB0cnVlLFxuICAgICAgICAgICAgICBwcm9zcGVjdHNQZXJQYWdlOiA1MCxcbiAgICAgICAgICAgICAgbGlzdHMgOiBbXSxcbiAgICAgICAgICAgICAgbWFzdGVyQ2hlY2tib3hDaGVja2VkOiBmYWxzZSxcbiAgICAgICAgICAgICAga2V5Ym9hcmRBY3RpdmVQcm9zcGVjdDogMCwgLy9maXJzdFxuICAgICAgICAgICAgICBzZWxlY3RlZFByb3NwZWN0czogW10sXG4gICAgICAgICAgICAgIHRvdGFsQ291bnQgIDogXCJ+XCIsIFxuICAgICAgICAgICAgICBjb3VudCAgICAgICA6IFwiflwiLCB9XG4gIH0sXG5cbiAgY3JlYXRlTGlzdDogZnVuY3Rpb24oZGF0YSkge1xuICAgIGxpc3RzID0gdGhpcy5zdGF0ZS5saXN0c1xuICAgIGxpc3RzLnB1c2goZGF0YSlcbiAgICB0aGlzLnNldFN0YXRlKHsgbGlzdHM6IGxpc3RzIH0pXG4gIH0sXG5cbiAgcmVuYW1lTGlzdDogZnVuY3Rpb24obmV3TGlzdE5hbWUpIHtcbiAgICBwYXJzZUhlYWRlcnMgPSB7XG4gICAgICAnWC1QYXJzZS1BcHBsaWNhdGlvbi1JZCcgIDogJ044NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkonLCBcbiAgICAgICdYLVBhcnNlLVJFU1QtQVBJLUtleScgICAgOiAnVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYicsXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfVxuICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZClcbiAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLmN1cnJlbnRMaXN0KVxuICAgIGNvbnNvbGUubG9nKG5ld0xpc3ROYW1lKVxuXG4gICAgLy8gVXBkYXRlIExvY2FsIFN0YXRlXG4gICAgdGhpc3MgPSB0aGlzO1xuICAgIHZhciBmaWx0ZXJlZCA9IF8uZmlsdGVyKHRoaXMuc3RhdGUubGlzdHMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgIGlmKGl0ZW0ubmFtZSA9PSB0aGlzcy5zdGF0ZS5jdXJyZW50TGlzdCl7XG4gICAgICAgIGl0ZW0ubmFtZSA9IG5ld0xpc3ROYW1lXG4gICAgICAgIHJldHVybiBpdGVtXG4gICAgICB9XG4gICAgICByZXR1cm4gaXRlbVxuICAgIH0pO1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7bGlzdHMgOiBmaWx0ZXJlZH0pXG4gICAgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudExpc3Q6IG5ld0xpc3ROYW1lfSlcblxuICAgICQoJy5tb2RhbCcpLmNsaWNrKClcbiAgICAkKCcjbmV3TGlzdE5hbWUnKS52YWwoJycpXG4gICAgJCgnLm1vZGFsLWJhY2tkcm9wJykuY2xpY2soKVxuXG4gICAgLy8gUGVyc2lzdCAvIEFqYXhcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0TGlzdC8nK3RoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZCxcbiAgICAgIGhlYWRlcnM6IHBhcnNlSGVhZGVycyxcbiAgICAgIHR5cGU6J1BVVCcsXG4gICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KHsnbmFtZSc6bmV3TGlzdE5hbWV9KSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgZGVsZXRlTGlzdDogZnVuY3Rpb24oKSB7XG4gICAgLy8gVE9ETyBcbiAgICAvLyBHZXQgQWxsIE1lbWJlcnMgT2YgVGhpcyBMaXN0XG4gICAgLy8gUmVtb3ZlIEZyb20gTGlzdCBBcnJheVxuICAgIHBhcnNlSGVhZGVycyA9IHtcbiAgICAgICdYLVBhcnNlLUFwcGxpY2F0aW9uLUlkJyAgOiAnTjg1UU9rdGVFRVFrdVpWSktBdnQ4TVZlczBzakc2cU5wRUdxUUZWSicsIFxuICAgICAgJ1gtUGFyc2UtUkVTVC1BUEktS2V5JyAgICA6ICdWTjZFd1Z5Qlp3TzF1cGhzQlBzYXU4dDdKUVJwMDBVTTNLWXNpaVFiJyxcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9XG4gICAgXG4gICAgdmFyIGZpbHRlcmVkID0gXy5maWx0ZXIodGhpcy5zdGF0ZS5saXN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgaWYoaXRlbS5vYmplY3RJZCA9PSB0aGlzcy5zdGF0ZS5jdXJyZW50TGlzdE9iamVjdElkKVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHtsaXN0czogZmlsdGVyZWR9KVxuICAgIHRoaXMuc2V0U3RhdGUoe2N1cnJlbnRMaXN0OiAnQWxsJ30pXG4gICAgdGhpcy5jaGFuZ2VMaXN0KCdBbGwnLCAnJylcblxuICAgIC8vIFJlbW92ZVxuICAgICQoJy5tb2RhbCcpLmNsaWNrKClcbiAgICAkKCcjbmV3TGlzdE5hbWUnKS52YWwoJycpXG4gICAgJCgnLm1vZGFsLWJhY2tkcm9wJykuY2xpY2soKVxuXG4gICAgLy8gUGVyc2lzdCAvIEFqYXhcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0TGlzdC8nK3RoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZCxcbiAgICAgIGhlYWRlcnM6IHBhcnNlSGVhZGVycyxcbiAgICAgIHR5cGU6J0RFTEVURScsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIGNoYW5nZUxpc3Q6IGZ1bmN0aW9uKG5ld0xpc3ROYW1lLG9iamVjdElkKSB7XG4gICAgLy8gYWRkIG92ZXJsYXkgbG9hZGluZ1xuICAgIC8vY29uc29sZS5sb2cobmV3TGlzdE5hbWUpXG4gICAgLy9jb25zb2xlLmxvZyhvYmplY3RJZClcblxuICAgIGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cyA9IEpTT04uc3RyaW5naWZ5KFtdKVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudExpc3QgOiBuZXdMaXN0TmFtZX0pXG4gICAgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudExpc3RPYmplY3RJZCA6IG9iamVjdElkfSlcbiAgICB0aGlzLnNldFN0YXRlKHtwcm9zcGVjdHMgIDogW10gICAgfSlcbiAgICB0aGlzLnNldFN0YXRlKHtjb3VudCAgICAgIDogJ34nICAgfSlcbiAgICB0aGlzLnNldFN0YXRlKHtwYWdlcyAgICAgIDogMSAgICAgfSlcbiAgICB0aGlzLnNldFN0YXRlKHtsb2FkaW5nICAgIDogdHJ1ZSAgfSlcbiAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50UGFnZTogMX0pXG4gICAgdGhpcy5zZXRTdGF0ZSh7a2V5Ym9hcmRBY3RpdmVQcm9zcGVjdDogMH0pXG5cbiAgICBjb21wYW55ID0gSlNPTi5zdHJpbmdpZnkoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLmNvbXBhbnkpXG4gICAgcXJ5ID0gJ3doZXJlPXtcImNvbXBhbnlcIjonK2NvbXBhbnkrJyxcImFyY2hpdmVkXCI6dHJ1ZX0mY291bnQ9MSZvcmRlcj0tY3JlYXRlZEF0J1xuICAgIGNvbnNvbGUubG9nKG5ld0xpc3ROYW1lKVxuXG4gICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50TGlzdCAhPSAnQWxsJyB8fCB0eXBlb2Yob2JqZWN0SWQpICE9IFwidW5kZWZpbmVkXCIgJiYgbmV3TGlzdE5hbWUgIT0gJ0FyY2hpdmVkJyl7XG4gICAgICBjdXJyZW50TGlzdCA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgJ29iamVjdElkJyAgOiBvYmplY3RJZCwgXG4gICAgICAgICdfX3R5cGUnICAgIDogJ1BvaW50ZXInLCBcbiAgICAgICAgJ2NsYXNzTmFtZScgOiAnUHJvc3BlY3RMaXN0JyBcbiAgICAgIH0pXG5cbiAgICAgIGNvbXBhbnkgPSBKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikuY29tcGFueSlcbiAgICAgIHFyeSA9ICd3aGVyZT17XCJjb21wYW55XCI6Jytjb21wYW55Kyd9JmNvdW50PTEnXG4gICAgICBxcnkgPSAnd2hlcmU9e1wibGlzdHNcIjonK2N1cnJlbnRMaXN0Kyd9JmNvdW50PTEmb3JkZXI9LWNyZWF0ZWRBdCZpbmNsdWRlPWVtYWlsX2d1ZXNzZXMsZW1haWxfZ3Vlc3Nlcy5wYXR0ZXJuJ1xuICAgIH0gZWxzZSBpZiAobmV3TGlzdE5hbWUgPT0gJ0FyY2hpdmVkJykge1xuICAgICAgcXJ5ID0gJ3doZXJlPXtcImNvbXBhbnlcIjonK2NvbXBhbnkrJyxcImFyY2hpdmVkXCI6ZmFsc2V9JmNvdW50PTEmb3JkZXI9LWNyZWF0ZWRBdCZpbmNsdWRlPWVtYWlsX2d1ZXNzZXMsZW1haWxfZ3Vlc3Nlcy5wYXR0ZXJuJ1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhxcnkpXG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdCcsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgaGVhZGVyczogcGFyc2VfaGVhZGVycyxcbiAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgYWpheFN0YXJ0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3N0YXJ0ZWQgbGlzdCcpXG4gICAgICB9LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgdGhpc3NzLnNldFN0YXRlKHtwcm9zcGVjdHM6IHJlcy5yZXN1bHRzfSlcbiAgICAgICAgdGhpc3NzLnNldFN0YXRlKHtjb3VudDogcmVzLmNvdW50fSlcbiAgICAgICAgLy90aGlzc3Muc2V0U3RhdGUoe3RvdGFsQ291bnQ6IHJlcy5jb3VudH0pXG4gICAgICAgIHRoaXNzcy5zZXRTdGF0ZSh7cGFnZXM6IE1hdGguY2VpbChyZXMuY291bnQvdGhpc3NzLnByb3BzLnByb3NwZWN0c1BlclBhZ2UpfSlcbiAgICAgICAgdGhpc3NzLnNldFN0YXRlKHtsb2FkaW5nOiBmYWxzZX0pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ2Vycm9yJylcbiAgICAgICAgLy9jb25zb2xlLmxvZyhyZXMpXG4gICAgICB9XG4gICAgfSlcbiAgfSxcblxuICBjaGVja2JveEFjdGlvbjogZnVuY3Rpb24oY2hlY2tlZFN0YXRlLCBvYmpJZCkge1xuICAgIC8qIFN0b3JpbmcgQ2hlY2tlZCBQcm9zcGVjdHMgSW4gTG9jYWxTdG9yYWdlIFRvIE1ha2UgaXQgRWFzaWVyIFRvXG4gICAgICogQ29weSBhbmQgTW92ZSBQcm9zcGVjdHMgXG4gICAgICpcbiAgICAgKiBNb3ZlIFRvIFVzZXJfUHJvc3BlY3RzP1xuICAgICAqL1xuICAgIFxuICAgIHNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMpXG4gICAgLy9jb25zb2xlLmxvZyhjaGVja2VkU3RhdGUpXG4gICAgaWYoY2hlY2tlZFN0YXRlKVxuICAgICAgc2VsZWN0ZWRQcm9zcGVjdHMucHVzaChvYmpJZClcbiAgICBlbHNlXG4gICAgICBzZWxlY3RlZFByb3NwZWN0cyA9IF8ucmVqZWN0KHNlbGVjdGVkUHJvc3BlY3RzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oaWQpe3JldHVybiBpZCA9PSBvYmpJZH0pXG5cbiAgICBjb25zb2xlLmxvZyhzZWxlY3RlZFByb3NwZWN0cylcbiAgICBsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnN0cmluZ2lmeShzZWxlY3RlZFByb3NwZWN0cylcbiAgICB0aGlzLnNldFN0YXRlKHtzZWxlY3RlZFByb3NwZWN0czogc2VsZWN0ZWRQcm9zcGVjdHN9KVxuICB9LFxuXG4gIG1hc3RlckNoZWNrYm94Q2hhbmdlZDogZnVuY3Rpb24obWFzdGVyQ2hlY2tib3hWYWx1ZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe21hc3RlckNoZWNrYm94Q2hlY2tlZDogbWFzdGVyQ2hlY2tib3hWYWx1ZX0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnN0YXJ0S2V5Ym9hcmRTaG9ydGN1dHMoKVxuICAgICQoJ2JvZHknKS5jc3Moe292ZXJmbG93OidhdXRvJ30pXG5cbiAgICBwcm9zcGVjdHMgPSBbXVxuICAgIGZvcihpPTA7aTx0aGlzLnN0YXRlLnByb3NwZWN0cy5sZW5ndGg7aSsrKSB7XG4gICAgICB1cmwgPSB0aGlzLnN0YXRlLnByb3NwZWN0c1tpXS51cmxcbiAgICAgIHByb3NwZWN0ID0gdGhpcy5zdGF0ZS5wcm9zcGVjdHNbaV1cblxuICAgICAgaWYodXJsICE9IFwibm8gbGlua2VkaW4gd2Vic2l0ZVwiICYmIHR5cGVvZih1cmwpICE9IFwidW5kZWZpbmVkXCIgJiYgdXJsICE9IFwiXCIpe1xuICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSgnaHR0cDovLycsJycpXG4gICAgICAgIHRoZV9saW5rID0gUmVhY3QuRE9NLmEoe2hyZWY6ICdodHRwOi8vJyt1cmx9LCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWdsb2JlXCJ9KSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoZV9saW5rID0gXCJcIlxuICAgICAgfVxuXG4gICAgICBwcm9maWxlID0gdGhpcy5zdGF0ZS5wcm9zcGVjdHNbaV0ubGlua2VkaW5fdXJsLnJlcGxhY2UoJ2h0dHA6Ly8nLCcnKVxuICAgICAgcHJvZmlsZSA9IHRoaXMuc3RhdGUucHJvc3BlY3RzW2ldLmxpbmtlZGluX3VybC5yZXBsYWNlKCdodHRwczovLycsJycpXG4gICAgICBsaSA9IFJlYWN0LkRPTS5hKHtocmVmOiAnaHR0cDovLycrcHJvZmlsZSwgY2xhc3NOYW1lOiBcImxpbmtlZGluX2xpbmtcIn0sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbGlua2VkaW4tc3F1YXJlXCJ9KSlcblxuICAgICAga2V5Ym9hcmRTZWxlY3RlZCA9IChpID09IHRoaXMuc3RhdGUua2V5Ym9hcmRBY3RpdmVQcm9zcGVjdClcblxuICAgICAgc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cylcbiAgICAgIGFscmVhZHlDaGVja2VkPWZhbHNlXG4gICAgICBmb3IoaWk9MDtpaTwgc2VsZWN0ZWRQcm9zcGVjdHMubGVuZ3RoO2lpKyspXG4gICAgICAgIGlmKHByb3NwZWN0Lm9iamVjdElkID09IHNlbGVjdGVkUHJvc3BlY3RzW2lpXSlcbiAgICAgICAgICBhbHJlYWR5Q2hlY2tlZCA9IHRydWVcblxuICAgICAgICAvL2NvbnNvbGUubG9nKGFscmVhZHlDaGVja2VkKVxuXG4gICAgICBwcm9zcGVjdHMucHVzaChcbiAgICAgICAgVXNlclByb3NwZWN0KHtkZWxldGVQcm9zcGVjdDogdGhpcy5kZWxldGVQcm9zcGVjdCwgXG4gICAgICAgICAgICAgICAgICAgICAgcHJvc3BlY3Q6IHRoaXMuc3RhdGUucHJvc3BlY3RzW2ldLCBcbiAgICAgICAgICAgICAgICAgICAgICBtYXN0ZXJDaGVja2JveENoZWNrZWQ6IHRoaXMuc3RhdGUubWFzdGVyQ2hlY2tib3hDaGVja2VkLCBcbiAgICAgICAgICAgICAgICAgICAgICBrZXk6IHRoaXMuZ2VuZXJhdGVfaWQoKSwgXG4gICAgICAgICAgICAgICAgICAgICAgbGluazogdGhlX2xpbmssIFxuICAgICAgICAgICAgICAgICAgICAgIGtleWJvYXJkU2VsZWN0ZWQ6IGtleWJvYXJkU2VsZWN0ZWQsIFxuICAgICAgICAgICAgICAgICAgICAgIGNoZWNrYm94QWN0aW9uOiB0aGlzLmNoZWNrYm94QWN0aW9uLCBcbiAgICAgICAgICAgICAgICAgICAgICBhbHJlYWR5Q2hlY2tlZDogYWxyZWFkeUNoZWNrZWQsIFxuICAgICAgICAgICAgICAgICAgICAgIGxpOiBsaX0pKVxuICAgIH1cblxuICAgIGxpc3RUeXBlID0gKHRoaXMuc3RhdGUuY3VycmVudExpc3QgPT0gXCJBbGxcIikgPyB7ZGlzcGxheTonbm9uZSd9IDoge2Zsb2F0OidsZWZ0J31cbiAgICBsaXN0TmFtZVN0eWxlID0gKHRoaXMuc3RhdGUuY3VycmVudExpc3QgPT0gXCJBbGxcIikgPyB7ZGlzcGxheTonbm9uZSd9IDoge2Zsb2F0OidsZWZ0JyxkaXNwbGF5OidpbmxpbmUtYmxvY2snLCBmb250V2VpZ2h0OiAyMDAsIG1hcmdpblRvcDogMSwgcGFkZGluZ1JpZ2h0OiAxMCwgbWFyZ2luTGVmdDogLTEwfVxuICAgIGxpc3RCdG4gPSAodGhpcy5zdGF0ZS5jdXJyZW50TGlzdCA9PSBcIkFsbFwiKSA/IHtkaXNwbGF5Oidub25lJ30gOiB7ZmxvYXQ6J2xlZnQnLG1hcmdpbkxlZnQ6NX1cbiAgICBsaXN0T3B0aW9ucyA9ICh0aGlzLnN0YXRlLmN1cnJlbnRMaXN0ID09IFwiQWxsXCIpID8ge2Rpc3BsYXk6J25vbmUnfSA6IHtmbG9hdDoncmlnaHQnfVxuICAgIGNvcHlEcm9wZG93blN0eWxlID0gKHRoaXMuc3RhdGUuY3VycmVudExpc3QgPT0gXCJBbGxcIikgPyB7d2lkdGg6MTE0LCByaWdodDo0fSA6IHt3aWR0aDoxMTQsIHJpZ2h0OjM2fVxuICAgIGN1cnJlbnRMaXN0ID0gdGhpcy5zdGF0ZS5jdXJyZW50TGlzdFxuICAgIHJldHVybiAoXG4gICAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCIsIHN0eWxlOiB7d2lkdGg6JzEwMCUnLHBhZGRpbmc6JzAnLCBiYWNrZ3JvdW5kOiAnbGluZWFyLWdyYWRpZW50KCNkYWU4ZmYsI2RhZThmZiknLCBiYWNrZ3JvdW5kSW1hZ2U6ICdyYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IGNlbnRlciBjZW50ZXIsI2ZmZiwjZGZmMWZkIDkwMHB4KSd9fSwgXG4gICAgICAgIFNpZGVNZW51UHJvc3BlY3RzKHtjdXJyZW50TGlzdDogdGhpcy5zdGF0ZS5jdXJyZW50TGlzdCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogdGhpcy5zdGF0ZS5jb3VudCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbENvdW50OiB0aGlzLnN0YXRlLnRvdGFsQ291bnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTGlzdDogdGhpcy5jaGFuZ2VMaXN0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUxpc3Q6IHRoaXMuY3JlYXRlTGlzdCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0czogdGhpcy5zdGF0ZS5saXN0c30pLCBcblxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLWxkLTEwIGNvbC1tZC0xMCBjb2wtc20tMTAgY29sLXhzLTEwXCIsIHN0eWxlOiB7cGFkZGluZzonMCd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcInByb3NwZWN0RGV0YWlsQnV0dG9uc1wifSwgXG4gICAgICAgICAgICAgICAgTGlzdERldGFpbEJ1dHRvbnMoe1xuICAgICAgICAgICAgICAgICAgcmVuYW1lTGlzdDogdGhpcy5yZW5hbWVMaXN0LCBcbiAgICAgICAgICAgICAgICAgIGRlbGV0ZUxpc3Q6IHRoaXMuZGVsZXRlTGlzdCwgXG4gICAgICAgICAgICAgICAgICBjdXJyZW50TGlzdE5hbWU6IHRoaXMuc3RhdGUuY3VycmVudExpc3QsIFxuICAgICAgICAgICAgICAgICAgY3VycmVudExpc3Q6IHRoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZH0pLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJkcm9wZG93blwiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBsaXN0LW9wdGlvbnNcIiwgXG4gICAgICAgICAgICAgICAgICAgICBpZDogXCJcIiwgXG4gICAgICAgICAgICAgICAgICAgICBzdHlsZTogbGlzdE9wdGlvbnN9LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1iYXJzXCJ9KVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRyb3Bkb3duXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHsnZGF0YS10b2dnbGUnOiBcImRyb3Bkb3duXCIsIFxuICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiY29weVRvTGlzdFwiLCBcbiAgICAgICAgICAgICAgICAgICAgIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZHJvcC10YXJnZXQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBsaXN0LW9wdGlvbnNcIn0sIFxuICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jb3B5XCJ9KSwgXG4gICAgICAgICAgICAgICAgICAgICAgIFwiwqAgQ29weSBUbyBMaXN0IMKgXCIsICBcbiAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2FyZXQtZG93blwifSlcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBDdXJyZW50TGlzdHNUd28oe2xpc3RzOiB0aGlzLnN0YXRlLmxpc3RzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlEcm9wZG93blN0eWxlOiBjb3B5RHJvcGRvd25TdHlsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0QWN0aW9uOiB0aGlzLmNvcHlTZWxlY3RlZFByb3NwZWN0c30pXG4gICAgICAgICAgICAgICAgKSwgXG4gIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJkcm9wZG93blwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7J2RhdGEtdG9nZ2xlJzogXCJkcm9wZG93blwiLCBcbiAgICAgICAgICAgICAgICAgICAgIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgICBpZDogXCJtb3ZlVG9MaXN0XCIsIFxuICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IGxpc3RPcHRpb25zLCBcbiAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgYnRuLXhzIGxpc3Qtb3B0aW9uc1wifSwgXG4gICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXNoYXJlXCJ9KSwgXG4gICAgICAgICAgICAgICAgICAgICBcIsKgIE1vdmUgVG8gTGlzdCDCoFwiLCAgXG4gICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNhcmV0LWRvd25cIn0pXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgQ3VycmVudExpc3RzKHtsaXN0czogdGhpcy5zdGF0ZS5saXN0cywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0QWN0aW9uOiB0aGlzLm1vdmVTZWxlY3RlZFByb3NwZWN0c30pXG4gICAgICAgICAgICAgICAgKSwgXG5cbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7b25DbGljazogdGhpcy5kb3dubG9hZEZpbGUsIFxuICAgICAgICAgICAgICAgICAgIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgaWQ6IFwiZG93bmxvYWRQcm9zcGVjdHNcIiwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImRyb3AtdGFyZ2V0IGJ0biBidG4tcHJpbWFyeSBidG4teHMgbGlzdC1vcHRpb25zXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZG93bmxvYWRcIn0pLCBcIiDCoCBEb3dubG9hZCBDU1YgwqBcIiBcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7b25DbGljazogdGhpcy5kb3dubG9hZEZpbGUsIFxuICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IGxpc3RPcHRpb25zLCBcbiAgICAgICAgICAgICAgICAgICBocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgIGlkOiBcImRvd25sb2FkUHJvc3BlY3RzXCIsIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJkcm9wLXRhcmdldCBidG4gYnRuLXByaW1hcnkgYnRuLXhzIGxpc3Qtb3B0aW9uc1wifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWJ1aWxkaW5nXCJ9KSwgXCIgwqAgR2VuZXJhdGUgQ29tcGFueSBMaXN0IMKgXCIgXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgXG5cbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJhdXRvc2Nyb2xsXCIsIHN0eWxlOiB7aGVpZ2h0Oic0MDBweCcsb3ZlcmZsb3c6J2F1dG8nfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRhYmxlKHtjbGFzc05hbWU6IFwicHJvc3BlY3RzLXRhYmxlIHRhYmxlIHRhYmxlLXN0cmlwZWRcIiwgc3R5bGU6IHttYXJnaW5Cb3R0b206JzBweCd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50aGVhZCh7c3R5bGU6IHtiYWNrZ3JvdW5kQ29sb3I6J3doaXRlJ319LCBcbiAgICAgICAgICAgICAgICBVc2VyUHJvc3BlY3RIZWFkZXIoe21hc3RlckNoZWNrYm94Q2hhbmdlZDogdGhpcy5tYXN0ZXJDaGVja2JveENoYW5nZWR9KVxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnRib2R5KG51bGwsIFxuICAgICAgICAgICAgICAgIHByb3NwZWN0c1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgICh0aGlzLnN0YXRlLmxvYWRpbmcpID8gTG9hZGluZ1NwaW5uZXIobnVsbCkgOiBcIlwiXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApLCBcblxuICAgICAgUGFuZWxGb290aW5nKHtjdXJyZW50UGFnZTogdGhpcy5zdGF0ZS5jdXJyZW50UGFnZSwgXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiB0aGlzLnN0YXRlLmNvdW50LCBcbiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGU6IHRoaXMucGFnaW5hdGUsIFxuICAgICAgICAgICAgICAgICAgICBwcm9zcGVjdHNQZXJQYWdlOiB0aGlzLnN0YXRlLnByb3NwZWN0c1BlclBhZ2UsIFxuICAgICAgICAgICAgICAgICAgICBwYWdlczogdGhpcy5zdGF0ZS5wYWdlc30pLCBcbiAgICAgIE1lc3NlbmdlcihudWxsKVxuICAgIClcbiAgICApO1xuICB9LFxuXG4gIHBhZ2luYXRlOiBmdW5jdGlvbihuZXdQcm9zcGVjdHMsIG5ld1BhZ2UpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHByb3NwZWN0czogbmV3UHJvc3BlY3RzLFxuICAgICAgY3VycmVudFBhZ2U6IG5ld1BhZ2UsXG4gICAgICBrZXlib2FyZEFjdGl2ZVByb3NwZWN0OiAwXG4gICAgfSlcbiAgICB0aGlzLnN0YXJ0S2V5Ym9hcmRTaG9ydGN1dHMoKVxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvc2Nyb2xsJykuc2Nyb2xsVG9wID0gMFxuICB9LFxuXG4gIGRvd25sb2FkRmlsZTogZnVuY3Rpb24oKSB7XG4gICAgcGFyc2VfaGVhZGVycyA9IHtcbiAgICAgICdYLVBhcnNlLUFwcGxpY2F0aW9uLUlkJyAgOiAnTjg1UU9rdGVFRVFrdVpWSktBdnQ4TVZlczBzakc2cU5wRUdxUUZWSicsIFxuICAgICAgJ1gtUGFyc2UtUkVTVC1BUEktS2V5JyAgICA6ICdWTjZFd1Z5Qlp3TzF1cGhzQlBzYXU4dDdKUVJwMDBVTTNLWXNpaVFiJyxcbiAgICB9XG5cbiAgICAvLyBHZXQgTGlzdCBDb3VudFxuICAgIGxpc3QgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAnX190eXBlJyAgIDogICdQb2ludGVyJyxcbiAgICAgICdjbGFzc05hbWUnOiAgJ1Byb3NwZWN0TGlzdCcsXG4gICAgICAnb2JqZWN0SWQnIDogIHRoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZFxuICAgIH0pXG4gICAgY29uc29sZS5sb2cobGlzdClcbiAgICAvLyBBZGQgU3VwcG9ydCBGb3IgTW9yZSB0aGFuIDEwMDBcbiAgICAvLyBudW1fb2ZfcmVxdWVzdHNcbiAgICBsb2NhbFN0b3JhZ2UuZG93bmxvYWRfdG90YWwgPSBNYXRoLmNlaWwodGhpcy5zdGF0ZS5jb3VudC8xMDAwKVxuICAgIGxvY2FsU3RvcmFnZS5kb3dubG9hZHMgICAgICA9IDBcblxuICAgIGlmKHRoaXMuc3RhdGUuY3VycmVudExpc3QgPT0gXCJBbGxcIilcbiAgICAgIHFyeSA9ICd3aGVyZT17XCJjb21wYW55XCI6Jytjb21wYW55Kyd9JmNvdW50PTEnXG4gICAgZWxzZVxuICAgICAgcXJ5ID0gJ3doZXJlPXtcImxpc3RzXCI6JytsaXN0Kyd9JmNvdW50PTEnXG5cbiAgICBmb3IoaT0wO2k8IE1hdGguY2VpbCh0aGlzLnN0YXRlLmNvdW50LzEwMDApOyBpKyspe1xuICAgICAgJC5hamF4KHtcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdD9saW1pdD0xMDAwJnNraXA9JytpLFxuICAgICAgICB0eXBlOidHRVQnLFxuICAgICAgICBoZWFkZXJzOiBwYXJzZV9oZWFkZXJzLFxuICAgICAgICBkb3dubG9hZEZpbGU6ICdkb3dubG9hZF8nK2ksXG4gICAgICAgIGRhdGE6IHFyeSxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgICAvLyBDbGVhbiBSZXN1bHRzXG4gICAgICAgICAgLy8gUmVtb3ZlIENlcnRhaW4gUGFyc2UgQ29sdW1ucyAtIGNyZWF0ZWRfYXQsIHVwZGF0ZWRfYXQsIG9iamVjdElkXG4gICAgICAgICAgLy8gUmVuYW1lIGNyZWF0ZWRBdCBhcyBkYXRlIHByb3NwZWN0ZWRcbiAgICAgICAgICBmb3IoaT0wO2k8IHJlcy5yZXN1bHRzLmxlbmd0aDtpKyspIHtcbiAgICAgICAgICAgIGRlbGV0ZSByZXMucmVzdWx0c1tpXS5jb21wYW55XG4gICAgICAgICAgICBkZWxldGUgcmVzLnJlc3VsdHNbaV0ucG9zXG4gICAgICAgICAgICBkZWxldGUgcmVzLnJlc3VsdHNbaV0udXNlclxuICAgICAgICAgICAgZGVsZXRlIHJlcy5yZXN1bHRzW2ldLm9iamVjdElkXG4gICAgICAgICAgICBkZWxldGUgcmVzLnJlc3VsdHNbaV0uY3JlYXRlZEF0XG4gICAgICAgICAgICBkZWxldGUgcmVzLnJlc3VsdHNbaV0udXBkYXRlZEF0XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQWRkIFJlc3VsdHMgVG8gTG9jYWxTdG9yYWdlXG4gICAgICAgICAgbG9jYWxTdG9yYWdlLmRvd25sb2FkcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmRvd25sb2FkcykgKyAxIFxuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuZG93bmxvYWRGaWxlLCBKU09OLnN0cmluZ2lmeShyZXMucmVzdWx0cykpXG5cbiAgICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgYWxsIGFqYXggcmVxcyBpbiBmb3IgbG9vcCBhcmUgY29tcGxldGVcbiAgICAgICAgICBpZihsb2NhbFN0b3JhZ2UuZG93bmxvYWRzID09IGxvY2FsU3RvcmFnZS5kb3dubG9hZF90b3RhbCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ21hdGNoZWQnKVxuICAgICAgICAgICAgLy8gTWVyZ2UgYWxsIGxvY2FsU3RvcmFnZSByZXN1bHRzXG4gICAgICAgICAgICBwcm9zcGVjdHMgPSBbXVxuICAgICAgICAgICAgZm9yKGlpPTA7aWkgPCBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5kb3dubG9hZF90b3RhbCk7IGlpKyspe1xuICAgICAgICAgICAgICBwcm9zcGVjdHMgPSBwcm9zcGVjdHMuY29uY2F0KEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Rvd25sb2FkXycraWkpKSlcbiAgICAgICAgICAgICAgY29uc29sZS5sb2cocHJvc3BlY3RzKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9zcGVjdHMpXG4gICAgICAgICAgICAvLyBPdXRwdXQgYXMgQ1NWXG4gICAgICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtQYXBhLnVucGFyc2UocHJvc3BlY3RzKV0sIHt0eXBlOiBcInRleHQvcGxhaW47Y2hhcnNldD11dGYtOFwifSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhibG9iKVxuICAgICAgICAgICAgc2F2ZUFzKGJsb2IsIFwicHJvc3BlY3RzLmNzdlwiKTtcbiAgICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBlcnJvcjogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbXBhbnkgPSBKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikuY29tcGFueSlcbiAgICBcblxuICB9LFxuXG4gIHJlbW92ZVNlbGVjdGVkUHJvc3BlY3RzOiBmdW5jdGlvbigpIHtcbiAgICAvLyBJZiBMaXN0IFR5cGUgaXMgQWxsIEFyY2hpdmUgdGhlIHByb3NwZWN0XG4gICAgcGFyc2VIZWFkZXJzID0ge1xuICAgICAgJ1gtUGFyc2UtQXBwbGljYXRpb24tSWQnICA6ICdOODVRT2t0ZUVFUWt1WlZKS0F2dDhNVmVzMHNqRzZxTnBFR3FRRlZKJywgXG4gICAgICAnWC1QYXJzZS1SRVNULUFQSS1LZXknICAgIDogJ1ZONkV3VnlCWndPMXVwaHNCUHNhdTh0N0pRUnAwMFVNM0tZc2lpUWInLFxuICAgICAgXCJDb250ZW50LVR5cGVcIiA6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfVxuXG4gICAgc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cylcbiAgICBiYXRjaERhdGEgPSBbXVxuXG4gICAgZm9yKGk9MDtpPCBzZWxlY3RlZFByb3NwZWN0cy5sZW5ndGg7aSsrKXtcbiAgICAgIGlmKHRoaXMuc3RhdGUuY3VycmVudExpc3QgIT0gJ0FsbCcpe1xuICAgICAgICB0bXAgPSB7XG4gICAgICAgICAgbWV0aG9kOidQVVQnLFxuICAgICAgICAgIHBhdGg6Jy8xL2NsYXNzZXMvUHJvc3BlY3QvJytzZWxlY3RlZFByb3NwZWN0c1tpXSxcbiAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICBsaXN0czoge1xuICAgICAgICAgICAgICAnX19vcCcgICAgOiAnUmVtb3ZlJyxcbiAgICAgICAgICAgICAgXCJvYmplY3RzXCIgOiBbeyBcbiAgICAgICAgICAgICAgICAgICdfX3R5cGUnOidQb2ludGVyJyxcbiAgICAgICAgICAgICAgICAgICdjbGFzc05hbWUnOidQcm9zcGVjdExpc3QnLFxuICAgICAgICAgICAgICAgICAgJ29iamVjdElkJzp0aGlzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWRcbiAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1lbHNle1xuICAgICAgICB0bXAgPSB7XG4gICAgICAgICAgbWV0aG9kOidQVVQnLFxuICAgICAgICAgIHBhdGg6Jy8xL2NsYXNzZXMvUHJvc3BlY3QvJytzZWxlY3RlZFByb3NwZWN0c1tpXSxcbiAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICBhcmNoaXZlZDpmYWxzZSxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJhdGNoRGF0YS5wdXNoKHRtcClcbiAgICB9XG5cbiAgICB0aGlzcyA9IHRoaXM7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvYmF0Y2gnLFxuICAgICAgdHlwZTonUE9TVCcsXG4gICAgICBoZWFkZXJzOnBhcnNlSGVhZGVycyxcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtyZXF1ZXN0czogYmF0Y2hEYXRhfSksXG4gICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIGxpc3RzID0gdGhpc3Muc3RhdGUubGlzdHNcblxuICAgICAgICBmb3IoaT0wO2k8IGxpc3RzLmxlbmd0aDsgaSsrKSB7IFxuICAgICAgICAgIC8vIFN1YnRyYWN0IEZyb20gT2xkIExpc3QgLSBOb3QgV29ya2luZyBGb3IgQXJjaGl2ZVxuICAgICAgICAgIGlmKGxpc3RzW2ldLm9iamVjdElkID09IHRoaXNzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWQpXG4gICAgICAgICAgICBsaXN0c1tpXS5jb3VudCA9IHBhcnNlSW50KGxpc3RzW2ldLmNvdW50KSAtIHBhcnNlSW50KHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aClcbiAgICAgICAgfVxuICAgICAgICAvLyBVcGRhdGUgbG9jYWwgbGlzdCBjb3VudFxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7bGlzdHM6IGxpc3RzfSlcblxuICAgICAgICAvLyByZW1vdmUgZnJvbSBjdXJyZW50IGxpc3QgdWlcbiAgICAgICAgc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cylcbiAgICAgICAgY29uc29sZS5sb2coJ3JlbW92ZSBzZWxlY3RlZCBwcm9zcGVjdHMnKVxuICAgICAgICBjb25zb2xlLmxvZyhzZWxlY3RlZFByb3NwZWN0cylcbiAgICAgICAgY29uc29sZS5sb2codGhpc3Muc3RhdGUucHJvc3BlY3RzKVxuICAgICAgICB2YXIgZmlsdGVyZWQgPSBfLmZpbHRlcih0aGlzcy5zdGF0ZS5wcm9zcGVjdHMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICBmb3IoaT0wO2k8IHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aDtpKyspIFxuICAgICAgICAgICAgaWYoaXRlbS5vYmplY3RJZCA9PSBzZWxlY3RlZFByb3NwZWN0c1tpXSlcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGZpbHRlcmVkKVxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7cHJvc3BlY3RzOiBmaWx0ZXJlZH0pXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cyA9IEpTT04uc3RyaW5naWZ5KFtdKVxuXG4gICAgICAgIC8vIGFkZCBhbGVydCB0byBpbmZvcm0gdXNlclxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIG1vdmVTZWxlY3RlZFByb3NwZWN0czogZnVuY3Rpb24obGlzdE9iamVjdElkKSB7XG4gICAgcGFyc2VIZWFkZXJzID0ge1xuICAgICAgJ1gtUGFyc2UtQXBwbGljYXRpb24tSWQnICA6ICdOODVRT2t0ZUVFUWt1WlZKS0F2dDhNVmVzMHNqRzZxTnBFR3FRRlZKJywgXG4gICAgICAnWC1QYXJzZS1SRVNULUFQSS1LZXknICAgIDogJ1ZONkV3VnlCWndPMXVwaHNCUHNhdTh0N0pRUnAwMFVNM0tZc2lpUWInLFxuICAgICAgXCJDb250ZW50LVR5cGVcIiA6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfVxuXG4gICAgLy8gZ2V0IHRoZSBzZWxlY3RlZCBvYmplY3RJZCBmcm9tIHNlbGVjdGVkUHJvc3BlY3RzIHN0YXRlXG4gICAgc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cylcbiAgICBiYXRjaERhdGEgPSBbXVxuXG5cbiAgICAvLyBCYXRjaCBVcGRhdGUgUGFyc2VcbiAgICAvLyAtIFJlbW92ZSBBbGwgU2VsZWN0ZWQgUHJvc3BlY3RzIEZyb20gQ3VycmVudCBMaXN0XG4gICAgZm9yKGk9MDtpPCBzZWxlY3RlZFByb3NwZWN0cy5sZW5ndGg7aSsrKXtcbiAgICAgIHRtcCA9IHtcbiAgICAgICAgbWV0aG9kOidQVVQnLFxuICAgICAgICBwYXRoOicvMS9jbGFzc2VzL1Byb3NwZWN0Lycrc2VsZWN0ZWRQcm9zcGVjdHNbaV0sXG4gICAgICAgIGJvZHk6IHtcbiAgICAgICAgICBsaXN0czoge1xuICAgICAgICAgICAgJ19fb3AnICAgIDogJ1JlbW92ZScsXG4gICAgICAgICAgICBcIm9iamVjdHNcIiA6IFt7IFxuICAgICAgICAgICAgICAgICdfX3R5cGUnOidQb2ludGVyJyxcbiAgICAgICAgICAgICAgICAnY2xhc3NOYW1lJzonUHJvc3BlY3RMaXN0JyxcbiAgICAgICAgICAgICAgICAnb2JqZWN0SWQnOnRoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZFxuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJhdGNoRGF0YS5wdXNoKHRtcClcbiAgICB9XG4gICAgXG4gICAgLy8gLSBBZGQgT3RoZXIgTGlzdCBcbiAgICBmb3IoaT0wO2k8IHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aDtpKyspe1xuICAgICAgdG1wID0ge1xuICAgICAgICBtZXRob2Q6J1BVVCcsXG4gICAgICAgIHBhdGg6Jy8xL2NsYXNzZXMvUHJvc3BlY3QvJytzZWxlY3RlZFByb3NwZWN0c1tpXSxcbiAgICAgICAgYm9keToge1xuICAgICAgICAgIGxpc3RzOiB7XG4gICAgICAgICAgICAnX19vcCcgICAgOiAnQWRkVW5pcXVlJyxcbiAgICAgICAgICAgIFwib2JqZWN0c1wiIDogW3sgXG4gICAgICAgICAgICAgICAgJ19fdHlwZSc6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICdjbGFzc05hbWUnOidQcm9zcGVjdExpc3QnLFxuICAgICAgICAgICAgICAgICdvYmplY3RJZCc6bGlzdE9iamVjdElkXG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYmF0Y2hEYXRhLnB1c2godG1wKVxuICAgIH1cblxuICAgIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9iYXRjaCcsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGhlYWRlcnM6cGFyc2VIZWFkZXJzLFxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe3JlcXVlc3RzOiBiYXRjaERhdGF9KSxcbiAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgbGlzdHMgPSB0aGlzcy5zdGF0ZS5saXN0c1xuXG4gICAgICAgIGZvcihpPTA7aTwgbGlzdHMubGVuZ3RoOyBpKyspIHsgXG4gICAgICAgICAgLy8gQWRkIFRvIE5ldyBMaXN0XG4gICAgICAgICAgaWYobGlzdHNbaV0ub2JqZWN0SWQgPT0gbGlzdE9iamVjdElkKVxuICAgICAgICAgICAgbGlzdHNbaV0uY291bnQgPSBwYXJzZUludChsaXN0c1tpXS5jb3VudCkgKyBwYXJzZUludChzZWxlY3RlZFByb3NwZWN0cy5sZW5ndGgpXG4gICAgICAgICAgLy8gU3VidHJhY3QgRnJvbSBPbGQgTGlzdFxuICAgICAgICAgIGlmKGxpc3RzW2ldLm9iamVjdElkID09IHRoaXNzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWQpXG4gICAgICAgICAgICBsaXN0c1tpXS5jb3VudCA9IHBhcnNlSW50KGxpc3RzW2ldLmNvdW50KSAtIHBhcnNlSW50KHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aClcbiAgICAgICAgfVxuICAgICAgICAvLyBVcGRhdGUgbG9jYWwgbGlzdCBjb3VudFxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7bGlzdHM6IGxpc3RzfSlcblxuICAgICAgICAvLyByZW1vdmUgZnJvbSBjdXJyZW50IGxpc3QgdWlcbiAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGVkUHJvc3BlY3RzJylcbiAgICAgICAgY29uc29sZS5sb2codGhpc3Muc3RhdGUucHJvc3BlY3RzKVxuICAgICAgICB2YXIgZmlsdGVyZWQgPSBfLmZpbHRlcih0aGlzcy5zdGF0ZS5wcm9zcGVjdHMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICBpc19zZWxlY3RlZCA9IHRydWVcbiAgICAgICAgICBmb3IoaT0wO2k8IHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aDtpKyspIFxuICAgICAgICAgICAgaWYoaXRlbS5vYmplY3RJZCA9PSBzZWxlY3RlZFByb3NwZWN0c1tpXSlcbiAgICAgICAgICAgICAgaXNfc2VsZWN0ZWQgPSBmYWxzZVxuICAgICAgICAgIHJldHVybiBpc19zZWxlY3RlZFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coZmlsdGVyZWQpXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtwcm9zcGVjdHM6IGZpbHRlcmVkfSlcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5zdHJpbmdpZnkoW10pXG5cbiAgICAgICAgLy8gYWRkIGFsZXJ0IHRvIGluZm9ybSB1c2VyXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgY29weVNlbGVjdGVkUHJvc3BlY3RzOiBmdW5jdGlvbihsaXN0T2JqZWN0SWQpIHtcbiAgICBjb25zb2xlLmxvZyhsaXN0T2JqZWN0SWQpXG4gICAgXG4gICAgLy8gbWFrZSBiYXRjaCBhamF4IHJlcXVlc3QgdG8gcGFyc2VcbiAgICBwYXJzZUhlYWRlcnMgPSB7XG4gICAgICAnWC1QYXJzZS1BcHBsaWNhdGlvbi1JZCcgIDogJ044NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkonLCBcbiAgICAgICdYLVBhcnNlLVJFU1QtQVBJLUtleScgICAgOiAnVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYicsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiIDogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9XG5cbiAgICAvLyBBZGQgTG9hZGluZyBTaWduIFRvIExpc3RcblxuICAgIHNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMpXG4gICAgYmF0Y2hEYXRhID0gW11cbiAgICBmb3IoaT0wO2k8IHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aDtpKyspe1xuICAgICAgdG1wID0ge1xuICAgICAgICBtZXRob2Q6J1BVVCcsXG4gICAgICAgIHBhdGg6Jy8xL2NsYXNzZXMvUHJvc3BlY3QvJytzZWxlY3RlZFByb3NwZWN0c1tpXSxcbiAgICAgICAgYm9keToge1xuICAgICAgICAgIGxpc3RzOiB7XG4gICAgICAgICAgICAnX19vcCcgICAgOiAnQWRkVW5pcXVlJyxcbiAgICAgICAgICAgIFwib2JqZWN0c1wiIDogW3sgXG4gICAgICAgICAgICAgICAgJ19fdHlwZSc6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICdjbGFzc05hbWUnOidQcm9zcGVjdExpc3QnLFxuICAgICAgICAgICAgICAgICdvYmplY3RJZCc6bGlzdE9iamVjdElkXG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYmF0Y2hEYXRhLnB1c2godG1wKVxuICAgIH1cblxuICAgIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9iYXRjaCcsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGhlYWRlcnM6cGFyc2VIZWFkZXJzLFxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe3JlcXVlc3RzOiBiYXRjaERhdGF9KSxcbiAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgLy8gVXBkYXRlIFdpdGggdGhlIG51bWJlciBvZiBzdWNjZXNzZXNcbiAgICAgICAgLy8gVXBkYXRlIGxvY2FsIGxpc3QgY291bnRcbiAgICAgICAgbGlzdHMgPSB0aGlzcy5zdGF0ZS5saXN0c1xuICAgICAgICBmb3IoaT0wO2k8IGxpc3RzLmxlbmd0aDsgaSsrKSB7IFxuICAgICAgICAgIGlmKGxpc3RzW2ldLm9iamVjdElkID09IGxpc3RPYmplY3RJZClcbiAgICAgICAgICAgIGxpc3RzW2ldLmNvdW50ID0gcGFyc2VJbnQobGlzdHNbaV0uY291bnQpICsgcGFyc2VJbnQocmVzLmxlbmd0aClcbiAgICAgICAgfVxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7bGlzdHM6IGxpc3RzfSlcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzID0gXCJbXVwiXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtzZWxlY3RlZFByb3NwZWN0cyA6IFtdIH0pXG4gICAgICAgIFxuICAgICAgICAvLyBhZGQgYWxlcnQgdG8gaW5mb3JtIHVzZXJcbiAgICAgICAgLy8gVW5zZWxlY3QgYWxsIHNlbGVjdGVkXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG5cbiAgfSxcblxuICBoaWRlQWxlcnQ6IGZ1bmN0aW9uKCkge1xuICAgICQoJy5hbGVydCcpLmhpZGUoKVxuICB9LFxuXG4gIGFkanVzdEhlaWdodDogZnVuY3Rpb24od2hpY2hPbmUpIHtcbiAgICBwcm9zcGVjdFdpbmRvd1RvcCA9ICQoJyNwcm9zcGVjdERldGFpbEJ1dHRvbnMnKS5wb3NpdGlvbigpLnRvcFxuICAgIHByb3NwZWN0V2luZG93VG9wID0gcHJvc3BlY3RXaW5kb3dUb3AgKyAkKCcjcHJvc3BlY3REZXRhaWxCdXR0b25zJykuaGVpZ2h0KClcbiAgICBwcm9zcGVjdFdpbmRvd0JvdHRvbSA9ICQoJyNhdXRvc2Nyb2xsJykucG9zaXRpb24oKS50b3AgKyAkKCcjYXV0b3Njcm9sbCcpLmhlaWdodCgpXG5cbiAgICBpZih3aGljaE9uZSA9PSAnaicpXG4gICAgICBhY3RpdmVQcm9zcGVjdCA9IHRoaXMuc3RhdGUua2V5Ym9hcmRBY3RpdmVQcm9zcGVjdCArMSBcbiAgICBlbHNlXG4gICAgICBhY3RpdmVQcm9zcGVjdCA9IHRoaXMuc3RhdGUua2V5Ym9hcmRBY3RpdmVQcm9zcGVjdCAtMSBcblxuICAgIGFjdGl2ZVRvcCA9ICQoJCgnLnByb3NwZWN0cy10cicpW2FjdGl2ZVByb3NwZWN0XSkucG9zaXRpb24oKS50b3BcbiAgICBzZWxlY3RlZEhlaWdodCA9ICQoJCgnLnByb3NwZWN0cy10cicpW2FjdGl2ZVByb3NwZWN0XSkuaGVpZ2h0KClcbiAgICBhY3RpdmVCb3R0b20gPSAkKCQoJy5wcm9zcGVjdHMtdHInKVthY3RpdmVQcm9zcGVjdF0pLnBvc2l0aW9uKCkudG9wK3NlbGVjdGVkSGVpZ2h0XG5cbiAgICBjb25zb2xlLmxvZyhwcm9zcGVjdFdpbmRvd1RvcCwgcHJvc3BlY3RXaW5kb3dCb3R0b20pXG4gICAgY29uc29sZS5sb2coYWN0aXZlVG9wLCBhY3RpdmVCb3R0b20pXG5cbiAgICBzY3JvbGxUb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0b3Njcm9sbCcpLnNjcm9sbFRvcFxuICAgIGlmKGFjdGl2ZUJvdHRvbSA+IHByb3NwZWN0V2luZG93Qm90dG9tKVxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dG9zY3JvbGwnKS5zY3JvbGxUb3AgPSBzY3JvbGxUb3AgKyBhY3RpdmVCb3R0b20gLSBwcm9zcGVjdFdpbmRvd0JvdHRvbVxuXG4gICAgaWYoYWN0aXZlVG9wIDwgMClcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvc2Nyb2xsJykuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wICsgYWN0aXZlVG9wIC0gMzdcbiAgICBlbHNlIGlmKGFjdGl2ZVRvcCA9PSAkKCQoJy5wcm9zcGVjdHMtdHInKVswXSkucG9zaXRpb24oKS50b3ApXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0b3Njcm9sbCcpLnNjcm9sbFRvcCA9IDBcbiAgICAgIFxuICAgIC8vIEdldCBQb3N0aW9uIG9mIFRvcFxuICAgIC8vIEdldCBQb3NpdGlvbiBvZiBCb3R0b20gXG4gICAgLy8gR2V0IFBvc2l0aW9uIG9mIEN1cnJlbnQgU2VsZWN0ZWRcbiAgICAvLyBBZGp1c3QgYnkgc2Nyb2xsaW5nIGRvd24gb3IgdXBcbiAgfSxcblxuICBzdGFydEtleWJvYXJkU2hvcnRjdXRzOiBmdW5jdGlvbigpIHtcbiAgICAvKiBLZXlib2FyZCBTaG9ydGN1dHMgKi9cbiAgICBNb3VzZXRyYXAucmVzZXQoKVxuICAgIC8vTW91c2V0cmFwLnVuYmluZChbJ2onLCdrJywnbyddKVxuICAgIHRoaXNzID0gdGhpcztcblxuICAgIC8qIFByb3NwZWN0IFRhYmxlIFNob3J0Y3V0cyAqL1xuICAgIE1vdXNldHJhcC5iaW5kKCdqJywgZnVuY3Rpb24oKSB7IFxuICAgICAga2V5Ym9hcmQgPSB0aGlzcy5zdGF0ZS5rZXlib2FyZEFjdGl2ZVByb3NwZWN0XG4gICAgICBpZihrZXlib2FyZCAhPSB0aGlzcy5zdGF0ZS5wcm9zcGVjdHNQZXJQYWdlKzEpXG4gICAgICAgIHRoaXNzLmFkanVzdEhlaWdodCgnaicpXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtrZXlib2FyZEFjdGl2ZVByb3NwZWN0OiBrZXlib2FyZCsxfSlcbiAgICB9KTtcblxuICAgIE1vdXNldHJhcC5iaW5kKCdrJywgZnVuY3Rpb24oKSB7IFxuICAgICAga2V5Ym9hcmQgPSB0aGlzcy5zdGF0ZS5rZXlib2FyZEFjdGl2ZVByb3NwZWN0XG4gICAgICBpZihrZXlib2FyZCAhPSAxKVxuICAgICAgICB0aGlzcy5hZGp1c3RIZWlnaHQoJ2snKVxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7a2V5Ym9hcmRBY3RpdmVQcm9zcGVjdDoga2V5Ym9hcmQtMX0pXG4gICAgfSk7XG5cblxuICAgIE1vdXNldHJhcC5iaW5kKCdvJywgZnVuY3Rpb24oKSB7IFxuICAgICAgY29uc29sZS5sb2coJ29wZW4gY3VycmVudCBwcm9zcGVjdCcpXG4gICAgICBjb25zb2xlLmxvZygkKCQoJy5rZXlTZWxlY3QnKS5maW5kKCdhLmxpbmtlZGluX2xpbmsnKVswXSkuYXR0cignaHJlZicpKVxuICAgICAgbGluayA9ICQoJCgnLmtleVNlbGVjdCcpLmZpbmQoJ2EubGlua2VkaW5fbGluaycpWzBdKS5hdHRyKCdocmVmJylcbiAgICAgIC8qXG4gICAgICB3aW5kb3cub3BlbihsaW5rLCAnX2JsYW5rJylcbiAgICAgIGNvbnNvbGUubG9nKCduZXcnKVxuICAgICAgKi9cbiAgICAgIC8vcG9wdXBXaW5kb3cuYmx1cigpO1xuICAgICAgLy93aW5kb3cuZm9jdXMoKTtcbiAgICAgIC8vIGtleWJvYXJkID0gdGhpc3Muc3RhdGUua2V5Ym9hcmRBY3RpdmVQcm9zcGVjdFxuICAgICAgXG4gICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgICAgYS5ocmVmID0gbGlua1xuICAgICAgdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiTW91c2VFdmVudHNcIik7XG4gICAgICAvL3RoZSB0ZW50aCBwYXJhbWV0ZXIgb2YgaW5pdE1vdXNlRXZlbnQgc2V0cyBjdHJsIGtleVxuICAgICAgLy8gRm9yIE1hYyBUaGlzIFdvcmtzIENoZWNrIEZvciAtIFdpbmRvd3NcbiAgICAgIGV2dC5pbml0TW91c2VFdmVudChcImNsaWNrXCIsIHRydWUsIHRydWUsIHdpbmRvdywgMCwgMCwgMCwgMCwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSwgZmFsc2UsIGZhbHNlLCB0cnVlLCAwLCBudWxsKTtcbiAgICAgIGEuZGlzcGF0Y2hFdmVudChldnQpO1xuICAgIH0pO1xuXG5cblxuICAgIC8qIExpc3QgTW9kaWZpY2F0aW9uIFNob3J0Y3V0cyAqL1xuICAgIE1vdXNldHJhcC5iaW5kKCd0YWIrcicsIGZ1bmN0aW9uKCl7XG4gICAgICAvL2NvbnNvbGUubG9nKCdyZWxvYWQnKVxuICAgICAgJCgnI3JlbmFtZUxpc3RCdG4nKS5jbGljaygpXG4gICAgfSlcblxuICAgIE1vdXNldHJhcC5iaW5kKCd0YWIrZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAvL2NvbnNvbGUubG9nKCdyZWxvYWQnKVxuICAgICAgJCgnI2RlbGV0ZUxpc3RNb2RhbCcpLmNsaWNrKClcbiAgICB9KVxuXG4gICAgTW91c2V0cmFwLmJpbmQoJ3RhYitzJywgZnVuY3Rpb24oKXtcbiAgICAgIC8vY29uc29sZS5sb2coJ3JlbG9hZCcpXG4gICAgICAvLyQoJyNkb3dubG9hZFByb3NwZWN0cycpLmNsaWNrKClcbiAgICAgIHRoaXNzLmRvd25sb2FkRmlsZSgpXG4gICAgfSlcblxuICAgIE1vdXNldHJhcC5iaW5kKCdzaGlmdCtsJywgZnVuY3Rpb24oKXtcbiAgICAgIC8vY29uc29sZS5sb2coJ3JlbG9hZCcpXG4gICAgICAvLyQoJyNkb3dubG9hZFByb3NwZWN0cycpLmNsaWNrKClcbiAgICAgIC8vdGhpc3MuZG93bmxvYWRGaWxlKClcbiAgICAgICQoJy5uZXctbGlzdC1idG4nKS5jbGljaygpXG4gICAgfSlcblxuICAgIE1vdXNldHJhcC5iaW5kKCdlJywgZnVuY3Rpb24oKXtcbiAgICAgIGNvbnNvbGUubG9nKCdyZWxvYWQnKVxuICAgICAgLy8kKCcjZG93bmxvYWRQcm9zcGVjdHMnKS5jbGljaygpXG4gICAgICB0aGlzcy5yZW1vdmVTZWxlY3RlZFByb3NwZWN0cygpXG4gICAgfSlcblxuICAgIE1vdXNldHJhcC5iaW5kKCdjJywgZnVuY3Rpb24oKSB7IFxuICAgICAgY29uc29sZS5sb2coJ2NvcHknKVxuICAgICAgJCgnI2NvcHlUb0xpc3QnKS5jbGljaygpXG4gICAgfSk7XG5cbiAgICBNb3VzZXRyYXAuYmluZCgnbScsIGZ1bmN0aW9uKCkgeyBcbiAgICAgIGNvbnNvbGUubG9nKCdjb3B5JylcbiAgICAgICQoJyNtb3ZlVG9MaXN0JykuY2xpY2soKVxuICAgIH0pO1xuXG4gICAgLy9Nb3VzZXRyYXAuYmluZCgnZScsIGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygnZScpOyB9KTtcbiAgICBNb3VzZXRyYXAuYmluZCgncmlnaHQnLCBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ3JpZ2h0Jyk7IH0pO1xuICAgIE1vdXNldHJhcC5iaW5kKCdsZWZ0JywgZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKCdsZWZ0Jyk7IH0pO1xuXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIC8qIE9uTG9hZCBGb3IgVGhlIEZpcnN0IFRpbWUgRnVuY3Rpb24gKi9cbiAgICBsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnN0cmluZ2lmeShbXSlcbiAgICB0aGlzc3MgPSB0aGlzO1xuXG4gICAgLy90aGlzLnN0YXJ0S2V5Ym9hcmRTaG9ydGN1dHMoKVxuXG4gICAgcGFyc2VfaGVhZGVycyA9IHtcbiAgICAgICdYLVBhcnNlLUFwcGxpY2F0aW9uLUlkJyAgOiAnTjg1UU9rdGVFRVFrdVpWSktBdnQ4TVZlczBzakc2cU5wRUdxUUZWSicsIFxuICAgICAgJ1gtUGFyc2UtUkVTVC1BUEktS2V5JyAgICA6ICdWTjZFd1Z5Qlp3TzF1cGhzQlBzYXU4dDdKUVJwMDBVTTNLWXNpaVFiJ1xuICAgIH1cblxuICAgIGN1aWQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikub2JqZWN0SWRcbiAgICB1c2VyID0gSlNPTi5zdHJpbmdpZnkoeydfX3R5cGUnOidQb2ludGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdvYmplY3RJZCc6Y3VpZCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3NOYW1lJzogJ1VzZXInfSlcbiAgICBhcmNoaXZlTGlzdCA9IEpTT04uc3RyaW5naWZ5KHsgLy9oYXJkQ29kZVxuICAgICAgJ29iamVjdElkJzonU2VyUFFqY2t2ZScsIC8vIERpZmZlcmVudGUgRm9yIFdhY2ggVXNlclxuICAgICAgJ19fdHlwZSc6J1BvaW50ZXInLCBcbiAgICAgICdjbGFzc05hbWUnIDogJ1Byb3NwZWN0TGlzdCcgXG4gICAgfSlcblxuICAgIHFyeSA9IHtcbiAgICAgIHdoZXJlOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGNvbXBhbnk6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55LFxuICAgICAgICBhcmNoaXZlZDogdHJ1ZSxcbiAgICAgIH0pLFxuICAgICAgY291bnQ6IDEsXG4gICAgICBvcmRlcjogJy1jcmVhdGVkQXQnLFxuICAgICAgbGltaXQ6IHRoaXMuc3RhdGUucHJvc3BlY3RQZXJQYWdlLFxuICAgICAgaW5jbHVkZTogJ2VtYWlsX2d1ZXNzZXMsZW1haWxfZ3Vlc3Nlcy5wYXR0ZXJuJ1xuICAgIH1cblxuICAgIC8vcXJ5ID0gJ3doZXJlPXtcImNvbXBhbnlcIjonK2NvbXBhbnkrJyxcImFyY2hpdmVkXCI6dHJ1ZX0mY291bnQ9MSZvcmRlcj0tY3JlYXRlZEF0JmluY3VkZT1lbWFpbF9ndWVzc2VzJ1xuXG4gICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50TGlzdCAhPSAnQWxsJyl7XG4gICAgICBjdXJyZW50TGlzdCA9IHtcbiAgICAgICAgJ29iamVjdElkJzp0aGlzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWQsIFxuICAgICAgICAnX190eXBlJzonUG9pbnRlcicsIFxuICAgICAgICAnY2xhc3NOYW1lJyA6ICdQcm9zcGVjdExpc3QnIFxuICAgICAgfVxuICAgICAgY3VycmVudExpc3QgPSBKU09OLnN0cmluZ2lmeShjdXJyZW50TGlzdClcbiAgICAgIHVzZXIgPSBKU09OLnN0cmluZ2lmeSh7J19fdHlwZSc6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb2JqZWN0SWQnOid4VGhBWGMwTFpUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzTmFtZSc6J1VzZXInfSlcblxuICAgICAgLy8gYWRkIGNvbXBhbnkgdG8gcHJvc3BlY3RzIGFkZGVkIHRocm91Z2ggbWluaW5nIGpvYlxuICAgICAgcXJ5ID0gJ3doZXJlPXtcImNvbXBhbnlcIjonK2NvbXBhbnkrJyxcImxpc3RzXCI6JytjdXJyZW50TGlzdCsnfSZjb3VudD0xJ1xuICAgIH1cblxuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0JyxcbiAgICAgIHR5cGU6J0dFVCcsXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgY2FjaGU6IHRydWUsXG4gICAgICBkYXRhOiBxcnksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIHRoaXNzcy5zZXRTdGF0ZSh7cHJvc3BlY3RzOiByZXMucmVzdWx0c30pXG4gICAgICAgIHRoaXNzcy5zZXRTdGF0ZSh7Y291bnQ6IHJlcy5jb3VudH0pXG4gICAgICAgIHRoaXNzcy5zZXRTdGF0ZSh7dG90YWxDb3VudDogcmVzLmNvdW50fSlcbiAgICAgICAgdGhpc3NzLnNldFN0YXRlKHtwYWdlczogTWF0aC5jZWlsKHJlcy5jb3VudC90aGlzc3MucHJvcHMucHJvc3BlY3RzUGVyUGFnZSl9KVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe2xvYWRpbmc6IGZhbHNlfSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJylcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBwYXJzZV9oZWFkZXJzID0ge1xuICAgICAgJ1gtUGFyc2UtQXBwbGljYXRpb24tSWQnICA6ICdOODVRT2t0ZUVFUWt1WlZKS0F2dDhNVmVzMHNqRzZxTnBFR3FRRlZKJywgXG4gICAgICAnWC1QYXJzZS1SRVNULUFQSS1LZXknICAgIDogJ1ZONkV3VnlCWndPMXVwaHNCUHNhdTh0N0pRUnAwMFVNM0tZc2lpUWInLFxuICAgIH1cblxuICAgIGN1cnJlbnRVc2VyID0geyBcbiAgICAgICdfX3R5cGUnICAgOiAnUG9pbnRlcicsXG4gICAgICAnY2xhc3NOYW1lJzogJ19Vc2VyJyxcbiAgICAgICdvYmplY3RJZCcgOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikub2JqZWN0SWRcbiAgICB9XG5cbiAgICB0aGlzcyA9IHRoaXM7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RMaXN0JyxcbiAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgaGVhZGVyczogcGFyc2VfaGVhZGVycyxcbiAgICAgIGRhdGE6ICd3aGVyZT17XCJ1c2VyXCI6JytKU09OLnN0cmluZ2lmeShjdXJyZW50VXNlcikrXCJ9JmNvdW50PTEmb3JkZXI9LWNyZWF0ZWRBdFwiLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgcmVzdWx0cyA9IHJlcy5yZXN1bHRzXG4gICAgICAgIGZvcihpPTA7aTwgcmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHJlc3VsdHMuY291bnQgPSAnfidcbiAgICAgICAgfVxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7bGlzdHM6IHJlc3VsdHN9KVxuICAgICAgICAvLyBNYWtlIGJhdGNoIHJlcXVlc3QgdG8gZ2V0IGxpc3QgY291bnRzIGFmdGVyIHRoZXkgYXJlIGxvYWRlZFxuICAgICAgICBmb3IoaT0wO2kgPCByZXMucmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHJlcy5yZXN1bHRzW2ldLm9iamVjdElkLCBcIlwiKVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yKGk9MDtpPCByZXMucmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxpc3QgPSB7XG4gICAgICAgICAgICAnX190eXBlJyAgICA6ICdQb2ludGVyJyxcbiAgICAgICAgICAgICdvYmplY3RJZCcgIDogcmVzLnJlc3VsdHNbaV0ub2JqZWN0SWQsXG4gICAgICAgICAgICAnY2xhc3NOYW1lJyA6ICdQcm9zcGVjdExpc3QnLCBcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0JyxcbiAgICAgICAgICAgIHR5cGU6J0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOnBhcnNlX2hlYWRlcnMsXG4gICAgICAgICAgICBsaXN0T2JqZWN0SWQ6IHJlcy5yZXN1bHRzW2ldLm9iamVjdElkLFxuICAgICAgICAgICAgZGF0YTogJ3doZXJlPXtcImxpc3RzXCI6JytKU09OLnN0cmluZ2lmeShsaXN0KSsnfSZjb3VudD0xJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMubGlzdE9iamVjdElkKVxuICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLmxpc3RPYmplY3RJZCwgcmVzLmNvdW50KVxuICAgICAgICAgICAgICBhbW91bnQgPSAwXG4gICAgICAgICAgICAgIGZvcihpaT0wO2lpPCByZXN1bHRzLmxlbmd0aDtpaSsrKXtcbiAgICAgICAgICAgICAgICBpZihsb2NhbFN0b3JhZ2UuZ2V0SXRlbShyZXN1bHRzW2lpXS5vYmplY3RJZCkgPT0gXCJcIilcbiAgICAgICAgICAgICAgICAgIGFtb3VudCA9IGFtb3VudCArIDFcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmKGFtb3VudCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgZm9yKGlpPTA7aWk8IHJlc3VsdHMubGVuZ3RoO2lpKyspXG4gICAgICAgICAgICAgICAgICByZXN1bHRzW2lpXS5jb3VudCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHJlc3VsdHNbaWldLm9iamVjdElkKVxuXG4gICAgICAgICAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2xpc3RzOiByZXN1bHRzfSlcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdHb3QgQ291bnRzJylcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIHVwZGF0ZWQgcmVzLmNvdW50XG4gICAgICAgICAgICAgIC8vdGhpc3Muc2V0U3RhdGUoe2NvdW50OiByZXMuY291bnR9KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpXG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBnZW5lcmF0ZV9pZCA6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJ18nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpO1xuICB9LFxufSk7XG5cbi8qICBEcm9wZG93biBNZW51cyAqL1xuXG52YXIgQ3VycmVudExpc3RzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ3VycmVudExpc3RzJyxcbiAgbGlzdEFjdGlvbjogZnVuY3Rpb24oZSkge1xuICAgIGxpc3ROYW1lID0gJChlLnRhcmdldCkudGV4dCgpXG4gICAgXG4gICAgdmFyIGxpc3RTZWxlY3QgPSBfLmZpbHRlcih0aGlzLnByb3BzLmxpc3RzLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PSBsaXN0TmFtZVxuICAgIH0pO1xuXG4gICAgdGhpcy5wcm9wcy5saXN0QWN0aW9uKGxpc3RTZWxlY3RbMF0ub2JqZWN0SWQpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBsaXN0cyA9IFtdIFxuICAgIGZvcihpPTA7aTwgdGhpcy5wcm9wcy5saXN0cy5sZW5ndGg7aSsrKSB7XG4gICAgICBsaXN0cy5wdXNoKFxuICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe3N0eWxlOiB7Zm9udFdlaWdodDonYm9sZCcsZm9udFNpemU6JzEwcHgnfSwgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLmxpc3RBY3Rpb259LCB0aGlzLnByb3BzLmxpc3RzW2ldLm5hbWUpKVxuICAgICAgKVxuICAgIH1cbiAgICAvL2NvbnNvbGUubG9nKHRoaXMucHJvcHMuY29weURyb3Bkb3duU3R5bGUpXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcImRyb3Bkb3duLW1lbnUgZHJvcC10ZXN0XCIsIGlkOiBcImRyb3Bkb3duXCIsIFxuICAgICAgICAgIHN0eWxlOiB7cmlnaHQ6MTU4fX0sIFxuICAgICAgICBsaXN0c1xuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgTGlzdHNNZW51ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnTGlzdHNNZW51JyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwiZHJvcGRvd24tbWVudSBkcm9wLXRlc3RcIiwgaWQ6IFwiZHJvcGRvd25cIiwgXG4gICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgIG1pbldpZHRoOidpbmhlcml0JyxcbiAgICAgICAgICAgIHRvcDogJzIwcHgnLFxuICAgICAgICAgICAgd2lkdGg6ICcxMjVweCcsXG4gICAgICAgICAgICByaWdodDogJzE1NHB4JyxcbiAgICAgICAgICAgIGxlZnQ6J2F1dG8nXG4gICAgICAgICAgfX0sIFxuICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiI2Jvb2tzXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXRpbWVzXCJ9KSwgXCIgwqBcIiArICcgJyArXG4gICAgICAgICAgXCJEZWxldGUgTGlzdFwiXG4gICAgICAgICkpLCBcbiAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtocmVmOiBcIiNwb2RjYXN0c1wifSwgXG4gICAgICAgICAgXCJSZW5hbWUgTGlzdHNcIlxuICAgICAgICApKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgQ3VycmVudExpc3RzVHdvID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ3VycmVudExpc3RzVHdvJyxcbiAgbGlzdEFjdGlvbjogZnVuY3Rpb24oZSkge1xuICAgIGxpc3ROYW1lID0gJChlLnRhcmdldCkudGV4dCgpXG4gICAgXG4gICAgdmFyIGxpc3RTZWxlY3QgPSBfLmZpbHRlcih0aGlzLnByb3BzLmxpc3RzLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PSBsaXN0TmFtZVxuICAgIH0pO1xuXG4gICAgdGhpcy5wcm9wcy5saXN0QWN0aW9uKGxpc3RTZWxlY3RbMF0ub2JqZWN0SWQpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBsaXN0cyA9IFtdIFxuICAgIGZvcihpPTA7aTx0aGlzLnByb3BzLmxpc3RzLmxlbmd0aDtpKyspIHtcbiAgICAgIGxpc3RzLnB1c2goXG4gICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7c3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJyxmb250U2l6ZTonMTBweCd9LCBcbiAgICAgICAgICAgICAgIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmxpc3RBY3Rpb259LCBcbiAgICAgICAgICB0aGlzLnByb3BzLmxpc3RzW2ldLm5hbWUpKVxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwiZHJvcGRvd24tbWVudSBkcm9wLXRlc3RcIiwgaWQ6IFwiZHJvcGRvd25cIiwgXG4gICAgICAgICAgc3R5bGU6IHRoaXMucHJvcHMuY29weURyb3Bkb3duU3R5bGV9LCBcbiAgICAgICAgbGlzdHNcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxudmFyIExpc3REZXRhaWxCdXR0b25zID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnTGlzdERldGFpbEJ1dHRvbnMnLFxuICAvLyBSZW5hbWUgTGlzdFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBlZGl0TW9kZTogZmFsc2VcbiAgICB9XG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLnByb3BzLmN1cnJlbnRMaXN0T2JqZWN0SWQpXG4gICAgaWYoIXRoaXMuc3RhdGUuZWRpdE1vZGUpIHtcbiAgICAgIHN0dWZmID0gUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJcIiwgc3R5bGU6IGxpc3ROYW1lU3R5bGV9LCBcbiAgICAgICAgICAgICh0aGlzLnByb3BzLmN1cnJlbnRMaXN0TmFtZSA9PSBcIkFsbFwiKSA/ICcnIDogUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1iYXJzXCIsIHN0eWxlOiB7Zm9udFNpemU6MTYsIG1hcmdpblRvcDotNX19KSwgXG4gICAgICAgICAgICAodGhpcy5wcm9wcy5jdXJyZW50TGlzdE5hbWUgPT0gXCJBbGxcIikgPyAnJyA6IFwiICAgXCIgK3RoaXMucHJvcHMuY3VycmVudExpc3ROYW1lXG4gICAgICAgICAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgc3R1ZmYgPSBSZWFjdC5ET00uaW5wdXQoe2NsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIiwgc3R5bGU6IHt3aWR0aDogMTAwLCBmbG9hdDogJ2xlZnQnLCBoZWlnaHQ6IDI0LCBtYXJnaW5Ub3A6IC0xfX0pXG4gICAgfVxuICAgIHJldHVybiAoXG5cbiAgICAgICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtzdHlsZToge21hcmdpbjowfX0sIFxuICAgICAgICAgICAgICBzdHVmZiwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiBsaXN0QnRuLCBcbiAgICAgICAgICAgICAgICAnZGF0YS10b2dnbGUnOiBcIm1vZGFsXCIsIFxuICAgICAgICAgICAgICAgIGlkOiBcInJlbmFtZUxpc3RCdG5cIiwgXG4gICAgICAgICAgICAgICAgJ2RhdGEtdGFyZ2V0JzogXCIuYnMtcmVuYW1lTGlzdC1tb2RhbC1zbVwiLCBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wZW5jaWxcIn0pXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmRlbGV0ZUxpc3QsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiBsaXN0QnRuLCBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS10cmFzaC1vXCJ9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLCBcblxuICAgICAgICAgICAgUmVuYW1lTGlzdE1vZGFsKHtyZW5hbWVMaXN0OiB0aGlzLnByb3BzLnJlbmFtZUxpc3R9KSwgXG4gICAgICAgICAgICBEZWxldGVMaXN0TW9kYWwoe2RlbGV0ZUxpc3Q6IHRoaXMucHJvcHMuZGVsZXRlTGlzdH0pXG4gICAgICAgICAgKVxuICAgICAgKTtcbiAgfSxcblxuICByZW5hbWVMaXN0OiBmdW5jdGlvbihuZXdMaXN0TmFtZSkge1xuICAgIHRoaXMucHJvcHMucmVuYW1lTGlzdChuZXdMaXN0TmFtZSlcbiAgfSxcblxuICBkZWxldGVMaXN0OiBmdW5jdGlvbigpe1xuICAgIHRoaXNzID0gdGhpcztcbiAgICBzd2FsKHsgICBcbiAgICAgIHRpdGxlOiBcIkFyZSB5b3Ugc3VyZT9cIiwgICBcbiAgICAgIHRleHQ6IFwiWW91ciB3aWxsIG5vdCBiZSBhYmxlIHRvIHJlY292ZXIgdGhpcyBwcm9zcGVjdCBsaXN0IVwiLCAgIFxuICAgICAgdHlwZTogXCJ3YXJuaW5nXCIsICAgXG4gICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLCAgIFxuICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiBcIiNERDZCNTVcIiwgICBcbiAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBcIlllcywgZGVsZXRlIGl0IVwiLCAgIFxuICAgICAgY2xvc2VPbkNvbmZpcm06IGZhbHNlIH0sIFxuICAgICAgZnVuY3Rpb24oKXsgICBzd2FsKFwiRGVsZXRlZCFcIiwgXCJZb3VyIHByb3NwZWN0IGxpc3QgaGFzIGJlZW4gZGVsZXRlZC5cIiwgXCJzdWNjZXNzXCIpOyBcbiAgICAgICAgY29uc29sZS5sb2coJ2RlbGV0ZWQnKVxuICAgICAgICB0aGlzcy5wcm9wcy5kZWxldGVMaXN0KClcbiAgICAgIH0pO1xuICB9LFxuXG4gIHRvZ2dsZUVkaXQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2VkaXRNb2RlOiAhdGhpcy5zdGF0ZS5lZGl0TW9kZSB9KVxuICB9XG59KTtcblxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIGNyZWF0ZUxpc3RNb2RhbFxuICBjcmVhdGVMaXN0OiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygkKCcjbGlzdFRpdGxlJykudmFsKCkpXG5cbiAgICBkYXRhID0gIHtcbiAgICAgICduYW1lJyAgICAgICAgOiAkKCcjbGlzdFRpdGxlJykudmFsKCkudHJpbSgpLCAgIC8vV2FpdGluZyAsIFJ1bm5pbmdcbiAgICAgICd1c2VyJyAgICAgICAgOiB7ICdfX3R5cGUnOidQb2ludGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAnY2xhc3NOYW1lJzonX1VzZXInLFxuICAgICAgICAgICAgICAgICAgICAgICdvYmplY3RJZCc6J3hXRVNpdzVTbWQnIH0sXG4gICAgfVxuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdExpc3QnLFxuICAgICAgdHlwZTonUE9TVCcsXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJylcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZGF0YS5jb3VudCA9IDBcblxuICAgIHRoaXMucHJvcHMuY3JlYXRlTGlzdChkYXRhKVxuICAgIFxuICAgICQoJyNjcmVhdGVMaXN0TW9kYWwnKS5tb2RhbCgnaGlkZScpXG4gICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdtb2RhbC1vcGVuJyk7XG4gICAgJCgnLm1vZGFsLWJhY2tkcm9wJykucmVtb3ZlKCk7XG4gICAgLy8kKCdidXR0b24uY2xvc2UnKS5jbGljaygpXG4gIH0sXG5cbiAgcmVuYW1lTGlzdDogZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIC8vY29uc29sZS5sb2coJCgnI25ld0xpc3ROYW1lJykudmFsKCkpXG4gICAgbmV3TGlzdE5hbWUgPSAkKCcjbmV3TGlzdE5hbWUnKS52YWwoKVxuICAgIGlmKG5ld0xpc3ROYW1lLnRyaW0oKSAhPSBcIlwiKVxuICAgICAgdGhpcy5wcm9wcy5yZW5hbWVMaXN0KG5ld0xpc3ROYW1lKVxuICAgIC8vIERpc2FibGUgTW9kYWxcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsIGZhZGUgYnMtcmVuYW1lTGlzdC1tb2RhbC1zbVwiLCB0YWJJbmRleDogXCItMVwiLCByb2xlOiBcImRpYWxvZ1wiLCAnYXJpYS1sYWJlbGxlZGJ5JzogXCJteVNtYWxsTW9kYWxMYWJlbFwiLCAnYXJpYS1oaWRkZW4nOiBcInRydWVcIiwgaWQ6IFwiY3JlYXRlTGlzdE1vZGFsXCIsIHN0eWxlOiB7dG9wOicyMDBweCd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtZGlhbG9nIG1vZGFsLXNtXCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWNvbnRlbnRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1oZWFkZXJcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgY2xhc3NOYW1lOiBcImNsb3NlXCIsICdkYXRhLWRpc21pc3MnOiBcIm1vZGFsXCJ9LCBSZWFjdC5ET00uc3Bhbih7J2FyaWEtaGlkZGVuJzogXCJ0cnVlXCJ9LCBcIsOXXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJzci1vbmx5XCJ9LCBcIkNsb3NlXCIpKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDQoe2NsYXNzTmFtZTogXCJtb2RhbC10aXRsZVwiLCBpZDogXCJteU1vZGFsTGFiZWxcIn0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWxpc3RcIn0pLCBcIiDCoFJlbmFtZSBMaXN0XCIpXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmZvcm0oe29uU3VibWl0OiB0aGlzLnJlbmFtZUxpc3R9LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHtpZDogXCJuZXdMaXN0TmFtZVwiLCB0eXBlOiBcInRleHRcIiwgcGxhY2Vob2xkZXI6IFwiRW50ZXIgbGlzdCB0aXRsZS4uLlwiLCBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sXCJ9KSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucmVuYW1lTGlzdCwgXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2Vzc1wiLCBcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJywgd2lkdGg6JzEwMCUnfX0sIFxuICAgICAgICAgICAgICAgICAgICAgIFwiQ3JlYXRlIExpc3RcIlxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgXCJTY2hlZHVsc1wiXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY3VycmVudFByb3NwZWN0OiAwLFxuICAgIH1cbiAgfSxcbiAgLy9TZW5kRW1haWxNb2RhbFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIC8vY29uc29sZS5sb2codGhpcy5wcm9wcy5jdXJyZW50VGVtcGxhdGUpXG4gICAgcHJvc3BlY3QgPSB0aGlzLnByb3BzLnByb3NwZWN0c1t0aGlzLnN0YXRlLmN1cnJlbnRQcm9zcGVjdF1cbiAgICBwcm9zcGVjdCA9IChwcm9zcGVjdCkgPyBwcm9zcGVjdCA6IHsnbmFtZSc6JycsJ2VtYWlsJzonJ31cbiAgICAvL2NvbnNvbGUubG9nKHByb3NwZWN0KVxuICAgIHByb3NwZWN0cyA9IFtdXG4gICAgZm9yKGk9MDsgaTwgdGhpcy5wcm9wcy5wcm9zcGVjdHMubGVuZ3RoOyBpKyspe1xuICAgICAgcHJvc3BlY3RzLnB1c2goVXNlclBsYWNlSG9sZGVyKHtwcm9zcGVjdDogdGhpcy5wcm9wcy5wcm9zcGVjdHNbaV19KSlcbiAgICB9XG4gICAgZW1haWwgPSAocHJvc3BlY3QuZW1haWwpID8gcHJvc3BlY3QuZW1haWwudG9Mb3dlckNhc2UoKSA6IFwiXCJcbiAgICByZXR1cm4gKFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbCBmYWRlIGJzLXNlbmRFbWFpbC1tb2RhbC1sZ1wiLCB0YWJJbmRleDogXCItMVwiLCByb2xlOiBcImRpYWxvZ1wiLCAnYXJpYS1sYWJlbGxlZGJ5JzogXCJteVNtYWxsTW9kYWxMYWJlbFwiLCAnYXJpYS1oaWRkZW4nOiBcInRydWVcIiwgaWQ6IFwic2VuZEVtYWlsTW9kYWxcIiwgc3R5bGU6IHt0b3A6JzEwcHgnfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1sZ1wifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1jb250ZW50XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtaGVhZGVyXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJjbG9zZVwiLCAnZGF0YS1kaXNtaXNzJzogXCJtb2RhbFwifSwgUmVhY3QuRE9NLnNwYW4oeydhcmlhLWhpZGRlbic6IFwidHJ1ZVwifSwgXCLDl1wiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwic3Itb25seVwifSwgXCJDbG9zZVwiKSksIFxuICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBcbiAgICAgICAgICAgICAgICBzdHlsZToge2Zsb2F0OidyaWdodCd9LCBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi1zbVwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wYXBlci1wbGFuZVwifSksIFwiwqBcIiArICcgJyArXG4gICAgICAgICAgICAgICAgXCJTZW5kIEVtYWlsXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgc3R5bGU6IHttYXJnaW5SaWdodDoxMCwgZmxvYXQ6J3JpZ2h0J30sIFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtXCIsICdkYXRhLWRpc21pc3MnOiBcIm1vZGFsXCJ9LCBcIkNsb3NlXCIpLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNCh7Y2xhc3NOYW1lOiBcIm1vZGFsLXRpdGxlXCIsIGlkOiBcIm15TW9kYWxMYWJlbFwifSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZW52ZWxvcGVcIn0pLCBcIiDCoFNlbmQgRW1haWxcIiArICcgJyArXG4gICAgICAgICAgICAgICAgICAgIFwiwqDCoFwiLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLnNtYWxsKG51bGwsIFwiKFwiK3RoaXMucHJvcHMucHJvc3BlY3RzLmxlbmd0aCtcIilcIilcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtYm9keVwiLCBzdHlsZToge3BhZGRpbmdUb3A6NX19LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNChudWxsLCBcIlBlb3BsZVwiKSwgXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwcm9zcGVjdC1jb250YWluZXJcIn0sIFxuICAgICAgICAgICAgICAgICAgICBwcm9zcGVjdHNcbiAgICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNCh7c3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFwiRW1haWxzIMKgwqDCoFwiLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLnNtYWxsKG51bGwsICh0aGlzLnN0YXRlLmN1cnJlbnRQcm9zcGVjdCsxKSsnIG9mICcrdGhpcy5wcm9wcy5wcm9zcGVjdHMubGVuZ3RoKSksIFxuICAgICAgICAgICAgICAgICAgXCLCoMKgwqBcIiwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAodGhpcy5zdGF0ZS5jdXJyZW50UHJvc3BlY3QgPT0gMCApID8gXCJidG4gZGlzYWJsZWRcIiA6IFwiYnRuXCIsIFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnByZXZpb3VzUHJvc3BlY3R9LCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWFycm93LWxlZnRcIn0pKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgIGNsYXNzTmFtZTogKHRoaXMuc3RhdGUuY3VycmVudFByb3NwZWN0ID09IDEzNSApID8gXCJidG4gZGlzYWJsZWRcIiA6IFwiYnRuXCIsIFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLm5leHRQcm9zcGVjdH0sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYXJyb3ctcmlnaHRcIn0pKSwgXG5cbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG5cblJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcImxpc3QtZ3JvdXAgZW1haWwtaG9sZGVyXCIsIHN0eWxlOiB7Ym9yZGVyVG9wOidzb2xpZCAxcHggI2VlZSd9fSwgXG4gIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcImxpc3QtZ3JvdXAtaXRlbVwifSwgXG4gICAgUmVhY3QuRE9NLmg1KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsbWFyZ2luVG9wOjAsbWFyZ2luQm90dG9tOjB9fSwgXCJUbzrCoMKgXCIpLCBcbiAgICBwcm9zcGVjdC5uYW1lICsgXCIgLSBcIiArIGVtYWlsXG4gICksIFxuICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJsaXN0LWdyb3VwLWl0ZW1cIn0sIFxuICAgIFJlYWN0LkRPTS5oNSh7c3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLG1hcmdpblRvcDowLG1hcmdpbkJvdHRvbTowfX0sIFwiU3ViamVjdDrCoMKgXCIpLCBcIiBcIiwgdGhpcy5wcm9wcy5jdXJyZW50VGVtcGxhdGUuc3ViamVjdFxuICApLCBcbiAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cC1pdGVtIGJvZHlcIn0pXG4pXG4gIFxuICAgICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICAgKSwgXG5cbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1mb290ZXJcIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tZGVmYXVsdFwiLCAnZGF0YS1kaXNtaXNzJzogXCJtb2RhbFwifSwgXCJDbG9zZVwiKSwgXG4gICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnlcIn0sIFwiU2VuZCBFbWFpbFwiKVxuICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgcHJldmlvdXNQcm9zcGVjdDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudFByb3NwZWN0OiB0aGlzLnN0YXRlLmN1cnJlbnRQcm9zcGVjdC0xIH0pXG4gIH0sXG5cbiAgbmV4dFByb3NwZWN0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50UHJvc3BlY3Q6IHRoaXMuc3RhdGUuY3VycmVudFByb3NwZWN0KzEgfSlcbiAgfSxcblxuICBwYXJzZVRlbXBsYXRlOiBmdW5jdGlvbih0ZW1wbGF0ZUJvZHkpIHtcbiAgICBmaXJzdF9uYW1lID0gcHJvc3BlY3QubmFtZS5zcGxpdCgnICcpWzBdXG4gICAgLy9oaXJpbmdfc2lnbmFsID0gcHJvc3BlY3Quc2lnbmFsc1xuXG4gICAgc2lnbmFscyA9IChwcm9zcGVjdC5zaWduYWxzKSA/IHByb3NwZWN0LnNpZ25hbHNbMF0gOiBcIlwiXG4gICAgdGVtcGxhdGVCb2R5ID0gTXVzdGFjaGUucmVuZGVyKHRlbXBsYXRlQm9keSwge1xuICAgICAgaGlyaW5nX3NpZ25hbDogc2lnbmFscyxcbiAgICAgIGZpcnN0X25hbWU6IHByb3NwZWN0Lm5hbWUuc3BsaXQoJyAnKVswXVxuICAgIH0pXG5cbiAgICBjb25zb2xlLmxvZyh0ZW1wbGF0ZUJvZHkpXG4gICAgICBcbiAgICByZXR1cm4gdGVtcGxhdGVCb2R5XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgICAvL2NvbnNvbGUubG9nKHRoaXMucHJvcHMuY3VycmVudFRlbXBsYXRlKVxuICAgIHBhcnNlZFRlbXBsYXRlID0gdGhpcy5wYXJzZVRlbXBsYXRlKHRoaXMucHJvcHMuY3VycmVudFRlbXBsYXRlLmJvZHkpXG4gICAgXG4gICAgLy8kKCcuYm9keScpLmh0bWwodGhpcy5wcm9wcy5jdXJyZW50VGVtcGxhdGUuYm9keSlcbiAgICAkKCcuYm9keScpLmh0bWwocGFyc2VkVGVtcGxhdGUpXG4gIH1cbn0pO1xuXG52YXIgVXNlclBsYWNlSG9sZGVyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnVXNlclBsYWNlSG9sZGVyJyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwXCIsIHN0eWxlOiB7bWFyZ2luUmlnaHQ6NSxtYXJnaW5Cb3R0b206NX19LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1zbVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdXNlclwifSksIFwiwqDCoFwiLCBcbiAgICAgICAgICAgICAgKHRoaXMucHJvcHMucHJvc3BlY3QpID8gdGhpcy5wcm9wcy5wcm9zcGVjdC5uYW1lIDogXCJcIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXNtXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdHJhc2gtb1wifSlcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICApXG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIFNlbnQgTWFpbFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzZW50RW1haWxzOiBbXVxuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgdGhpc3MgPSB0aGlzO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1NlbnRFbWFpbCcsXG4gICAgICBkYXRhOntpbmNsdWRlOiAnY2FtcGFpZ24scHJvc3BlY3QscHJvc3BlY3QuZW1haWxfZ3Vlc3Nlcy5wYXR0ZXJuJ30sXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyB0aGlzcy5zZXRTdGF0ZSh7c2VudEVtYWlsczogcmVzLnJlc3VsdHN9KSB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkge31cbiAgICB9KVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgc2VudEVtYWlscyA9IFtdXG4gICAgZm9yKGk9MDtpPCB0aGlzLnN0YXRlLnNlbnRFbWFpbHMubGVuZ3RoOyBpKyspIFxuICAgICAgc2VudEVtYWlscy5wdXNoKFNlbnRFbWFpbFJvdyh7c2VudEVtYWlsOiB0aGlzLnN0YXRlLnNlbnRFbWFpbHNbaV19KSlcblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge292ZXJmbG93OidhdXRvJyxoZWlnaHQ6NTUwfX0sIFxuICAgICAgICBSZWFjdC5ET00udGFibGUoe2NsYXNzTmFtZTogXCJ0YWJsZSB0YWJsZS1zdHJpcGVkXCIsIHN0eWxlOiB7bWFyZ2luQm90dG9tOjB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRoZWFkKG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIlByb3NwZWN0IE5hbWVcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiUHJvc3BlY3QgRW1haWxcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3dpZHRoOjI5MH19LCBcIlN0YXR1c1wiKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS50Ym9keShudWxsLCBcbiAgICAgICAgICAgIHNlbnRFbWFpbHNcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxudmFyIFNlbnRFbWFpbFJvdyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1NlbnRFbWFpbFJvdycsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgc2VudEVtYWlsID0gdGhpcy5wcm9wcy5zZW50RW1haWxcbiAgICAvL2NvbnNvbGUubG9nKHNlbnRFbWFpbClcblxuICAgIGVtYWlsID0gc2VudEVtYWlsLmVtYWlsXG4gICAgaWYoZW1haWwgPT0gXCJub19lbWFpbFwiKXtcbiAgICAgIGZpcnN0ID0gc2VudEVtYWlsLnByb3NwZWN0Lm5hbWUuc3BsaXQoJyAnKVswXVxuICAgICAgbGFzdCA9IF8ubGFzdChzZW50RW1haWwucHJvc3BlY3QubmFtZS5zcGxpdCgnICcpKVxuXG4gICAgICBwYXR0ZXJuID0gXy5maW5kV2hlcmUoc2VudEVtYWlsLnByb3NwZWN0LmVtYWlsX2d1ZXNzZXMsIHsndHJpZWQnOmZhbHNlfSlcbiAgICAgIGRhdGEgPSB7Zmlyc3Q6IGZpcnN0LCBsYXN0OiBsYXN0LCBmaTogZmlyc3RbMF0sIGxpOiBsYXN0WzBdfVxuICAgICAgZW1haWwgPSBNdXN0YWNoZS5yZW5kZXIocGF0dGVybi5wYXR0ZXJuLnBhdHRlcm4sIGRhdGEpLnRvTG93ZXJDYXNlKClcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnRyKG51bGwsIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgUmVhY3QuRE9NLmg2KG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG9ja1wifSksIFxuICAgICAgICAgICAgbW9tZW50KHNlbnRFbWFpbC5jcmVhdGVkQXQpLmZyb21Ob3coKSkpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtmb250U2l6ZToxNCxmb250V2VpZ2h0Oidib2xkJyxtYXJnaW5Cb3R0b206MH19LCBzZW50RW1haWwucHJvc3BlY3QubmFtZSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5Ub3A6NCxtYXJnaW5Cb3R0b206MH19LCBzZW50RW1haWwucHJvc3BlY3QucG9zLnRyaW0oKSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5Ub3A6NH19LCBzZW50RW1haWwucHJvc3BlY3QuY29tcGFueV9uYW1lKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFJlYWN0LkRPTS5oNihudWxsLCBlbWFpbCkpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3BhZGRpbmdUb3A6MTN9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1kZWZhdWx0XCJ9LCBcIlF1ZXVlZFwiKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jaGV2cm9uLWNpcmNsZS1yaWdodCB0ZXh0LW11dGVkXCIsIFxuICAgICAgICAgICAgIHN0eWxlOiB7cGFkZGluZ0xlZnQ6NSxwYWRkaW5nUmlnaHQ6NX19KSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1zdWNjZXNzXCJ9LCBcIk9wZW5lZFwiKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jaGV2cm9uLWNpcmNsZS1yaWdodCB0ZXh0LW11dGVkXCIsIFxuICAgICAgICAgICAgIHN0eWxlOiB7cGFkZGluZ0xlZnQ6NSxwYWRkaW5nUmlnaHQ6NX19KSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1kZWZhdWx0XCJ9LCBcIkRlbGl2ZXJlZFwiKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jaGV2cm9uLWNpcmNsZS1yaWdodCB0ZXh0LW11dGVkXCIsIFxuICAgICAgICAgICAgIHN0eWxlOiB7cGFkZGluZ0xlZnQ6NSxwYWRkaW5nUmlnaHQ6NX19KSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1kZWZhdWx0XCJ9LCBcIlJlcGxpZWRcIilcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfVxufSlcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG52YXIgU2lkZU1lbnVMaXN0T3B0aW9uID0gcmVxdWlyZSgnLi91c2VyX3NpZGVfbWVudV9saXN0LmpzLm1pbi5qcycpO1xudmFyIGNyZWF0ZUxpc3RNb2RhbCA9IHJlcXVpcmUoJy4vY3JlYXRlX2xpc3RfbW9kYWwuanMubWluLmpzJylcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy9TaWRlTWVudVByb3NwZWN0cyAtIFNpZGVMaXN0XG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8qXG4gICAgICBjcmVhdGVMaXN0OiBcbiAgICAgIHJlbmFtZUxpc3Q6XG4gICAgICBkZWxldGVMaXN0OlxuICAgICAgY2hhbmdlTGlzdDpcbiAgICAgIGN1cnJlbnRMaXN0OlxuICAgICAgdG90YWxDb3VudDpcbiAgICAgIGxpc3RzOlxuICAgICAgKi9cbiAgICB9XG4gIH0sXG5cbiAgY3JlYXRlTGlzdDogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICB0aGlzLnByb3BzLmNyZWF0ZUxpc3QoZGF0YSlcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gIH0sXG5cbiAgY2hhbmdlTGlzdDogZnVuY3Rpb24oZSkge1xuICAgIC8qXG4gICAgY3VycmVudExpc3QgPSAkKGUudGFyZ2V0KS5wYXJlbnQoKS8vLmRhdGEoJ2xpc3QnKVxuICAgIGNvbnNvbGUubG9nKGN1cnJlbnRMaXN0KVxuICAgIHRoaXMucHJvcHMuY2hhbmdlTGlzdChjdXJyZW50TGlzdC5uYW1lLCBjdXJyZW50TGlzdC5vYmplY3RJZClcbiAgICAqL1xuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgaWYodGhpcy5wcm9wcy5jdXJyZW50TGlzdCA9PSBcIkFsbFwiKVxuICAgICAgc3R5bGVzID0geydiYWNrZ3JvdW5kQ29sb3InOidyZ2IoMCwgMTIyLCAyNTUpJywgJ2NvbG9yJzond2hpdGUnfSBcbiAgICBlbHNlXG4gICAgICBzdHlsZXMgPSAge31cblxuICAgIGxpc3RzID0gW1NpZGVNZW51TGlzdE9wdGlvbih7bGlzdDoge25hbWU6ICdBbGwnLGNvdW50OiB0aGlzLnByb3BzLnRvdGFsQ291bnR9LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25UeXBlOiAndXNlcnMnLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZUxpc3Q6IHRoaXMucHJvcHMuY2hhbmdlTGlzdH0pLCBcbiAgICAgICAgICAgICBTaWRlTWVudUxpc3RPcHRpb24oe2xpc3Q6IHtuYW1lOiAnQXJjaGl2ZWQnLCBjb3VudDogJ34nfSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uVHlwZTogJ2FyY2hpdmUnLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZUxpc3Q6IHRoaXMucHJvcHMuY2hhbmdlTGlzdCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlQ291bnQ6IHRydWV9KV1cblxuICAgIGZvcihpPTA7aTwgdGhpcy5wcm9wcy5saXN0cy5sZW5ndGg7aSsrKXtcbiAgICAgIGxpc3QgPSB0aGlzLnByb3BzLmxpc3RzW2ldXG4gICAgICBpZihsaXN0Lmxpc3RfdHlwZSA9PSBcInNpZ25hbF9saXN0XCIpXG4gICAgICAgIGljb25UeXBlID0gXCJ3aWZpXCJcbiAgICAgIGVsc2UgaWYgKGxpc3QubGlzdF90eXBlID09IFwibWluaW5nX2pvYlwiKVxuICAgICAgICBpY29uVHlwZSA9IFwiY2xvdWREb3dubG9hZFwiXG4gICAgICBpZihsaXN0Lmxpc3RfdHlwZSlcbiAgICAgICAgbGlzdHMucHVzaCggU2lkZU1lbnVMaXN0T3B0aW9uKHtsaXN0OiBsaXN0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uVHlwZTogaWNvblR5cGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZUxpc3Q6IHRoaXMucHJvcHMuY2hhbmdlTGlzdH0pKVxuICAgICAgZWxzZSBcbiAgICAgICAgbGlzdHMucHVzaCggU2lkZU1lbnVMaXN0T3B0aW9uKHtsaXN0OiBsaXN0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VMaXN0OiB0aGlzLnByb3BzLmNoYW5nZUxpc3R9KSlcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1sZy0yIGNvbC1tZC0yIGNvbC1zbS0yIGNvbC14cy0yXCIsIFxuICAgICAgICAgICBzdHlsZToge3BhZGRpbmc6JzAnLGhlaWdodDonNDM4cHgnLGJhY2tncm91bmRDb2xvcjonI2UwZTllZScsXG4gICAgICAgICAgICAgICAgICAgYm9yZGVyUmlnaHQ6JzFweCBzb2xpZCAjYjBiOGJmJyx0ZXh0QWxpZ246J2NlbnRlcid9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwcm9zcGVjdC1saXN0LWhlYWRlclwifSwgXCIgTGlzdHMgXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cC12ZXJ0aWNhbFwiLCBcbiAgICAgICAgICAgICBzdHlsZToge3dpZHRoOicxMDAlJywgaGVpZ2h0OiAnMzIwcHgnLCBvdmVyZmxvdzogJ2F1dG8nfX0sIFxuICAgICAgICAgIGxpc3RzXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgbmV3LWxpc3QtYnRuXCIsIFxuICAgICAgICAgICAgICAnZGF0YS10b2dnbGUnOiBcIm1vZGFsXCIsICdkYXRhLXRhcmdldCc6IFwiLmJzLWV4YW1wbGUtbW9kYWwtc21cIiwgXG4gICAgICAgICAgICAgIHN0eWxlOiB7IGJhY2tncm91bmRJbWFnZTogJ2xpbmVhci1ncmFkaWVudCgxODBkZWcsICMwMDk2ZmYgMCUsICMwMDVkZmYgMTAwJSknfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1cy1jaXJjbGVcIn0pLCBcIsKgwqBOZXcgTGlzdFwiXG4gICAgICAgICksIFxuICAgICAgICBjcmVhdGVMaXN0TW9kYWwoe2NyZWF0ZUxpc3Q6IHRoaXMuY3JlYXRlTGlzdCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgbGlzdENsYXNzTmFtZTogdGhpcy5wcm9wcy5saXN0Q2xhc3NOYW1lfSksIFwiIFwiLCBSZWFjdC5ET00uYnIobnVsbClcbiAgICAgIClcbiAgICApO1xuICB9LFxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gU2lnbmFsQ2FsZW5kYXJcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVwb3J0cyA6IFtdXG4gICAgfVxuICB9LFxuXG4gIGdldFNpZ25hbFJlcG9ydDogZnVuY3Rpb24oKSB7XG4gICAgdGhpc3NzcyA9IHRoaXM7XG4gICAgcXJ5ID0geyd3aGVyZScgOiBKU09OLnN0cmluZ2lmeSh7cHJvZmlsZTp7XG4gICAgICBfX3R5cGU6J1BvaW50ZXInLFxuICAgICAgY2xhc3NOYW1lOidQcm9zcGVjdFByb2ZpbGUnLFxuICAgICAgb2JqZWN0SWQ6dGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZS5vYmplY3RJZFxuICAgIH19KX1cblxuICAgIC8vIEdldCBTaWduYWwgUmVwb3J0cyBPZiBDdXJyZW50IFByb2ZpbGVcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9TaWduYWxSZXBvcnQ/b3JkZXI9LWNyZWF0ZWRBdCcsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgaGVhZGVyczphcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2cocmVzLnJlc3VsdHMpXG4gICAgICAgIHRoaXNzc3Muc2V0U3RhdGUoe3JlcG9ydHM6IHJlcy5yZXN1bHRzfSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgLy90aGlzLmdldFNpZ25hbFJlcG9ydCgpXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgICAvL3RoaXMuZ2V0U2lnbmFsUmVwb3J0KClcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJlcG9ydHMgPSBbXVxuICAgIGZvcihpPTA7aTwgdGhpcy5wcm9wcy5yZXBvcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICByZXBvcnRzLnB1c2goU2lnbmFsUmVwb3J0Um93KHtzZXRDdXJyZW50UmVwb3J0OiB0aGlzLnNldEN1cnJlbnRSZXBvcnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvc3BlY3RTaWduYWxSZXBvcnQ6IHRoaXMucHJvc3BlY3RTaWduYWxSZXBvcnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFZpZXc6IHRoaXMuc2V0Q3VycmVudFZpZXcsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwb3J0OiB0aGlzLnByb3BzLnJlcG9ydHNbaV19KSlcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lclwiLCBzdHlsZToge3BhZGRpbmdMZWZ0OjAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDowLHdpZHRoOicxMDAlJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtoZWlnaHQ6NDQsYm9yZGVyQm90dG9tOidzb2xpZCAxcHggcmdiKDIyMSwgMjIxLCAyMjEpJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDQoe29uQ2xpY2s6IHRoaXMucmV0dXJuVG9DYWxlbmRhclZpZXcsIFxuICAgICAgICAgICAgICBzdHlsZToge2ZvbnRXZWlnaHQ6MjAwLCBmbG9hdDonbGVmdCcsY3Vyc29yOidwb2ludGVyJyxtYXJnaW5Ub3A6NyxcbiAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nTGVmdDoyMCxwYWRkaW5nVG9wOjUsIGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jYWxlbmRhclwiLCBzdHlsZToge21hcmdpblJpZ2h0OjV9fSksIFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGUubmFtZVxuICAgICAgICAgIClcbiAgICAgICAgICBcblxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0xMlwiLCBzdHlsZToge3BhZGRpbmdMZWZ0OjAscGFkZGluZ1JpZ2h0OjAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OjM1NixvdmVyZmxvdzonYXV0byd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtvdmVyZmxvdzonYXV0byd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGFibGUoe2NsYXNzTmFtZTogXCJ0YWJsZSB0YWJsZS1zdHJpcGVkXCIsIHN0eWxlOiB7bWFyZ2luQm90dG9tOjB9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50aGVhZChudWxsLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9fSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNsb2NrLW9cIn0pLCBcIiBMYXN0IFJhblwiXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcIlBvc3RlZCBKb2IgTGlzdGluZ1wiKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiQ29tcGFueSBTaWduYWxzXCIpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXCJQcm9zcGVjdCBTaWduYWxzXCIpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7d2lkdGg6MTUwLHRleHRBbGlnbjonY2VudGVyJ319KVxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnRib2R5KHtjbGFzc05hbWU6IFwicmVwb3J0c1wifSwgXG4gICAgICAgICAgICAgICAgcmVwb3J0c1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfSxcblxuICBzZXRDdXJyZW50UmVwb3J0OiBmdW5jdGlvbihuZXdSZXBvcnQpIHtcbiAgICB0aGlzLnByb3BzLnNldEN1cnJlbnRSZXBvcnQobmV3UmVwb3J0KVxuICB9LFxuXG4gIHByb3NwZWN0U2lnbmFsUmVwb3J0OiBmdW5jdGlvbihzaWduYWxSZXBvcnQpIHtcbiAgICB0aGlzLnByb3BzLnByb3NwZWN0U2lnbmFsUmVwb3J0KHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGUsIHNpZ25hbFJlcG9ydClcbiAgfSxcbn0pO1xuXG52YXIgU2lnbmFsUmVwb3J0Um93ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnU2lnbmFsUmVwb3J0Um93JyxcbiAgcm93Q2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgIGlmKHRoaXMucHJvcHMucmVwb3J0LmRvbmUpXG4gICAgICB0aGlzLnByb3BzLnNldEN1cnJlbnRSZXBvcnQodGhpcy5wcm9wcy5yZXBvcnQpXG4gICAgZWxzZVxuICAgICAgYWxlcnRpZnkubG9nKFwiVGhpcyBtaW5pbmcgam9iIGlzIHN0aWxsIGluIHByb2dyZXNzLiBZb3UnbGwgYmUgbm90aWZpZWQgd2hlbiBpdCdzIGNvbXBsZXRlZFwiKVxuICB9LFxuXG4gIHByb3NwZWN0U2lnbmFsUmVwb3J0OiBmdW5jdGlvbihlKSB7XG4gICAgdGhpcy5wcm9wcy5wcm9zcGVjdFNpZ25hbFJlcG9ydCh0aGlzLnByb3BzLnJlcG9ydClcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gIH0sXG5cblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHByb3NwZWN0ZWQgPSB0aGlzLnByb3BzLnJlcG9ydC5wcm9zcGVjdGVkXG4gICAgaWYoIXRoaXMucHJvcHMucmVwb3J0Lm1pbmluZ19qb2IpXG4gICAgICBpY29uID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS13aWZpXCJ9KVxuICAgIGVsc2VcbiAgICAgIGljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNsb3VkLWRvd25sb2FkXCIsIHN0eWxlOiB7Y29sb3I6JyM1NTUnfX0pXG5cbiAgICBsb2FkaW5nID0gKCF0aGlzLnByb3BzLnJlcG9ydC5kb25lKSA/IFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwcm9maWxlLWxvYWRpbmdcIiwgc3R5bGU6IHttYXJnaW5MZWZ0OjMwfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJkb3VibGUtYm91bmNlMVwiLCBzdHlsZToge2JhY2tncm91bmRDb2xvcjonIzVjYjg1Yyd9fSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJkb3VibGUtYm91bmNlMlwiLCBzdHlsZToge2JhY2tncm91bmRDb2xvcjonIzVjYjg1Yyd9fSlcbiAgICAgICAgICApIDogUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucHJvc3BlY3RTaWduYWxSZXBvcnQsIFxuICAgICAgICAgICAgIHN0eWxlOiB7Zm9udFdlaWdodDonYm9sZCcsbWFyZ2luVG9wOjV9LCBcbiAgICAgY2xhc3NOYW1lOiAocHJvc3BlY3RlZCkgPyBcImJ0biBidG4teHMgYnRuLXN1Y2Nlc3MgZGlzYWJsZWRcIiA6IFwiYnRuIGJ0bi14cyBidG4tc3VjY2Vzc1wifSwgXG4gICAgICAgICAgICAgKHByb3NwZWN0ZWQpID8gJ1Byb3NwZWN0ZWQnIDogJ1Byb3NwZWN0IEFsbCdcbiAgICAgICAgICApXG4gICAgLy8gTWFrZSBhbiBBbGVydCB3aGVuIHNvbWVib2R5IGNsaWNrcyBvbiBpbiBwcm9ncmVzcyBzaWduYWwgcmVwb3J0XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS50cih7b25DbGljazogdGhpcy5yb3dDbGljaywgc3R5bGU6IHtjdXJzb3I6J3BvaW50ZXInfX0sIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidyaWdodCcscGFkZGluZ1RvcDoxNX19LCBcbiAgICAgICAgICBpY29uXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBcbiAgICAgICAgICAgIG1vbWVudCh0aGlzLnByb3BzLnJlcG9ydC5jcmVhdGVkQXQpLmZyb21Ob3coKVxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIFxuICAgICAgICAgICdsb2wnXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwibGFiZWwgbGFiZWwtc3VjY2Vzc1wifSwgXG4gICAgICAgICAgICB0aGlzLnByb3BzLnJlcG9ydC5jb21wYW55X2NvdW50XG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICBcIsKgIENvbXBhbmllcyBmb3VuZC5cIlxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLXN1Y2Nlc3NcIn0sIFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5yZXBvcnQucGVvcGxlX2NvdW50XG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICBcIsKgIFBlb3BsZSBmb3VuZC5cIlxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6ICh0aGlzLnByb3BzLnJlcG9ydC5kb25lKSA/IHt9IDoge3BhZGRpbmdUb3A6MTd9fSwgXG4gICAgICAgICAgbG9hZGluZ1xuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBTaWduYWxEZXRhaWxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2lnbmFsczogW11cbiAgICB9XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXNzc3MgPSB0aGlzO1xuICAgIGN1cnJlbnRQcm9maWxlUmVwb3J0ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgX190eXBlOiAnUG9pbnRlcicsXG4gICAgICBjbGFzc05hbWU6ICdTaWduYWxSZXBvcnQnLFxuICAgICAgb2JqZWN0SWQ6IHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGVSZXBvcnQub2JqZWN0SWRcbiAgICB9KVxuXG4gICAgY29uc29sZS5sb2coJ0NVUlJFTlQgUFJPRklMRScpXG4gICAgY29uc29sZS5sb2coY3VycmVudFByb2ZpbGVSZXBvcnQpXG4gICAgcXJ5ID0gJ3doZXJlPXtcInNpZ25hbF9yZXBvcnRcIjonK2N1cnJlbnRQcm9maWxlUmVwb3J0Kyd9JmluY2x1ZGU9Y29tcGFueV9zaWduYWwsY29tcGFueV9zaWduYWwuc2lnbmFscyZvcmRlcj0tY3JlYXRlZEF0J1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Blb3BsZVNpZ25hbD8nK3FyeSxcbiAgICAgIHR5cGU6J0dFVCcsXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5wYXJzZUhlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1NJR05BTCBERVRBSUwnKVxuICAgICAgICBjb25zb2xlLmxvZyhyZXMucmVzdWx0cylcbiAgICAgICAgdGhpc3Nzcy5zZXRTdGF0ZSh7c2lnbmFsczogcmVzLnJlc3VsdHN9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIHJldHVyblRvQ2FsZW5kYXJWaWV3OiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygncmV0dXJuIHRvIGNhbGVuZGFyIHZpZXcnKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgc2lnbmFscyA9IFtdXG4gICAgZm9yKGk9MDtpPCB0aGlzLnN0YXRlLnNpZ25hbHMubGVuZ3RoOyBpKyspXG4gICAgICBzaWduYWxzLnB1c2goU2lnbmFsUm93KHtzaWduYWw6IHRoaXMuc3RhdGUuc2lnbmFsc1tpXX0pKVxuXG4gICAgY3VycmVudFByb2ZpbGVSZXBvcnQgPSB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlUmVwb3J0XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb250YWluZXJcIiwgc3R5bGU6IHtoZWlnaHQ6MzU2LHBhZGRpbmdMZWZ0OjAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDowLHdpZHRoOicxMDAlJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtoZWlnaHQ6NDQsYm9yZGVyQm90dG9tOidzb2xpZCAxcHggcmdiKDIyMSwgMjIxLCAyMjEpJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDQoe29uQ2xpY2s6IHRoaXMucmV0dXJuVG9DYWxlbmRhclZpZXcsIFxuICAgICAgICAgICAgICBzdHlsZToge2Zsb2F0OidsZWZ0JyxjdXJzb3I6J3BvaW50ZXInLG1hcmdpblRvcDo3LGZvbnRXZWlnaHQ6MjAwLFxuICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OjIwLHBhZGRpbmdUb3A6NSxkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNhbGVuZGFyXCIsIHN0eWxlOiB7bWFyZ2luUmlnaHQ6NX19KSwgXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZS5uYW1lXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2ZvbnRTaXplOjEzLHBhZGRpbmdMZWZ0OjUscGFkZGluZ1RvcDo1LGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZXZyb24tcmlnaHRcIiwgc3R5bGU6IHtmb250U2l6ZTo5fX0pLCBcIiDCoFwiLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvY2stb1wifSksIFwiIMKgXCIsIFxuICAgICAgICAgICAgbW9tZW50KGN1cnJlbnRQcm9maWxlUmVwb3J0LmNyZWF0ZWRBdCkuZnJvbU5vdygpLCBcIiDCoFwiXG4gICAgICAgICAgKSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLGZsb2F0OidyaWdodCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6MTAsbWFyZ2luVG9wOjEwfSwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHNcIn0sIFxuICAgICAgICAgICAgXCJQcm9zcGVjdCBBbGxcIlxuICAgICAgICAgICksIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cFwiLCBcbiAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6MTAsbWFyZ2luUmlnaHQ6MTB9LCBcbiAgICAgICAgICAgICAgICdkYXRhLXRvZ2dsZSc6IFwiYnV0dG9uc1wifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXhzIGJ0bi1kZWZhdWx0IGFjdGl2ZVwiLCBzdHlsZToge3dpZHRoOjMwfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS11c2VyXCJ9KVxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXhzIGJ0bi1kZWZhdWx0XCIsIHN0eWxlOiB7d2lkdGg6MzB9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWJ1aWxkaW5nXCJ9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcblxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0xMlwiLCBzdHlsZToge3BhZGRpbmdMZWZ0OjAscGFkZGluZ1JpZ2h0OjB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtvdmVyZmxvdzonYXV0bycsaGVpZ2h0OjM1Nn19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50YWJsZSh7Y2xhc3NOYW1lOiBcInRhYmxlIHRhYmxlLXN0cmlwZWRcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGhlYWQobnVsbCwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyx3aWR0aDo5MH19LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvY2stb1wifSlcbiAgICAgICAgICAgICAgICApLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIlBlb3BsZVwiKSwgXG5cbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJDb21wYW5pZXNcIiksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3dpZHRoOjkwLHRleHRBbGlnbjonY2VudGVyJ319XG4gICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGJvZHkoe2NsYXNzTmFtZTogXCJyZXBvcnRzXCJ9LCBcbiAgICAgICAgICAgICAgICBzaWduYWxzXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxudmFyIFNpZ25hbFJvdyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1NpZ25hbFJvdycsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgY29tcGFueSA9ICh0aGlzLnByb3BzLnNpZ25hbC5jb21wYW55X3NpZ25hbCkgPyB0aGlzLnByb3BzLnNpZ25hbC5jb21wYW55X3NpZ25hbCA6IHt9XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS50cihudWxsLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgXG4gICAgICAgICAgICBtb21lbnQodGhpcy5wcm9wcy5zaWduYWwuY3JlYXRlZEF0KS5mcm9tTm93KClcbiAgICAgICAgICApXG4gICAgICAgICksIFxuXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgdGhpcy5wcm9wcy5zaWduYWwubGlua190ZXh0KSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIHRoaXMucHJvcHMuc2lnbmFsLnRpdGxlKVxuICAgICAgICApLCBcblxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIGNvbXBhbnkubmFtZSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCB0aGlzLnByb3BzLnNpZ25hbC50aXRsZSlcbiAgICAgICAgKSwgXG5cbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzXCIsIFxuICAgICAgICAgICAgc3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJ319LCBcbiAgICAgICAgICAgIFwiUHJvc3BlY3RcIlxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfVxufSlcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBTaWduYWxMb2FkaW5nXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvdW50OiAnficsXG4gICAgICBwcm9zcGVjdE5hbWUgOiAnficsXG4gICAgICBwcm9zcGVjdFRpdGxlIDogJ34nLFxuICAgICAgY29tcGFueU5hbWUgOiAnficsXG4gICAgfVxuICB9LFxuXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgdmFyIHB1c2hlciA9IG5ldyBQdXNoZXIoJzFhNjhhOTZjOGZkZTkzOGZhNzVhJyk7XG4gICAgb2JqZWN0SWQgPSB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm9iamVjdElkXG4gICAgdmFyIGNoYW5uZWwgPSBwdXNoZXIuc3Vic2NyaWJlKG9iamVjdElkKTtcbiAgICBjaGFubmVsLmJpbmQoXCJteS1ldmVudFwiLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKVxuICAgICAgdGhpc3Muc2V0U3RhdGUoe1xuICAgICAgICBjb3VudDogZGF0YS5jb3VudCxcbiAgICAgICAgcHJvc3BlY3ROYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgIHByb3NwZWN0VGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgIGNvbXBhbnlOYW1lOiBkYXRhLmNvbXBhbnlcbiAgICAgIH0pXG4gICAgfSk7XG5cbiAgICAvLyBHZXQgU2lnbmFsIFJlcG9ydCBDb3VudFxuICAgIC8vIEdldCBMYXN0IFBlb3BsZVNpZ25hbCBGb3VuZFxuICAgIHFyeSA9IHsgcHJvZmlsZTogYXBwQ29uZmlnLnBvaW50ZXIoJ1Byb3NwZWN0UHJvZmlsZScsb2JqZWN0SWQpIH1cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1NpZ25hbFJlcG9ydCcsXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgZGF0YTogeyd3aGVyZSc6SlNPTi5zdHJpbmdpZnkocXJ5KSxvcmRlcjonLWNyZWF0ZWRBdCd9LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2cocmVzKVxuICAgICAgICBjb3VudCA9IChyZXMucmVzdWx0c1swXSkgPyByZXMucmVzdWx0c1swXS5wZW9wbGVfY291bnQgOiAwXG4gICAgICAgIFxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7Y291bnQ6IGNvdW50IH0pXG4gICAgICB9LFxuICAgIH0pO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUGVvcGxlU2lnbmFsJyxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBkYXRhOiB7J3doZXJlJzpKU09OLnN0cmluZ2lmeShxcnkpLG9yZGVyOictY3JlYXRlZEF0J30sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtcbiAgICAgICAgICBwcm9zcGVjdE5hbWU6IChyZXMucmVzdWx0c1swXSkgPyByZXMucmVzdWx0c1swXS5saW5rX3RleHQgOiBcIlwiLFxuICAgICAgICAgIHByb3NwZWN0VGl0bGU6IChyZXMucmVzdWx0c1swXSkgPyByZXMucmVzdWx0c1swXS50aXRsZSA6IFwiXCIsXG4gICAgICAgICAgY29tcGFueU5hbWU6IChyZXMucmVzdWx0c1swXSkgPyByZXMucmVzdWx0c1swXS5jb21wYW55IDogXCJcIlxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICB9KTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgUHVzaGVyLmxvZyA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgIGlmICh3aW5kb3cuY29uc29sZSAmJiB3aW5kb3cuY29uc29sZS5sb2cpIHtcbiAgICAgICAgLy93aW5kb3cuY29uc29sZS5sb2cobWVzc2FnZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuaW5pdGlhbGl6ZSgpXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgfSxcblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGNvdW50OiAnficsXG4gICAgICBwcm9zcGVjdE5hbWUgOiAnficsXG4gICAgICBwcm9zcGVjdFRpdGxlIDogJ34nLFxuICAgICAgY29tcGFueU5hbWUgOiAnficsXG4gICAgfSlcbiAgICB0aGlzLmluaXRpYWxpemUoKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgLy8gU2hvdyBjb21wYW5pZXMgZm9yIGhpcmluZyBzaWduYWxzXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7YmFja2dyb3VuZDonbGluZWFyLWdyYWRpZW50KCNkYWU4ZmYsI2RhZThmZiknLCBiYWNrZ3JvdW5kSW1hZ2U6ICdyYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IGNlbnRlciBjZW50ZXIsI2ZmZiwjZGZmMWZkIDkwMHB4KScsaGVpZ2h0OicxMDAlJyxwYWRkaW5nVG9wOjEwfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwic2lnbmFsLWNhcmRcIiwgc3R5bGU6IHtcbiAgICAgICAgICAgIHdpZHRoOjUwMCx0ZXh0QWxpZ246J2NlbnRlcicsZGlzcGxheTonYmxvY2snLG1hcmdpblJpZ2h0OidhdXRvJyxcbiAgICAgICAgICAgIG1hcmdpbkxlZnQ6J2F1dG8nLG1hcmdpblRvcDowLGhlaWdodDoyMDBcbiAgICAgICAgICB9fSwgXG5cbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImxvYWRpbmctdHdvLWJhbGxzXCIsIHN0eWxlOiB7aGVpZ2h0OjIwLHdpZHRoOjIwfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJkb3QxXCIsIHN0eWxlOiB7Y29sb3I6J2JsYWNrJ319KSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRvdDJcIiwgc3R5bGU6IHtjb2xvcjonYmxhY2snfX0pXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJcIiwgc3R5bGU6IHtjb2xvcjonIzFjYTNmZCcsIGZvbnRXZWlnaHQ6J2JvbGQnLG1hcmdpblRvcDotMTAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6LTIwMCwgZm9udFNpemU6MzIsIGZvbnRGYW1pbHk6J1Byb3hpbWEtTm92YSd9fSwgXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmNvdW50ICsgXCIgcGVvcGxlIGZvdW5kLlwiXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDotNDgsbWFyZ2luUmlnaHQ6NTV9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luQm90dG9tOjMsIGZvbnRXZWlnaHQ6J2JvbGQnfX0sIHRoaXMuc3RhdGUucHJvc3BlY3ROYW1lLCBcIiAtIMKgXCIsIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtmb250V2VpZ2h0OjUwMCwgZm9udFN0eWxlOidpdGFsaWMnfX0sIFxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucHJvc3BlY3RUaXRsZSkpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5Ub3A6MCx0ZXh0QWxpZ246J2xlZnQnfX0sIFxuICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNvbXBhbnlOYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9LFxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gU2lnbmFsUHJvZmlsZVxuICBzZXRDdXJyZW50VmlldzogZnVuY3Rpb24oZSkge1xuICAgIGlmKCF0aGlzLnByb3BzLnByb2ZpbGUubWluaW5nX2pvYilcbiAgICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFZpZXcoJ0NhbGVuZGFyJylcbiAgICBlbHNlXG4gICAgICB0aGlzLnByb3BzLnNldEN1cnJlbnRWaWV3KCdNaW5pbmdKb2JDYWxlbmRhcicpXG4gICAgLy9lLnN0b3BQcm9wYWdhdGlvbigpXG4gIH0sXG5cbiAgY2FsZW5kYXJDbGljazpmdW5jdGlvbihlKSB7XG4gICAgdGhpcy5wcm9wcy5zZXRDdXJyZW50UHJvZmlsZSh0aGlzLnByb3BzLnByb2ZpbGUpXG4gICAgaWYoIXRoaXMucHJvcHMucHJvZmlsZS5taW5pbmdfam9iKVxuICAgICAgdGhpcy5wcm9wcy5zZXRDdXJyZW50VmlldygnQ2FsZW5kYXInKVxuICAgIGVsc2VcbiAgICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFZpZXcoJ01pbmluZ0pvYkNhbGVuZGFyJylcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gIH0sXG5cbiAgc2V0Q3VycmVudFByb2ZpbGU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFByb2ZpbGUodGhpcy5wcm9wcy5wcm9maWxlKVxuICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFZpZXcoJ0ZlZWQnKVxuICB9LFxuXG4gIHJlbW92ZVRoZVByb2ZpbGU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucHJvcHMucmVtb3ZlUHJvZmlsZSh0aGlzLnByb3BzLnByb2ZpbGUpXG4gIH0sXG5cbiAgcmVtb3ZlUHJvZmlsZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpc3NzcyA9IHRoaXM7XG4gICAgY29uc29sZS5sb2codGhpc3MucmVtb3ZlVGhlUHJvZmlsZSlcblxuICAgIHN3YWwoeyAgIFxuICAgICAgdGl0bGU6IFwiQXJlIHlvdSBzdXJlP1wiLCAgIFxuICAgICAgdGV4dDogXCJZb3VyIHdpbGwgbm90IGJlIGFibGUgdG8gcmVjb3ZlciB0aGlzIHByb3NwZWN0IGxpc3QhXCIsICAgXG4gICAgICB0eXBlOiBcIndhcm5pbmdcIiwgICBcbiAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsICAgXG4gICAgICBjb25maXJtQnV0dG9uQ29sb3I6IFwiI0RENkI1NVwiLCAgIFxuICAgICAgY29uZmlybUJ1dHRvblRleHQ6IFwiWWVzLCBkZWxldGUgaXQhXCIsICAgXG4gICAgICBjbG9zZU9uQ29uZmlybTogZmFsc2UgfSwgXG4gICAgICBmdW5jdGlvbigpeyAgIFxuICAgICAgICBzd2FsKFwiRGVsZXRlZCFcIiwgXCJZb3VyIHByb3NwZWN0IGxpc3QgaGFzIGJlZW4gZGVsZXRlZC5cIiwgXCJzdWNjZXNzXCIpOyBcbiAgICAgICAgdGhpc3Nzcy5yZW1vdmVUaGVQcm9maWxlKClcbiAgICAgICAgY29uc29sZS5sb2coJ2RlbGV0ZWQnKVxuICAgICAgfSk7XG4gIH0sXG5cbiAgLy9jb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uKHByZXZQcm9wcywgcHJldlN0YXRlKSB7IH0sXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6IGZ1bmN0aW9uKG5leHRQcm9wcykge1xuICAvL2NvbXBvbmVudFdpbGxVcGRhdGU6IGZ1bmN0aW9uKG5leHRQcm9wcykge1xuICAgIGlmKHR5cGVvZih0aGlzLnByb3BzLnByb2ZpbGUub2JqZWN0SWQpID09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdSRUNFSVZFIFBST1BTJylcblxuICAgICAgdmFyIHB1c2hlciA9IG5ldyBQdXNoZXIoJzFhNjhhOTZjOGZkZTkzOGZhNzVhJyk7XG4gICAgICB2YXIgdGhpc3MgPSB0aGlzO1xuICAgICAgY29uc29sZS5sb2cobmV4dFByb3BzKVxuICAgICAgY29uc29sZS5sb2cobmV4dFByb3BzLnByb2ZpbGUpXG4gICAgICBjb25zb2xlLmxvZyhfLmtleXMobmV4dFByb3BzLnByb2ZpbGUpKVxuICAgICAgY29uc29sZS5sb2cobmV4dFByb3BzLnByb2ZpbGUub2JqZWN0SWQpXG4gICAgICBvYmplY3RJZCA9IG5leHRQcm9wcy5wcm9maWxlLm9iamVjdElkXG4gICAgICBjb25zb2xlLmxvZygnbmV3IHB1c2hlciBjaGFubmVsIC0+ICcrIG9iamVjdElkKVxuXG4gICAgICB2YXIgY2hhbm5lbCA9IHB1c2hlci5zdWJzY3JpYmUob2JqZWN0SWQpO1xuICAgICAgY2hhbm5lbC5iaW5kKFwiZG9uZVwiLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXNzLnByb3BzKVxuICAgICAgICAvL3RoaXNzLnNldFN0YXRlKHsgZG9uZTogZGF0YS5kb25lX3RpbWVzdGFtcCB9KVxuICAgICAgICB0aGlzcy5wcm9wcy51cGRhdGVNaW5pbmdKb2JEb25lKHRoaXNzLnByb3BzLnByb2ZpbGUpXG4gICAgICAgIGFsZXJ0aWZ5LnN1Y2Nlc3MoXCJTdWNjZXNzIG5vdGlmaWNhdGlvblwiKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHB1c2hlciA9IG5ldyBQdXNoZXIoJzFhNjhhOTZjOGZkZTkzOGZhNzVhJyk7XG4gICAgb2JqZWN0SWQgPSB0aGlzLnByb3BzLnByb2ZpbGUub2JqZWN0SWRcbiAgICBjb25zb2xlLmxvZygnbmV3IHB1c2hlciBjaGFubmVsIC0+Jywgb2JqZWN0SWQpXG4gICAgdmFyIGNoYW5uZWwgPSBwdXNoZXIuc3Vic2NyaWJlKG9iamVjdElkKTtcbiAgICB2YXIgdGhpc3MgPSB0aGlzO1xuICAgIGNoYW5uZWwuYmluZChcImRvbmVcIiwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgY29uc29sZS5sb2coZGF0YSlcbiAgICAgIGNvbnNvbGUubG9nKHRoaXNzLnByb3BzKVxuICAgICAgLy90aGlzcy5zZXRTdGF0ZSh7IGRvbmU6IGRhdGEuZG9uZV90aW1lc3RhbXAgfSlcbiAgICAgIHRoaXNzLnByb3BzLnVwZGF0ZU1pbmluZ0pvYkRvbmUodGhpc3MucHJvcHMucHJvZmlsZSlcbiAgICAgIGFsZXJ0aWZ5LnN1Y2Nlc3MoXCJTdWNjZXNzIG5vdGlmaWNhdGlvblwiKTtcbiAgICB9KTtcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHNpZ25hbERldGFpbHMgPSBbXVxuICAgIGZvcihpPTA7aTwgdGhpcy5wcm9wcy5wcm9maWxlLnByb2ZpbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzaWduYWxEZXRhaWxzLnB1c2goUHJvZmlsZVR5cGUoe3Byb2ZpbGU6IHRoaXMucHJvcHMucHJvZmlsZS5wcm9maWxlc1tpXX0pKVxuICAgIH1cbiAgICBpZighdGhpcy5wcm9wcy5wcm9maWxlLm1pbmluZ19qb2IpIFxuICAgICAgaWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtd2lmaVwiLCBzdHlsZToge21hcmdpblJpZ2h0OjV9fSlcbiAgICBlbHNlXG4gICAgICBpY29uID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG91ZC1kb3dubG9hZFwiLCBzdHlsZToge21hcmdpblJpZ2h0OjV9fSlcblxuICAgIGxvYWRpbmcgPSAoIXRoaXMucHJvcHMucHJvZmlsZS5kb25lKSA/IFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwcm9maWxlLWxvYWRpbmdcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRvdWJsZS1ib3VuY2UxXCJ9KSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZG91YmxlLWJvdW5jZTJcIn0pXG4gICAgICAgICAgKSA6IFwiXCJcbiAgICBcbiAgICBpZih0aGlzLnByb3BzLnByb2ZpbGUubWluaW5nX2pvYiAmJiB0aGlzLnByb3BzLnByb2ZpbGUuZG9uZSlcbiAgICAgIG1pbmluZ19qb2JfZG9uZSA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2hlY2stY2lyY2xlXCIsIHN0eWxlOiB7Y29sb3I6JyMwMDk2ZmYnLG1hcmdpbkxlZnQ6NSxmb250U2l6ZToxNX19KVxuICAgIGVsc2VcbiAgICAgIG1pbmluZ19qb2JfZG9uZSA9IFwiXCJcblxuICAgIHNlbGVjdGVkU3R5bGUgPSB7cGFkZGluZ1RvcDo1LGJvcmRlckxlZnQ6MCxwYWRkaW5nTGVmdDoxMCwgYm9yZGVyUmlnaHQ6JzFweCBzb2xpZCAjZGRkJywgYm9yZGVyTGVmdDogJzVweCBzb2xpZCAjMDA5NmZmICFpbXBvcnRhbnQnfVxuICAgIHJlZ3VsYXJTdHlsZSA9IHtwYWRkaW5nVG9wOjUsYm9yZGVyTGVmdDowLHBhZGRpbmdMZWZ0OjEwLCBib3JkZXJSaWdodDonMXB4IHNvbGlkICNkZGQnLCBib3JkZXJMZWZ0OiAnNXB4IHNvbGlkIHJlZCAhaW1wb3J0YW50J31cbiAgICByZWd1bGFyU3R5bGUgPSB7cGFkZGluZ1RvcDo1LGJvcmRlckxlZnQ6MCxwYWRkaW5nTGVmdDoxMCwgYm9yZGVyUmlnaHQ6JzFweCBzb2xpZCAjZGRkJywgYm9yZGVyTGVmdDonNXB4IHNvbGlkIHJnYmEoMCwwLDAsMCknfVxuICAgIHNlbGVjdGVkPSB0aGlzLnByb3BzLnByb2ZpbGUub2JqZWN0SWQgPT0gdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZS5vYmplY3RJZFxuICAgIGl0ZW1TdHlsZSA9IChzZWxlY3RlZCkgPyBzZWxlY3RlZFN0eWxlIDogcmVndWxhclN0eWxlXG4gICAgaXRlbUNsYXNzID0gKHNlbGVjdGVkKSA/IFwibGlzdC1ncm91cC1pdGVtIGlkZWFsLWNvbXBhbnktcHJvZmlsZSBsaXN0LWdyb3VwLXNlbGVjdGVkXCIgOiBcImxpc3QtZ3JvdXAtaXRlbSBpZGVhbC1jb21wYW55LXByb2ZpbGVcIlxuXG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBpdGVtQ2xhc3MsIFxuICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnNldEN1cnJlbnRQcm9maWxlLCBcbiAgICAgICAgICAgc3R5bGU6IHJlZ3VsYXJTdHlsZX0sIFxuICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcInByb2ZpbGUtdGl0bGVcIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLWRlZmF1bHQgcHJvZmlsZS1uYW1lXCJ9LCBcbiAgICAgICAgICAgIGljb24sIFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5wcm9maWxlLm5hbWVcbiAgICAgICAgICApLCBcbiAgICAgICAgICBsb2FkaW5nLCBtaW5pbmdfam9iX2RvbmUsIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgYnRuLXhzIHNpZ25hbC1kZXRhaWwtYnRuXCIsIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucmVtb3ZlUHJvZmlsZX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1hcmNoaXZlXCJ9KSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5Oidub25lJ30sIFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4teHMgc2lnbmFsLWRldGFpbC1idG5cIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jb2dcIn0pKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4teHMgc2lnbmFsLWRldGFpbC1idG5cIiwgXG4gICAgICAgICAgICAgb25DbGljazogdGhpcy5jYWxlbmRhckNsaWNrfSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNhbGVuZGFyXCJ9KSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMubGF1bmNoTW9kYWwsIFxuICAgICAgICAgICAgIHN0eWxlOiAodGhpcy5wcm9wcy5wcm9maWxlLm1pbmluZ19qb2IpID8ge2Rpc3BsYXk6J25vbmUnfTp7ZGlzcGxheTonYmxvY2snfSwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4teHMgc2lnbmFsLWRldGFpbC1idG5cIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG91ZC1kb3dubG9hZFwifSkpXG4gICAgICAgICksIFxuXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwcm9maWxlLWJvZHlcIiwgc3R5bGU6IHttYXJnaW5Ub3A6NX19LCBcbiAgICAgICAgICBzaWduYWxEZXRhaWxzXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9LFxuXG4gIGxhdW5jaE1vZGFsOiBmdW5jdGlvbihlKSB7XG4gICAgJCgnI2NyZWF0ZU1pbmluZ0pvYk1vZGFsJykubW9kYWwoKVxuICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFByb2ZpbGUodGhpcy5wcm9wcy5wcm9maWxlKVxuICAgIGlmKHRoaXMucHJvcHMuY3VycmVudFZpZXcgPT0gJ0NhbGVuZGFyJylcbiAgICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFZpZXcoJ0NhbGVuZGFyJylcbiAgICBlbHNlIGlmKHRoaXMucHJvcHMuY3VycmVudFZpZXcgPT0gJ0ZlZWQnKVxuICAgICAgdGhpcy5wcm9wcy5zZXRDdXJyZW50VmlldygnRmVlZCcpXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICB9XG59KTtcblxudmFyIFByb2ZpbGVUeXBlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnUHJvZmlsZVR5cGUnLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuXG4gIGlmKHRoaXMucHJvcHMucHJvZmlsZSl7XG4gICAgaWYodGhpcy5wcm9wcy5wcm9maWxlLmNsYXNzTmFtZSA9PSBcIkhpcmluZ1Byb2ZpbGVcIikge1xuICAgICAgc2lnbmFsSWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc3VpdGNhc2VcIn0pXG4gICAgICBzaWduYWxOYW1lID0gXCJIaXJpbmdcIlxuICAgICAgc2lnbmFsVmFsdWUgPSBfLnJlZHVjZSh0aGlzLnByb3BzLnByb2ZpbGUucm9sZXMsIGZ1bmN0aW9uKHJlc3VsdCwgcm9sZSkge1xuICAgICAgICByZXR1cm4gcm9sZSArIFwiLCBcIisgcmVzdWx0XG4gICAgICB9LCBcIlwiKTtcbiAgICAgIC8vY29uc29sZS5sb2coJ3d0ZicpXG4gICAgICAvL2NvbnNvbGUubG9nKHNpZ25hbFZhbHVlKVxuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wcm9maWxlLmNsYXNzTmFtZSAgPT0gXCJFbXBsb3llZVByb2ZpbGVcIikge1xuICAgICAgc2lnbmFsSWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdXNlcnNcIn0pXG4gICAgICBzaWduYWxOYW1lID0gXCJDb21wYW55IFNpemVcIlxuICAgICAgc2lnbmFsVmFsdWUgPSBfLnJlZHVjZSh0aGlzLnByb3BzLnByb2ZpbGUuZW1wbG95ZWVzLCBmdW5jdGlvbihyZXN1bHQsIHJvbGUpIHtcbiAgICAgICAgcmV0dXJuIHJvbGUgKyBcIiwgXCIrIHJlc3VsdFxuICAgICAgfSwgXCJcIik7XG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnByb2ZpbGUuY2xhc3NOYW1lICA9PSBcIkZ1bmRpbmdQcm9maWxlXCIpIHtcbiAgICAgIHNpZ25hbEljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWluc3RpdHV0aW9uXCJ9KVxuICAgICAgc2lnbmFsTmFtZSA9IFwiRnVuZGluZ1wiXG4gICAgICBzaWduYWxWYWx1ZSA9IF8ucmVkdWNlKHRoaXMucHJvcHMucHJvZmlsZS5yZXZlbnVlcywgZnVuY3Rpb24ocmVzdWx0LCByb2xlKSB7XG4gICAgICAgIHJldHVybiByb2xlICsgXCIsIFwiKyByZXN1bHRcbiAgICAgIH0sIFwiXCIpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wcm9maWxlLmNsYXNzTmFtZSAgPT0gXCJSZXZlbnVlUHJvZmlsZVwiKSB7XG4gICAgICBzaWduYWxJY29uID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1tb25leVwifSlcbiAgICAgIHNpZ25hbE5hbWUgPSBcIlJldmVudWVcIlxuICAgICAgc2lnbmFsVmFsdWUgPSBfLnJlZHVjZSh0aGlzLnByb3BzLnByb2ZpbGUucmV2ZW51ZXMsIGZ1bmN0aW9uKHJlc3VsdCwgcm9sZSkge1xuICAgICAgICByZXR1cm4gcm9sZSArIFwiLCBcIisgcmVzdWx0XG4gICAgICB9LCBcIlwiKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMucHJvZmlsZS5jbGFzc05hbWUgID09IFwiVGVjaG5vbG9neVByb2ZpbGVcIikge1xuICAgICAgc2lnbmFsSWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtd3JlbmNoXCJ9KVxuICAgICAgc2lnbmFsTmFtZSA9IFwiVGVjaG5vbG9neVwiXG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnByb2ZpbGUuY2xhc3NOYW1lICA9PSBcIkxvY2F0aW9uUHJvZmlsZVwiKSB7XG4gICAgICBzaWduYWxJY29uID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1tYXAtbWFya2VyXCJ9KVxuICAgICAgc2lnbmFsTmFtZSA9IFwiTG9jYWxlXCJcbiAgICAgIHNpZ25hbFZhbHVlID0gXy5yZWR1Y2UodGhpcy5wcm9wcy5wcm9maWxlLmxvY2FsZSwgZnVuY3Rpb24ocmVzdWx0LCByb2xlKSB7XG4gICAgICAgIHJldHVybiByb2xlICsgXCIsIFwiKyByZXN1bHRcbiAgICAgIH0sIFwiXCIpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wcm9maWxlLmNsYXNzTmFtZSAgPT0gXCJJbmR1c3RyeVByb2ZpbGVcIikge1xuICAgICAgc2lnbmFsSWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYnVpbGRpbmdcIn0pXG4gICAgICBzaWduYWxOYW1lID0gXCJJbmR1c3RyaWVzXCJcbiAgICAgIHNpZ25hbFZhbHVlID0gXy5yZWR1Y2UodGhpcy5wcm9wcy5wcm9maWxlLmluZHVzdHJpZXMsIGZ1bmN0aW9uKHJlc3VsdCwgcm9sZSkge1xuICAgICAgICByZXR1cm4gcm9sZSArIFwiLCBcIisgcmVzdWx0XG4gICAgICB9LCBcIlwiKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMucHJvZmlsZS5jbGFzc05hbWUgID09IFwiQ29tcGFueVNpemVQcm9maWxlXCIpIHtcbiAgICAgIHNpZ25hbEljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXdyZW5jaFwifSlcbiAgICAgIHNpZ25hbE5hbWUgPSBcIlRlY2hub2xvZ3lcIlxuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wcm9maWxlLmNsYXNzTmFtZSAgPT0gXCJMaXN0UHJvZmlsZVwiKSB7XG4gICAgICBzaWduYWxJY29uID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1saXN0LWFsdFwifSlcbiAgICAgIHNpZ25hbE5hbWUgPSBcIkNvbXBhbnkgTGlzdFwiXG4gICAgICBzaWduYWxWYWx1ZSA9IHRoaXMucHJvcHMucHJvZmlsZS5saXN0TmFtZVxuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wcm9maWxlLmNsYXNzTmFtZSAgPT0gXCJQcm9zcGVjdFRpdGxlUHJvZmlsZVwiKSB7XG4gICAgICBzaWduYWxJY29uID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS11c2VyXCJ9KVxuICAgICAgc2lnbmFsTmFtZSA9IFwiVGl0bGVzXCJcbiAgICAgIHNpZ25hbFZhbHVlID0gXy5yZWR1Y2UodGhpcy5wcm9wcy5wcm9maWxlLnRpdGxlX2tleXdvcmRzLCBcbiAgICAgZnVuY3Rpb24ocmVzdWx0LCByb2xlKSB7XG4gICAgICAgIHJldHVybiByb2xlICsgXCIsIFwiKyByZXN1bHRcbiAgICAgIH0sIFwiXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaWduYWxJY29uID0gXCJub3QgZm91bmRcIlxuICAgICAgc2lnbmFsTmFtZSA9IFwiTm90IGZvdW5kXCJcbiAgICAgIHNpZ25hbFZhbHVlPSBcIk5vdCBmb3VuZFwiXG4gICAgfVxuICB9IGVsc2Uge1xuICAgICAgc2lnbmFsSWNvbiA9IFwibm90IGZvdW5kXCJcbiAgICAgIHNpZ25hbE5hbWUgPSBcIk5vdCBmb3VuZFwiXG4gICAgICBzaWduYWxWYWx1ZT0gXCJOb3QgZm91bmRcIlxuXG4gIH1cblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImlkZWFsLXByb2ZpbGVcIn0sIFwiIFwiLCBzaWduYWxJY29uLCBcbiAgICAgICAgUmVhY3QuRE9NLmg2KHtjbGFzc05hbWU6IFwicHJvZmlsZS1zaWduYWwtbmFtZVwifSwgc2lnbmFsTmFtZSwgXCIgLSBcIiksIFxuICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcInByb2ZpbGUtc2lnbmFsLXZhbHVlXCJ9LCBcIiBcIitzaWduYWxWYWx1ZSlcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxuLypcbiAgRnVuZGluZyBQcm9maWxlXG4gIC0gQW1vdW50IFJhaXNlZCAtIGJ0biBncm91cFxuICAtIFN0YWdlIC0gYnRuIGdyb3VwXG5cbiAgUGVvcGxlIFByb2ZpbGVcbiAgLSBMb2NhbGUgLSB0YWdzIHcvIHR5cGFoZWFkXG4gIC0gVGl0bGUgLSB0YWdzIHcvIHR5cGFoZWFkXG5cbiAgQ29tcGFueSBQcm9maWxlXG4gIC0gSW5kdXN0cmllcyAtIHRhZ3Mgd2l0aCB0eXBhaGVhZFxuICAtIFJldmVudWUgLSBidG4gZ3JvdXBcbiAgLSAjIG9mIEVtcGxveWVlcyAtIGJ0biBncm91cFxuICAtIExvY2FsZSAtIHRhZ3Mgd2l0aCB0eXBhaGVhZFxuKi9cblxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbnZhciBTaWduYWxQcm9maWxlID0gcmVxdWlyZSgnLi9zaWduYWxfcHJvZmlsZS5qcy5taW4uanMnKVxudmFyIFNpZ25hbExvYWRpbmcgPSByZXF1aXJlKCcuL3NpZ25hbF9sb2FkaW5nLmpzLm1pbi5qcycpXG52YXIgTWluaW5nSm9iTG9hZGluZyA9IHJlcXVpcmUoJy4vbWluaW5nX2pvYl9sb2FkaW5nLmpzLm1pbi5qcycpXG52YXIgQ29tcGFueVNpZ25hbENhcmQgPSByZXF1aXJlKCcuL2NvbXBhbnlfc2lnbmFsX2NhcmQuanMubWluLmpzJylcbnZhciBQZW9wbGVTaWduYWxDYXJkID0gcmVxdWlyZSgnLi9wZW9wbGVfc2lnbmFsX2NhcmQuanMubWluLmpzJylcbnZhciBTaWduYWxDYWxlbmRhciA9IHJlcXVpcmUoJy4vc2lnbmFsX2NhbGVuZGFyLmpzLm1pbi5qcycpXG52YXIgTWluaW5nSm9iQ2FsZW5kYXIgPSByZXF1aXJlKCcuL21pbmluZ19qb2JfY2FsZW5kYXIuanMubWluLmpzJylcbnZhciBTaWduYWxzRGV0YWlsID0gcmVxdWlyZSgnLi9zaWduYWxfZGV0YWlsLmpzLm1pbi5qcycpXG5cbnZhciBDcmVhdGVIaXJpbmdTaWduYWxNb2RhbCA9IHJlcXVpcmUoJy4vY3JlYXRlX2hpcmluZ19zaWduYWxfbW9kYWwuanMubWluLmpzJylcbnZhciBDcmVhdGVGdW5kaW5nU2lnbmFsTW9kYWwgPSByZXF1aXJlKCcuL2NyZWF0ZV9mdW5kaW5nX3NpZ25hbF9tb2RhbC5qcy5taW4uanMnKVxudmFyIENyZWF0ZVByb3NwZWN0UHJvZmlsZU1vZGFsID0gcmVxdWlyZSgnLi9jcmVhdGVfcHJvc3BlY3RfcHJvZmlsZV9tb2RhbC5qcy5taW4uanMnKVxudmFyIENyZWF0ZUNvbXBhbnlQcm9maWxlTW9kYWwgPSByZXF1aXJlKCcuL2NyZWF0ZV9jb21wYW55X3Byb2ZpbGVfbW9kYWwuanMubWluLmpzJylcbnZhciBDcmVhdGVNaW5pbmdKb2JNb2RhbCA9IHJlcXVpcmUoJy4vY3JlYXRlX21pbmluZ19qb2JfbW9kYWwuanMubWluLmpzJylcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2lnbmFsVHlwZTogJ0NvbXBhbnlTaWduYWwnLFxuICAgICAgY3VycmVudFByb2ZpbGU6IHtuYW1lOidBbGwnfSxcbiAgICAgIGN1cnJlbnRQcm9maWxlT2JqZWN0SWQ6IHt9LFxuICAgICAgY3VycmVudFByb2ZpbGVSZXBvcnQ6IHt9LFxuICAgICAgc2lnbmFsczogW10sXG4gICAgICBjdXJyZW50VmlldzogJ0ZlZWQnLFxuICAgICAgcHJvZmlsZXM6IFtdLFxuICAgIH1cbiAgfSxcblxuICBzZXRDdXJyZW50UmVwb3J0OiBmdW5jdGlvbihuZXdQcm9maWxlUmVwb3J0KSB7XG4gICAgY29uc29sZS5sb2coJ05FVyBSRVBPUlQnKVxuICAgIGNvbnNvbGUubG9nKG5ld1Byb2ZpbGVSZXBvcnQpXG5cbiAgICB0aGlzLnNldFN0YXRlKHsgXG4gICAgICBjdXJyZW50VmlldzonRGV0YWlsJyxcbiAgICAgIGN1cnJlbnRQcm9maWxlUmVwb3J0OiBuZXdQcm9maWxlUmVwb3J0IFxuICAgIH0pXG4gIH0sXG5cbiAgcHJvc3BlY3RTaWduYWxSZXBvcnQ6IGZ1bmN0aW9uKHByb2ZpbGUsIHJlcG9ydCkge1xuICAgIHByb2ZpbGVzID0gXy5tYXAodGhpcy5zdGF0ZS5wcm9maWxlcywgZnVuY3Rpb24oX3Byb2ZpbGUpIHtcbiAgICAgICAgICAgICAgICAgIGlmKF9wcm9maWxlLm9iamVjdElkID09IHByb2ZpbGUub2JqZWN0SWQpe1xuICAgICAgICAgICAgICAgICAgICByZXBvcnRzID0gXy5tYXAoX3Byb2ZpbGUucmVwb3J0cywgZnVuY3Rpb24oX3JlcG9ydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihfcmVwb3J0Lm9iamVjdElkID09IHJlcG9ydC5vYmplY3RJZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlcG9ydC5wcm9zcGVjdGVkID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVwb3J0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZXBvcnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF9wcm9maWxlLnJlcG9ydHMgPSByZXBvcnRzXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfcHJvZmlsZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIF9wcm9maWxlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHByb2ZpbGVzKVxuICAgIHRoaXMuc2V0U3RhdGUoe3Byb2ZpbGVzOiBwcm9maWxlc30pXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9TaWduYWxSZXBvcnQvJytyZXBvcnQub2JqZWN0SWQsXG4gICAgICB0eXBlOidQVVQnLFxuICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoe3Byb3NwZWN0ZWQ6bW9tZW50KCkudmFsdWVPZigpLzEwMDB9KSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge30sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7fVxuICAgIH0pXG4gIH0sXG5cbiAgc2V0Q3VycmVudFZpZXc6IGZ1bmN0aW9uKG5ld1NpZ25hbFZpZXcpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50VmlldzogbmV3U2lnbmFsVmlld30pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBjdXJyZW50UHJvZmlsZSA9IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGVcbiAgICByZXBvcnRzID0gdGhpcy5zdGF0ZS5jdXJyZW50UHJvZmlsZS5yZXBvcnRzXG4gICAgcmVwb3J0cyA9IChyZXBvcnRzKSA/IHJlcG9ydHMgOiBbXVxuICAgIHJlcG9ydHMgPSBfLnNvcnRCeShyZXBvcnRzLCBmdW5jdGlvbihvKXsgcmV0dXJuIG8uY3JlYXRlZEF0IH0pLnJldmVyc2UoKVxuICAgIC8vY29uc29sZS5sb2coY3VycmVudFByb2ZpbGUpXG4gICAgaWYoY3VycmVudFByb2ZpbGUubmFtZSA9PSBcIkFsbFwiIHx8IGN1cnJlbnRQcm9maWxlLmRvbmUpe1xuICAgICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50VmlldyA9PSBcIkZlZWRcIikge1xuICAgICAgICBzaWduYWxWaWV3ID0gUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgICAgIFNpZ25hbERldGFpbEJ1dHRvbnMoe3NpZ25hbFR5cGU6IHRoaXMuc3RhdGUuc2lnbmFsVHlwZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UHJvZmlsZTogdGhpcy5zdGF0ZS5jdXJyZW50UHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTaWduYWxUeXBlOiB0aGlzLnNldFNpZ25hbFR5cGV9KSwgXG4gICAgICAgICAgICBTaWduYWxzRmVlZCh7c2V0Q3VycmVudFZpZXc6IHRoaXMuc2V0Q3VycmVudFZpZXcsIFxuICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbFR5cGU6IHRoaXMuc3RhdGUuc2lnbmFsVHlwZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgcHJvZmlsZTogdGhpcy5zdGF0ZS5jdXJyZW50UHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsczogdGhpcy5zdGF0ZS5zaWduYWxzfSlcbiAgICAgICAgICAgIClcbiAgICAgIH0gZWxzZSBpZih0aGlzLnN0YXRlLmN1cnJlbnRWaWV3ID09IFwiQ2FsZW5kYXJcIil7XG4gICAgICAgIHNpZ25hbFZpZXcgPSBTaWduYWxDYWxlbmRhcih7Y3VycmVudFByb2ZpbGU6IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvc3BlY3RTaWduYWxSZXBvcnQ6IHRoaXMucHJvc3BlY3RTaWduYWxSZXBvcnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcG9ydHM6IHJlcG9ydHMsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRSZXBvcnQ6IHRoaXMuc2V0Q3VycmVudFJlcG9ydCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFZpZXc6IHRoaXMuc2V0Q3VycmVudFZpZXd9KVxuICAgICAgfSBlbHNlIGlmKHRoaXMuc3RhdGUuY3VycmVudFZpZXcgPT0gXCJEZXRhaWxcIil7XG4gICAgICAgIHNpZ25hbFZpZXcgPSBTaWduYWxzRGV0YWlsKHtjdXJyZW50UHJvZmlsZTogdGhpcy5zdGF0ZS5jdXJyZW50UHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UHJvZmlsZVJlcG9ydDogdGhpcy5zdGF0ZS5jdXJyZW50UHJvZmlsZVJlcG9ydCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50VmlldzogdGhpcy5zZXRDdXJyZW50Vmlld30pXG4gICAgICB9IGVsc2UgaWYodGhpcy5zdGF0ZS5jdXJyZW50VmlldyA9PSBcIk1pbmluZ0pvYkNhbGVuZGFyXCIpe1xuICAgICAgICBzaWduYWxWaWV3ID0gTWluaW5nSm9iQ2FsZW5kYXIoe2N1cnJlbnRQcm9maWxlOiB0aGlzLnN0YXRlLmN1cnJlbnRQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50UmVwb3J0OiB0aGlzLnNldEN1cnJlbnRSZXBvcnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRWaWV3OiB0aGlzLnNldEN1cnJlbnRWaWV3fSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2hvdyBDYWxlbmRhciBFdmVuIFdoZW4gU2lnbmFsIElzIExvYWRpbmdcbiAgICAgIGlmKHRoaXMuc3RhdGUuY3VycmVudFZpZXcgPT0gXCJDYWxlbmRhclwiKXtcbiAgICAgICAgc2lnbmFsVmlldyA9IFNpZ25hbENhbGVuZGFyKHtjdXJyZW50UHJvZmlsZTogdGhpcy5zdGF0ZS5jdXJyZW50UHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFJlcG9ydDogdGhpcy5zZXRDdXJyZW50UmVwb3J0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBvcnRzOiByZXBvcnRzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50VmlldzogdGhpcy5zZXRDdXJyZW50Vmlld30pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLmN1cnJlbnRQcm9maWxlKVxuICAgICAgICBpZih0aGlzLnN0YXRlLmN1cnJlbnRQcm9maWxlLnR5cGUgPT0gXCJwcm9zcGVjdF9wcm9maWxlXCIpXG4gICAgICAgICAgc2lnbmFsVmlldyA9TWluaW5nSm9iTG9hZGluZyh7Y3VycmVudFByb2ZpbGU6IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGV9KVxuICAgICAgICBlbHNlXG4gICAgICAgICAgc2lnbmFsVmlldyA9IFNpZ25hbExvYWRpbmcoe2N1cnJlbnRQcm9maWxlOiB0aGlzLnN0YXRlLmN1cnJlbnRQcm9maWxlfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2hlaWdodDo0MDB9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb250YWluZXJcIiwgc3R5bGU6IHtwYWRkaW5nOjAsIHdpZHRoOicxMDAlJywgaGVpZ2h0OicxMDAlJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTMgc2lnbmFsLWxpc3RcIiwgXG4gICAgICAgICAgICAgICBzdHlsZTogeyBoZWlnaHQ6JzEwMi44JScsIHBhZGRpbmc6MH19LCBcbiAgICAgICAgICAgICAgU2lnbmFsc09wdGlvbnMoe3Byb2ZpbGVzOiB0aGlzLnN0YXRlLnByb2ZpbGVzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFByb2ZpbGU6IHRoaXMuYWRkUHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVNaW5pbmdKb2JEb25lOiB0aGlzLnVwZGF0ZU1pbmluZ0pvYkRvbmUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUHJvZmlsZTogdGhpcy5yZW1vdmVQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRWaWV3OiB0aGlzLnNldEN1cnJlbnRWaWV3LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9maWxlOiB0aGlzLnN0YXRlLmN1cnJlbnRQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRQcm9maWxlOiB0aGlzLnNldEN1cnJlbnRQcm9maWxlfSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTlcIiwgc3R5bGU6IHtoZWlnaHQ6JzEwMCUnLHBhZGRpbmc6MH19LCBcbiAgICAgICAgICAgIHNpZ25hbFZpZXdcbiAgICAgICAgICApXG4gICAgICAgICksIFxuXG4gICAgICAgIENyZWF0ZU1pbmluZ0pvYk1vZGFsKHtjcmVhdGVNaW5pbmdKb2I6IHRoaXMuY3JlYXRlTWluaW5nSm9iLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9maWxlOiB0aGlzLnN0YXRlLmN1cnJlbnRQcm9maWxlfSksIFxuICAgICAgICBDcmVhdGVIaXJpbmdTaWduYWxNb2RhbCh7YWRkUHJvZmlsZTogdGhpcy5hZGRQcm9maWxlfSksIFxuICAgICAgICBDcmVhdGVGdW5kaW5nU2lnbmFsTW9kYWwoe2FkZFByb2ZpbGU6IHRoaXMuYWRkUHJvZmlsZX0pLCBcbiAgICAgICAgQ3JlYXRlQ29tcGFueVByb2ZpbGVNb2RhbCh7YWRkUHJvZmlsZTogdGhpcy5hZGRQcm9maWxlfSksIFxuICAgICAgICBDcmVhdGVQcm9zcGVjdFByb2ZpbGVNb2RhbCh7YWRkUHJvZmlsZTogdGhpcy5hZGRQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVQcm9maWxlV2l0aE9iamVjdElkOiB0aGlzLnVwZGF0ZVByb2ZpbGVXaXRoT2JqZWN0SWR9KVxuICAgICAgKVxuICAgIClcbiAgfSxcblxuICBjcmVhdGVNaW5pbmdKb2I6IGZ1bmN0aW9uKHRoZVByb2ZpbGUsIGRhdGUpIHtcbiAgICBjb25zb2xlLmxvZygnY3JlYXRlIG1pbmluZyBqb2InKVxuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgcmVwb3J0ID0ge1xuICAgICAgLy9jcmVhdGVkQXQ6IG1vbWVudCgpLnZhbHVlT2YoKSxcbiAgICAgIGNvbXBhbnlfY291bnQ6IDAsXG4gICAgICBwZW9wbGVfY291bnQ6IDAsXG4gICAgICBsaXN0X3R5cGU6J21pbmluZ19qb2InLFxuICAgICAgZG9uZTogMCxcbiAgICAgIG1pbmluZ19qb2I6IHRydWUsXG4gICAgfVxuXG4gICAgcHJvZmlsZXM9Xy5tYXAodGhpcy5zdGF0ZS5wcm9maWxlcywgZnVuY3Rpb24ocHJvZmlsZSkge1xuICAgICAgaWYoXy5pc0VxdWFsKHRoZVByb2ZpbGUsIHByb2ZpbGUpKXtcbiAgICAgICAgaWYocHJvZmlsZS5taW5pbmdfZGF5cyl7XG4gICAgICAgICAgcHJvZmlsZS5taW5pbmdfZGF5cy5wdXNoKGRhdGUpXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIHByb2ZpbGUubWluaW5nX2RheXMgPSBbZGF0ZV1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHByb2ZpbGUucmVwb3J0cyl7XG4gICAgICAgICAgcHJvZmlsZS5yZXBvcnRzID0gW3JlcG9ydF0uY29uY2F0KHByb2ZpbGUucmVwb3J0cylcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgcHJvZmlsZS5yZXBvcnRzID0gW3JlcG9ydF1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2N1cnJlbnRQcm9maWxlOiBwcm9maWxlfSlcbiAgICAgICAgdGhpc3MucGVyc2lzdE1pbmluZ0pvYihkYXRlLCByZXBvcnQpXG4gICAgICAgIHJldHVybiBwcm9maWxlXG4gICAgICB9XG4gICAgICByZXR1cm4gcHJvZmlsZVxuICAgIH0pXG4gICAgdGhpc3Muc2V0U3RhdGUoe3Byb2ZpbGVzOiBwcm9maWxlc30pXG4gIH0sXG5cbiAgcGVyc2lzdE1pbmluZ0pvYjogZnVuY3Rpb24oZGF0ZSwgcmVwb3J0KSB7XG4gICAgY29uc29sZS5sb2codGhpcy5zdGF0ZSlcbiAgICBvYmplY3RJZCA9IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGUub2JqZWN0SWRcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1NpZ25hbFJlcG9ydCcsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KHJlcG9ydCksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdFByb2ZpbGUvJytvYmplY3RJZCxcbiAgICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBtaW5pbmdfZGF5czoge1xuICAgICAgICAgICAgICBfX29wOidBZGRVbmlxdWUnLFxuICAgICAgICAgICAgICBvYmplY3RzOltkYXRlXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZXBvcnRzOiB7XG4gICAgICAgICAgICAgIF9fb3A6J0FkZFVuaXF1ZScsXG4gICAgICAgICAgICAgIG9iamVjdHM6W2FwcENvbmZpZy5wb2ludGVyKCdTaWduYWxSZXBvcnQnLCByZXMub2JqZWN0SWQpXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyBjb25zb2xlLmxvZyhyZXMpIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge30sXG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge30sXG4gICAgfSlcbiAgfSxcblxuICBhZGRQcm9maWxlOiBmdW5jdGlvbihuZXdQcm9maWxlKSB7XG4gICAgcHJvZmlsZXMgPSB0aGlzLnN0YXRlLnByb2ZpbGVzXG4gICAgdGhpcy5zZXRTdGF0ZSh7cHJvZmlsZXM6IFtuZXdQcm9maWxlXS5jb25jYXQocHJvZmlsZXMpfSlcbiAgICB0aGlzLnNldEN1cnJlbnRQcm9maWxlKG5ld1Byb2ZpbGUpXG4gIH0sXG5cbiAgcmVtb3ZlUHJvZmlsZTogZnVuY3Rpb24ob2xkUHJvZmlsZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe3Byb2ZpbGVzOiBfLnJlamVjdCh0aGlzLnN0YXRlLnByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICByZXR1cm4gXy5pc0VxdWFsKG9sZFByb2ZpbGUsIHByb2ZpbGUpXG4gICAgfSl9KVxuXG4gICAgaWYob2xkUHJvZmlsZS5vYmplY3RJZCl7XG4gICAgICAkLmFqYXgoe1xuICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RQcm9maWxlLycrb2xkUHJvZmlsZS5vYmplY3RJZCxcbiAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgdHlwZTonREVMRVRFJyxcbiAgICAgIH0pXG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZU1pbmluZ0pvYkRvbmU6IGZ1bmN0aW9uKHByb2ZpbGUpIHtcbiAgICBwcm9maWxlcyA9IF8ubWFwKHRoaXMuc3RhdGUucHJvZmlsZXMsIGZ1bmN0aW9uKF9wcm9maWxlKSB7XG4gICAgICAgICAgICAgICAgICBpZihfcHJvZmlsZS5vYmplY3RJZCA9PSBwcm9maWxlLm9iamVjdElkKSB7XG4gICAgICAgICAgICAgICAgICAgIF9wcm9maWxlLmRvbmUgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfcHJvZmlsZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIF9wcm9maWxlXG4gICAgICAgICAgICAgICAgfSlcbiAgICB0aGlzLnNldFN0YXRlKHtwcm9maWxlczogcHJvZmlsZXN9KVxuICB9LFxuXG4gIHVwZGF0ZVByb2ZpbGVXaXRoT2JqZWN0SWQ6IGZ1bmN0aW9uKHRpbWVzdGFtcCwgb2JqZWN0SWQpIHtcbiAgICBjb25zb2xlLmxvZygnVVBEQVRFIFBST0ZJTEVTJylcbiAgICBuZXdQcm9maWxlcyA9IF8ubWFwKHRoaXMuc3RhdGUucHJvZmlsZXMsIGZ1bmN0aW9uKHByb2ZpbGUpIHtcbiAgICAgICAgaWYocHJvZmlsZS50aW1lc3RhbXAgPT0gdGltZXN0YW1wKSB7XG4gICAgICAgICAgcHJvZmlsZS5vYmplY3RJZCA9IG9iamVjdElkXG4gICAgICAgICAgcmV0dXJuIHByb2ZpbGVcbiAgICAgICAgfVxuICAgICAgcmV0dXJuIHByb2ZpbGVcbiAgICB9KVxuICAgIFxuICAgIGNvbnNvbGUubG9nKG5ld1Byb2ZpbGVzKVxuICAgIHRoaXMuc2V0U3RhdGUoe3Byb2ZpbGVzOiBuZXdQcm9maWxlc30pXG4gICAgY29uc29sZS5sb2cob2JqZWN0SWQpXG5cbiAgICB2YXIgcHVzaGVyID0gbmV3IFB1c2hlcignMWE2OGE5NmM4ZmRlOTM4ZmE3NWEnKTtcbiAgICBjb25zb2xlLmxvZygnbmV3IHB1c2hlciBjaGFubmVsIC0+Jywgb2JqZWN0SWQpXG4gICAgdmFyIGNoYW5uZWwgPSBwdXNoZXIuc3Vic2NyaWJlKG9iamVjdElkKTtcbiAgICB2YXIgdGhpc3MgPSB0aGlzO1xuICAgIGNoYW5uZWwuYmluZChcImRvbmVcIiwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgdGhpc3MudXBkYXRlTWluaW5nSm9iRG9uZShfLmZpbmRXaGVyZSh0aGlzcy5zdGF0ZS5wcm9maWxlcywge3RpbWVzdGFtcDogdGltZXN0YW1wfSkpXG4gICAgICBhbGVydGlmeS5zdWNjZXNzKFwiTmV3IFN1Y2Nlc3Mgbm90aWZpY2F0aW9uXCIpO1xuICAgIH0pO1xuICB9LFxuXG4gIHNldEN1cnJlbnRQcm9maWxlOiBmdW5jdGlvbihuZXdQcm9maWxlKSB7XG4gICAgaWYobmV3UHJvZmlsZS5vbmx5X3Blb3BsZSkge1xuICAgICAgdGhpcy5nZXRTaWduYWxzKCdQZW9wbGVTaWduYWwnLCBcbiAgICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgX190eXBlOiAnUG9pbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnUHJvc3BlY3RQcm9maWxlJywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0SWQ6IG5ld1Byb2ZpbGUub2JqZWN0SWR9KSlcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBzaWduYWxUeXBlOiAnUGVvcGxlU2lnbmFsJyxcbiAgICAgICAgY3VycmVudFByb2ZpbGU6IG5ld1Byb2ZpbGUgXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50UHJvZmlsZTogbmV3UHJvZmlsZSB9KVxuICAgIH1cblxuICAgIHRoaXMuZ2V0U2lnbmFscygnUGVvcGxlU2lnbmFsJywgbmV3UHJvZmlsZSlcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5nZXRTaWduYWxzKHRoaXMuc3RhdGUuc2lnbmFsVHlwZSlcbiAgICBjdXJyZW50VXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKVxuICAgIHVzZXIgPSBKU09OLnN0cmluZ2lmeShhcHBDb25maWcucG9pbnRlcignX1VzZXInLCBjdXJyZW50VXNlci5vYmplY3RJZCkpXG4gICAgY29tcGFueSA9IEpTT04uc3RyaW5naWZ5KGN1cnJlbnRVc2VyLmNvbXBhbnkpXG4gICAgcXJ5ID0gJ3doZXJlPXtcImNvbXBhbnlcIjonK2NvbXBhbnkrJyxcInVzZXJcIjonK3VzZXIrJ30nXG4gICAgcXJ5ID0gcXJ5KycmaW5jbHVkZT1wcm9maWxlcyxyZXBvcnRzLHByb3NwZWN0X2xpc3Qmb3JkZXI9LWNyZWF0ZWRBdCdcbiAgXG4gICAgdGhpc3NzID0gdGhpc1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0UHJvZmlsZScsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgaGVhZGVyczphcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdQcm9zcGVjdCBQcm9maWxlJylcbiAgICAgICAgY29uc29sZS5sb2cocmVzLnJlc3VsdHMpXG4gICAgICAgIC8vdGhpc3NzLnNldEN1cnJlbnRQcm9maWxlKHJlcy5yZXN1bHRzWzBdKVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe3Byb2ZpbGVzOiByZXMucmVzdWx0c30pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgc2V0U2lnbmFsVHlwZTogZnVuY3Rpb24obGFiZWxUZXh0KSB7XG4gICAgaWYobGFiZWxUZXh0ID09IFwiUGVvcGxlXCIpXG4gICAgICBjdXJyZW50U2lnbmFsID0gXCJQZW9wbGVTaWduYWxcIlxuICAgIGVsc2UgaWYobGFiZWxUZXh0ID09IFwiQ29tcGFuaWVzXCIpXG4gICAgICBjdXJyZW50U2lnbmFsID0gXCJDb21wYW55U2lnbmFsXCJcbiAgICB0aGlzLmdldFNpZ25hbHMoY3VycmVudFNpZ25hbClcbiAgICB0aGlzLnNldFN0YXRlKHtzaWduYWxUeXBlOiBjdXJyZW50U2lnbmFsfSlcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG4gIH0sXG5cbiAgZ2V0U2lnbmFsczogZnVuY3Rpb24oc2lnbmFsVHlwZSwgY3VycmVudFByb2ZpbGUpIHtcbiAgICBjdXJyZW50VXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKVxuICAgIHVzZXIgPSB7XG4gICAgICAnX190eXBlJyAgICA6ICdQb2ludGVyJyxcbiAgICAgICdjbGFzc05hbWUnIDogJ19Vc2VyJyxcbiAgICAgICdvYmplY3RJZCcgIDogY3VycmVudFVzZXIub2JqZWN0SWRcbiAgICB9XG5cbiAgICB1c2VyID0gSlNPTi5zdHJpbmdpZnkodXNlcilcbiAgICBjb21wYW55ID0gSlNPTi5zdHJpbmdpZnkoY3VycmVudFVzZXIuY29tcGFueSlcbiAgICBwcm9maWxlcyA9IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGUucHJvZmlsZXNcblxuICAgIGlmKHByb2ZpbGVzKXtcbiAgICAgIC8vcXJ5ID0gJ3doZXJlPXtcImNvbXBhbnlcIjonK2NvbXBhbnkrJyxcInVzZXJcIjonK3VzZXIrJyxcInByb2ZpbGVcIjonK2N1cnJlbnRQcm9maWxlKyd9J1xuICAgICAgcHJvZmlsZSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgX190eXBlOidQb2ludGVyJyxcbiAgICAgICAgY2xhc3NOYW1lOidQcm9zcGVjdFByb2ZpbGUnLFxuICAgICAgICBvYmplY3RJZDpjdXJyZW50UHJvZmlsZS5vYmplY3RJZFxuICAgICAgfSlcbiAgICAgIHFyeSA9ICd3aGVyZT17XCJwcm9maWxlXCI6Jytwcm9maWxlKyd9J1xuICAgICAgLy9xcnkgPSBxcnkgKyAnLFwicHJvZmlsZXNcIjp7XCIkYWxsXCI6JytKU09OLnN0cmluZ2lmeShwcm9maWxlcykrJ319J1xuICAgICAgaWYoc2lnbmFsVHlwZSA9PSAnUGVvcGxlU2lnbmFsJylcbiAgICAgICAgcXJ5ID0gcXJ5ICsgJyZpbmNsdWRlPXNpZ25hbHMnXG4gICAgICBlbHNlXG4gICAgICAgIHFyeSA9IHFyeSArICcmaW5jbHVkZT1zaWduYWxzLGNvbXBhbnknXG5cbiAgICB9IGVsc2Uge1xuICAgICAgcXJ5ID0geydpbmNsdWRlJzpbJ3NpZ25hbHMnLCdjb21wYW55J119XG4gICAgfVxuICBcbiAgICB0aGlzcyA9IHRoaXNcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK3NpZ25hbFR5cGUsXG4gICAgICAvL3VybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvQ29tcGFueVNpZ25hbCcsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgaGVhZGVyczphcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2cocmVzLnJlc3VsdHMpXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtzaWduYWxzOiByZXMucmVzdWx0c30pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIpIH1cbiAgICB9KTtcbiAgfSxcbn0pO1xuXG52YXIgU2lnbmFsRGV0YWlsQnV0dG9ucyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1NpZ25hbERldGFpbEJ1dHRvbnMnLFxuICBzZXRTaWduYWxUeXBlOiBmdW5jdGlvbihlKSB7XG4gICAgdGhpcy5wcm9wcy5zZXRTaWduYWxUeXBlKCQoZS50YXJnZXQpLnRleHQoKS50cmltKCkpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBwcGwgPSAodGhpcy5wcm9wcy5zaWduYWxUeXBlID09IFwiUGVvcGxlU2lnbmFsXCIpID8gXCJjaG9vc2UgYnRuIGJ0bi1wcmltYXJ5IGFwcC1hY3RpdmVcIiA6IFwiY2hvb3NlIGJ0biBidG4tcHJpbWFyeVwiXG4gICAgY21wID0gKHRoaXMucHJvcHMuc2lnbmFsVHlwZSA9PSBcIkNvbXBhbnlTaWduYWxcIikgPyBcImNob29zZSBidG4gYnRuLXByaW1hcnkgYXBwLWFjdGl2ZVwiIDogXCJjaG9vc2UgYnRuIGJ0bi1wcmltYXJ5XCJcblxuICAgIGNtcCA9ICh0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm9ubHlfcGVvcGxlKSAgPyBjbXAgKyBcIiBkaXNhYmxlZFwiIDogY21wXG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7aWQ6IFwic2lnbmFsRGV0YWlsQnV0dG9uc1wiLCBzdHlsZToge2hlaWdodDo0NH19LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDQoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyxmbG9hdDonbGVmdCcsd2lkdGg6MzAwLFxuICAgICAgICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQ6MjAwLG1hcmdpblRvcDo0LHBhZGRpbmdMZWZ0OjIwfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1uZXdzcGFwZXItb1wifSksIFwiwqBcIiwgIFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZS5uYW1lXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cFwiLCBzdHlsZToge21hcmdpbkxlZnQ6JzAlJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtjbGFzc05hbWU6IHBwbCwgXG4gICAgICAgICAgICAgICBzdHlsZToge3BhZGRpbmc6Mn0sIFxuICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5zZXRTaWduYWxUeXBlfSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS11c2VyXCJ9KSwgXCLCoFBlb3BsZVwiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtjbGFzc05hbWU6IGNtcCwgXG4gICAgICAgICAgICAgICBzdHlsZToge3BhZGRpbmc6Mn0sIFxuICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5zZXRTaWduYWxUeXBlfSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1idWlsZGluZ1wifSksIFwiwqBDb21wYW5pZXNcIlxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgU2lnbmFsc09wdGlvbnMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdTaWduYWxzT3B0aW9ucycsXG4gIGFkZFByb2ZpbGU6IGZ1bmN0aW9uKG5ld1Byb2ZpbGUpIHtcbiAgICB0aGlzLnByb3BzLmFkZFByb2ZpbGUobmV3UHJvZmlsZSlcbiAgfSxcblxuICBzZXRDdXJyZW50UHJvZmlsZTogZnVuY3Rpb24oY3VycmVudFByb2ZpbGUpIHtcbiAgICB0aGlzLnByb3BzLnNldEN1cnJlbnRQcm9maWxlKGN1cnJlbnRQcm9maWxlKVxuICB9LFxuXG4gIHJlbW92ZVByb2ZpbGU6IGZ1bmN0aW9uKG9sZFByb2ZpbGUpIHtcbiAgICB0aGlzLnByb3BzLnJlbW92ZVByb2ZpbGUob2xkUHJvZmlsZSlcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gIH0sXG5cbiAgc2V0Q3VycmVudFZpZXc6IGZ1bmN0aW9uKG5ld1ZpZXcpIHtcbiAgICBjb25zb2xlLmxvZyhuZXdWaWV3KVxuICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFZpZXcobmV3VmlldylcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHByb2ZzID0gW11cbiAgICAvL2NvbnNvbGUubG9nKCdzaWduYWxzIHJlbmRlcicpXG4gICAgZm9yKGk9MDsgaTwgdGhpcy5wcm9wcy5wcm9maWxlcy5sZW5ndGg7aSsrKSB7XG4gICAgICBzZWxlY3Q9IHRoaXMucHJvcHMucHJvZmlsZXNbaV0ub2JqZWN0SWQgPT0gdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZS5vYmplY3RJZFxuICAgICAgcHJvZnMucHVzaChTaWduYWxQcm9maWxlKHtzZXRDdXJyZW50UHJvZmlsZTogdGhpcy5zZXRDdXJyZW50UHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZU1pbmluZ0pvYkRvbmU6IHRoaXMucHJvcHMudXBkYXRlTWluaW5nSm9iRG9uZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRWaWV3OiB0aGlzLnNldEN1cnJlbnRWaWV3LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFByb2ZpbGU6IHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogc2VsZWN0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUHJvZmlsZTogdGhpcy5yZW1vdmVQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZmlsZTogdGhpcy5wcm9wcy5wcm9maWxlc1tpXX0pKVxuICAgIH1cblxuICAgIHByb2ZpbGVzX251bSA9ICh0aGlzLnByb3BzLnByb2ZpbGVzLmxlbmd0aCkgPyB0aGlzLnByb3BzLnByb2ZpbGVzLmxlbmd0aCA6IFwiflwiXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibGlzdC1ncm91cFwifSwgXG4gICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcImxpc3QtZ3JvdXAtaXRlbVwiLCBcbiAgICAgICAgICAgIHN0eWxlOiB7Ym9yZGVyVG9wOjAsYm9yZGVyTGVmdDowLGhlaWdodDo0NCxwYWRkaW5nUmlnaHQ6NSxwYWRkaW5nTGVmdDoxMCxcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOicjZTBlNmVhJyxcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOidsaW5lYXItZ3JhZGllbnQoI2Y1ZjdmOCwjZTBlNmVhKTsnfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtzdHlsZToge21hcmdpbjowLHRleHRBbGlnbjonY2VudGVyJyxmb250V2VpZ2h0OjIwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0OidsZWZ0JyxtYXJnaW5Ub3A6Mn19LCBcIlByb2ZpbGVzIChcIiwgcHJvZmlsZXNfbnVtLCBcIilcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXhzIGJ0bi1wcmltYXJ5IGNyZWF0ZS1wcm9maWxlLWRyb3Bkb3duXCIsIFxuICAgICAgICAgICAgICdkYXRhLXRvZ2dsZSc6IFwiZHJvcGRvd25cIiwgXG4gICAgICAgICAgICAgb25DbGljazogdGhpcy5sYXVuY2hEcm9wZG93biwgXG4gICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLFxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6J2xpbmVhci1ncmFkaWVudCgxODBkZWcsICMwMDk2ZmYgMCUsICMwMDVkZmYgMTAwJSknfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wbHVzXCJ9KSwgXCLCoCBDcmVhdGUgUHJvZmlsZVwiXG4gICAgICAgICAgKSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJkcm9wZG93bi1tZW51XCIsIFxuICAgICAgICAgICAgICBzdHlsZToge21hcmdpbkxlZnQ6MTc1LG1hcmdpblRvcDotMTB9LCBcbiAgICAgICAgICAgICAgcm9sZTogXCJtZW51XCIsICdhcmlhLWxhYmVsbGVkYnknOiBcImRyb3Bkb3duTWVudTFcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtyb2xlOiBcInByZXNlbnRhdGlvblwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmxhdW5jaE1vZGFsLCBcbiAgICAgICAgICAgICAgICAgc3R5bGU6IHtwYWRkaW5nTGVmdDo1fX0sIFxuICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luOjJ9fSwgXG4gICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1zdWl0Y2FzZVwiLCBzdHlsZToge3dpZHRoOjEwfX0pLCBcbiAgICAgICAgICAgICAgICAgIFwiwqDCoENyZWF0ZSBIaXJpbmcgU2lnbmFsXCJcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtyb2xlOiBcInByZXNlbnRhdGlvblwiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5sYXVuY2hNb2RhbCwgXG4gICAgICAgICAgICAgICAgIHN0eWxlOiB7cGFkZGluZ0xlZnQ6NX19LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luOjJ9fSwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1pbnN0aXR1dGlvblwiLCBzdHlsZToge3dpZHRoOjEwfX0pLCBcbiAgICAgICAgICAgICAgICAgIFwiwqDCoENyZWF0ZSBGdW5kaW5nIFNpZ25hbFwiXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7cm9sZTogXCJwcmVzZW50YXRpb25cIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7b25DbGljazogdGhpcy5sYXVuY2hNb2RhbCwgXG4gICAgICAgICAgICAgICAgIHN0eWxlOiB7cGFkZGluZ0xlZnQ6NSxwYWRkaW5nUmlnaHQ6Mn0sIFxuICAgICAgICAgICAgICAgICBocmVmOiBcImphdmFzY3JpcHRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW46Mn19LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdXNlclwiLCBzdHlsZToge3dpZHRoOjEwfX0pLCBcbiAgICAgICAgICAgICAgICAgIFwiwqDCoENyZWF0ZSBQcm9zcGVjdCBQcm9maWxlXCJcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtyb2xlOiBcInByZXNlbnRhdGlvblwiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7cm9sZTogXCJtZW51aXRlbVwiLCB0YWJpbmRleDogXCItMVwiLCBcbiAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5sYXVuY2hNb2RhbCwgXG4gICAgICAgICAgICAgICAgIHN0eWxlOiB7cGFkZGluZ0xlZnQ6NSxwYWRkaW5nUmlnaHQ6Mn0sIGhyZWY6IFwiI1wifSwgXG4gICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW46Mn19LCBcbiAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWJ1aWxkaW5nXCIsIHN0eWxlOiB7d2lkdGg6MTB9fSksIFxuICAgICAgICAgICAgICAgICAgIFwiwqDCoENyZWF0ZSBDb21wYW55IFByb2ZpbGVcIlxuICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJwcm9maWxlcy1tZW51XCIsIHN0eWxlOiB7aGVpZ2h0OjM1Niwgb3ZlcmZsb3c6J2F1dG8nLG1hcmdpblRvcDoxfX0sIFxuICAgICAgICAgIHByb2ZzXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gICAgKTtcbiAgfSxcblxuICBsYXVuY2hNb2RhbDogZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnNvbGUubG9nKCQoZS50YXJnZXQpLnRleHQoKS50cmltKCkpXG4gICAgaWYoJChlLnRhcmdldCkudGV4dCgpLnRyaW0oKSA9PSAnQ3JlYXRlIEhpcmluZyBTaWduYWwnKVxuICAgICAgJCgnI2NyZWF0ZUhpcmluZ1NpZ25hbE1vZGFsJykubW9kYWwoKVxuICAgIGVsc2UgaWYoJChlLnRhcmdldCkudGV4dCgpLnRyaW0oKSA9PSAnQ3JlYXRlIEZ1bmRpbmcgU2lnbmFsJylcbiAgICAgICQoJyNjcmVhdGVGdW5kaW5nU2lnbmFsTW9kYWwnKS5tb2RhbCgpXG4gICAgZWxzZSBpZigkKGUudGFyZ2V0KS50ZXh0KCkudHJpbSgpID09ICdDcmVhdGUgUHJvc3BlY3QgUHJvZmlsZScpXG4gICAgICAkKCcjY3JlYXRlUHJvc3BlY3RQcm9maWxlTW9kYWwnKS5tb2RhbCgpXG4gICAgZWxzZSBpZigkKGUudGFyZ2V0KS50ZXh0KCkudHJpbSgpID09ICdDcmVhdGUgQ29tcGFueSBQcm9maWxlJylcbiAgICAgICQoJyNjcmVhdGVDb21wYW55UHJvZmlsZU1vZGFsJykubW9kYWwoKVxuICB9LFxuXG4gIGxhdW5jaERyb3Bkb3duOiBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgJCgnLmNyZWF0ZS1wcm9maWxlLWRyb3Bkb3duJykuZHJvcGRvd24oKVxuICB9XG59KTtcblxudmFyIFNpZ25hbHNGZWVkID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnU2lnbmFsc0ZlZWQnLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIC8vdGhpcy5nZXRTaWduYWxzKClcblxuICAgIHNpZ25hbENhcmRzID0gW11cbiAgICBmb3IoaT0wO2k8IHRoaXMucHJvcHMuc2lnbmFscy5sZW5ndGg7aSsrKSB7XG4gICAgICBpZih0aGlzLnByb3BzLnNpZ25hbFR5cGUgPT0gXCJDb21wYW55U2lnbmFsXCIpXG4gICAgICAgIHNpZ25hbENhcmRzLnB1c2goQ29tcGFueVNpZ25hbENhcmQoe2NvbXBhbnk6IHRoaXMucHJvcHMuc2lnbmFsc1tpXX0pKVxuICAgICAgZWxzZSBpZih0aGlzLnByb3BzLnNpZ25hbFR5cGUgPT0gXCJQZW9wbGVTaWduYWxcIilcbiAgICAgICAgc2lnbmFsQ2FyZHMucHVzaChQZW9wbGVTaWduYWxDYXJkKHtwcm9maWxlOiB0aGlzLnByb3BzLnByb2ZpbGUsIHBlcnNvbjogdGhpcy5wcm9wcy5zaWduYWxzW2ldfSkpXG4gICAgfVxuICAgIFxuICAgIGNvbnRlbnQgPSAodGhpcy5wcm9wcy5zaWduYWxzLmxlbmd0aCkgPyBzaWduYWxDYXJkcyA6IFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJzaWduYWwtY2FyZFwifSwgXCJMT0xcIilcbiAgICBjb250ZW50ID0gc2lnbmFsQ2FyZHNcblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyIHNpZ25hbC1jYXJkLWJhY2tncm91bmRcIiwgc3R5bGU6IHtoZWlnaHQ6MzU2LCBvdmVyZmxvdzonYXV0byd9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtOCBjb2wtbWQtb2Zmc2V0LTJcIn0sIFxuICAgICAgICAgIGNvbnRlbnRcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbnRoZURhdGEgPSByZXF1aXJlKCcuLi9saWIvZGF0YS5taW4uanMnKSBcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gU2lnblVwXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAkKCdib2R5JykuY3NzKHtvdmVyZmxvdzonaGlkZGVuJ30pXG4gIH0sXG5cbiAgcmV0cmlldmVVc2VyOiBmdW5jdGlvbihvYmplY3RJZCkge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBcIlgtUGFyc2UtQXBwbGljYXRpb24tSWRcIjogXCJOODVRT2t0ZUVFUWt1WlZKS0F2dDhNVmVzMHNqRzZxTnBFR3FRRlZKXCIsXG4gICAgICBcIlgtUGFyc2UtUkVTVC1BUEktS2V5XCI6IFwiVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYlwiXG4gICAgfVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL3VzZXJzLycrb2JqZWN0SWQsXG4gICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50VXNlcicsIEpTT04uc3RyaW5naWZ5KHJlcykpXG4gICAgICAgIGxvY2F0aW9uLmhyZWYgPSBcIiNcIlxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIHNpZ251cDogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ3NpZ251cCcpXG4gICAgZW1haWwgPSAkKCcjZW1haWwnKS52YWwoKVxuICAgIHBhc3N3b3JkID0gJCgnI3Bhc3N3b3JkJykudmFsKClcbiAgICBwID0ge1xuICAgICAgXCJYLVBhcnNlLUFwcGxpY2F0aW9uLUlkXCIgIDogXCJOODVRT2t0ZUVFUWt1WlZKS0F2dDhNVmVzMHNqRzZxTnBFR3FRRlZKXCIsXG4gICAgICBcIlgtUGFyc2UtUkVTVC1BUEktS2V5XCIgICAgOiBcIlZONkV3VnlCWndPMXVwaHNCUHNhdTh0N0pRUnAwMFVNM0tZc2lpUWJcIixcbiAgICAgIFwiQ29udGVudC1UeXBlXCIgICAgICAgICAgICA6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfVxuICAgIHRoaXNzID0gdGhpcztcblxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvQ29tcGFueScsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHAsXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICduYW1lJzogJCgnI2NvbXBhbnknKS52YWwoKSxcbiAgICAgIH0pLFxuICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL3VzZXJzJyxcbiAgICAgICAgICB0eXBlOidQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiBwLFxuICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICd1c2VybmFtZSc6ZW1haWwsXG4gICAgICAgICAgICAncGFzc3dvcmQnOnBhc3N3b3JkLFxuICAgICAgICAgICAgJ2NvbXBhbnknOntcbiAgICAgICAgICAgICAgJ19fdHlwZScgICAgOiAnUG9pbnRlcicsXG4gICAgICAgICAgICAgICdjbGFzc05hbWUnIDogJ0NvbXBhbnknLFxuICAgICAgICAgICAgICAnb2JqZWN0SWQnICA6IHJlcy5vYmplY3RJZCxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSxcbiAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgLy8gRG8gYW5vdGhlciByZXF1ZXN0IHRvIGdldCBjdXJyZW50IHVzZXJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50VXNlcicsIEpTT04uc3RyaW5naWZ5KHJlcykpXG4gICAgICAgICAgICB0aGlzcy5yZXRyaWV2ZVVzZXIocmVzLm9iamVjdElkKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHsgXG4gICAgZGF0YSA9IHRoZURhdGEoKVxuICAgIGltZ3NfMSA9IFtdXG4gICAgaW1nc18yID0gW11cbiAgICBmb3IoaT0wO2kgPCAxMjA7IGkrKykge1xuICAgICAgaW1nc18xLnB1c2goUmVhY3QuRE9NLmltZyh7c3JjOiBkYXRhW2ldLCBjbGFzc05hbWU6IFwicHJvc3BlY3QtaW1nXCJ9KSlcbiAgICB9XG4gICAgZm9yKGk9MTU7aSA8IDMwOyBpKyspIHtcbiAgICAgIGltZ3NfMi5wdXNoKFJlYWN0LkRPTS5pbWcoe3NyYzogZGF0YVtpXSwgY2xhc3NOYW1lOiBcInByb3NwZWN0LWltZ1wifSkpXG4gICAgfVxuXG4gIGNvbnNvbGUubG9nKGRhdGEpXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJzaWdudXBcIn0sIFwiIFwiKSwgXG5cbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICAgIFJlYWN0LkRPTS5oMSh7Y2xhc3NOYW1lOiBcInRpdGxlXCJ9LCBcIkN1c3RvbWVyby5cIiksIFxuICAgICAgICBSZWFjdC5ET00uaDUoe2NsYXNzTmFtZTogXCJ0YWdsaW5lXCJ9LCBcIkdlbmVyYXRlIGhpZ2ggcXVhbGl0eSBwcm9zcGVjdCBsaXN0cy4gQWNjZWxlcmF0ZSBTYWxlcy5cIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0IGxvZ2luLWluZm9cIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsbWFyZ2luVG9wOjUwfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZm9ybSh7b25TdWJtaXQ6IHRoaXMubG9naW59LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHtwbGFjZWhvbGRlcjogXCJFbWFpbFwiLCBpZDogXCJlbWFpbFwiLCB0eXBlOiBcInRleHRcIiwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBpbnB1dC1sZ1wiLCBzdHlsZToge2ZvbnRXZWlnaHQ6JzEwMCcsZm9udFNpemU6JzIycHgnfX0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHtwbGFjZWhvbGRlcjogXCJDb21wYW55XCIsIHR5cGU6IFwidGV4dFwiLCBpZDogXCJjb21wYW55XCIsIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgaW5wdXQtbGdcIiwgc3R5bGU6IHtmb250V2VpZ2h0OicxMDAnLGZvbnRTaXplOicyMnB4J319KSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7cGxhY2Vob2xkZXI6IFwiUGFzc3dvcmRcIiwgdHlwZTogXCJwYXNzd29yZFwiLCBpZDogXCJwYXNzd29yZFwiLCBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGlucHV0LWxnXCIsIHN0eWxlOiB7Zm9udFdlaWdodDonMTAwJyxmb250U2l6ZTonMjJweCd9fSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3BsYWNlaG9sZGVyOiBcIlJlcGVhdCBQYXNzd29yZFwiLCB0eXBlOiBcInBhc3N3b3JkXCIsIGlkOiBcInJlcGVhdF9wYXNzd29yZFwiLCBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGlucHV0LWxnXCIsIHN0eWxlOiB7Zm9udFdlaWdodDonMTAwJyxmb250U2l6ZTonMjJweCd9fSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLnNpZ251cCwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4tbGdcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsYmFja2dyb3VuZENvbG9yOicjMWNhM2ZkJ319LCBcIlNpZ24gVXBcIilcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICksIFxuXG4gICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJcIiwgc3R5bGU6IHtwb3NpdGlvbjonYWJzb2x1dGUnLHpJbmRleDonLTInLHRvcDowLGxlZnQ6MH19LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIlwiLCBzdHlsZToge21hcmdpbkxlZnQ6MzR9fSwgXG4gICAgICAgIGltZ3NfMSwgXG4gICAgICAgIGltZ3NfMlxuICAgICAgICApXG4gICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG52YXIgRWRpdFRlbXBsYXRlVmlldyA9IHJlcXVpcmUoJy4vZWRpdF90ZW1wbGF0ZS5qcy5taW4uanMnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvL1RlbXBsYXRlc1xuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzZWxlY3RlZFRlbXBsYXRlOiAwLFxuICAgICAgZWRpdE1vZGU6IGZhbHNlXG4gICAgfVxuICB9LFxuXG4gIGNoYW5nZU1vZGU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2VkaXRNb2RlOiAhdGhpcy5zdGF0ZS5lZGl0ZU1vZGV9KVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgdGVtcGxhdGVWaWV3ID0gKCF0aGlzLnN0YXRlLmVkaXRNb2RlKSA/IFRlbXBsYXRlVmlldyh7Y2hhbmdlTW9kZTogdGhpcy5jaGFuZ2VNb2RlfSkgOiBFZGl0VGVtcGxhdGVWaWV3KG51bGwpXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7aGVpZ2h0OicxMDAlJ319LCBcbiAgICAgICAgICBUZW1wbGF0ZVNpZGVNZW51KG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTlcIiwgc3R5bGU6IHtwYWRkaW5nOjAsaGVpZ2h0OicxMDAlJ319LCBcbiAgICAgICAgICAgICAgdGVtcGxhdGVWaWV3XG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cblxudmFyIFRlbXBsYXRlVmlldyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1RlbXBsYXRlVmlldycsXG4gIGNoYW5nZU1vZGU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucHJvcHMuY2hhbmdlTW9kZSgpXG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1pbmZvXCIsIHN0eWxlOiB7d2lkdGg6JzEwMCUnLGhlaWdodDonMTAwJScsYm9yZGVyOjB9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1oZWFkaW5nXCJ9LCBcbiAgICAgICAgICBcIlRlbXBsYXRlIE5hbWVcIiwgIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY2hhbmdlTW9kZSwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4teHNcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6JzBweCd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBlbmNpbC1zcXVhcmVcIn0pLCBcIiDCoCBFZGl0IFRlbXBsYXRlXCIpXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtYm9keVwifSwgXG4gICAgICAgIFJlYWN0LkRPTS5oNChudWxsLCBcIkZvbGxvd3VwIC0gUHJvc3BlY3RpbmcgU0FBUyBPdXRyZWFjaFwiKSwgXG4gICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5Cb3R0b206JzAnfSwgY2xhc3NOYW1lOiBcInRleHQtbXV0ZWRcIn0sIFwiQ3JlYXRlZCBieSBNYXJrIG9uIEp1bC4gMjEsIDIwMTRcIiksIFxuICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luVG9wOicwJ30sIGNsYXNzTmFtZTogXCJ0ZXh0LW11dGVkXCJ9LCBcImxhc3QgdXBkYXRlZCA3IGRheXMgYWdvXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcblxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwgcGFuZWwtZGVmYXVsdFwifSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtYm9keVwifSwgXG4gICAgICAgICAgXCIxNSBtaW51dGVzIHRvIGdldCBjb21wYW55X25hbWUgbW9yZSBjdXN0b21lcnNcIiArICcgJyArXG4gICAgICAgICAgXCJIZXkgZmlyc3RfbmFtZSxcIiArICcgJyArXG5cbiAgICAgICAgICBcIldvdWxkIHlvdSBsaWtlIHRvIGhlYXIgYW4gaWRlYSBmb3IgYSAxNSBtaW51dGUgaGFjayB0aGF0IGNvdWxkIHNpZ25pZmljYW50bHkgaW5jcmVhc2UgdGhlIG51bWJlciBvZiBwcm9zcGVjdHMgeW91ciBzYWxlcyBwZW9wbGUgaGF2ZSBhY2Nlc3MgdG8gP1wiICsgJyAnICtcbiAgICAgICAgICAgXG4gICAgICAgICAgXCJSZWNlbnRseSBvbmUgb2Ygb3VyIEIyQiBjbGllbnRzIHNhdyBhIGh1Z2UgaW5jcmVhc2UgaW4gdHJpYWwgc2lnbiB1cHMgYWZ0ZXIgd29ya2luZyB3aXRoIHVzLiBmaXJzdF9uYW1lLCBsZXRzIHNjaGVkdWxlIGEgMTUgbWludXRlIGNhbGwgdGhpcyB3ZWVrIHRvIHNlZSBpZiB0aGlzIHdvdWxkIGJlIGEgZ29vZCBmaXQgZm9yIGJvdGggb2YgdXMuXCIgKyAnICcgK1xuICAgICAgICAgICBcbiAgICAgICAgICBcIldoYXQgdGhlIGJlc3QgdGltZSBmb3IgeW91IHRoaXMgd2VlayA/XCIgKyAnICcgK1xuICAgICAgICAgICBcbiAgICAgICAgICBcIi0tXCIgKyAnICcgK1xuICAgICAgICAgIFwiTWFya1wiICsgJyAnICsgXG4gICAgICAgICAgXCJDdXN0b21lcm9cIiArICcgJyArXG4gICAgICAgICAgXCJtYXJrQGN1c3RvbWVyb2hxLmNvbVwiXG4gICAgICAgICAgXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICAgICk7XG4gIH0sXG59KTtcblxudmFyIFRlbXBsYXRlU2lkZU1lbnUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdUZW1wbGF0ZVNpZGVNZW51JyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGVtcGxhdGVzOiBbXSxcbiAgICB9XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIC8vQWpheCBSZXF1ZXN0IEZvciBUZW1wbGF0ZXNcbiAgICAvKlxuICAgICAkLmFqYXgoe1xuICAgICAgdXJsOicnLFxuICAgICAgaGVhZGVyczogXCJcIixcbiAgICAgIGRhdGE6IFwiXCIsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbigpIHtcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oKSB7XG4gICAgICB9XG4gICAgIH0pO1xuICAgICovXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICB0ZW1wbGF0ZXMgPSBbXVxuICAgIGZvcihpPTA7aTwgdGhpcy5zdGF0ZS50ZW1wbGF0ZXMubGVuZ3RoOyBpKyspXG4gICAgICB0ZW1wbGF0ZXMucHVzaChSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwibGlzdC1ncm91cC1pdGVtXCJ9LCBcInRlbXBsYXRlc1tpXS5uYW1lXCIpKVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTNcIiwgc3R5bGU6IHtwYWRkaW5nOicwJywgYm9yZGVyUmlnaHQ6JzFweCBzb2xpZCAjZGRkJyxoZWlnaHQ6JzEwMCUnLHRleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsIHBhbmVsLWRlZmF1bHRcIiwgc3R5bGU6IHtib3JkZXI6MH19LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtaGVhZGluZ1wiLCBzdHlsZToge2hlaWdodDo2MH19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2Zsb2F0OidsZWZ0Jyxmb250U2l6ZToyMCxmb250V2VpZ2h0Oidib2xkJ319LCBcbiAgICAgICAgICAgICAgXCJUZW1wbGF0ZXNcIlxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIFwiLCBcbiAgICAgICAgICAgICAgICBzdHlsZToge2Zsb2F0OidyaWdodCd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJsaXN0LWdyb3VwXCIsIHN0eWxlOiB7dGV4dEFsaWduOidsZWZ0J319LCBcbiAgICAgICAgICAgIHRlbXBsYXRlc1xuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy9UZW1wbGF0ZXNNZW51XG4gIHRvZ2dsZVRlbXBsYXRlRWRpdE1lbnU6IGZ1bmN0aW9uKGN1cnJlbnRUZW1wbGF0ZSkge1xuICAgIHRoaXMucHJvcHMudG9nZ2xlVGVtcGxhdGVFZGl0TWVudShjdXJyZW50VGVtcGxhdGUpXG4gIH0sXG5cbiAgY3JlYXRlVGVtcGxhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucHJvcHMudG9nZ2xlVGVtcGxhdGVFZGl0TWVudSh7XG4gICAgICBuYW1lOiAnJyxcbiAgICAgIGJvZHk6JycsXG4gICAgICBzdWJqZWN0OicnLFxuICAgICAgZWRpdE1vZGU6dHJ1ZSxcbiAgICAgIG5ld1RlbXBsYXRlOiB0cnVlXG4gICAgfSwgdHJ1ZSlcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIC8vY29uc29sZS5sb2codGhpcy5wcm9wcy50ZW1wbGF0ZXMpXG4gICAgdGVtcGxhdGVzID0gW11cbiAgICBmb3IoaT0wO2k8IHRoaXMucHJvcHMudGVtcGxhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0ZW1wbGF0ZXMucHVzaChcbiAgICAgICAgVGVtcGxhdGVMaXN0SXRlbSh7XG4gICAgICAgICAgdG9nZ2xlVGVtcGxhdGVFZGl0TWVudTogdGhpcy50b2dnbGVUZW1wbGF0ZUVkaXRNZW51LCBcbiAgICAgICAgICB0ZW1wbGF0ZTogdGhpcy5wcm9wcy50ZW1wbGF0ZXNbaV19KVxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiXCIsIHN0eWxlOiB7cGFkZGluZzonMCcsIGJvcmRlclJpZ2h0OicycHggc29saWQgcmdiYSgwLDAsMCwwKScsaGVpZ2h0OicxMDAlJyx0ZXh0QWxpZ246J2NlbnRlcid9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0XCIsIFxuICAgICAgICAgICAgIHN0eWxlOiB7Ym9yZGVyUmlnaHQ6MCxib3JkZXJSYWRpdXM6MCxoZWlnaHQ6JzEwMCUnLCBvdmVyZmxvdzonYXV0byd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWhlYWRpbmdcIiwgc3R5bGU6IHtoZWlnaHQ6NDB9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtmbG9hdDonbGVmdCcsZm9udFNpemU6MTQsZm9udFdlaWdodDonYm9sZCd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZmlsZS10ZXh0LW9cIn0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7bWFyZ2luTGVmdDo1fX0sIFwiVGVtcGxhdGVzXCIpXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14c1wiLCBcbiAgICAgICAgICAgICAgb25DbGljazogdGhpcy5jcmVhdGVUZW1wbGF0ZSwgXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7bWFyZ2luTGVmdDo1fX0sIFwiQ3JlYXRlIFRlbXBsYXRlXCIpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cFwiLCBcbiAgICAgICAgICAgICAgc3R5bGU6IHt0ZXh0QWxpZ246J2xlZnQnfX0sIFxuICAgICAgICAgICAgdGVtcGxhdGVzXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KTtcblxudmFyIFRlbXBsYXRlTGlzdEl0ZW0gPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdUZW1wbGF0ZUxpc3RJdGVtJyxcbiAgdG9nZ2xlVGVtcGxhdGVFZGl0TWVudTogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2codGhpcy5wcm9wcy50ZW1wbGF0ZSlcbiAgICB0ZW1wbGF0ZSA9IHRoaXMucHJvcHMudGVtcGxhdGVcbiAgICB0ZW1wbGF0ZS5lZGl0TW9kZSA9IGZhbHNlXG4gICAgdGhpcy5wcm9wcy50b2dnbGVUZW1wbGF0ZUVkaXRNZW51KHRlbXBsYXRlKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgIHN0eWxlOiB7Ym9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHJnYigyMjEsIDIyMSwgMjIxKScscGFkZGluZ1RvcDo1LHBhZGRpbmdCb3R0b206MH0sIFxuICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZVRlbXBsYXRlRWRpdE1lbnUsIFxuICAgICAgICAgICBjbGFzc05hbWU6IFwibGlzdC1ncm91cC1pdGVtXCJ9LCBcbiAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICB0aGlzLnByb3BzLnRlbXBsYXRlLm5hbWVcbiAgICAgICAgICAgKSwgXG4gICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBcIlN1YmplY3Q6XCIsIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwidGV4dCB0ZXh0LW11dGVkXCJ9LCBcbiAgICAgICAgICAgICBcIiBcIiArIHRoaXMucHJvcHMudGVtcGxhdGUuc3ViamVjdFxuICAgICAgICAgICApKVxuICAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIFRpbWVsaW5lRGF5RWxlbWVudFxuICAvLyBUT0RPXG4gIC8vIC0gYWRkIHByb3NwZWN0IGxpc3QgcHJvZ3Jlc3Npb25cbiAgLy8gLSBhZGQgc2NoZWR1bGVkIGZvbGxvd3VwXG4gIC8vXG5cbiAgYWRkRm9sbG93dXA6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucHJvcHMuYWRkRm9sbG93dXAodGhpcy5wcm9wcy5kYXlDb3VudClcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIGJhdGNoQ291bnQgPSB0aGlzLnByb3BzLmJhdGNoQ291bnRcbiAgICBiYXRjaFN0YWdlID0gKGJhdGNoQ291bnQpID8gQmF0Y2hTdGFnZSh7YmF0Y2hDb3VudDogdGhpcy5wcm9wcy5iYXRjaENvdW50fSkgOiBcIlwiXG5cbiAgICBpZih0aGlzLnByb3BzLmFkZFRlbXBsYXRlTW9kZSkge1xuICAgICAgbW9kZSA9IEVkaXRUZW1wbGF0ZSh7YWRkRm9sbG93dXA6IHRoaXMucHJvcHMuYWRkRm9sbG93dXAsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUZvbGxvd3VwOiB0aGlzLnByb3BzLnNhdmVGb2xsb3d1cCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVGb2xsb3d1cDogdGhpcy5wcm9wcy5yZW1vdmVGb2xsb3d1cCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlDb3VudDogdGhpcy5wcm9wcy5kYXlDb3VudCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZXM6IHRoaXMucHJvcHMudGVtcGxhdGVzfSlcbiAgICB9IGVsc2Uge1xuICAgICAgbW9kZSA9IFRlbXBsYXRlRm9sbG93dXAoe2N1cnJlbnRUZW1wbGF0ZTogdGhpcy5wcm9wcy5jdXJyZW50VGVtcGxhdGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRGb2xsb3d1cDogdGhpcy5wcm9wcy5lZGl0Rm9sbG93dXAsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheUNvdW50OiB0aGlzLnByb3BzLmRheUNvdW50LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVGb2xsb3d1cDogdGhpcy5wcm9wcy5yZW1vdmVGb2xsb3d1cCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFRlbXBsYXRlOiB0aGlzLnByb3BzLnNldEN1cnJlbnRUZW1wbGF0ZX0pXG4gICAgfVxuICAgIG1vZGUgPSAodGhpcy5wcm9wcy5lbGVtZW50VHlwZSkgPyBcIlwiIDogbW9kZVxuICAgIGFkZEZvbGxvd3VwID0gKHRoaXMucHJvcHMuZWxlbWVudFR5cGUpID8gdGhpcy5hZGRGb2xsb3d1cCA6IFwiXCJcblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtvbkNsaWNrOiBhZGRGb2xsb3d1cCwgY2xhc3NOYW1lOiBcImRheVwiLCAnZGF0YS10cmlnZ2VyJzogXCJtYW51YWxcIn0sIFxuICAgICAgICAgIFwiRFwiK3RoaXMucHJvcHMuZGF5Q291bnRcbiAgICAgICAgKSwgXG4gICAgICAgIGJhdGNoU3RhZ2UsIG1vZGVcbiAgICAgIClcbiAgICApXG4gIH0sXG5cbiAgc2V0Q3VycmVudFRlbXBsYXRlOiBmdW5jdGlvbih0ZW1wbGF0ZSkge1xuICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFRlbXBsYXRlKHRlbXBsYXRlKVxuICB9XG59KTtcblxudmFyIFRlbXBsYXRlRm9sbG93dXAgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdUZW1wbGF0ZUZvbGxvd3VwJyxcbiAgLy8gRWRpdE1vZGUgRmFsc2VcblxuICBzZXRDdXJyZW50VGVtcGxhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFRlbXBsYXRlKHRoaXMucHJvcHMuY3VycmVudFRlbXBsYXRlKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJmb2xsb3d1cC1wbGFjZW1lbnQgYXJyb3dfYm94XzEgdG1wXzJcIn0sIFxuICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7d2lkdGg6MTMwLGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1maWxlLXRleHQtb1wifSksIFwiwqDCoFwiLCBcbiAgICAgICAgICAodGhpcy5wcm9wcy5jdXJyZW50VGVtcGxhdGUpID8gdGhpcy5wcm9wcy5jdXJyZW50VGVtcGxhdGUubmFtZSA6IFwiXCJcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5idXR0b24oe2NsYXNzTmFtZTogXCJ3aW4tYnRuIGJ0biBidG4tc3VjY2VzcyBidG4teHNcIiwgXG4gICAgICAgICAgICAgICAgJ2RhdGEtdGFyZ2V0JzogXCIuYnMtc2VuZEVtYWlsLW1vZGFsLWxnXCIsIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuc2V0Q3VycmVudFRlbXBsYXRlLCBcbiAgICAgICAgICAgICAgICAnZGF0YS10b2dnbGUnOiBcIm1vZGFsXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBhcGVyLXBsYW5lXCJ9KSwgXCLCoFNlbmRcIiksIFwiwqBcIiwgXG4gICAgICAgIFJlYWN0LkRPTS5idXR0b24oe29uQ2xpY2s6IHRoaXMuZWRpdEZvbGxvd3VwLCBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwid2luLWJ0biBidG4gYnRuLWRlZmF1bHQgYnRuLXhzXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBlbmNpbFwifSkpLCBcIsKgXCIsIFxuICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHtvbkNsaWNrOiB0aGlzLnJlbW92ZUZvbGxvd3VwLCBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwid2luLWJ0biBidG4gYnRuLWRlZmF1bHQgYnRuLXhzXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXRyYXNoLW9cIn0pKVxuICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgZWRpdEZvbGxvd3VwOiBmdW5jdGlvbihlKSB7IFxuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnNvbGUubG9nKHRoaXMucHJvcHMuZGF5Q291bnQpXG4gICAgdGhpcy5wcm9wcy5lZGl0Rm9sbG93dXAodGhpcy5wcm9wcy5kYXlDb3VudClcbiAgfSxcblxuICByZW1vdmVGb2xsb3d1cDogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ3JlbW92ZScpXG4gICAgdGhpcy5wcm9wcy5yZW1vdmVGb2xsb3d1cCh0aGlzLnByb3BzLmRheUNvdW50KVxuICB9XG59KTtcblxudmFyIEJhdGNoU3RhZ2UgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdCYXRjaFN0YWdlJyxcbiAgLy8gRGlmZmVyZW50IFN0YWdlcyBvZiBQZW9wbGUgQWRkZWQgdG8gUHJvc3BlY3QgTGlzdFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZm9sbG93dXAtcGxhY2VtZW50IGFycm93X2JveCB0bXBcIn0sIFxuICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImJhZGdlXCJ9LCBcbiAgICAgICAgICB0aGlzLnByb3BzLmJhdGNoQ291bnRcbiAgICAgICAgKSwgXCLCoFwiLCBcbiAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgXCJwcm9zcGVjdHMgaW4gdGhlIHNhbGVzIGN5Y2xlLlwiKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgRWRpdFRlbXBsYXRlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnRWRpdFRlbXBsYXRlJyxcbiAgLy8gRWRpdCBNb2RlIC0gVHJ1ZVxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIG9wdGlvbnMgPSBbXVxuICAgIGZvcihpPTA7aTwgdGhpcy5wcm9wcy50ZW1wbGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG9wdGlvbnMucHVzaCggUmVhY3QuRE9NLm9wdGlvbihudWxsLCB0aGlzLnByb3BzLnRlbXBsYXRlc1tpXS5uYW1lKSlcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJmb2xsb3d1cC1wbGFjZW1lbnQgYXJyb3dfYm94XzEgdG1wXzJcIn0sIFxuICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7d2lkdGg6NTUsZGlzcGxheTonaW5saW5lLWJsb2NrJ30sIFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBcInRleHQtbXV0ZWRcIn0sIFxuICAgICAgICAgIFwiQ2hvb3NlIDpcIlxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnNlbGVjdCh7Y2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBpbnB1dC1zbVwiLCBcbiAgICAgICAgICAgICAgICBpZDogXCJjaG9vc2VUZW1wbGF0ZUZvckZvbGxvd3VwXCIsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDoxMjcsbWFyZ2luUmlnaHQ6NX19LCBcbiAgICAgICAgICBvcHRpb25zXG4gICAgICAgICksIFxuXG4gICAgICAgIFJlYWN0LkRPTS5idXR0b24oe2NsYXNzTmFtZTogXCJ3aW4tYnRuIGJ0biBidG4tc3VjY2VzcyBidG4teHNcIiwgXG4gICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5zYXZlRm9sbG93dXAsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7bWFyZ2luUmlnaHQ6NX19LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZWNrXCJ9KSksIFxuICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHtjbGFzc05hbWU6IFwid2luLWJ0biBidG4gYnRuLWRlZmF1bHQgYnRuLXhzXCIsIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucmVtb3ZlRm9sbG93dXB9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXRyYXNoLW9cIn0pKVxuICAgICAgKVxuICAgIClcbiAgfSxcblxuICBzYXZlRm9sbG93dXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAvL2dldCB0ZW1wbGF0ZSBmcm9tIGN1cnJlbnRUZW1wbGF0ZVxuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGNob3NlblRlbXBsYXRlID0gJCgnI2Nob29zZVRlbXBsYXRlRm9yRm9sbG93dXAnKS52YWwoKVxuICAgIGNvbnNvbGUubG9nKGNob3NlblRlbXBsYXRlKVxuICAgIGZvcihpPTA7aTwgdGhpcy5wcm9wcy50ZW1wbGF0ZXMubGVuZ3RoOyBpKyspe1xuICAgICAgaWYodGhpcy5wcm9wcy50ZW1wbGF0ZXNbaV0ubmFtZSA9PSBjaG9zZW5UZW1wbGF0ZSl7XG4gICAgICAgIGNob3NlblRlbXBsYXRlID0gdGhpcy5wcm9wcy50ZW1wbGF0ZXNbaV1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coY2hvc2VuVGVtcGxhdGUpXG4gICAgXG4gICAgdGhpcy5wcm9wcy5zYXZlRm9sbG93dXAodGhpcy5wcm9wcy5kYXlDb3VudCwgY2hvc2VuVGVtcGxhdGUpXG4gIH0sXG5cbiAgcmVtb3ZlRm9sbG93dXA6IGZ1bmN0aW9uKGRheSkge1xuICAgIHRoaXMucHJvcHMucmVtb3ZlRm9sbG93dXAodGhpcy5wcm9wcy5kYXlDb3VudClcbiAgfSxcbn0pO1xuXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gVXNlclByb3NwZWN0XG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHsgfVxuICB9LFxuXG4gIGNsaWNrQ2hlY2s6IGZ1bmN0aW9uKCkge1xuICAgIGRvbU5vZGUgPSB0aGlzLmdldERPTU5vZGUoKVxuICAgIGlzQ2hlY2tlZCA9ICQoJChkb21Ob2RlKS5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKVswXSkucHJvcCgnY2hlY2tlZCcpXG4gICAgLy9jb25zb2xlLmxvZyhpc0NoZWNrZWQpXG4gICAgdGhpcy5zZXRTdGF0ZSh7Y2hlY2tlZDogaXNDaGVja2VkfSlcbiAgICB0aGlzLnByb3BzLmNoZWNrYm94QWN0aW9uKGlzQ2hlY2tlZCwgdGhpcy5wcm9wcy5wcm9zcGVjdC5vYmplY3RJZClcbiAgfSxcblxuICByb3dDbGljazogZnVuY3Rpb24oKSB7XG4gICAgJCgkKHRoaXMuZ2V0RE9NTm9kZSgpKS5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKVswXSkuY2xpY2soKVxuICB9LFxuXG4gIGtleWJvYXJkQ2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgICQoJCgnLmtleVNlbGVjdCcpLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpWzBdKS5jbGljaygpXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkgeyB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAga2V5Ym9hcmRTZWxlY3RlZCA9IHtib3JkZXJMZWZ0Oic3cHggc29saWQgcmdiYSgwLDAsMCwwKSd9XG4gICAgdGhpc3NzcyA9IHRoaXNcbiAgICBpZih0aGlzLnByb3BzLmtleWJvYXJkU2VsZWN0ZWQpIHtcbiAgICAgIC8vIEFkanVzdCBTY3JvbGwgZGVwZW5kaW5nIG9uIHdoZXJlIHRoZSBwcm9zcGVjdCBpc1xuICAgICAga2V5Ym9hcmRTZWxlY3RlZCA9IHtib3JkZXJMZWZ0Oic3cHggc29saWQgIzAwOTZmZiAhaW1wb3J0YW50J31cbiAgICAgIE1vdXNldHJhcC51bmJpbmQoJ3gnKVxuICAgICAgTW91c2V0cmFwLmJpbmQoJ3gnLCBmdW5jdGlvbigpIHsgXG4gICAgICAgIHRoaXNzc3Mua2V5Ym9hcmRDbGljaygpXG4gICAgICAgIGlmKHRoaXNzc3Muc3RhdGUuY2hlY2tlZClcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImxtYW9cIilcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHByb3NwZWN0ID0gdGhpcy5wcm9wcy5wcm9zcGVjdFxuXG4gICAgaWYodGhpcy5wcm9wcy5tYXN0ZXJDaGVja2JveENoZWNrZWQgJiYgdGhpcy5zdGF0ZS5jaGVja2VkKVxuICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICBlbHNlIGlmKHRoaXMucHJvcHMuYWxyZWFkeUNoZWNrZWQpXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgIGVsc2UgaWYodGhpcy5zdGF0ZS5jaGVja2VkKVxuICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICBlbHNlIGlmKHRoaXMucHJvcHMubWFzdGVyQ2hlY2tib3hDaGVja2VkIHx8IHRoaXMuc3RhdGUuY2hlY2tlZClcbiAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgZWxzZVxuICAgICAgY2hlY2tlZCA9IGZhbHNlXG5cbiAgICAvL2NvbnNvbGUubG9nKHRoaXMuc3RhdGUuY2hlY2tlZClcbiAgICAvL2NvbnNvbGUubG9nKGNoZWNrZWQpXG4gICAgLy97cHJvc3BlY3QuZW1wbG95ZWVDb3VudFJhbmdlLm5hbWUgKyBcIiBlbXBsb3llZXNcIiB9XG4gICAgXG4gICAgY29sb3IgPSB7fVxuICAgIGlmKHRoaXMuc3RhdGUuY2hlY2tlZCB8fCB0aGlzLnByb3BzLmFscmVhZHlDaGVja2VkKVxuICAgICAgY29sb3IgPSB7YmFja2dyb3VuZENvbG9yOiAnI2VlZjhmZid9XG4gICAgICBcbiAgICByb3dDbCA9ICh0aGlzLnByb3BzLmtleWJvYXJkU2VsZWN0ZWQpID8gXCJwcm9zcGVjdHMtdHIga2V5U2VsZWN0XCIgOiBcInByb3NwZWN0cy10clwiXG4gICAgd2Vic2l0ZUJ0biA9IChwcm9zcGVjdC53ZWJzaXRlVXJsKSA/ICBSZWFjdC5ET00uYSh7aHJlZjogXCJodHRwOi8vXCIrcHJvc3BlY3Qud2Vic2l0ZVVybC5yZXBsYWNlKCdodHRwOi8vJywnJyl9LCBcIiBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1nbG9iZVwifSksIFwiIFwiKSA6IFwiXCJcbiAgICBcbiAgICBwcm9zcGVjdF9lbWFpbCA9IHByb3NwZWN0LmVtYWlsXG4gICAgaWYocHJvc3BlY3QuZW1haWwgPT0gXCJub19lbWFpbFwiKXtcbiAgICAgIGlmKHByb3NwZWN0LmVtYWlsX2d1ZXNzZXMpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhwcm9zcGVjdClcbiAgICAgICAgLy8gR2V0IEZpcnN0IFVudHJpZWQgRW1haWwgdGhlclxuICAgICAgICBwcm9zcGVjdC5lbWFpbF9ndWVzc2VzID0gcHJvc3BlY3QuZW1haWxfZ3Vlc3Nlcy5yZXZlcnNlKClcbiAgICAgICAgZ3Vlc3MgPSBfLmZpbmRXaGVyZShwcm9zcGVjdC5lbWFpbF9ndWVzc2VzLCB7dHJpZWQ6IGZhbHNlfSlcbiAgICAgICAgbmFtZSA9IHRoaXMucHJvcHMucHJvc3BlY3QubmFtZVxuICAgICAgICB2YXJzID0ge1xuICAgICAgICAgIGZpcnN0OiBfLmZpcnN0KG5hbWUuc3BsaXQoJyAnKSksXG4gICAgICAgICAgbGFzdDogXy5sYXN0KG5hbWUuc3BsaXQoJyAnKSksXG4gICAgICAgICAgZmk6IF8uZmlyc3QobmFtZS5zcGxpdCgnICcpKVswXSxcbiAgICAgICAgICBsaTogXy5sYXN0KG5hbWUuc3BsaXQoJyAnKSlbMF1cbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhndWVzcy5wYXR0ZXJuLnBhdHRlcm4pXG4gICAgICAgIHByb3NwZWN0X2VtYWlsID0gTXVzdGFjaGUucmVuZGVyKGd1ZXNzLnBhdHRlcm4ucGF0dGVybiwgdmFycylcbiAgICAgIH1cbiAgICB9XG4gICAgIHByb3NwZWN0X2VtYWlsID0gKHByb3NwZWN0X2VtYWlsKSA/IHByb3NwZWN0X2VtYWlsLnRvTG93ZXJDYXNlKCkgOiBcIlwiXG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnRyKHtjbGFzc05hbWU6IHJvd0NsLCBcbiAgICAgICAgICBvbkNsaWNrOiB0aGlzLnJvd0NsaWNrLCBcbiAgICAgICAgICBzdHlsZToga2V5Ym9hcmRTZWxlY3RlZH0sIFxuICAgICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IGNvbG9yfSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwiLCBcbiAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmNsaWNrQ2hlY2ssIFxuICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogY2hlY2tlZH0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3IsIFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZml4ZWQtZGF0YS1jb2x1bW5cIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7Zm9udFdlaWdodDonYm9sZCd9fSwgcHJvc3BlY3QubmFtZSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2ZvbnRXZWlnaHQ6JzQwMCcsbWFyZ2luOicwcHgnfX0sIFxuICAgICAgICAgICAgICAocHJvc3BlY3QucG9zKSA/IHByb3NwZWN0LnBvcy50cmltKCkgOiBcIlwiXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3IsIFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZml4ZWQtZGF0YS1jb2x1bW5cIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7Zm9udFdlaWdodDonYm9sZCd9fSwgXG4gICAgICAgICAgICAgIHByb3NwZWN0LmNvbXBhbnlfbmFtZVxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7Zm9udFdlaWdodDonNDAwJyxtYXJnaW46JzBweCd9fSwgXG4gICAgICAgICAgICAgIChwcm9zcGVjdC5lbXBsb3llZUNvdW50UmFuZ2UpID8gcHJvc3BlY3QuZW1wbG95ZWVDb3VudFJhbmdlLm5hbWUgKyBcIiBlbXBsb3llZXNcIiA6IFwiXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLCBcblxuICAgICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IGNvbG9yfSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luOicwcHgnfX0sIHByb3NwZWN0LmNpdHkpKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3J9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcIm1haWx0bzpcIitwcm9zcGVjdF9lbWFpbCwgXG4gICAgICAgICAgICAgICBzdHlsZToge21hcmdpbjonMHB4J319LCBcbiAgICAgICAgICAgICAgIHByb3NwZWN0X2VtYWlsXG4gICAgICAgICAgKSksIFxuICAgICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IGNvbG9yfSwgdGhpcy5wcm9wcy5saSwgXCLCoFwiLCB0aGlzLnByb3BzLmxpbmspLCBcbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiBjb2xvcn0sIFxuICAgICAgICAgICAgd2Vic2l0ZUJ0blxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgZGVsZXRlUHJvc3BlY3Q6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucHJvcHMuZGVsZXRlUHJvc3BlY3QodGhpcy5wcm9wcy5wcm9zcGVjdC5vYmplY3RJZCwgJ1Byb3NwZWN0JylcbiAgfVxufSk7XG5cbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICBjaGVja2JveEFjdGlvbjogZnVuY3Rpb24oZSkge1xuICAgIGNoZWNrYm94VmFsID0gJChlLnRhcmdldCkuaXMoJzpjaGVja2VkJylcbiAgICB0aGlzLnByb3BzLm1hc3RlckNoZWNrYm94Q2hhbmdlZChjaGVja2JveFZhbClcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG5cbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICAgICAgICBSZWFjdC5ET00udHIobnVsbCwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIiwgb25DaGFuZ2U6IHRoaXMuY2hlY2tib3hBY3Rpb259KSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJOYW1lXCIpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiQ29tcGFueVwiKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt3aWR0aDonMTcwcHgnfX0sIFwiQ2l0eVwiKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIkVtYWlsXCIpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiwqBcIiksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCLCoFwiKVxuICAgICAgICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vU2lkZU1lbnVMaXN0T3B0aW9uXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtjb3VudDogJ34nfVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAvLyBtYWtlIGFqYXggcmVxdWVzdCB0byBnZXQgZWFjaCByZXF1ZXN0cyBcbiAgICAvKlxuICAgIGxpc3QgPSB7XG4gICAgICAnX190eXBlJyAgICA6ICdQb2ludGVyJyxcbiAgICAgICdvYmplY3RJZCcgIDogdGhpcy5wcm9wcy5saXN0Lm9iamVjdElkLFxuICAgICAgJ2NsYXNzTmFtZScgOiAnUHJvc3BlY3RMaXN0JywgXG4gICAgfVxuXG4gICAgcGFyc2VfaGVhZGVycyA9IHtcbiAgICAgICdYLVBhcnNlLUFwcGxpY2F0aW9uLUlkJyAgOiAnTjg1UU9rdGVFRVFrdVpWSktBdnQ4TVZlczBzakc2cU5wRUdxUUZWSicsIFxuICAgICAgJ1gtUGFyc2UtUkVTVC1BUEktS2V5JyAgICA6ICdWTjZFd1Z5Qlp3TzF1cGhzQlBzYXU4dDdKUVJwMDBVTTNLWXNpaVFiJyxcbiAgICB9XG5cbiAgICB0aGlzcyA9IHRoaXM7XG5cbiAgICAvL2NvbnNvbGUubG9nKHRoaXMucHJvcHMubGlzdC5uYW1lKVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RzJyxcbiAgICAgIHR5cGU6J0dFVCcsXG4gICAgICBoZWFkZXJzOnBhcnNlX2hlYWRlcnMsXG4gICAgICBkYXRhOiAnd2hlcmU9e1wibGlzdHNcIjonK0pTT04uc3RyaW5naWZ5KGxpc3QpKyd9JmNvdW50PTEnLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtjb3VudDogcmVzLmNvdW50fSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KVxuICAgICovXG4gIH0sXG5cbiAgY2hhbmdlTGlzdDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcm9wcy5jaGFuZ2VMaXN0KHRoaXMucHJvcHMubGlzdC5uYW1lLCB0aGlzLnByb3BzLmxpc3Qub2JqZWN0SWQpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBsaXN0TmFtZSA9IHRoaXMucHJvcHMubGlzdC5uYW1lXG4gICAgcHJvcHNDb3VudCA9IHRoaXMucHJvcHMuY291bnRcbiAgICBjb3VudCA9ICh0eXBlb2YocHJvcHNDb3VudCk9PSBcInVuZGVmaW5lZFwiKSA/IHRoaXMuc3RhdGUuY291bnQgOiBwcm9wc0NvdW50XG5cbiAgICAvL2NvbnNvbGUubG9nKHRoaXMucHJvcHMuaWNvblR5cGUpXG4gICAgaWNvbiA9IFwiXCJcbiAgICBpZih0aGlzLnByb3BzLmljb25UeXBlID09IFwiYXJjaGl2ZVwiKXtcbiAgICAgIGljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWFyY2hpdmVcIn0pXG4gICAgfSBlbHNlIGlmKHRoaXMucHJvcHMuaWNvblR5cGUgPT0gXCJ1c2Vyc1wiKXtcbiAgICAgIGljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXVzZXJcIn0pXG4gICAgfSBlbHNlIGlmKHRoaXMucHJvcHMuaWNvblR5cGUgPT0gXCJ3aWZpXCIpe1xuICAgICAgaWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtd2lmaVwifSlcbiAgICB9IGVsc2UgaWYodGhpcy5wcm9wcy5pY29uVHlwZSA9PSBcImNsb3VkRG93bmxvYWRcIil7XG4gICAgICBpY29uID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG91ZC1kb3dubG9hZFwifSlcbiAgICB9XG5cblxuICAgIGNvdW50U3R5bGUgPSAodGhpcy5wcm9wcy5oaWRlQ291bnQpID8geydkaXNwbGF5Jzonbm9uZSd9IDoge2JhY2tncm91bmRDb2xvcjonIzk5OScsZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6JzFweCd9XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIFxuICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmNoYW5nZUxpc3QsIFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibGlzdC1uYW1lcyBidG4gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICBpY29uLCBcbiAgICAgICAgICAgICAgXCLCoFwiLCBcbiAgICAgICAgICAgICAgbGlzdE5hbWUsIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IGNvdW50U3R5bGUsIFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJiYWRnZSBiYWRnZS1kZWZhdWx0XCJ9LCB0aGlzLnByb3BzLmxpc3QuY291bnQpXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1wiMFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC84MzUzYTNmYzA1NzI0Y2JlNDVlOGMyM2IzNDdhMzllN18wOTk0ZDQ1OGZhZmYxZDBiNzFmMGY4ZTUzNDI5OTMzNWE1NzY1YmE0YTY3MmVkODE3NjY5NzI5ZjZhMGExZTlkXCIsXCIxXCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcLzEwN2ZjMjY5MWJiOGIzMzMzYmE3OGExODYwMGZhNTYxXzlhODMyYjJlMjdjMmFhOGNlNmVkMTJjNjJmYjY2NTkzOWU0ZGUzOGYzMGVjOWJlYmQ5MmY4MTNlYTY3N2Y4YzNcIixcIjJcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNDQzMmE1ZGY5OGM1ZWFkMzJjYTNlYzg5OGUxNzVjOTBfZjkzZWYwYTdkZGJhOWFjOTYwYzZhMTU5NDFhNjlhMTI0YTVkNTk2MWZkZTM0NDU1Y2I3Y2VlNmM5N2Y3MTJiYVwiLFwiM1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yMjk1ODBiNzE2NjA2YTRlYjIxNDJiMWVhYWNhMTBlN18yMzk4ZDUwNTBlMTkxZDE1ZmY1Y2Y5ZWI2OGNjNjgzNjkwYzA2ZDM5NDkzNDVkYmY3OTAzOTQ0MzdhNDY1YzA4XCIsXCI0XCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcLzQ5OWQ4YTg2M2Q3ODcyZDZlMjM5NTEyMTI0YWY5ZGRjXzc3MTE4MmRjN2I2YzA4MDFkZTZlNTcxZGVlZDg5YjQzN2FiMTIyMzcyYjU0N2UxZjdkOGRhY2FlOWNiMTcyNzVcIixcIjVcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYTllOTdhNjQ0NWE4YWMxODc1NjEzMTBiMTZiNGJiZDhfOTZjZTkyODlmZDhlNmYyYTZiZjI2MmI0YmFmNTQ4MzY3YWQ3ZjUzYWFjOWE5ZWMxMTU3MDIwNDY1ZGUwN2U2N1wiLFwiNlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8zNWFmNTA4ZGFhNGE1ODA4MDY5NjEyMzZiZmI3NDNhMV8xYTRhZmUyNjU2ZjhkOTVlMzcxNzc1MWY5NmEwYzZjZTZjNWIxZDI1OTIwZjRkNDVlNWNmZTliYmEwNWRlMGM4XCIsXCI3XCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcL2ExMDAzNTAzZWY1ZTIyNTRlNjY5NGVlYmJkMmI0NDk5X2E4Y2QyY2FlZmU2OTE0NzZlM2YwMjM1MTM2OWRjMmMwN2MxYTNkNmNlMGY4N2IxODdmNThmZGY0YjIwMjkyYzVcIixcIjhcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMDFkY2I1Mjc4ZjU1MjI1YjdlOWMwY2ZmNmFhM2Q2ZTZfYjQwZjkyYjljNWVmM2I4YzgxZDQ3OGJiNzBiN2EwOTRmMDc2ZWQ1OWI3ZDM2ZDdhNjQwMWYwZmQ5ZDk1ZWFjZlwiLFwiOVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC82MWQ3OWUzYzI1MTA1MDk5ZjczNjY4YzYyNWVhMzYxY18xZDdjMTI1NTk2ODI1OGMwM2QwNTY0ZTE0MTI4NGI0YmRkYmQyZGI1MjA5MWNmOGQ3NWNiMzg0YjIzOTQ5MzkwXCIsXCIxMFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9jYTgwODQ1MGE2MjIyYzliMDlkNWI4NjkyNGEwOGZiYl9mOTBlMDJjMWU5ODFlNWY2Y2FmOGFmNzZmZWZlZjc2NTNkMGE0NTFkYTUxYmE1YTIyYWMwZjI2NTg3NGJjNmNiXCIsXCIxMVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC85N2RlOTNhOTliOGE5MTU5ZGVkZTJiOWZmMTdjNzg4N18zZTkwZGY4ZTc4OTRjMGMxMjk2M2FiZjJmYWRiMjA1ZTQ0MzY1ZjU4YjUzN2YxNWI2NzdhNGE3ZTljNTU3YmNkXCIsXCIxMlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC85YmY4NDA0ZDY3M2M5ZDYxNzhmMjM1NDhjYWE0YzlhNF80NjYwNmRiYTlkZjRkMTBjZjI4MmZhN2FkZDIzZThhODdiN2Y5NzZkMGUzYTE1M2ZhZDBmZjE4MWUxYmU0ZTE3XCIsXCIxM1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC83ZjNhNDc1NGE2MzRmYzFlMzkwOTBjNWRkNmM0NjgwOF80MmQzMjk0YjM0YzRhYzljNmY5OWY2NmJjM2FkOWExOTVkMjBlOThiMDljNzU3OWZlMzQxZDBjZjQyZjljOTNmXCIsXCIxNFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9iNGJlYmJmYmZiZTQ3ZTUwZjQzNWI0YzJlZmUwZGIwZl8xODFhMzExOWYxMmZkMDNiNmJiNTE3MzUyYzYzNjUwODQ5N2JlYzYxZjkwNzhiMGUyODE1MTVlZmQxOTJiMzQ1XCIsXCIxNVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9lYzFmNjE5MGUyYjlhODBhM2Y3Y2YxMDE2NDljY2M2M18wMDI2MDE3ZjQzODA1ODVhMmU1NDBmMDU5MzZhNmY1OGZlNzI1ZmU3ZThlMDM3OGFhZTk4MDM5NjI4YzRiZGYyXCIsXCIxNlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC85ZGQ5MjFmNDFmYThkNGFiMjliY2MxYzQ1MzQ4YjVhMl8xNThkZjhhMjJjMWYxNTcwZThhMmMxN2FiNWUzMDE2OTI0ODAzMDU5MzY2NWZiZDg3OTJmNWYyZjAxNTE2MjkwXCIsXCIxN1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9iOTc4NmM5YjU2Yzk0Y2FhMTNlNzRkNTliOWE5ZGE0OF8xZjE5NWZiY2RmOTVjMGQyNjE4ZDU3MWUwMTkyZmYxYmUyZTQ5MjFkODhhZWQ4YjdiOWZkOWUxNDQ0NzQ5MjcxXCIsXCIxOFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9hYTg1NzdmODc4ODU4ZjMxODg1OGFjZWQ1YWJkMDM3Zl9jYjkyNmEwN2QwZTQ2ODY2MGUzNTY5Mjc5Y2MxMzU0YWE3MjQzY2RjOTUxZjk3MDMyNTI3Mzk5M2M4OWU5ZWU3XCIsXCIxOVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9jMTFiMzIyZDhhODAwNzAzN2VlM2UzMjQyYjI2MDkzMF8yYTYzYzEzYjMxNWEzOGIwNjlmMzhkYTY1N2IxODlhYWQ2YzdhZjU5NDFhMTk4NTkxMTFkZmIzYzcwYzk0YjQxXCIsXCIyMFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8xOWI2YzM5ODlhODA4YmU4NDU3MThkOGFmMjQzNTJmZl9hOGU3MmFiYjJiNTc3MjcwNmFjMWM3OWU1Y2JhZjU5YjNjMmYyMGVmYjBhY2E5YjkzZDA0YWU4YTI0OTIwOTY3XCIsXCIyMVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9mNDEyMDk3MGE2ODZhNTZiNDc1OTU4NTgwODE3N2NjN184ZTE3NWU0OTViMWRlOTIyY2NkOWE5MmE1ZGU5N2I5NTQzMzQ0NGFjYTQyMmIzZTYzMmMyZWE0ZWQ0OGQzYmM5XCIsXCIyMlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9hZWU3ZTQwYjJkZDRjNGM5OTYxMzIzZDk4MjQ5YzgyNl9jMWMzODdjNzE0ZTg5ZDVkZmNjZjA2ZDNmZTBmZWQzMzI5OTJlZmY4NzdjZGJkNjBiYzRlOTRlN2EyZWQzOGZmXCIsXCIyM1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC82NmQxOGJhZmZmNGY5YjhkMDc3YzEwN2JiNzNiMjkxMl9mODA1NTI4OWVhZTU4ZmFkMDBjYzBmNjcyN2IyYjVjZjBmNzJiODM3OTYzMzUxYjdjYTYyNTBiYTRlMjYzMmExXCIsXCIyNFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yZGE4NTQ2YzNiNmE5OWIxOTEyNDlhZTY5MjA3ZTMxYV9kYjg2NjgxMzMxZDBkMmI5ODUwZTU1OTZjZTc3MTFhYzM4NmY0ZTE0NjljNTI2OTM0MjY3OTc4YWYzNDk4MzM4XCIsXCIyNVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC81NjE3Zjc3ODdjZGYwMTc2ZTU0YzRmMTNlOWNjYzU0ZV9kYTdjYzE2OWY0NjU4NWRlNzJhY2Y1ZjcwNWNkMzRhNTJjNjg4YTQwZGM4YWE3MmVhNzIwZDU1NmE3MDIyZjcyXCIsXCIyNlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9mN2UyNzEyYWE4Y2ZhYjg4YzU1ZDFmNmM3OGVmMmU0NV81Yzg5NWNhMDZmNDBlMzAzNjllMDdiMTljNjRiN2JmMWZlNWJlMDk3N2U1YmJmYzBjMjIxMmI3M2VhNmU2NTEyXCIsXCIyN1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yOWFiNzJjMmI5N2IyNWM0ZTNlMWMyODBlMzI2NGY4MF8wNjliOTRjYWFkM2IxNGUyYmIzYjIwMTJhNTFkOTRlZDhlNDc2ZjBhM2Q5YTM2OGFhYzM2ZGI5ZDcxNmExMmFmXCIsXCIyOFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9lZTE3YTdkOTBjODA2NWEzYWJjZDBhNjcyMGI1MmU2Nl8zYjk5MzhjMjY5M2UxNDJiYTM3MDY1ZGUyNGRhYmVjNTU2YTE5MmFkZDRiODRiNGYyOTc4NWNlYTNiNzQ4NTNmXCIsXCIyOVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8xNmY2MWViZjE4MTBhYzMzM2Y3YzkzNmNlNzExYjI4YV8zNWQ0M2YzZDFjNzYyYjIxZDYyOTYzNGI0NTg0ZDBjZDk1YWVjZGZkOWEzMDg3ZjI0YTllYjcyOWQxMzRiNzY5XCIsXCIzMFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9lMzE4Y2NjNTEyMWNmZWIzYjk5YzIxZDA1NWU2ZWNlOV9lZGM2MDZkNGJjZDNkNzZmOGU0NWRhOTZkOWRiZDY1MWJmMGMwNjdhN2NhMTU5ZTEwNzNlM2I0NGIwMzUzMGM5XCIsXCIzMVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kZjljOTBmMmI5M2E5ZTQ4OGQ5NGZlNTI3MjViZDc5OF8zYjBlMzM5NmQ5ZGVhODY2OTYwZDhjZTZmNjdhZjEwYzg4MDlmMTU0YjY4MzFmYzI3OGI4ZWQzNDM5MGE5ZjI3XCIsXCIzMlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC82ZWVlMzU3ZDEyMWM4MTRhOTdiNjM2MmM0ZTU1NTI2YV9jYmZmNGFjNDM5YzIwNTQ4MTNkZWE4ZGE4YjhmMWVjM2I1ZTBjNjQ0YWNmMGRjMmFlNjI1NzQxZTk3ZjBiZWEwXCIsXCIzM1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC81NjBhZWQxYmVlOGUyMjBmMDk4MDE5MGRlZGI3YWRkNl85YWQyZGU3YzZlYmZkZDcyNGYyYTE3Yzg1ZWZkNTE5MmY4MzkzYTQ3N2RkZGYwYTBjOGM5MjYwZTE3ZDVhNTE1XCIsXCIzNFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC84NTBmMTI0MmRkZDY1MzlhZDhiMjdmNjk5MDhjN2Y5ZV8wOGZmZWNkMmI2ZDE4NGU3ZDcwYWI3MGFiYmJiYWJlNzEzMjI2OTI1MGM5M2RiYmRjYmE3ZjIyZTg2ZjA2OTJlXCIsXCIzNVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8wNzVjMDZjNDgxZWVhNDI5ZjZjYzgxNjY5N2ZjYmJmOF9jNTViOTliZTA1MGJkY2IxZjMyYzk1NzhjYjhlMTdmNmY0ZDZmMjAwYzFmMzdmNTI4YzI0ZmVlNjVhMjYxODJhXCIsXCIzNlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8wMjhiMzExMGFhNjA1NTRlNzQzNGYxYTI0NzMyMjljZl9kMTVlMWM3ZjAwYzgyNzU1ZTE0NDc3M2Q0NmJiNGUwZTk2NGZjZmE0MjVhMjU0Y2EwNWFjMTMxM2ZjZWEzYmFlXCIsXCIzN1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9jMzcxOWY4NWQyNGJhZmVmNjRlYWRhNjRlNzM1Y2E3M18wMjU4ODBjNTFmZjQyYmQzZmY3OWJhMzVkNDU2ZDhjYjE0YjZmYmM3ZWUxN2JhM2I5ODYxMmU3MWFhMWQ3NGI5XCIsXCIzOFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yMjM1NmFiNmFlNDQ2N2M0NGEwNzRhNDEzNGJhZDkzN19hOTkwOWMzN2U2ZTIzYjQzNDNjZTE5NTgyYzkxMThjZmIzNzQ4Yjg5NzdmMWRiODIzMGFhOTkyZDY0MGYxMjE3XCIsXCIzOVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yMTMyZTVhMmZjZDg5YTU0ZTdjNDJjNWZhMGI4ZWY3N19mZjBkYzQ2NTExYjE1MGE0YjBhZjljZGY4NjZhZjJlMDZjZTg5OGQ3MTE5YjdhYjIxMzUwZTBiMzMwNGQ4MDY1XCIsXCI0MFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC80NWFhYTczYjY5M2FlZWM0MTRiMzRmZDQ0MjYyZWY4Zl81MWMyMjUzMmFiZTBiNjE1ZjBlNmUzYzBlOTFjYjFhOWJjYTQxYTZmNmMwZWM2ZjMzYzM2OTNkMTI4ZmQxNzU1XCIsXCI0MVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC81N2JjMmQxYTJhYjY5MmUzODI4NGYzNTUwZjU4YjM4MV8wM2JkNDQxMTcyMDAxZTNjMmU1MDg0ZjMzOTBlZTBjYTAzMjdiNTAyYjBjMWRjNzk0YzhjOGFjMmIzZDIxMzBlXCIsXCI0MlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC80NzQ1YWQwNzgwN2NjYWQ5N2UwNzI2ZmM3YmExODE3MF80ODkxMWE3Mjc0NzRjMDM5OGMzZmM3MDE4ODBkNjIzZmFlZGM1OTJmMTY2NzczMTBmOGU4MTExYTI1ZTJiZTM3XCIsXCI0M1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9jZDE1OTRjNjJhMzFjODMxZDEyNGUyODZiNjkwOTcwMF8wY2Q5ZDA2MDM5MmM1ZjVkNTc1ZjI5YTg5MzBjNTVjNjlhNTQ1MDFjMWQ3NjM2OTI5NjgyYzM4ZTRlMDY5ZDVlXCIsXCI0NFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8xZjNkYjc3MTIzMTNhM2JjZmU1ZmY0YTk5YjY3ZmNkZl9hNjZiZWMwYTQzMTc5NTMxYmNlODAyMGFhYWRlM2Q4NTk2N2I3YzlkZjU0YWIyYmRmNDFmMTJmNmNkNjBkM2VmXCIsXCI0NVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yNjQzZTAwODc1MmRiZmZkMTdjZDdlNGNlYTMwYmIwOF84NjdmZDliNzZjNTM0MmI5MTRiZDliMjg1NzU2YWMxMGNmMDRlMWIzYWQ4Y2I2NTI0YTJjOTZkN2FiNzVjMDdhXCIsXCI0NlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kODlmZDI5NTlmOWVmZGNmNzA3Nzg4MDEyNTNhNDkyMF85N2E5MDY2ODRmODQzZThlYTNmMzIzNzc5N2FkYzYwMWM0ZDIwZGZjYzc5ZTdiNmU3NTY2MzAyMDYzMTJmZTg5XCIsXCI0N1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kMGI3OTIyODIxYzczYmIzNDM1N2I5YTdiYmYyMjY3Y19kNjNhNGU0NjU1NjY1MjY4ZWE5MmRhMDgwNjNjOTVmMzA5NjQ2Zjk2OTgxMjViMzE4YjA2MjE0ODdiOTA2Y2E0XCIsXCI0OFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9iNzZmOGRhOTUzOGVlYTllYjRkODk3NjU2ZjRhZWQ4Yl9mNDlmZmI5NzUxMzQ5M2QwNTZmNDJmZTMxNjY1MGYxZmI1MDdmYzFlYmU3YTA0YWQ4NDU0ZmQyYjU4YzUwZWE3XCIsXCI0OVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8xOTAyODVjNjUzZmUxZDE4ZGIzMjU3ZWVhZjRiZTQzYl82MGFhYzU2MTViOGMwOWZmM2NmYzg0MGVhZmJiMDIwOGE4ZGM0ODI0ZDk0MmRmMTA2MzdlZDFkYzQzMTk4ODk2XCIsXCI1MFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9iZGVlMTE0NDkwOTc2ODU0NGZiMjE2NWQ1ZTA1M2U2NV8wMWVlYjBiNjhmYmUwMzhiMzNiZDBkOTUyY2U2MDU5MGIyZmY1MmMzMmRhMzJiY2VlZTUxODY1MmE4OWU4MTQwXCIsXCI1MVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC82N2YzODE2ZmZhZTNmNzJiZTQyYTc4NTM2MDdmZjU0NV85Yjc3ZjdlZTllZDM5OWZlNzc2NjRhMGM2Y2RlZDMwOWExNDE4N2VkMzI1YjdkYWNlOWI3NGY1OGQzODRmYTcwXCIsXCI1MlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC80MzE0YjY1OTFjY2VjYWEzZWIyNjVlNGU4OTAwMjFmNV8xMzVmNDJhYzUyNWM3MTYwYzY2ODBkOTlkMDg0NjNjY2E0ZjRmODZiNGEwYTExMjUyYjI2YzU3ZjdmNjU1MmUyXCIsXCI1M1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kYzI0OThhMjIxMGY1YzhkZmM5Mzg5MDk2NzBiYTY4Zl9iYjRlZGIzMjRhZWI3NmY0ODA5ZDJmMmZmZWYwMzY4MTU0OTc0MDBmZDI3NmY4MzZkOTIzZTdlMDk5OWMzNTUyXCIsXCI1NFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC84ZWEyZjhhZWNiNjViY2MzY2VjNjkxYmUwNjE4MjJhNl9jOWU4Y2M0ZmY2NzBkZWYyNmEyMDE0YjQ2NThmNTYxYmIzOWFmNzU1NzI3YWIzMWEwNGI2NmM3MDNmYWE2YmZjXCIsXCI1NVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9jYzYyMjA1MDhkNmI1MDk5M2U4Y2I0OWU2YzA3MmEzYV8yNjZkNTdkNDA4Mjg1OTVkY2Y5OTY0MDc2OTU1MjQyY2JjNmQ5Y2RjNzhiYmMzMjNiYTM5ZjA4ODNjMDVmZGE4XCIsXCI1NlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC82ZDIwMGVlMzlmNDA5NmY0OWI1MjNkOThkODUzNmIwM18wZTBkMTkyN2Y2NThiMTRmZjM1YTI0YzlkOGZjNjkzMTkwYzlmNzM5YTZkMTRiMzYzOGE2OWU5MDFiMWE0OTRjXCIsXCI1N1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kZWFmMGQ0ZDQ0MzFkNmJiMmRjYzZiZGExMjU3NWRjOF83ODZiZTdlOGUzNTczMTcwZTE0MmQxYzM5NzRmMThkNmQ2OWQ0YzRkZDNjYTA2NTkzNDY3ZjJmNTNmODMxODk1XCIsXCI1OFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9lYmYzMzliMjk2MzkzNTVjMDFhN2UxZDBjOTA1NWJhM18wYzJjNjM1NGFmNThjNzFlZWUxNzlmNzcyYjhmOWM5NTU2MTExYzA0MmVkZGVjNDg4NjQyMjA1ZmNlOTAxZjZhXCIsXCI1OVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9hZGY3NThhOGRjMDMyMjM5ZDA1YzJiZjMwYTRhMGVkZl8xZGU2OTUyNzVhYWY4NGM1ZDk2MjQ4NzJlZmFjYzIxZjJiYjM1ZDc2OTA3YzAzMjc4OWYwYThhOTEwMDdhNzUxXCIsXCI2MFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9mY2ZkNzNiNmUzZWI1YTllMjQ5YjM3OWE2ZjU1OWZjN183ZjEyZmVlZWZiNzc3YzUyZGEyYzE3NWJmYzMzZGQxOWRiNDA3NDliMzg4YWY0MzVmNGE2OGMwZjA2YjRmOWFkXCIsXCI2MVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8zYzgyZDA4YmNhNzcwMDk5YmIxZmNkYmRhMjE0ODRlYV80YjFiMWEzMTU3MTcxMTQ0MDQ0NjMyN2EzNzMyN2NmODY2ODUzMDdmN2RkNThhZDI2YTViNTY0YjM4NGQ1NGM5XCIsXCI2MlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kYTA4NWRkZjYxZmFiZmM1MjNhNmQ1YmMyMmVhMzA1Yl9mMTk4ZGM0NzY0MTNhZTUyNGUyMzBlYmNkNDI4ZjQ2NDk1MDlhNjQ3OTRiYjEyZGZkZTBkOGZjMmQ5Y2Y4NzgyXCIsXCI2M1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC81MTBjNTdhYzgxOGQwNTM3MDEzMjFkMTZjZmVkOGIzZV83NDIxMGQ5OWFhNjU5N2IyMjdmZTUyMWIwYzdlMTI4YjY2NTEwZGE2YjJjZmJkNjdmNGQwZDBmOGJlN2ExYzEyXCIsXCI2NFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC80MDEyMjMzNDk2MGE1OTU0MjU1Y2NhODdkMDFiYTVhZV8xZDZmYTdhYjA3YTE1ZGY3OWU0YzYxY2VjNWEzNjllNmU3ZGNjN2U1N2ViZmQ1MmZkOTM3NjMwZTA1NmRiZjMyXCIsXCI2NVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yODFiYzAxMGRhNjQ2MDQ1NDU1MzFjYTQwNzRlZGEyZV85MWM0Nzc4MmUxZTdlMTllNThkM2Q1ZGE5ZTQzYzFjNTM1MDVhMTQ1ZGU0YWRjZDIyOTMxNzIxZjk1MWVkY2VkXCIsXCI2NlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8xZjAzMDZhYzE1ZjJhMTE3MDdmYjY2MzdiNjRhYjViY19iYmY3NWQ3YTMxYWZmNjM4OTE2YjE1NGQyNjNiMmZhMWFmOWYzZjUzZWYzMTI0ZTVkNDcwMjg5YjFiNGRjNWM0XCIsXCI2N1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC85OTE0N2I0MjZmMDJlYTYzZjUyZDdiOTA5NmJmYmE5NV8yYWY5MTg1NGU4OWE4MjE0NjY3MjIyZWE4NzFkOThlYjhjMWNjYWY0OTY5ZWMxMjkzNTZiZTBmY2UyZWVjYTUxXCIsXCI2OFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9lY2ViYjE3ZTVjYTIzZGE3ZjQyMGZhMzU3NDcyYmYzZV85ZGNjOTJlNjk2NmQ2ODhjOTU2ZTFlNmEwYWJmNDI0OTk2ODdmOWU4MmI4MmEyNDk5ZDU2YmI5M2E1OWIyYmQ4XCIsXCI2OVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9hYTk2OGQ1MTI4MTUzMjFiNWM3NGFmNDhmM2Q1M2MzZF83NGY3YjkyYTY2ZjQ1ZjhlMDUwYTQ2Zjk0Y2I2NzVkYjdmYzI1N2FjZWZlZDdjZWQ2ZmU4NWE4MmNhYTkzMTM5XCIsXCI3MFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yNDUxZWZhMzljYjZlZTc1NzZiNDFlMTRiOTA3OTI1YV9mNDhlYzkwM2FiMjI4MTJhMzg1NzQzNjI1ZTk3MmU3Njc3M2JkYmQzZTMyM2M3MzY4OWYyN2VjY2FhOWQ5MGJjXCIsXCI3MVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC82ZWNhNWM0NjA3NDgwMThmZTkxZjkxOWQzNWYxZGUwMl8yMTE2ZDdlOWM4MzMwMjFjN2ZiNTgyMzdkYjFlOGFiZDNlMzdhMzJmNjUyZTU0NDlmZWI5NGNkMjg3Y2E2M2NkXCIsXCI3MlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kMjMzZDY1ZGYyYTI3YjRlNmMxNzdhYjM3ZjcyNmMzM19jZWE3ZGJjYjc3NzBhOTc5OGE0OWZjZTNhOGQ1NTY4OWM2Yjc5YWQ3MTBlOGYzYWEwMTIxYmNhYmQ5YjAxNzZiXCIsXCI3M1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8wNjMyMTU5NDM1ZTY3YmRkMmE1ZmZkNjg0NzEzNjFmMF9iNzcxMWI5NmQ0OWJmZTA3YmE0YzZhOTcwMDYxOGM2OTQyNWM2Njc5OTkyMDljY2JkNzU3NTkyNTgwNWIwYjViXCIsXCI3NFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8xZjZlZGViZDU1OTdiYWU3ZGE2M2U3YWQ4NjIxNGNjZF8wYmNjNWVlMThhOTUzOTA0MzUyNGZkYWQ1ZDljYmRiNTI3NTE0MTQzZTc1NWExYTA1MTY5ZTA1ZTA2YzM3OTQxXCIsXCI3NVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8zMTg3NGMxMmQ5ZGYyZGZkODljYjZhNDQ2YmRjNDA0Ml82MTE2NDRlMGU2YmQ2NmYyOTI3MGJlOTk5YWY1ZDRhZWUzN2E1ODk4ZDkzZGQ0MWM0NmRlZTExMWY0ZTYzZmEzXCIsXCI3NlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC85NWJhZDMxYzgxMjdkZWVmOGFlZjdhOGMwZDk2Mjg1Zl8wNWI1NThiODZkYjllZDYxYmRiMTM0ZTdlMzJlNTZkZGVhOTYwZDE4MDY3YzRkNDRjYjdiMjA3Y2ViNTkyZTViXCIsXCI3N1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9lMWEyMWI2YTQ2NWJhOGMwNWFlYzk3ZmE3NTY4ZWZiNV84ODhhYjhhYjQyNGEzMmE1OGIwMDgwOGNhMmY3MTZiOTAzOTkzYTdkMDc2YjQ5MjVjNTIxMTdhMjQ2N2ZmMDRiXCIsXCI3OFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kOGMyNWIzZWQ5MWE4ZmM5MWY5M2FjNTYzNzdjOWRjY183MmFmZDk2Y2IzOWY1ZDA3ZWEyODYzNjFlZGIyNjQ2MjdkMWYyMzRlODcxY2U0ODM3MWRjYTU3YmM0NGM3YTgyXCIsXCI3OVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC85NWIxOTNlMGRiMGY4OTY1ZGU1YzcwYTViOTZiYjA3MV80YjU4N2EzOGE1YjNiNWYyZWI2YWQzN2Q3NDU1MzFlNzIzZWRjMDdlMzhlYjZkNGNmZWMzYTkzODZmNjViMWU4XCIsXCI4MFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC85MGIzZGE3ZTYyYmJkOTk2YjcyMjk3NWEzMjMwZjBmM19iM2U4OWViZTNhMGY5ZDFhNjUwODc3MWUxMTA4NjI3ODg1YjVkZjc5Mzc3YjI5MTQxM2EzNTI4NGNjNTA2ZjVlXCIsXCI4MVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8zMjQyMTU2MzUzYzkwNjU3N2U5ZWE0MGY5MjEzOTcxOV83NmNiNjdiY2I4MjFlZjRhODNiNDc5NjgzMmIxNWQzYWI0NDAyNjI3NTM0ZGUzNmMzZmY1OTJiYTBlMGNhY2IwXCIsXCI4MlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9hNGJlYjYzNGZiOTcyZWY5Y2FlZmVjZjQ3NTI3ZTM0NV9hMThkNjg1MTg4MmQwM2Q0MzcwZmExMmM4NjZmY2Q5MWNhYTkwN2IwY2QyMjYzYTcyMjM3OGMzOTlmYjU5MmI1XCIsXCI4M1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8wNDQ3Y2QyNWU0NTE1NTY5YzNiNjEzYmM0YmQ4OGEwNV9jMzY1NmRkYmJmNWRmYzg0ZTQ0YzM2MTZjZmFkNDEyNjdjOGQ3MzBlMDBkYjU5MThjY2M3NzU3M2ZhYzA3ZDQ5XCIsXCI4NFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8xZTAxYTRlY2JlYjljYTQ2YTYzYjc0NWM2YTJlNDYyZF8zZWJiYmFiMTRkZjBlMmRiNDNhMjk0OGMwMjk4YWQ2N2RlZDUzMDI5ZWZlOWFiYTZiZDQwYjNmZDk5ZDVhYTE4XCIsXCI4NVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC81NTljNTAyYWVhN2FhYjRhMTFlMTIxNzQzYzlkN2M0M182OWNhY2NmZWU0OWY3NDdlNzJhNDc2OGFkNDI3NGM4YjY4NzU4NDhlOWFiN2IyYzg1MTdlMjA5ZDM2YmRmYjMyXCIsXCI4NlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9iMjdhM2FmYTk1ZDg0OWI3Mzc1YTMwNDc2OWJkM2JmM19hY2FkYTdiYmNhMjA4M2NlNTVhYjExOWU4ODY2NmNhMGFlMTBhNGFhYzQ0OGFkNWQ3ZjQ1ZWRmMDA3Nzg5N2ExXCIsXCI4N1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kZTI0YWU2ZTZiNTMxYmFkNTdjMzdiZmZjYWMxOTU0ZF8yYzE1ZjNkYTM1OTNjOTUyNjA3OGJiODBiYzdmYWE2NmVjMDgxYjFjY2FlYTIzMWI1YzI1OWJkYjgyN2Y2ZmQ4XCIsXCI4OFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC83Mzc1YTMwOGM3NjRlNDA1ZjkyYWI5ZDk0Mzk0Mjk0OV82YjdiMzkyZjU2OTRhYmNmYmI3MGRhZjQ1OGMyMjM2OWRiMmY5Yjg5MDU4M2UzZTJkNzEzYjA0NmNkODRlYzg5XCIsXCI4OVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9hMWZjOGI0Y2I1ZTg5ZjFkYzNlZDc0ZWM4YmFmYzNhNV80ZDBlZmM3MTZmM2YyY2I3YmRhNjg5ZTVkYWE3YmE1ZDk1NGVlNTRhOGY5NGY3NzU1YjMwMzA0Mzk3MGIxZDk5XCIsXCI5MFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9jNGY3ZDJiNjI4YzY2MWQxYmFhZDZmZjFmNDcyMmRhOF8xNDllMmI2ZjNhZDQ4OGQxMGZjZTY3MTQ0Y2NlZTZiNjY1MTlkOWQ3Zjg0ODJhMWZmMGM5YWU2MjdmMWRkYmNhXCIsXCI5MVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8wOTQ1OTY0N2YzOTI4ZTc3NzUyNDQ5ZjQxOGE4NWMyN183YTcwNGY4Y2ZhZWE2MmExOTUzZGZkMWUzNDVlYjZlM2FlZTAyMTE0MTg5ZjE4NmYwMTgxYmZmM2E3ZTc3ZmU2XCIsXCI5MlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC82NTVhN2RiODYyY2NkZmExNjJiNmVhMGRmZmEzZWYxZV82ZWIxMzNlNzA1ODc4ZTY0MGE0MjdiNjY0NjU2MTg5ZjFlYTkzMzAyODUxMzNlNGE3M2E5NDNhMDk3NjA2ZGE2XCIsXCI5M1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC80MzRkODJiNDMwMjc5ZDI2YmNkZDliZDEzZGRlYzc2Zl81Y2JhZDdkN2ViNjc0MGRlYmM5ZTJlM2MxYjcxOTdmODYxYjcwNWU2ZTc0Mzc5MzA3YTViYzkwMGQ3NTI1MGY1XCIsXCI5NFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8xNDJlNjRiMDUzNWEyYjBjM2JiNTI1M2MwZDIyNjZhOV82Yzc0MDNjZGE2ZjhkYzYxZWI5ZDJiMzJkMzdmNjA4YzM0YzY0MTEwMWQ2YTJmMzVjMDczOTA3ODk4YTdlNGFlXCIsXCI5NVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8zZjg3OTBmMTEzNGYwNTE0YWYzZDJiYmMwNTIwOTA2MF82Mzc3ZTVkY2RmMGQyMzJmMWFhODEzOTAyMmI4YzkyODBmOGI0Mjk3ZjcwZWZmZjNlMGY3ZDUyNDE3YzFlYjIzXCIsXCI5NlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yMjBhNzA1MjkwZWI3YWRiY2RmMDUyZGRiMmQxMWM5OV8wNjM3NGQ4NTQ2ZDVjNzQ1NjcxZDk4Njg2ZjFiNGIwZGQzMWQ3NzdiMWM3YmNkZDBlNmRmZTYzZDBhMjNlNzE5XCIsXCI5N1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC81MTI0OWJiNmY1MDZlNDJlMTdiZjkyNDFlZjg4YjZiMl9jMTIyMTIwNWY4NTQzOTBkZjFkMjFhYTA1ZTVkMGRlMjY0YjFiOTUzYzY1OWExMGMxODQ3OGNmZDdmNzU1ZWZkXCIsXCI5OFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yODRjMDBiNWZmMTE4OWQyYmRkZjY3ZGY0MDhlZGM0ZV8wMWMxOTE3YTI0NGZjYWRmMGJmZDM5MzNhZjIxYzY4NGRkOTBjYTI3NDExMTI0ODIxMjAyNTM2MWQ4NTVhYjM5XCIsXCI5OVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8zNzQ4M2ZmZTM2NzI1ZTA1YWYwOTU0YTVkOWE1NWEyNl9kYWYwYTJmMGUxMGM5OGMyYjcyYmU5YzBkYTI0YjM4MzIyZjBmOTU2NzMzYTQyNTY1MzY1ZWU2MTU1NjhiYTA3XCIsXCIxMDBcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYzZiMDM1MzFmZWQ0NGY5NmFjZWNhYjI2ODI4ZmJlMzdfMzAzOTNiNmZhMzA5NmE3NGJmYTUxY2FkMWNiNThmNzY2MDg0ODI2M2YwMWYyZjdkMmUxMmRhZTNhNWIxYzNlZFwiLFwiMTAxXCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcLzVkYzkzNDVlZTYwOTJjYTAwNmY3NzdiNDJiMzRlODUzX2RmMTNhZDdjNjE0MDdkMWEwMGUyNjFmY2Q1ZmNkOTNjMTZlMWEwYzFiZTEzZDA5MDNkNzZhMjFhODljZDM0NTlcIixcIjEwMlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8xZGJlZjk4NDA5MzhkNWUzMDU2M2MzZjg0NGI5ZWJhY18xMmZlMTBkZjY2YTZlZTQ4YmZmZTcyNTc4YTZmNDJkMzQwZmYwYjRmNzVkNGZlNjVmNmJlZDJiNzU4NDFlOTc4XCIsXCIxMDNcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYzNhZjI5MmE5MTYzMzllNmM1N2JhMGQwMzcxMmE0NDVfMjczYzM4YmU0MjIyNjlhNDY0NjZkNDg0OTRjNTEzZGFmNTNiM2E2NjQ0MGI2NDAxYzk0YzM3ZjFlNTUwNzBjMlwiLFwiMTA0XCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcL2I0NGRlZDBiMDkwMDk3NTI4YWYyYzRhZDY5NGMyYTQwXzNmNWVkNTZjNjYyZGE4OWUxZTBmM2FlNjJhNjdmOWUxNGVhMjM4NGYyOTg1Mjc3YjFjZGZhNmViZmUxZDE4YzlcIixcIjEwNVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kZjhlYTg2OTA2ZGUzMDdjNTJjYjljZjNiMjIyODA0M18zMTJiZGJkOTUzNmVjMzZlNDJkODMyOGRlZjhhZjFhZmNhYWYzZjcwNTkxN2E2MjhlYTRhZGQwMGJhNzdiOGI1XCIsXCIxMDZcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNjg0NmY2MWQ2YmZjZjc3YWVjZDcyMDZjNmFkYjViZTlfNjRlMTQ5MjQ3ZTUyZTg2YjY3MWZkZDJiNzFhYzI3ODUyZDU0YWU2ZWI2ZjQwNTk0NThiZGIxMTYxZjMwMGRhY1wiLFwiMTA3XCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcL2VmNGExNzY1OTExNDUzZGNhZThlNGJkZDVkMzIwM2ExXzMyMWNmM2JjODcxMGE2YTE5NTc2ZGZlOTM2NzdkZWY0NjY2ZGEwYjQ3NDQ0ODljMjZhYTQ0Zjc1YTc1MzMzM2VcIixcIjEwOFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kYzM4MWY5ZTBiNjE5M2U4YmU1ZDk0NTk1ZWQxYzRiN19kNjEyYWZkZTdiYWY0M2FjNWRhZWFlOWUwZWZlNDI3ODE4NjdiYzM0NTFlM2U4ODE0MjUzY2JmYzQ0MTBiYjRhXCIsXCIxMDlcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvOTU3OWQ1ZGQ4NTIzYzQ5M2UwNTkwZTM4ODFlMjUwNDFfMTA2YzM5YjdlOTdmZGQ1N2FiYjk5MmVjN2ZmN2MwZjBiMTVmMGY4M2EzNDhlM2EzNjk4ZTNmY2JkY2RmMjgzNlwiLFwiMTEwXCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcLzk1Y2ZkYTBjYjdiZmFhYzBmYzc4OWNmMDVjN2U1MTNlX2E1MDkwNDlhZWEwMjg4NmViNDA5YzUzYTE1ZTAzYTZjZjVlYjY1ODMxMjAyNjdiYmNhNzVjMjIwNjAyN2MwYjFcIixcIjExMVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC82ZTA1ZGFhYWI5YTgxYTJlYTUzNDhiNzA4MzNiZGZiNl8wMjNlYjFlOTQ3Njg2YWVmNzc2NGEzY2U0Yzk2ODNiNDdkMjIzNWM1MWEwMzFlMzZiOTQ3ZTQzOThlZjY5MDZkXCIsXCIxMTJcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZDI5ZDRmY2IxYjI1YTlkNDI0YTEyODAwODY5YTNiNjVfOTkxZDU2Mzg4MGEzMzQ1MDczZWJiNGNjM2NkNTc3NzhlZjVjZmJjM2FlNjI1Y2VmZWMyZmZjM2I2OTBhNWFhNVwiLFwiMTEzXCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcLzk4Mzc2NGNiNTA3NWVlZGJkOTZlYzAzNGRmMTM3NGExX2E5NGY1YTFmMGM5YjQ1YjkwODIwNDRlYmU3Mjc3NGIwMzEzYTU4ZTVhMmY1OGQwMGE2MzgyN2FkN2Q0OGJiNjJcIixcIjExNFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC85YWJhZmVkN2E5MTlmZTU0MDQ2YWJlNDU4YTZiMzE0MF80MDAzYzUyMjYwODNiN2JlYjdiNTkwMWM3OTAyN2UzODMzYmUwYWVjNzhkYTlhYTNmYzA1ZjAyOTNmNWJiNDNlXCIsXCIxMTVcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNDI2OGEyMzFlMzRjNzhhODA3YmQ1MWM3ZDVlMTA2NGVfYTkwNDljZmQ5Y2JiYjI1MDQ3NGMxMzY0NzEwZGNkMjc2ZTE4OTYyOTdiMmRlZTM3YjZmZmFkOTZhODgyYmRhOVwiLFwiMTE2XCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcL2I4MGJlNTRiZjBmYmI0M2ViZDhhMjBkY2E0ZDhmNmYwXzU0NGQ1YTM0ZTFkOTU5ZTRlNzc5NGM1ODUwM2IzNDc4ZGUzM2ViNGVmMjFlOGI3NDgzOWI5NTBhZGRhN2RlZGRcIixcIjExN1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC80Y2UyODM3MWRlNjVhMjJhMjQxZGVlMjgxMjhkZGE0ZF8wZGFlYzZkZmZlNmJkNzI2ZjMwMzFkNTFhMzk3MjhjNGY4OGY0ODQ4MmViYmFlNmMwNWY3NThjYTI0ZGQwODkwXCIsXCIxMThcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYzU1Mjg0YjgwOThjYmFhOWExZGIwOGNiZGY0NmJhZThfNmJhYTdhY2VmYjAzOGFjYmIyZmVkYmZkY2U1NTY3NjZjNDgzNDljNWQxMzM3NDM0N2EyNmJkODNlMmFjZjI4M1wiLFwiMTE5XCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcL2RkNzdjZjQyZjY5MGU4MDhiYjlkODEzMWI3Y2VjNDhiXzBiMzcxMzcxNmQxMTI3YjM2ZWIzMzU3Mzc3NzhjY2EzZDRiN2I0NzZhOTlhNTcxYTExZGMxMThlNzE0NjNkMmJcIixcIjEyMFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9jNjU3ZTNmMjVhYjlhZTg1YTk5ZTQyMTIzMWE2YzZhOF8wNmRlYjgxY2ZlYzcwZGJkMTRkYTZiYjY0NzFiOGVlNGJjYzE0MmVlMDhiNjA3MTRhZjlmOTE2ODNiNDYxZTZhXCIsXCIxMjFcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvY2Q0ZmM0MjY3MDdkNjNlNGQ5YjhiYzkyMDVkZWEzZmNfY2I2NDhmZmU3MGVjMDk0MmJlODBmMjk0YTFhMDdjNWU2NDk1ODU3MDI2NWI3MGNmZDg0ZGE3ODA3Mjg3N2ZlN1wifVxufVxuIiwiLyogbW91c2V0cmFwIHYxLjQuNiBjcmFpZy5pcy9raWxsaW5nL21pY2UgKi9cbihmdW5jdGlvbihKLHIsZil7ZnVuY3Rpb24gcyhhLGIsZCl7YS5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihiLGQsITEpOmEuYXR0YWNoRXZlbnQoXCJvblwiK2IsZCl9ZnVuY3Rpb24gQShhKXtpZihcImtleXByZXNzXCI9PWEudHlwZSl7dmFyIGI9U3RyaW5nLmZyb21DaGFyQ29kZShhLndoaWNoKTthLnNoaWZ0S2V5fHwoYj1iLnRvTG93ZXJDYXNlKCkpO3JldHVybiBifXJldHVybiBoW2Eud2hpY2hdP2hbYS53aGljaF06QlthLndoaWNoXT9CW2Eud2hpY2hdOlN0cmluZy5mcm9tQ2hhckNvZGUoYS53aGljaCkudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiB0KGEpe2E9YXx8e307dmFyIGI9ITEsZDtmb3IoZCBpbiBuKWFbZF0/Yj0hMDpuW2RdPTA7Ynx8KHU9ITEpfWZ1bmN0aW9uIEMoYSxiLGQsYyxlLHYpe3ZhciBnLGssZj1bXSxoPWQudHlwZTtpZighbFthXSlyZXR1cm5bXTtcImtleXVwXCI9PWgmJncoYSkmJihiPVthXSk7Zm9yKGc9MDtnPGxbYV0ubGVuZ3RoOysrZylpZihrPVxubFthXVtnXSwhKCFjJiZrLnNlcSYmbltrLnNlcV0hPWsubGV2ZWx8fGghPWsuYWN0aW9ufHwoXCJrZXlwcmVzc1wiIT1ofHxkLm1ldGFLZXl8fGQuY3RybEtleSkmJmIuc29ydCgpLmpvaW4oXCIsXCIpIT09ay5tb2RpZmllcnMuc29ydCgpLmpvaW4oXCIsXCIpKSl7dmFyIG09YyYmay5zZXE9PWMmJmsubGV2ZWw9PXY7KCFjJiZrLmNvbWJvPT1lfHxtKSYmbFthXS5zcGxpY2UoZywxKTtmLnB1c2goayl9cmV0dXJuIGZ9ZnVuY3Rpb24gSyhhKXt2YXIgYj1bXTthLnNoaWZ0S2V5JiZiLnB1c2goXCJzaGlmdFwiKTthLmFsdEtleSYmYi5wdXNoKFwiYWx0XCIpO2EuY3RybEtleSYmYi5wdXNoKFwiY3RybFwiKTthLm1ldGFLZXkmJmIucHVzaChcIm1ldGFcIik7cmV0dXJuIGJ9ZnVuY3Rpb24geChhLGIsZCxjKXttLnN0b3BDYWxsYmFjayhiLGIudGFyZ2V0fHxiLnNyY0VsZW1lbnQsZCxjKXx8ITEhPT1hKGIsZCl8fChiLnByZXZlbnREZWZhdWx0P2IucHJldmVudERlZmF1bHQoKTpiLnJldHVyblZhbHVlPSExLGIuc3RvcFByb3BhZ2F0aW9uP1xuYi5zdG9wUHJvcGFnYXRpb24oKTpiLmNhbmNlbEJ1YmJsZT0hMCl9ZnVuY3Rpb24geShhKXtcIm51bWJlclwiIT09dHlwZW9mIGEud2hpY2gmJihhLndoaWNoPWEua2V5Q29kZSk7dmFyIGI9QShhKTtiJiYoXCJrZXl1cFwiPT1hLnR5cGUmJno9PT1iP3o9ITE6bS5oYW5kbGVLZXkoYixLKGEpLGEpKX1mdW5jdGlvbiB3KGEpe3JldHVyblwic2hpZnRcIj09YXx8XCJjdHJsXCI9PWF8fFwiYWx0XCI9PWF8fFwibWV0YVwiPT1hfWZ1bmN0aW9uIEwoYSxiLGQsYyl7ZnVuY3Rpb24gZShiKXtyZXR1cm4gZnVuY3Rpb24oKXt1PWI7KytuW2FdO2NsZWFyVGltZW91dChEKTtEPXNldFRpbWVvdXQodCwxRTMpfX1mdW5jdGlvbiB2KGIpe3goZCxiLGEpO1wia2V5dXBcIiE9PWMmJih6PUEoYikpO3NldFRpbWVvdXQodCwxMCl9Zm9yKHZhciBnPW5bYV09MDtnPGIubGVuZ3RoOysrZyl7dmFyIGY9ZysxPT09Yi5sZW5ndGg/djplKGN8fEUoYltnKzFdKS5hY3Rpb24pO0YoYltnXSxmLGMsYSxnKX19ZnVuY3Rpb24gRShhLGIpe3ZhciBkLFxuYyxlLGY9W107ZD1cIitcIj09PWE/W1wiK1wiXTphLnNwbGl0KFwiK1wiKTtmb3IoZT0wO2U8ZC5sZW5ndGg7KytlKWM9ZFtlXSxHW2NdJiYoYz1HW2NdKSxiJiZcImtleXByZXNzXCIhPWImJkhbY10mJihjPUhbY10sZi5wdXNoKFwic2hpZnRcIikpLHcoYykmJmYucHVzaChjKTtkPWM7ZT1iO2lmKCFlKXtpZighcCl7cD17fTtmb3IodmFyIGcgaW4gaCk5NTxnJiYxMTI+Z3x8aC5oYXNPd25Qcm9wZXJ0eShnKSYmKHBbaFtnXV09Zyl9ZT1wW2RdP1wia2V5ZG93blwiOlwia2V5cHJlc3NcIn1cImtleXByZXNzXCI9PWUmJmYubGVuZ3RoJiYoZT1cImtleWRvd25cIik7cmV0dXJue2tleTpjLG1vZGlmaWVyczpmLGFjdGlvbjplfX1mdW5jdGlvbiBGKGEsYixkLGMsZSl7cVthK1wiOlwiK2RdPWI7YT1hLnJlcGxhY2UoL1xccysvZyxcIiBcIik7dmFyIGY9YS5zcGxpdChcIiBcIik7MTxmLmxlbmd0aD9MKGEsZixiLGQpOihkPUUoYSxkKSxsW2Qua2V5XT1sW2Qua2V5XXx8W10sQyhkLmtleSxkLm1vZGlmaWVycyx7dHlwZTpkLmFjdGlvbn0sXG5jLGEsZSksbFtkLmtleV1bYz9cInVuc2hpZnRcIjpcInB1c2hcIl0oe2NhbGxiYWNrOmIsbW9kaWZpZXJzOmQubW9kaWZpZXJzLGFjdGlvbjpkLmFjdGlvbixzZXE6YyxsZXZlbDplLGNvbWJvOmF9KSl9dmFyIGg9ezg6XCJiYWNrc3BhY2VcIiw5OlwidGFiXCIsMTM6XCJlbnRlclwiLDE2Olwic2hpZnRcIiwxNzpcImN0cmxcIiwxODpcImFsdFwiLDIwOlwiY2Fwc2xvY2tcIiwyNzpcImVzY1wiLDMyOlwic3BhY2VcIiwzMzpcInBhZ2V1cFwiLDM0OlwicGFnZWRvd25cIiwzNTpcImVuZFwiLDM2OlwiaG9tZVwiLDM3OlwibGVmdFwiLDM4OlwidXBcIiwzOTpcInJpZ2h0XCIsNDA6XCJkb3duXCIsNDU6XCJpbnNcIiw0NjpcImRlbFwiLDkxOlwibWV0YVwiLDkzOlwibWV0YVwiLDIyNDpcIm1ldGFcIn0sQj17MTA2OlwiKlwiLDEwNzpcIitcIiwxMDk6XCItXCIsMTEwOlwiLlwiLDExMTpcIi9cIiwxODY6XCI7XCIsMTg3OlwiPVwiLDE4ODpcIixcIiwxODk6XCItXCIsMTkwOlwiLlwiLDE5MTpcIi9cIiwxOTI6XCJgXCIsMjE5OlwiW1wiLDIyMDpcIlxcXFxcIiwyMjE6XCJdXCIsMjIyOlwiJ1wifSxIPXtcIn5cIjpcImBcIixcIiFcIjpcIjFcIixcblwiQFwiOlwiMlwiLFwiI1wiOlwiM1wiLCQ6XCI0XCIsXCIlXCI6XCI1XCIsXCJeXCI6XCI2XCIsXCImXCI6XCI3XCIsXCIqXCI6XCI4XCIsXCIoXCI6XCI5XCIsXCIpXCI6XCIwXCIsXzpcIi1cIixcIitcIjpcIj1cIixcIjpcIjpcIjtcIiwnXCInOlwiJ1wiLFwiPFwiOlwiLFwiLFwiPlwiOlwiLlwiLFwiP1wiOlwiL1wiLFwifFwiOlwiXFxcXFwifSxHPXtvcHRpb246XCJhbHRcIixjb21tYW5kOlwibWV0YVwiLFwicmV0dXJuXCI6XCJlbnRlclwiLGVzY2FwZTpcImVzY1wiLG1vZDovTWFjfGlQb2R8aVBob25lfGlQYWQvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKT9cIm1ldGFcIjpcImN0cmxcIn0scCxsPXt9LHE9e30sbj17fSxELHo9ITEsST0hMSx1PSExO2ZvcihmPTE7MjA+ZjsrK2YpaFsxMTErZl09XCJmXCIrZjtmb3IoZj0wOzk+PWY7KytmKWhbZis5Nl09ZjtzKHIsXCJrZXlwcmVzc1wiLHkpO3MocixcImtleWRvd25cIix5KTtzKHIsXCJrZXl1cFwiLHkpO3ZhciBtPXtiaW5kOmZ1bmN0aW9uKGEsYixkKXthPWEgaW5zdGFuY2VvZiBBcnJheT9hOlthXTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoOysrYylGKGFbY10sYixkKTtyZXR1cm4gdGhpc30sXG51bmJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbS5iaW5kKGEsZnVuY3Rpb24oKXt9LGIpfSx0cmlnZ2VyOmZ1bmN0aW9uKGEsYil7aWYocVthK1wiOlwiK2JdKXFbYStcIjpcIitiXSh7fSxhKTtyZXR1cm4gdGhpc30scmVzZXQ6ZnVuY3Rpb24oKXtsPXt9O3E9e307cmV0dXJuIHRoaXN9LHN0b3BDYWxsYmFjazpmdW5jdGlvbihhLGIpe3JldHVybi0xPChcIiBcIitiLmNsYXNzTmFtZStcIiBcIikuaW5kZXhPZihcIiBtb3VzZXRyYXAgXCIpPyExOlwiSU5QVVRcIj09Yi50YWdOYW1lfHxcIlNFTEVDVFwiPT1iLnRhZ05hbWV8fFwiVEVYVEFSRUFcIj09Yi50YWdOYW1lfHxiLmlzQ29udGVudEVkaXRhYmxlfSxoYW5kbGVLZXk6ZnVuY3Rpb24oYSxiLGQpe3ZhciBjPUMoYSxiLGQpLGU7Yj17fTt2YXIgZj0wLGc9ITE7Zm9yKGU9MDtlPGMubGVuZ3RoOysrZSljW2VdLnNlcSYmKGY9TWF0aC5tYXgoZixjW2VdLmxldmVsKSk7Zm9yKGU9MDtlPGMubGVuZ3RoOysrZSljW2VdLnNlcT9jW2VdLmxldmVsPT1mJiYoZz0hMCxcbmJbY1tlXS5zZXFdPTEseChjW2VdLmNhbGxiYWNrLGQsY1tlXS5jb21ibyxjW2VdLnNlcSkpOmd8fHgoY1tlXS5jYWxsYmFjayxkLGNbZV0uY29tYm8pO2M9XCJrZXlwcmVzc1wiPT1kLnR5cGUmJkk7ZC50eXBlIT11fHx3KGEpfHxjfHx0KGIpO0k9ZyYmXCJrZXlkb3duXCI9PWQudHlwZX19O0ouTW91c2V0cmFwPW07XCJmdW5jdGlvblwiPT09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKG0pfSkod2luZG93LGRvY3VtZW50KTtcbiJdfQ==
