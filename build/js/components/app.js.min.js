(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
   //Analytics
  render: function () {
    return (
      React.DOM.div({style: {height:'400px'}, className: ""}, 
        React.DOM.div({className: "container", style: {width:'100%',padding:'0',height:'100%'}}, 
          AnalyticsSideMenu(null), 
          React.DOM.div({className: "col-md-3", style: {padding:'0'}}, 
            React.DOM.table({className: "table table-striped"}, 
              React.DOM.thead(null, 
                React.DOM.th(null, "Stat"), 
                React.DOM.th(null, "#")
              ), 
              React.DOM.tbody(null, 
                React.DOM.tr(null, React.DOM.td(null, "# of People Prospected"), React.DOM.td(null, "lil")), 
                React.DOM.tr(null, React.DOM.td(null, "# of Companies Prospected"), React.DOM.td(null, "lil")), 
                React.DOM.tr(null, React.DOM.td(null, "# of Emails Sent"), React.DOM.td(null, "lil")), 
                React.DOM.tr(null, React.DOM.td(null, "# of Emails Delivered"), React.DOM.td(null, "lil")), 
                React.DOM.tr(null, React.DOM.td(null, "# of Emails Delivery Failures"), React.DOM.td(null, "lil"))
              )
            )
          )
        )
      )
    );
  }
});

var AnalyticsSideMenu = React.createClass({displayName: 'AnalyticsSideMenu',
  render: function() {
    return (
      React.DOM.div({className: "col-md-2", style: {padding:'0',height:'100%',backgroundColor:'rgb(90, 107, 119)',borderBottomLeftRadius:'3px'}}, 
        React.DOM.div({className: "btn-group-vertical", style: {width:'100%'}}, 
          React.DOM.button({type: "button", className: "sharp btn btn-default"}, 
            React.DOM.i({className: "fa fa-search"}), "   Prospecting Overview"
          ), 
          React.DOM.button({type: "button", className: "sharp btn btn-default"}, 
            React.DOM.i({className: "fa fa-paper-plane"}), "   Email Outreach"
          ), 
          React.DOM.button({type: "button", className: "sharp btn btn-default"}, 
            React.DOM.i({className: "fa fa-user"}), "   Team Stats"
          ), 
          React.DOM.button({type: "button", className: "sharp btn btn-default"}, 
            React.DOM.i({className: "fa fa-cloud"}), "   CRM Integration"
          ), 
          React.DOM.button({type: "button", className: "sharp btn btn-default"}, 
            React.DOM.i({className: "fa fa-circle-o"}), "   Sales Cycle"
          )
        )
      )
    );
  }
});

},{}]},{},[1])


},{}],2:[function(require,module,exports){
/** @jsx React.DOM */

/* TODO
 * 
 * - All count change, when prospect is archived
 * - When is list is chaanged from all and then returned to All prospects take a long     time to load
 * - Fix pagination issues
 *
 * - Parallelize Workers
 * - Scale up google scrape to hundreds of workers (heroku)
 *
 * - Company Shortcuts 
 * - Add ability to switch accounts for admins
 * - Add email uneditable email fields
 */

var Prospects = require('./prospects.js.min.js');
var CompanyProspect = require('./company.js.min.js');
var CompanyProspects = require('./company_prospects.js.min.js');
var DataTable = require('./data_table.js.min.js');
var MiningJob = require('./mining_job.js.min.js');
var Campaigns = require('./email.js.min.js');
var Analytics = require('./analytics.js.min.js');
var SignUp = require('./signup.js.min.js');
var Login = require('./login.js.min.js');
var LandingPage = require('./landing_page.js.min.js');
var LandingPage = require('./landing_page_concept.js.min.js');
var FreeTrial = require('./free_trial.js.min.js');
var Pricing = require('./pricing.js.min.js');
var Signals = require('./signals.js.min.js');
var MouseTrap = require('../lib/mousetrap.min.min.js')
//var checkAuth = require('./auth.min.js')

var Home = React.createClass({displayName: 'Home',
  componentWillMount: function(){
    checkAuth()
  },

  getInitialState: function() {
    // num_of_pages
    console.log(this.props)
    return {prospects: [] , 
            currentPage: 1, 
            pages: 1, 
            count:"~", 
            prospectType:'Prospect', 
            //selectedScreen:'Prospects'}
            selectedScreen: this.props.selectedScreen}
  },

  toggleScreen: function(e) {
    e.preventDefault()
    this.setState({selectedScreen : $(e.target).text().trim()})
  },

  logout: function() {
    localStorage.clear()
    location.href = "#get_started"
  },

  listDropdown: function() {
    console.log('dropdown')
    //$('.dropdown-menu').dropdown()
    $('.prospect-list-select').css('border-bottom-right-radius','0px')
    $('.prospect-list-select').css('border-bottom-left-radius','0px')
      
    $('.list-select-dropdown').css('border-top-left-radius','0px')
    $('.list-select-dropdown').css('border-top-right-radius','0px')
  },

  selectChange : function() {

  },

  stripeCheckout: function() {
    handler.open({
      name: 'Customero',
      description: 'Get 900 free email credits!',
      amount: 0,
      panelLabel: "Start Your Free Trial!",
      opened: function() {
      },
      closed: function() {
        console.log("closed")
        location.reload()
      }
    });
  },

  componentDidMount: function() {
    // Credit Card Verified Check
    localStorage.selectedProspects = "[]"
    currentUser = JSON.parse(localStorage.currentUser)
    if(!currentUser.creditCardVerified)
      this.stripeCheckout()

    /*
     * Make Request To Get Most Up to Date Info
     * On Success Add To Intercom
    */

    /*
    $.ajax({
      url:''
      success: function(res) {
        // Number of Prospects for user
        // Number of Lists
        // Number of Emails found
        Intercom('boot', {
          app_id: 'abc12345',
          email: 'john.doe@example.com',
          created_at: 1234567890,
          name: 'John Doe',
          user_id: '9876'
        });
      },
      error: function(err) {
      }
    });
    */
    // Intercom
    // Mixpanel
  },

  render: function() {
    prospects = "choose btn btn-primary "
    companyProspects = "choose btn btn-primary "
    campaigns = "choose btn btn-primary "
    signals = "choose btn btn-primary "
    switch (this.state.selectedScreen) {
      case 'Prospects':
        currentScreen = Prospects(null)
        prospects = "choose btn btn-primary app-active"
        location.href= "#prospects"
        break;
      case 'Companies':
        currentScreen = CompanyProspects(null)
        currentScreen = DataTable({listClassName: 'CompanyProspectList', 
                                   tableHeader: ['Name','Added On','Industry',
                                                 '# of Prospects','Signals',
                                                 '',''], 
                                   className: 'CompanyProspect'})
        location.href= "#companies"
        companyProspects = "choose btn btn-primary app-active"
        break;
      case 'Mining Jobs':
        currentScreen = MiningJob(null)
        break;
      case 'Analytics':
        currentScreen = Analytics(null)
        break;
      case 'Campaigns':
        currentScreen = Campaigns(null)
        campaigns = "choose btn btn-primary app-active"
        location.href= "#campaigns"
        break;
      case 'Signals':
        currentScreen = Signals(null)
        signals = "choose btn btn-primary app-active"
        location.href= "#signals"
        break;
      case 'Settings':
        currentScreen = Settings(null)
        break;
    }

    return (
      React.DOM.div(null, 
      React.DOM.br(null), 
      React.DOM.br(null), 
      React.DOM.div({className: "container"}, 
        React.DOM.h1({style: {fontWeight:'bold',display:'inline',fontWeight:'100',color:'#1ca3fd'}}, 
          React.DOM.img({src: "build/img/network.png", 
            style: { height:32, marginTop:-4,
              marginRight:5, }}
          ), 
          React.DOM.span({style: {fontWeight:'bold',fontSize:32,fontFamily:'Proxima-Nova'}}, "Customero ")
        ), 
      React.DOM.span({style: {float:'right'}}, 
        React.DOM.img({src: "build/img/user.png", style: {height:'40px',width:'40px',padding:'2px',marginTop:'5px',borderRadius:'23px',display:'inline'}, className: "thumbnail"}), "   ",  
        React.DOM.h6({style: {marginTop:'20px',float:'right',display:'inline'}}, "Welcome")
      ), 
      React.DOM.span({style: {float:'right', marginRight:'150px'}}, 
        React.DOM.h6({style: {marginTop:'20px',float:'right',display:'inline',}}, React.DOM.a({href: "javascript:", onClick: this.logout, style: {color:'#1ca3fd'}}, "Logout")), 
        React.DOM.h6({style: {marginTop:'20px',float:'right',display:'inline',marginRight:'10px'}}, React.DOM.a({href: "#pricing", style: {color:'#1ca3fd'}}, "Pricing")), 
        React.DOM.h6({style: {marginTop:'20px',float:'right',display:'inline', marginRight:'10px'}}, 
          React.DOM.a({href: "http://resources.customerohq.com", style: {color:'#1ca3fd'}}, "Resources")
        ), 
          React.DOM.a({href: "javascript:", 
            style: {marginTop:15, float:'right',marginRight:10,
                    backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}, 
            className: "btn btn-primary btn-xs", 
            onClick: this.downloadSocialProspecter}, 
            React.DOM.i({className: "fa fa-download"}), "  " + ' ' +
            "Download Chrome Social Prospecter"
          )
      ), 
      React.DOM.br(null), 
      React.DOM.br(null), 
        React.DOM.div({className: "panel panel-default"}, 
        React.DOM.div({id: "navbar", className: "panel-heading"}, 

          React.DOM.div({className: "btn-group col-md-offset-4"}, 
            React.DOM.a({href: "javascript:", className: signals, style: {display:'block'}, onClick: this.toggleScreen}, 
                React.DOM.i({className: "fa fa-wifi"}), " Signals"
            ), 
            React.DOM.a({href: "javascript:", className: prospects, onClick: this.toggleScreen}, 
                React.DOM.i({className: "fa fa-user"}), " Prospects"
            ), 
            React.DOM.a({href: "javascript:", className: "choose btn btn-primary", style: {display:'none'}, onClick: this.toggleScreen}, 
                React.DOM.i({className: "fa fa-bar-chart-o"}), " Analytics"
            ), 
            React.DOM.a({href: "javascript:", className: "choose btn btn-primary", 
                  style: {width:162,display:'none'}, 
                  onClick: this.toggleScreen}, 
                React.DOM.i({className: "fa fa-tasks"}), " Mining Jobs  ", 
                React.DOM.span({className: "label label-default"}, "BETA")
            ), 
            React.DOM.a({href: "javascript:", className: companyProspects, onClick: this.toggleScreen}, 
                React.DOM.i({className: "fa fa-building"}), " Companies"
            ), 
            React.DOM.a({href: "javascript:", className: campaigns, style: {display:'block'}, onClick: this.toggleScreen}, 
                React.DOM.i({className: "fa fa-envelope"}), " Campaigns"
            )
          )
        ), 

          currentScreen

        )
      )
      )
    );
  },
  
  downloadSocialProspecter: function() {
    //chrome.webstore.install('https://chrome.google.com/webstore/detail/ofcalkjbogaiipekcocdefjenclioeci')
    //chrome.webstore.install()
    window.open('https://chrome.google.com/webstore/detail/customero-prospecter/ofcalkjbogaiipekcocdefjenclioeci')
  },

  /*
          <a href="#" className="btn btn-success" onClick={this.downloadFile}
                  style={{float:'right',marginTop:'6px'}}>
            <i className="fa fa-download" />&nbsp;&nbsp;
            <h5 style={{display:'inline'}} >Download CSV</h5>
          </a>
  */

  deleteProspect: function(objectId, endpoint) {
    var filtered = _.filter(this.state.prospects, function(item) {
       return item.objectId != objectId
    });
    this.setState({prospects: filtered})

    $.ajax({
      url:'https://api.parse.com/1/classes/'+endpoint+'/'+objectId,
      type:'DELETE',
      headers: parse_headers,
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
      }
    });
  }
});


var Workspace = Backbone.Router.extend({
  routes: {
    //landing_page
    ""            : "prospects",
    "get_started" : "landing_page",
    "free_trial"  : "free_trial",
    "signup"      : "signup",
    "login"       : "login",
    "pricing"     : "pricing",
    
    "signals"     : "signals",
    "prospects"   : "prospects",
    "companies"   : "companies",
    "campaigns"   : "campaigns",

    "prospects/p:page"       : "prospects",
    "prospects/list/:list"   : "prospects_list",

    "companies/p:page"       : "companies",
    "companies/list/:list"   : "companies_list",

    "signals/profile/:profile"  : "signals_profile",
    "signals/calendar/:profile" : "signals_calendar",

    "campaigns/followup_feed"      : "campaigns",
    "campaigns/sent_emails"         : "campaigns",
    "campaigns/template/:template" : "campaigns",
  },

  mainRoute: function(route) {
    console.log(route)
    currentUser = localStorage.getItem('currentUser')
    $('#content').html('')
    if (currentUser) 
      React.renderComponent(Home({selectedScreen: route}), 
                            document.getElementById('content'));
    else
      location.href = "#get_started"
  },

  signals  : function() { this.mainRoute('Signals') },
  prospects: function() { this.mainRoute('Prospects') },
  companies: function() { this.mainRoute('Companies') },
  campaigns: function() { this.mainRoute('Campaigns') },

  home: function() {
    currentUser = localStorage.getItem('currentUser')
    if (currentUser) 
      React.renderComponent(Home({selectedScreen: "Prospects"}), 
                            document.getElementById('content'));
    else
      location.href = "#get_started"
  },
  landing_page: function() {
    React.renderComponent(LandingPage(), document.getElementById('content'));
  },
  free_trial: function() {
    React.renderComponent(FreeTrial(), document.getElementById('content'));
  },

  signup: function() {
    React.renderComponent(SignUp(), document.getElementById('content'));
  },
  login: function() {
    React.renderComponent(Login(), document.getElementById('content'));
  },
  pricing: function() {
    React.renderComponent(Pricing(), document.getElementById('content'));
  }
});

$(document).ready(function(){
  checkAuth()
  var workspace = new Workspace;
  Backbone.history.start();
});

},{"../lib/mousetrap.min.min.js":56,"./analytics.js.min.js":1,"./company.js.min.js":5,"./company_prospects.js.min.js":6,"./data_table.js.min.js":18,"./email.js.min.js":21,"./free_trial.js.min.js":24,"./landing_page.js.min.js":25,"./landing_page_concept.js.min.js":26,"./login.js.min.js":28,"./mining_job.js.min.js":30,"./pricing.js.min.js":35,"./prospects.js.min.js":36,"./signals.js.min.js":46,"./signup.js.min.js":47}],3:[function(require,module,exports){
/** @jsx React.DOM */
var TemplatesMenu = require('./templates_menu.js.min.js');
var EditTemplateView = require('./edit_template.js.min.js');
var CreateTemplateView = require('./create_template.js.min.js');
var FollowupTimeline = require('./followup_timeline.js.min.js');

module.exports = React.createClass({displayName: 'exports',
  // Campaign Detail
  getInitialState: function() {
    return {
      selectedTemplate: 0,
      templateDetailMode: false,
      editMode: false,
      followupDay: 0,
      templates:[],
      currentTemplate:'',
      prospectListCount:'~',
      prospects:[],
    }
  },

  componentDidMount: function() {
     thissss = this;
     company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
     qry = 'where={"company":'+company+'}'
    $.ajax({
      url:'https://api.parse.com/1/classes/Template',
      headers: appConfig.headers,
      data: qry,
      success: function(res) { thissss.setState({templates: res.results}) },
      error: function(err) { console.log('error') }
    });

    currentList = JSON.stringify({
      '__type'    : 'Pointer', 
      'className' : 'ProspectList',
      'objectId'  : this.props.selectedCampaign.prospect_list.objectId, 
    })
    qry = 'where={"lists":'+currentList+'}&limit=1000&count=1'
    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospect',
      headers: appConfig.headers,
      data: qry,
      success: function (res) {
        thissss.setState({
          prospects: res.results,
          prospectListCount: res.count 
        })
      },
      error: function(err) { }
    })
  },

  returnToOverview: function() {
    this.props.toggleScreen('Campaigns')
  },

  render: function() {
    //console.log('campaign detail')
    thiss = this;
    return (
      React.DOM.div({className: "container", 
           style: {width:'100%',height:'100%',paddingLeft:0,paddingRight:0}}, 
        React.DOM.div({style: {marginBottom:30}, id: "campaign-top-detail"}, 
        React.DOM.h5({style: {marginTop:20,marginLeft:20}}, 
          React.DOM.a({href: "javascript:", onClick: this.returnToOverview}, "Campaigns "), 
          React.DOM.small(null, 
            React.DOM.i({style: {marginLeft:10, marginRight:10}, 
               className: "fa fa-chevron-right"})
          ), 
          this.props.selectedCampaign.name
        ), 
        React.DOM.h6({style: {marginLeft:20,display:'inline-block',marginRight:15}}, 
          React.DOM.span({className: "text-muted"}, "Prospect List:"), "  ", 
          (this.props.selectedCampaign.prospect_list.signal_list) ? React.DOM.span(null, React.DOM.i({className: "fa fa-wifi"}), " ") : "", 
          this.props.selectedCampaign.prospect_list.name
        ), 
        React.DOM.span({className: "badge"}, this.state.prospectListCount), 

        React.DOM.h6({style: {marginLeft:20,display:'inline-block',marginRight:15}}, 
          "Batches :"
        ), 
        React.DOM.span({className: "badge"}, "2"), 
        React.DOM.a({href: "javascript:", 
           style: {float: 'right', marginTop: -35, marginRight: 30, display:'none'}, 
           className: "btn btn-success btn-sm"}, 
          React.DOM.i({className: "fa fa-envelope"}), " Send!"
        )
        ), 
          React.DOM.div({className: "col-md-8 panel panel-default", 
               style: {height:'443px',paddingLeft:305,paddingTop:50,overflow:'auto',borderRight:0,borderRadius:0}}, 
               FollowupTimeline({
                  templates: this.state.templates, 
                  prospects: this.state.prospects, 
                  currentCampaign: this.props.selectedCampaign, 
                  toggleTemplateEditMenu: this.toggleTemplateEditMenu, 
                  initialFollowups: this.props.selectedCampaign.followups})
          ), 
          React.DOM.div({className: "col-md-4", 
               style: {paddingLeft:0,paddingRight:0,height:443}}, 
            TemplatesMenu({
              templates: this.state.templates, 
              toggleTemplateEditMenu: this.toggleTemplateEditMenu})
          ), 

          (this.state.templateDetailMode) ? EditTemplateView({
            editMode: this.state.editMode, 
            initialTemplateValues: this.state.currentTemplate, 
            saveTemplate: this.saveTemplate, 
            prospect: this.state.prospects[0], 
            toggleTemplateEditMenu: this.toggleTemplateEditMenu, 
            followupDay: this.state.followupDay}) : ""
      )
    );
  },

  saveTemplate: function(template, newTemplate) {
    templates = this.state.templates
    for(i=0;i< this.state.templates.length; i++)
      if(this.state.templates[i].name == template.name)
        break
    
    console.log(template)
    if(newTemplate){
      template.subject = template.subject
      template.name = template.name
      template.body = template.body
      templates.push(template)

      $.ajax({
        url:'https://api.parse.com/1/classes/Template',
        headers:appConfig.headers,
        type:'POST',
        data:JSON.stringify({
          name : template.name,
          subject: template.subject,
          body: template.body,
          user:{
            __type: 'Pointer',
            className:'_User',
            objectId:JSON.parse(localStorage.currentUser).objectId,
          },
          company:JSON.parse(localStorage.currentUser).company,
        }),
        success: function(res) {
          console.log(res)
        },
        error: function() {
        }
      })
    } else {
      templates[i].subject = template.subject
      templates[i].body = template.body

      $.ajax({
        url:'https://api.parse.com/1/classes/Template/'+templates[i].objectId,
        type:'PUT',
        headers:appConfig.headers,
        data:JSON.stringify({
          name : template.name,
          subject: template.subject,
          body: template.body,
        }),
        success: function(res) {
          console.log(res)
        },
        error: function() {
        }
      })
    }

    this.setState({templates: templates })

  },

  toggleTemplateEditMenu: function(currentTemplate, editMode) {
    editMode = (editMode) ? true : false
    this.setState({
      currentTemplate: currentTemplate,
      templateDetailMode: !this.state.templateDetailMode,
    })
  }
});

},{"./create_template.js.min.js":16,"./edit_template.js.min.js":20,"./followup_timeline.js.min.js":23,"./templates_menu.js.min.js":50}],4:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Campaigns
  getInitialState: function() {
    return {
      selectedScreen: 'Overview',
    }
  },

  changeSelectedCampaign: function(campaign) {
    //this.props.toggleScreen('CampaignDetail')
    this.props.changeSelectedCampaign('CampaignDetail', campaign)
  },

  render: function() {
    campaigns = []
    console.log(this.props)
    for(i=0;i< this.props.campaigns.length; i++){ 
      campaigns.push(CampaignRow({
                        toggleScreen: this.toggleScreen, 
                        changeSelectedCampaign: this.changeSelectedCampaign, 
                        campaign: this.props.campaigns[i]}) )
    }
    return (
      React.DOM.div({style: {overflow:'auto',height:550}}, 
        React.DOM.table({className: "table table-striped"}, 
          React.DOM.thead(null, 
            React.DOM.th(null), 
            React.DOM.th(null, "Campaign Name"), 
            React.DOM.th(null, "Prospect List"), 
            React.DOM.th({style: {textAlign:'center'}}, "Delivered"), 
            React.DOM.th({style: {textAlign:'center'}}, "Opened"), 
            React.DOM.th({style: {textAlign:'center',display:'none'}}, "Replied"), 
            React.DOM.th({style: {textAlign:'center',display:'none'}}, "Link Clicks"), 
            React.DOM.th({style: {textAlign:'center'}}, "Bounces"), 
            React.DOM.th({style: {width:150,textAlign:'center'}}, " ")
          ), 
          React.DOM.tbody(null, 
            campaigns
          )
        )
      )
    );
  }
});

var CampaignRow = React.createClass({displayName: 'CampaignRow',
  toggleScreen: function() {
    //this.props.toggleScreen()
    this.props.changeSelectedCampaign(this.props.campaign)
  },

  render: function() {
    prospect_list = (this.props.campaign.prospect_list) ? this.props.campaign.prospect_list : {list_type:"", name:""}
    if(prospect_list.list_type == "signal_list")
        iconType = React.DOM.i({className: "fa fa-wifi", style: {marginRight:5}})
    else if(prospect_list.list_type == "mining_job")
        iconType = React.DOM.i({className: "fa fa-cloud-download", style: {marginRight:5}})
    else 
        iconType =""
    return (
      React.DOM.tr({style: {cursor:'pointer'}, onClick: this.toggleScreen}, 
        React.DOM.td(null), 
        React.DOM.td(null, " ", React.DOM.h6(null, 
            this.props.campaign.name
        ), " "), 
        React.DOM.td(null, " ", React.DOM.h6(null, 
            iconType, 
            prospect_list.name
        ), " "), 
        React.DOM.td({style: {textAlign:'center',padding:12}}, 
          React.DOM.span({className: "badge", style: {backgroundColor:'#f0ad4e'}}, 
            React.DOM.i({className: "fa fa-paper-plane"}), "  " + ' ' +
            "100%"
          )
        ), 
        React.DOM.td({style: {textAlign:'center',padding:12}}, 
          React.DOM.span({className: "label label-success"}, 
            React.DOM.i({className: "fa fa-eye"}), "  " + ' ' +
            "100%")
        ), 
        React.DOM.td({style: {textAlign:'center',padding:12,display:'none'}}, 
          React.DOM.span({className: "label label-primary"}, 
            React.DOM.i({className: "fa fa-mail-reply"}), "  " + ' ' +
            "100%")
        ), 
        React.DOM.td({style: {textAlign:'center',padding:12,display:'none'}}, 
          React.DOM.span({className: "label label-info"}, 
            React.DOM.i({className: "fa fa-external-link-square"}), "  " + ' ' +
            "18%")
        ), 
        React.DOM.td({style: {textAlign:'center',padding:12}}, 
          React.DOM.span({className: "label label-default"}, 
            React.DOM.i({className: "fa fa-exclamation-circle"}), "  " + ' ' +
            "11%")
        ), 
        React.DOM.td({style: {textAlign:'center',paddingTop:12}}, 
          React.DOM.a({href: "javascript:", className: "btn btn-primary btn-xs", 
            style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%) !important;',display:'none'}}, 
            React.DOM.i({className: "fa fa-copy", style: {fontWeight:'bold'}}), "  Clone"), 
          React.DOM.a({href: "javascript:", className: "btn-default", 
            style: {marginLeft:5}}, " ", React.DOM.i({className: "fa fa-trash-o"}))
        ), 
        React.DOM.td({style: {textAlign:'center',padding:12,display:'none'}}, 
          React.DOM.h4({style: {margin:0}}, 
            React.DOM.span({className: "label label-success"}, "Ready")
          )
        )
      )
    )
  }
});

},{}],5:[function(require,module,exports){
/** @jsx React.DOM */
// 

module.exports = React.createClass({displayName: 'exports',
  //CompanyProspect
  render: function () {
    prospect = this.props.prospect
    website = (prospect.website) ? React.DOM.a({href: 'http://'+prospect.website}, React.DOM.i({className: "fa fa-globe"})) : ''
    linkedin_profile = (prospect.profile != "") ? React.DOM.a({href: prospect.profile}, React.DOM.i({className: "fa fa-linkedin-square"})) : ''

  /*
            <a href="javascript:" className="btn btn-success btn-xs"
              style={{background: 'linear-gradient(#34c520,#219211)'}}> 
              <i className="fa fa-search" /> &nbsp;
              Find Prospects
            </a>
  */

  console.log

  //<td><a href="javascript:" onClick={this.deleteProspect}><i className="fa fa-times-circle" /></a></td>
    return (
        React.DOM.tr(null, 
          React.DOM.td({style: {width:'300px'}}, 
            React.DOM.span({style: {fontWeight:'bold'}}, prospect.name), 
            React.DOM.h6({style: {fontWeight:'400',margin:'0px'}}, prospect.headcount)
          ), 
          React.DOM.td(null, 
            React.DOM.h6({style: {margin:'0px'}}, moment(prospect.createdAt,'YYYY-MM-DDTh:mm:ss').fromNow())), 
          React.DOM.td(null, 
            React.DOM.h6({style: {margin:'0px'}}, prospect.industry)
          ), 
          React.DOM.td({style: {textAlign:'center',width:137,display:'none'}}, 
            React.DOM.span({className: "label label-primary", style: {display: 'block', width: 'auto', marginRight: 'auto', marginLeft: 'auto', width: '25px'}}, "0")
          ), 
          React.DOM.td({style: {display:'none'}}, 
            React.DOM.span({className: "label label-info"}, "Hiring")), 
          React.DOM.td({style: {width:320}}, 
            "   ", 
            React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", 
              onClick: this.openLinkedinCompanyProfile, 
              style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
              React.DOM.i({className: "fa fa-search"}), "  " + ' ' +
              "Search Profiles"
            ), 
            "   ", 
            React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", 
              onClick: this.openSimilarCompanies, 
              style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
              React.DOM.i({className: "fa fa-copy"}), "  " + ' ' +
              "Find Similar Companies"
            )
          ), 
          React.DOM.td(null, " ", linkedin_profile, "   ", website, " ")
        )
    );
  },

  openLinkedinCompanyProfile: function(e) {
    e.preventDefault()
    cid = this.props.prospect.profile.split('?')[0].split('/company/')[1]
    window.open("https://www.linkedin.com/vsearch/p?f_CC="+cid)
    e.stopPropagation()
  },

  openSimilarCompanies: function(e) {
    cid = this.props.prospect.profile.split('?')[0].split('/company/')[1]
    window.open("https://www.linkedin.com/vsearch/c?rsid=526440371409184768175&pivotType=sim&pid="+cid+"&trk=sim_companies_res_sim&trkInfo=VSRPsearchId%3A526440371409184768175%2CVSRPtargetId%3A1025%2CVSRPcmpt%3Aprimary")
  },

  deleteProspect: function() {
    this.props.deleteProspect(this.props.prospect.objectId, 'CompanyProspect')
  }
});

},{}],6:[function(require,module,exports){
/** @jsx React.DOM */

var CompanyProspect = require('./company.js.min.js');
var LoadingSpinner = require('./loading_spinner.js.min.js')
var SideMenuProspects = require('./side_menu_user_prospects.js.min.js');

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {  prospects   : [],
              currentPage : 1,
              loading     : true,
              pages       : 1,
              count       : "~", }
  },
  /*
   *
    cid = this.props.prospect.profile.split('?')[0].split('/company/')[1]
    console.log(this.props)
    window.open("https://www.linkedin.com/vsearch/p?f_CC="+cid)
  */
  
  render: function() {
    console.log('company')
    prospects = []
    for(i=0;i<this.state.prospects.length;i++) {
      url = this.state.prospects[i].url

      if(url != "no linkedin website" && typeof(url) != "undefined" && url != ""){
        url = url.replace('http://','')
        the_link = React.DOM.a({href: 'http://'+url}, React.DOM.i({className: "fa fa-globe"}))
      } else {
        the_link = ""
      }

      profile = this.state.prospects[i].profile
      //profile = profile.replace('http://','')
      li = React.DOM.a({href: 'http://'+profile}, React.DOM.i({className: "fa fa-linkedin-square"}))

      if(this.props.prospectType == 'Prospect') {
        prospects.push(
          UserProspect({deleteProspect: this.deleteProspect, 
                        prospect: this.state.prospects[i], 
                        key: this.generate_id(), 
                        link: the_link, li: li})
        )
      } else {
        prospects.push(
          CompanyProspect({deleteProspect: this.deleteProspect, 
                           key: this.generate_id(), 
                           prospect: this.state.prospects[i]})
        )
      }
    }

    previous = (this.state.currentPage - 1) ? '' : 'disabled'
    forward = (this.state.currentPage == this.state.pages) ? 'disabled' : ''

    lowerLimit = (this.state.currentPage-1)*100
    upperLimit = this.state.currentPage*100

    lowerLimit = (lowerLimit) ? lowerLimit : 1
    upperLimit = (upperLimit > this.state.count) ? this.state.count : upperLimit
  
    console.log(prospects.length)
    companyStyle= (prospects.length) ? {padding:'0'} : {display:'none'}

    return (
      React.DOM.div(null, 
      React.DOM.div({className: "container bg-radius", style: {width:'100%',padding:'0'}}, 
        (prospects.length == 0 && this.state.loading == false) ? EmptyCompanyProspectsPanel(null) : "", 
        (this.state.loading) ? LoadingSpinner(null) : "", 
        React.DOM.div({className: "col-md-12", style: companyStyle}, 
          React.DOM.div({id: "autoscroll", style: {height:'400px',overflow:'auto'}}, 
            React.DOM.table({className: "table table-striped"}, 
              React.DOM.thead({style: {backgroundColor:'white'}}, 
                CompanyProspectHeader(null)
              ), 
              React.DOM.tbody(null, 
                prospects
              )
            )
          )
        )
      ), 
        React.DOM.div({className: "panel-footing", id: "navbar", style: {height:'35px',padding:'0px',paddingTop:'7px'}}, 
          React.DOM.span({style: {float:'right',marginRight:'20px'}}, 
          React.DOM.a({href: "javascript:", style: {marginRight:'5px'}, onClick: this.paginatePrevious, className: "blue-gradient btn btn-primary btn-xs " + previous}, React.DOM.i({className: "fa fa-fast-backward"})), 
          React.DOM.a({href: "javascript:", onClick: this.paginatePrevious, className: "blue-gradient btn btn-primary btn-xs " + previous}, React.DOM.i({className: "fa fa-chevron-left"})), 
          "   ", 
          React.DOM.span({className: ""}, lowerLimit + ' - '+upperLimit+' of '+this.state.count), 
          "   ", 
          React.DOM.a({href: "javascript:", onClick: this.paginateForward, className: "blue-gradient btn btn-primary btn-xs " + forward}, React.DOM.i({className: "fa fa-chevron-right"})), 
          React.DOM.a({href: "javascript:", style: {marginLeft:'5px'}, onClick: this.paginateForward, className: "blue-gradient btn btn-primary btn-xs " + forward}, React.DOM.i({className: "fa fa-fast-forward"}))
          )
        )
      )
    );
  },

  componentDidMount: function() {
    thisss = this;
    parse_headers = {'X-Parse-Application-Id':'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 'X-Parse-REST-API-Key':'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb'}
    company = JSON.stringify(JSON.parse(localStorage.currentUser).company)

    $.ajax({
      url: 'https://api.parse.com/1/classes/CompanyProspect',
      type:'GET',
      headers: parse_headers,
      async: true,
      data: 'where={"company":'+company+'}&count=1&order=-createdAt',
      success: function(res){
        thisss.setState({prospects: res.results})
        thisss.setState({count: res.count})
        thisss.setState({pages: Math.ceil(res.count/100)})
        thisss.setState({loading: false})
      },
      error: function(res){
        console.log('error')
        console.log(res)
      }
    });
  },

  generate_id : function () {
    return '_' + Math.random().toString(36).substr(2, 9);
  },
});

var SideMenuCompanyProspects = React.createClass({displayName: 'SideMenuCompanyProspects',
  render: function() {
        
    return (
      React.DOM.div({className: "col-md-2", style: {padding:'0',height:'400px',backgroundColor:'#e0e9ee',borderRight:'1px solid #b0b8bf',textAlign:'center'}}, 
        React.DOM.div({className: "prospect-list-header"}, 
          "Lists"
        ), 
        React.DOM.div({className: "btn-group-vertical", style: {width:'100%'}}, 
          React.DOM.button({type: "button", className: "list-names btn btn-default"}, "Templates"), 
          React.DOM.button({type: "button", className: "list-names btn btn-default"}, "Schedules"), 
          React.DOM.button({type: "button", className: "list-names btn btn-default"}, "Rules")
        ), 
        React.DOM.br(null), 
        React.DOM.br(null), 
        React.DOM.a({href: "javascript:", className: "btn btn-primary", 
              style: { backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
          React.DOM.i({className: "fa fa-plus-circle"}), " New Class"
        ), 
        React.DOM.br(null)
      )
    );
  },

  paginatePrevious: function() {
    console.log('previous')
    console.log((this.state.currentPage - 1)*100)
    thiss = this;
    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospect?skip='+(thiss.state.currentPage-2)*100,
      type:'GET',
      headers: parse_headers,
      data: 'where={"company":'+company+'}&count=1',
      success: function(res){
        thiss.setState({prospects: res.results})
        thiss.setState({currentPage: thiss.state.currentPage - 1})
      },
      error: function(res){
        console.log(res)
      }
    });
  },

  paginateForward: function() {
    console.log('forward')

    thiss = this;
    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospect?skip='+thiss.state.currentPage*100,
      type:'GET',
      headers: parse_headers,
      data: 'where={"company":'+company+'}&count=1',
      success: function(res){
        thiss.setState({prospects: res.results})
        thiss.setState({currentPage: thiss.state.currentPage + 1})
      },
      error: function(res){
        console.log(res)
      }
    });
  },
});

var EmptyCompanyProspectsPanel = React.createClass({displayName: 'EmptyCompanyProspectsPanel',
  openLinkedinWindow: function() {
    window.open('https://www.linkedin.com/vsearch/c?type=companies')
  },

  render: function() {
    return (
      React.DOM.div({className: "col-md-offset-3 col-md-6", style: {height:400}}, 
      React.DOM.div({className: "panel panel-default", style: {marginTop:100,height:200}}, 
        React.DOM.div({className: "panel-body"}, 
          React.DOM.h1({className: "lead", style: {textAlign:'center'}}, "Start Prospecting On Linkedin"), 
          React.DOM.a({href: "javascript:", onClick: this.openLinkedinWindow, className: "btn btn-success", style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%) !important',display:'block',marginRight:'auto',marginLeft:'auto',width:200, marginTop:50}}, 
            React.DOM.i({className: "fa fa-search"}), "  " + ' ' +
            "Search for companies!")
        )
      )
    )
    );
  }
});

var CompanyProspectHeader = React.createClass({displayName: 'CompanyProspectHeader',
  render: function() {
    return (
      React.DOM.tr(null, 
        React.DOM.th(null, "Name"), 
        React.DOM.th(null, "Added On"), 
        React.DOM.th(null, "Industry"), 
        React.DOM.th(null, "# of Prospects"), 
        React.DOM.th(null, "Signals"), 
        React.DOM.th(null, " "), 
        React.DOM.th(null, " ")
      )
    );
  }
});

},{"./company.js.min.js":5,"./loading_spinner.js.min.js":27,"./side_menu_user_prospects.js.min.js":41}],7:[function(require,module,exports){
/** @jsx React.DOM */


module.exports = React.createClass({displayName: 'exports',
  // SignalCard
  render: function() {
    company = this.props.company
    return (
      React.DOM.div({className: "panel panel-default signal-card"}, 
        React.DOM.div({className: "panel-body", style: {paddingLeft:25, paddingRight:25}}, 
          React.DOM.h4({style: {display:'inline-block',width:'100%'}}, 
            React.DOM.span({style: { float:'left',maxWidth: '60%', whiteSpace: 'nowrap',
                overflow: 'hidden', textOverflow: 'ellipsis'}}, 
              company.name), 
            React.DOM.span({className: "label label-success", 
              style: {marginLeft:7, float:'right',fontSize:12,
                maxWidth: '40%', whiteSpace: 'nowrap',
                overflow: 'hidden', textOverflow: 'ellipsis'}}, 
              React.DOM.i({className: "fa fa-suitcase"}), "  ", 
              (company.signals) ? company.signals[0].job_title : ""
            )
          ), 
          React.DOM.a({href: "javascript:", className: "btn btn-success", 
            style: {float:'right',marginTop:15, fontWeight:'bold'}}, 
            "Prospect This Company"), 
          React.DOM.p({style: {fontSize:12,width:'75%'}}, 
            React.DOM.span(null, 
            (company.signals) ? company.signals[0].summary : ""
            )
          ), 
          React.DOM.h6(null, " ", React.DOM.i({className: "fa fa-map-marker"}), 
             " ", (company.signals) ? company.signals[0].location : ""
            )
        )
      )
    );
  }
});

},{}],8:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createListModal
  createList: function() {
    console.log($('#listTitle').val())

    data =  {
      'name'        : $('#listTitle').val().trim(),   //Waiting , Running
      'user'        : { '__type':'Pointer',
                      'className':'_User',
                      'objectId':'xWESiw5Smd' },
    }

    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectList',
      type:'POST',
      headers: appConfig.parseHeaders,
      data: JSON.stringify(data),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });

    data.count = 0

    this.props.createList(data)
    
    $('#createListModal').modal('hide')
    $('body').removeClass('modal-open');
    $('.modal-backdrop').remove();
    //$('button.close').click()
  },

  createCampaign: function(e) {
    e.preventDefault()
    //console.log($('#newListName').val())
    newCampaignName = $('#newCampaignName').val()
    prospectListName = $('#prospect_lists').val()
    thiss = this
    for(i=0;i< this.props.prospectLists.length; i++){
      if(this.props.prospectLists[i].name == prospectListName){
        prospect_list = this.props.prospectLists[i]; 
        break;
      }
    }
    if(newCampaignName.trim() != "")
      this.props.createCampaign({
        name: newCampaignName,
        prospect_list: prospect_list
      })
    // Disable Modal
    $('.modal-backdrop').click()
    $('.fade').click()
    $('#newCampaignName').val('')
  },

  render: function() {
    prospect_lists = []
    for(i=0;i< this.props.prospectLists.length; i++) {
      prospect_lists.push( React.DOM.option(null, this.props.prospectLists[i].name))
    }

    return (
      React.DOM.div({className: "modal fade bs-createCampaign-modal-sm", 
           tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 
           'aria-hidden': "true", id: "createListModal", style: {top:'200px'}}, 
            React.DOM.div({className: "modal-dialog modal-sm"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-envelope"}), "  Create Campaign")
                ), 

                React.DOM.div({className: "modal-body"}, 
                  React.DOM.form({onSubmit: this.createCampaign}, 
                    React.DOM.input({id: "newCampaignName", 
                           type: "text", 
                           placeholder: "Enter Campaign Name...", 
                           className: "form-control"}), 

                    React.DOM.select({className: "form-control", 
                            id: "prospect_lists", 
                            style: {marginTop:20,marginBottom:20}}, 
                      prospect_lists
                    ), 

                    React.DOM.a({href: "javascript:", 
                      onClick: this.createCampaign, 
                      className: "btn btn-success", 
                      style: {display:'block', width:'100%'}}, 
                      "Create Campaign"
                    )
                  )
                )
              )
            )
          )
    );
  }
});


},{}],9:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createCompanyProfileModal
  render: function() {
    return (
      React.DOM.div({className: "modal fade bs-createSignal-modal-md", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", 
           id: "createCompanyProfileModal", 
           style: {top:'50px',overflow:'hidden'}}, 
            React.DOM.div({className: "modal-dialog modal-sm", style: {width:650}}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    "Create Company Profile"
                  ), 
                  React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                     onClick: this.createCompanyProfile, 
                     style: {float:'right',marginTop:-28,marginRight:-5}}, 
                    "Create Profile"
                  )
                ), 
                React.DOM.div({className: "modal-body"}, 
                  CreateHiringSignal(null)
                ), 
              React.DOM.div({className: "modal-footer", style: {display:'none'}}, 
                React.DOM.button({type: "button", className: "btn btn-default"}, 
                  "Close"
                ), 
                React.DOM.button({type: "button", className: "btn btn-primary"}, 
                  "Send Email"
                )
              )
              )
            )
          )
    );
  },

  createCompanyProfile: function() {
    profileName = $(".company-profile-name").val()
    industryProfile = {
      'className': 'IndustryProfile',
      'industries' : $('.company-profile-industries').tagsinput('items').reverse()
    }

    locationProfile = {
      'className': 'LocationProfile',
      'locale'    : $('.company-profile-location').tagsinput('items').reverse()
    }

    employeeProfile = {
      'className':'EmployeeProfile', 
      'employees': _.map($('#company-profile-employeeBtns').find('.active'), 
                        function(revBtn){ return $(revBtn).text().trim() }).reverse()
    }

    revenueProfile = {
      'className':'RevenueProfile', 
      'revenues': _.map($('#company-profile-companyRevenueBtns').find('.active'), 
                        function(revBtn){ return $(revBtn).text().trim() }).reverse()
    }

    console.log(locationProfile)
    
    profiles = [industryProfile, locationProfile,
                employeeProfile, revenueProfile]

    nonemptyProfiles = _.filter(profiles, function(profile) {
      if(_.values(profile)[1]){ return _.values(profile)[1].length }
    });

    newProfile = {
      name: profileName,
      profiles: nonemptyProfiles,
      mining_job:true,
      user:{
        __type:'Pointer',
        className:'_User',
        objectId:JSON.parse(localStorage.currentUser).objectId
      },
      company: JSON.parse(localStorage.currentUser).company
    }

    if(nonemptyProfiles.length) {
      this.persistSignal(nonemptyProfiles, 
                         _.omit(newProfile,'profiles'))
      this.props.addProfile(newProfile)
      $('.modal').click()
    }
  },

  persistSignal: function(nonemptyProfiles, newProfile) {
    console.log('NEW PROFILE')
    console.log(newProfile)
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectProfile',
      headers:appConfig.headers,
      type:'POST',
      data:JSON.stringify(newProfile),
      success:function(ress) {
        // Add Signal List
        _.map(nonemptyProfiles, function(profile) {
          $.ajax({
            url:'https://api.parse.com/1/classes/'+_.values(profile)[0],
            headers:appConfig.headers,
            type:'POST',
            data:JSON.stringify( _.pick(profile, _.keys(profile)[1]) ),
            success:function(res) {
              $.ajax({
                url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
                type:'PUT',
                headers:appConfig.headers,
                data:JSON.stringify({profiles:{
                  __op: 'AddUnique',
                  objects:[{
                    __type:'Pointer',
                    className: _.values(profile)[0],
                    objectId:res.objectId
                  }]}
                }),
              })
            },
          })
        });

      },
    })
  },

});

var CreateHiringSignal = React.createClass({displayName: 'CreateHiringSignal',
  componentDidMount: function() {
    _.map($('.hiring-role'),function(input){$(input).tagsinput()})
    $(this.getDOMNode()).find('.hiring-role').tagsinput()
    $('.bootstrap-tagsinput').width(400)

    $(this.getDOMNode()).find('.btn-default').click(function(e) {

      if($(e.target).parent('label').hasClass('active'))
        $(e.target).parent('label').removeClass('active')
      else
        $(e.target).parent('label').addClass('active')

      console.log($(e.target).parent('label'))
    });
  },

  render: function(){
    return (
      React.DOM.div(null, 
        React.DOM.form({className: "createSignal", onSubmit: this.createSignal}, 
          React.DOM.span(null, 
            React.DOM.h6({style: {width:140,display:'inline-block',marginBottom:20}}, 
              "Company Profile Name:  "), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%'}, 
                   className: "form-control company-profile-name", 
                   placeholder: "Company Profile Name ..."})
          ), 
          React.DOM.br(null), 
          React.DOM.span({style: {display:'block',marginBottom:-10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, 
              "Industries:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control hiring-role company-profile-industries"}), 

                React.DOM.a({href: "javascript:", 
                   className: "btn btn-xs btn-success", style: {display:'none'}}, 
                  React.DOM.i({className: "fa fa-plus"})
                )
          ), 
          React.DOM.br(null), 
          React.DOM.span({style: {display:'block',marginBottom:-10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, 
              "Location:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control hiring-role company-profile-location"}), 

            React.DOM.a({href: "javascript:", 
               className: "btn btn-xs btn-success", style: {display:'none'}}, 
              React.DOM.i({className: "fa fa-plus"})
            )
          ), 
        React.DOM.div(null, 
            React.DOM.br(null), 
            React.DOM.h6({style: {display:'inline-block',margin:0,
                        width:140,marginBottom:20}}, "Company Size "), 
              React.DOM.div({className: "btn-group", 'data-toggle': "buttons", 
                style: {width:'73.5%'}, 
                id: "company-profile-employeeBtns"}, 
                React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                  React.DOM.input({type: "checkbox"}), " 1 - 50"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                  React.DOM.input({type: "checkbox"}), " 50 - 250"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                  React.DOM.input({type: "checkbox"}), " 250 - 1000"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                  React.DOM.input({type: "checkbox"}), " 1000 +"
                )
              ), 

              React.DOM.br(null), " ", React.DOM.h6({style: {display:'none',margin:0,width:140}}, 
                "Approx. Revenue  "), 
              React.DOM.div({className: "btn-group", 'data-toggle': "buttons", 
                style: {display:'none'}, 
                id: "company-profile-companyRevenueBtns"}, 
                React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                  React.DOM.input({type: "checkbox"}), " ", '< $1M'
                ), 
                React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                  React.DOM.input({type: "checkbox"}), " $1M - $5M"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                  React.DOM.input({type: "checkbox"}), " $5M - $25M"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                  React.DOM.input({type: "checkbox"}), " $25M +"
                )
              )
        ), 

          React.DOM.div({style: {marginTop:10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, "Auto Prospect:  "), 
            React.DOM.div({className: "btn-group autoprospect", 'data-toggle': "buttons"}, 
              React.DOM.label({className: "btn btn-sm btn-default active"}, 
                React.DOM.input({type: "radio"}), " Yes"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "radio"}), " No"
              )
            )
          )
        )
      )
    )
  },
});

},{}],10:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createCompanyProfileModal
  createProfile: function(e) {
    e.preventDefault()
    profileName = $('.funding-profile-name').val()
    
    //Stage
    //Amount Raised
    //Company Size
    //Approx Revenue

    amountRaisedProfile = {
      'className':'FundingProfile', 
      'revenues': _.map($('#amountRaisedBtns').find('.active'), 
                        function(revBtn){ return $(revBtn).text().trim() }).reverse()
    }

    console.log(amountRaisedProfile)
    profiles = [amountRaisedProfile]

    nonemptyProfiles = _.filter(profiles, function(profile) {
      if(_.values(profile)[1]){ return _.values(profile)[1].length }
    });

    newProfile = {
      name: profileName,
      profiles: nonemptyProfiles,
      user:{
        __type:'Pointer',
        className:'_User',
        objectId:JSON.parse(localStorage.currentUser).objectId
      },
      company: JSON.parse(localStorage.currentUser).company
    }

    if(nonemptyProfiles.length) {
      this.persistSignal(nonemptyProfiles.reverse(), 
                         _.omit(newProfile,'profiles'))

      this.props.addProfile(newProfile)
      $('.modal').click()
    }
  },

  persistSignal: function(nonemptyProfiles, newProfile) {
    console.log('NEW PROFILE')
    console.log(newProfile)
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectProfile',
      headers:appConfig.headers,
      type:'POST',
      data:JSON.stringify(newProfile),
      success:function(ress) {
        // Add Signal List
        _.map(nonemptyProfiles, function(profile) {
          $.ajax({
            url:'https://api.parse.com/1/classes/'+_.values(profile)[0],
            headers:appConfig.headers,
            type:'POST',
            data:JSON.stringify( _.pick(profile, _.keys(profile)[1]) ),
            success:function(res) {
              $.ajax({
                url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
                type:'PUT',
                headers:appConfig.headers,
                data:JSON.stringify({profiles:{
                  __op: 'AddUnique',
                  objects:[{
                    __type:'Pointer',
                    className: _.values(profile)[0],
                    objectId:res.objectId
                  }]}
                }),
              })
            },
          })
        });

      },
    })
  },

  render: function() {
    return (
      React.DOM.div({className: "modal fade ", tabIndex: "-1", role: "dialog", 
           'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", 
           id: "createFundingSignalModal", 
           style: {top:'50px',overflow:'hidden'}}, 
            React.DOM.div({className: "modal-dialog modal-sm", style: {width:650}}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    "Create Funding Signal"
                  ), 
                  React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                     onClick: this.createProfile, 
                     style: {float:'right',marginTop:-28,marginRight:-5}}, 
                    "Create Profile"
                  )
                ), 
                React.DOM.div({className: "modal-body"}, 

                  React.DOM.div(null, 
                    React.DOM.form({className: "createSignal", onSubmit: this.createProfile}, 
                      React.DOM.span(null, 
                        React.DOM.h6({style: {width:140,display:'inline-block',
                                    marginBottom:20}}, 
                          "Funding Profile Name:  "), 
                        React.DOM.input({type: "text", 
                               style: {display:'inline-block',width:'73.1%'}, 
                               className: "form-control funding-profile-name", 
                               placeholder: "Funding Profile Name ..."})
                      ), 
                      CompanyProfile(null), 

                      React.DOM.div({style: {marginTop:10,display:'none'}}, 
                        React.DOM.h6({style: {width:140,display:'inline-block'}}, 
                          "Auto Prospect:  "), 
                        React.DOM.div({className: "btn-group autoprospect", 
                              'data-toggle': "buttons"}, 
                          React.DOM.label({className: "btn btn-sm btn-default active"}, 
                            React.DOM.input({type: "radio"}), " Yes"
                          ), 
                          React.DOM.label({className: "btn btn-sm btn-default"}, 
                            React.DOM.input({type: "radio"}), " No"
                          )
                        )
                      )
                    )
                  )

                )
              )
            )
          )
    );
  },

  createFundingProfile: function() {
  },

  componentDidMount: function() {
    _.map($('.hiring-role'),function(input){$(input).tagsinput()})
    $(this.getDOMNode()).find('.hiring-role').tagsinput()
    $('.bootstrap-tagsinput').width('59.1%')
  },

});

var CompanyProfile = React.createClass({displayName: 'CompanyProfile',
  companyFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $(this.getDOMNode()).find('.btn-default').click(function(e) {
      label = $(e.target).parent('label')
      if(label.hasClass('active'))
        label.removeClass('active')
      else
        label.addClass('active')
    });
  },

  render: function() {
    return (
      React.DOM.div(null, 
          React.DOM.h6({style: {display:'none',margin:0,
                      width:140,marginBottom:20}}, "Stage "), 
          React.DOM.div({className: "btn-group", 'data-toggle': "buttons", id: "employeeBtns", 
              style: {display:'none'}}, 
              React.DOM.label({className: "btn btn-sm btn-default", style: {width:'20%'}}, 
                React.DOM.input({type: "checkbox"}), " Seed"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default ", style: {width:'20%'}}, 
                React.DOM.input({type: "checkbox"}), " Series A"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default", style: {width:'20%'}}, 
                React.DOM.input({type: "checkbox"}), " Series B"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default", style: {width:'20%'}}, 
                React.DOM.input({type: "checkbox"}), " Series C"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default", style: {width:'20%'}}, 
                React.DOM.input({type: "checkbox"}), " Series D+"
              )
            ), 
            React.DOM.br(null), 
            React.DOM.h6({style: {display:'inline-block',margin:0,width:140,marginBottom:20}}, 
              "Amount Raised  "), 
            React.DOM.div({className: "btn-group profile-btns", 'data-toggle': "buttons", 
              id: "amountRaisedBtns", style: {width:'74%'}}, 
              React.DOM.label({className: "btn btn-sm btn-default amountRaisedBtn", style: {width:'25%'}}, 
                React.DOM.input({type: "checkbox"}), " ", '< $1M'
              ), 
              React.DOM.label({className: "btn btn-sm btn-default amountRaisedBtn", style: {width:'25%'}}, 
                React.DOM.input({type: "checkbox"}), " $1M - $5M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default amountRaisedBtn", style: {width:'25%'}}, 
                React.DOM.input({type: "checkbox"}), " $5M - $25M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default amountRaisedBtn", style: {width:'25%'}}, 
                React.DOM.input({type: "checkbox"}), " $25M +"
              )
            ), 

          React.DOM.br(null), 


          React.DOM.h6({style: {display:'none',margin:0,
                      width:140,marginBottom:20}}, "Company Size "), 
            React.DOM.div({className: "btn-group", 'data-toggle': "buttons", id: "employeeBtns", 
              style: {display:'none'}}, 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 1 - 50"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 50 - 250"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 250 - 1000"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 1000 +"
              )
            ), 

            React.DOM.br(null), " ", React.DOM.h6({style: {display:'none',margin:0,width:140}}, 
              "Approx. Revenue  "), 
            React.DOM.div({className: "btn-group", 'data-toggle': "buttons", id: "revenueBtns", 
              style: {display:'none'}}, 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " ", '< $1M'
              ), 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " $1M - $5M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " $5M - $25M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " $25M +"
              )
            )
      )
    )
  }
});

},{}],11:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // CreateHiringSignalModal
  createSignal: function() {
    profileName = $('.hiring-profile-name').val()
    autoProspect = $('.autoprospect > .active').text() ==  " Yes"

    hiringProfile = {
      'className': 'HiringProfile',
      'roles'    : $('.hiring-roles').tagsinput('items')
    }

    revenueProfile = {
      'className':'RevenueProfile', 
      'revenues': _.map($('#hiring-revenueBtns').find('.active'), 
                        function(revBtn){ return $(revBtn).text().trim() })
    }

    employeeProfile = {
      'className':'EmployeeProfile', 
      'employees': _.map($('#hiring-employeeBtns').find('.active'), 
                         function(empBtn){ return $(empBtn).text().trim() })
    }

    prospectProfile = {
      'className':'ProspectTitleProfile',
      'title_keywords' : $('.prospectRoleKeywords').tagsinput('items')
    }

    profiles = [hiringProfile, revenueProfile, 
                employeeProfile, prospectProfile]

    nonemptyProfiles = _.filter(profiles, function(profile) {
      if(_.values(profile)[1]){ return _.values(profile)[1].length }
    });


    newProfile = {
      name: profileName,
      autoProspect: autoProspect,
      profiles: nonemptyProfiles,
      user:{
        __type:'Pointer',
        className:'_User',
        objectId:JSON.parse(localStorage.currentUser).objectId
      },
      company: JSON.parse(localStorage.currentUser).company
    }

    if(nonemptyProfiles.length) {
      this.persistSignal(nonemptyProfiles, 
                         _.omit(newProfile,'profiles'))
      this.props.addProfile(newProfile)
      $('.modal').click()
    }
  },

  persistSignal: function(nonemptyProfiles, newProfile) {
    console.log('NEW PROFILE')
    console.log(newProfile)
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectProfile',
      headers:appConfig.headers,
      type:'POST',
      data:JSON.stringify(newProfile),
      success:function(ress) {
        // Add Signal List
        _.map(nonemptyProfiles, function(profile) {
          $.ajax({
            url:'https://api.parse.com/1/classes/'+_.values(profile)[0],
            headers:appConfig.headers,
            type:'POST',
            data:JSON.stringify( _.pick(profile, _.keys(profile)[1]) ),
            success:function(res) {
              $.ajax({
                url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
                type:'PUT',
                headers:appConfig.headers,
                data:JSON.stringify({profiles:{
                  __op: 'AddUnique',
                  objects:[{
                    __type:'Pointer',
                    className: _.values(profile)[0],
                    objectId:res.objectId
                  }]}
                }),
              })
            },
          })
        });

        // Start Mining Job
        $.ajax({
          //url:'https://nameless-retreat-3525.herokuapp.com/mining_job/title',
          ///url:'https://nameless-retreat-3525.herokuapp.com/title_mining_job',
          url:'http://127.0.0.1:5000/signal/hiring',
          type:'GET',
          data: {prospect_profile: ress.objectId},
          success: function(res) { console.log(res) },
          error: function(err) { console.log(err) }
        })
      

      },
    })
  },

  render: function() {
    return (
      React.DOM.div({className: "modal fade bs-createSignal-modal-md", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "createHiringSignalModal", 
           style: {top:'50px',overflow:'hidden'}}, 
            React.DOM.div({className: "modal-dialog modal-sm", style: {width:650}}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    "Create Hiring Signal"
                  ), 
                  React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                     onClick: this.createSignal, 
                     style: {float:'right',marginTop:-28,marginRight:-5}}, 
                    "Create Signal"
                  )
                ), 
                React.DOM.div({className: "modal-body"}, 
                  CreateHiringSignal(null)
                )
              )
            )
          )
    );
  }
});

var CreateHiringSignal = React.createClass({displayName: 'CreateHiringSignal',
  getInitialState: function() {
    return {
      addCompany: false,
      addProspect: false,
      hideCompanyDetails: false,
      hideProspectDetails: false,
    }
  },

  componentDidMount: function() {

  },
  
  toggleCompany : function() {
    this.setState({addCompany: !this.state.addCompany})
  },

  toggleProspect : function() {
    this.setState({addProspect: !this.state.addProspect})
  },

  toggleCompanyDetails: function() {
    this.setState({hideCompanyDetails: !this.state.hideCompanyDetails})
  },

  toggleProspectDetails: function() {
    this.setState({hideProspectDetails: !this.state.hideProspectDetails})
  },

  componentDidMount: function() {
    $(this.getDOMNode()).find('.hiring-role').tagsinput()
    $('.bootstrap-tagsinput').width(400)
  },

  render: function(){
    addCompany = (!this.state.addCompany) ? React.DOM.a({href: "javascript:", 
                                           onClick: this.toggleCompany, 
                                           className: "btn btn-sm btn-default"}, 
                                          React.DOM.i({className: "fa fa-plus"}), " " + ' ' +
                                          "Add Company Details"
                                        ) : CompanyProfile({hideCompanyDetails: this.state.hideCompanyDetails})

    addProspect = (!this.state.addProspect) ? React.DOM.a({href: "javascript:", 
                                           onClick: this.toggleProspect, 
                                           className: "btn btn-sm btn-default"}, 
                                          React.DOM.i({className: "fa fa-plus"}), " " + ' ' +
                                          "Add Prospect Details"
                                        ) : ProspectProfile({hideProspectDetails: this.state.hideProspectDetails})
    addCompanyStyle = (!this.state.addCompany) ? {display:'block',textAlign:'center'} : {}
    addProspectStyle = (!this.state.addProspect) ? {display:'block',textAlign:'center'} : {}

    closeCompanyBtns = (!this.state.addCompany) ? "" : React.DOM.span(null, React.DOM.a({href: "javascript:", className: "btn btn-xs btn-default", 
               onClick: this.toggleCompany, 
               style: {float:'right',marginTop:-5}}, 
               React.DOM.i({className: "fa fa-times"})), 
               React.DOM.a({href: "javascript:", className: "btn btn-xs btn-default", 
                  onClick: this.toggleCompanyDetails, 
                  style: {float:'right',marginTop:-5,marginRight:5}}, 
              React.DOM.i({className: (this.state.hideCompanyDetails) ? "fa fa-plus" :"fa fa-minus"})
          ))

    closeProspectBtns = (!this.state.addProspect) ? "" : React.DOM.span(null, React.DOM.a({href: "javascript:", className: "btn btn-xs btn-default", 
               onClick: this.toggleProspect, 
               style: {float:'right',marginTop:-5}}, 
               React.DOM.i({className: "fa fa-times"})), 
               React.DOM.a({href: "javascript:", className: "btn btn-xs btn-default", 
               onClick: this.toggleProspectDetails, 
               style: {float:'right',marginTop:-5,marginRight:5}}, 
              React.DOM.i({className: (this.state.hideProspectDetails) ? "fa fa-plus" :"fa fa-minus"})
          ))

    companyHeading = (!this.state.addCompany) ? "" : React.DOM.h5(null, React.DOM.i({className: "fa fa-building"}), "  Company Details")
    prospectHeading = (!this.state.addProspect) ? "" : React.DOM.h5(null, React.DOM.i({className: "fa fa-user"}), "  Prospect Details")
    return (
      React.DOM.div(null, 
        React.DOM.form({className: "createSignal", onSubmit: this.createSignal}, 
          React.DOM.span(null, 
            React.DOM.h6({style: {width:140,display:'inline-block',marginBottom:20}}, 
              "Hiring Profile Name:  "), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'413px'}, 
                   className: "form-control hiring-profile-name", 
                   placeholder: "Hiring Profile Name ..."})
          ), 
          React.DOM.br(null), 
          React.DOM.span(null, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, 
              "Hiring Role Name:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'50%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control hiring-role hiring-roles"}), 

                React.DOM.a({href: "javascript:", 
                   className: "btn btn-xs btn-success", style: {display:'none'}}, 
                  React.DOM.i({className: "fa fa-plus"})
                )
          ), 
          React.DOM.div({style: {marginTop:10}}, 
          React.DOM.h6({style: {width:140,display:'inline-block'}}, "Auto Prospect:  "), 
          React.DOM.div({className: "btn-group autoprospect", 'data-toggle': "buttons"}, 
            React.DOM.label({className: "btn btn-sm btn-default active"}, 
              React.DOM.input({type: "radio"}), " Yes"
            ), 
            React.DOM.label({className: "btn btn-sm btn-default"}, 
              React.DOM.input({type: "radio"}), " No"
            )
          )
          ), 
          React.DOM.div({style: {display:'none'}}, 
            React.DOM.hr(null), " ", closeCompanyBtns, " ", companyHeading, 
            React.DOM.div({style: addCompanyStyle}, " ", addCompany, " "), 

            React.DOM.hr(null), " ", closeProspectBtns, " ", prospectHeading, 
            React.DOM.div({style: addProspectStyle}, " ", addProspect, " ")
          )
        )
      )
    )
  },
  createSignal: function(e) { e.preventDefault() }
});

var CompanyProfile = React.createClass({displayName: 'CompanyProfile',
  companyFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $(this.getDOMNode()).find('.btn-default').click(function(e) {

      if($(e.target).parent('label').hasClass('active'))
        $(e.target).parent('label').removeClass('active')
      else
        $(e.target).parent('label').addClass('active')

      console.log($(e.target).parent('label'))
    });
  },

  render: function() {
    showDetails = (this.props.hideCompanyDetails) ? {display: 'none'} : {display:'block'}
    return (
      React.DOM.div({style: showDetails}, 
        React.DOM.form({className: "createSignal", onSubmit: this.companyFormSubmit}, 
          React.DOM.br(null), 
          React.DOM.h6({style: {display:'inline-block',margin:0,
                      width:140,marginBottom:20}}, "Company Size "), 
            React.DOM.div({className: "btn-group", 'data-toggle': "buttons", id: "hiring-employeeBtns"}, 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " 1 - 50"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " 50 - 250"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " 250 - 1000"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " 1000 +"
              )
            ), 

            React.DOM.br(null), " ", React.DOM.h6({style: {display:'inline-block',margin:0,width:140}}, 
              "Revenue Amount "), 
            React.DOM.div({className: "btn-group", 'data-toggle': "buttons", id: "hiring-revenueBtns"}, 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " ", '< $1M'
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " $1M - $5M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " $5M - $25M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " $25M +"
              )
            )
        )
      )
    )
  }
});

var ProspectProfile = React.createClass({displayName: 'ProspectProfile',
  prospectFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $('.prospectRoleKeywords').tagsinput({
      maxTags: 5,
    })

    $('.bootstrap-tagsinput').width(400)
  },

  render: function() {
    showDetails = (this.props.hideProspectDetails) ? {display: 'none'} : {display:'block'}
    return (
      React.DOM.div({style: showDetails}, 
        React.DOM.form({className: "createSignal", onSubmit: this.prospectFormSubmit}, 
          React.DOM.span(null, 
            React.DOM.span({style: {width:140,display:'inline-block'}}, 
              React.DOM.h6(null, "Job Title Keyword:  ")
            ), 
            React.DOM.input({type: "text", 
                   'data-role': "tagsinput", 
                   style: {width:'400px !important'}, 
                   className: "form-control prospectRoleKeywords", 
                   placeholder: ""})
          )

        )
      )
    )
  }
})

/*
  Funding Profile
  - Amount Raised
  - Stage

  People Profile
  - Locale
  - Title

  Company Profile
  - Industries
  - Revenue
  - Locale
  - # of Employees
*/

var GeneralForm = React.createClass({displayName: 'GeneralForm',

  render: function() {
    return (
        React.DOM.form({className: "createSignal", onSubmit: this.createSignal}, 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-suitcase"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Find Companies Hiring For ..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-users"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Number of Employees ..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-institution"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Amount of Funding ..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-money"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Revenue Amount ..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-wrench"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Using Technologies Such As..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.a({href: "javascript:", 
            onClick: this.createSignal, 
            className: "btn btn-default btn-success", 
            style: {display:'block', width:'100%'}}, 
            "Create Signal"
          )
        )
    )
  }
})

},{}],12:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createListModal
  createList: function() {
    console.log($('#listTitle').val())

    currentUser = JSON.parse(localStorage.currentUser)
    data =  {
      name : $('#listTitle').val().trim(),
      user : appConfig.pointer('_User', currentUser.objectId),
      company: currentUser.company
    }

    thiss = this;
    listClassName = (this.props.listClassName) ? this.props.listClassName : 'ProspectList'
    $.ajax({
      url:'https://api.parse.com/1/classes/'+listClassName,
      type:'POST',
      headers: appConfig.parseHeaders,
      data: JSON.stringify(data),
      success: function(res) { console.log(res) },
      error: function(err) { console.log(err) }
    });

    data.count = 0

    this.props.createList(data)
    
    $('#createListModal').modal('hide')
    $('body').removeClass('modal-open');
    $('.modal-backdrop').remove();
  },

  createListButtonClick: function() {
    if($('#listTitle').val().trim() != "")
      this.createList()
  },

  createMiningJob: function(e) {
    e.preventDefault()
    console.log('lmao')
    if($('#listTitle').val().trim() != "")
      this.createList()
  },

  render: function() {
    return (
          React.DOM.div({className: "modal fade bs-example-modal-sm", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "createListModal", style: {top:'200px'}}, 
            React.DOM.div({className: "modal-dialog modal-sm"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-list"}), "  Create List")
                ), 
                React.DOM.div({className: "modal-body"}, 
                  React.DOM.form({onSubmit: this.createMiningJob}, 
                    React.DOM.input({id: "listTitle", type: "text", placeholder: "Enter list title...", className: "form-control"}), 
                    React.DOM.br(null), 
                    React.DOM.a({href: "javascript:", onClick: this.createListButtonClick, placeholder: "Enter City Area...", className: "btn btn-success", style: {display:'block', width:'100%'}}, "Create List")
                  )

                )
              )
            )
          )
    );
  }
});


},{}],13:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createSignalModal
  createMiningJob: function(date) {
    this.props.createMiningJob(this.props.currentProfile, date)
  },

  render: function() {
    // moment.utc(moment().startOf('day')).valueOf()/1000
    // recieve completed days as props
    //console.log(this.props.currentProfile)
    mining_days = this.props.currentProfile.mining_days
    dates = []
    for(i=0;i< 30; i++) {  
      date = moment().subtract((i+1), 'days').startOf('day')
      mining_day = _.indexOf(mining_days, date.valueOf()/1000) != -1
      dates.push(DownloadDateRow({updateDate: this.updateDate, 
                                  createMiningJob: this.createMiningJob, 
                                  mining_day: mining_day, 
                                  date: date}))
    }

    return (
      React.DOM.div({className: "modal fade bs-createMiningJob-modal-md", 
           tabIndex: "-1", role: "dialog", 
           'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", 
           id: "createMiningJobModal", 
           style: {top:'50px',overflow:'hidden'}}, 
        React.DOM.div({className: "modal-dialog modal-sm", style: {width:350}}, 
          React.DOM.div({className: "modal-content"}, 
            React.DOM.div({className: "modal-header"}, 
              React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                React.DOM.i({className: "fa fa-cloud-download"}), " " + ' ' +
                "Download Prospects"
              ), 
              React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                 onClick: this.createMiningJob, 
                 style: {float:'right',marginTop:-28,
                         marginRight:-5,display:'none'}}, 
                 "Download"
              )
            ), 
            React.DOM.div({className: "modal-body"}, 

              React.DOM.ul({className: "list-group date-download-prospects", 
                  style: {height:400,overflow:'auto',
                  borderBottom:'solid 1px #ddd',
                  cursor:'pointer',
                  borderTop:'solid 1px #ddd'}}, 
                React.DOM.h6({style: {margin:0}}, dates)
              )

            )
          )
        )
      )
    );
  },
});

var DownloadDateRow = React.createClass({displayName: 'DownloadDateRow',
  updateDate: function() {
    //this.createMiningJob()
    date = this.props.date.startOf('day').valueOf()/1000
    //date = moment().subtract((i+1), 'days').startOf('day')
    this.props.createMiningJob(date)
  },

  render: function() {
    loading = (this.props.mining_day) ?  React.DOM.div({className: "profile-loading", style: {float:'right',height:20,width:20}}, 
            React.DOM.div({className: "double-bounce1", style: {backgroundColor:'#5cb85c'}}), 
            React.DOM.div({className: "double-bounce2", style: {backgroundColor:'#5cb85c'}})
          ) : ""
    loading = ""
    return (
        React.DOM.li({onClick: this.updateDate, style: {textAlign:'center'}, 
          className: "list-group-item download-date bg-success", 
          style: (this.props.mining_day) ? {backgroundColor:'#dff0d8',textAlign:'center'} : {textAlign:'center'}}, 
          React.DOM.span({style: {width:85}}, 
            React.DOM.i({className: "fa fa-calendar"}), " ", 
            this.props.date.format('ll'), "      "
          ), 
          React.DOM.a({href: "javascript:", style: {width:89}, 
      className: (this.props.mining_day) ? "btn btn-success btn-xs disabled" : "btn btn-success btn-xs"}, 
            (this.props.mining_day) ? "Downloading" : "Download"), 
          loading
        )
    )
  }
})


},{}],14:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createProspectListFromCompanyListModal
  createProfile: function() {
    //profileName = $(".profileName").val()
    titleProfile = {
      'className': 'ProspectTitleProfile',
      'title_keywords' : $('.prospectRoleKeywords').tagsinput('items').reverse()
    }

    listProfile = {
      'className': 'ListProfile',
      'listName':this.props.currentList,
      'list' : appConfig.pointer('CompanyProspectList', 
                                  this.props.currentListObjectId),
    }

    profiles = [titleProfile, listProfile]

    nonemptyProfiles = _.filter(profiles, function(profile) {
      if(_.values(profile)[1]){ return _.values(profile)[1].length }
    });

    //nonemptyProfiles.push(listProfile)
    nonemptyProfiles.reverse()

    console.log(nonemptyProfiles)
    console.log(this.props.currentList)

    newProfile = {
      name: this.props.currentList,
      profiles: nonemptyProfiles,
      type: 'prospect_profile',
      mining_job:true,
      list_type:"mining_job",
      only_people:true,
      user:{
        __type:'Pointer',
        className:'_User',
        objectId:JSON.parse(localStorage.currentUser).objectId
      },
      company: JSON.parse(localStorage.currentUser).company
    }

    if(nonemptyProfiles.length) {
      this.persistSignal(nonemptyProfiles, _.omit(newProfile,'profiles'))
      $('.modal').click()
      //this.props.addProfile(newProfile)
      $('.prospect-profile-title').val('')
    }
  },

  persistSignal: function(nonemptyProfiles, newProfile) {
    console.log('NEW PROFILE')
    console.log(newProfile)
    updateProfile = this.props.updateProfileWithObjectId

    thissss = this;
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectProfile',
      headers:appConfig.headers,
      type:'POST',
      data:JSON.stringify(newProfile),
      success:function(ress) {
        console.log('Prospect Profile')
        console.log(ress)

        //thissss.props.updateProfileWithObjectId(newProfile, ress.objectId)
        
        user_id = JSON.parse(localStorage.currentUser).objectId
        newProfile.user = appConfig.pointer('_User', user_id) 
        newProfile.company = JSON.parse(localStorage.currentUser).company

        if(newProfile.type == 'prospect_profile')
          newProfile.mining_job_list = true
          newProfile.list_type = "mining_job"
          newProfile.only_people = true

        $.ajax({
          url: 'https://api.parse.com/1/classes/ProspectList',
          type: 'POST',
          headers: appConfig.headers,
          data:JSON.stringify(_.pick(newProfile, 
                                     'name','user','list_type',
                                     'open_people', 'company',
                                     'mining_job_list')),
          success: function(res) {
            $.ajax({
              url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
              type:'PUT',
              headers: appConfig.headers,
              data: JSON.stringify({'prospect_list':{ __type:'Pointer',
                                    className:'ProspectList',objectId:res.objectId } }),
              success: function(res){ console.log(res); 
                $('.modal').click()
                //location.href="#signals" 
              },
              error: function(err){ console.log(err) }
            })
          },
          error: function() { }
        })

        // Start Mining Job
        if(newProfile.type == 'prospect_profile') {
          $.ajax({
            //url:'https://nameless-retreat-3525.herokuapp.com/mining_job/title',
            ///url:'https://nameless-retreat-3525.herokuapp.com/title_mining_job',
            url:'http://127.0.0.1:5000/title_mining_job',
            type:'GET',
            data: {prospect_profile: ress.objectId},
            success: function(res) { console.log(res) },
            error: function(err) { console.log(err) }
          })
        }

        // Create Profiles
        _.map(nonemptyProfiles, function(profile) {
          $.ajax({
            url:'https://api.parse.com/1/classes/'+_.values(profile)[0],
            headers:appConfig.headers,
            type:'POST',
            data:JSON.stringify( _.pick(profile, _.keys(profile)[1]) ),
            success:function(res) {
              $.ajax({
                url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
                type:'PUT',
                headers:appConfig.headers,
                data:JSON.stringify({profiles:{
                  __op: 'AddUnique',
                  objects:[{
                    __type:'Pointer',
                    className: _.values(profile)[0],
                    objectId:res.objectId
                  }]}
                }),
              })
            }
          })
        });
      }
    })
  },

  render: function() {
    return (
      React.DOM.div({className: "modal fade ", tabIndex: "-1", role: "dialog", 
           'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", 
           id: "createProspectListFromCompanyListModal", 
           style: {top:'50px',overflow:'hidden'}}, 
            React.DOM.div({className: "modal-dialog modal-sm", style: {width:650}}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    "Find Prospects At These Companies"
                  ), 
                  React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                     onClick: this.createProfile, 
                     style: {float:'right',marginTop:-28,marginRight:-5}}, 
                    "Create Profile"
                  )
                ), 
                React.DOM.div({className: "modal-body"}, 
                  ProspectProfile(null)
                )
              )
            )
          )
    );
  },
});

var ProspectProfile = React.createClass({displayName: 'ProspectProfile',
  prospectFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $('.prospectRoleKeywords').tagsinput({
      maxTags: 5,
    })
    $('.bootstrap-tagsinput').width(400)
  },

  render: function() {
    showDetails = (this.props.hideProspectDetails) ? {display: 'none'} : {display:'block'}
    return (
      React.DOM.div({style: showDetails}, 
        React.DOM.form({className: "createSignal", onSubmit: this.prospectFormSubmit}, 
          React.DOM.span(null, 
            React.DOM.span({style: {width:140,display:'inline-block'}}, 
              React.DOM.h6(null, "Job Title Keyword:  ")
            ), 
            React.DOM.input({type: "text", 
                   'data-role': "tagsinput", 
                   style: {width:'400px !important'}, 
                   className: "form-control prospectRoleKeywords", 
                   placeholder: ""})
          )
        )
      )
    )
  }
})

},{}],15:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createCompanyProfileModal
  createProfile: function() {
    profileName = $(".profileName").val()

    titleProfile = {
      'className': 'ProspectTitleProfile',
      'title_keywords'    : $('.prospect-profile-title').tagsinput('items').reverse()
    }

    /*
    locationProfile = {
      'className': 'LocationProfile',
      'locale'    : $('.prospect-location-profile').tagsinput('items').reverse()
    }

    companySizeProfile = {
      'className':'EmployeeProfile', 
      'employees': _.map($('#prospect-profile-companySizeBtns').find('.active'), 
                        function(revBtn){ return $(revBtn).text().trim() }).reverse()
    }

    revenueProfile = {
      'className':'RevenueProfile', 
      'revenues': _.map($('#prospect-profile-companyRevenueBtns').find('.active'), 
                        function(revBtn){ return $(revBtn).text().trim() }).reverse()
    }

    profiles = [titleProfile, locationProfile,
                companySizeProfile, revenueProfile]
    */
    
    profiles = [titleProfile]

    nonemptyProfiles = _.filter(profiles, function(profile) {
      if(_.values(profile)[1]){ return _.values(profile)[1].length }
    });
    console.log(nonemptyProfiles)

    newProfile = {
      name: profileName,
      profiles: nonemptyProfiles,
      type: 'prospect_profile',
      mining_job:true,
      list_type:"mining_job",
      only_people:true,
      timestamp: moment().valueOf(),
      done: 0,
      user:{
        __type:'Pointer',
        className:'_User',
        objectId:JSON.parse(localStorage.currentUser).objectId
      },
      company: JSON.parse(localStorage.currentUser).company
    }

    if(nonemptyProfiles.length) {
      this.props.addProfile(newProfile)
      this.persistSignal(nonemptyProfiles, newProfile)
      $('.modal').click()
      $('.prospect-profile-title').val('')
    }
  },

  persistSignal: function(nonemptyProfiles, newProfile) {
    console.log('NEW PROFILE')
    console.log(newProfile)

    var thissss = this;
    var thiss = this;
    var _this = this;
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectProfile',
      headers:appConfig.headers,
      type:'POST',
      data:JSON.stringify(_.omit(newProfile, 'profiles')),
      success:function(ress) {
        
        user_id = JSON.parse(localStorage.currentUser).objectId
        newProfile.user = appConfig.pointer('_User', user_id) 
        newProfile.company = JSON.parse(localStorage.currentUser).company

        $.ajax({
          url: 'https://api.parse.com/1/classes/ProspectList',
          type: 'POST',
          headers: appConfig.headers,
          data:JSON.stringify(_.pick(newProfile, 
                                     'name','user','list_type',
                                     'open_people', 'company',
                                     'mining_job_list')),
          success: function(res) {
            console.log(res)
            prospectList = appConfig.pointer('ProspectList',res.objectId)
            $.ajax({
              url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
              type:'PUT',
              headers: appConfig.headers,
              data: JSON.stringify({'prospect_list':prospectList}),
              success: function(res){ console.log(res) },
              error: function(err){ console.log(err) }
            })
          },
          error: function() { }
        })

        // Start Mining Job
        if(newProfile.type == 'prospect_profile') {
          $.ajax({
            //url:'https://nameless-retreat-3525.herokuapp.com/mining_job/title',
            ///url:'https://nameless-retreat-3525.herokuapp.com/title_mining_job',
            url:'http://127.0.0.1:5000/title_mining_job',
            type:'GET',
            data: {prospect_profile: ress.objectId},
            success: function(res) { console.log(res) },
            error: function(err) { console.log(err) }
          })
        }

        // Create Profiles
        _.map(nonemptyProfiles, function(profile) {
          $.ajax({
            url:'https://api.parse.com/1/classes/'+_.values(profile)[0],
            headers:appConfig.headers,
            type:'POST',
            data:JSON.stringify( _.pick(profile, _.keys(profile)[1]) ),
            success:function(res) {
              $.ajax({
                url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
                type:'PUT',
                headers:appConfig.headers,
                data:JSON.stringify({profiles:{
                  __op: 'AddUnique',
                  objects:[{
                    __type:'Pointer',
                    className: _.values(profile)[0],
                    objectId:res.objectId
                  }]}
                }),
              })
            }
          })
        });

        thiss.props.updateProfileWithObjectId(newProfile.timestamp, ress.objectId)
      }
    })
  },

  render: function() {
    return (
      React.DOM.div({className: "modal fade ", tabIndex: "-1", role: "dialog", 
           'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", 
           id: "createProspectProfileModal", 
           style: {top:'50px',overflow:'hidden'}}, 
            React.DOM.div({className: "modal-dialog modal-sm", style: {width:650}}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    "Create Prospect Profile"
                  ), 
                  React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                     onClick: this.createProfile, 
                     style: {float:'right',marginTop:-28,marginRight:-5}}, 
                    "Create Profile"
                  )
                ), 
                React.DOM.div({className: "modal-body"}, 
                  CreateHiringSignal(null)
                ), 
              React.DOM.div({className: "modal-footer", style: {display:'none'}}, 
                React.DOM.button({type: "button", className: "btn btn-default"}, 
                  "Close"
                ), 
                React.DOM.button({type: "button", className: "btn btn-primary"}, 
                  "Send Email"
                )
              )
              )
            )
          )
    );
  },
  createCompanyProfile: function() {
  },
});

var CreateHiringSignal = React.createClass({displayName: 'CreateHiringSignal',
  getInitialState: function() {
    return {
      addCompany: false,
      addProspect: false,
      hideCompanyDetails: false,
      hideProspectDetails: false,
    }
  },

  componentDidMount: function() {

  },
  
  toggleCompany : function() {
    this.setState({addCompany: !this.state.addCompany})
  },

  toggleProspect : function() {
    this.setState({addProspect: !this.state.addProspect})
  },

  toggleCompanyDetails: function() {
    this.setState({hideCompanyDetails: !this.state.hideCompanyDetails})
  },

  toggleProspectDetails: function() {
    this.setState({hideProspectDetails: !this.state.hideProspectDetails})
  },

  componentDidMount: function() {
    _.map($('.hiring-role'),function(input){$(input).tagsinput()})
    $(this.getDOMNode()).find('.hiring-role').tagsinput()
    $('.bootstrap-tagsinput').width('59.1%')
  },

  render: function(){
    return (
      React.DOM.div(null, 
        React.DOM.form({className: "createSignal", onSubmit: this.createProfile}, 
          React.DOM.span(null, 
            React.DOM.h6({style: {width:140,display:'inline-block',marginBottom:20}}, 
              "Prospect Profile Name:  "), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%'}, 
                   className: "form-control hiring-profile-name profileName", 
                   placeholder: "Prospect Profile Name ..."})
          ), 
          React.DOM.br(null), 
          React.DOM.span({style: {display:'block',marginBottom:-10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, 
              "Title:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control hiring-role prospect-profile-title"}), 

                React.DOM.a({href: "javascript:", 
                   className: "btn btn-xs btn-success", style: {display:'none'}}, 
                  React.DOM.i({className: "fa fa-plus"})
                )
          ), 
          React.DOM.br(null), 
          React.DOM.span({style: {display:'block',marginBottom:-10}}, 
            React.DOM.h6({style: {width:140,display:'none'}}, 
              "Location:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'none',width:'73.1%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control prospect-location-profile-tmp"}), 

                React.DOM.a({href: "javascript:", 
                   className: "btn btn-xs btn-success", style: {display:'none'}}, 
                  React.DOM.i({className: "fa fa-plus"})
                )
          ), 
          React.DOM.span({style: {display:'none',marginBottom:-10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, 
              "Industries:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control "}), 

            React.DOM.a({href: "javascript:", 
               className: "btn btn-xs btn-success", style: {display:'none'}}, 
              React.DOM.i({className: "fa fa-plus"})
            )
          ), 
          CompanyProfile(null), 

          React.DOM.div({style: {display:'none'}}, 
          React.DOM.div({style: {marginTop:10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, "Auto Prospect:  "), 
            React.DOM.div({className: "btn-group autoprospect", 'data-toggle': "buttons"}, 
              React.DOM.label({className: "btn btn-sm btn-default active"}, 
                React.DOM.input({type: "radio"}), " Yes"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "radio"}), " No"
              )
            )
          )
        )
        )
      )
    )
  },
  createSignal: function(e) { e.preventDefault() }
});

var CompanyProfile = React.createClass({displayName: 'CompanyProfile',
  companyFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $(this.getDOMNode()).find('.btn-default').click(function(e) {

      if($(e.target).parent('label').hasClass('active'))
        $(e.target).parent('label').removeClass('active')
      else
        $(e.target).parent('label').addClass('active')

      console.log($(e.target).parent('label'))
    });
  },

  render: function() {
    return (
      React.DOM.div(null, 
          React.DOM.br(null), 
          React.DOM.div({style: {display:'none'}}, 
          React.DOM.h6({style: {display:'inline-block',margin:0,
                      width:140,marginBottom:20}}, "Company Size "), 
                    React.DOM.div({className: "btn-group", 'data-toggle': "buttons", 
                      style: {width:'73.5%'}, id: "prospect-profile-companySizeBtns"}, 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 1 - 50"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 50 - 250"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 250 - 1000"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 1000 +"
              )
            )
          ), 

          React.DOM.div({style: {display:'none'}}, 
            React.DOM.br(null), " ", React.DOM.h6({style: {display:'inline-block',margin:0,width:140}}, 
              "Approx. Revenue  "), 
            React.DOM.div({className: "btn-group", 'data-toggle': "buttons", 
              style: {width:'73.5%'}, id: "prospect-profile-companyRevenueBtns"}, 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " ", '< $1M'
              ), 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " $1M - $5M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " $5M - $25M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " $25M +"
              )
            )
          )
      )
    )
  }
});

var ProspectProfile = React.createClass({displayName: 'ProspectProfile',
  prospectFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $('.prospectRoleKeywords').tagsinput({
      maxTags: 5,
    })
    $('.bootstrap-tagsinput').width(400)
  },

  render: function() {
    showDetails = (this.props.hideProspectDetails) ? {display: 'none'} : {display:'block'}
    return (
      React.DOM.div({style: showDetails}, 
        React.DOM.form({className: "createSignal", onSubmit: this.prospectFormSubmit}, 
          React.DOM.span(null, 
            React.DOM.span({style: {width:140,display:'inline-block'}}, 
              React.DOM.h6(null, "Job Title Keyword:  ")
            ), 
            React.DOM.input({type: "text", 
                   'data-role': "tagsinput", 
                   style: {width:'400px !important'}, 
                   className: "form-control prospectRoleKeywords", 
                   placeholder: ""})
          )
        )
      )
    )
  }
})

},{}],16:[function(require,module,exports){
/** @jsx react.dom */

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {
      
    }
  },

  componentDidMount: function() {
    $('.template-body').html(this.state.templateBody)
  },

  clickedOverlay: function() {
    console.log('clicked overlay')
    this.props.toggleTemplateEditMenu()
  },

  changeMode: function() {
    // Update template html on toggle
    console.log('EDIT MODE')
    console.log(this.state.editMode)
    parse_headers = appConfig.parseHeaders
    if(this.state.editMode){
      $('.summer').destroy();
      this.props.saveTemplate({
        name: this.state.name,
        templateBody: $('.summer').code(),
        templateSubject: $('.subject').val(),
      })
      this.setState({
        templateBody: $('.summer').code(),
        templateSubject: $('.subject').val(),
        editMode: !this.state.editMode,
      })
      $.ajax({
        url:'https://api.parse.com/1/classes/Templates/'+this.props.initialTemplateValues.objectId,
        type:'PUT',
        headers:parse_headers,
        data:JSON.stringify({body: $('.summer').code(),subject: $('.subject').val()}),
        success: function(res) {
          console.log(res)
        },
        error: function(err) {
          console.log(err)
        }
      });
    } else {
      this.setState({ editMode: !this.state.editMode })
    }
  },

  componentDidUpdate: function() {
    /* thiss = this; */

    console.log('OTHER')
    if(this.state.editMode){
      console.log('CALLED')
      // Replace Subject 
      $('.subject').val(this.state.templateSubject)

      $('.summer').summernote({
        height: 200,
        toolbar: [
          ['style', ['bold', 'italic', 'underline', 'clear']],
          ['font', ['strikethrough']],
          ['fontsize', ['fontsize']],
          ['color', ['color']],
          ['para', ['ul', 'ol', 'paragraph']],
          ['height', ['height']],
        ]
      })

      // Initialize Editor with html
      $('.summer').code(this.state.templateBody)
    }
  },


  render: function() {
    subjectPlace = (this.state.editMode) ? react.dom.input({style: {display:'inline',width:480}, className: "form-control subject"}) : this.state.templateSubject

    if(this.state.editMode){
       toggleButton = react.dom.a({href: "javascript:", 
             onClick: this.changeMode, 
             className: "btn btn-success btn-xs", 
             style: {display:'block',float:'right',marginTop:5}}, 
            react.dom.i({className: "fa fa-save"}), "   Save Template")
    } else {
       toggleButton = react.dom.a({href: "javascript:", 
             onClick: this.changeMode, 
             className: "btn btn-primary btn-xs", 
             style: {display:'block',float:'right',marginTop:5}}, 
            react.dom.i({className: "fa fa-pencil-square"}), "   Edit Template")
    }

    return (
      react.dom.div(null, 
      react.dom.div({onClick: this.clickedOverlay, id: "editTemplateOverlay"}), 
      react.dom.div({id: "editTemplateView", 
           className: "panel panel-info", 
           style: {display:'block'}}, 
           react.dom.div({className: "panel-heading", style: {height:50}}, 
             react.dom.h6({style: {float:'left'}}, 
               react.dom.i({className: "fa fa-file-text-o"}), 
               "  " + this.props.initialTemplateValues.name
             ), 
          toggleButton
        ), 
        react.dom.div({className: "panel-body"}, 
          react.dom.div({className: "editTemplateTitle"}, 
            react.dom.span(null, "Subject: "), 
            subjectPlace
          ), 
         react.dom.br(null), 
         react.dom.div({className: "templateDetails"}, 
           react.dom.h6({style: {marginBottom:'0'}, className: "text-muted"}, 
             "Created by Mark on Jul. 21, 2014"
           ), 
           react.dom.h6({style: {marginTop:'0'}, className: "text-muted"}, 
             "last updated 7 days ago"
           )
         ), 
        react.dom.br(null), 
        react.dom.div({className: "panel panel-default"}, 
          react.dom.div({className: "panel-body summer template-body"}
          )
        )
    )
)
)
    );
  }
});

},{}],17:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // DataRow
  getInitialState: function() {
    return { }
  },

  clickCheck: function() {
    domNode = this.getDOMNode()
    isChecked = $($(domNode).find('input[type="checkbox"]')[0]).prop('checked')
    //console.log(isChecked)
    this.setState({checked: isChecked})
    this.props.checkboxAction(isChecked, this.props.prospect.objectId)
  },

  rowClick: function() {
    $($(this.getDOMNode()).find('input[type="checkbox"]')[0]).click()
  },

  keyboardClick: function() {
    $($('.keySelect').find('input[type="checkbox"]')[0]).click()
  },

  componentDidMount: function() { },

  render: function() {
    keyboardSelected = {borderLeft:'7px solid rgba(0,0,0,0)'}
    thissss = this
    if(this.props.keyboardSelected) {
      // Adjust Scroll depending on where the prospect is
      keyboardSelected = {borderLeft:'7px solid #0096ff !important'}
      Mousetrap.unbind('x')
      Mousetrap.bind('x', function() { 
        thissss.keyboardClick()
        if(thissss.state.checked)
          console.log("lmao")
      });
    }

    prospect = this.props.prospect

    if(this.props.masterCheckboxChecked && this.state.checked)
      checked = true
    else if(this.props.alreadyChecked)
      checked = true
    else if(this.state.checked)
      checked = true
    else if(this.props.masterCheckboxChecked || this.state.checked)
      checked = true
    else
      checked = false

    //console.log(this.state.checked)
    //console.log(checked)
    //{prospect.employeeCountRange.name + " employees" }
    
    color = {}
    if(this.state.checked || this.props.alreadyChecked)
      color = {backgroundColor: '#eef8ff'}
      
    rowCl = (this.props.keyboardSelected) ? "prospects-tr keySelect" : "prospects-tr"
    websiteBtn = (prospect.websiteUrl) ?  React.DOM.a({href: "http://"+prospect.websiteUrl.replace('http://','')}, " ", React.DOM.i({className: "fa fa-globe"}), " ") : ""
    return (
      React.DOM.tr({className: rowCl, 
          onClick: this.rowClick, 
          style: keyboardSelected}, 
          React.DOM.td({style: color}, 
              React.DOM.input({type: "checkbox", 
                     onChange: this.clickCheck, 
                     checked: checked})
          ), 

          React.DOM.td({style: color, 
              className: "fixed-data-column"}, 
            React.DOM.span({style: {fontWeight:'bold'}}, prospect.name), 
            React.DOM.h6({style: {fontWeight:'400',margin:'0px'}}, prospect.headcount)
          ), 

          React.DOM.td({style: color, 
              className: "fixed-data-column"}, 
            React.DOM.h6({style: {margin:'0px'}}, moment(prospect.createdAt,'YYYY-MM-DDTh:mm:ss').fromNow())
          ), 

          React.DOM.td({style: color, 
              className: "fixed-data-column"}, 
            React.DOM.h6({style: {margin:'0px'}}, prospect.industry)
          ), 

          React.DOM.td({style: color}, 
            "   ", 
            React.DOM.a({href: "javascript:", className: "btn btn-primary btn-xs", 
              onClick: this.openLinkedinCompanyProfile, 
              style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
              React.DOM.i({className: "fa fa-search"}), "  " + ' ' +
              "Search Profiles"
            ), 
            "   ", 
            React.DOM.a({href: "javascript:", className: "btn btn-primary btn-xs", 
              onClick: this.openSimilarCompanies, 
              style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
              React.DOM.i({className: "fa fa-copy"}), "  " + ' ' +
              "Find Similar Companies"
            )
          ), 

          React.DOM.td({style: color}, 
            React.DOM.h6({style: {margin:'0px'}}, prospect.city)
          ), 

          React.DOM.td({style: color}, 
            this.props.li, " ", this.props.link, 
            websiteBtn
          )
        )
    );
  },

  openLinkedinCompanyProfile: function(e) {
    cid = this.props.prospect.profile.split('?')[0].split('/company/')[1]
    window.open("https://www.linkedin.com/vsearch/p?f_CC="+cid)
    e.stopPropagation()
  },

  openSimilarCompanies: function(e) {
    cid = this.props.prospect.profile.split('?')[0].split('/company/')[1]
    window.open("https://www.linkedin.com/vsearch/c?rsid=526440371409184768175&pivotType=sim&pid="+cid+"&trk=sim_companies_res_sim&trkInfo=VSRPsearchId%3A526440371409184768175%2CVSRPtargetId%3A1025%2CVSRPcmpt%3Aprimary")
    e.stopPropagation()
  },

  deleteProspect: function() {
    this.props.deleteProspect(this.props.prospect.objectId, 'Prospect')
  }
});


},{}],18:[function(require,module,exports){
/** @jsx React.DOM */

//TODO - abstract lists
var SideMenuProspects = require('./side_menu_user_prospects.js.min.js');

var UserProspect = require('./user_prospect.js.min.js');
var DataRow = require('./data_row.js.min.js');

var UserProspectHeader = require('./user_prospect_header.js.min.js');
var SideMenuListOption = require('./user_side_menu_list.js.min.js');
var LoadingSpinner = require('./loading_spinner.js.min.js')
var PanelFooting = require('./panel_footing.js.min.js')
var Messenger = require('./messenger.js.min.js')
var DeleteListModal = require('./delete_list_modal.js.min.js')
var RenameListModal = require('./rename_list_modal.js.min.js')
var CompanyProspect = require('./company.js.min.js');
var CreateProspectListFromCompanyListModal = require('./create_prospect_list_from_company_list.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {  currentPage : 1,
              className: this.props.className,  
              listClassName: this.props.listClassName,
              customRow: this.props.tableRow,
              pages       : 1,
              currentList : 'All',
              currentListObjectId : '',
              loading: true,
              lists : [],
              masterCheckboxChecked: false,
              prospectsPerPage: 50,         //classNames per page
              keyboardActiveProspect: 0,    //first
              selectedProspects: [],        //selectedClassName
              prospects   : [],             //className
              totalCount  : "~", 
              count       : "~", }
  },

  createList: function(data) {
    lists = this.state.lists
    lists.push(data)
    this.setState({ lists: lists })
  },

  renameList: function(newListName) {
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      'Content-Type': 'application/json'
    }
    console.log(this.state.currentListObjectId)
    console.log(this.state.currentList)
    console.log(newListName)

    // Update Local State
    thiss = this;
    var filtered = _.filter(this.state.lists, function(item) {
      if(item.name == thiss.state.currentList){
        item.name = newListName
        return item
      }
      return item
    });

    this.setState({lists : filtered})
    this.setState({currentList: newListName})

    $('.modal').click()
    $('#newListName').val('')
    $('.modal-backdrop').click()

    // Persist / Ajax
    listClassName = this.state.listClassName
    $.ajax({
      url:'https://api.parse.com/1/classes/'+listClassName+'/'+this.state.currentListObjectId,
      headers: parseHeaders,
      type:'PUT',
      data:JSON.stringify({'name':newListName}),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  deleteList: function() {
    // TODO 
    // Get All Members Of This List
    // Remove From List Array
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      'Content-Type': 'application/json'
    }
    
    var filtered = _.filter(this.state.lists, function(item) {
      if(item.objectId == thiss.state.currentListObjectId)
        return false
      return true
    });

    this.setState({lists: filtered})
    this.setState({currentList: 'All'})
    this.changeList('All', '')

    // Remove
    $('.modal').click()
    $('#newListName').val('')
    $('.modal-backdrop').click()

    // Persist / Ajax
    listClassName = this.state.listClassName

    $.ajax({
      url:'https://api.parse.com/1/classes/'+listClassName+'/'+this.state.currentListObjectId,
      headers: parseHeaders,
      type:'DELETE',
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  changeList: function(newListName,objectId) {
    // add overlay loading
    //console.log(newListName)
    //console.log(objectId)

    localStorage.selectedProspects = JSON.stringify([])

    this.setState({currentList : newListName})
    this.setState({currentListObjectId : objectId})
    this.setState({prospects  : []    })
    this.setState({count      : '~'   })
    this.setState({pages      : 1     })
    this.setState({loading    : true  })
    this.setState({currentPage: 1})
    this.setState({keyboardActiveProspect: 0})

    qry = 'where={"company":'+company+',"archived":true}&count=1&order=-createdAt'
    console.log(newListName)

    if(this.state.currentList != 'All' || typeof(objectId) != "undefined" && newListName != 'Archived'){
      currentList = JSON.stringify({
        'objectId'  : objectId, 
        '__type'    : 'Pointer', 
        'className' : this.state.listClassName
      })

      company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
      qry = 'where={"company":'+company+'}&count=1'
      qry = 'where={"lists":'+currentList+'}&count=1&order=-createdAt'
    } else if (newListName == 'Archived') {
      qry = 'where={"company":'+company+',"archived":false}&count=1&order=-createdAt'
    }
    console.log(qry)

    className = this.state.className

    $.ajax({
      url: 'https://api.parse.com/1/classes/'+className,
      type:'GET',
      headers: parse_headers,
      async: true,
      data: qry,
      ajaxStart: function() {
        console.log('started list')
      },
      success: function(res){
        thisss.setState({prospects: res.results})
        thisss.setState({count: res.count})
        //thisss.setState({totalCount: res.count})
        thisss.setState({pages: Math.ceil(res.count/thisss.props.prospectsPerPage)})
        thisss.setState({loading: false})
      },
      error: function(res){
        //console.log('error')
        //console.log(res)
      }
    })
  },

  checkboxAction: function(checkedState, objId) {
    /* Storing Checked Prospects In LocalStorage To Make it Easier To
     * Copy and Move Prospects 
     *
     * Move To User_Prospects?
     */
    
    selectedProspects = JSON.parse(localStorage.selectedProspects)
    //console.log(checkedState)
    if(checkedState)
      selectedProspects.push(objId)
    else
      selectedProspects = _.reject(selectedProspects, 
                                   function(id){return id == objId})

    console.log(selectedProspects)
    localStorage.selectedProspects = JSON.stringify(selectedProspects)
    this.setState({selectedProspects: selectedProspects})
  },

  masterCheckboxChanged: function(masterCheckboxValue) {
    this.setState({masterCheckboxChecked: masterCheckboxValue})
  },

  render: function() {


    this.startKeyboardShortcuts()
    $('body').css({overflow:'auto'})

    prospects = []
    for(i=0;i< this.state.prospects.length;i++) {
      url = this.state.prospects[i].url
      prospect = this.state.prospects[i]

      if(url != "no linkedin website" && typeof(url) != "undefined" && url != ""){
        url = url.replace('http://','')
        the_link = React.DOM.a({href: 'http://'+url}, React.DOM.i({className: "fa fa-globe"}))
      } else {
        the_link = ""
      }

      profile = this.state.prospects[i].profile.replace('http://','')
      profile = this.state.prospects[i].profile.replace('https://','')
      profile = (typeof(profile) != "undefined") ? profile : ""
      li = React.DOM.a({href: profile, className: "linkedin_link"}, React.DOM.i({className: "fa fa-linkedin-square"}))

      keyboardSelected = (i == this.state.keyboardActiveProspect)

      selectedProspects = JSON.parse(localStorage.selectedProspects)
      alreadyChecked=false
      for(ii=0;ii< selectedProspects.length;ii++)
        if(prospect.objectId == selectedProspects[ii])
          alreadyChecked = true

      prospects.push(
        DataRow({deleteProspect: this.deleteProspect, 
                 prospect: this.state.prospects[i], 
                 masterCheckboxChecked: this.state.masterCheckboxChecked, 
                 key: this.generate_id(), 
                 link: the_link, 
                 keyboardSelected: keyboardSelected, 
                 checkboxAction: this.checkboxAction, 
                 alreadyChecked: alreadyChecked, 
                 li: li}))
    }

    listType = (this.state.currentList == "All") ? {display:'none'} : {float:'left'}
    listNameStyle = (this.state.currentList == "All") ? {display:'none'} : {float:'left',display:'inline-block', fontWeight: 200, marginTop: 1, paddingRight: 10, marginLeft: -10}
    listBtn = (this.state.currentList == "All") ? {display:'none'} : {float:'left',marginLeft:5}
    listOptions = (this.state.currentList == "All") ? {display:'none'} : {float:'right'}
    copyDropdownStyle = (this.state.currentList == "All") ? {width:114, right:4} : {width:114, right:36}
    currentList = this.state.currentList
    return (
        React.DOM.div(null, 
      React.DOM.div({className: "container", style: {width:'100%',padding:'0', background: 'linear-gradient(#dae8ff,#dae8ff)', backgroundImage: 'radial-gradient(circle at center center,#fff,#dff1fd 900px)'}}, 
        SideMenuProspects({currentList: this.state.currentList, 
                           count: this.state.count, 
                           totalCount: this.state.totalCount, 
                           changeList: this.changeList, 
                           listClassName: this.state.listClassName, 
                           createList: this.createList, 
                           lists: this.state.lists}), 

        React.DOM.div({className: "col-md-10", style: {padding:'0'}}, 
              React.DOM.div({id: "prospectDetailButtons"}, 
                ListDetailButtons({
                  renameList: this.renameList, 
                  deleteList: this.deleteList, 
                  currentListName: this.state.currentList, 
                  currentList: this.state.currentListObjectId}), 

                React.DOM.div({className: "dropdown"}, 
                  React.DOM.a({href: "javascript:", 
                     className: "btn btn-primary btn-xs list-options", 
                     id: "", 
                     style: {display:'none'}
                     }, 
                    React.DOM.i({className: "fa fa-bars"})
                  )
                ), 

                React.DOM.div({className: "dropdown"}, 
                  React.DOM.a({'data-toggle': "dropdown", 
                     id: "copyToList", 
                     href: "javascript:", 
                     className: "drop-target btn btn-primary btn-xs list-options"}, 
                     React.DOM.i({className: "fa fa-copy"}), 
                       "  Copy To List  ",  
                     React.DOM.i({className: "fa fa-caret-down"})
                ), 
                CurrentListsTwo({lists: this.state.lists, 
                                 copyDropdownStyle: copyDropdownStyle, 
                                 listAction: this.copySelectedProspects})
                ), 
  
                React.DOM.div({className: "dropdown"}, 
                  React.DOM.a({'data-toggle': "dropdown", 
                     href: "javascript:", 
                     id: "moveToList", 
                     style: listOptions, 
                     className: "btn btn-primary btn-xs list-options"}, 
                     React.DOM.i({className: "fa fa-share"}), 
                     "  Move To List  ",  
                     React.DOM.i({className: "fa fa-caret-down"})
                ), 
                CurrentLists({lists: this.state.lists, 
                              listAction: this.moveSelectedProspects})
                ), 

                React.DOM.a({onClick: this.downloadFile, 
                   href: "javascript:", 
                   id: "downloadProspects", 
                   className: "drop-target btn btn-primary btn-xs list-options"}, 
                  React.DOM.i({className: "fa fa-download"}), "   Download CSV  " 
                ), 

                React.DOM.a({onClick: this.launchProspectListFromCompanyListModal, 
                   style: listOptions, 
                   href: "javascript:", 
                   id: "downloadProspects", 
                   className: "drop-target btn btn-primary btn-xs list-options"}, 
                  React.DOM.i({className: "fa fa-cloud-download"}), "   Find Prospects   " 
                )
              ), 
        

          React.DOM.div({id: "autoscroll", style: {height:'400px',overflow:'auto'}}, 
            React.DOM.table({className: "prospects-table table table-striped", style: {marginBottom:'0px'}}, 
              React.DOM.thead({style: {backgroundColor:'white'}}, 
                CompanyProspectHeader({masterCheckboxChanged: this.masterCheckboxChanged})
              ), 
              React.DOM.tbody(null, 
                prospects
              )
            ), 
            (this.state.loading) ? LoadingSpinner(null) : ""
          )
        )
      ), 

      PanelFooting({currentPage: this.state.currentPage, 
                    count: this.state.count, 
                    paginate: this.paginate, 
                    prospectsPerPage: this.state.prospectsPerPage, 
                    pages: this.state.pages}), 
      Messenger(null), 
      CreateProspectListFromCompanyListModal({currentList: this.state.currentList, currentListObjectId: this.state.currentListObjectId})
    )
    );
  },

  paginate: function(newProspects, newPage) {
    this.setState({
      prospects: newProspects,
      currentPage: newPage,
      keyboardActiveProspect: 0
    })
    this.startKeyboardShortcuts()
    document.getElementById('autoscroll').scrollTop = 0
  },

  launchProspectListFromCompanyListModal: function() {
    
    $('#createProspectListFromCompanyListModal').modal()
  },

  downloadFile: function() {
    parse_headers = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
    }

    // Get List Count
    list = JSON.stringify({
      '__type'   :  'Pointer',
      'className':  this.state.listClassName,
      'objectId' :  this.state.currentListObjectId
    })
    console.log(list)
    // Add Support For More than 1000
    // num_of_requests
    //this.props.paginate(res.results, this.props.currentPage + 1)
    localStorage.download_total = Math.ceil(this.state.count/1000)
    localStorage.downloads      = 0

    if(this.state.currentList == "All")
      qry = 'where={"company":'+company+'}&count=1'
    else
      qry = 'where={"lists":'+list+'}&count=1'

    className = this.state.className

    for(i=0;i< Math.ceil(this.state.count/1000); i++){
      $.ajax({
        url: 'https://api.parse.com/1/classes/'+className+'?limit=1000&skip='+i,
        type:'GET',
        headers: parse_headers,
        downloadFile: 'download_'+i,
        data: qry,
        success: function(res){
          // Clean Results
          // Remove Certain Parse Columns - created_at, updated_at, objectId
          // Rename createdAt as date prospected
          for(i=0;i< res.results.length;i++) {
            delete res.results[i].company
            delete res.results[i].pos
            delete res.results[i].user
            delete res.results[i].objectId
            delete res.results[i].createdAt
            delete res.results[i].updatedAt
          }

          // Add Results To LocalStorage
          localStorage.downloads = JSON.parse(localStorage.downloads) + 1 
          localStorage.setItem(this.downloadFile, JSON.stringify(res.results))

          // Check to see if all ajax reqs in for loop are complete
          if(localStorage.downloads == localStorage.download_total) {
            console.log('matched')
            // Merge all localStorage results
            prospects = []
            for(ii=0;ii < JSON.parse(localStorage.download_total); ii++){
              prospects = prospects.concat(JSON.parse(localStorage.getItem('download_'+ii)))
              console.log(prospects)
            }

            console.log(prospects)
            // Output as CSV
            var blob = new Blob([Papa.unparse(prospects)], {type: "text/plain;charset=utf-8"});
            console.log(blob)
            saveAs(blob, "prospects.csv");
          }
      },

      error: function(res){
        console.log(res)
      }
      });
    }
    
    company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
    

  },

  removeSelectedProspects: function() {
    // If List Type is All Archive the prospect
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      "Content-Type" : "application/json"
    }

    selectedProspects = JSON.parse(localStorage.selectedProspects)
    batchData = []

    for(i=0;i< selectedProspects.length;i++){
      if(this.state.currentList != 'All'){
        tmp = {
          method:'PUT',
          path:'/1/classes/'+this.state.className+'/'+selectedProspects[i],
          body: {
            lists: {
              '__op'    : 'Remove',
              "objects" : [{ 
                  '__type':'Pointer',
                  'className':this.state.listClassName,
                  'objectId':this.state.currentListObjectId
              }]
            }
          }
        }
      }else{
        tmp = {
          method:'PUT',
          path:'/1/classes/'+this.state.className+'/'+selectedProspects[i],
          body: {
            archived:false,
          }
        }
      }
      batchData.push(tmp)
    }

    thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/batch',
      type:'POST',
      headers:parseHeaders,
      data: JSON.stringify({requests: batchData}),
      success:function(res) {
        console.log(res)
        lists = thiss.state.lists

        for(i=0;i< lists.length; i++) { 
          // Subtract From Old List - Not Working For Archive
          if(lists[i].objectId == thiss.state.currentListObjectId)
            lists[i].count = parseInt(lists[i].count) - parseInt(selectedProspects.length)
        }
        // Update local list count
        thiss.setState({lists: lists})

        // remove from current list ui
        selectedProspects = JSON.parse(localStorage.selectedProspects)
        console.log('remove selected prospects')
        console.log(selectedProspects)
        console.log(thiss.state.prospects)
        var filtered = _.filter(thiss.state.prospects, function(item) {
          for(i=0;i< selectedProspects.length;i++) 
            if(item.objectId == selectedProspects[i])
              return false
          return true
        });
        console.log(filtered)
        thiss.setState({prospects: filtered})
        localStorage.selectedProspects = JSON.stringify([])

        // add alert to inform user
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  moveSelectedProspects: function(listObjectId) {
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      "Content-Type" : "application/json"
    }

    // get the selected objectId from selectedProspects state
    selectedProspects = JSON.parse(localStorage.selectedProspects)
    batchData = []


    // Batch Update Parse
    // - Remove All Selected Prospects From Current List
    for(i=0;i< selectedProspects.length;i++){
      tmp = {
        method:'PUT',
        path:'/1/classes/'+this.state.className+'/'+selectedProspects[i],
        body: {
          lists: {
            '__op'    : 'Remove',
            "objects" : [{ 
                '__type':'Pointer',
                'className':this.state.listClassName,
                'objectId':this.state.currentListObjectId
            }]
          }
        }
      }
      batchData.push(tmp)
    }
    
    // - Add Other List 
    for(i=0;i< selectedProspects.length;i++){
      tmp = {
        method:'PUT',
        path:'/1/classes/'+this.state.className+'/'+selectedProspects[i],
        body: {
          lists: {
            '__op'    : 'AddUnique',
            "objects" : [{ 
                '__type':'Pointer',
                'className':this.state.listClassName,
                'objectId':listObjectId
            }]
          }
        }
      }
      batchData.push(tmp)
    }

    thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/batch',
      type:'POST',
      headers:parseHeaders,
      data: JSON.stringify({requests: batchData}),
      success:function(res) {
        console.log(res)
        lists = thiss.state.lists

        for(i=0;i< lists.length; i++) { 
          // Add To New List
          if(lists[i].objectId == listObjectId)
            lists[i].count = parseInt(lists[i].count) + parseInt(selectedProspects.length)
          // Subtract From Old List
          if(lists[i].objectId == thiss.state.currentListObjectId)
            lists[i].count = parseInt(lists[i].count) - parseInt(selectedProspects.length)
        }
        // Update local list count
        thiss.setState({lists: lists})

        // remove from current list ui
        console.log('selectedProspects')
        console.log(thiss.state.prospects)
        var filtered = _.filter(thiss.state.prospects, function(item) {
          is_selected = true
          for(i=0;i< selectedProspects.length;i++) 
            if(item.objectId == selectedProspects[i])
              is_selected = false
          return is_selected
        });
        console.log(filtered)
        thiss.setState({prospects: filtered})
        localStorage.selectedProspects = JSON.stringify([])

        // add alert to inform user
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  copySelectedProspects: function(listObjectId) {
    console.log(listObjectId)
    
    // make batch ajax request to parse
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      "Content-Type" : "application/json"
    }

    // Add Loading Sign To List

    selectedProspects = JSON.parse(localStorage.selectedProspects)
    batchData = []
    for(i=0;i< selectedProspects.length;i++){
      tmp = {
        method:'PUT',
        path:'/1/classes/'+this.state.className+'/'+selectedProspects[i],
        body: {
          lists: {
            '__op'    : 'AddUnique',
            "objects" : [{ 
                '__type':'Pointer',
                'className':this.state.listClassName,
                'objectId':listObjectId
            }]
          }
        }
      }
      batchData.push(tmp)
    }

    thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/batch',
      type:'POST',
      headers:parseHeaders,
      data: JSON.stringify({requests: batchData}),
      success:function(res) {
        console.log(res)
        // Update With the number of successes
        // Update local list count
        lists = thiss.state.lists
        for(i=0;i< lists.length; i++) { 
          if(lists[i].objectId == listObjectId)
            lists[i].count = parseInt(lists[i].count) + parseInt(res.length)
        }
        thiss.setState({lists: lists})
        localStorage.selectedProspects = "[]"
        thiss.setState({selectedProspects : [] })
        
        // add alert to inform user
        // Unselect all selected
      },
      error: function(err) {
        console.log(err)
      }
    });

  },

  hideAlert: function() {
    $('.alert').hide()
  },

  adjustHeight: function(whichOne) {
    prospectWindowTop = $('#prospectDetailButtons').position().top
    prospectWindowTop = prospectWindowTop + $('#prospectDetailButtons').height()
    prospectWindowBottom = $('#autoscroll').position().top + $('#autoscroll').height()

    if(whichOne == 'j')
      activeProspect = this.state.keyboardActiveProspect +1 
    else
      activeProspect = this.state.keyboardActiveProspect -1 

    activeTop = $($('.prospects-tr')[activeProspect]).position().top
    selectedHeight = $($('.prospects-tr')[activeProspect]).height()
    activeBottom = $($('.prospects-tr')[activeProspect]).position().top+selectedHeight

    console.log(prospectWindowTop, prospectWindowBottom)
    console.log(activeTop, activeBottom)

    scrollTop = document.getElementById('autoscroll').scrollTop
    if(activeBottom > prospectWindowBottom)
      document.getElementById('autoscroll').scrollTop = scrollTop + activeBottom - prospectWindowBottom

    if(activeTop < 0)
      document.getElementById('autoscroll').scrollTop = scrollTop + activeTop - 37
    else if(activeTop == $($('.prospects-tr')[0]).position().top)
      document.getElementById('autoscroll').scrollTop = 0
      
    // Get Postion of Top
    // Get Position of Bottom 
    // Get Position of Current Selected
    // Adjust by scrolling down or up
  },

  startKeyboardShortcuts: function() {
    /* Keyboard Shortcuts */
    Mousetrap.reset()
    //Mousetrap.unbind(['j','k','o'])
    thiss = this;

    /* Prospect Table Shortcuts */
    Mousetrap.bind('j', function() { 
      keyboard = thiss.state.keyboardActiveProspect
      if(keyboard != thiss.state.prospectsPerPage+1)
        thiss.adjustHeight('j')
        thiss.setState({keyboardActiveProspect: keyboard+1})
    });

    Mousetrap.bind('k', function() { 
      keyboard = thiss.state.keyboardActiveProspect
      if(keyboard != 1)
        thiss.adjustHeight('k')
        thiss.setState({keyboardActiveProspect: keyboard-1})
    });


    Mousetrap.bind('o', function() { 
      console.log('open current prospect')
      console.log($($('.keySelect').find('a.linkedin_link')[0]).attr('href'))
      link = $($('.keySelect').find('a.linkedin_link')[0]).attr('href')
      /*
      window.open(link, '_blank')
      console.log('new')
      */
      //popupWindow.blur();
      //window.focus();
      // keyboard = thiss.state.keyboardActiveProspect
      
      var a = document.createElement("a");
      a.href = link
      var evt = document.createEvent("MouseEvents");
      //the tenth parameter of initMouseEvent sets ctrl key
      // For Mac This Works Check For - Windows
      evt.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0,
                                  false, false, false, true, 0, null);
      a.dispatchEvent(evt);
    });



    /* List Modification Shortcuts */
    Mousetrap.bind('tab+r', function(){
      //console.log('reload')
      $('#renameListBtn').click()
    })

    Mousetrap.bind('tab+d', function(){
      //console.log('reload')
      $('#deleteListModal').click()
    })

    Mousetrap.bind('tab+s', function(){
      //console.log('reload')
      //$('#downloadProspects').click()
      thiss.downloadFile()
    })

    Mousetrap.bind('shift+l', function(){
      //console.log('reload')
      //$('#downloadProspects').click()
      //thiss.downloadFile()
      $('.new-list-btn').click()
    })

    Mousetrap.bind('e', function(){
      console.log('reload')
      //$('#downloadProspects').click()
      thiss.removeSelectedProspects()
    })

    Mousetrap.bind('c', function() { 
      console.log('copy')
      $('#copyToList').click()
    });

    Mousetrap.bind('m', function() { 
      console.log('copy')
      $('#moveToList').click()
    });

    //Mousetrap.bind('e', function() { console.log('e'); });
    Mousetrap.bind('right', function() { console.log('right'); });
    Mousetrap.bind('left', function() { console.log('left'); });

  },

  componentDidMount: function() {
    /* OnLoad For The First Time Function */
    localStorage.selectedProspects = JSON.stringify([])
    thisss = this;

    //this.startKeyboardShortcuts()

    parse_headers = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb'
    }

    company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
    cuid = JSON.parse(localStorage.currentUser).objectId
    user = JSON.stringify({'__type':'Pointer',
                           'objectId':cuid, 
                           'className': 'User'})
    archiveList = JSON.stringify({ //hardCode
      'objectId':'SerPQjckve',
      '__type':'Pointer', 
      'className' : this.state.listClassName
    })

    qry = 'where={"company":'+company+',"archived":true}&count=1&order=-createdAt'

    if(this.state.currentList != 'All'){
      currentList = {
        'objectId':this.state.currentListObjectId, 
        '__type':'Pointer', 
        'className' : this.state.listClassName
      }
      currentList = JSON.stringify(currentList)
      user = JSON.stringify({'__type':'Pointer',
                             'objectId':'xThAXc0LZT',
                             'className':'User'})

      // add company to prospects added through mining job
      qry = 'where={"company":'+company+',"lists":'+currentList+'}&count=1'
    }

    className = this.state.className
    $.ajax({
      url: 'https://api.parse.com/1/classes/'+className+'?limit='+thisss.state.prospectsPerPage,
      type:'GET',
      headers: parse_headers,
      cache: true,
      data: qry,
      success: function(res){
        console.log('COMPANY RESULTS')
        console.log(res.results)
        console.log(res.results.length)
        thisss.setState({prospects: res.results})
        thisss.setState({count: res.count})
        thisss.setState({totalCount: res.count})
        thisss.setState({pages: Math.ceil(res.count/thisss.props.prospectsPerPage)})
        thisss.setState({loading: false})
      },
      error: function(res){
        console.log('error')
        console.log(res)
      }
    })

    parse_headers = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
    }

    currentUser = { 
      '__type'   : 'Pointer',
      'className': '_User',
      'objectId' : JSON.parse(localStorage.currentUser).objectId
    }

    thiss = this;
    listClassName = this.state.listClassName
    $.ajax({
      url: 'https://api.parse.com/1/classes/'+listClassName,
      type: 'GET',
      headers: parse_headers,
      data: 'where={"user":'+JSON.stringify(currentUser)+"}&count=1&order=-createdAt",
      success: function(res) {
        console.log(res)
        results = res.results
        for(i=0;i< results.length; i++) {
          results.count = '~'
        }
        thiss.setState({lists: results})
        // Make batch request to get list counts after they are loaded
        for(i=0;i < res.results.length; i++) {
          localStorage.setItem(res.results[i].objectId, "")
        }

        for(i=0;i< res.results.length; i++) {
          list = {
            '__type'    : 'Pointer',
            'objectId'  : res.results[i].objectId,
            'className' : thiss.state.listClassName,
          }

          className = thiss.state.className
          $.ajax({
            url:'https://api.parse.com/1/classes/'+className,
            type:'GET',
            headers:parse_headers,
            listObjectId: res.results[i].objectId,
            data: 'where={"lists":'+JSON.stringify(list)+'}&count=1',
            success: function(res) {
              //console.log(this.listObjectId)
              localStorage.setItem(this.listObjectId, res.count)
              amount = 0
              for(ii=0;ii< results.length;ii++){
                if(localStorage.getItem(results[ii].objectId) == "")
                  amount = amount + 1
              }

              if(amount == 0) {
                for(ii=0;ii< results.length;ii++)
                  results[ii].count = localStorage.getItem(results[ii].objectId)

                thiss.setState({lists: results})
                //console.log('Got Counts')
              }

              // updated res.count
              //thiss.setState({count: res.count})
            },
            error: function(err) {
              console.log(err)
            }
          })
        }
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });
  },

  generate_id : function () {
    return '_' + Math.random().toString(36).substr(2, 9);
  },
});

/*  Dropdown Menus */

var CurrentLists = React.createClass({displayName: 'CurrentLists',
  listAction: function(e) {
    listName = $(e.target).text()
    
    var listSelect = _.filter(this.props.lists, function(item) {
       return item.name == listName
    });

    this.props.listAction(listSelect[0].objectId)
  },

  render: function() {
    lists = [] 
    for(i=0;i< this.props.lists.length;i++) {
      lists.push(
        React.DOM.li(null, React.DOM.a({style: {fontWeight:'bold',fontSize:'10px'}, href: "javascript:", onClick: this.listAction}, this.props.lists[i].name))
      )
    }
    //console.log(this.props.copyDropdownStyle)
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: {right:158}}, 
        lists
      )
    );
  }
});

var ListsMenu = React.createClass({displayName: 'ListsMenu',
  render: function() {
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: {
            minWidth:'inherit',
            top: '20px',
            width: '125px',
            right: '154px',
            left:'auto'
          }}, 
        React.DOM.li(null, React.DOM.a({href: "#books"}, 
          React.DOM.i({className: "fa fa-times"}), "  " + ' ' +
          "Delete List"
        )), 
        React.DOM.li(null, React.DOM.a({href: "#podcasts"}, 
          "Rename Lists"
        ))
      )
    );
  }
});

var CurrentListsTwo = React.createClass({displayName: 'CurrentListsTwo',
  listAction: function(e) {
    listName = $(e.target).text()
    
    var listSelect = _.filter(this.props.lists, function(item) {
       return item.name == listName
    });

    this.props.listAction(listSelect[0].objectId)
  },

  render: function() {
    lists = [] 
    for(i=0;i<this.props.lists.length;i++) {
      lists.push(
        React.DOM.li(null, React.DOM.a({style: {fontWeight:'bold',fontSize:'10px'}, 
               href: "javascript:", 
               onClick: this.listAction}, 
          this.props.lists[i].name))
      )
    }
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: this.props.copyDropdownStyle}, 
        lists
      )
    );
  }
});

var ListDetailButtons = React.createClass({displayName: 'ListDetailButtons',
  // Rename List
  getInitialState: function() {
    return {
      editMode: false
    }
  },
  render: function() {
    //console.log(this.props.currentListObjectId)
    if(!this.state.editMode) {
      stuff = React.DOM.span({className: "", style: listNameStyle}, 
            (this.props.currentListName == "All") ? '' : React.DOM.i({className: "fa fa-bars", style: {fontSize:16, marginTop:-5}}), 
            (this.props.currentListName == "All") ? '' : "   " +this.props.currentListName
              )
    } else {
      stuff = React.DOM.input({className: "form-control", style: {width: 100, float: 'left', height: 24, marginTop: -1}})
    }
    return (

          React.DOM.div(null, 
            React.DOM.h4({style: {margin:0}}, 
              stuff, 
              React.DOM.a({href: "javascript:", 
                style: listBtn, 
                'data-toggle': "modal", 
                id: "renameListBtn", 
                'data-target': ".bs-renameList-modal-sm", 
                className: " btn btn-xs btn-default"}, 
                React.DOM.i({className: "fa fa-pencil"})
              ), 
              React.DOM.a({href: "javascript:", 
                style: listBtn, 
                'data-toggle': "modal", 
                id: "deleteListModal", 
                'data-target': ".bs-deleteList-modal-sm", 
                className: "btn btn-xs btn-default"}, 
                React.DOM.i({className: "fa fa-trash-o"})
              )
            ), 

            RenameListModal({renameList: this.props.renameList}), 
            DeleteListModal({deleteList: this.props.deleteList})
          )
      );
  },

  renameList: function(newListName) {
    this.props.renameList(newListName)
  },

  deleteList: function(){
    this.props.deleteList()
  },

  toggleEdit: function() {
    this.setState({editMode: !this.state.editMode })
  }
});

var CompanyProspectHeader = React.createClass({displayName: 'CompanyProspectHeader',
  render: function() {
    return (
      React.DOM.tr(null, 
        React.DOM.th(null), 
        React.DOM.th({style: {width:300}}, "Name"), 
        React.DOM.th({style: {width:100}}, "Added On"), 
        React.DOM.th(null, "Industry"), 
        React.DOM.th({style: {width:137,display:'none'}}, "# of Prospects"), 
        React.DOM.th({style: {display:'none'}}, "Signals"), 
        React.DOM.th({style: {width:600}}, " "), 
        React.DOM.th(null, " "), 
        React.DOM.th(null, " ")
      )
    );
  }
});

},{"./company.js.min.js":5,"./create_prospect_list_from_company_list.js.min.js":14,"./data_row.js.min.js":17,"./delete_list_modal.js.min.js":19,"./loading_spinner.js.min.js":27,"./messenger.js.min.js":29,"./panel_footing.js.min.js":33,"./rename_list_modal.js.min.js":37,"./side_menu_user_prospects.js.min.js":41,"./user_prospect.js.min.js":52,"./user_prospect_header.js.min.js":53,"./user_side_menu_list.js.min.js":54}],19:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createListModal
  createList: function() {
    console.log($('#listTitle').val())

    data =  {
      'name'        : $('#listTitle').val().trim(),   //Waiting , Running
      'user'        : { '__type':'Pointer',
                      'className':'_User',
                      'objectId':'xWESiw5Smd' },
    }

    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectList',
      type:'POST',
      headers: appConfig.parseHeaders,
      data: JSON.stringify(data),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });

    data.count = 0

    this.props.createList(data)
    
    $('#createListModal').modal('hide')
    $('body').removeClass('modal-open');
    $('.modal-backdrop').remove();
    //$('button.close').click()
  },

  createListButtonClick: function() {
    if($('#listTitle').val().trim() != "")
      this.createList()
  },

  createMiningJob: function(e) {
    e.preventDefault()
    console.log('lmao')
    if($('#listTitle').val().trim() != "")
      this.createList()
  },

  deleteList: function() {
    this.props.deleteList()
  },

  render: function() {
    return (
          React.DOM.div({className: "modal fade bs-deleteList-modal-sm", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "createListModal", style: {top:'200px'}}, 
            React.DOM.div({className: "modal-dialog modal-sm"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-trash-o"}), "  Delete List?")
                ), 
                React.DOM.div({className: "modal-body"}, 
                  React.DOM.form({className: "deleteForm", onSubmit: this.deleteList}, 
                    React.DOM.a({href: "javascript:", 
                      onClick: this.deleteList, 
                      className: "btn btn-danger", 
                      style: {display:'block', width:'100%'}}, 
                      "Delete"
                    ), 
                    React.DOM.br(null), 
                    React.DOM.a({href: "javascript:", 
                      onClick: this.deleteList, 
                      className: "btn btn-default", 
                      style: {display:'block', width:'100%'}}, 
                      "Cancel"
                    )
                  )

                )
              )
            )
          )
    );
  }
});


},{}],20:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {
      name: this.props.initialTemplateValues.name,
      body: this.props.initialTemplateValues.body,
      subject: this.props.initialTemplateValues.subject,
      editMode: this.props.initialTemplateValues.editMode
    }
  },

  componentDidMount: function() {
    console.log('did mount')
    $('.template-body').html(this.state.body)
    if(this.state.editMode) {
      $('.summer').summernote({
        height: 200,
        toolbar: [
          ['style', ['bold', 'italic', 'underline', 'clear']],
          ['font', ['strikethrough']],
          ['fontsize', ['fontsize']],
          ['color', ['color']],
          ['para', ['ul', 'ol', 'paragraph']],
          ['height', ['height']],
        ]
      })
    }

    renderjson.set_show_to_level('all')
    prospect = _.pick(this.props.prospect, 
      'company_name', 'name', 'pos'
    )
    prospect.first_name = prospect.name.split(' ')[0]
    prospect.last_name = _.last(prospect.name.split(' '))
    prospect = _.omit(prospect, 'name')

    document.getElementById("editTemplate").appendChild(renderjson(prospect));
    $('#editTemplateOverlay').html()
    thiss = this;
    $('.renderjson').click(function() {
      thiss.props.toggleTemplateEditMenu()
    })

    $('.renderjson').css({
      'position': 'absolute',
      'z-index': '1000000000',
      'background-color':'rgba(0,0,0,0)',
      'border':'0',
      'color':'white',
      'margin-top':'0px',
      'height': '542px',
      'overflow':'auto',
      'width':'380px'
    })

    $('.key').css({
      'cursor':'pointer'
    })

    $('.timeline').css({
      '-webkit-filter': 'blur(10px)',
    })
    $('#campaign-top-detail').css({
      '-webkit-filter': 'blur(10px)',
    })
  },
  componentWillUnmount:function() {
    $('.timeline').css({
      '-webkit-filter': '',
    })
    $('#campaign-top-detail').css({
      '-webkit-filter': '',
    })
  },

  clickedOverlay: function() {
    console.log('clicked overlay')
    this.props.toggleTemplateEditMenu()
  },

  changeMode: function() {
    // Update template html on toggle
    parse_headers = appConfig.parseHeaders
    if(this.state.editMode){
      $('.summer').destroy();
      $('.timeline').css({
        '-webkit-filter': 'blur(20px)',
      })

      console.log('look at this')
      console.log(name)
      name = (this.props.initialTemplateValues.newTemplate) ? $('#template-name').val() : this.state.name
      this.props.saveTemplate({
        name: name,
        body: $('.summer').code(),
        subject: $('.subject').val(),
      }, this.props.initialTemplateValues.newTemplate)

      this.setState({
        name: $('#template-name').val(),
        body: $('.summer').code(),
        subject: $('.subject').val(),
        editMode: !this.state.editMode,
      })

      objId = this.props.initialTemplateValues.objectId
      $.ajax({
        url:'https://api.parse.com/1/classes/Templates/'+objId,
        type:'PUT',
        headers:parse_headers,
        data:JSON.stringify({body: $('.summer').code(),
                             subject: $('.subject').val()}),
        success: function(res) {
          console.log(res)
        },
        error: function(err) {
          console.log(err)
        }
      });
    } else {
      this.setState({ editMode: !this.state.editMode })
      $('.timeline').css({
        '-webkit-filter': 'blur(20px)',
      })
    }
  },

  componentWillUpdate: function(newProps) {
    console.log('THE NEW PROPS')
    console.log(newProps)
  },

  componentDidUpdate: function() {
    /* thiss = this; */
    console.log('OTHER')
    if(this.state.editMode){
      console.log('CALLED')
      // Replace Subject 
      $('.subject').val(this.state.subject)
      $('#template-name').val(this.state.name)

      $('.summer').summernote({
        height: 200,
        toolbar: [
          ['style', ['bold', 'italic', 'underline', 'clear']],
          ['font', ['strikethrough']],
          ['fontsize', ['fontsize']],
          ['color', ['color']],
          ['para', ['ul', 'ol', 'paragraph']],
          ['height', ['height']],
        ]
      })

      // Initialize Editor with html
      $('.summer').code(this.state.body)
    }
  },


  render: function() {
    subjectPlace = (this.state.editMode) ? React.DOM.input({style: {display:'inline',width:480}, className: "form-control subject"}) : this.state.subject

    if(this.state.editMode){
       toggleButton = React.DOM.a({href: "javascript:", 
             onClick: this.changeMode, 
             className: "btn btn-success btn-xs", 
             style: {display:'block',float:'right',marginTop:5}}, 
            React.DOM.i({className: "fa fa-save"}), "   Save Template")

       if(this.props.initialTemplateValues.newTemplate){
         the_name = React.DOM.input({className: "form-control", 
                           id: "template-name", 
                           style: {float:'left',width:200}})
       }
    } else {
       toggleButton = React.DOM.a({href: "javascript:", 
             onClick: this.changeMode, 
             className: "btn btn-primary btn-xs", 
             style: {display:'block',float:'right',marginTop:5}}, 
            React.DOM.i({className: "fa fa-pencil-square"}), "   Edit Template")

       the_name = React.DOM.h6({style: {float:'left'}}, 
                   React.DOM.i({className: "fa fa-file-text-o"}), " ", 
                   this.state.name
                  )
    }

    return (
      React.DOM.div({id: "editTemplate"}, 
        React.DOM.h5({className: "example-template-title"}, "Example Template Values"), 
        React.DOM.div({className: "example-template-title", 
             style: {marginLeft:215, marginTop:8}}, 
          React.DOM.a({href: "javascript:", 
            className: "btn btn-default btn-xs"}, 
            React.DOM.i({className: "fa fa-chevron-left"})), 
          React.DOM.a({href: "javascript:", 
            style: {marginLeft:5}, 
            className: "btn btn-default btn-xs"}, 
            React.DOM.i({className: "fa fa-chevron-right"}))
        ), 
        React.DOM.div({onClick: this.clickedOverlay, id: "editTemplateOverlay"}), 
          React.DOM.div({id: "editTemplateView", 
               className: "panel panel-default", 
               style: {display:'block'}}, 
               React.DOM.div({className: "panel-heading", style: {height:50}}, 
                 the_name, 
              React.DOM.a({href: "javascript:", 
                className: "btn btn-default btn-xs", 
                style: {float:'right',marginLeft:5,marginTop:5}}, 
                React.DOM.i({className: "fa fa-trash"})
              ), 
              toggleButton
            ), 
            React.DOM.div({className: "panel-body"}, 
              React.DOM.div({className: "editTemplateTitle"}, 
                React.DOM.span(null, "Subject: "), 
                subjectPlace
              ), 
             React.DOM.br(null), 
             React.DOM.div({className: "templateDetails"}, 
               React.DOM.h6({style: {marginBottom:'0'}, className: "text-muted"}, 
                 "Created by Mark on Jul. 21, 2014"
               ), 
               React.DOM.h6({style: {marginTop:'0'}, className: "text-muted"}, 
                 "last updated 7 days ago"
               )
             ), 
            React.DOM.br(null), 
            React.DOM.div({className: "panel panel-default"}, 
              React.DOM.div({className: "panel-body summer template-body"}
              )
            )
        )
      )
    )
    );
  }
});

},{}],21:[function(require,module,exports){
/** @jsx React.DOM */

var Templates = require('./templates.js.min.js');
var Schedules = require('./schedule.js.min.js');
var Campaigns = require('./campaigns.js.min.js');
var SentMail = require('./sent_mail.js.min.js');
var FollowupFeed = require('./followup_feed.js.min.js');
var CampaignDetail = require('./campaign_detail.js.min.js');
var CreateCampaignModal = require('./create_campaign.js.min.js');

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {
      selectedScreen: 'Campaigns',
      selectedCampaign:'',
      prospectLists: [],
      campaigns: []
    }
  },

  componentDidMount: function() {
    thiss = this;
     company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
     qry = 'where={"company":'+company+'}&include=prospect_list,followups,followups.template&order=-createdAt'
     $.ajax({
       url:'https://api.parse.com/1/classes/Campaign',
      headers: appConfig.headers,
      data: qry,
      success: function(res) {
        console.log(res.results)
        thiss.setState({campaigns: res.results})
        // TODO  - Add Get Prospect List Count
        // Follow Up Feed Feature
        // - Shows what stages different prospects are at and whether you 
        //   should send a follow up to them.
        // How to get the stage of Prospect List
        // - Where to persist last email sent
        // - What is stored at the campaign level
        // - What is stored at the prospect level
        // - Timeline (General 7 x 7 cadences)
        //   - 
        // - Rules (Sankey / Flow View)
        //   - Shows all or only the ones that havent responded 
        //   - Show all the ones hthat haven't replied
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
     });
    $.ajax({
      url: 'https://api.parse.com/1/classes/ProspectList',
      headers: appConfig.headers,
      // TODO
      // - Company Specific
      success: function(res) {
        thiss.setState({prospectLists: res.results})
      },
      error: function(err) {

      }
    })


  },
  
  toggleScreen: function(screen) {
    this.setState({selectedScreen : screen})
  },

  changeSelectedCampaign: function(screen, selectedCampaign) {
    console.log(selectedCampaign)
    this.setState({
      selectedCampaign : selectedCampaign,
      selectedScreen: screen,
    })
  },

  render: function() {
    thiss = this
    console.log(this.state.selectedCampaign)
    console.log(this.state.selectedScreen)
    console.log(this.state.campaigns)
    switch (this.state.selectedScreen){
      case 'Campaigns':
        CurrentScreen = Campaigns({campaigns: thiss.state.campaigns, 
                            changeSelectedCampaign: thiss.changeSelectedCampaign, 
                            toggleScreen: thiss.toggleScreen})
        break;
      case 'CampaignDetail':
        CurrentScreen = CampaignDetail({
                        selectedCampaign: thiss.state.selectedCampaign, 
                      selectedCampaignObjectId: thiss.state.selectedCampaginObjectId, 
                        toggleScreen: thiss.toggleScreen})
        break;
      case 'Templates':
        CurrentScreen = Templates(null)
        break;
      case 'Overview':
        CurrentScreen = Campaigns({campaigns: thiss.state.campaigns, 
                            changeSelectedCampaign: thiss.changeSelectedCampaign, 
                            toggleScreen: thiss.toggleScreen})
        break;
      case 'Sent Mail':
        CurrentScreen = SentMail(null)
        break;
      case 'Followup Feed':
        CurrentScreen = FollowupFeed(null)
        break;
      case 'Schedules':
        CurrentScreen = Schedules(null)
        break;
    }

    return (
      React.DOM.div({className: "", style: {height:'550px'}}, 
        React.DOM.div({className: "container", style: {padding:'0',width:'100%',height:'100%'}}, 
          SideMenu({
                createCampaign: this.createCampaign, 
                prospectLists: this.state.prospectLists, 
                toggleScreen: this.toggleScreen}), 
              React.DOM.div({className: "col-md-10", 
                   style: {padding:'0',height:'100%'}}, 
            CurrentScreen
          )
        )
      )
    );
  },

  persistCampaign: function(newCampaign) {
    Campaign = {}
    Campaign.name = newCampaign.name
    Campaign.company = JSON.parse(localStorage.currentUser).company
    thiss = this;

    $.ajax({
      url:'https://api.parse.com/1/classes/Campaign',
      type:'POST',
      headers:appConfig.headers,
      data:JSON.stringify(Campaign),
      success: function(res) {
        the_campaign = _.find(thiss.state.campaigns, function(campaign){
          first = campaign.name == newCampaign.name 
          second = campaign.prospect_list == newCampaign.prospect_list
          return first && second
        })
        console.log(res)
        console.log(res.objectId)

        the_campaign.objectId = res.objectId
        campaigns = _.filter(thiss.state.campaigns, function(campaign){
          first = campaign.name == newCampaign.name 
          second = campaign.prospect_list == newCampaign.prospect_list
          return !(first && second)
        })
        campaigns.push(the_campaign)
        console.log(campaigns)

        thiss.setState({campaigns:  campaigns})

        $.ajax({
          url:'https://api.parse.com/1/classes/Campaign/'+res.objectId,
          type:'PUT',
          data: JSON.stringify({prospect_list:{
            '__type':'Pointer',
            'className':'ProspectList',
            'objectId':newCampaign.prospect_list.objectId,
          }}),
          headers:appConfig.headers,
          success: function(res){
          },
          error: function() {

          }
        })
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  createCampaign: function(newCampaign) {
    campaigns = this.state.campaigns
    campaigns.push(newCampaign)
    this.setState({campaigns: campaigns})
    console.log(newCampaign)

    $('.modal').click()
    $('.modal-backdrop').click()

    this.persistCampaign(newCampaign)
  }
});

var SideMenu = React.createClass({displayName: 'SideMenu',
  toggleScreen: function(e) {
    this.props.toggleScreen($(e.target).text().trim())
  },

  /*
    <button type="button" className="sharp btn btn-default" onClick={this.toggleScreen}>
      <i className="fa fa-file-text" /> &nbsp; Templates
    </button>
    <button type="button" className="sharp btn btn-default" onClick={this.toggleScreen}>
      <i className="fa fa-clock-o" /> &nbsp; Schedules
    </button>
  */
  createCampaignModal: function() {

  },

  render: function() {
    return (
      React.DOM.div({className: "col-md-2", 
        style: {padding:'0',height:'100%', backgroundColor:'rgb(90, 107, 119)',borderBottomLeftRadius:'3px'}}, 
        React.DOM.div({className: "btn-group-vertical", style: {width:'100%'}}, 
          React.DOM.button({type: "button", 
                  className: "sharp btn btn-default", 
                  onClick: this.toggleScreen}, 
            React.DOM.span({style: {marginLeft:'27px'}}, "Overview")
          ), 
          React.DOM.button({type: "button", 
                  className: "sharp btn btn-default", 
                  onClick: this.toggleScreen}, 
            React.DOM.i({className: "fa fa-newspaper-o"}), "  ",  
            React.DOM.span({style: {marginLeft:'4px'}}, "Followup Feed")
          ), 
          React.DOM.button({type: "button", style: {display:'none'}, 
                  className: "sharp btn btn-default"}, 
            React.DOM.i({className: "fa fa-code-fork"}), "  ",  
            React.DOM.span({style: {marginLeft:'4px'}}, "Rules")
          ), 
          React.DOM.button({type: "button", style: {display:'none'}, 
                  className: "sharp btn btn-default", onClick: this.toggleScreen}, 
            React.DOM.i({className: "fa fa-pie-chart"}), "   Analytics"
          ), 
          React.DOM.button({type: "button", 
                  className: "sharp btn btn-default", 
                  onClick: this.toggleScreen}, 
            React.DOM.i({className: "fa fa-paper-plane"}), "   Sent Mail"
          )
        ), 

        React.DOM.div({className: "", style: {width:'100%',textAlign:'center',marginTop:100}}, 
          React.DOM.a({href: "javascript:", className: "btn btn-primary new-list-btn", 
                'data-toggle': "modal", 'data-target': ".bs-createCampaign-modal-sm", 
                style: { backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
            React.DOM.i({className: "fa fa-plus-circle"}), "  New Campaign"
          )
        ), 
        CreateCampaignModal({prospectLists: this.props.prospectLists, 
                             createCampaign: this.createCampaign})
      )
    );
  },

  createCampaign: function(newCampaign) {
    this.props.createCampaign(newCampaign)
  }
});

},{"./campaign_detail.js.min.js":3,"./campaigns.js.min.js":4,"./create_campaign.js.min.js":8,"./followup_feed.js.min.js":22,"./schedule.js.min.js":38,"./sent_mail.js.min.js":40,"./templates.js.min.js":49}],22:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // FollowupFeed
  getInitialState: function() {
    return {
      scheduledFollowups: []
    }
  },


  render: function() {
    scheduledFollowups = []
    for(i=0;i< this.state.scheduledFollowups.length; i++){ 
      scheduledFollowups.push(ScheduledFollowupRow(null))
    }

    return (
      React.DOM.div({style: {overflow:'auto', height:550}}, 
        React.DOM.table({className: "table table-striped", style: {marginBottom:0}}, 
          React.DOM.thead(null, 
            React.DOM.th(null), 
            React.DOM.th(null, "Prospect Name"), 
            React.DOM.th(null, "Prospect Email"), 
            React.DOM.th({style: {textAlign:'center'}}, "Status")
          ), 
          React.DOM.tbody(null, 
            scheduledFollowups
          )
        )
      )
    );
  }
});

var ScheduledFollowupRow = React.createClass({displayName: 'ScheduledFollowupRow',
  render: function() {
    return (
      React.DOM.tr(null

      )
    );
  }
})

},{}],23:[function(require,module,exports){
/** @jsx React.DOM */
var SendEmailModal = require('./send_email_modal.js.min.js')
var TimelineDayElement = require('./timeline_day_element.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  // FollowupTimeline
  getInitialState: function() {
    initialFollowups = this.props.initialFollowups
    initialFollowups = (initialFollowups) ? initialFollowups : []

    return {
      followups: initialFollowups,
      loading: false,
      currentTemplate:''
    }
  },

  componentDidMount: function() {
    thiss = this;
    $('.day').tooltip({
      placement: 'right',
      title:'+ Add a follow-up'
    })
    // Followups that belong to campaign
     company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
     currentCampaign = {
       '__type': 'Pointer',
       'className':'Campaign',
       'objectId':this.props.currentCampaign.objectId
     }
     currentCampaign = JSON.stringify(currentCampaign)
     //qry = 'where={"company":'+company+',"campaign":'+currentCampaign+'}&include=template'
     qry = 'where={"campaign":'+currentCampaign+'}&include=template'
     //qry = 'where={"campaign":'+currentCampaign+'}'
     $.ajax({
       url:'https://api.parse.com/1/classes/Followup',
       type:'GET',
       headers: appConfig.headers,
       data: qry,
       success: function(res) {
         console.log('followup timeline')
         console.log(res.results)
       },
       error: function(err) {
         console.log('error')
         console.log(err)
       }
     })
  },
  
  render: function() {
    batches =  _.countBy(this.props.prospects, 
                      function(prospect) { return prospect.last_contacted })

    timelineElements = []
    followups = (this.state.followups) ? this.state.followups : []
    console.log(followups)
    for(i=0;i< 31;i++){
      batchCount = (batches[i]) ? batches[i] : 0
      
      addTemplateMode = false; 
      currentTemplate = false;
      elementType = false
      for(ii=0;ii< followups.length; ii++){
        // TODO - Replace with underscore method
        //console.log('FOLLOWUPS ERROR')
        //console.log(followups)
        elementType = i == followups[ii].day
        if(elementType) {
          addTemplateMode = (followups[ii].addTemplateMode) ? true : false
          currentTemplate = followups[ii].template
          break
        }
      }

      timelineElements.push(TimelineDayElement({
                              dayCount: i, 
                              templates: this.props.templates, 
                              currentTemplate: currentTemplate, 
                              batchCount: batchCount, 
                              addTemplateMode: addTemplateMode, 
                              elementType: !elementType, 
                              addFollowup: this.addFollowup, 
                              editFollowup: this.editFollowup, 
                              saveFollowup: this.saveFollowup, 
                              removeFollowup: this.removeFollowup, 
                              setCurrentTemplate: this.setCurrentTemplate}))
    }
    return (
      React.DOM.div(null, 
        React.DOM.div({className: "timeline", 
             style: {height:'100%',backgroundColor:'rgb(90, 107, 119)',
                     width:5,marginTop:-35}}, 
             timelineElements
        ), 
        SendEmailModal({prospects: this.props.prospects, 
                        currentTemplate: this.state.currentTemplate})
      )
    );
  },

  createFollowup: function() {
    //
  },         

  addFollowup: function(day) {
    //console.log('called template edit menu')
    followups = this.state.followups
    followups.push({addTemplateMode: true, day: day})
    this.setState({
      followups: followups
    })
  },

  editFollowup: function(day) {
    // find template set editmode is false
    for(i=0;i< this.state.followups.length; i++){
      if(this.state.followups[i].day == day){
        break
      }
    }

    followups = this.state.followups
    followups[i].addTemplateMode = true
    this.setState({followups: followups})
  },

  saveFollowup: function(day, chosenTemplate) {
    new_followups = this.state.followups
    new_followups[day].addTemplateMode = false
    new_followups[day].template = chosenTemplate

    this.setState({followups: new_followups})

    if(new_followups[day].objectId){
      url = "/"+new_followups[i].objectId; type="PUT"

      data = {template:{
        __type:'Pointer',
        className:'Template',
        objectId: chosenTemplate.objectId
      }}
    } else {
      url = ""; type="POST";

      data = {
        day: day,
        campaign: {
          __type: 'Pointer',
          className:'Campaign',
          objectId: this.props.currentCampaign.objectId
        },
        template: {
          __type: 'Pointer',
          className:'Template',
          objectId:chosenTemplate.objectId,
        }
      }
    }

    thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/classes/Followup',
      type:type,
      data:JSON.stringify(data),
      headers:appConfig.headers,
      success: function(res) {
        
        new_followups[day].objectId = res.objectId
        thiss.setState({followups: new_followups})

        console.log(res)
        $.ajax({
          url:'https://api.parse.com/1/classes/Campaign/'+thiss.props.currentCampaign.objectId,
          type:'PUT',
          data:JSON.stringify({followups: {
            __op: 'AddUnique',
            objects:[{
              __type:'Pointer', 
              className:'Followup',
              objectId:res.objectId
            }]
          }}),
          headers:appConfig.headers,
          success: function() {
          },
          error: function() {
          }
        })
      },
      error: function() {

      },
    })
  },

  removeFollowup: function(day) {
    followups = []
    for(i=0;i< this.state.followups.length;i++)
      if(this.state.followups[i].day != day)
        followups.push(this.state.followups[i])
      
    for(i=0;i< this.state.followups.length;i++)
      if(this.state.followups[i].day == day)
        break
    
    this.setState({followups: followups}) 
    id = this.state.followups[i]

    thiss = this;
    if(id) {
      id = id.objectId
      $.ajax({
        url:'https://api.parse.com/1/classes/Followup/'+id,
        headers:appConfig.headers,
        type:'DELETE',
        success: function(res) {
          console.log(res)
        }
      })

     console.log('REMOVE ARRAY')
      $.ajax({
        url:'https://api.parse.com/1/classes/Campaign/'+thiss.props.currentCampaign.objectId,
        headers:appConfig.headers,
        type:'PUT',
        data: JSON.stringify({
          followups: {
            __op : 'Remove',
            objects: [{
              __type: 'Pointer',
              className: 'Followup',
              objectId: id
            }]
          }
        }),
        success: function(res){
          console.log(res)
        },
        error: function() {
        }
      })
    }
  },

  setCurrentTemplate: function(template) {
    this.setState({currentTemplate: template })
  }
});



},{"./send_email_modal.js.min.js":39,"./timeline_day_element.js.min.js":51}],24:[function(require,module,exports){
/** @jsx React.DOM */

data = require('../lib/data.min.js') 

module.exports = React.createClass({displayName: 'exports',
  // free trial
  open: function() {
    console.log('open')
    handler.open({
      name: 'Customero',
      description: 'Get 900 free email credits!',
      amount: 0,
      panelLabel: "Start Your Free Trial!",
      open: function() {
        console.log($('.close'))
        $('.close').hide()
      },
      closed: function() {
        console.log("closed")
      }
    });
  },

  componentDidMount: function() {
    $('body').css({overflow:'hidden'})


    //console.log(this.getDOMNode())
    /*
    $(this.getDOMNode()).append(' <form action="" method="POST"> <script src="https://checkout.stripe.com/checkout.js" class="stripe-button" data-key="pk_test_4T5Pftl4ho0EgFVo1G7OKRda" data-amount="2000" data-name="Demo Site" data-description="2 widgets ($20.00)" data-image=""> </script> </form>')

  setTimeout(function() {
    console.log($('.stripe-button-el').html())
    $('.stripe-button-el').click()

  }, 400)
*/

  },

  render: function() { 
  data = data()
    imgs_1 = []
    imgs_2 = []
    for(i=0;i < 120; i++) {
      imgs_1.push(React.DOM.img({src: data[i], className: "prospect-img"}))
    }
    for(i=15;i < 30; i++) {
      imgs_2.push(React.DOM.img({src: data[i], className: "prospect-img"}))
    }

  console.log(data)
    return (
      React.DOM.div(null, 
      React.DOM.div({id: "signup"}, " "), 

      React.DOM.div(null, 
        React.DOM.h1({className: "title"}, "Customero."), 
        React.DOM.h5({className: "tagline"}, "Get 900 free email credits. 100% refund guarantee.  We will only start charging your card after 1 month.")

      ), 

      React.DOM.div({id: "", style: {position:'absolute',zIndex:'-2',top:0,left:0}}, 
        React.DOM.div({className: "", style: {marginLeft:34}}, 
        imgs_1, 
        imgs_2
        )
      )
      )
    )
  }
});

},{"../lib/data.min.js":55}],25:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Landing Page
  login: function() {
    console.log('login')
    email = $('#email').val()
    password = $('#password').val()
    p = {"X-Parse-Application-Id": "N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ",
         "X-Parse-REST-API-Key": "VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb"}
    $.ajax({
      url:'https://api.parse.com/1/login',
      headers: p,
      type:'GET',
      data: {
        'username':email,
        'password':password
      },
      success:function(res) {
        localStorage.setItem('currentUser', JSON.stringify(res))
        location.href = "#"
      },
      error: function(res) {
        console.log(res)
      }
    });
  },

  render: function() {
    $('body').css({overflow:'auto'})

    return (
      React.DOM.div({className: ""}, 
        React.DOM.div({className: "background-image"}), 
        React.DOM.nav({className: "thenavbar navbar navbar-default navbar-fixed-top", role: "navigation"}, 
          React.DOM.div({className: "container-fluid"}, 
            React.DOM.a({className: "the-title tk-foco brand navbar-brand", style: {fontWeight:'100'}, 
                href: "#"}, 
              "Customero", 
              React.DOM.span({style: {fontSize:'22px',marginLeft:'30px'}}, "Supercharge your sales! ")
            )
          ), 
          React.DOM.a({href: "#login", className: "btn-lg btn login-btn"}, "Log In")
        ), 
        React.DOM.div({className: "col-md-12", style: {marginTop:'100px',paddingTop:'100px'}}, 
          React.DOM.h1({style: {color:'#1ca3fd',fontWeight:'bold',textAlign:'center',fontSize:'56px'}}, " Generate High Quality Prospect Lists "), 
          React.DOM.h1({style: {color:'#1ca3fd',fontWeight:'100',textAlign:'center',fontSize:'56px'}}, " Accelerate Sales "), 
          React.DOM.a({href: "#signup", className: "btn-lg btn-success btn start-trial"}, "Start Your Free Trial Today"), 

          React.DOM.div({className: "panel panel-default", style: {display:'none'}}, 
          React.DOM.div({className: "panel-heading"}, " "), 
            React.DOM.div({className: "panel-body"}, 
              React.DOM.form({onSubmit: this.login}, 
              React.DOM.input({placeholder: "Email", id: "email", type: "text", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Password", type: "password", id: "password", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.a({href: "javascript:", onClick: this.login, className: "btn btn-success btn-lg", style: {display:'block',backgroundColor:'#1ca3fd'}}, "Log In")
              )
            ), 
          React.DOM.div({className: "panel-footer"}, " ")
          )
        ), 
        React.DOM.div({className: "gradient"}, " ")
      )
    );
  }
});

},{}],26:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Landing Page
  login: function() {
    console.log('login')
    email = $('#email').val()
    password = $('#password').val()
    p = {"X-Parse-Application-Id": "N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ",
         "X-Parse-REST-API-Key": "VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb"}
    $.ajax({
      url:'https://api.parse.com/1/login',
      headers: p,
      type:'GET',
      data: {
        'username':email,
        'password':password
      },
      success:function(res) {
        localStorage.setItem('currentUser', JSON.stringify(res))
        location.href = "#"
      },
      error: function(res) {
        console.log(res)
      }
    });
  },

  render: function() {
    $('body').css({overflow:'auto'})

    return (
      React.DOM.div({className: ""}, 
        React.DOM.div({className: "background-image"}), 
        React.DOM.nav({className: "thenavbar navbar navbar-default navbar-fixed-top", role: "navigation"}, 
          React.DOM.div({className: "container-fluid"}, 
            React.DOM.img({className: "network-logo", src: "build/img/network.png"}), 
            React.DOM.a({className: "the-title tk-foco brand navbar-brand", style: {fontWeight:'100'}, 
                href: "#"}, 
              "Customero", 
              React.DOM.span({style: {fontSize:'20px',marginLeft:'30px',fontFamily:'Open Sans'}}, "Social Prospecting On Steroids ")
            )
          ), 
          React.DOM.a({href: "#login", className: "btn-lg btn login-btn", style: {fontFamily:'proxima-nova'}}, "LOG IN")
        ), 

        React.DOM.div({className: "col-md-7 col-sm-7", style: {marginTop:'100px',paddingTop:'80px'}}, 
          React.DOM.h1({style: {color:'#1ca3fd',fontWeight:'100',color:'white',textAlign:'center',fontSize:'38px',fontFamily:'Open Sans',fontSize:'40px'}}, " Generate High Quality Prospect Lists "), 
          React.DOM.h1({style: {color:'#1ca3fd',fontWeight:'100',textAlign:'center',color:'white',fontSize:'46px',fontFamily:'Open Sans', fontStyle:'italic'}}, " Accelerate Sales "), 
          React.DOM.a({href: "#signup", className: "btn-lg btn-success btn start-trial"}, "Start Your Free Trial Today"), 

          React.DOM.div({className: "panel panel-default", style: {display:'none'}}, 
          React.DOM.div({className: "panel-heading"}, " "), 
            React.DOM.div({className: "panel-body"}, 
              React.DOM.form({onSubmit: this.login}, 
              React.DOM.input({placeholder: "Email", id: "email", type: "text", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Password", type: "password", id: "password", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.a({href: "javascript:", onClick: this.login, className: "btn btn-success btn-lg", style: {display:'block',backgroundColor:'#1ca3fd'}}, "Log In")
              )
            ), 
          React.DOM.div({className: "panel-footer"}, " ")
          )
        ), 
        React.DOM.div({className: "gradient"}, " "), 

        React.DOM.div({className: "col-md-5 col-sm-5", id: "network-picture", 
             style: {height:500,backgroundImage:"url('build/img/network_icon_1.png')"}}
        )
      )
    );
  }
});

},{}],27:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // LoadingSpinner
  render: function() {
    return (
    React.DOM.div({className: "spinner", style: {marginTop:'180px'}}, 
      React.DOM.div({className: "spinner-container container1"}, 
        React.DOM.div({className: "circle circle1"}), 
        React.DOM.div({className: "circle circle2"}), 
        React.DOM.div({className: "circle circle3"}), 
        React.DOM.div({className: "circle circle4"})
      ), 
      React.DOM.div({className: "spinner-container container2"}, 
        React.DOM.div({className: "circle circle1"}), 
        React.DOM.div({className: "circle circle2"}), 
        React.DOM.div({className: "circle circle3"}), 
        React.DOM.div({className: "circle circle4"})
      ), 
      React.DOM.div({className: "spinner-container container3"}, 
        React.DOM.div({className: "circle circle1"}), 
        React.DOM.div({className: "circle circle2"}), 
        React.DOM.div({className: "circle circle3"}), 
        React.DOM.div({className: "circle circle4"})
      )
    )
    )
  }
});

},{}],28:[function(require,module,exports){
/** @jsx React.DOM */

theData = require('../lib/data.min.js') 

module.exports = React.createClass({displayName: 'exports',
  // SignUp
  componentDidMount: function() {
    $('body').css({overflow:'hidden'})
  },

  login: function() {
    console.log('login')
    email = $('#email').val()
    password = $('#password').val()
    p = {"X-Parse-Application-Id": "N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ",
         "X-Parse-REST-API-Key": "VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb"}
    $.ajax({
      url:'https://api.parse.com/1/login',
      headers: p,
      type:'GET',
      data: {
        'username':email,
        'password':password
      },
      success:function(res) {
        localStorage.setItem('currentUser', JSON.stringify(res))
        location.href = "#"
      },
      error: function(res) {
        console.log(res)
      }
    });
  },

  render: function() { 
    data = theData()
    imgs_1 = []
    imgs_2 = []
    for(i=0;i < 120; i++) {
      imgs_1.push(React.DOM.img({src: data[i], className: "prospect-img"}))
    }
    for(i=15;i < 30; i++) {
      imgs_2.push(React.DOM.img({src: data[i], className: "prospect-img"}))
    }

  console.log(data)
    return (
      React.DOM.div(null, 
      React.DOM.div({id: "signup"}, " "), 
      React.DOM.div(null, 
        React.DOM.h1({className: "title"}, "Customero."), 
        React.DOM.h5({className: "tagline"}, "Generate high quality prospect lists. Accelerate Sales."), 
          React.DOM.div({className: "panel panel-default login-info", style: {display:'block'}}, 
            React.DOM.div({className: "panel-body"}, 
              React.DOM.form({onSubmit: this.login}, 
              React.DOM.input({placeholder: "Email", id: "email", type: "text", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Password", type: "password", id: "password", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.a({href: "javascript:", onClick: this.login, className: "btn btn-success btn-lg", style: {display:'block',backgroundColor:'#1ca3fd'}}, "Log In")
              )
            )
          )
      ), 

        React.DOM.div({id: "", style: {position:'absolute',zIndex:'-2',top:0,left:0}}, 
          React.DOM.div({className: "", style: {marginLeft:34, display:'none'}}, 
          imgs_1, 
          imgs_2
          )
        )
      )
    )
  }
});

},{"../lib/data.min.js":55}],29:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  //Messenger
  render: function() {
    return (
        React.DOM.div({className: "alert alert-success", 
             'data-alert': "alert", 
             style: {position:'absolute',
                     top: 31, 
                     right:30, 
                     display:'none',
                     width:200}}, 
                     React.DOM.a({className: "close", 
                       href: "javascript:", 
                       onClick: this.hideAlert}, "×"), 
            "Test"
        )
    );
  }
});

},{}],30:[function(require,module,exports){
/** @jsx React.DOM */

var LoadingSpinner = require('./loading_spinner.js.min.js')

var Job = React.createClass({displayName: 'Job',
  startJob: function() {
    // Add Linkedin Locations
    // Email When Completed
    // Have Report For Number of Profiles Found / number of emails found per mining job
    
    miningJob = this.props.miningJob
    miningJob.status = "Running"
    miningJob.last_ran = Math.round(+new Date()/1000)

    $.ajax({
      url: 'https://api.parse.com/1/classes/MiningJob/'+miningJob.objectId,
      type:'PUT',
      headers: appConfig.parseHeaders,
      // status should be waiting
      data : JSON.stringify({'status':'Running', 'last_ran':Math.round(+new Date()/1000)+"" }),
      success: function(res) {
        console.log(res)
        // make request to heroku api
        $.ajax({
          //url: 'https://0.0.0.0:5000/mining_job' ,
          url: 'http://agile-plains-2430.herokuapp.com/mining_job' ,
          //type:'POST',
          crossDomain: true,
          data:{'locale':miningJob.locale, 
                'current_title':miningJob.prospect_title,
                'current_user_id':JSON.parse(localStorage.currentUser).objectId,
                'company_id':JSON.parse(localStorage.currentUser).company.objectId,
                'mining_job_id':miningJob.objectId},
          success: function(res) {
            console.log(res)
          },
          error: function(err) {
            console.log(err)
          }
        })
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });

    this.setState({miningJob: miningJob})
  },

  deleteJob: function() {
    //console.log(this.state.miningJob)
    this.props.deleteJob(this.state.miningJob)
      /*
    $.ajax({
      url: 'https://api.parse.com/1/classes/MiningJob/'+this.state.miningJob.objectId,
      type:'DELETE',
      headers: appConfig.parseHeaders,
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });
      */
  },

  cancelJob: function() {
    miningJob = this.state.miningJob
    miningJob.status = ""

    $.ajax({
      url: 'https://api.parse.com/1/classes/MiningJob/'+miningJob.objectId,
      type:'PUT',
      headers: appConfig.parseHeaders,
      data : JSON.stringify({'status':''}),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });
    this.setState({miningJob: miningJob})
  },

  render: function(){
    miningJob = this.props.miningJob
    button = (miningJob.status == "") ? React.DOM.a({href: "javascript:", className: "btn btn-xs btn-success", onClick: this.startJob}, " ", React.DOM.i({className: "fa fa-check"}), " Run ") : React.DOM.a({href: "javascript:", className: "btn btn-xs btn-danger", onClick: this.cancelJob}, " ", React.DOM.i({className: "fa fa-times"}), " Cancel ")

    disabled = ""
    disabled_trash = ""
    /*
    disabled = (miningJob.status == "") ? "btn btn-xs btn-success" : "btn btn-xs btn-success disabled"
    disabled_trash = (miningJob.status == "") ? "btn btn-xs btn-default" :  "btn btn-xs btn-default disabled"
    button = <a href="javascript:" className={disabled} onClick={this.startJob}> <i className="fa fa-check" />&nbsp;Run </a> 
    */

    //console.log(miningJob)
    return (
      React.DOM.tr(null, 
        React.DOM.td(null, React.DOM.h6(null, miningJob.prospect_title)), 
        React.DOM.td(null, React.DOM.h6(null, miningJob.locale)), 
        React.DOM.td(null, React.DOM.h6(null, (miningJob.last_ran == "" ) ? "----" : moment.unix(miningJob.last_ran).fromNow())), 
        React.DOM.td(null, 
          React.DOM.span({className: "badge"}, 
            (miningJob.results == "") ? 0 : miningJob.results
          ), " ",  
          React.DOM.h6({style: {display:'inline-block'}}, "profiles found")
        ), 
        React.DOM.td({style: {paddingTop:'12px'}}, 
          React.DOM.span({className: (miningJob.status == "" ) ? "label label-primary" : "label label-success"}, 
            (miningJob.status == "") ? "Ready" : miningJob.status
          )
        ), 
        React.DOM.td({style: {paddingTop:'13px',width:'105px'}}, 
          button, 
          " ", 
          React.DOM.a({href: "javascript:", className: disabled_trash, 
                  onClick: this.deleteJob}, 
            React.DOM.i({className: "fa fa-trash-o"})
          )
        )
      )
    );
  }
});


module.exports = React.createClass({displayName: 'exports',
  // Mining Jobs
  //{(prospects.length == 0 && this.state.loading == false) ? <EmptyCompanyProspectsPanel /> : ""}
  getInitialState: function() {
    return { 
      miningJobs : [],
      loading    : true
    }
  },

  deleteJob: function(job) {
    //console.log(job.objectId)
    var filtered = _.filter(this.state.miningJobs, function(item) {
       console.log(item.objectId != job.objectId)
       return item.objectId != job.objectId
    });
    //console.log(filtered)
    this.setState({miningJobs: filtered})
  },

  render: function () {
    //console.log('render')
    miningJobs = []
    for(i=0;i<this.state.miningJobs.length;i++){
      miningJob = this.state.miningJobs[i]
      miningJobs.push(
        Job({deleteJob: this.deleteJob, miningJob: miningJob})
      )
    }

    return (
      React.DOM.div(null, 
      React.DOM.div({className: "mining-job-toolbar container", style: {width:'100%'}}, 
        React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", 'data-toggle': "modal", 'data-target': ".bs-example-modal-sm"}, 
          React.DOM.i({className: "fa fa-plus"}), "   Find Prospects By Title and Area"
        ), 
        "   ", 
        React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs disabled", 'data-toggle': "modal", 'data-target': ".bs-example-modal-sm"}, 
          React.DOM.i({className: "fa fa-plus"}), "   Find Companies Hiring For Roles"
        ), 
        "   ", 
        React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs disabled", 'data-toggle': "modal", 'data-target': ".bs-example-modal-sm"}, 
          React.DOM.i({className: "fa fa-plus"}), "   Find Companies Who Just Raised Funding"
        ), 
        "   ", 
        React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs disabled", 'data-toggle': "modal", 'data-target': ".bs-example-modal-sm"}, 
          React.DOM.i({className: "fa fa-plus"}), "   Find Companies By Industy And Area"
        ), 
        "   ", 
        React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs disabled", 'data-toggle': "modal", 'data-target': ".bs-example-modal-sm"}, 
          React.DOM.i({className: "fa fa-plus"}), "   Press Coverage"
        )
    ), 
      React.DOM.div({id: "autoscroll", style: {height:'400px',overflow:'auto'}}, 
        React.DOM.table({className: "table table-striped"}, 
          React.DOM.thead(null, 
            React.DOM.th(null, "Job Title"), 
            React.DOM.th(null, "City"), 
            React.DOM.th(null, "Last Ran"), 
            React.DOM.th(null, "Results"), 
            React.DOM.th(null, "Status"), 
            React.DOM.th(null, " ")
          ), 
          React.DOM.tbody(null, 
            miningJobs
          )
        ), 
          (this.state.loading) ? LoadingSpinner(null) : "", 
        createJobModal({createJob: this.createJob})
      )
      )
    );
  },
  
  runMiningJob: function() {

  },

  createJob: function(data) {
    miningJobs = this.state.miningJobs
    miningJobs.push(data)
    this.setState({ miningJobs: miningJobs })

    $('#miningJobModal').modal('hide')
    $('body').removeClass('modal-open');
    $('.modal-backdrop').remove();
  },

  componentDidMount: function() {
    console.log('this did mount')
    thiss = this;
    qry = 'where={"company":'+company+'}&count=1&order=-createdAt'
    $.ajax({
      url:'https://api.parse.com/1/classes/MiningJob',
      type:'GET',
      headers: appConfig.parseHeaders,
      data: qry,
      success: function(res) {
        thiss.setState({miningJobs : res.results})
        thiss.setState({loading    : false})
        console.log(res)
      },
      error: function(err) {
        console.log(err)
      }
    });
  }

});

var createJobModal = React.createClass({displayName: 'createJobModal',
  createMiningJob: function() {
    console.log('mining job')
    console.log($('#prospectTitle').val())
    console.log($('#locale').val())

    data =  {
      'prospect_title': $('#prospectTitle').val(),
      'locale'        : $('#locale').val(),
      'last_ran'      : '',
      'results'       : '',
      'status'        : '',   //Waiting , Running
    }
    //  update local jobs state
    $.ajax({
      url:'https://api.parse.com/1/classes/MiningJob',
      type:'POST',
      headers: appConfig.parseHeaders,
      data: JSON.stringify(data),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });

    this.props.createJob(data)
    
    //$('button.close').click()
  },

  render: function() {
    return (
          React.DOM.div({className: "modal fade bs-example-modal-sm", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "miningJobModal", style: {top:'200px'}}, 
            React.DOM.div({className: "modal-dialog modal-sm"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-bolt"}), "  Create Mining Job")
                ), 
                React.DOM.div({className: "modal-body"}, 
                  React.DOM.form({onSubmit: this.createMiningJob}, 
                    React.DOM.input({id: "prospectTitle", type: "text", placeholder: "Enter prospect title...", className: "form-control"}), 
                    React.DOM.br(null), 
                    React.DOM.input({id: "locale", type: "text", placeholder: "Enter City Area...", className: "form-control"}), 
                    React.DOM.br(null), 
                    React.DOM.a({href: "javascript:", onClick: this.createMiningJob, placeholder: "Enter City Area...", className: "btn btn-success", style: {display:'block', width:'100%'}}, "Start Mining!")
                  )

                )
              )
            )
          )
    );
  }
});

var EmptyMiningJob = React.createClass({displayName: 'EmptyMiningJob',
  render: function() {
    return (
      React.DOM.div({className: "col-md-offset-3 col-md-6", style: {height:400}}, 
      React.DOM.div({className: "panel panel-default", style: {marginTop:100,height:200}}, 
        React.DOM.div({className: "panel-body"}, 
          React.DOM.h1({className: "lead", style: {textAlign:'center'}}, "Start Prospecting On Linkedin"), 
          React.DOM.a({href: "javascript:", onClick: this.openLinkedinWindow, className: "btn btn-success", style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%) !important',display:'block',marginRight:'auto',marginLeft:'auto',width:200, marginTop:50}}, 
            React.DOM.i({className: "fa fa-search"}), "  " + ' ' +
            "Search for companies!")
        )
      )
    )
    );
  }
});

},{"./loading_spinner.js.min.js":27}],31:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // MiningJobCalendar
  getInitialState: function() {
    return {
      reports : []
    }
  },

  getSignalReport: function() {
    thissss = this;
    profile = JSON.stringify({profile: appConfig.pointer('ProspectProfile',
                                          this.props.currentProfile.objectId)})
    $.ajax({
      url: 'https://api.parse.com/1/classes/SignalReport?order=-createdAt',
      type:'GET',
      data: {where: profile},
      headers:appConfig.parseHeaders,
      success: function(res) {
        thissss.setState({reports: res.results})
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  getResults: function() {
    thissss = this;
    profile = JSON.stringify({profile: appConfig.pointer('ProspectProfile',
                                          this.props.currentProfile.objectId)})
    console.log(this.props)
    theProfile = this.props.currentProfile
    $.ajax({
      url: 'https://api.parse.com/1/classes/PeopleSignal',
      type:'GET',
      data: {where: profile, order: '-createdAt',count:true},
      headers:appConfig.parseHeaders,
      success: function(res) {
        // divide results into groups of 100
        // schedule them for 1 intervals
        number_of_reports = Math.ceil(res.count/100)
        reports = []
        for(i=0;i< number_of_reports;i++){
          count = (i == number_of_reports-1) ? res.count % 100 : 100
          console.log(theProfile.done)
          reports.push({
          scheduledAt: moment.unix(theProfile.done).add(i,'day').fromNow(),
          people_count: count,
          })
        }
        thissss.setState({reports: reports})
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  componentDidMount: function() {
    this.getResults()
  },

  componentWillRecieveProps: function() {
    //this.getResults()
  },

  setCurrentReport: function(newReport) {
    console.log('CURRENT REPORT')
    console.log(newReport)
    this.props.setCurrentReport(newReport)
  },

  render: function() {
    reports = []
    for(i=0;i< this.state.reports.length; i++)
      reports.push(SignalReportRow({setCurrentReport: this.setCurrentReport, 
                                    setCurrentView: this.setCurrentView, 
                                    report: this.state.reports[i]}))

    return (
      React.DOM.div({className: "container", style: {height:400, overflow:'auto',paddingLeft:0,
                                         paddingRight:0,width:'100%'}}, 
        React.DOM.div({style: {height:44,borderBottom:'solid 1px rgb(221, 221, 221)'}}, 
          React.DOM.h4({onClick: this.returnToCalendarView, 
              style: {float:'left',cursor:'pointer',marginTop:7,fontWeight:200,
                paddingLeft:20,paddingTop:5, display:'inline-block'}}, 
                React.DOM.i({className: "fa fa-calendar", style: {marginRight:5}}), 
                this.props.currentProfile.name
          )
        ), 
        React.DOM.div({className: "col-md-12", style: {paddingLeft:0,paddingRight:0,
                                           overflow:'auto',height:356}}, 
          React.DOM.div({style: {overflow:'auto'}}, 
            React.DOM.table({className: "table table-striped", style: {marginBottom:0}}, 
              React.DOM.thead(null, 
                React.DOM.th(null), 
                React.DOM.th(null), 
                React.DOM.th({style: {textAlign:'center'}}, 
                    React.DOM.i({className: "fa fa-clock-o"}), " " + ' ' +
                    "Scheduled"
                ), 
                React.DOM.th({style: {textAlign:'center'}}, "Prospects"), 
                React.DOM.th({style: {width:150,textAlign:'center'}})
              ), 
              React.DOM.tbody({className: "reports"}, 
                reports
              )
            )
          )
        )
      )
    );
  }
});

var SignalReportRow = React.createClass({displayName: 'SignalReportRow',
  rowClick: function() {
    this.props.setCurrentReport(this.props.report)
  },

  prospectAllSignalReportProspects: function(e) {
    /*
    e.stopPropagation()
    // Update UI
    console.log(this.props.report.objectId)
    thiss = this
    $.ajax({
      //url:'http://nameless-retreat-3525.herokuapp.com/prospect_signal_report',
      url:'http://127.0.0.1:5000/prospect_signal_report',
      data: {signal_report_id: thiss.props.report.objectId },
      success: function(res) { console.log(res) },
      error: function(err) { console.log(err) }
    })
    */
  },

  render: function() {
    return (
      React.DOM.tr({onClick: this.rowClick, style: {cursor:'pointer'}}, 
        React.DOM.td(null), 
        React.DOM.td({style: {textAlign:'right',paddingTop:15}}, 
          React.DOM.i({className: "fa fa-cloud-download", style: {color:'#555'}})
        ), 
        React.DOM.td({style: {textAlign:'center'}}, 
          React.DOM.h6(null, 
            this.props.report.scheduledAt
          )
        ), 
        React.DOM.td({style: {textAlign:'center'}}, 
          React.DOM.span({className: "label label-success"}, 
            this.props.report.people_count
          ), 
          React.DOM.h6({style: {display:'inline-block'}}, 
            "  People found."
          )
        ), 
        React.DOM.td(null, 
          React.DOM.a({href: "javascript:", 
            onClick: this.prospectAllSignalReportProspects, 
             style: {fontWeight:'bold',marginTop:5}, 
             className: "btn btn-xs btn-success"}, 
            "Prospect All"
          )
        )
      )
    )
  }
});

},{}],32:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // SignalLoading
  getInitialState: function() {
    return {
      count: '~',
      prospectName : '~',
      prospectTitle : '~',
      companyName : '~',
    }
  },

  initialize: function() {
    var thiss = this;
    var pusher = new Pusher('1a68a96c8fde938fa75a');
    objectId = this.props.currentProfile.objectId
    var channel = pusher.subscribe(objectId);
    channel.bind("my-event", function(data) {
      console.log(data)
      thiss.setState({
        count: data.count,
        prospectName: data.name,
        prospectTitle: data.title,
        companyName: data.company
      })
    });

    // Get Signal Report Count
    // Get Last PeopleSignal Found
    qry = { profile: appConfig.pointer('ProspectProfile',objectId) }
    $.ajax({
      url:'https://api.parse.com/1/classes/SignalReport',
      headers:appConfig.headers,
      data: {'where':JSON.stringify(qry),order:'-createdAt'},
      success: function(res) {
        //console.log(res)
        count = (res.results[0]) ? res.results[0].people_count : 0
        
        thiss.setState({count: count })
      },
    });
    $.ajax({
      url:'https://api.parse.com/1/classes/PeopleSignal',
      headers:appConfig.headers,
      data: {'where':JSON.stringify(qry),order:'-createdAt'},
      success: function(res) {
        //console.log(res)
        thiss.setState({
          prospectName: (res.results[0]) ? res.results[0].link_text : "",
          prospectTitle: (res.results[0]) ? res.results[0].title : "",
          companyName: (res.results[0]) ? res.results[0].company : ""
        })
      },
    });
  },

  componentDidMount: function() {
    Pusher.log = function(message) {
      if (window.console && window.console.log) {
        //window.console.log(message);
      }
    };

    this.initialize()
  },

  componentDidUpdate: function() {
  },

  componentWillReceiveProps: function() {
    this.setState({
      count: '~',
      prospectName : '~',
      prospectTitle : '~',
      companyName : '~',
    })
    this.initialize()
  },

  render: function() {
    // Show companies for hiring signals
    return (
      React.DOM.div({style: {background:'linear-gradient(#dae8ff,#dae8ff)', backgroundImage: 'radial-gradient(circle at center center,#fff,#dff1fd 900px)',height:'100%',paddingTop:10}}, 
        React.DOM.div({className: "signal-card", style: {
            width:500,textAlign:'center',display:'block',marginRight:'auto',
            marginLeft:'auto',marginTop:0,height:200
          }}, 

        React.DOM.div({className: "loading-two-balls", style: {height:20,width:20}}, 
          React.DOM.div({className: "dot1", style: {color:'red'}}), 
          React.DOM.div({className: "dot2", style: {color:'red'}})
        ), 
        React.DOM.div({id: "", style: {color:'#1ca3fd', fontWeight:'bold',marginTop:-10,
                          marginLeft:-200, fontSize:32, fontFamily:'Proxima-Nova'}}, 
            this.state.count + " people found."
          ), 
          React.DOM.div({style: {float:'right',marginTop:-48,marginRight:55}}, 
            React.DOM.h6({style: {marginBottom:3, fontWeight:'bold'}}, this.state.prospectName, " -  ", 
              React.DOM.span({style: {fontWeight:500, fontStyle:'italic'}}, 
                this.state.prospectTitle)), 
            React.DOM.h6({style: {marginTop:0,textAlign:'left'}}, 
              this.state.companyName
            )
          )
        )
      )
    )
  },
});

},{}],33:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Panel Footing
  paginatePrevious: function() {
    var thiss = this;

    qry = {
      where: JSON.stringify({
        company: appConfig.company,
        archived: true,
      }),
      count: 1,
      skip: (thiss.props.currentPage-2)*thiss.props.prospectsPerPage,
      limit: thiss.props.prospectsPerPage
    }
    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospect',
      type:'GET',
      beforeSend: function() {
        console.log('before Send')
        thiss.props.setPaginate(true)
      },
      headers: appConfig.parseHeaders,
      data: qry,
      success: function(res){
        //thiss.setState({prospects: res.results})
        //thiss.setState({currentPage: this.props.currentPage - 1})
        thiss.props.paginate(res.results, thiss.props.currentPage - 1)
        thiss.props.setPaginate(false)
      },
      error: function(res){ console.log(res) }
    });
  },


  paginate: function(direction) {
    prospectsPerPage = this.props.prospectsPerPage
    if(direction=='previous')
      skip = (this.props.currentPage - 2)*prospectsPerPage
    else if(direction=="forward")
      skip = this.props.currentPage*prospectsPerPage

    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospect?skip='+skip,
      type:'GET',
      headers: parse_headers,
      data: 'where={"company":'+appConfig.company+'}&count=1',
      success: function(res){
        //thiss.setState({prospects: res.results})
        //thiss.setState({currentPage: this.props.currentPage + 1})
        this.props.paginate(res.results, this.props.currentPage + 1)
      },
      error: function(res){
        console.log(res)
      }
    });
  },

  paginateForward: function() {
    var thiss = this;
    qry = {
      where: JSON.stringify({
        company: appConfig.company,
        //user: appConfig.user,
        archived: true
      }),
      count: 1,
      skip: thiss.props.currentPage*thiss.props.prospectsPerPage,
      limit: thiss.props.prospectsPerPage,
    }

    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospect',
      type:'GET',
      headers: appConfig.parseHeaders,
      data: qry,
      beforeSend: function() {
        thiss.props.setPaginate(true)
      },
      success: function(res){
        console.log(res.results)
        console.log("success")
        thiss.props.paginate(res.results, thiss.props.currentPage + 1)
        thiss.props.setPaginate(false)
      },
      error: function(res){ console.log(res); }
    });
  },

  componentDidMount: function() {
    paginateForward = this.paginateForward
    paginatePrevious = this.paginatePrevious

    Mousetrap.bind('l', function() { 
      console.log('new forward')
      paginateForward()
    });

    Mousetrap.bind('h', function() { 
      console.log('new back')
      paginatePrevious()
    });
  },

  render: function() {
    // Should be handled by Panle Footing

    lastPage = this.props.currentPage == this.props.pages
    lessThanOnePage = this.props.count < this.props.prospectsPerPage
    forward = (lastPage || lessThanOnePage) ? 'disabled' : ''

    previous = (this.props.currentPage - 1) ? '' : 'disabled'

    lowerLimit = (this.props.currentPage-1)*this.props.prospectsPerPage
    upperLimit = this.props.currentPage*this.props.prospectsPerPage

    lowerLimit = (lowerLimit) ? lowerLimit : 1
    upperLimit = (upperLimit > this.props.count) ? this.props.count : upperLimit

    return (
      React.DOM.div({className: "panel-footing", 
           id: "navbar", 
           style: {height:'35px',padding:'0px', paddingTop:'7px'}}, 
          React.DOM.span({style: {float:'right',marginRight:'20px'}}, 
            React.DOM.a({href: "javascript:", 
               style: {marginRight:'5px'}, 
               onClick: this.paginatePrevious, 
               className: "blue-gradient btn btn-primary btn-xs "+previous}, 
            React.DOM.i({className: "fa fa-fast-backward"})
          ), 
          React.DOM.a({href: "javascript:", 
             onClick: this.paginatePrevious, 
             className: "paginate-back-btn blue-gradient btn btn-primary btn-xs "+previous}, 
            React.DOM.i({className: "fa fa-chevron-left"})
          ), 
          React.DOM.span({style: {marginLeft:5, marginRight:5,display:'inline-block',width:115, textAlign:'center'}}, 
            lowerLimit+' - '+upperLimit+' of '+this.props.count
          ), 
          React.DOM.a({href: "javascript:", 
             onClick: this.paginateForward, 
             className: "paginate-forward-btn blue-gradient btn btn-primary btn-xs "+forward}, 
            React.DOM.i({className: "fa fa-chevron-right"})
          ), 
          React.DOM.a({href: "javascript:", 
             style: {marginLeft:'5px'}, 
             onClick: this.paginateForward, 
             className: "blue-gradient btn btn-primary btn-xs "+forward}, 
            React.DOM.i({className: "fa fa-fast-forward"}))
          )
        )
    );
  }
});

},{}],34:[function(require,module,exports){
/** @jsx React.DOM */


module.exports = React.createClass({displayName: 'exports',
  // SignalCard
  prospectPerson: function() {
    // Add To Signal List
    // Add Company
    // Add Prospect
    person = this.props.person
    personId = person.objectId
    company = this.props.person.company
    companyId = company.objectId
    person.signalId = person.signalId
    company.signalId = company.objectId
    p = person; c = company;
    delete p.objectId; delete c.objectId;
    delete p.className; delete c.className;
    delete p.__type; delete c.__type;
    delete p.createdAt; delete c.createdAt;
    delete p.updatedAt; delete c.updatedAt;
    p.companySignal = p.company
    delete p.company

    p.linkedin_url = p.url
    p.company = JSON.parse(localStorage.currentUser).company
    p.archived = true
    p.loading = true
    p.city = p.title.split('-')[0]
    p.pos = p.title.split('-').slice(-1)[0].split(' at ')[0]
    p.company_name = p.title.split('-').slice(-1)[0].split(' at ').slice(-1)[0] 
    name = p.link_text.split('|')[0]
    name = name.split('-')[0]
    p.name = name
    p.websiteUrl = company.websiteUrl
    // Automatically Add To The Signal List It Belongs To
    
    console.log(this.props.profile)
    p.lists = [{'__type':'Pointer','className':'ProspectList','objectId':this.props.profile.prospect_list.objectId}] 

    $.ajax({
      url:'https://api.parse.com/1/classes/Prospects',
      type:'POST',
      headers:appConfig.headers,
      data:JSON.stringify(p),
      success: function(res) {
        console.log(res)
         $.ajax({
          url:'https://api.parse.com/1/classes/PeopleSignal/'+personId,
          type:'PUT',
          headers:appConfig.headers,
          data: JSON.stringify({prospectId: res.objectId, prospected_on: Date.now()/1000}),
          success:function(res) { console.log(res) },
          error: function() { }
         })
      },
      error: function(err) { }
    })

    //Create Company Prospect with Pointer to CompanySignal
    $.ajax({
      url:'https://api.parse.com/1/classes/CompanyProspects',
      type:'POST',
      headers:appConfig.headers,
      data:JSON.stringify(c),
      success: function(res) {
        //Update Company Signal With Pointer to Company Prospect and date prospected
        console.log(res)
         $.ajax({
           url:'https://api.parse.com/1/classes/CompanySignal/'+companyId,
          type:'PUT',
          headers:appConfig.headers,
          data: JSON.stringify({prospectId: res.objectId, prospected_on: Date.now()/1000}),
          success:function(res) { console.log(res) },
          error: function(err) { }
         })
      },
      error: function(err) { }
    })
  },

  render: function() {
    person = this.props.person
    signal = (person.signals) ? person.signals[0] : {}
    
    return (
      React.DOM.div({className: "panel panel-default signal-card"}, 
        React.DOM.div({className: "panel-body", style: {paddingLeft:25, paddingRight:25}}, 
          React.DOM.h4(null, 
            person.title
          ), 
          React.DOM.h6({style: {display:'inline-block',width:'100%'}}, 
            React.DOM.span({style: { float:'left',maxWidth: '60%', whiteSpace: 'nowrap',
                overflow: 'hidden', textOverflow: 'ellipsis'}}, 
              person.link_text)
          ), 
        React.DOM.div({id: "signal-stuff", 
            style: (_.isEqual(signal, {})) ? {display:'none'} : {display:'block'}}, 
          React.DOM.h6(null, " ", React.DOM.i({className: "fa fa-building"}), 
            "  ", signal.company), 
          React.DOM.h6(null, " ", React.DOM.i({className: "fa fa-map-marker"}), 
            "  ", signal.location), 
          React.DOM.h6(null, " ", React.DOM.i({className: "fa fa-suitcase"}), 
            " ", signal.job_title, " ")
        ), 

          React.DOM.a({href: "javascript:", className: "btn btn-success", 
            onClick: this.prospectPerson, 
            style: {float:'right',marginTop:15, fontWeight:'bold',width:'100%'}}, 
            "Prospect This Person")
        )
      )
    );
  }
});

},{}],35:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  render: function() {
    $('body').css({overflow:'hidden'})
    return (
      React.DOM.div(null, 
        React.DOM.div({className: "background-image"}), 
        React.DOM.nav({className: "thenavbar navbar navbar-default navbar-fixed-top", role: "navigation"}, 
          React.DOM.div({className: "container-fluid"}, 
            React.DOM.a({className: "the-title tk-foco brand navbar-brand", style: {fontWeight:'100'}, 
                href: "#"}, 
              "Customero", 
              React.DOM.span({style: {fontSize:'22px',marginLeft:'30px'}}, "Supercharge your sales! ")
            )
          )
        ), 
          PricingTables(null), 
        React.DOM.div({className: "gradient"}, " ")
      )
    )
    /*
              <a href="#signup" className="btn btn-success btn-lg" style={{display:'block',backgroundColor:'#1ca3fd',float:'right',marginTop:'13px' }}>Log In</a>
    */
  }
});

var PricingTables = React.createClass({displayName: 'PricingTables',
  render: function() {
    return (
      React.DOM.div(null, 
    React.DOM.div({className: "container", style: {marginTop:150}}, 
        React.DOM.div({className: "row flat"}, 
            React.DOM.div({className: "col-lg-3 col-md-3 col-xs-6"}, 
                React.DOM.ul({className: "signal-card plan plan2"}, 
                    React.DOM.li({className: "plan-name"}, " Startup "), 
                    React.DOM.li({className: "plan-price"}, 
                      React.DOM.h1({style: {fontWeight:'bold',color:'#0294f5'}}, "$499 ", React.DOM.small(null, "/ month"))
                    ), 

                  React.DOM.li(null, " ", React.DOM.strong(null, "Up to 1000 Email Credits"), " "), 
                  React.DOM.li(null, " ", React.DOM.strong(null, "Up to 10 Team Members")), 
                  React.DOM.li({style: {padding:0}}, " ", React.DOM.strong(null), " Includes: "), 
                  React.DOM.li(null, " ", React.DOM.strong(null, 'Emails & Phone Numbers')), 
                  React.DOM.li(null, " ", React.DOM.strong(null, "Quick Start Package")), 
                  React.DOM.li(null, " ", React.DOM.strong(null, "Signals")), 
                  React.DOM.li({className: "", style: {paddingBottom:0}}, 
                    React.DOM.a({href: "#", className: "btn btn-primary btn-md cool-btn"}, "Sign Up")
                  )
             )
         ), 

         React.DOM.div({className: "col-lg-3 col-md-3 col-xs-6"}, 
            React.DOM.ul({className: "signal-card plan plan3 featured"}, 
                React.DOM.li({className: "plan-name"}, " Growth "), 
                React.DOM.li({className: "plan-price"}, 
                  React.DOM.h1({style: {fontWeight:'bold',color:'#0294f5'}}, "$1299 ", React.DOM.small(null, "/ month"))
                ), 

            React.DOM.li(null, " ", React.DOM.strong(null, "Up to 2500 Email Credits"), " "), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Up to 25 Team Members")), 
            React.DOM.li({style: {padding:0}}, " ", React.DOM.strong(null), " Includes: "), 
            React.DOM.li(null, " ", React.DOM.strong(null, "All Startup Features ")), 
            React.DOM.li({style: {padding:0}}, " ", React.DOM.i({className: "fa fa-plus"})), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Bulk Salesforce Integration")), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Mining Jobs")), 
            React.DOM.li({className: "", style: {paddingBottom:0}}, 
              React.DOM.a({href: "#", className: "btn btn-primary btn-md cool-btn"}, "Sign Up")
            )
         )
     ), 

     React.DOM.div({className: "col-lg-3 col-md-3 col-xs-6"}, 
        React.DOM.ul({className: "signal-card plan plan4"}, 
            React.DOM.li({className: "plan-name"}, " Premium "), 
            React.DOM.li({className: "plan-price"}, 
              React.DOM.h1({style: {fontWeight:'bold',color:'#0294f5'}}, "$2999 ", React.DOM.small(null, "/ month"))
            ), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Up to 7500 Email Credits"), " "), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Up to 50 Team Members")), 
            React.DOM.li({style: {padding:0}}, " ", React.DOM.strong(null), " Includes: "), 
            React.DOM.li(null, " ", React.DOM.strong(null, "All Growth Features ")), 
            React.DOM.li({style: {padding:0}}, " ", React.DOM.i({className: "fa fa-plus"})), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Dedicated Happiness Officer")), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Improved territory planning")), 
            React.DOM.li({className: "", style: {paddingBottom:0}}, 
              React.DOM.a({href: "#", className: "btn btn-primary btn-md cool-btn"}, "Sign Up")
            )
         )
       ), 
            React.DOM.div({className: "col-lg-3 col-md-3 col-xs-6"}, 
                React.DOM.ul({className: "signal-card plan plan1"}, 
                    React.DOM.li({className: "plan-name"}, " Enterprise "), 
                    React.DOM.li({className: ""}, " "), 
                    React.DOM.li(null, " ", React.DOM.strong(null), " "), 
                    React.DOM.li(null, " ", React.DOM.strong(null), " "), 
                    React.DOM.li({style: {fontSize:22}}, " ", React.DOM.strong(null, "Contact Us"), " "), 
                    React.DOM.li(null, " ", React.DOM.strong(null), " "), 
                    React.DOM.li(null, " ", React.DOM.strong(null), "  ")
                )
            )

)

)
      )
    );
  },
});

},{}],36:[function(require,module,exports){
/** @jsx React.DOM */

//TODO - abstract lists
var SideMenuProspects = require('./side_menu_user_prospects.js.min.js');

var UserProspect = require('./user_prospect.js.min.js');
var UserProspectHeader = require('./user_prospect_header.js.min.js');
var SideMenuListOption = require('./user_side_menu_list.js.min.js');
var LoadingSpinner = require('./loading_spinner.js.min.js')
var Spinner = require('./spinner.js.min.js')
var PanelFooting = require('./panel_footing.js.min.js')
var Messenger = require('./messenger.js.min.js')

var DeleteListModal = require('./delete_list_modal.js.min.js')
var RenameListModal = require('./rename_list_modal.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {  prospects   : [],
              currentPage : 1,
              className: 'Prospect',
              listClassName: 'ProspectList',
              pages       : 1,
              currentList : 'All',
              currentListObjectId : '',
              loading: true,
              paginating: false,
              prospectsPerPage: 50,
              downloading: false,
              lists : [],
              masterCheckboxChecked: false,
              keyboardActiveProspect: 0, //first
              selectedProspects: [],
              totalCount  : "~", 
              count       : "~", }
  },

  createList: function(data) {
    lists = this.state.lists
    lists = [data].concat(lists)
    this.setState({ lists: lists })
  },

  renameList: function(newListName) {
    // Update Local State
    thiss = this;
    var filtered = _.filter(this.state.lists, function(item) {
      if(item.name == thiss.state.currentList){
        item.name = newListName
        return item
      }
      return item
    });

    this.setState({lists : filtered, currentList: newListName})

    $('.modal').click()
    $('#newListName').val('')
    $('.modal-backdrop').click()

    // Persist / Ajax
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectList/'+thiss.state.currentListObjectId,
      headers: appConfig.parseHeaders,
      type:'PUT',
      data:JSON.stringify({'name':newListName}),
      success: function(res) { console.log(res) },
      error: function(err) { console.log(err) }
    });
  },

  deleteList: function() {
    var filtered = _.filter(this.state.lists, function(item) {
      if(item.objectId == thiss.state.currentListObjectId)
        return false
      return true
    });

    this.setState({lists: filtered, currentList: 'All'})
    this.changeList('All', '')

    // Remove
    appConfig.closeModal()
    $('#newListName').val('')

    // Persist / Ajax
    var thiss = this;
    $.ajax({
      url: appConfig.url+'ProspectList/'+thiss.state.currentListObjectId,
      headers: appConfig.parseHeaders,
      type:'DELETE',
      success: function(res) { console.log(res) },
      error: function(err) { console.log(err) }
    });
  },

  setPaginate: function(value) {
    this.setState({paginating: value})
  },

  setDownloading: function(value) {
    this.setState({downloading: value})
  },

  changeList: function(newListName,objectId) {
    // add overlay loading
    //console.log(newListName)
    //console.log(objectId)

    localStorage.selectedProspects = JSON.stringify([])

    this.setState({currentList : newListName})
    this.setState({currentListObjectId : objectId})
    this.setState({prospects  : []    })
    this.setState({count      : '~'   })
    this.setState({pages      : 1     })
    this.setState({loading    : true  })
    this.setState({currentPage: 1})
    this.setState({keyboardActiveProspect: 0})

    company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
    qry = 'where={"company":'+company+',"archived":true}&count=1&order=-createdAt'
    console.log(newListName)

    if(this.state.currentList != 'All' || typeof(objectId) != "undefined" && newListName != 'Archived'){
      currentList = JSON.stringify({
        'objectId'  : objectId, 
        '__type'    : 'Pointer', 
        'className' : 'ProspectList' 
      })

      company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
      qry = 'where={"company":'+company+'}&count=1'
      qry = 'where={"lists":'+currentList+'}&count=1&order=-createdAt&include=email_guesses,email_guesses.pattern'
    } else if (newListName == 'Archived') {
      qry = 'where={"company":'+company+',"archived":false}&count=1&order=-createdAt&include=email_guesses,email_guesses.pattern'
    }
    console.log(qry)
    var thisss = this;

    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospect',
      type:'GET',
      headers: appConfig.parseHeaders,
      async: true,
      data: qry,
      ajaxStart: function() {
        console.log('started list')
      },
      success: function(res){
        thisss.setState({prospects: res.results})
        thisss.setState({count: res.count})
        //thisss.setState({totalCount: res.count})
        thisss.setState({pages: Math.ceil(res.count/thisss.props.prospectsPerPage)})
        thisss.setState({loading: false})
      },
      error: function(res){
        //console.log('error')
        //console.log(res)
      }
    })
  },

  checkboxAction: function(checkedState, objId) {
    /* Storing Checked Prospects In LocalStorage To Make it Easier To
     * Copy and Move Prospects 
     *
     * Move To User_Prospects?
     */
    
    selectedProspects = JSON.parse(localStorage.selectedProspects)
    //console.log(checkedState)
    if(checkedState)
      selectedProspects.push(objId)
    else
      selectedProspects = _.reject(selectedProspects, 
                                   function(id){return id == objId})

    selectedProspects = _.uniq(selectedProspects)
    console.log(selectedProspects)
    localStorage.selectedProspects = JSON.stringify(selectedProspects)
    this.setState({selectedProspects: selectedProspects})
  },

  masterCheckboxChanged: function(masterCheckboxValue) {
    this.setState({masterCheckboxChecked: masterCheckboxValue})
  },

  render: function() {
    this.startKeyboardShortcuts()
    $('body').css({overflow:'auto'})

    prospects = []
    for(i=0;i< this.state.prospects.length;i++) {
      url = this.state.prospects[i].url
      prospect = this.state.prospects[i]

      if(url != "no linkedin website" && typeof(url) != "undefined" && url != ""){
        url = url.replace('http://','')
        the_link = React.DOM.a({href: 'http://'+url}, React.DOM.i({className: "fa fa-globe"}))
      } else {
        the_link = ""
      }

      profile = this.state.prospects[i].linkedin_url.replace('http://','')
      profile = this.state.prospects[i].linkedin_url.replace('https://','')
      li = React.DOM.a({href: 'http://'+profile, className: "linkedin_link"}, React.DOM.i({className: "fa fa-linkedin-square"}))

      keyboardSelected = (i == this.state.keyboardActiveProspect)

      selectedProspects = JSON.parse(localStorage.selectedProspects)
      alreadyChecked=false
      for(ii=0;ii< selectedProspects.length;ii++)
        if(prospect.objectId == selectedProspects[ii])
          alreadyChecked = true

        //console.log(alreadyChecked)

      prospects.push(
        UserProspect({deleteProspect: this.deleteProspect, 
                      prospect: this.state.prospects[i], 
                      masterCheckboxChecked: this.state.masterCheckboxChecked, 
                      key: this.generate_id(), 
                      link: the_link, 
                      keyboardSelected: keyboardSelected, 
                      checkboxAction: this.checkboxAction, 
                      alreadyChecked: alreadyChecked, 
                      li: li}))
    }

    listType = (this.state.currentList == "All") ? {display:'none'} : {float:'left'}
    listNameStyle = (this.state.currentList == "All") ? {display:'none'} : {float:'left',display:'inline-block', fontWeight: 200, marginTop: 1, paddingRight: 10, marginLeft: -10}
    listBtn = (this.state.currentList == "All") ? {display:'none'} : {float:'left',marginLeft:5}
    listOptions = (this.state.currentList == "All") ? {display:'none'} : {float:'right'}
    copyDropdownStyle = (this.state.currentList == "All") ? {width:114, right:4} : {width:114, right:36}
    currentList = this.state.currentList
    paginateOverlay = (this.state.paginating) ? PaginateOverlay(null) : ""

    downloadIcon = (!this.state.downloading) ? React.DOM.i({className: "fa fa-download"}) : Spinner({circleStyle: {backgroundColor:'white',height:4,width:4}, spinnerStyle: {height:13, width:13,margin:0,display:'inline-block',paddingTop:2}})
    return (
        React.DOM.div(null, 
      React.DOM.div({className: "container", style: {width:'100%',padding:'0', background: 'linear-gradient(#dae8ff,#dae8ff)', backgroundImage: 'radial-gradient(circle at center center,#fff,#dff1fd 900px)'}}, 
        SideMenuProspects({currentList: this.state.currentList, 
                           count: this.state.count, 
                           totalCount: this.state.totalCount, 
                           changeList: this.changeList, 
                           createList: this.createList, 
                           lists: this.state.lists}), 

        React.DOM.div({className: "col-ld-10 col-md-10 col-sm-10 col-xs-10", 
             style: {padding:'0'}}, 
              paginateOverlay, 
              React.DOM.div({id: "prospectDetailButtons"}, 
                ListDetailButtons({
                  renameList: this.renameList, 
                  deleteList: this.deleteList, 
                  currentListName: this.state.currentList, 
                  currentList: this.state.currentListObjectId}), 

                React.DOM.div({className: "dropdown", style: {display:'none'}}, 
                  React.DOM.a({href: "javascript:", 
                     className: "btn btn-primary btn-xs list-options", 
                     id: "", 
                     style: listOptions}, 
                    React.DOM.i({className: "fa fa-bars"})
                  )
                ), 

                React.DOM.div({className: "dropdown"}, 
                  React.DOM.a({'data-toggle': "dropdown", 
                     id: "copyToList", 
                     href: "javascript:", 
                     className: "drop-target btn btn-primary btn-xs list-options"}, 
                     React.DOM.i({className: "fa fa-copy"}), 
                       "  Copy To List  ",  
                     React.DOM.i({className: "fa fa-caret-down"})
                ), 
                CurrentListsTwo({lists: this.state.lists, 
                                 copyDropdownStyle: copyDropdownStyle, 
                                 listAction: this.copySelectedProspects})
                ), 
  
                React.DOM.div({className: "dropdown"}, 
                  React.DOM.a({'data-toggle': "dropdown", 
                     href: "javascript:", 
                     id: "moveToList", 
                     style: listOptions, 
                     className: "btn btn-primary btn-xs list-options"}, 
                     React.DOM.i({className: "fa fa-share"}), 
                     "  Move To List  ",  
                     React.DOM.i({className: "fa fa-caret-down"})
                ), 
                CurrentLists({lists: this.state.lists, 
                              listAction: this.moveSelectedProspects})
                ), 

                React.DOM.a({onClick: this.downloadFile, 
                   href: "javascript:", 
                   id: "downloadProspects", 
                   className: "drop-target btn btn-primary btn-xs list-options"}, 
                   downloadIcon, 
                   "  Download CSV  " 
                ), 

                React.DOM.a({onClick: this.downloadFile, 
                     style: listOptions, 
                   href: "javascript:", 
                   id: "downloadProspects", 
                   className: "drop-target btn btn-primary btn-xs list-options"}, 
                  React.DOM.i({className: "fa fa-building"}), "   Generate Company List  " 
                )
              ), 
        

          React.DOM.div({id: "autoscroll", style: {height:'400px',overflow:'auto'}}, 
            React.DOM.table({className: "prospects-table table table-striped", style: {marginBottom:'0px'}}, 
              React.DOM.thead({style: {backgroundColor:'white'}}, 
                UserProspectHeader({masterCheckboxChanged: this.masterCheckboxChanged})
              ), 
              React.DOM.tbody(null, 
                prospects
              )
            ), 
            (this.state.loading) ? LoadingSpinner(null) : ""
          )
        )
      ), 

      PanelFooting({currentPage: this.state.currentPage, 
                    count: this.state.count, 
                    paginate: this.paginate, 
                    prospectsPerPage: this.state.prospectsPerPage, 
                    setPaginate: this.setPaginate, 
                    pages: this.state.pages}), 
      Messenger(null)
    )
    );
  },

  paginate: function(newProspects, newPage) {
    this.setState({
      prospects: newProspects,
      currentPage: newPage,
      keyboardActiveProspect: 0
    })
    this.startKeyboardShortcuts()
    document.getElementById('autoscroll').scrollTop = 0
  },

  downloadFile: function() {
    list = {
      '__type'   :  'Pointer',
      'className':  'ProspectList',
      'objectId' :  this.state.currentListObjectId
    }
    localStorage.download_total = Math.ceil(this.state.count/1000)
    localStorage.downloads      = 0

    if(this.state.currentList == "All") {
      qry = {
        where : JSON.stringify({
          company: appConfig.company
        }),
        count: 1,
        archived: true,
      }
    } else {
      qry = {
        where: JSON.stringify({
          lists: list
        }),
        count: 1,
        archived: true,
      }
    }

    var thiss = this;
    for(i=0;i< Math.ceil(this.state.count/1000); i++){
      $.ajax({
        url: 'https://api.parse.com/1/classes/Prospect?limit=1000&skip='+i,
        type:'GET',
        headers: appConfig.parseHeaders,
        beforeSend: function() {
          thiss.setState({downloading: true})
        },
        downloadFile: 'download_'+i,
        data: qry,
        success: function(res){
          for(i=0;i< res.results.length;i++) {
            delete res.results[i].company
            delete res.results[i].pos
            delete res.results[i].user
            delete res.results[i].objectId
            delete res.results[i].createdAt
            delete res.results[i].updatedAt
          }

          // Add Results To LocalStorage
          localStorage.downloads = JSON.parse(localStorage.downloads) + 1 
          localStorage.setItem(this.downloadFile, JSON.stringify(res.results))

          // Check to see if all ajax reqs in for loop are complete
          if(localStorage.downloads == localStorage.download_total) {
            console.log('matched')
            // Merge all localStorage results
            prospects = []
            for(ii=0;ii < JSON.parse(localStorage.download_total); ii++){
              prospects = prospects.concat(JSON.parse(localStorage.getItem('download_'+ii)))
              console.log(prospects)
            }

            console.log(prospects)
            // Output as CSV
            var blob = new Blob([Papa.unparse(prospects)], {type: "text/plain;charset=utf-8"});
            console.log(blob)
            saveAs(blob, "prospects.csv");
            thiss.setState({downloading: false})
          }
      },

      error: function(res){
        console.log(res)
      }
      });
    }
    
    company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
    

  },

  removeSelectedProspects: function() {
    // If List Type is All Archive the prospect
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      "Content-Type" : "application/json"
    }

    selectedProspects = JSON.parse(localStorage.selectedProspects)
    batchData = []

    for(i=0;i< selectedProspects.length;i++){
      if(this.state.currentList != 'All'){
        tmp = {
          method:'PUT',
          path:'/1/classes/Prospect/'+selectedProspects[i],
          body: {
            lists: {
              '__op'    : 'Remove',
              "objects" : [{ 
                  '__type':'Pointer',
                  'className':'ProspectList',
                  'objectId':this.state.currentListObjectId
              }]
            }
          }
        }
      }else{
        tmp = {
          method:'PUT',
          path:'/1/classes/Prospect/'+selectedProspects[i],
          body: {
            archived:false,
          }
        }
      }
      batchData.push(tmp)
    }

    thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/batch',
      type:'POST',
      headers:parseHeaders,
      data: JSON.stringify({requests: batchData}),
      success:function(res) {
        console.log(res)
        lists = thiss.state.lists

        for(i=0;i< lists.length; i++) { 
          // Subtract From Old List - Not Working For Archive
          if(lists[i].objectId == thiss.state.currentListObjectId)
            lists[i].count = parseInt(lists[i].count) - parseInt(selectedProspects.length)
        }
        // Update local list count
        thiss.setState({lists: lists})

        // remove from current list ui
        selectedProspects = JSON.parse(localStorage.selectedProspects)
        console.log('remove selected prospects')
        console.log(selectedProspects)
        console.log(thiss.state.prospects)
        var filtered = _.filter(thiss.state.prospects, function(item) {
          for(i=0;i< selectedProspects.length;i++) 
            if(item.objectId == selectedProspects[i])
              return false
          return true
        });
        console.log(filtered)
        thiss.setState({prospects: filtered})
        localStorage.selectedProspects = JSON.stringify([])

        // add alert to inform user
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  moveSelectedProspects: function(listObjectId) {
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      "Content-Type" : "application/json"
    }

    // get the selected objectId from selectedProspects state
    selectedProspects = JSON.parse(localStorage.selectedProspects)
    batchData = []


    // Batch Update Parse
    // - Remove All Selected Prospects From Current List
    for(i=0;i< selectedProspects.length;i++){
      tmp = {
        method:'PUT',
        path:'/1/classes/Prospect/'+selectedProspects[i],
        body: {
          lists: {
            '__op'    : 'Remove',
            "objects" : [{ 
                '__type':'Pointer',
                'className':'ProspectList',
                'objectId':this.state.currentListObjectId
            }]
          }
        }
      }
      batchData.push(tmp)
    }
    
    // - Add Other List 
    for(i=0;i< selectedProspects.length;i++){
      tmp = {
        method:'PUT',
        path:'/1/classes/Prospect/'+selectedProspects[i],
        body: {
          lists: {
            '__op'    : 'AddUnique',
            "objects" : [{ 
                '__type':'Pointer',
                'className':'ProspectList',
                'objectId':listObjectId
            }]
          }
        }
      }
      batchData.push(tmp)
    }

    thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/batch',
      type:'POST',
      headers:parseHeaders,
      data: JSON.stringify({requests: batchData}),
      success:function(res) {
        console.log(res)
        lists = thiss.state.lists

        for(i=0;i< lists.length; i++) { 
          // Add To New List
          if(lists[i].objectId == listObjectId)
            lists[i].count = parseInt(lists[i].count) + parseInt(selectedProspects.length)
          // Subtract From Old List
          if(lists[i].objectId == thiss.state.currentListObjectId)
            lists[i].count = parseInt(lists[i].count) - parseInt(selectedProspects.length)
        }
        // Update local list count
        thiss.setState({lists: lists})

        // remove from current list ui
        console.log('selectedProspects')
        console.log(thiss.state.prospects)
        var filtered = _.filter(thiss.state.prospects, function(item) {
          is_selected = true
          for(i=0;i< selectedProspects.length;i++) 
            if(item.objectId == selectedProspects[i])
              is_selected = false
          return is_selected
        });
        console.log(filtered)
        thiss.setState({prospects: filtered})
        localStorage.selectedProspects = JSON.stringify([])

        // add alert to inform user
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  copySelectedProspects: function(listObjectId) {
    console.log(listObjectId)
    
    // make batch ajax request to parse
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      "Content-Type" : "application/json"
    }

    // Add Loading Sign To List

    selectedProspects = JSON.parse(localStorage.selectedProspects)
    batchData = []
    for(i=0;i< selectedProspects.length;i++){
      tmp = {
        method:'PUT',
        path:'/1/classes/Prospect/'+selectedProspects[i],
        body: {
          lists: {
            '__op'    : 'AddUnique',
            "objects" : [{ 
                '__type':'Pointer',
                'className':'ProspectList',
                'objectId':listObjectId
            }]
          }
        }
      }
      batchData.push(tmp)
    }

    thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/batch',
      type:'POST',
      headers:parseHeaders,
      data: JSON.stringify({requests: batchData}),
      success:function(res) {
        console.log(res)
        // Update With the number of successes
        // Update local list count
        lists = thiss.state.lists
        for(i=0;i< lists.length; i++) { 
          if(lists[i].objectId == listObjectId)
            lists[i].count = parseInt(lists[i].count) + parseInt(res.length)
        }
        thiss.setState({lists: lists})
        localStorage.selectedProspects = "[]"
        thiss.setState({selectedProspects : [] })
        
        // add alert to inform user
        // Unselect all selected
      },
      error: function(err) {
        console.log(err)
      }
    });

  },

  hideAlert: function() {
    $('.alert').hide()
  },

  adjustHeight: function(whichOne) {
    prospectWindowTop = $('#prospectDetailButtons').position().top
    prospectWindowTop = prospectWindowTop + $('#prospectDetailButtons').height()
    prospectWindowBottom = $('#autoscroll').position().top + $('#autoscroll').height()

    if(whichOne == 'j')
      activeProspect = this.state.keyboardActiveProspect +1 
    else
      activeProspect = this.state.keyboardActiveProspect -1 

    activeTop = $($('.prospects-tr')[activeProspect]).position().top
    selectedHeight = $($('.prospects-tr')[activeProspect]).height()
    activeBottom = $($('.prospects-tr')[activeProspect]).position().top+selectedHeight

    console.log(prospectWindowTop, prospectWindowBottom)
    console.log(activeTop, activeBottom)

    scrollTop = document.getElementById('autoscroll').scrollTop
    if(activeBottom > prospectWindowBottom)
      document.getElementById('autoscroll').scrollTop = scrollTop + activeBottom - prospectWindowBottom

    if(activeTop < 0)
      document.getElementById('autoscroll').scrollTop = scrollTop + activeTop - 37
    else if(activeTop == $($('.prospects-tr')[0]).position().top)
      document.getElementById('autoscroll').scrollTop = 0
      
    // Get Postion of Top
    // Get Position of Bottom 
    // Get Position of Current Selected
    // Adjust by scrolling down or up
  },

  startKeyboardShortcuts: function() {
    /* Keyboard Shortcuts */
    Mousetrap.reset()
    //Mousetrap.unbind(['j','k','o'])
    thiss = this;

    /* Prospect Table Shortcuts */
    Mousetrap.bind('j', function() { 
      keyboard = thiss.state.keyboardActiveProspect
      if(keyboard != thiss.state.prospectsPerPage+1)
        thiss.adjustHeight('j')
        thiss.setState({keyboardActiveProspect: keyboard+1})
    });

    Mousetrap.bind('k', function() { 
      keyboard = thiss.state.keyboardActiveProspect
      if(keyboard != 1)
        thiss.adjustHeight('k')
        thiss.setState({keyboardActiveProspect: keyboard-1})
    });


    Mousetrap.bind('o', function() { 
      console.log('open current prospect')
      console.log($($('.keySelect').find('a.linkedin_link')[0]).attr('href'))
      link = $($('.keySelect').find('a.linkedin_link')[0]).attr('href')
      /*
      window.open(link, '_blank')
      console.log('new')
      */
      //popupWindow.blur();
      //window.focus();
      // keyboard = thiss.state.keyboardActiveProspect
      
      var a = document.createElement("a");
      a.href = link
      var evt = document.createEvent("MouseEvents");
      //the tenth parameter of initMouseEvent sets ctrl key
      // For Mac This Works Check For - Windows
      evt.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0,
                                  false, false, false, true, 0, null);
      a.dispatchEvent(evt);
    });



    /* List Modification Shortcuts */
    Mousetrap.bind('tab+r', function(){
      //console.log('reload')
      $('#renameListBtn').click()
    })

    Mousetrap.bind('tab+d', function(){
      //console.log('reload')
      $('#deleteListModal').click()
    })

    Mousetrap.bind('tab+s', function(){
      //console.log('reload')
      //$('#downloadProspects').click()
      thiss.downloadFile()
    })

    Mousetrap.bind('shift+l', function(){
      //console.log('reload')
      //$('#downloadProspects').click()
      //thiss.downloadFile()
      $('.new-list-btn').click()
    })

    Mousetrap.bind('e', function(){
      console.log('reload')
      //$('#downloadProspects').click()
      thiss.removeSelectedProspects()
    })

    Mousetrap.bind('c', function() { 
      console.log('copy')
      $('#copyToList').click()
    });

    Mousetrap.bind('m', function() { 
      console.log('copy')
      $('#moveToList').click()
    });

    //Mousetrap.bind('e', function() { console.log('e'); });
    Mousetrap.bind('right', function() { console.log('right'); });
    Mousetrap.bind('left', function() { console.log('left'); });

  },

  componentDidMount: function() {
    /* OnLoad For The First Time Function */
    var thisss = this;
    localStorage.selectedProspects = JSON.stringify([])
    currentUser = JSON.parse(localStorage.currentUser)
    user = appConfig.pointer('User', currentUser.objectId)

    archiveList = JSON.stringify({ 
      'objectId':'SerPQjckve', // TODO - Differente For Watch User
      '__type':'Pointer', 
      'className' : 'ProspectList' 
    })

    qry = {
      where: JSON.stringify({
        company: currentUser.company,
        archived: true,
      }),
      count: 1,
      order: '-createdAt',
      limit: this.state.prospectsPerPage,
      include: 'email_guesses,email_guesses.pattern'
    }

    if(this.state.currentList != 'All'){
      currentList=appConfig.pointer('ProspectList',this.state.currentListObjectId)
      qry = {
        where: JSON.stringify({
          company: currentUser.company,
          lists: currentList
        }),
        count: 1
      }
    }

    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospect',
      type:'GET',
      headers: appConfig.parseHeaders,
      cache: true,
      data: qry,
      success: function(res){
        console.log(res)
        thisss.setState({
          prospects: res.results,
          count: res.count,
          totalCount: res.count,
          pages: Math.ceil(res.count/thisss.props.prospectsPerPage),
          loading: false,
        })
      },
      error: function(res){ console.log(res) }
    })

    currentUser = { 
      '__type'   : 'Pointer',
      'className': '_User',
      'objectId' : JSON.parse(localStorage.currentUser).objectId
    }

    thiss = this;
    qry = {
      where: JSON.stringify({
        user: appConfig.pointer('_User', currentUser.objectId)
      }),
      count: 1,
      order: '-createdAt',
    }
    $.ajax({
      url: 'https://api.parse.com/1/classes/ProspectList',
      type: 'GET',
      headers: appConfig.parseHeaders,
      data: qry,
      success: function(res) {
        console.log(res)
        results = res.results
        for(i=0;i< results.length; i++) {
          results.count = '~'
        }
        thiss.setState({lists: results})
        // Make batch request to get list counts after they are loaded
        for(i=0;i < res.results.length; i++) {
          localStorage.setItem(res.results[i].objectId, "")
        }

        for(i=0;i< res.results.length; i++) {
          list = {
            '__type'    : 'Pointer',
            'objectId'  : res.results[i].objectId,
            'className' : 'ProspectList', 
          }

          $.ajax({
            url:'https://api.parse.com/1/classes/Prospect',
            type:'GET',
            headers: appConfig.parseHeaders,
            listObjectId: res.results[i].objectId,
            data: 'where={"lists":'+JSON.stringify(list)+'}&count=1',
            success: function(res) {
              //console.log(this.listObjectId)
              localStorage.setItem(this.listObjectId, res.count)
              amount = 0
              for(ii=0;ii< results.length;ii++){
                if(localStorage.getItem(results[ii].objectId) == "")
                  amount = amount + 1
              }

              if(amount == 0) {
                for(ii=0;ii< results.length;ii++)
                  results[ii].count = localStorage.getItem(results[ii].objectId)

                thiss.setState({lists: results})
                //console.log('Got Counts')
              }

              // updated res.count
              //thiss.setState({count: res.count})
            },
            error: function(err) {
              console.log(err)
            }
          })
        }
      },
      error: function(err) { console.log(err) }
    });
  },

  generate_id : function () {
    return '_' + Math.random().toString(36).substr(2, 9);
  },
});

/*  Dropdown Menus */

var CurrentLists = React.createClass({displayName: 'CurrentLists',
  listAction: function(e) {
    listName = $(e.target).text()
    
    var listSelect = _.filter(this.props.lists, function(item) {
       return item.name == listName
    });

    this.props.listAction(listSelect[0].objectId)
  },

  render: function() {
    lists = [] 
    for(i=0;i< this.props.lists.length;i++) {
      lists.push(
        React.DOM.li(null, React.DOM.a({style: {fontWeight:'bold',fontSize:'10px'}, 
            className: "dropdown-list-name", 
            href: "javascript:", 
            onClick: this.listAction}, this.props.lists[i].name))
      )
    }
    //console.log(this.props.copyDropdownStyle)
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: {right:158}}, 
        lists
      )
    );
  }
});

var ListsMenu = React.createClass({displayName: 'ListsMenu',
  render: function() {
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: {
            minWidth:'inherit',
            top: '20px',
            width: '125px',
            right: '154px',
            left:'auto'
          }}, 
        React.DOM.li(null, React.DOM.a({href: "#books"}, 
          React.DOM.i({className: "fa fa-times"}), "  " + ' ' +
          "Delete List"
        )), 
        React.DOM.li(null, React.DOM.a({href: "#podcasts"}, 
          "Rename Lists"
        ))
      )
    );
  }
});

var CurrentListsTwo = React.createClass({displayName: 'CurrentListsTwo',
  listAction: function(e) {
    listName = $(e.target).text()
    
    var listSelect = _.filter(this.props.lists, function(item) {
       return item.name == listName
    });

    this.props.listAction(listSelect[0].objectId)
  },

  render: function() {
    lists = [] 
    for(i=0;i<this.props.lists.length;i++) {
      lists.push(
        React.DOM.li(null, React.DOM.a({style: {fontWeight:'bold',fontSize:'10px'}, 
               className: "dropdown-list-name", 
               href: "javascript:", 
               onClick: this.listAction}, 
          this.props.lists[i].name))
      )
    }
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: this.props.copyDropdownStyle}, 
        lists
      )
    );
  }
});

var ListDetailButtons = React.createClass({displayName: 'ListDetailButtons',
  // Rename List
  getInitialState: function() {
    return {
      editMode: false
    }
  },
  render: function() {
    //console.log(this.props.currentListObjectId)
    if(!this.state.editMode) {
      stuff = React.DOM.span({className: "", style: listNameStyle}, 
            (this.props.currentListName == "All") ? '' : React.DOM.i({className: "fa fa-bars", style: {fontSize:16, marginTop:-5}}), 
            (this.props.currentListName == "All") ? '' : "   " +this.props.currentListName
              )
    } else {
      stuff = React.DOM.input({className: "form-control", style: {width: 100, float: 'left', height: 24, marginTop: -1}})
    }
    return (

          React.DOM.div(null, 
            React.DOM.h4({style: {margin:0}}, 
              stuff, 
              React.DOM.a({href: "javascript:", 
                style: listBtn, 
                'data-toggle': "modal", 
                id: "renameListBtn", 
                'data-target': ".bs-renameList-modal-sm", 
                className: "btn btn-xs btn-default"}, 
                React.DOM.i({className: "fa fa-pencil"})
              ), 
              React.DOM.a({href: "javascript:", 
                onClick: this.deleteList, 
                style: listBtn, 
                className: "btn btn-xs btn-default"}, 
                React.DOM.i({className: "fa fa-trash-o"})
              )
            ), 

            RenameListModal({renameList: this.props.renameList}), 
            DeleteListModal({deleteList: this.props.deleteList})
          )
      );
  },

  renameList: function(newListName) {
    this.props.renameList(newListName)
  },

  deleteList: function(){
    thiss = this;
    swal({   
      title: "Are you sure?",   
      text: "Your will not be able to recover this prospect list!",   
      type: "warning",   
      showCancelButton: true,   
      confirmButtonColor: "#DD6B55",   
      confirmButtonText: "Yes, delete it!",   
      closeOnConfirm: false }, 
      function(){   swal("Deleted!", "Your prospect list has been deleted.", "success"); 
        console.log('deleted')
        thiss.props.deleteList()
      });
  },

  toggleEdit: function() {
    this.setState({editMode: !this.state.editMode })
  }
});



var PaginateOverlay = React.createClass({displayName: 'PaginateOverlay',
  render: function() {
    return (
        React.DOM.div({id: "paginate-overlay", style: {paddingTop:70}}, 
          Spinner({circleStyle: {backgroundColor:'white'}})
        )

    )
  }
})


},{"./delete_list_modal.js.min.js":19,"./loading_spinner.js.min.js":27,"./messenger.js.min.js":29,"./panel_footing.js.min.js":33,"./rename_list_modal.js.min.js":37,"./side_menu_user_prospects.js.min.js":41,"./spinner.js.min.js":48,"./user_prospect.js.min.js":52,"./user_prospect_header.js.min.js":53,"./user_side_menu_list.js.min.js":54}],37:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createListModal
  createList: function() {
    console.log($('#listTitle').val())

    data =  {
      'name'        : $('#listTitle').val().trim(),   //Waiting , Running
      'user'        : { '__type':'Pointer',
                      'className':'_User',
                      'objectId':'xWESiw5Smd' },
    }

    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectList',
      type:'POST',
      headers: appConfig.parseHeaders,
      data: JSON.stringify(data),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });

    data.count = 0

    this.props.createList(data)
    
    $('#createListModal').modal('hide')
    $('body').removeClass('modal-open');
    $('.modal-backdrop').remove();
    //$('button.close').click()
  },

  renameList: function(e) {
    e.preventDefault()
    //console.log($('#newListName').val())
    newListName = $('#newListName').val()
    if(newListName.trim() != "")
      this.props.renameList(newListName)
    // Disable Modal
  },

  render: function() {
    return (
          React.DOM.div({className: "modal fade bs-renameList-modal-sm", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "createListModal", style: {top:'200px'}}, 
            React.DOM.div({className: "modal-dialog modal-sm"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-list"}), "  Rename List")
                ), 
                React.DOM.div({className: "modal-body"}, 
                  React.DOM.form({onSubmit: this.renameList}, 
                    React.DOM.input({id: "newListName", type: "text", placeholder: "Enter list title...", className: "form-control"}), 
                    React.DOM.br(null), 
                    React.DOM.a({href: "javascript:", 
                      onClick: this.renameList, 
                      className: "btn btn-success", 
                      style: {display:'block', width:'100%'}}, 
                      "Create List"
                    )
                  )
                )
              )
            )
          )
    );
  }
});


},{}],38:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  render: function() {
    return (
      React.DOM.div(null, 
        "Scheduls"
      )
    );
  }
});

},{}],39:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {
      currentProspect: 0,
    }
  },
  //SendEmailModal
  render: function() {
    //console.log(this.props.currentTemplate)
    prospect = this.props.prospects[this.state.currentProspect]
    prospect = (prospect) ? prospect : {'name':'','email':''}
    //console.log(prospect)
    prospects = []
    for(i=0; i< this.props.prospects.length; i++){
      prospects.push(UserPlaceHolder({prospect: this.props.prospects[i]}))
    }
    email = (prospect.email) ? prospect.email.toLowerCase() : ""
    return (
          React.DOM.div({className: "modal fade bs-sendEmail-modal-lg", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "sendEmailModal", style: {top:'10px'}}, 
            React.DOM.div({className: "modal-dialog modal-lg"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
        React.DOM.button({type: "button", 
                style: {float:'right'}, 
                className: "btn btn-primary btn-sm"}, 
                React.DOM.i({className: "fa fa-paper-plane"}), " " + ' ' +
                "Send Email"), 
        React.DOM.button({type: "button", style: {marginRight:10, float:'right'}, 
                className: "btn btn-default btn-sm", 'data-dismiss': "modal"}, "Close"), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-envelope"}), "  Send Email" + ' ' +
                    "  ", 
                    React.DOM.small(null, "("+this.props.prospects.length+")")
                  )
                ), 
                React.DOM.div({className: "modal-body", style: {paddingTop:5}}, 
                  React.DOM.h4(null, "People"), 
                  
                  React.DOM.div({className: "prospect-container"}, 
                    prospects
                  ), 
                  React.DOM.br(null), 
                  React.DOM.h4({style: {display:'inline-block'}}, "Emails    ", 
                    React.DOM.small(null, (this.state.currentProspect+1)+' of '+this.props.prospects.length)), 
                  "   ", 
                  React.DOM.a({href: "javascript:", 
              className: (this.state.currentProspect == 0 ) ? "btn disabled" : "btn", 
                    onClick: this.previousProspect}, React.DOM.i({className: "fa fa-arrow-left"})), 
                  React.DOM.a({href: "javascript:", 
            className: (this.state.currentProspect == 135 ) ? "btn disabled" : "btn", 
                    onClick: this.nextProspect}, React.DOM.i({className: "fa fa-arrow-right"})), 

                  React.DOM.div(null, 

React.DOM.ul({className: "list-group email-holder", style: {borderTop:'solid 1px #eee'}}, 
  React.DOM.li({className: "list-group-item"}, 
    React.DOM.h5({style: {display:'inline-block',marginTop:0,marginBottom:0}}, "To:  "), 
    prospect.name + " - " + email
  ), 
  React.DOM.li({className: "list-group-item"}, 
    React.DOM.h5({style: {display:'inline-block',marginTop:0,marginBottom:0}}, "Subject:  "), " ", this.props.currentTemplate.subject
  ), 
  React.DOM.li({className: "list-group-item body"})
)
  
                  )

                ), 

      React.DOM.div({className: "modal-footer", style: {display:'none'}}, 
        React.DOM.button({type: "button", 
                className: "btn btn-default", 'data-dismiss': "modal"}, "Close"), 
        React.DOM.button({type: "button", 
                className: "btn btn-primary"}, "Send Email")
      )
              )
            )
          )
    );
  },

  previousProspect: function() {
    this.setState({currentProspect: this.state.currentProspect-1 })
  },

  nextProspect: function() {
    this.setState({currentProspect: this.state.currentProspect+1 })
  },

  parseTemplate: function(templateBody) {
    first_name = prospect.name.split(' ')[0]
    //hiring_signal = prospect.signals

    signals = (prospect.signals) ? prospect.signals[0] : ""
    templateBody = Mustache.render(templateBody, {
      hiring_signal: signals,
      first_name: prospect.name.split(' ')[0]
    })

    console.log(templateBody)
      
    return templateBody
  },

  componentDidUpdate: function() {
    //console.log(this.props.currentTemplate)
    parsedTemplate = this.parseTemplate(this.props.currentTemplate.body)
    
    //$('.body').html(this.props.currentTemplate.body)
    $('.body').html(parsedTemplate)
  }
});

var UserPlaceHolder = React.createClass({displayName: 'UserPlaceHolder',
  render: function() {
    return (
        React.DOM.div({className: "btn-group", style: {marginRight:5,marginBottom:5}}, 
          React.DOM.div({className: "btn-group"}, 
            React.DOM.button({type: "button", 
                    className: "btn btn-success btn-sm"}, 
              React.DOM.i({className: "fa fa-user"}), "  ", 
              (this.props.prospect) ? this.props.prospect.name : ""
            )
          ), 
          React.DOM.button({type: "button", className: "btn btn-success btn-sm"}, 
            React.DOM.i({className: "fa fa-trash-o"})
          )
        )
    )
  }
});

},{}],40:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Sent Mail
  getInitialState: function() {
    return {
      sentEmails: []
    }
  },

  componentDidMount: function() {
    thiss = this;
    $.ajax({
      url: 'https://api.parse.com/1/classes/SentEmail',
      data:{include: 'campaign,prospect,prospect.email_guesses.pattern'},
      headers: appConfig.headers,
      success: function(res) { thiss.setState({sentEmails: res.results}) },
      error: function() {}
    })
  },

  render: function() {
    sentEmails = []
    for(i=0;i< this.state.sentEmails.length; i++) 
      sentEmails.push(SentEmailRow({sentEmail: this.state.sentEmails[i]}))

    return (
      React.DOM.div({style: {overflow:'auto',height:550}}, 
        React.DOM.table({className: "table table-striped", style: {marginBottom:0}}, 
          React.DOM.thead(null, 
            React.DOM.th(null), 
            React.DOM.th(null, "Prospect Name"), 
            React.DOM.th(null, "Prospect Email"), 
            React.DOM.th({style: {width:290}}, "Status")
          ), 
          React.DOM.tbody(null, 
            sentEmails
          )
        )
      )
    );
  }
});

var SentEmailRow = React.createClass({displayName: 'SentEmailRow',
  render: function() {
    sentEmail = this.props.sentEmail
    //console.log(sentEmail)

    email = sentEmail.email
    if(email == "no_email"){
      first = sentEmail.prospect.name.split(' ')[0]
      last = _.last(sentEmail.prospect.name.split(' '))

      pattern = _.findWhere(sentEmail.prospect.email_guesses, {'tried':false})
      data = {first: first, last: last, fi: first[0], li: last[0]}
      email = Mustache.render(pattern.pattern.pattern, data).toLowerCase()
    }

    return (
      React.DOM.tr(null, 
        React.DOM.td(null, React.DOM.h6(null, 
            React.DOM.i({className: "fa fa-clock"}), 
            moment(sentEmail.createdAt).fromNow())), 
        React.DOM.td(null, 
          React.DOM.h6({style: {fontSize:14,fontWeight:'bold',marginBottom:0}}, sentEmail.prospect.name), 
          React.DOM.h6({style: {marginTop:4,marginBottom:0}}, sentEmail.prospect.pos.trim()), 
          React.DOM.h6({style: {marginTop:4}}, sentEmail.prospect.company_name)
        ), 
        React.DOM.td(null, React.DOM.h6(null, email)), 
        React.DOM.td({style: {paddingTop:13}}, 
          React.DOM.span({className: "label label-default"}, "Queued"), 
          React.DOM.i({className: "fa fa-chevron-circle-right text-muted", 
             style: {paddingLeft:5,paddingRight:5}}), 
          React.DOM.span({className: "label label-success"}, "Opened"), 
          React.DOM.i({className: "fa fa-chevron-circle-right text-muted", 
             style: {paddingLeft:5,paddingRight:5}}), 
          React.DOM.span({className: "label label-default"}, "Delivered"), 
          React.DOM.i({className: "fa fa-chevron-circle-right text-muted", 
             style: {paddingLeft:5,paddingRight:5}}), 
          React.DOM.span({className: "label label-default"}, "Replied")
        )
      )
    )
  }
})

},{}],41:[function(require,module,exports){
/** @jsx React.DOM */

var SideMenuListOption = require('./user_side_menu_list.js.min.js');
var createListModal = require('./create_list_modal.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  //SideMenuProspects - SideList
  getInitialState: function() {
    return {
      /*
      createList: 
      renameList:
      deleteList:
      changeList:
      currentList:
      totalCount:
      lists:
      */
    }
  },

  createList: function (data) {
    this.props.createList(data)
  },

  componentDidMount: function() {
  },

  changeList: function(e) {
    /*
    currentList = $(e.target).parent()//.data('list')
    console.log(currentList)
    this.props.changeList(currentList.name, currentList.objectId)
    */
  },

  render: function() {
    if(this.props.currentList == "All")
      styles = {'backgroundColor':'rgb(0, 122, 255)', 'color':'white'} 
    else
      styles =  {}

    lists = [SideMenuListOption({list: {name: 'All',count: this.props.totalCount}, 
                                 iconType: 'users', 
                                 changeList: this.props.changeList}), 
             SideMenuListOption({list: {name: 'Archived', count: '~'}, 
                                 iconType: 'archive', 
                                 changeList: this.props.changeList, 
                                 hideCount: true})]

    for(i=0;i< this.props.lists.length;i++){
      list = this.props.lists[i]
      if(list.list_type == "signal_list")
        iconType = "wifi"
      else if (list.list_type == "mining_job")
        iconType = "cloudDownload"
      if(list.list_type)
        lists.push( SideMenuListOption({list: list, 
                                        iconType: iconType, 
                                        changeList: this.props.changeList}))
      else 
        lists.push( SideMenuListOption({list: list, 
                                        changeList: this.props.changeList}))
    }

    return (
      React.DOM.div({className: "col-lg-2 col-md-2 col-sm-2 col-xs-2", 
           style: {padding:'0',height:'438px',backgroundColor:'#e0e9ee',
                   borderRight:'1px solid #b0b8bf',textAlign:'center'}}, 
        React.DOM.div({className: "prospect-list-header"}, " Lists "), 
        React.DOM.div({className: "btn-group-vertical", 
             style: {width:'100%', height: '320px', overflow: 'auto'}}, 
          lists
        ), 
        React.DOM.br(null), React.DOM.br(null), 
        React.DOM.a({href: "javascript:", className: "btn btn-primary new-list-btn", 
              'data-toggle': "modal", 'data-target': ".bs-example-modal-sm", 
              style: { backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
          React.DOM.i({className: "fa fa-plus-circle"}), "  New List"
        ), 
        createListModal({createList: this.createList, 
                         listClassName: this.props.listClassName}), " ", React.DOM.br(null)
      )
    );
  },
});

},{"./create_list_modal.js.min.js":12,"./user_side_menu_list.js.min.js":54}],42:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // SignalCalendar
  getInitialState: function() {
    return {
      reports : []
    }
  },

  getSignalReport: function() {
    thissss = this;
    qry = {'where' : JSON.stringify({profile:{
      __type:'Pointer',
      className:'ProspectProfile',
      objectId:this.props.currentProfile.objectId
    }})}

    // Get Signal Reports Of Current Profile
    $.ajax({
      url: 'https://api.parse.com/1/classes/SignalReport?order=-createdAt',
      type:'GET',
      data: qry,
      headers:appConfig.parseHeaders,
      success: function(res) {
        //console.log(res.results)
        thissss.setState({reports: res.results})
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  componentDidMount: function() {
    //this.getSignalReport()
  },

  componentDidUpdate: function() {
    //this.getSignalReport()
  },

  render: function() {
    reports = []
    for(i=0;i< this.props.reports.length; i++) {
      reports.push(SignalReportRow({setCurrentReport: this.setCurrentReport, 
                                    prospectSignalReport: this.prospectSignalReport, 
                                    setCurrentView: this.setCurrentView, 
                                    report: this.props.reports[i]}))
    }

    return (
      React.DOM.div({className: "container", style: {paddingLeft:0,
                                         paddingRight:0,width:'100%'}}, 
        React.DOM.div({style: {height:44,borderBottom:'solid 1px rgb(221, 221, 221)'}}, 
          React.DOM.h4({onClick: this.returnToCalendarView, 
              style: {fontWeight:200, float:'left',cursor:'pointer',marginTop:7,
                      paddingLeft:20,paddingTop:5, display:'inline-block'}}, 
                React.DOM.i({className: "fa fa-calendar", style: {marginRight:5}}), 
                this.props.currentProfile.name
          )
          

        ), 
        React.DOM.div({className: "col-md-12", style: {paddingLeft:0,paddingRight:0,
                                           height:356,overflow:'auto'}}, 
          React.DOM.div({style: {overflow:'auto'}}, 
            React.DOM.table({className: "table table-striped", style: {marginBottom:0}}, 
              React.DOM.thead(null, 
                React.DOM.th(null), 
                React.DOM.th({style: {textAlign:'center'}}, 
                  React.DOM.i({className: "fa fa-clock-o"}), " Last Ran"
                ), 
                React.DOM.th({style: {textAlign:'center'}}, "Posted Job Listing"), 
                React.DOM.th(null, "Company Signals"), 
                React.DOM.th({style: {display:'none'}}, "Prospect Signals"), 
                React.DOM.th({style: {width:150,textAlign:'center'}})
              ), 
              React.DOM.tbody({className: "reports"}, 
                reports
              )
            )
          )
        )
      )
    );
  },

  setCurrentReport: function(newReport) {
    this.props.setCurrentReport(newReport)
  },

  prospectSignalReport: function(signalReport) {
    this.props.prospectSignalReport(this.props.currentProfile, signalReport)
  },
});

var SignalReportRow = React.createClass({displayName: 'SignalReportRow',
  rowClick: function() {
    if(this.props.report.done)
      this.props.setCurrentReport(this.props.report)
    else
      alertify.log("This mining job is still in progress. You'll be notified when it's completed")
  },

  prospectSignalReport: function(e) {
    this.props.prospectSignalReport(this.props.report)
    e.stopPropagation()
  },


  render: function() {
    prospected = this.props.report.prospected
    if(!this.props.report.mining_job)
      icon = React.DOM.i({className: "fa fa-wifi"})
    else
      icon = React.DOM.i({className: "fa fa-cloud-download", style: {color:'#555'}})

    loading = (!this.props.report.done) ? React.DOM.div({className: "profile-loading", style: {marginLeft:30}}, 
          React.DOM.div({className: "double-bounce1", style: {backgroundColor:'#5cb85c'}}), 
          React.DOM.div({className: "double-bounce2", style: {backgroundColor:'#5cb85c'}})
          ) : React.DOM.a({href: "javascript:", 
                    onClick: this.prospectSignalReport, 
             style: {fontWeight:'bold',marginTop:5}, 
     className: (prospected) ? "btn btn-xs btn-success disabled" : "btn btn-xs btn-success"}, 
             (prospected) ? 'Prospected' : 'Prospect All'
          )
    // Make an Alert when somebody clicks on in progress signal report
    return (
      React.DOM.tr({onClick: this.rowClick, style: {cursor:'pointer'}}, 
        React.DOM.td({style: {textAlign:'right',paddingTop:15}}, 
          icon
        ), 
        React.DOM.td({style: {textAlign:'center'}}, 
          React.DOM.h6(null, 
            moment(this.props.report.createdAt).fromNow()
          )
        ), 
        React.DOM.td({style: {textAlign:'center'}}, 
          React.DOM.h6(null, 
          'lol'
          )
        ), 
        React.DOM.td(null, 
          React.DOM.span({className: "label label-success"}, 
            this.props.report.company_count
          ), 
          React.DOM.h6({style: {display:'inline-block'}}, 
            "  Companies found."
          )
        ), 
        React.DOM.td({style: {display:'none'}}, 
          React.DOM.span({className: "label label-success"}, 
            this.props.report.people_count
          ), 
          React.DOM.h6({style: {display:'inline-block'}}, 
            "  People found."
          )
        ), 
        React.DOM.td({style: (this.props.report.done) ? {} : {paddingTop:17}}, 
          loading
        )
      )
    )
  }
});

},{}],43:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // SignalDetail
  getInitialState: function() {
    return {
      signals: []
    }
  },

  componentDidMount: function() {
    thissss = this;
    currentProfileReport = JSON.stringify({
      __type: 'Pointer',
      className: 'SignalReport',
      objectId: this.props.currentProfileReport.objectId
    })

    console.log('CURRENT PROFILE')
    console.log(currentProfileReport)
    qry = 'where={"signal_report":'+currentProfileReport+'}&include=company_signal,company_signal.signals&order=-createdAt'
    $.ajax({
      url: 'https://api.parse.com/1/classes/PeopleSignal?'+qry,
      type:'GET',
      headers:appConfig.parseHeaders,
      success: function(res) {
        console.log('SIGNAL DETAIL')
        console.log(res.results)
        thissss.setState({signals: res.results})
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  returnToCalendarView: function() {
    console.log('return to calendar view')
  },

  render: function() {
    signals = []
    for(i=0;i< this.state.signals.length; i++)
      signals.push(SignalRow({signal: this.state.signals[i]}))

    currentProfileReport = this.props.currentProfileReport
    return (
      React.DOM.div({className: "container", style: {height:356,paddingLeft:0,
                                         paddingRight:0,width:'100%'}}, 
        React.DOM.div({style: {height:44,borderBottom:'solid 1px rgb(221, 221, 221)'}}, 
          React.DOM.h4({onClick: this.returnToCalendarView, 
              style: {float:'left',cursor:'pointer',marginTop:7,fontWeight:200,
                      paddingLeft:20,paddingTop:5,display:'inline-block'}}, 
              
                React.DOM.i({className: "fa fa-calendar", style: {marginRight:5}}), 
                this.props.currentProfile.name
          ), 
          React.DOM.h6({style: {fontSize:13,paddingLeft:5,paddingTop:5,display:'inline-block'}}, 
            React.DOM.i({className: "fa fa-chevron-right", style: {fontSize:9}}), "  ", 
            React.DOM.i({className: "fa fa-clock-o"}), "  ", 
            moment(currentProfileReport.createdAt).fromNow(), "  "
          ), 

          React.DOM.a({href: "javascript:", style: {fontWeight:'bold',float:'right',
                                        marginRight:10,marginTop:10}, 
             className: "btn btn-success btn-xs"}, 
            "Prospect All"
          ), 

          React.DOM.div({className: "btn-group", 
               style: {float:'right',marginTop:10,marginRight:10}, 
               'data-toggle': "buttons"}, 
            React.DOM.label({className: "btn btn-xs btn-default active", style: {width:30}}, 
              React.DOM.input({type: "checkbox"}), 
              React.DOM.i({className: "fa fa-user"})
            ), 
            React.DOM.label({className: "btn btn-xs btn-default", style: {width:30}}, 
              React.DOM.input({type: "checkbox"}), 
              React.DOM.i({className: "fa fa-building"})
            )
          )

        ), 
        React.DOM.div({className: "col-md-12", style: {paddingLeft:0,paddingRight:0}}, 
          React.DOM.div({style: {overflow:'auto',height:356}}, 
            React.DOM.table({className: "table table-striped"}, 
              React.DOM.thead(null, 
                React.DOM.th({style: {textAlign:'center',width:90}}, 
                  React.DOM.i({className: "fa fa-clock-o"})
                ), 

                React.DOM.th(null, "People"), 

                React.DOM.th(null, "Companies"), 

                React.DOM.th({style: {width:90,textAlign:'center'}}
                )

              ), 
              React.DOM.tbody({className: "reports"}, 
                signals
              )
            )
          )
        )
      )
    );
  }
});

var SignalRow = React.createClass({displayName: 'SignalRow',
  render: function() {
    company = (this.props.signal.company_signal) ? this.props.signal.company_signal : {}
    return (
      React.DOM.tr(null, 
        React.DOM.td({style: {textAlign:'center'}}, 
          React.DOM.h6(null, 
            moment(this.props.signal.createdAt).fromNow()
          )
        ), 

        React.DOM.td(null, 
          React.DOM.h6(null, this.props.signal.link_text), 
          React.DOM.h6(null, this.props.signal.title)
        ), 

        React.DOM.td(null, 
          React.DOM.h6(null, company.name), 
          React.DOM.h6(null, this.props.signal.title)
        ), 

        React.DOM.td(null, 
          React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", 
            style: {fontWeight:'bold'}}, 
            "Prospect"
          )
        )
      )
    )
  }
})

},{}],44:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // SignalLoading
  getInitialState: function() {
    return {
      count: '~',
      prospectName : '~',
      prospectTitle : '~',
      companyName : '~',
    }
  },

  initialize: function() {
    var thiss = this;
    var pusher = new Pusher('1a68a96c8fde938fa75a');
    objectId = this.props.currentProfile.objectId
    var channel = pusher.subscribe(objectId);
    channel.bind("my-event", function(data) {
      console.log(data)
      thiss.setState({
        count: data.count,
        prospectName: data.name,
        prospectTitle: data.title,
        companyName: data.company
      })
    });

    // Get Signal Report Count
    // Get Last PeopleSignal Found
    qry = { profile: appConfig.pointer('ProspectProfile',objectId) }
    $.ajax({
      url:'https://api.parse.com/1/classes/SignalReport',
      headers:appConfig.headers,
      data: {'where':JSON.stringify(qry),order:'-createdAt'},
      success: function(res) {
        //console.log(res)
        count = (res.results[0]) ? res.results[0].people_count : 0
        
        thiss.setState({count: count })
      },
    });
    $.ajax({
      url:'https://api.parse.com/1/classes/PeopleSignal',
      headers:appConfig.headers,
      data: {'where':JSON.stringify(qry),order:'-createdAt'},
      success: function(res) {
        //console.log(res)
        thiss.setState({
          prospectName: (res.results[0]) ? res.results[0].link_text : "",
          prospectTitle: (res.results[0]) ? res.results[0].title : "",
          companyName: (res.results[0]) ? res.results[0].company : ""
        })
      },
    });
  },

  componentDidMount: function() {
    Pusher.log = function(message) {
      if (window.console && window.console.log) {
        //window.console.log(message);
      }
    };

    this.initialize()
  },

  componentDidUpdate: function() {
  },

  componentWillReceiveProps: function() {
    this.setState({
      count: '~',
      prospectName : '~',
      prospectTitle : '~',
      companyName : '~',
    })
    this.initialize()
  },

  render: function() {
    // Show companies for hiring signals
    return (
      React.DOM.div({style: {background:'linear-gradient(#dae8ff,#dae8ff)', backgroundImage: 'radial-gradient(circle at center center,#fff,#dff1fd 900px)',height:'100%',paddingTop:10}}, 
        React.DOM.div({className: "signal-card", style: {
            width:500,textAlign:'center',display:'block',marginRight:'auto',
            marginLeft:'auto',marginTop:0,height:200
          }}, 

        React.DOM.div({className: "loading-two-balls", style: {height:20,width:20}}, 
          React.DOM.div({className: "dot1", style: {color:'black'}}), 
          React.DOM.div({className: "dot2", style: {color:'black'}})
        ), 
        React.DOM.div({id: "", style: {color:'#1ca3fd', fontWeight:'bold',marginTop:-10,
                          marginLeft:-200, fontSize:32, fontFamily:'Proxima-Nova'}}, 
            this.state.count + " people found."
          ), 
          React.DOM.div({style: {float:'right',marginTop:-48,marginRight:55}}, 
            React.DOM.h6({style: {marginBottom:3, fontWeight:'bold'}}, this.state.prospectName, " -  ", 
              React.DOM.span({style: {fontWeight:500, fontStyle:'italic'}}, 
                this.state.prospectTitle)), 
            React.DOM.h6({style: {marginTop:0,textAlign:'left'}}, 
              this.state.companyName
            )
          )
        )
      )
    )
  },
});

},{}],45:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // SignalProfile
  setCurrentView: function(e) {
    if(!this.props.profile.mining_job)
      this.props.setCurrentView('Calendar')
    else
      this.props.setCurrentView('MiningJobCalendar')
    //e.stopPropagation()
  },

  calendarClick:function(e) {
    this.props.setCurrentProfile(this.props.profile)
    if(!this.props.profile.mining_job)
      this.props.setCurrentView('Calendar')
    else
      this.props.setCurrentView('MiningJobCalendar')
    e.stopPropagation()
  },

  setCurrentProfile: function() {
    this.props.setCurrentProfile(this.props.profile)
    this.props.setCurrentView('Feed')
  },

  removeTheProfile: function() {
    this.props.removeProfile(this.props.profile)
  },

  removeProfile: function() {
    thissss = this;
    console.log(thiss.removeTheProfile)

    swal({   
      title: "Are you sure?",   
      text: "Your will not be able to recover this prospect list!",   
      type: "warning",   
      showCancelButton: true,   
      confirmButtonColor: "#DD6B55",   
      confirmButtonText: "Yes, delete it!",   
      closeOnConfirm: false }, 
      function(){   
        swal("Deleted!", "Your prospect list has been deleted.", "success"); 
        thissss.removeTheProfile()
        console.log('deleted')
      });
  },

  //componentDidUpdate: function(prevProps, prevState) { },
  componentWillReceiveProps: function(nextProps) {
  //componentWillUpdate: function(nextProps) {
    if(typeof(this.props.profile.objectId) == "undefined") {
      console.log('RECEIVE PROPS')

      var pusher = new Pusher('1a68a96c8fde938fa75a');
      var thiss = this;
      console.log(nextProps)
      console.log(nextProps.profile)
      console.log(_.keys(nextProps.profile))
      console.log(nextProps.profile.objectId)
      objectId = nextProps.profile.objectId
      console.log('new pusher channel -> '+ objectId)

      var channel = pusher.subscribe(objectId);
      channel.bind("done", function(data) {
        console.log(data)
        console.log(thiss.props)
        //thiss.setState({ done: data.done_timestamp })
        thiss.props.updateMiningJobDone(thiss.props.profile)
        alertify.success("Success notification");
      });
    }
  },

  componentDidMount: function() {
    var pusher = new Pusher('1a68a96c8fde938fa75a');
    objectId = this.props.profile.objectId
    console.log('new pusher channel ->', objectId)
    var channel = pusher.subscribe(objectId);
    var thiss = this;
    channel.bind("done", function(data) {
      console.log(data)
      console.log(thiss.props)
      //thiss.setState({ done: data.done_timestamp })
      thiss.props.updateMiningJobDone(thiss.props.profile)
      alertify.success("Success notification");
    });
  },

  render: function() {
    signalDetails = []
    for(i=0;i< this.props.profile.profiles.length; i++) {
      signalDetails.push(ProfileType({profile: this.props.profile.profiles[i]}))
    }
    if(!this.props.profile.mining_job) 
      icon = React.DOM.i({className: "fa fa-wifi", style: {marginRight:5}})
    else
      icon = React.DOM.i({className: "fa fa-cloud-download", style: {marginRight:5}})

    loading = (!this.props.profile.done) ? React.DOM.div({className: "profile-loading"}, 
            React.DOM.div({className: "double-bounce1"}), 
            React.DOM.div({className: "double-bounce2"})
          ) : ""
    
    if(this.props.profile.mining_job && this.props.profile.done)
      mining_job_done = React.DOM.i({className: "fa fa-check-circle", style: {color:'#0096ff',marginLeft:5,fontSize:15}})
    else
      mining_job_done = ""

    selectedStyle = {paddingTop:5,borderLeft:0,paddingLeft:10, borderRight:'1px solid #ddd', borderLeft: '5px solid #0096ff !important'}
    regularStyle = {paddingTop:5,borderLeft:0,paddingLeft:10, borderRight:'1px solid #ddd', borderLeft: '5px solid red !important'}
    regularStyle = {paddingTop:5,borderLeft:0,paddingLeft:10, borderRight:'1px solid #ddd', borderLeft:'5px solid rgba(0,0,0,0)'}
    selected= this.props.profile.objectId == this.props.currentProfile.objectId
    itemStyle = (selected) ? selectedStyle : regularStyle
    itemClass = (selected) ? "list-group-item ideal-company-profile list-group-selected" : "list-group-item ideal-company-profile"


    return (
      React.DOM.div({className: itemClass, 
           onClick: this.setCurrentProfile, 
           style: regularStyle}, 
        React.DOM.span({className: "profile-title"}, 
          React.DOM.h6({className: "label label-default profile-name"}, 
            icon, 
            this.props.profile.name
          ), 
          loading, mining_job_done, 
          React.DOM.a({href: "javascript:", 
             className: "btn btn-primary btn-xs signal-detail-btn", 
             onClick: this.removeProfile}, 
            React.DOM.i({className: "fa fa-archive"})), 
          React.DOM.a({href: "javascript:", 
            style: {display:'none'}, 
            className: "btn btn-primary btn-xs signal-detail-btn"}, 
            React.DOM.i({className: "fa fa-cog"})), 
          React.DOM.a({href: "javascript:", className: "btn btn-primary btn-xs signal-detail-btn", 
             onClick: this.calendarClick}, 
            React.DOM.i({className: "fa fa-calendar"})), 
          React.DOM.a({href: "javascript:", 
             onClick: this.launchModal, 
             style: (this.props.profile.mining_job) ? {display:'none'}:{display:'block'}, 
             className: "btn btn-primary btn-xs signal-detail-btn"}, 
            React.DOM.i({className: "fa fa-cloud-download"}))
        ), 

        React.DOM.div({className: "profile-body", style: {marginTop:5}}, 
          signalDetails
        )
      )
    );
  },

  launchModal: function(e) {
    $('#createMiningJobModal').modal()
    this.props.setCurrentProfile(this.props.profile)
    if(this.props.currentView == 'Calendar')
      this.props.setCurrentView('Calendar')
    else if(this.props.currentView == 'Feed')
      this.props.setCurrentView('Feed')
    e.stopPropagation()
  }
});

var ProfileType = React.createClass({displayName: 'ProfileType',
  render: function() {

  if(this.props.profile){
    if(this.props.profile.className == "HiringProfile") {
      signalIcon = React.DOM.i({className: "fa fa-suitcase"})
      signalName = "Hiring"
      signalValue = _.reduce(this.props.profile.roles, function(result, role) {
        return role + ", "+ result
      }, "");
      //console.log('wtf')
      //console.log(signalValue)
    } else if (this.props.profile.className  == "EmployeeProfile") {
      signalIcon = React.DOM.i({className: "fa fa-users"})
      signalName = "Company Size"
      signalValue = _.reduce(this.props.profile.employees, function(result, role) {
        return role + ", "+ result
      }, "");
    } else if (this.props.profile.className  == "FundingProfile") {
      signalIcon = React.DOM.i({className: "fa fa-institution"})
      signalName = "Funding"
      signalValue = _.reduce(this.props.profile.revenues, function(result, role) {
        return role + ", "+ result
      }, "");
    } else if (this.props.profile.className  == "RevenueProfile") {
      signalIcon = React.DOM.i({className: "fa fa-money"})
      signalName = "Revenue"
      signalValue = _.reduce(this.props.profile.revenues, function(result, role) {
        return role + ", "+ result
      }, "");
    } else if (this.props.profile.className  == "TechnologyProfile") {
      signalIcon = React.DOM.i({className: "fa fa-wrench"})
      signalName = "Technology"
    } else if (this.props.profile.className  == "LocationProfile") {
      signalIcon = React.DOM.i({className: "fa fa-map-marker"})
      signalName = "Locale"
      signalValue = _.reduce(this.props.profile.locale, function(result, role) {
        return role + ", "+ result
      }, "");
    } else if (this.props.profile.className  == "IndustryProfile") {
      signalIcon = React.DOM.i({className: "fa fa-building"})
      signalName = "Industries"
      signalValue = _.reduce(this.props.profile.industries, function(result, role) {
        return role + ", "+ result
      }, "");
    } else if (this.props.profile.className  == "CompanySizeProfile") {
      signalIcon = React.DOM.i({className: "fa fa-wrench"})
      signalName = "Technology"
    } else if (this.props.profile.className  == "ListProfile") {
      signalIcon = React.DOM.i({className: "fa fa-list-alt"})
      signalName = "Company List"
      signalValue = this.props.profile.listName
    } else if (this.props.profile.className  == "ProspectTitleProfile") {
      signalIcon = React.DOM.i({className: "fa fa-user"})
      signalName = "Titles"
      signalValue = _.reduce(this.props.profile.title_keywords, 
     function(result, role) {
        return role + ", "+ result
      }, "");
    } else {
      signalIcon = "not found"
      signalName = "Not found"
      signalValue= "Not found"
    }
  } else {
      signalIcon = "not found"
      signalName = "Not found"
      signalValue= "Not found"

  }

    return (
      React.DOM.span({className: "ideal-profile"}, " ", signalIcon, 
        React.DOM.h6({className: "profile-signal-name"}, signalName, " - "), 
        React.DOM.span({className: "profile-signal-value"}, " "+signalValue)
      )
    );
  }
});

/*
  Funding Profile
  - Amount Raised - btn group
  - Stage - btn group

  People Profile
  - Locale - tags w/ typahead
  - Title - tags w/ typahead

  Company Profile
  - Industries - tags with typahead
  - Revenue - btn group
  - # of Employees - btn group
  - Locale - tags with typahead
*/


},{}],46:[function(require,module,exports){
/** @jsx React.DOM */

var SignalProfile = require('./signal_profile.js.min.js')
var SignalLoading = require('./signal_loading.js.min.js')
var MiningJobLoading = require('./mining_job_loading.js.min.js')
var CompanySignalCard = require('./company_signal_card.js.min.js')
var PeopleSignalCard = require('./people_signal_card.js.min.js')
var SignalCalendar = require('./signal_calendar.js.min.js')
var MiningJobCalendar = require('./mining_job_calendar.js.min.js')
var SignalsDetail = require('./signal_detail.js.min.js')

var CreateHiringSignalModal = require('./create_hiring_signal_modal.js.min.js')
var CreateFundingSignalModal = require('./create_funding_signal_modal.js.min.js')
var CreateProspectProfileModal = require('./create_prospect_profile_modal.js.min.js')
var CreateCompanyProfileModal = require('./create_company_profile_modal.js.min.js')
var CreateMiningJobModal = require('./create_mining_job_modal.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {
      signalType: 'CompanySignal',
      currentProfile: {name:'All'},
      currentProfileObjectId: {},
      currentProfileReport: {},
      signals: [],
      currentView: 'Feed',
      profiles: [],
    }
  },

  setCurrentReport: function(newProfileReport) {
    console.log('NEW REPORT')
    console.log(newProfileReport)

    this.setState({ 
      currentView:'Detail',
      currentProfileReport: newProfileReport 
    })
  },

  prospectSignalReport: function(profile, report) {
    profiles = _.map(this.state.profiles, function(_profile) {
                  if(_profile.objectId == profile.objectId){
                    reports = _.map(_profile.reports, function(_report) {
                                if(_report.objectId == report.objectId){
                                  _report.prospected = true
                                  return _report
                                }
                                return _report
                              })
                    _profile.reports = reports
                    return _profile
                  }
                  return _profile
                })
                //console.log(profiles)
    this.setState({profiles: profiles})
    $.ajax({
      url:'https://api.parse.com/1/classes/SignalReport/'+report.objectId,
      type:'PUT',
      headers:appConfig.headers,
      data:JSON.stringify({prospected:moment().valueOf()/1000}),
      success: function(res) {},
      error: function(err) {}
    })
  },

  setCurrentView: function(newSignalView) {
    this.setState({currentView: newSignalView})
  },

  render: function() {
    currentProfile = this.state.currentProfile
    reports = this.state.currentProfile.reports
    reports = (reports) ? reports : []
    reports = _.sortBy(reports, function(o){ return o.createdAt }).reverse()
    //console.log(currentProfile)
    if(currentProfile.name == "All" || currentProfile.done){
      if(this.state.currentView == "Feed") {
        signalView = React.DOM.div(null, 
            SignalDetailButtons({signalType: this.state.signalType, 
                                 currentProfile: this.state.currentProfile, 
                                 setSignalType: this.setSignalType}), 
            SignalsFeed({setCurrentView: this.setCurrentView, 
                         signalType: this.state.signalType, 
                         profile: this.state.currentProfile, 
                         signals: this.state.signals})
            )
      } else if(this.state.currentView == "Calendar"){
        signalView = SignalCalendar({currentProfile: this.state.currentProfile, 
                                    prospectSignalReport: this.prospectSignalReport, 
                                     reports: reports, 
                                     setCurrentReport: this.setCurrentReport, 
                                     setCurrentView: this.setCurrentView})
      } else if(this.state.currentView == "Detail"){
        signalView = SignalsDetail({currentProfile: this.state.currentProfile, 
                                    currentProfileReport: this.state.currentProfileReport, 
                                    setCurrentView: this.setCurrentView})
      } else if(this.state.currentView == "MiningJobCalendar"){
        signalView = MiningJobCalendar({currentProfile: this.state.currentProfile, 
                                        setCurrentReport: this.setCurrentReport, 
                                        setCurrentView: this.setCurrentView})
      }
    } else {
      // Show Calendar Even When Signal Is Loading
      if(this.state.currentView == "Calendar"){
        signalView = SignalCalendar({currentProfile: this.state.currentProfile, 
                                     setCurrentReport: this.setCurrentReport, 
                                     reports: reports, 
                                     setCurrentView: this.setCurrentView})
      } else {
        console.log(this.state.currentProfile)
        if(this.state.currentProfile.type == "prospect_profile")
          signalView =MiningJobLoading({currentProfile: this.state.currentProfile})
        else
          signalView = SignalLoading({currentProfile: this.state.currentProfile})
      }
    }

   return (
      React.DOM.div({style: {height:400}}, 
        React.DOM.div({className: "container", style: {padding:0, width:'100%', height:'100%'}}, 
          React.DOM.div({className: "col-md-3 signal-list", 
               style: { height:'102.8%', padding:0}}, 
              SignalsOptions({profiles: this.state.profiles, 
                              addProfile: this.addProfile, 
                              updateMiningJobDone: this.updateMiningJobDone, 
                              removeProfile: this.removeProfile, 
                              setCurrentView: this.setCurrentView, 
                              currentProfile: this.state.currentProfile, 
                              setCurrentProfile: this.setCurrentProfile})
          ), 
          React.DOM.div({className: "col-md-9", style: {height:'100%',padding:0}}, 
            signalView
          )
        ), 

        CreateMiningJobModal({createMiningJob: this.createMiningJob, 
                              currentProfile: this.state.currentProfile}), 
        CreateHiringSignalModal({addProfile: this.addProfile}), 
        CreateFundingSignalModal({addProfile: this.addProfile}), 
        CreateCompanyProfileModal({addProfile: this.addProfile}), 
        CreateProspectProfileModal({addProfile: this.addProfile, 
                      updateProfileWithObjectId: this.updateProfileWithObjectId})
      )
    )
  },

  createMiningJob: function(theProfile, date) {
    console.log('create mining job')
    var thiss = this;
    report = {
      //createdAt: moment().valueOf(),
      company_count: 0,
      people_count: 0,
      list_type:'mining_job',
      done: 0,
      mining_job: true,
    }

    profiles=_.map(this.state.profiles, function(profile) {
      if(_.isEqual(theProfile, profile)){
        if(profile.mining_days){
          profile.mining_days.push(date)
        }else{
          profile.mining_days = [date]
        }

        if(profile.reports){
          profile.reports = [report].concat(profile.reports)
        }else{
          profile.reports = [report]
        }
        
        thiss.setState({currentProfile: profile})
        thiss.persistMiningJob(date, report)
        return profile
      }
      return profile
    })
    thiss.setState({profiles: profiles})
  },

  persistMiningJob: function(date, report) {
    console.log(this.state)
    objectId = this.state.currentProfile.objectId
    $.ajax({
      url:'https://api.parse.com/1/classes/SignalReport',
      type:'POST',
      headers:appConfig.headers,
      data:JSON.stringify(report),
      success: function(res) {
        console.log(res)
        $.ajax({
          url:'https://api.parse.com/1/classes/ProspectProfile/'+objectId,
          type:'PUT',
          headers:appConfig.headers,
          data:JSON.stringify({
            mining_days: {
              __op:'AddUnique',
              objects:[date],
            },
            reports: {
              __op:'AddUnique',
              objects:[appConfig.pointer('SignalReport', res.objectId)]
            }
          }),
          success: function(res) { console.log(res) },
          error: function(err) {},
        })
      },
      error: function(err) {},
    })
  },

  addProfile: function(newProfile) {
    profiles = this.state.profiles
    this.setState({profiles: [newProfile].concat(profiles)})
    this.setCurrentProfile(newProfile)
  },

  removeProfile: function(oldProfile) {
    this.setState({profiles: _.reject(this.state.profiles, function(profile) {
      return _.isEqual(oldProfile, profile)
    })})

    if(oldProfile.objectId){
      $.ajax({
        url:'https://api.parse.com/1/classes/ProspectProfile/'+oldProfile.objectId,
        headers:appConfig.headers,
        type:'DELETE',
      })
    }
  },

  updateMiningJobDone: function(profile) {
    profiles = _.map(this.state.profiles, function(_profile) {
                  if(_profile.objectId == profile.objectId) {
                    _profile.done = true
                    return _profile
                  }
                  return _profile
                })
    this.setState({profiles: profiles})
  },

  updateProfileWithObjectId: function(timestamp, objectId) {
    console.log('UPDATE PROFILES')
    newProfiles = _.map(this.state.profiles, function(profile) {
        if(profile.timestamp == timestamp) {
          profile.objectId = objectId
          return profile
        }
      return profile
    })
    
    console.log(newProfiles)
    this.setState({profiles: newProfiles})
    console.log(objectId)

    var pusher = new Pusher('1a68a96c8fde938fa75a');
    console.log('new pusher channel ->', objectId)
    var channel = pusher.subscribe(objectId);
    var thiss = this;
    channel.bind("done", function(data) {
      thiss.updateMiningJobDone(_.findWhere(thiss.state.profiles, {timestamp: timestamp}))
      alertify.success("New Success notification");
    });
  },

  setCurrentProfile: function(newProfile) {
    if(newProfile.only_people) {
      this.getSignals('PeopleSignal', 
                      JSON.stringify({
                         __type: 'Pointer',
                         className: 'ProspectProfile', 
                         objectId: newProfile.objectId}))
      this.setState({
        signalType: 'PeopleSignal',
        currentProfile: newProfile 
      })
    } else {
      this.setState({currentProfile: newProfile })
    }

    this.getSignals('PeopleSignal', newProfile)
  },

  componentDidMount: function() {
    this.getSignals(this.state.signalType)
    currentUser = JSON.parse(localStorage.currentUser)
    user = JSON.stringify(appConfig.pointer('_User', currentUser.objectId))
    company = JSON.stringify(currentUser.company)
    qry = 'where={"company":'+company+',"user":'+user+'}'
    qry = qry+'&include=profiles,reports,prospect_list&order=-createdAt'
  
    thisss = this
    $.ajax({
      url: 'https://api.parse.com/1/classes/ProspectProfile',
      type:'GET',
      data: qry,
      headers:appConfig.parseHeaders,
      success: function(res) {
        console.log('Prospect Profile')
        console.log(res.results)
        //thisss.setCurrentProfile(res.results[0])
        thisss.setState({profiles: res.results})
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  setSignalType: function(labelText) {
    if(labelText == "People")
      currentSignal = "PeopleSignal"
    else if(labelText == "Companies")
      currentSignal = "CompanySignal"
    this.getSignals(currentSignal)
    this.setState({signalType: currentSignal})
  },

  componentDidUpdate: function(nextProps, nextState) {
  },

  getSignals: function(signalType, currentProfile) {
    currentUser = JSON.parse(localStorage.currentUser)
    user = {
      '__type'    : 'Pointer',
      'className' : '_User',
      'objectId'  : currentUser.objectId
    }

    user = JSON.stringify(user)
    company = JSON.stringify(currentUser.company)
    profiles = this.state.currentProfile.profiles

    if(profiles){
      //qry = 'where={"company":'+company+',"user":'+user+',"profile":'+currentProfile+'}'
      profile = JSON.stringify({
        __type:'Pointer',
        className:'ProspectProfile',
        objectId:currentProfile.objectId
      })
      qry = 'where={"profile":'+profile+'}'
      //qry = qry + ',"profiles":{"$all":'+JSON.stringify(profiles)+'}}'
      if(signalType == 'PeopleSignal')
        qry = qry + '&include=signals'
      else
        qry = qry + '&include=signals,company'

    } else {
      qry = {'include':['signals','company']}
    }
  
    thiss = this
    $.ajax({
      url: 'https://api.parse.com/1/classes/'+signalType,
      //url: 'https://api.parse.com/1/classes/CompanySignal',
      type:'GET',
      data: qry,
      headers:appConfig.parseHeaders,
      success: function(res) {
        //console.log(res.results)
        thiss.setState({signals: res.results})
      },
      error: function(err) { console.log(err) }
    });
  },
});

var SignalDetailButtons = React.createClass({displayName: 'SignalDetailButtons',
  setSignalType: function(e) {
    this.props.setSignalType($(e.target).text().trim())
  },

  render: function() {
    ppl = (this.props.signalType == "PeopleSignal") ? "choose btn btn-primary app-active" : "choose btn btn-primary"
    cmp = (this.props.signalType == "CompanySignal") ? "choose btn btn-primary app-active" : "choose btn btn-primary"

    cmp = (this.props.currentProfile.only_people)  ? cmp + " disabled" : cmp

    return (
      React.DOM.div(null, 
        React.DOM.div({id: "signalDetailButtons", style: {height:44}}, 
          React.DOM.h4({style: {display:'inline-block',float:'left',width:300,
                      fontWeight:200,marginTop:4,paddingLeft:20}}, 
            React.DOM.i({className: "fa fa-newspaper-o"}), " ",  
            this.props.currentProfile.name
          ), 
          React.DOM.div({className: "btn-group", style: {marginLeft:'0%'}}, 
            React.DOM.a({className: ppl, 
               style: {padding:2}, 
               onClick: this.setSignalType}, 
                React.DOM.i({className: "fa fa-user"}), " People"
            ), 
            React.DOM.a({className: cmp, 
               style: {padding:2}, 
               onClick: this.setSignalType}, 
                React.DOM.i({className: "fa fa-building"}), " Companies"
            )
          )
        )
      )
    );
  }
});

var SignalsOptions = React.createClass({displayName: 'SignalsOptions',
  addProfile: function(newProfile) {
    this.props.addProfile(newProfile)
  },

  setCurrentProfile: function(currentProfile) {
    this.props.setCurrentProfile(currentProfile)
  },

  removeProfile: function(oldProfile) {
    this.props.removeProfile(oldProfile)
  },

  componentDidMount: function() {
  },

  setCurrentView: function(newView) {
    console.log(newView)
    this.props.setCurrentView(newView)
  },

  render: function() {
    profs = []
    //console.log('signals render')
    for(i=0; i< this.props.profiles.length;i++) {
      select= this.props.profiles[i].objectId == this.props.currentProfile.objectId
      profs.push(SignalProfile({setCurrentProfile: this.setCurrentProfile, 
                                updateMiningJobDone: this.props.updateMiningJobDone, 
                                setCurrentView: this.setCurrentView, 
                                currentProfile: this.props.currentProfile, 
                                selected: select, 
                                removeProfile: this.removeProfile, 
                                profile: this.props.profiles[i]}))
    }

    profiles_num = (this.props.profiles.length) ? this.props.profiles.length : "~"
    return (
      React.DOM.div(null, 
      React.DOM.div({className: "list-group"}, 
        React.DOM.li({className: "list-group-item", 
            style: {borderTop:0,borderLeft:0,height:44,paddingRight:5,paddingLeft:10,
                    backgroundColor:'#e0e6ea',
                    backgroundImage:'linear-gradient(#f5f7f8,#e0e6ea);'}}, 
            React.DOM.h4({style: {margin:0,textAlign:'center',fontWeight:200,
                        float:'left',marginTop:2}}, "Profiles (", profiles_num, ")"), 
          React.DOM.a({href: "javascript:", 
             className: "btn btn-xs btn-primary create-profile-dropdown", 
             'data-toggle': "dropdown", 
             onClick: this.launchDropdown, 
             style: {float:'right',
              backgroundImage:'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
            React.DOM.i({className: "fa fa-plus"}), "  Create Profile"
          ), 

          React.DOM.ul({className: "dropdown-menu", 
              style: {marginLeft:175,marginTop:-10}, 
              role: "menu", 'aria-labelledby': "dropdownMenu1"}, 
            React.DOM.li({role: "presentation"}, 
              React.DOM.a({href: "javascript:", 
                 onClick: this.launchModal, 
                 style: {paddingLeft:5}}, 
                 React.DOM.h6({style: {margin:2}}, 
                   React.DOM.i({className: "fa fa-suitcase", style: {width:10}}), 
                  "  Create Hiring Signal"
                )
              )
            ), 
            React.DOM.li({role: "presentation", style: {display:'none'}}, 
              React.DOM.a({href: "javascript:", 
                 onClick: this.launchModal, 
                 style: {paddingLeft:5}}, 
                React.DOM.h6({style: {margin:2}}, React.DOM.i({className: "fa fa-institution", style: {width:10}}), 
                  "  Create Funding Signal"
                )
              )
            ), 
            React.DOM.li({role: "presentation"}, 
              React.DOM.a({onClick: this.launchModal, 
                 style: {paddingLeft:5,paddingRight:2}, 
                 href: "javascript"}, 
                React.DOM.h6({style: {margin:2}}, 
                  React.DOM.i({className: "fa fa-user", style: {width:10}}), 
                  "  Create Prospect Profile"
                )
              )
            ), 
            React.DOM.li({role: "presentation", style: {display:'none'}}, 
              React.DOM.a({role: "menuitem", tabindex: "-1", 
                 onClick: this.launchModal, 
                 style: {paddingLeft:5,paddingRight:2}, href: "#"}, 
                 React.DOM.h6({style: {margin:2}}, 
                   React.DOM.i({className: "fa fa-building", style: {width:10}}), 
                   "  Create Company Profile"
                 )
              )
            )
          )
        ), 
        React.DOM.div({id: "profiles-menu", style: {height:356, overflow:'auto',marginTop:1}}, 
          profs
        )
      )
    )
    );
  },

  launchModal: function(e) {
    e.preventDefault()
    console.log($(e.target).text().trim())
    if($(e.target).text().trim() == 'Create Hiring Signal')
      $('#createHiringSignalModal').modal()
    else if($(e.target).text().trim() == 'Create Funding Signal')
      $('#createFundingSignalModal').modal()
    else if($(e.target).text().trim() == 'Create Prospect Profile')
      $('#createProspectProfileModal').modal()
    else if($(e.target).text().trim() == 'Create Company Profile')
      $('#createCompanyProfileModal').modal()
  },

  launchDropdown: function(e) {
    e.preventDefault()
    $('.create-profile-dropdown').dropdown()
  }
});

var SignalsFeed = React.createClass({displayName: 'SignalsFeed',
  render: function() {
    //this.getSignals()

    signalCards = []
    for(i=0;i< this.props.signals.length;i++) {
      if(this.props.signalType == "CompanySignal")
        signalCards.push(CompanySignalCard({company: this.props.signals[i]}))
      else if(this.props.signalType == "PeopleSignal")
        signalCards.push(PeopleSignalCard({profile: this.props.profile, person: this.props.signals[i]}))
    }
    
    content = (this.props.signals.length) ? signalCards : React.DOM.div({className: "signal-card"}, "LOL")
    content = signalCards

    return (
      React.DOM.div({className: "container signal-card-background", style: {height:356, overflow:'auto'}}, 
        React.DOM.div({className: "col-md-8 col-md-offset-2"}, 
          content
        )
      )
    );
  }
});

},{"./company_signal_card.js.min.js":7,"./create_company_profile_modal.js.min.js":9,"./create_funding_signal_modal.js.min.js":10,"./create_hiring_signal_modal.js.min.js":11,"./create_mining_job_modal.js.min.js":13,"./create_prospect_profile_modal.js.min.js":15,"./mining_job_calendar.js.min.js":31,"./mining_job_loading.js.min.js":32,"./people_signal_card.js.min.js":34,"./signal_calendar.js.min.js":42,"./signal_detail.js.min.js":43,"./signal_loading.js.min.js":44,"./signal_profile.js.min.js":45}],47:[function(require,module,exports){
/** @jsx React.DOM */

theData = require('../lib/data.min.js') 

module.exports = React.createClass({displayName: 'exports',
  // SignUp
  componentDidMount: function() {
    $('body').css({overflow:'hidden'})
  },

  retrieveUser: function(objectId) {
    headers = {
      "X-Parse-Application-Id": "N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ",
      "X-Parse-REST-API-Key": "VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb"
    }
    $.ajax({
      url:'https://api.parse.com/1/users/'+objectId,
      headers: headers,
      type:'GET',
      success:function(res) {
        localStorage.setItem('currentUser', JSON.stringify(res))
        location.href = "#"
      },
      error: function(res) {
        console.log(res)
      }
    });
  },

  signup: function() {
    console.log('signup')
    email = $('#email').val()
    password = $('#password').val()
    p = {
      "X-Parse-Application-Id"  : "N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ",
      "X-Parse-REST-API-Key"    : "VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb",
      "Content-Type"            : "application/json"
    }
    thiss = this;

    $.ajax({
      url:'https://api.parse.com/1/classes/Company',
      type:'POST',
      headers: p,
      data: JSON.stringify({
        'name': $('#company').val(),
      }),
      success:function(res) {
        $.ajax({
          url:'https://api.parse.com/1/users',
          type:'POST',
          headers: p,
          data: JSON.stringify({
            'username':email,
            'password':password,
            'company':{
              '__type'    : 'Pointer',
              'className' : 'Company',
              'objectId'  : res.objectId,
            }
          }),
          success:function(res) {
            // Do another request to get current user
            localStorage.setItem('currentUser', JSON.stringify(res))
            thiss.retrieveUser(res.objectId)
          },
          error: function(res) {
            console.log(res)
          }
        });
      },
      error: function(res) {
        console.log(res)
      }
    });
  },

  render: function() { 
    data = theData()
    imgs_1 = []
    imgs_2 = []
    for(i=0;i < 120; i++) {
      imgs_1.push(React.DOM.img({src: data[i], className: "prospect-img"}))
    }
    for(i=15;i < 30; i++) {
      imgs_2.push(React.DOM.img({src: data[i], className: "prospect-img"}))
    }

  console.log(data)
    return (
      React.DOM.div(null, 
      React.DOM.div({id: "signup"}, " "), 

      React.DOM.div(null, 
        React.DOM.h1({className: "title"}, "Customero."), 
        React.DOM.h5({className: "tagline"}, "Generate high quality prospect lists. Accelerate Sales."), 
          React.DOM.div({className: "panel panel-default login-info", style: {display:'block',marginTop:50}}, 
            React.DOM.div({className: "panel-body"}, 
              React.DOM.form({onSubmit: this.login}, 
              React.DOM.input({placeholder: "Email", id: "email", type: "text", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Company", type: "text", id: "company", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Password", type: "password", id: "password", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Repeat Password", type: "password", id: "repeat_password", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.a({href: "javascript:", onClick: this.signup, className: "btn btn-success btn-lg", style: {display:'block',backgroundColor:'#1ca3fd'}}, "Sign Up")
              )
            )
          )
      ), 

      React.DOM.div({id: "", style: {position:'absolute',zIndex:'-2',top:0,left:0}}, 
        React.DOM.div({className: "", style: {marginLeft:34}}, 
        imgs_1, 
        imgs_2
        )
      )
      )
    )
  }
});

},{"../lib/data.min.js":55}],48:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Spinner
  render: function() {
    circleStyle=(this.props.circleStyle) ? this.props.circleStyle : {}
    spinnerStyle=this.props.spinnerStyle ? this.props.spinnerStyle : {}
    return (
      React.DOM.div({className: "spinner", style: spinnerStyle}, 
        React.DOM.div({className: "spinner-container container1"}, 
          React.DOM.div({className: "circle1", style: circleStyle}), 
          React.DOM.div({className: "circle2", style: circleStyle}), 
          React.DOM.div({className: "circle3", style: circleStyle}), 
          React.DOM.div({className: "circle4", style: circleStyle})
        ), 
        React.DOM.div({className: "spinner-container container2"}, 
          React.DOM.div({className: "circle1", style: circleStyle}), 
          React.DOM.div({className: "circle2", style: circleStyle}), 
          React.DOM.div({className: "circle3", style: circleStyle}), 
          React.DOM.div({className: "circle4", style: circleStyle})
        ), 
        React.DOM.div({className: "spinner-container container3"}, 
          React.DOM.div({className: "circle1", style: circleStyle}), 
          React.DOM.div({className: "circle2", style: circleStyle}), 
          React.DOM.div({className: "circle3", style: circleStyle}), 
          React.DOM.div({className: "circle4", style: circleStyle})
        )
      )

    )
  },
})

},{}],49:[function(require,module,exports){
/** @jsx React.DOM */

var EditTemplateView = require('./edit_template.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  //Templates
  getInitialState: function() {
    return {
      selectedTemplate: 0,
      editMode: false
    }
  },

  changeMode: function() {
    this.setState({editMode: !this.state.editeMode})
  },

  render: function() {
    templateView = (!this.state.editMode) ? TemplateView({changeMode: this.changeMode}) : EditTemplateView(null)
    return (
      React.DOM.div(null, 
        React.DOM.div({style: {height:'100%'}}, 
          TemplateSideMenu(null), 
          React.DOM.div({className: "col-md-9", style: {padding:0,height:'100%'}}, 
              templateView
          )
        )
      )
    );
  }
});


var TemplateView = React.createClass({displayName: 'TemplateView',
  changeMode: function() {
    this.props.changeMode()
  },
  render: function() {
    return (
      React.DOM.div({className: "panel panel-info", style: {width:'100%',height:'100%',border:0}}, 
        React.DOM.div({className: "panel-heading"}, 
          "Template Name",  
          React.DOM.a({href: "javascript:", 
             onClick: this.changeMode, 
             className: "btn btn-primary btn-xs", 
             style: {display:'block',float:'right',marginTop:'0px'}}, 
            React.DOM.i({className: "fa fa-pencil-square"}), "   Edit Template")
        ), 
        React.DOM.div({className: "panel-body"}, 
        React.DOM.h4(null, "Followup - Prospecting SAAS Outreach"), 
        React.DOM.h6({style: {marginBottom:'0'}, className: "text-muted"}, "Created by Mark on Jul. 21, 2014"), 
        React.DOM.h6({style: {marginTop:'0'}, className: "text-muted"}, "last updated 7 days ago"), 
        React.DOM.br(null), 
        React.DOM.br(null), 

        React.DOM.div({className: "panel panel-default"}, 

          React.DOM.div({className: "panel-body"}, 
          "15 minutes to get company_name more customers" + ' ' +
          "Hey first_name," + ' ' +

          "Would you like to hear an idea for a 15 minute hack that could significantly increase the number of prospects your sales people have access to ?" + ' ' +
           
          "Recently one of our B2B clients saw a huge increase in trial sign ups after working with us. first_name, lets schedule a 15 minute call this week to see if this would be a good fit for both of us." + ' ' +
           
          "What the best time for you this week ?" + ' ' +
           
          "--" + ' ' +
          "Mark" + ' ' + 
          "Customero" + ' ' +
          "mark@customerohq.com"
          
          )
        )
      )
    )
    );
  },
});

var TemplateSideMenu = React.createClass({displayName: 'TemplateSideMenu',
  getInitialState: function() {
    return {
      templates: [],
    }
  },

  componentDidMount: function() {
    //Ajax Request For Templates
    /*
     $.ajax({
      url:'',
      headers: "",
      data: "",
      success: function() {
      },
      error: function() {
      }
     });
    */
  },

  render: function() {
    templates = []
    for(i=0;i< this.state.templates.length; i++)
      templates.push(React.DOM.a({href: "javascript:", className: "list-group-item"}, "templates[i].name"))
    return (
      React.DOM.div({className: "col-md-3", style: {padding:'0', borderRight:'1px solid #ddd',height:'100%',textAlign:'center'}}, 
        React.DOM.div({className: "panel panel-default", style: {border:0}}, 
          React.DOM.div({className: "panel-heading", style: {height:60}}, 
            React.DOM.span({style: {float:'left',fontSize:20,fontWeight:'bold'}}, 
              "Templates"
            ), 
            React.DOM.a({href: "javascript:", className: "btn btn-success ", 
                style: {float:'right'}}, 
              React.DOM.i({className: "fa fa-plus"})
            )
          ), 
          React.DOM.ul({className: "list-group", style: {textAlign:'left'}}, 
            templates
          )
        )
      )
    )
  }
});

},{"./edit_template.js.min.js":20}],50:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  //TemplatesMenu
  toggleTemplateEditMenu: function(currentTemplate) {
    this.props.toggleTemplateEditMenu(currentTemplate)
  },

  createTemplate: function() {
    this.props.toggleTemplateEditMenu({
      name: '',
      body:'',
      subject:'',
      editMode:true,
      newTemplate: true
    }, true)
  },

  render: function() {
    //console.log(this.props.templates)
    templates = []
    for(i=0;i< this.props.templates.length; i++) {
      templates.push(
        TemplateListItem({
          toggleTemplateEditMenu: this.toggleTemplateEditMenu, 
          template: this.props.templates[i]})
      )
    }

    return (
      React.DOM.div({className: "", style: {padding:'0', height:'100%',textAlign:'center'}}, 
        React.DOM.div({className: "panel panel-default", 
             style: {borderRight:0,borderRadius:0,height:'100%', overflow:'auto'}}, 
          React.DOM.div({className: "panel-heading", style: {height:40}}, 
            React.DOM.span({style: {float:'left',fontSize:14,fontWeight:'bold'}}, 
              React.DOM.i({className: "fa fa-file-text-o"}), 
              React.DOM.span({style: {marginLeft:5}}, "Templates")
            ), 
            React.DOM.a({href: "javascript:", 
              className: "btn btn-success btn-xs", 
              onClick: this.createTemplate, 
                style: {float:'right'}}, 
              React.DOM.i({className: "fa fa-plus"}), 
              React.DOM.span({style: {marginLeft:5}}, "Create Template")
            )
          ), 
          React.DOM.ul({className: "list-group", 
              style: {textAlign:'left'}}, 
            templates
          )
        )
      )
    )
  }
});

var TemplateListItem = React.createClass({displayName: 'TemplateListItem',
  toggleTemplateEditMenu: function() {
    console.log(this.props.template)
    template = this.props.template
    template.editMode = false
    this.props.toggleTemplateEditMenu(template)
  },

  render: function() {
    return (
      React.DOM.div(null, 
        React.DOM.a({href: "javascript:", 
          style: {borderBottom: '1px solid rgb(221, 221, 221)',paddingTop:5,paddingBottom:0}, 
           onClick: this.toggleTemplateEditMenu, 
           className: "list-group-item"}, 
           React.DOM.span({className: "label label-default"}, 
             this.props.template.name
           ), 
           React.DOM.h6(null, "Subject:", React.DOM.span({className: "text text-muted"}, 
             " " + this.props.template.subject
           ))
         )
      )
    );
  }
});

},{}],51:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // TimelineDayElement
  // TODO
  // - add prospect list progression
  // - add scheduled followup
  //

  addFollowup: function() {
    this.props.addFollowup(this.props.dayCount)
  },

  render: function() {
    batchCount = this.props.batchCount
    batchStage = (batchCount) ? BatchStage({batchCount: this.props.batchCount}) : ""

    if(this.props.addTemplateMode) {
      mode = EditTemplate({addFollowup: this.props.addFollowup, 
                           saveFollowup: this.props.saveFollowup, 
                           removeFollowup: this.props.removeFollowup, 
                           dayCount: this.props.dayCount, 
                           templates: this.props.templates})
    } else {
      mode = TemplateFollowup({currentTemplate: this.props.currentTemplate, 
                               editFollowup: this.props.editFollowup, 
                               dayCount: this.props.dayCount, 
                               removeFollowup: this.props.removeFollowup, 
                               setCurrentTemplate: this.props.setCurrentTemplate})
    }
    mode = (this.props.elementType) ? "" : mode
    addFollowup = (this.props.elementType) ? this.addFollowup : ""

    return (
      React.DOM.div(null, 
        React.DOM.div({onClick: addFollowup, className: "day", 'data-trigger': "manual"}, 
          "D"+this.props.dayCount
        ), 
        batchStage, mode
      )
    )
  },

  setCurrentTemplate: function(template) {
    this.props.setCurrentTemplate(template)
  }
});

var TemplateFollowup = React.createClass({displayName: 'TemplateFollowup',
  // EditMode False

  setCurrentTemplate: function() {
    this.props.setCurrentTemplate(this.props.currentTemplate)
  },

  render: function() {
    return (
      React.DOM.div({className: "followup-placement arrow_box_1 tmp_2"}, 
        React.DOM.h6({style: {width:130,display:'inline-block'}}, 
          React.DOM.i({className: "fa fa-file-text-o"}), "  ", 
          (this.props.currentTemplate) ? this.props.currentTemplate.name : ""
        ), 
        React.DOM.button({className: "win-btn btn btn-success btn-xs", 
                'data-target': ".bs-sendEmail-modal-lg", 
                onClick: this.setCurrentTemplate, 
                'data-toggle': "modal"}, 
          React.DOM.i({className: "fa fa-paper-plane"}), " Send"), " ", 
        React.DOM.button({onClick: this.editFollowup, 
                className: "win-btn btn btn-default btn-xs"}, 
          React.DOM.i({className: "fa fa-pencil"})), " ", 
        React.DOM.button({onClick: this.removeFollowup, 
                className: "win-btn btn btn-default btn-xs"}, 
          React.DOM.i({className: "fa fa-trash-o"}))
      )
    );
  },

  editFollowup: function(e) { 
    e.preventDefault()
    console.log(this.props.dayCount)
    this.props.editFollowup(this.props.dayCount)
  },

  removeFollowup: function() {
    console.log('remove')
    this.props.removeFollowup(this.props.dayCount)
  }
});

var BatchStage = React.createClass({displayName: 'BatchStage',
  // Different Stages of People Added to Prospect List
  render: function() {
    return (
      React.DOM.div({className: "followup-placement arrow_box tmp"}, 
        React.DOM.span({className: "badge"}, 
          this.props.batchCount
        ), " ", 
        React.DOM.h6({style: {display:'inline-block'}}, 
          "prospects in the sales cycle.")
      )
    );
  }
});

var EditTemplate = React.createClass({displayName: 'EditTemplate',
  // Edit Mode - True
  render: function() {
    options = []
    for(i=0;i< this.props.templates.length; i++) {
      options.push( React.DOM.option(null, this.props.templates[i].name))
    }
    return (
      React.DOM.div({className: "followup-placement arrow_box_1 tmp_2"}, 
        React.DOM.h6({style: {width:55,display:'inline-block'}, 
            className: "text-muted"}, 
          "Choose :"
        ), 
        React.DOM.select({className: "form-control input-sm", 
                id: "chooseTemplateForFollowup", 
                style: {display:'inline-block',width:127,marginRight:5}}, 
          options
        ), 

        React.DOM.button({className: "win-btn btn btn-success btn-xs", 
                onClick: this.saveFollowup, 
                style: {marginRight:5}}, 
          React.DOM.i({className: "fa fa-check"})), 
        React.DOM.button({className: "win-btn btn btn-default btn-xs", 
                onClick: this.removeFollowup}, 
          React.DOM.i({className: "fa fa-trash-o"}))
      )
    )
  },

  saveFollowup: function(e) {
    //get template from currentTemplate
    e.preventDefault()
    chosenTemplate = $('#chooseTemplateForFollowup').val()
    console.log(chosenTemplate)
    for(i=0;i< this.props.templates.length; i++){
      if(this.props.templates[i].name == chosenTemplate){
        chosenTemplate = this.props.templates[i]
        break
      }
    }
    console.log(chosenTemplate)
    
    this.props.saveFollowup(this.props.dayCount, chosenTemplate)
  },

  removeFollowup: function(day) {
    this.props.removeFollowup(this.props.dayCount)
  },
});


},{}],52:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // UserProspect
  getInitialState: function() {
    return { }
  },

  clickCheck: function(e) {
    e.stopPropagation()
    domNode = this.getDOMNode()
    //isChecked = $($(domNode).find('input[type="checkbox"]')[0]).prop('checked')
    isChecked = $($(domNode).find('input[type="checkbox"]')[0]).prop('checked')
    $($(this.getDOMNode()).find('input[type="checkbox"]')[0]).click()
    //console.log(isChecked)
    this.setState({checked: isChecked})
    this.props.checkboxAction(isChecked, this.props.prospect.objectId)
  },

  rowClick: function() {
    $($(this.getDOMNode()).find('input[type="checkbox"]')[0]).click()
  },

  keyboardClick: function() {
    $($('.keySelect').find('input[type="checkbox"]')[0]).click()
  },

  componentDidMount: function() { },

  render: function() {
    keyboardSelected = {borderLeft:'7px solid rgba(0,0,0,0)'}
    thissss = this
    if(this.props.keyboardSelected) {
      // Adjust Scroll depending on where the prospect is
      keyboardSelected = {borderLeft:'7px solid #0096ff !important'}
      Mousetrap.unbind('x')
      Mousetrap.bind('x', function() { 
        thissss.keyboardClick()
        if(thissss.state.checked)
          console.log("lmao")
      });
    }

    prospect = this.props.prospect

    if(this.props.masterCheckboxChecked && this.state.checked)
      checked = true
    else if(this.props.alreadyChecked)
      checked = true
    else if(this.state.checked)
      checked = true
    else if(this.props.masterCheckboxChecked || this.state.checked)
      checked = true
    else
      checked = false

    //console.log(this.state.checked)
    //console.log(checked)
    //{prospect.employeeCountRange.name + " employees" }
    
    color = {}
    if(this.state.checked || this.props.alreadyChecked)
      color = {backgroundColor: '#eef8ff'}
      
    rowCl = (this.props.keyboardSelected) ? "prospects-tr keySelect" : "prospects-tr"
    websiteBtn = (prospect.websiteUrl) ?  React.DOM.a({href: "http://"+prospect.websiteUrl.replace('http://','')}, " ", React.DOM.i({className: "fa fa-globe"}), " ") : ""
    
    prospect_email = prospect.email
    if(typeof(prospect.domain) == "undefined")
      prospect.email = "website not found"
    if(prospect.email == "no_email") {
      if(prospect.email_guesses) {
        guess = _.findWhere(prospect.email_guesses, {tried: false})
        name = this.props.prospect.name

        vars = {
          first: _.first(name.split(' ')),
          last: _.last(name.split(' ')),
          fi: _.first(name.split(' '))[0],
          li: _.last(name.split(' '))[0]
        }
        if(guess){
          prospect_email = Mustache.render(guess.pattern.pattern, vars)
          prospect_email = prospect_email+"@"+prospect.domain
        }
      }
    }
    prospect_email = (prospect_email) ? prospect_email.toLowerCase() : ""

    return (
      React.DOM.tr({className: rowCl, 
          onClick: this.rowClick, 
          style: keyboardSelected}, 
          React.DOM.td({style: color}, 
              React.DOM.input({type: "checkbox", 
                     onChange: this.clickCheck, 
                     checked: checked})
          ), 
          React.DOM.td({style: color, 
              className: "fixed-data-column"}, 
            React.DOM.span({style: {fontWeight:'bold'}}, prospect.name), 
            React.DOM.h6({style: {fontWeight:'400',margin:'0px'}}, 
              (prospect.pos) ? prospect.pos.trim() : ""
            )
          ), 
          React.DOM.td({style: color, 
              className: "fixed-data-column"}, 
            React.DOM.span({style: {fontWeight:'bold'}}, 
              prospect.company_name
            ), 
            React.DOM.h6({style: {fontWeight:'400',margin:'0px'}, className: "company-size"}, 
              (prospect.company_size) ? prospect.company_size : ""
            ), 
            React.DOM.h6({style: {fontWeight:'400',margin:'0px',display:'none',fontStyle:'italic'}, className: "company-size"}, 
              (prospect.industry) ? prospect.industry : ""
            )
          ), 

          React.DOM.td({style: color}, 
            React.DOM.h6({style: {margin:'0px'}}, prospect.city)), 
          React.DOM.td({style: color}, 
            React.DOM.a({href: "mailto:"+prospect_email, 
               style: {margin:'0px'}}, 
               prospect_email
          )), 
          React.DOM.td({style: color}, this.props.li, " ", this.props.link), 
          React.DOM.td({style: color}, 
            websiteBtn
          )
        )
    );
  },

  deleteProspect: function() {
    this.props.deleteProspect(this.props.prospect.objectId, 'Prospect')
  }
});


},{}],53:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  checkboxAction: function(e) {
    checkboxVal = $(e.target).is(':checked')
    checkboxes = _.rest($('body').find('input[type="checkbox"]'))
    console.log(checkboxes)
    if(checkboxVal){
      // make sure all checkboxes are checked
      _.map(checkboxes, function(checkbox){
        if(!$(checkbox).prop('checked'))
          $(checkbox).click()
      })
      
    } else {
      // make sure all checkboxes are unchecked
      _.map(checkboxes, function(checkbox){
        if($(checkbox).prop('checked'))
          $(checkbox).click()
      })
    }
  },

  componentDidMount: function() {

  },

  render: function() {
    return (
            React.DOM.tr(null, 
              React.DOM.th({style: {paddingLeft:11}}, 
                React.DOM.input({type: "checkbox", onChange: this.checkboxAction})
              ), 
              React.DOM.th(null, "Name"), 
              React.DOM.th(null, "Company"), 
              React.DOM.th({style: {width:'170px'}}, "City"), 
              React.DOM.th(null, "Email"), 
              React.DOM.th(null, " "), 
              React.DOM.th(null, " ")
            )
    );
  }
});

},{}],54:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  //SideMenuListOption
  getInitialState: function() {
    return {count: '~'}
  },

  componentDidMount: function() {
    // make ajax request to get each requests 
    /*
    list = {
      '__type'    : 'Pointer',
      'objectId'  : this.props.list.objectId,
      'className' : 'ProspectList', 
    }

    parse_headers = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
    }

    thiss = this;

    //console.log(this.props.list.name)
    $.ajax({
      url:'https://api.parse.com/1/classes/Prospects',
      type:'GET',
      headers:parse_headers,
      data: 'where={"lists":'+JSON.stringify(list)+'}&count=1',
      success: function(res) {
        thiss.setState({count: res.count})
      },
      error: function(err) {
        console.log(err)
      }
    })
    */
  },

  changeList: function() {
    this.props.changeList(this.props.list.name, this.props.list.objectId)
  },

  render: function() {
    listName = this.props.list.name
    propsCount = this.props.count
    count = (typeof(propsCount)== "undefined") ? this.state.count : propsCount

    //console.log(this.props.iconType)
    icon = ""
    if(this.props.iconType == "archive"){
      icon = React.DOM.i({className: "fa fa-archive", style: {float:'left',lineHeight:1.5,marginRight:5}})
    } else if(this.props.iconType == "users"){
      icon = React.DOM.i({className: "fa fa-user", style: {float:'left',lineHeight:1.5,marginRight:5}})
    } else if(this.props.iconType == "wifi"){
      icon = React.DOM.i({className: "fa fa-wifi", style: {float:'left',lineHeight:1.5,marginRight:5}})
    } else if(this.props.iconType == "cloudDownload"){
      icon = React.DOM.i({className: "fa fa-cloud-download", style: {float:'left',lineHeight:1.5,marginRight:5}})
    }


    countStyle = (this.props.hideCount) ? {'display':'none'} : {backgroundColor:'#999',float:'right',marginTop:2.25}
    listStyle=(icon == "") ? "list-name" : "icon-list-name"
    if(this.props.iconType == "users")
      listStyle = "all-list-name" 
    return (
      React.DOM.button({type: "button", 
              onClick: this.changeList, 
              className: "list-names btn btn-default"}, 
              icon, 
              " ", 
              React.DOM.span({className: listStyle}, listName), 
              React.DOM.span({style: countStyle, 
                className: "badge badge-default"}, this.props.list.count)
      )
    );
  }
});


},{}],55:[function(require,module,exports){
module.exports = function () {
  return {"0":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/8353a3fc05724cbe45e8c23b347a39e7_0994d458faff1d0b71f0f8e534299335a5765ba4a672ed817669729f6a0a1e9d","1":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/107fc2691bb8b3333ba78a18600fa561_9a832b2e27c2aa8ce6ed12c62fb665939e4de38f30ec9bebd92f813ea677f8c3","2":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/4432a5df98c5ead32ca3ec898e175c90_f93ef0a7ddba9ac960c6a15941a69a124a5d5961fde34455cb7cee6c97f712ba","3":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/229580b716606a4eb2142b1eaaca10e7_2398d5050e191d15ff5cf9eb68cc683690c06d3949345dbf790394437a465c08","4":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/499d8a863d7872d6e239512124af9ddc_771182dc7b6c0801de6e571deed89b437ab122372b547e1f7d8dacae9cb17275","5":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/a9e97a6445a8ac187561310b16b4bbd8_96ce9289fd8e6f2a6bf262b4baf548367ad7f53aac9a9ec1157020465de07e67","6":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/35af508daa4a580806961236bfb743a1_1a4afe2656f8d95e3717751f96a0c6ce6c5b1d25920f4d45e5cfe9bba05de0c8","7":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/a1003503ef5e2254e6694eebbd2b4499_a8cd2caefe691476e3f02351369dc2c07c1a3d6ce0f87b187f58fdf4b20292c5","8":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/01dcb5278f55225b7e9c0cff6aa3d6e6_b40f92b9c5ef3b8c81d478bb70b7a094f076ed59b7d36d7a6401f0fd9d95eacf","9":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/61d79e3c25105099f73668c625ea361c_1d7c1255968258c03d0564e141284b4bddbd2db52091cf8d75cb384b23949390","10":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/ca808450a6222c9b09d5b86924a08fbb_f90e02c1e981e5f6caf8af76fefef7653d0a451da51ba5a22ac0f265874bc6cb","11":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/97de93a99b8a9159dede2b9ff17c7887_3e90df8e7894c0c12963abf2fadb205e44365f58b537f15b677a4a7e9c557bcd","12":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/9bf8404d673c9d6178f23548caa4c9a4_46606dba9df4d10cf282fa7add23e8a87b7f976d0e3a153fad0ff181e1be4e17","13":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/7f3a4754a634fc1e39090c5dd6c46808_42d3294b34c4ac9c6f99f66bc3ad9a195d20e98b09c7579fe341d0cf42f9c93f","14":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/b4bebbfbfbe47e50f435b4c2efe0db0f_181a3119f12fd03b6bb517352c636508497bec61f9078b0e281515efd192b345","15":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/ec1f6190e2b9a80a3f7cf101649ccc63_0026017f4380585a2e540f05936a6f58fe725fe7e8e0378aae98039628c4bdf2","16":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/9dd921f41fa8d4ab29bcc1c45348b5a2_158df8a22c1f1570e8a2c17ab5e30169248030593665fbd8792f5f2f01516290","17":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/b9786c9b56c94caa13e74d59b9a9da48_1f195fbcdf95c0d2618d571e0192ff1be2e4921d88aed8b7b9fd9e1444749271","18":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/aa8577f878858f318858aced5abd037f_cb926a07d0e468660e3569279cc1354aa7243cdc951f970325273993c89e9ee7","19":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c11b322d8a8007037ee3e3242b260930_2a63c13b315a38b069f38da657b189aad6c7af5941a19859111dfb3c70c94b41","20":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/19b6c3989a808be845718d8af24352ff_a8e72abb2b5772706ac1c79e5cbaf59b3c2f20efb0aca9b93d04ae8a24920967","21":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/f4120970a686a56b4759585808177cc7_8e175e495b1de922ccd9a92a5de97b95433444aca422b3e632c2ea4ed48d3bc9","22":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/aee7e40b2dd4c4c9961323d98249c826_c1c387c714e89d5dfccf06d3fe0fed332992eff877cdbd60bc4e94e7a2ed38ff","23":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/66d18bafff4f9b8d077c107bb73b2912_f8055289eae58fad00cc0f6727b2b5cf0f72b837963351b7ca6250ba4e2632a1","24":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/2da8546c3b6a99b191249ae69207e31a_db86681331d0d2b9850e5596ce7711ac386f4e1469c526934267978af3498338","25":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/5617f7787cdf0176e54c4f13e9ccc54e_da7cc169f46585de72acf5f705cd34a52c688a40dc8aa72ea720d556a7022f72","26":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/f7e2712aa8cfab88c55d1f6c78ef2e45_5c895ca06f40e30369e07b19c64b7bf1fe5be0977e5bbfc0c2212b73ea6e6512","27":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/29ab72c2b97b25c4e3e1c280e3264f80_069b94caad3b14e2bb3b2012a51d94ed8e476f0a3d9a368aac36db9d716a12af","28":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/ee17a7d90c8065a3abcd0a6720b52e66_3b9938c2693e142ba37065de24dabec556a192add4b84b4f29785cea3b74853f","29":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/16f61ebf1810ac333f7c936ce711b28a_35d43f3d1c762b21d629634b4584d0cd95aecdfd9a3087f24a9eb729d134b769","30":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/e318ccc5121cfeb3b99c21d055e6ece9_edc606d4bcd3d76f8e45da96d9dbd651bf0c067a7ca159e1073e3b44b03530c9","31":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/df9c90f2b93a9e488d94fe52725bd798_3b0e3396d9dea866960d8ce6f67af10c8809f154b6831fc278b8ed34390a9f27","32":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/6eee357d121c814a97b6362c4e55526a_cbff4ac439c2054813dea8da8b8f1ec3b5e0c644acf0dc2ae625741e97f0bea0","33":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/560aed1bee8e220f0980190dedb7add6_9ad2de7c6ebfdd724f2a17c85efd5192f8393a477dddf0a0c8c9260e17d5a515","34":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/850f1242ddd6539ad8b27f69908c7f9e_08ffecd2b6d184e7d70ab70abbbbabe7132269250c93dbbdcba7f22e86f0692e","35":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/075c06c481eea429f6cc816697fcbbf8_c55b99be050bdcb1f32c9578cb8e17f6f4d6f200c1f37f528c24fee65a26182a","36":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/028b3110aa60554e7434f1a2473229cf_d15e1c7f00c82755e144773d46bb4e0e964fcfa425a254ca05ac1313fcea3bae","37":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c3719f85d24bafef64eada64e735ca73_025880c51ff42bd3ff79ba35d456d8cb14b6fbc7ee17ba3b98612e71aa1d74b9","38":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/22356ab6ae4467c44a074a4134bad937_a9909c37e6e23b4343ce19582c9118cfb3748b8977f1db8230aa992d640f1217","39":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/2132e5a2fcd89a54e7c42c5fa0b8ef77_ff0dc46511b150a4b0af9cdf866af2e06ce898d7119b7ab21350e0b3304d8065","40":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/45aaa73b693aeec414b34fd44262ef8f_51c22532abe0b615f0e6e3c0e91cb1a9bca41a6f6c0ec6f33c3693d128fd1755","41":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/57bc2d1a2ab692e38284f3550f58b381_03bd441172001e3c2e5084f3390ee0ca0327b502b0c1dc794c8c8ac2b3d2130e","42":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/4745ad07807ccad97e0726fc7ba18170_48911a727474c0398c3fc701880d623faedc592f16677310f8e8111a25e2be37","43":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/cd1594c62a31c831d124e286b6909700_0cd9d060392c5f5d575f29a8930c55c69a54501c1d7636929682c38e4e069d5e","44":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/1f3db7712313a3bcfe5ff4a99b67fcdf_a66bec0a43179531bce8020aaade3d85967b7c9df54ab2bdf41f12f6cd60d3ef","45":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/2643e008752dbffd17cd7e4cea30bb08_867fd9b76c5342b914bd9b285756ac10cf04e1b3ad8cb6524a2c96d7ab75c07a","46":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/d89fd2959f9efdcf70778801253a4920_97a906684f843e8ea3f3237797adc601c4d20dfcc79e7b6e756630206312fe89","47":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/d0b7922821c73bb34357b9a7bbf2267c_d63a4e4655665268ea92da08063c95f309646f9698125b318b0621487b906ca4","48":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/b76f8da9538eea9eb4d897656f4aed8b_f49ffb97513493d056f42fe316650f1fb507fc1ebe7a04ad8454fd2b58c50ea7","49":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/190285c653fe1d18db3257eeaf4be43b_60aac5615b8c09ff3cfc840eafbb0208a8dc4824d942df10637ed1dc43198896","50":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/bdee1144909768544fb2165d5e053e65_01eeb0b68fbe038b33bd0d952ce60590b2ff52c32da32bceee518652a89e8140","51":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/67f3816ffae3f72be42a7853607ff545_9b77f7ee9ed399fe77664a0c6cded309a14187ed325b7dace9b74f58d384fa70","52":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/4314b6591ccecaa3eb265e4e890021f5_135f42ac525c7160c6680d99d08463cca4f4f86b4a0a11252b26c57f7f6552e2","53":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/dc2498a2210f5c8dfc938909670ba68f_bb4edb324aeb76f4809d2f2ffef036815497400fd276f836d923e7e0999c3552","54":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/8ea2f8aecb65bcc3cec691be061822a6_c9e8cc4ff670def26a2014b4658f561bb39af755727ab31a04b66c703faa6bfc","55":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/cc6220508d6b50993e8cb49e6c072a3a_266d57d40828595dcf9964076955242cbc6d9cdc78bbc323ba39f0883c05fda8","56":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/6d200ee39f4096f49b523d98d8536b03_0e0d1927f658b14ff35a24c9d8fc693190c9f739a6d14b3638a69e901b1a494c","57":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/deaf0d4d4431d6bb2dcc6bda12575dc8_786be7e8e3573170e142d1c3974f18d6d69d4c4dd3ca06593467f2f53f831895","58":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/ebf339b29639355c01a7e1d0c9055ba3_0c2c6354af58c71eee179f772b8f9c9556111c042eddec488642205fce901f6a","59":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/adf758a8dc032239d05c2bf30a4a0edf_1de695275aaf84c5d9624872efacc21f2bb35d76907c032789f0a8a91007a751","60":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/fcfd73b6e3eb5a9e249b379a6f559fc7_7f12feeefb777c52da2c175bfc33dd19db40749b388af435f4a68c0f06b4f9ad","61":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/3c82d08bca770099bb1fcdbda21484ea_4b1b1a31571711440446327a37327cf86685307f7dd58ad26a5b564b384d54c9","62":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/da085ddf61fabfc523a6d5bc22ea305b_f198dc476413ae524e230ebcd428f4649509a64794bb12dfde0d8fc2d9cf8782","63":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/510c57ac818d053701321d16cfed8b3e_74210d99aa6597b227fe521b0c7e128b66510da6b2cfbd67f4d0d0f8be7a1c12","64":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/40122334960a5954255cca87d01ba5ae_1d6fa7ab07a15df79e4c61cec5a369e6e7dcc7e57ebfd52fd937630e056dbf32","65":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/281bc010da64604545531ca4074eda2e_91c47782e1e7e19e58d3d5da9e43c1c53505a145de4adcd22931721f951edced","66":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/1f0306ac15f2a11707fb6637b64ab5bc_bbf75d7a31aff638916b154d263b2fa1af9f3f53ef3124e5d470289b1b4dc5c4","67":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/99147b426f02ea63f52d7b9096bfba95_2af91854e89a8214667222ea871d98eb8c1ccaf4969ec129356be0fce2eeca51","68":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/ecebb17e5ca23da7f420fa357472bf3e_9dcc92e6966d688c956e1e6a0abf42499687f9e82b82a2499d56bb93a59b2bd8","69":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/aa968d512815321b5c74af48f3d53c3d_74f7b92a66f45f8e050a46f94cb675db7fc257acefed7ced6fe85a82caa93139","70":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/2451efa39cb6ee7576b41e14b907925a_f48ec903ab22812a385743625e972e76773bdbd3e323c73689f27eccaa9d90bc","71":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/6eca5c460748018fe91f919d35f1de02_2116d7e9c833021c7fb58237db1e8abd3e37a32f652e5449feb94cd287ca63cd","72":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/d233d65df2a27b4e6c177ab37f726c33_cea7dbcb7770a9798a49fce3a8d55689c6b79ad710e8f3aa0121bcabd9b0176b","73":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/0632159435e67bdd2a5ffd68471361f0_b7711b96d49bfe07ba4c6a9700618c69425c667999209ccbd7575925805b0b5b","74":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/1f6edebd5597bae7da63e7ad86214ccd_0bcc5ee18a9539043524fdad5d9cbdb527514143e755a1a05169e05e06c37941","75":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/31874c12d9df2dfd89cb6a446bdc4042_611644e0e6bd66f29270be999af5d4aee37a5898d93dd41c46dee111f4e63fa3","76":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/95bad31c8127deef8aef7a8c0d96285f_05b558b86db9ed61bdb134e7e32e56ddea960d18067c4d44cb7b207ceb592e5b","77":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/e1a21b6a465ba8c05aec97fa7568efb5_888ab8ab424a32a58b00808ca2f716b903993a7d076b4925c52117a2467ff04b","78":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/d8c25b3ed91a8fc91f93ac56377c9dcc_72afd96cb39f5d07ea286361edb264627d1f234e871ce48371dca57bc44c7a82","79":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/95b193e0db0f8965de5c70a5b96bb071_4b587a38a5b3b5f2eb6ad37d745531e723edc07e38eb6d4cfec3a9386f65b1e8","80":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/90b3da7e62bbd996b722975a3230f0f3_b3e89ebe3a0f9d1a6508771e1108627885b5df79377b291413a35284cc506f5e","81":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/3242156353c906577e9ea40f92139719_76cb67bcb821ef4a83b4796832b15d3ab4402627534de36c3ff592ba0e0cacb0","82":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/a4beb634fb972ef9caefecf47527e345_a18d6851882d03d4370fa12c866fcd91caa907b0cd2263a722378c399fb592b5","83":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/0447cd25e4515569c3b613bc4bd88a05_c3656ddbbf5dfc84e44c3616cfad41267c8d730e00db5918ccc77573fac07d49","84":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/1e01a4ecbeb9ca46a63b745c6a2e462d_3ebbbab14df0e2db43a2948c0298ad67ded53029efe9aba6bd40b3fd99d5aa18","85":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/559c502aea7aab4a11e121743c9d7c43_69caccfee49f747e72a4768ad4274c8b6875848e9ab7b2c8517e209d36bdfb32","86":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/b27a3afa95d849b7375a304769bd3bf3_acada7bbca2083ce55ab119e88666ca0ae10a4aac448ad5d7f45edf0077897a1","87":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/de24ae6e6b531bad57c37bffcac1954d_2c15f3da3593c9526078bb80bc7faa66ec081b1ccaea231b5c259bdb827f6fd8","88":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/7375a308c764e405f92ab9d943942949_6b7b392f5694abcfbb70daf458c22369db2f9b890583e3e2d713b046cd84ec89","89":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/a1fc8b4cb5e89f1dc3ed74ec8bafc3a5_4d0efc716f3f2cb7bda689e5daa7ba5d954ee54a8f94f7755b303043970b1d99","90":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c4f7d2b628c661d1baad6ff1f4722da8_149e2b6f3ad488d10fce67144ccee6b66519d9d7f8482a1ff0c9ae627f1ddbca","91":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/09459647f3928e77752449f418a85c27_7a704f8cfaea62a1953dfd1e345eb6e3aee02114189f186f0181bff3a7e77fe6","92":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/655a7db862ccdfa162b6ea0dffa3ef1e_6eb133e705878e640a427b664656189f1ea9330285133e4a73a943a097606da6","93":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/434d82b430279d26bcdd9bd13ddec76f_5cbad7d7eb6740debc9e2e3c1b7197f861b705e6e74379307a5bc900d75250f5","94":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/142e64b0535a2b0c3bb5253c0d2266a9_6c7403cda6f8dc61eb9d2b32d37f608c34c641101d6a2f35c073907898a7e4ae","95":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/3f8790f1134f0514af3d2bbc05209060_6377e5dcdf0d232f1aa8139022b8c9280f8b4297f70efff3e0f7d52417c1eb23","96":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/220a705290eb7adbcdf052ddb2d11c99_06374d8546d5c745671d98686f1b4b0dd31d777b1c7bcdd0e6dfe63d0a23e719","97":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/51249bb6f506e42e17bf9241ef88b6b2_c1221205f854390df1d21aa05e5d0de264b1b953c659a10c18478cfd7f755efd","98":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/284c00b5ff1189d2bddf67df408edc4e_01c1917a244fcadf0bfd3933af21c684dd90ca274111248212025361d855ab39","99":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/37483ffe36725e05af0954a5d9a55a26_daf0a2f0e10c98c2b72be9c0da24b38322f0f956733a42565365ee615568ba07","100":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c6b03531fed44f96acecab26828fbe37_30393b6fa3096a74bfa51cad1cb58f7660848263f01f2f7d2e12dae3a5b1c3ed","101":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/5dc9345ee6092ca006f777b42b34e853_df13ad7c61407d1a00e261fcd5fcd93c16e1a0c1be13d0903d76a21a89cd3459","102":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/1dbef9840938d5e30563c3f844b9ebac_12fe10df66a6ee48bffe72578a6f42d340ff0b4f75d4fe65f6bed2b75841e978","103":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c3af292a916339e6c57ba0d03712a445_273c38be422269a46466d48494c513daf53b3a66440b6401c94c37f1e55070c2","104":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/b44ded0b090097528af2c4ad694c2a40_3f5ed56c662da89e1e0f3ae62a67f9e14ea2384f2985277b1cdfa6ebfe1d18c9","105":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/df8ea86906de307c52cb9cf3b2228043_312bdbd9536ec36e42d8328def8af1afcaaf3f705917a628ea4add00ba77b8b5","106":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/6846f61d6bfcf77aecd7206c6adb5be9_64e149247e52e86b671fdd2b71ac27852d54ae6eb6f4059458bdb1161f300dac","107":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/ef4a1765911453dcae8e4bdd5d3203a1_321cf3bc8710a6a19576dfe93677def4666da0b4744489c26aa44f75a753333e","108":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/dc381f9e0b6193e8be5d94595ed1c4b7_d612afde7baf43ac5daeae9e0efe42781867bc3451e3e8814253cbfc4410bb4a","109":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/9579d5dd8523c493e0590e3881e25041_106c39b7e97fdd57abb992ec7ff7c0f0b15f0f83a348e3a3698e3fcbdcdf2836","110":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/95cfda0cb7bfaac0fc789cf05c7e513e_a509049aea02886eb409c53a15e03a6cf5eb6583120267bbca75c2206027c0b1","111":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/6e05daaab9a81a2ea5348b70833bdfb6_023eb1e947686aef7764a3ce4c9683b47d2235c51a031e36b947e4398ef6906d","112":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/d29d4fcb1b25a9d424a12800869a3b65_991d563880a3345073ebb4cc3cd57778ef5cfbc3ae625cefec2ffc3b690a5aa5","113":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/983764cb5075eedbd96ec034df1374a1_a94f5a1f0c9b45b9082044ebe72774b0313a58e5a2f58d00a63827ad7d48bb62","114":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/9abafed7a919fe54046abe458a6b3140_4003c5226083b7beb7b5901c79027e3833be0aec78da9aa3fc05f0293f5bb43e","115":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/4268a231e34c78a807bd51c7d5e1064e_a9049cfd9cbbb250474c1364710dcd276e1896297b2dee37b6ffad96a882bda9","116":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/b80be54bf0fbb43ebd8a20dca4d8f6f0_544d5a34e1d959e4e7794c58503b3478de33eb4ef21e8b74839b950adda7dedd","117":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/4ce28371de65a22a241dee28128dda4d_0daec6dffe6bd726f3031d51a39728c4f88f48482ebbae6c05f758ca24dd0890","118":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c55284b8098cbaa9a1db08cbdf46bae8_6baa7acefb038acbb2fedbfdce556766c48349c5d13374347a26bd83e2acf283","119":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/dd77cf42f690e808bb9d8131b7cec48b_0b3713716d1127b36eb335737778cca3d4b7b476a99a571a11dc118e71463d2b","120":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c657e3f25ab9ae85a99e421231a6c6a8_06deb81cfec70dbd14da6bb6471b8ee4bcc142ee08b60714af9f91683b461e6a","121":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/cd4fc426707d63e4d9b8bc9205dea3fc_cb648ffe70ec0942be80f294a1a07c5e64958570265b70cfd84da78072877fe7"}
}

},{}],56:[function(require,module,exports){
/* mousetrap v1.4.6 craig.is/killing/mice */
(function(J,r,f){function s(a,b,d){a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent("on"+b,d)}function A(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);a.shiftKey||(b=b.toLowerCase());return b}return h[a.which]?h[a.which]:B[a.which]?B[a.which]:String.fromCharCode(a.which).toLowerCase()}function t(a){a=a||{};var b=!1,d;for(d in n)a[d]?b=!0:n[d]=0;b||(u=!1)}function C(a,b,d,c,e,v){var g,k,f=[],h=d.type;if(!l[a])return[];"keyup"==h&&w(a)&&(b=[a]);for(g=0;g<l[a].length;++g)if(k=
l[a][g],!(!c&&k.seq&&n[k.seq]!=k.level||h!=k.action||("keypress"!=h||d.metaKey||d.ctrlKey)&&b.sort().join(",")!==k.modifiers.sort().join(","))){var m=c&&k.seq==c&&k.level==v;(!c&&k.combo==e||m)&&l[a].splice(g,1);f.push(k)}return f}function K(a){var b=[];a.shiftKey&&b.push("shift");a.altKey&&b.push("alt");a.ctrlKey&&b.push("ctrl");a.metaKey&&b.push("meta");return b}function x(a,b,d,c){m.stopCallback(b,b.target||b.srcElement,d,c)||!1!==a(b,d)||(b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation?
b.stopPropagation():b.cancelBubble=!0)}function y(a){"number"!==typeof a.which&&(a.which=a.keyCode);var b=A(a);b&&("keyup"==a.type&&z===b?z=!1:m.handleKey(b,K(a),a))}function w(a){return"shift"==a||"ctrl"==a||"alt"==a||"meta"==a}function L(a,b,d,c){function e(b){return function(){u=b;++n[a];clearTimeout(D);D=setTimeout(t,1E3)}}function v(b){x(d,b,a);"keyup"!==c&&(z=A(b));setTimeout(t,10)}for(var g=n[a]=0;g<b.length;++g){var f=g+1===b.length?v:e(c||E(b[g+1]).action);F(b[g],f,c,a,g)}}function E(a,b){var d,
c,e,f=[];d="+"===a?["+"]:a.split("+");for(e=0;e<d.length;++e)c=d[e],G[c]&&(c=G[c]),b&&"keypress"!=b&&H[c]&&(c=H[c],f.push("shift")),w(c)&&f.push(c);d=c;e=b;if(!e){if(!p){p={};for(var g in h)95<g&&112>g||h.hasOwnProperty(g)&&(p[h[g]]=g)}e=p[d]?"keydown":"keypress"}"keypress"==e&&f.length&&(e="keydown");return{key:c,modifiers:f,action:e}}function F(a,b,d,c,e){q[a+":"+d]=b;a=a.replace(/\s+/g," ");var f=a.split(" ");1<f.length?L(a,f,b,d):(d=E(a,d),l[d.key]=l[d.key]||[],C(d.key,d.modifiers,{type:d.action},
c,a,e),l[d.key][c?"unshift":"push"]({callback:b,modifiers:d.modifiers,action:d.action,seq:c,level:e,combo:a}))}var h={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},B={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},H={"~":"`","!":"1",
"@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},G={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},p,l={},q={},n={},D,z=!1,I=!1,u=!1;for(f=1;20>f;++f)h[111+f]="f"+f;for(f=0;9>=f;++f)h[f+96]=f;s(r,"keypress",y);s(r,"keydown",y);s(r,"keyup",y);var m={bind:function(a,b,d){a=a instanceof Array?a:[a];for(var c=0;c<a.length;++c)F(a[c],b,d);return this},
unbind:function(a,b){return m.bind(a,function(){},b)},trigger:function(a,b){if(q[a+":"+b])q[a+":"+b]({},a);return this},reset:function(){l={};q={};return this},stopCallback:function(a,b){return-1<(" "+b.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.isContentEditable},handleKey:function(a,b,d){var c=C(a,b,d),e;b={};var f=0,g=!1;for(e=0;e<c.length;++e)c[e].seq&&(f=Math.max(f,c[e].level));for(e=0;e<c.length;++e)c[e].seq?c[e].level==f&&(g=!0,
b[c[e].seq]=1,x(c[e].callback,d,c[e].combo,c[e].seq)):g||x(c[e].callback,d,c[e].combo);c="keypress"==d.type&&I;d.type!=u||w(a)||c||t(b);I=g&&"keydown"==d.type}};J.Mousetrap=m;"function"===typeof define&&define.amd&&define(m)})(window,document);

},{}]},{},[2])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvYXBwLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY2FtcGFpZ25fZGV0YWlsLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY2FtcGFpZ25zLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY29tcGFueS5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL2NvbXBhbnlfcHJvc3BlY3RzLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY29tcGFueV9zaWduYWxfY2FyZC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL2NyZWF0ZV9jYW1wYWlnbi5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL2NyZWF0ZV9jb21wYW55X3Byb2ZpbGVfbW9kYWwuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9jcmVhdGVfZnVuZGluZ19zaWduYWxfbW9kYWwuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9jcmVhdGVfaGlyaW5nX3NpZ25hbF9tb2RhbC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL2NyZWF0ZV9saXN0X21vZGFsLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY3JlYXRlX21pbmluZ19qb2JfbW9kYWwuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9jcmVhdGVfcHJvc3BlY3RfbGlzdF9mcm9tX2NvbXBhbnlfbGlzdC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL2NyZWF0ZV9wcm9zcGVjdF9wcm9maWxlX21vZGFsLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY3JlYXRlX3RlbXBsYXRlLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvZGF0YV9yb3cuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9kYXRhX3RhYmxlLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvZGVsZXRlX2xpc3RfbW9kYWwuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9lZGl0X3RlbXBsYXRlLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvZW1haWwuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9mb2xsb3d1cF9mZWVkLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvZm9sbG93dXBfdGltZWxpbmUuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9mcmVlX3RyaWFsLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvbGFuZGluZ19wYWdlLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvbGFuZGluZ19wYWdlX2NvbmNlcHQuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9sb2FkaW5nX3NwaW5uZXIuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9sb2dpbi5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL21lc3Nlbmdlci5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL21pbmluZ19qb2IuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9taW5pbmdfam9iX2NhbGVuZGFyLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvbWluaW5nX2pvYl9sb2FkaW5nLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvcGFuZWxfZm9vdGluZy5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3Blb3BsZV9zaWduYWxfY2FyZC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3ByaWNpbmcuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9wcm9zcGVjdHMuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9yZW5hbWVfbGlzdF9tb2RhbC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NjaGVkdWxlLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvc2VuZF9lbWFpbF9tb2RhbC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NlbnRfbWFpbC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NpZGVfbWVudV91c2VyX3Byb3NwZWN0cy5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NpZ25hbF9jYWxlbmRhci5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NpZ25hbF9kZXRhaWwuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9zaWduYWxfbG9hZGluZy5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NpZ25hbF9wcm9maWxlLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvc2lnbmFscy5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NpZ251cC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NwaW5uZXIuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy90ZW1wbGF0ZXMuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy90ZW1wbGF0ZXNfbWVudS5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3RpbWVsaW5lX2RheV9lbGVtZW50LmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvdXNlcl9wcm9zcGVjdC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3VzZXJfcHJvc3BlY3RfaGVhZGVyLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvdXNlcl9zaWRlX21lbnVfbGlzdC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9saWIvZGF0YS5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9saWIvbW91c2V0cmFwLm1pbi5taW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDdkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2UEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4WkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM1lBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaG1DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9PQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeGtDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOWlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hGQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxuLyogVE9ET1xuICogXG4gKiAtIEFsbCBjb3VudCBjaGFuZ2UsIHdoZW4gcHJvc3BlY3QgaXMgYXJjaGl2ZWRcbiAqIC0gV2hlbiBpcyBsaXN0IGlzIGNoYWFuZ2VkIGZyb20gYWxsIGFuZCB0aGVuIHJldHVybmVkIHRvIEFsbCBwcm9zcGVjdHMgdGFrZSBhIGxvbmcgICAgIHRpbWUgdG8gbG9hZFxuICogLSBGaXggcGFnaW5hdGlvbiBpc3N1ZXNcbiAqXG4gKiAtIFBhcmFsbGVsaXplIFdvcmtlcnNcbiAqIC0gU2NhbGUgdXAgZ29vZ2xlIHNjcmFwZSB0byBodW5kcmVkcyBvZiB3b3JrZXJzIChoZXJva3UpXG4gKlxuICogLSBDb21wYW55IFNob3J0Y3V0cyBcbiAqIC0gQWRkIGFiaWxpdHkgdG8gc3dpdGNoIGFjY291bnRzIGZvciBhZG1pbnNcbiAqIC0gQWRkIGVtYWlsIHVuZWRpdGFibGUgZW1haWwgZmllbGRzXG4gKi9cblxudmFyIFByb3NwZWN0cyA9IHJlcXVpcmUoJy4vcHJvc3BlY3RzLmpzLm1pbi5qcycpO1xudmFyIENvbXBhbnlQcm9zcGVjdCA9IHJlcXVpcmUoJy4vY29tcGFueS5qcy5taW4uanMnKTtcbnZhciBDb21wYW55UHJvc3BlY3RzID0gcmVxdWlyZSgnLi9jb21wYW55X3Byb3NwZWN0cy5qcy5taW4uanMnKTtcbnZhciBEYXRhVGFibGUgPSByZXF1aXJlKCcuL2RhdGFfdGFibGUuanMubWluLmpzJyk7XG52YXIgTWluaW5nSm9iID0gcmVxdWlyZSgnLi9taW5pbmdfam9iLmpzLm1pbi5qcycpO1xudmFyIENhbXBhaWducyA9IHJlcXVpcmUoJy4vZW1haWwuanMubWluLmpzJyk7XG52YXIgQW5hbHl0aWNzID0gcmVxdWlyZSgnLi9hbmFseXRpY3MuanMubWluLmpzJyk7XG52YXIgU2lnblVwID0gcmVxdWlyZSgnLi9zaWdudXAuanMubWluLmpzJyk7XG52YXIgTG9naW4gPSByZXF1aXJlKCcuL2xvZ2luLmpzLm1pbi5qcycpO1xudmFyIExhbmRpbmdQYWdlID0gcmVxdWlyZSgnLi9sYW5kaW5nX3BhZ2UuanMubWluLmpzJyk7XG52YXIgTGFuZGluZ1BhZ2UgPSByZXF1aXJlKCcuL2xhbmRpbmdfcGFnZV9jb25jZXB0LmpzLm1pbi5qcycpO1xudmFyIEZyZWVUcmlhbCA9IHJlcXVpcmUoJy4vZnJlZV90cmlhbC5qcy5taW4uanMnKTtcbnZhciBQcmljaW5nID0gcmVxdWlyZSgnLi9wcmljaW5nLmpzLm1pbi5qcycpO1xudmFyIFNpZ25hbHMgPSByZXF1aXJlKCcuL3NpZ25hbHMuanMubWluLmpzJyk7XG52YXIgTW91c2VUcmFwID0gcmVxdWlyZSgnLi4vbGliL21vdXNldHJhcC5taW4ubWluLmpzJylcbi8vdmFyIGNoZWNrQXV0aCA9IHJlcXVpcmUoJy4vYXV0aC5taW4uanMnKVxuXG52YXIgSG9tZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0hvbWUnLFxuICBjb21wb25lbnRXaWxsTW91bnQ6IGZ1bmN0aW9uKCl7XG4gICAgY2hlY2tBdXRoKClcbiAgfSxcblxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIC8vIG51bV9vZl9wYWdlc1xuICAgIGNvbnNvbGUubG9nKHRoaXMucHJvcHMpXG4gICAgcmV0dXJuIHtwcm9zcGVjdHM6IFtdICwgXG4gICAgICAgICAgICBjdXJyZW50UGFnZTogMSwgXG4gICAgICAgICAgICBwYWdlczogMSwgXG4gICAgICAgICAgICBjb3VudDpcIn5cIiwgXG4gICAgICAgICAgICBwcm9zcGVjdFR5cGU6J1Byb3NwZWN0JywgXG4gICAgICAgICAgICAvL3NlbGVjdGVkU2NyZWVuOidQcm9zcGVjdHMnfVxuICAgICAgICAgICAgc2VsZWN0ZWRTY3JlZW46IHRoaXMucHJvcHMuc2VsZWN0ZWRTY3JlZW59XG4gIH0sXG5cbiAgdG9nZ2xlU2NyZWVuOiBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRTY3JlZW4gOiAkKGUudGFyZ2V0KS50ZXh0KCkudHJpbSgpfSlcbiAgfSxcblxuICBsb2dvdXQ6IGZ1bmN0aW9uKCkge1xuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpXG4gICAgbG9jYXRpb24uaHJlZiA9IFwiI2dldF9zdGFydGVkXCJcbiAgfSxcblxuICBsaXN0RHJvcGRvd246IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdkcm9wZG93bicpXG4gICAgLy8kKCcuZHJvcGRvd24tbWVudScpLmRyb3Bkb3duKClcbiAgICAkKCcucHJvc3BlY3QtbGlzdC1zZWxlY3QnKS5jc3MoJ2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzJywnMHB4JylcbiAgICAkKCcucHJvc3BlY3QtbGlzdC1zZWxlY3QnKS5jc3MoJ2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXMnLCcwcHgnKVxuICAgICAgXG4gICAgJCgnLmxpc3Qtc2VsZWN0LWRyb3Bkb3duJykuY3NzKCdib3JkZXItdG9wLWxlZnQtcmFkaXVzJywnMHB4JylcbiAgICAkKCcubGlzdC1zZWxlY3QtZHJvcGRvd24nKS5jc3MoJ2JvcmRlci10b3AtcmlnaHQtcmFkaXVzJywnMHB4JylcbiAgfSxcblxuICBzZWxlY3RDaGFuZ2UgOiBmdW5jdGlvbigpIHtcblxuICB9LFxuXG4gIHN0cmlwZUNoZWNrb3V0OiBmdW5jdGlvbigpIHtcbiAgICBoYW5kbGVyLm9wZW4oe1xuICAgICAgbmFtZTogJ0N1c3RvbWVybycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0dldCA5MDAgZnJlZSBlbWFpbCBjcmVkaXRzIScsXG4gICAgICBhbW91bnQ6IDAsXG4gICAgICBwYW5lbExhYmVsOiBcIlN0YXJ0IFlvdXIgRnJlZSBUcmlhbCFcIixcbiAgICAgIG9wZW5lZDogZnVuY3Rpb24oKSB7XG4gICAgICB9LFxuICAgICAgY2xvc2VkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJjbG9zZWRcIilcbiAgICAgICAgbG9jYXRpb24ucmVsb2FkKClcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgLy8gQ3JlZGl0IENhcmQgVmVyaWZpZWQgQ2hlY2tcbiAgICBsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMgPSBcIltdXCJcbiAgICBjdXJyZW50VXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKVxuICAgIGlmKCFjdXJyZW50VXNlci5jcmVkaXRDYXJkVmVyaWZpZWQpXG4gICAgICB0aGlzLnN0cmlwZUNoZWNrb3V0KClcblxuICAgIC8qXG4gICAgICogTWFrZSBSZXF1ZXN0IFRvIEdldCBNb3N0IFVwIHRvIERhdGUgSW5mb1xuICAgICAqIE9uIFN1Y2Nlc3MgQWRkIFRvIEludGVyY29tXG4gICAgKi9cblxuICAgIC8qXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonJ1xuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIC8vIE51bWJlciBvZiBQcm9zcGVjdHMgZm9yIHVzZXJcbiAgICAgICAgLy8gTnVtYmVyIG9mIExpc3RzXG4gICAgICAgIC8vIE51bWJlciBvZiBFbWFpbHMgZm91bmRcbiAgICAgICAgSW50ZXJjb20oJ2Jvb3QnLCB7XG4gICAgICAgICAgYXBwX2lkOiAnYWJjMTIzNDUnLFxuICAgICAgICAgIGVtYWlsOiAnam9obi5kb2VAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6IDEyMzQ1Njc4OTAsXG4gICAgICAgICAgbmFtZTogJ0pvaG4gRG9lJyxcbiAgICAgICAgICB1c2VyX2lkOiAnOTg3NidcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgfVxuICAgIH0pO1xuICAgICovXG4gICAgLy8gSW50ZXJjb21cbiAgICAvLyBNaXhwYW5lbFxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcHJvc3BlY3RzID0gXCJjaG9vc2UgYnRuIGJ0bi1wcmltYXJ5IFwiXG4gICAgY29tcGFueVByb3NwZWN0cyA9IFwiY2hvb3NlIGJ0biBidG4tcHJpbWFyeSBcIlxuICAgIGNhbXBhaWducyA9IFwiY2hvb3NlIGJ0biBidG4tcHJpbWFyeSBcIlxuICAgIHNpZ25hbHMgPSBcImNob29zZSBidG4gYnRuLXByaW1hcnkgXCJcbiAgICBzd2l0Y2ggKHRoaXMuc3RhdGUuc2VsZWN0ZWRTY3JlZW4pIHtcbiAgICAgIGNhc2UgJ1Byb3NwZWN0cyc6XG4gICAgICAgIGN1cnJlbnRTY3JlZW4gPSBQcm9zcGVjdHMobnVsbClcbiAgICAgICAgcHJvc3BlY3RzID0gXCJjaG9vc2UgYnRuIGJ0bi1wcmltYXJ5IGFwcC1hY3RpdmVcIlxuICAgICAgICBsb2NhdGlvbi5ocmVmPSBcIiNwcm9zcGVjdHNcIlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0NvbXBhbmllcyc6XG4gICAgICAgIGN1cnJlbnRTY3JlZW4gPSBDb21wYW55UHJvc3BlY3RzKG51bGwpXG4gICAgICAgIGN1cnJlbnRTY3JlZW4gPSBEYXRhVGFibGUoe2xpc3RDbGFzc05hbWU6ICdDb21wYW55UHJvc3BlY3RMaXN0JywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlSGVhZGVyOiBbJ05hbWUnLCdBZGRlZCBPbicsJ0luZHVzdHJ5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIyBvZiBQcm9zcGVjdHMnLCdTaWduYWxzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJywnJ10sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdDb21wYW55UHJvc3BlY3QnfSlcbiAgICAgICAgbG9jYXRpb24uaHJlZj0gXCIjY29tcGFuaWVzXCJcbiAgICAgICAgY29tcGFueVByb3NwZWN0cyA9IFwiY2hvb3NlIGJ0biBidG4tcHJpbWFyeSBhcHAtYWN0aXZlXCJcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdNaW5pbmcgSm9icyc6XG4gICAgICAgIGN1cnJlbnRTY3JlZW4gPSBNaW5pbmdKb2IobnVsbClcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdBbmFseXRpY3MnOlxuICAgICAgICBjdXJyZW50U2NyZWVuID0gQW5hbHl0aWNzKG51bGwpXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnQ2FtcGFpZ25zJzpcbiAgICAgICAgY3VycmVudFNjcmVlbiA9IENhbXBhaWducyhudWxsKVxuICAgICAgICBjYW1wYWlnbnMgPSBcImNob29zZSBidG4gYnRuLXByaW1hcnkgYXBwLWFjdGl2ZVwiXG4gICAgICAgIGxvY2F0aW9uLmhyZWY9IFwiI2NhbXBhaWduc1wiXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnU2lnbmFscyc6XG4gICAgICAgIGN1cnJlbnRTY3JlZW4gPSBTaWduYWxzKG51bGwpXG4gICAgICAgIHNpZ25hbHMgPSBcImNob29zZSBidG4gYnRuLXByaW1hcnkgYXBwLWFjdGl2ZVwiXG4gICAgICAgIGxvY2F0aW9uLmhyZWY9IFwiI3NpZ25hbHNcIlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ1NldHRpbmdzJzpcbiAgICAgICAgY3VycmVudFNjcmVlbiA9IFNldHRpbmdzKG51bGwpXG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmgxKHtzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLGRpc3BsYXk6J2lubGluZScsZm9udFdlaWdodDonMTAwJyxjb2xvcjonIzFjYTNmZCd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmltZyh7c3JjOiBcImJ1aWxkL2ltZy9uZXR3b3JrLnBuZ1wiLCBcbiAgICAgICAgICAgIHN0eWxlOiB7IGhlaWdodDozMiwgbWFyZ2luVG9wOi00LFxuICAgICAgICAgICAgICBtYXJnaW5SaWdodDo1LCB9fVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLGZvbnRTaXplOjMyLGZvbnRGYW1pbHk6J1Byb3hpbWEtTm92YSd9fSwgXCJDdXN0b21lcm8gXCIpXG4gICAgICAgICksIFxuICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7ZmxvYXQ6J3JpZ2h0J319LCBcbiAgICAgICAgUmVhY3QuRE9NLmltZyh7c3JjOiBcImJ1aWxkL2ltZy91c2VyLnBuZ1wiLCBzdHlsZToge2hlaWdodDonNDBweCcsd2lkdGg6JzQwcHgnLHBhZGRpbmc6JzJweCcsbWFyZ2luVG9wOic1cHgnLGJvcmRlclJhZGl1czonMjNweCcsZGlzcGxheTonaW5saW5lJ30sIGNsYXNzTmFtZTogXCJ0aHVtYm5haWxcIn0pLCBcIsKgwqDCoFwiLCAgXG4gICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5Ub3A6JzIwcHgnLGZsb2F0OidyaWdodCcsZGlzcGxheTonaW5saW5lJ319LCBcIldlbGNvbWVcIilcbiAgICAgICksIFxuICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7ZmxvYXQ6J3JpZ2h0JywgbWFyZ2luUmlnaHQ6JzE1MHB4J319LCBcbiAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpblRvcDonMjBweCcsZmxvYXQ6J3JpZ2h0JyxkaXNwbGF5OidpbmxpbmUnLH19LCBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLmxvZ291dCwgc3R5bGU6IHtjb2xvcjonIzFjYTNmZCd9fSwgXCJMb2dvdXRcIikpLCBcbiAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpblRvcDonMjBweCcsZmxvYXQ6J3JpZ2h0JyxkaXNwbGF5OidpbmxpbmUnLG1hcmdpblJpZ2h0OicxMHB4J319LCBSZWFjdC5ET00uYSh7aHJlZjogXCIjcHJpY2luZ1wiLCBzdHlsZToge2NvbG9yOicjMWNhM2ZkJ319LCBcIlByaWNpbmdcIikpLCBcbiAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpblRvcDonMjBweCcsZmxvYXQ6J3JpZ2h0JyxkaXNwbGF5OidpbmxpbmUnLCBtYXJnaW5SaWdodDonMTBweCd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiaHR0cDovL3Jlc291cmNlcy5jdXN0b21lcm9ocS5jb21cIiwgc3R5bGU6IHtjb2xvcjonIzFjYTNmZCd9fSwgXCJSZXNvdXJjZXNcIilcbiAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICBzdHlsZToge21hcmdpblRvcDoxNSwgZmxvYXQ6J3JpZ2h0JyxtYXJnaW5SaWdodDoxMCxcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiAnbGluZWFyLWdyYWRpZW50KDE4MGRlZywgIzAwOTZmZiAwJSwgIzAwNWRmZiAxMDAlKSd9LCBcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgYnRuLXhzXCIsIFxuICAgICAgICAgICAgb25DbGljazogdGhpcy5kb3dubG9hZFNvY2lhbFByb3NwZWN0ZXJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZG93bmxvYWRcIn0pLCBcIiDCoFwiICsgJyAnICtcbiAgICAgICAgICAgIFwiRG93bmxvYWQgQ2hyb21lIFNvY2lhbCBQcm9zcGVjdGVyXCJcbiAgICAgICAgICApXG4gICAgICApLCBcbiAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwgcGFuZWwtZGVmYXVsdFwifSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcIm5hdmJhclwiLCBjbGFzc05hbWU6IFwicGFuZWwtaGVhZGluZ1wifSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwIGNvbC1tZC1vZmZzZXQtNFwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IHNpZ25hbHMsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snfSwgb25DbGljazogdGhpcy50b2dnbGVTY3JlZW59LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXdpZmlcIn0pLCBcIsKgU2lnbmFsc1wiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogcHJvc3BlY3RzLCBvbkNsaWNrOiB0aGlzLnRvZ2dsZVNjcmVlbn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdXNlclwifSksIFwiwqBQcm9zcGVjdHNcIlxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiY2hvb3NlIGJ0biBidG4tcHJpbWFyeVwiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfSwgb25DbGljazogdGhpcy50b2dnbGVTY3JlZW59LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWJhci1jaGFydC1vXCJ9KSwgXCIgQW5hbHl0aWNzXCJcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImNob29zZSBidG4gYnRuLXByaW1hcnlcIiwgXG4gICAgICAgICAgICAgICAgICBzdHlsZToge3dpZHRoOjE2MixkaXNwbGF5Oidub25lJ30sIFxuICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy50b2dnbGVTY3JlZW59LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXRhc2tzXCJ9KSwgXCIgTWluaW5nIEpvYnMgwqBcIiwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1kZWZhdWx0XCJ9LCBcIkJFVEFcIilcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBjb21wYW55UHJvc3BlY3RzLCBvbkNsaWNrOiB0aGlzLnRvZ2dsZVNjcmVlbn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYnVpbGRpbmdcIn0pLCBcIiBDb21wYW5pZXNcIlxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IGNhbXBhaWducywgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9LCBvbkNsaWNrOiB0aGlzLnRvZ2dsZVNjcmVlbn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZW52ZWxvcGVcIn0pLCBcIsKgQ2FtcGFpZ25zXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgICksIFxuXG4gICAgICAgICAgY3VycmVudFNjcmVlblxuXG4gICAgICAgIClcbiAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9LFxuICBcbiAgZG93bmxvYWRTb2NpYWxQcm9zcGVjdGVyOiBmdW5jdGlvbigpIHtcbiAgICAvL2Nocm9tZS53ZWJzdG9yZS5pbnN0YWxsKCdodHRwczovL2Nocm9tZS5nb29nbGUuY29tL3dlYnN0b3JlL2RldGFpbC9vZmNhbGtqYm9nYWlpcGVrY29jZGVmamVuY2xpb2VjaScpXG4gICAgLy9jaHJvbWUud2Vic3RvcmUuaW5zdGFsbCgpXG4gICAgd2luZG93Lm9wZW4oJ2h0dHBzOi8vY2hyb21lLmdvb2dsZS5jb20vd2Vic3RvcmUvZGV0YWlsL2N1c3RvbWVyby1wcm9zcGVjdGVyL29mY2Fsa2pib2dhaWlwZWtjb2NkZWZqZW5jbGlvZWNpJylcbiAgfSxcblxuICAvKlxuICAgICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1zdWNjZXNzXCIgb25DbGljaz17dGhpcy5kb3dubG9hZEZpbGV9XG4gICAgICAgICAgICAgICAgICBzdHlsZT17e2Zsb2F0OidyaWdodCcsbWFyZ2luVG9wOic2cHgnfX0+XG4gICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1kb3dubG9hZFwiIC8+Jm5ic3A7Jm5ic3A7XG4gICAgICAgICAgICA8aDUgc3R5bGU9e3tkaXNwbGF5OidpbmxpbmUnfX0gPkRvd25sb2FkIENTVjwvaDU+XG4gICAgICAgICAgPC9hPlxuICAqL1xuXG4gIGRlbGV0ZVByb3NwZWN0OiBmdW5jdGlvbihvYmplY3RJZCwgZW5kcG9pbnQpIHtcbiAgICB2YXIgZmlsdGVyZWQgPSBfLmZpbHRlcih0aGlzLnN0YXRlLnByb3NwZWN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgIHJldHVybiBpdGVtLm9iamVjdElkICE9IG9iamVjdElkXG4gICAgfSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7cHJvc3BlY3RzOiBmaWx0ZXJlZH0pXG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzLycrZW5kcG9pbnQrJy8nK29iamVjdElkLFxuICAgICAgdHlwZTonREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHBhcnNlX2hlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSk7XG5cblxudmFyIFdvcmtzcGFjZSA9IEJhY2tib25lLlJvdXRlci5leHRlbmQoe1xuICByb3V0ZXM6IHtcbiAgICAvL2xhbmRpbmdfcGFnZVxuICAgIFwiXCIgICAgICAgICAgICA6IFwicHJvc3BlY3RzXCIsXG4gICAgXCJnZXRfc3RhcnRlZFwiIDogXCJsYW5kaW5nX3BhZ2VcIixcbiAgICBcImZyZWVfdHJpYWxcIiAgOiBcImZyZWVfdHJpYWxcIixcbiAgICBcInNpZ251cFwiICAgICAgOiBcInNpZ251cFwiLFxuICAgIFwibG9naW5cIiAgICAgICA6IFwibG9naW5cIixcbiAgICBcInByaWNpbmdcIiAgICAgOiBcInByaWNpbmdcIixcbiAgICBcbiAgICBcInNpZ25hbHNcIiAgICAgOiBcInNpZ25hbHNcIixcbiAgICBcInByb3NwZWN0c1wiICAgOiBcInByb3NwZWN0c1wiLFxuICAgIFwiY29tcGFuaWVzXCIgICA6IFwiY29tcGFuaWVzXCIsXG4gICAgXCJjYW1wYWlnbnNcIiAgIDogXCJjYW1wYWlnbnNcIixcblxuICAgIFwicHJvc3BlY3RzL3A6cGFnZVwiICAgICAgIDogXCJwcm9zcGVjdHNcIixcbiAgICBcInByb3NwZWN0cy9saXN0LzpsaXN0XCIgICA6IFwicHJvc3BlY3RzX2xpc3RcIixcblxuICAgIFwiY29tcGFuaWVzL3A6cGFnZVwiICAgICAgIDogXCJjb21wYW5pZXNcIixcbiAgICBcImNvbXBhbmllcy9saXN0LzpsaXN0XCIgICA6IFwiY29tcGFuaWVzX2xpc3RcIixcblxuICAgIFwic2lnbmFscy9wcm9maWxlLzpwcm9maWxlXCIgIDogXCJzaWduYWxzX3Byb2ZpbGVcIixcbiAgICBcInNpZ25hbHMvY2FsZW5kYXIvOnByb2ZpbGVcIiA6IFwic2lnbmFsc19jYWxlbmRhclwiLFxuXG4gICAgXCJjYW1wYWlnbnMvZm9sbG93dXBfZmVlZFwiICAgICAgOiBcImNhbXBhaWduc1wiLFxuICAgIFwiY2FtcGFpZ25zL3NlbnRfZW1haWxzXCIgICAgICAgICA6IFwiY2FtcGFpZ25zXCIsXG4gICAgXCJjYW1wYWlnbnMvdGVtcGxhdGUvOnRlbXBsYXRlXCIgOiBcImNhbXBhaWduc1wiLFxuICB9LFxuXG4gIG1haW5Sb3V0ZTogZnVuY3Rpb24ocm91dGUpIHtcbiAgICBjb25zb2xlLmxvZyhyb3V0ZSlcbiAgICBjdXJyZW50VXNlciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW50VXNlcicpXG4gICAgJCgnI2NvbnRlbnQnKS5odG1sKCcnKVxuICAgIGlmIChjdXJyZW50VXNlcikgXG4gICAgICBSZWFjdC5yZW5kZXJDb21wb25lbnQoSG9tZSh7c2VsZWN0ZWRTY3JlZW46IHJvdXRlfSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50JykpO1xuICAgIGVsc2VcbiAgICAgIGxvY2F0aW9uLmhyZWYgPSBcIiNnZXRfc3RhcnRlZFwiXG4gIH0sXG5cbiAgc2lnbmFscyAgOiBmdW5jdGlvbigpIHsgdGhpcy5tYWluUm91dGUoJ1NpZ25hbHMnKSB9LFxuICBwcm9zcGVjdHM6IGZ1bmN0aW9uKCkgeyB0aGlzLm1haW5Sb3V0ZSgnUHJvc3BlY3RzJykgfSxcbiAgY29tcGFuaWVzOiBmdW5jdGlvbigpIHsgdGhpcy5tYWluUm91dGUoJ0NvbXBhbmllcycpIH0sXG4gIGNhbXBhaWduczogZnVuY3Rpb24oKSB7IHRoaXMubWFpblJvdXRlKCdDYW1wYWlnbnMnKSB9LFxuXG4gIGhvbWU6IGZ1bmN0aW9uKCkge1xuICAgIGN1cnJlbnRVc2VyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRVc2VyJylcbiAgICBpZiAoY3VycmVudFVzZXIpIFxuICAgICAgUmVhY3QucmVuZGVyQ29tcG9uZW50KEhvbWUoe3NlbGVjdGVkU2NyZWVuOiBcIlByb3NwZWN0c1wifSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50JykpO1xuICAgIGVsc2VcbiAgICAgIGxvY2F0aW9uLmhyZWYgPSBcIiNnZXRfc3RhcnRlZFwiXG4gIH0sXG4gIGxhbmRpbmdfcGFnZTogZnVuY3Rpb24oKSB7XG4gICAgUmVhY3QucmVuZGVyQ29tcG9uZW50KExhbmRpbmdQYWdlKCksIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50JykpO1xuICB9LFxuICBmcmVlX3RyaWFsOiBmdW5jdGlvbigpIHtcbiAgICBSZWFjdC5yZW5kZXJDb21wb25lbnQoRnJlZVRyaWFsKCksIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50JykpO1xuICB9LFxuXG4gIHNpZ251cDogZnVuY3Rpb24oKSB7XG4gICAgUmVhY3QucmVuZGVyQ29tcG9uZW50KFNpZ25VcCgpLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpKTtcbiAgfSxcbiAgbG9naW46IGZ1bmN0aW9uKCkge1xuICAgIFJlYWN0LnJlbmRlckNvbXBvbmVudChMb2dpbigpLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpKTtcbiAgfSxcbiAgcHJpY2luZzogZnVuY3Rpb24oKSB7XG4gICAgUmVhY3QucmVuZGVyQ29tcG9uZW50KFByaWNpbmcoKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKSk7XG4gIH1cbn0pO1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuICBjaGVja0F1dGgoKVxuICB2YXIgd29ya3NwYWNlID0gbmV3IFdvcmtzcGFjZTtcbiAgQmFja2JvbmUuaGlzdG9yeS5zdGFydCgpO1xufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cbnZhciBUZW1wbGF0ZXNNZW51ID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXNfbWVudS5qcy5taW4uanMnKTtcbnZhciBFZGl0VGVtcGxhdGVWaWV3ID0gcmVxdWlyZSgnLi9lZGl0X3RlbXBsYXRlLmpzLm1pbi5qcycpO1xudmFyIENyZWF0ZVRlbXBsYXRlVmlldyA9IHJlcXVpcmUoJy4vY3JlYXRlX3RlbXBsYXRlLmpzLm1pbi5qcycpO1xudmFyIEZvbGxvd3VwVGltZWxpbmUgPSByZXF1aXJlKCcuL2ZvbGxvd3VwX3RpbWVsaW5lLmpzLm1pbi5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBDYW1wYWlnbiBEZXRhaWxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2VsZWN0ZWRUZW1wbGF0ZTogMCxcbiAgICAgIHRlbXBsYXRlRGV0YWlsTW9kZTogZmFsc2UsXG4gICAgICBlZGl0TW9kZTogZmFsc2UsXG4gICAgICBmb2xsb3d1cERheTogMCxcbiAgICAgIHRlbXBsYXRlczpbXSxcbiAgICAgIGN1cnJlbnRUZW1wbGF0ZTonJyxcbiAgICAgIHByb3NwZWN0TGlzdENvdW50Oid+JyxcbiAgICAgIHByb3NwZWN0czpbXSxcbiAgICB9XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICB0aGlzc3NzID0gdGhpcztcbiAgICAgY29tcGFueSA9IEpTT04uc3RyaW5naWZ5KEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55KVxuICAgICBxcnkgPSAnd2hlcmU9e1wiY29tcGFueVwiOicrY29tcGFueSsnfSdcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1RlbXBsYXRlJyxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IHRoaXNzc3Muc2V0U3RhdGUoe3RlbXBsYXRlczogcmVzLnJlc3VsdHN9KSB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZygnZXJyb3InKSB9XG4gICAgfSk7XG5cbiAgICBjdXJyZW50TGlzdCA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICdfX3R5cGUnICAgIDogJ1BvaW50ZXInLCBcbiAgICAgICdjbGFzc05hbWUnIDogJ1Byb3NwZWN0TGlzdCcsXG4gICAgICAnb2JqZWN0SWQnICA6IHRoaXMucHJvcHMuc2VsZWN0ZWRDYW1wYWlnbi5wcm9zcGVjdF9saXN0Lm9iamVjdElkLCBcbiAgICB9KVxuICAgIHFyeSA9ICd3aGVyZT17XCJsaXN0c1wiOicrY3VycmVudExpc3QrJ30mbGltaXQ9MTAwMCZjb3VudD0xJ1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0JyxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICB0aGlzc3NzLnNldFN0YXRlKHtcbiAgICAgICAgICBwcm9zcGVjdHM6IHJlcy5yZXN1bHRzLFxuICAgICAgICAgIHByb3NwZWN0TGlzdENvdW50OiByZXMuY291bnQgXG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyB9XG4gICAgfSlcbiAgfSxcblxuICByZXR1cm5Ub092ZXJ2aWV3OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnByb3BzLnRvZ2dsZVNjcmVlbignQ2FtcGFpZ25zJylcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIC8vY29uc29sZS5sb2coJ2NhbXBhaWduIGRldGFpbCcpXG4gICAgdGhpc3MgPSB0aGlzO1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCIsIFxuICAgICAgICAgICBzdHlsZToge3dpZHRoOicxMDAlJyxoZWlnaHQ6JzEwMCUnLHBhZGRpbmdMZWZ0OjAscGFkZGluZ1JpZ2h0OjB9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7bWFyZ2luQm90dG9tOjMwfSwgaWQ6IFwiY2FtcGFpZ24tdG9wLWRldGFpbFwifSwgXG4gICAgICAgIFJlYWN0LkRPTS5oNSh7c3R5bGU6IHttYXJnaW5Ub3A6MjAsbWFyZ2luTGVmdDoyMH19LCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLnJldHVyblRvT3ZlcnZpZXd9LCBcIkNhbXBhaWducyBcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zbWFsbChudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtzdHlsZToge21hcmdpbkxlZnQ6MTAsIG1hcmdpblJpZ2h0OjEwfSwgXG4gICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZmEgZmEtY2hldnJvbi1yaWdodFwifSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICB0aGlzLnByb3BzLnNlbGVjdGVkQ2FtcGFpZ24ubmFtZVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbkxlZnQ6MjAsZGlzcGxheTonaW5saW5lLWJsb2NrJyxtYXJnaW5SaWdodDoxNX19LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcInRleHQtbXV0ZWRcIn0sIFwiUHJvc3BlY3QgTGlzdDpcIiksIFwiIMKgXCIsIFxuICAgICAgICAgICh0aGlzLnByb3BzLnNlbGVjdGVkQ2FtcGFpZ24ucHJvc3BlY3RfbGlzdC5zaWduYWxfbGlzdCkgPyBSZWFjdC5ET00uc3BhbihudWxsLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXdpZmlcIn0pLCBcIsKgXCIpIDogXCJcIiwgXG4gICAgICAgICAgdGhpcy5wcm9wcy5zZWxlY3RlZENhbXBhaWduLnByb3NwZWN0X2xpc3QubmFtZVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJiYWRnZVwifSwgdGhpcy5zdGF0ZS5wcm9zcGVjdExpc3RDb3VudCksIFxuXG4gICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5MZWZ0OjIwLGRpc3BsYXk6J2lubGluZS1ibG9jaycsbWFyZ2luUmlnaHQ6MTV9fSwgXG4gICAgICAgICAgXCJCYXRjaGVzIDpcIlxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJiYWRnZVwifSwgXCIyXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6ICdyaWdodCcsIG1hcmdpblRvcDogLTM1LCBtYXJnaW5SaWdodDogMzAsIGRpc3BsYXk6J25vbmUnfSwgXG4gICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXNtXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWVudmVsb3BlXCJ9KSwgXCIgU2VuZCFcIlxuICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtOCBwYW5lbCBwYW5lbC1kZWZhdWx0XCIsIFxuICAgICAgICAgICAgICAgc3R5bGU6IHtoZWlnaHQ6JzQ0M3B4JyxwYWRkaW5nTGVmdDozMDUscGFkZGluZ1RvcDo1MCxvdmVyZmxvdzonYXV0bycsYm9yZGVyUmlnaHQ6MCxib3JkZXJSYWRpdXM6MH19LCBcbiAgICAgICAgICAgICAgIEZvbGxvd3VwVGltZWxpbmUoe1xuICAgICAgICAgICAgICAgICAgdGVtcGxhdGVzOiB0aGlzLnN0YXRlLnRlbXBsYXRlcywgXG4gICAgICAgICAgICAgICAgICBwcm9zcGVjdHM6IHRoaXMuc3RhdGUucHJvc3BlY3RzLCBcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRDYW1wYWlnbjogdGhpcy5wcm9wcy5zZWxlY3RlZENhbXBhaWduLCBcbiAgICAgICAgICAgICAgICAgIHRvZ2dsZVRlbXBsYXRlRWRpdE1lbnU6IHRoaXMudG9nZ2xlVGVtcGxhdGVFZGl0TWVudSwgXG4gICAgICAgICAgICAgICAgICBpbml0aWFsRm9sbG93dXBzOiB0aGlzLnByb3BzLnNlbGVjdGVkQ2FtcGFpZ24uZm9sbG93dXBzfSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTRcIiwgXG4gICAgICAgICAgICAgICBzdHlsZToge3BhZGRpbmdMZWZ0OjAscGFkZGluZ1JpZ2h0OjAsaGVpZ2h0OjQ0M319LCBcbiAgICAgICAgICAgIFRlbXBsYXRlc01lbnUoe1xuICAgICAgICAgICAgICB0ZW1wbGF0ZXM6IHRoaXMuc3RhdGUudGVtcGxhdGVzLCBcbiAgICAgICAgICAgICAgdG9nZ2xlVGVtcGxhdGVFZGl0TWVudTogdGhpcy50b2dnbGVUZW1wbGF0ZUVkaXRNZW51fSlcbiAgICAgICAgICApLCBcblxuICAgICAgICAgICh0aGlzLnN0YXRlLnRlbXBsYXRlRGV0YWlsTW9kZSkgPyBFZGl0VGVtcGxhdGVWaWV3KHtcbiAgICAgICAgICAgIGVkaXRNb2RlOiB0aGlzLnN0YXRlLmVkaXRNb2RlLCBcbiAgICAgICAgICAgIGluaXRpYWxUZW1wbGF0ZVZhbHVlczogdGhpcy5zdGF0ZS5jdXJyZW50VGVtcGxhdGUsIFxuICAgICAgICAgICAgc2F2ZVRlbXBsYXRlOiB0aGlzLnNhdmVUZW1wbGF0ZSwgXG4gICAgICAgICAgICBwcm9zcGVjdDogdGhpcy5zdGF0ZS5wcm9zcGVjdHNbMF0sIFxuICAgICAgICAgICAgdG9nZ2xlVGVtcGxhdGVFZGl0TWVudTogdGhpcy50b2dnbGVUZW1wbGF0ZUVkaXRNZW51LCBcbiAgICAgICAgICAgIGZvbGxvd3VwRGF5OiB0aGlzLnN0YXRlLmZvbGxvd3VwRGF5fSkgOiBcIlwiXG4gICAgICApXG4gICAgKTtcbiAgfSxcblxuICBzYXZlVGVtcGxhdGU6IGZ1bmN0aW9uKHRlbXBsYXRlLCBuZXdUZW1wbGF0ZSkge1xuICAgIHRlbXBsYXRlcyA9IHRoaXMuc3RhdGUudGVtcGxhdGVzXG4gICAgZm9yKGk9MDtpPCB0aGlzLnN0YXRlLnRlbXBsYXRlcy5sZW5ndGg7IGkrKylcbiAgICAgIGlmKHRoaXMuc3RhdGUudGVtcGxhdGVzW2ldLm5hbWUgPT0gdGVtcGxhdGUubmFtZSlcbiAgICAgICAgYnJlYWtcbiAgICBcbiAgICBjb25zb2xlLmxvZyh0ZW1wbGF0ZSlcbiAgICBpZihuZXdUZW1wbGF0ZSl7XG4gICAgICB0ZW1wbGF0ZS5zdWJqZWN0ID0gdGVtcGxhdGUuc3ViamVjdFxuICAgICAgdGVtcGxhdGUubmFtZSA9IHRlbXBsYXRlLm5hbWVcbiAgICAgIHRlbXBsYXRlLmJvZHkgPSB0ZW1wbGF0ZS5ib2R5XG4gICAgICB0ZW1wbGF0ZXMucHVzaCh0ZW1wbGF0ZSlcblxuICAgICAgJC5hamF4KHtcbiAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1RlbXBsYXRlJyxcbiAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgdHlwZTonUE9TVCcsXG4gICAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIG5hbWUgOiB0ZW1wbGF0ZS5uYW1lLFxuICAgICAgICAgIHN1YmplY3Q6IHRlbXBsYXRlLnN1YmplY3QsXG4gICAgICAgICAgYm9keTogdGVtcGxhdGUuYm9keSxcbiAgICAgICAgICB1c2VyOntcbiAgICAgICAgICAgIF9fdHlwZTogJ1BvaW50ZXInLFxuICAgICAgICAgICAgY2xhc3NOYW1lOidfVXNlcicsXG4gICAgICAgICAgICBvYmplY3RJZDpKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikub2JqZWN0SWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb21wYW55OkpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55LFxuICAgICAgICB9KSxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHRlbXBsYXRlc1tpXS5zdWJqZWN0ID0gdGVtcGxhdGUuc3ViamVjdFxuICAgICAgdGVtcGxhdGVzW2ldLmJvZHkgPSB0ZW1wbGF0ZS5ib2R5XG5cbiAgICAgICQuYWpheCh7XG4gICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9UZW1wbGF0ZS8nK3RlbXBsYXRlc1tpXS5vYmplY3RJZCxcbiAgICAgICAgdHlwZTonUFVUJyxcbiAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbmFtZSA6IHRlbXBsYXRlLm5hbWUsXG4gICAgICAgICAgc3ViamVjdDogdGVtcGxhdGUuc3ViamVjdCxcbiAgICAgICAgICBib2R5OiB0ZW1wbGF0ZS5ib2R5LFxuICAgICAgICB9KSxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7dGVtcGxhdGVzOiB0ZW1wbGF0ZXMgfSlcblxuICB9LFxuXG4gIHRvZ2dsZVRlbXBsYXRlRWRpdE1lbnU6IGZ1bmN0aW9uKGN1cnJlbnRUZW1wbGF0ZSwgZWRpdE1vZGUpIHtcbiAgICBlZGl0TW9kZSA9IChlZGl0TW9kZSkgPyB0cnVlIDogZmFsc2VcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGN1cnJlbnRUZW1wbGF0ZTogY3VycmVudFRlbXBsYXRlLFxuICAgICAgdGVtcGxhdGVEZXRhaWxNb2RlOiAhdGhpcy5zdGF0ZS50ZW1wbGF0ZURldGFpbE1vZGUsXG4gICAgfSlcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gQ2FtcGFpZ25zXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNlbGVjdGVkU2NyZWVuOiAnT3ZlcnZpZXcnLFxuICAgIH1cbiAgfSxcblxuICBjaGFuZ2VTZWxlY3RlZENhbXBhaWduOiBmdW5jdGlvbihjYW1wYWlnbikge1xuICAgIC8vdGhpcy5wcm9wcy50b2dnbGVTY3JlZW4oJ0NhbXBhaWduRGV0YWlsJylcbiAgICB0aGlzLnByb3BzLmNoYW5nZVNlbGVjdGVkQ2FtcGFpZ24oJ0NhbXBhaWduRGV0YWlsJywgY2FtcGFpZ24pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBjYW1wYWlnbnMgPSBbXVxuICAgIGNvbnNvbGUubG9nKHRoaXMucHJvcHMpXG4gICAgZm9yKGk9MDtpPCB0aGlzLnByb3BzLmNhbXBhaWducy5sZW5ndGg7IGkrKyl7IFxuICAgICAgY2FtcGFpZ25zLnB1c2goQ2FtcGFpZ25Sb3coe1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlU2NyZWVuOiB0aGlzLnRvZ2dsZVNjcmVlbiwgXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VTZWxlY3RlZENhbXBhaWduOiB0aGlzLmNoYW5nZVNlbGVjdGVkQ2FtcGFpZ24sIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FtcGFpZ246IHRoaXMucHJvcHMuY2FtcGFpZ25zW2ldfSkgKVxuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtvdmVyZmxvdzonYXV0bycsaGVpZ2h0OjU1MH19LCBcbiAgICAgICAgUmVhY3QuRE9NLnRhYmxlKHtjbGFzc05hbWU6IFwidGFibGUgdGFibGUtc3RyaXBlZFwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRoZWFkKG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIkNhbXBhaWduIE5hbWVcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiUHJvc3BlY3QgTGlzdFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInfX0sIFwiRGVsaXZlcmVkXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9fSwgXCJPcGVuZWRcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyxkaXNwbGF5Oidub25lJ319LCBcIlJlcGxpZWRcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyxkaXNwbGF5Oidub25lJ319LCBcIkxpbmsgQ2xpY2tzXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9fSwgXCJCb3VuY2VzXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt3aWR0aDoxNTAsdGV4dEFsaWduOidjZW50ZXInfX0sIFwiIFwiKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS50Ym9keShudWxsLCBcbiAgICAgICAgICAgIGNhbXBhaWduc1xuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgQ2FtcGFpZ25Sb3cgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdDYW1wYWlnblJvdycsXG4gIHRvZ2dsZVNjcmVlbjogZnVuY3Rpb24oKSB7XG4gICAgLy90aGlzLnByb3BzLnRvZ2dsZVNjcmVlbigpXG4gICAgdGhpcy5wcm9wcy5jaGFuZ2VTZWxlY3RlZENhbXBhaWduKHRoaXMucHJvcHMuY2FtcGFpZ24pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBwcm9zcGVjdF9saXN0ID0gKHRoaXMucHJvcHMuY2FtcGFpZ24ucHJvc3BlY3RfbGlzdCkgPyB0aGlzLnByb3BzLmNhbXBhaWduLnByb3NwZWN0X2xpc3QgOiB7bGlzdF90eXBlOlwiXCIsIG5hbWU6XCJcIn1cbiAgICBpZihwcm9zcGVjdF9saXN0Lmxpc3RfdHlwZSA9PSBcInNpZ25hbF9saXN0XCIpXG4gICAgICAgIGljb25UeXBlID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS13aWZpXCIsIHN0eWxlOiB7bWFyZ2luUmlnaHQ6NX19KVxuICAgIGVsc2UgaWYocHJvc3BlY3RfbGlzdC5saXN0X3R5cGUgPT0gXCJtaW5pbmdfam9iXCIpXG4gICAgICAgIGljb25UeXBlID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG91ZC1kb3dubG9hZFwiLCBzdHlsZToge21hcmdpblJpZ2h0OjV9fSlcbiAgICBlbHNlIFxuICAgICAgICBpY29uVHlwZSA9XCJcIlxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udHIoe3N0eWxlOiB7Y3Vyc29yOidwb2ludGVyJ30sIG9uQ2xpY2s6IHRoaXMudG9nZ2xlU2NyZWVufSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBcIiBcIiwgUmVhY3QuRE9NLmg2KG51bGwsIFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5jYW1wYWlnbi5uYW1lXG4gICAgICAgICksIFwiIFwiKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBcIiBcIiwgUmVhY3QuRE9NLmg2KG51bGwsIFxuICAgICAgICAgICAgaWNvblR5cGUsIFxuICAgICAgICAgICAgcHJvc3BlY3RfbGlzdC5uYW1lXG4gICAgICAgICksIFwiIFwiKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcicscGFkZGluZzoxMn19LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImJhZGdlXCIsIHN0eWxlOiB7YmFja2dyb3VuZENvbG9yOicjZjBhZDRlJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGFwZXItcGxhbmVcIn0pLCBcIiDCoFwiICsgJyAnICtcbiAgICAgICAgICAgIFwiMTAwJVwiXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyxwYWRkaW5nOjEyfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwibGFiZWwgbGFiZWwtc3VjY2Vzc1wifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWV5ZVwifSksIFwiIMKgXCIgKyAnICcgK1xuICAgICAgICAgICAgXCIxMDAlXCIpXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInLHBhZGRpbmc6MTIsZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1wcmltYXJ5XCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbWFpbC1yZXBseVwifSksIFwiIMKgXCIgKyAnICcgK1xuICAgICAgICAgICAgXCIxMDAlXCIpXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInLHBhZGRpbmc6MTIsZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1pbmZvXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZXh0ZXJuYWwtbGluay1zcXVhcmVcIn0pLCBcIiDCoFwiICsgJyAnICtcbiAgICAgICAgICAgIFwiMTglXCIpXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInLHBhZGRpbmc6MTJ9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZXhjbGFtYXRpb24tY2lyY2xlXCJ9KSwgXCIgwqBcIiArICcgJyArXG4gICAgICAgICAgICBcIjExJVwiKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyxwYWRkaW5nVG9wOjEyfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgYnRuLXhzXCIsIFxuICAgICAgICAgICAgc3R5bGU6IHtiYWNrZ3JvdW5kSW1hZ2U6ICdsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCAjMDA5NmZmIDAlLCAjMDA1ZGZmIDEwMCUpICFpbXBvcnRhbnQ7JyxkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY29weVwiLCBzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnfX0pLCBcIsKgIENsb25lXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuLWRlZmF1bHRcIiwgXG4gICAgICAgICAgICBzdHlsZToge21hcmdpbkxlZnQ6NX19LCBcIiBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS10cmFzaC1vXCJ9KSlcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcicscGFkZGluZzoxMixkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDQoe3N0eWxlOiB7bWFyZ2luOjB9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLXN1Y2Nlc3NcIn0sIFwiUmVhZHlcIilcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG4vLyBcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy9Db21wYW55UHJvc3BlY3RcbiAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgcHJvc3BlY3QgPSB0aGlzLnByb3BzLnByb3NwZWN0XG4gICAgd2Vic2l0ZSA9IChwcm9zcGVjdC53ZWJzaXRlKSA/IFJlYWN0LkRPTS5hKHtocmVmOiAnaHR0cDovLycrcHJvc3BlY3Qud2Vic2l0ZX0sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZ2xvYmVcIn0pKSA6ICcnXG4gICAgbGlua2VkaW5fcHJvZmlsZSA9IChwcm9zcGVjdC5wcm9maWxlICE9IFwiXCIpID8gUmVhY3QuRE9NLmEoe2hyZWY6IHByb3NwZWN0LnByb2ZpbGV9LCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWxpbmtlZGluLXNxdWFyZVwifSkpIDogJydcblxuICAvKlxuICAgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6XCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14c1wiXG4gICAgICAgICAgICAgIHN0eWxlPXt7YmFja2dyb3VuZDogJ2xpbmVhci1ncmFkaWVudCgjMzRjNTIwLCMyMTkyMTEpJ319PiBcbiAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtc2VhcmNoXCIgLz4gJm5ic3A7XG4gICAgICAgICAgICAgIEZpbmQgUHJvc3BlY3RzXG4gICAgICAgICAgICA8L2E+XG4gICovXG5cbiAgY29uc29sZS5sb2dcblxuICAvLzx0ZD48YSBocmVmPVwiamF2YXNjcmlwdDpcIiBvbkNsaWNrPXt0aGlzLmRlbGV0ZVByb3NwZWN0fT48aSBjbGFzc05hbWU9XCJmYSBmYS10aW1lcy1jaXJjbGVcIiAvPjwvYT48L3RkPlxuICAgIHJldHVybiAoXG4gICAgICAgIFJlYWN0LkRPTS50cihudWxsLCBcbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7d2lkdGg6JzMwMHB4J319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnfX0sIHByb3NwZWN0Lm5hbWUpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtmb250V2VpZ2h0Oic0MDAnLG1hcmdpbjonMHB4J319LCBwcm9zcGVjdC5oZWFkY291bnQpXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbjonMHB4J319LCBtb21lbnQocHJvc3BlY3QuY3JlYXRlZEF0LCdZWVlZLU1NLUREVGg6bW06c3MnKS5mcm9tTm93KCkpKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbjonMHB4J319LCBwcm9zcGVjdC5pbmR1c3RyeSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInLHdpZHRoOjEzNyxkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwibGFiZWwgbGFiZWwtcHJpbWFyeVwiLCBzdHlsZToge2Rpc3BsYXk6ICdibG9jaycsIHdpZHRoOiAnYXV0bycsIG1hcmdpblJpZ2h0OiAnYXV0bycsIG1hcmdpbkxlZnQ6ICdhdXRvJywgd2lkdGg6ICcyNXB4J319LCBcIjBcIilcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLWluZm9cIn0sIFwiSGlyaW5nXCIpKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3dpZHRoOjMyMH19LCBcbiAgICAgICAgICAgIFwiwqAgwqBcIiwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14c1wiLCBcbiAgICAgICAgICAgICAgb25DbGljazogdGhpcy5vcGVuTGlua2VkaW5Db21wYW55UHJvZmlsZSwgXG4gICAgICAgICAgICAgIHN0eWxlOiB7YmFja2dyb3VuZEltYWdlOiAnbGluZWFyLWdyYWRpZW50KDE4MGRlZywgIzAwOTZmZiAwJSwgIzAwNWRmZiAxMDAlKSd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc2VhcmNoXCJ9KSwgXCIgwqBcIiArICcgJyArXG4gICAgICAgICAgICAgIFwiU2VhcmNoIFByb2ZpbGVzXCJcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgXCLCoCDCoFwiLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzXCIsIFxuICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLm9wZW5TaW1pbGFyQ29tcGFuaWVzLCBcbiAgICAgICAgICAgICAgc3R5bGU6IHtiYWNrZ3JvdW5kSW1hZ2U6ICdsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCAjMDA5NmZmIDAlLCAjMDA1ZGZmIDEwMCUpJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jb3B5XCJ9KSwgXCIgwqBcIiArICcgJyArXG4gICAgICAgICAgICAgIFwiRmluZCBTaW1pbGFyIENvbXBhbmllc1wiXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFwiIFwiLCBsaW5rZWRpbl9wcm9maWxlLCBcIiDCoCBcIiwgd2Vic2l0ZSwgXCIgXCIpXG4gICAgICAgIClcbiAgICApO1xuICB9LFxuXG4gIG9wZW5MaW5rZWRpbkNvbXBhbnlQcm9maWxlOiBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY2lkID0gdGhpcy5wcm9wcy5wcm9zcGVjdC5wcm9maWxlLnNwbGl0KCc/JylbMF0uc3BsaXQoJy9jb21wYW55LycpWzFdXG4gICAgd2luZG93Lm9wZW4oXCJodHRwczovL3d3dy5saW5rZWRpbi5jb20vdnNlYXJjaC9wP2ZfQ0M9XCIrY2lkKVxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgfSxcblxuICBvcGVuU2ltaWxhckNvbXBhbmllczogZnVuY3Rpb24oZSkge1xuICAgIGNpZCA9IHRoaXMucHJvcHMucHJvc3BlY3QucHJvZmlsZS5zcGxpdCgnPycpWzBdLnNwbGl0KCcvY29tcGFueS8nKVsxXVxuICAgIHdpbmRvdy5vcGVuKFwiaHR0cHM6Ly93d3cubGlua2VkaW4uY29tL3ZzZWFyY2gvYz9yc2lkPTUyNjQ0MDM3MTQwOTE4NDc2ODE3NSZwaXZvdFR5cGU9c2ltJnBpZD1cIitjaWQrXCImdHJrPXNpbV9jb21wYW5pZXNfcmVzX3NpbSZ0cmtJbmZvPVZTUlBzZWFyY2hJZCUzQTUyNjQ0MDM3MTQwOTE4NDc2ODE3NSUyQ1ZTUlB0YXJnZXRJZCUzQTEwMjUlMkNWU1JQY21wdCUzQXByaW1hcnlcIilcbiAgfSxcblxuICBkZWxldGVQcm9zcGVjdDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcm9wcy5kZWxldGVQcm9zcGVjdCh0aGlzLnByb3BzLnByb3NwZWN0Lm9iamVjdElkLCAnQ29tcGFueVByb3NwZWN0JylcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxudmFyIENvbXBhbnlQcm9zcGVjdCA9IHJlcXVpcmUoJy4vY29tcGFueS5qcy5taW4uanMnKTtcbnZhciBMb2FkaW5nU3Bpbm5lciA9IHJlcXVpcmUoJy4vbG9hZGluZ19zcGlubmVyLmpzLm1pbi5qcycpXG52YXIgU2lkZU1lbnVQcm9zcGVjdHMgPSByZXF1aXJlKCcuL3NpZGVfbWVudV91c2VyX3Byb3NwZWN0cy5qcy5taW4uanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4geyAgcHJvc3BlY3RzICAgOiBbXSxcbiAgICAgICAgICAgICAgY3VycmVudFBhZ2UgOiAxLFxuICAgICAgICAgICAgICBsb2FkaW5nICAgICA6IHRydWUsXG4gICAgICAgICAgICAgIHBhZ2VzICAgICAgIDogMSxcbiAgICAgICAgICAgICAgY291bnQgICAgICAgOiBcIn5cIiwgfVxuICB9LFxuICAvKlxuICAgKlxuICAgIGNpZCA9IHRoaXMucHJvcHMucHJvc3BlY3QucHJvZmlsZS5zcGxpdCgnPycpWzBdLnNwbGl0KCcvY29tcGFueS8nKVsxXVxuICAgIGNvbnNvbGUubG9nKHRoaXMucHJvcHMpXG4gICAgd2luZG93Lm9wZW4oXCJodHRwczovL3d3dy5saW5rZWRpbi5jb20vdnNlYXJjaC9wP2ZfQ0M9XCIrY2lkKVxuICAqL1xuICBcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnY29tcGFueScpXG4gICAgcHJvc3BlY3RzID0gW11cbiAgICBmb3IoaT0wO2k8dGhpcy5zdGF0ZS5wcm9zcGVjdHMubGVuZ3RoO2krKykge1xuICAgICAgdXJsID0gdGhpcy5zdGF0ZS5wcm9zcGVjdHNbaV0udXJsXG5cbiAgICAgIGlmKHVybCAhPSBcIm5vIGxpbmtlZGluIHdlYnNpdGVcIiAmJiB0eXBlb2YodXJsKSAhPSBcInVuZGVmaW5lZFwiICYmIHVybCAhPSBcIlwiKXtcbiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoJ2h0dHA6Ly8nLCcnKVxuICAgICAgICB0aGVfbGluayA9IFJlYWN0LkRPTS5hKHtocmVmOiAnaHR0cDovLycrdXJsfSwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1nbG9iZVwifSkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGVfbGluayA9IFwiXCJcbiAgICAgIH1cblxuICAgICAgcHJvZmlsZSA9IHRoaXMuc3RhdGUucHJvc3BlY3RzW2ldLnByb2ZpbGVcbiAgICAgIC8vcHJvZmlsZSA9IHByb2ZpbGUucmVwbGFjZSgnaHR0cDovLycsJycpXG4gICAgICBsaSA9IFJlYWN0LkRPTS5hKHtocmVmOiAnaHR0cDovLycrcHJvZmlsZX0sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbGlua2VkaW4tc3F1YXJlXCJ9KSlcblxuICAgICAgaWYodGhpcy5wcm9wcy5wcm9zcGVjdFR5cGUgPT0gJ1Byb3NwZWN0Jykge1xuICAgICAgICBwcm9zcGVjdHMucHVzaChcbiAgICAgICAgICBVc2VyUHJvc3BlY3Qoe2RlbGV0ZVByb3NwZWN0OiB0aGlzLmRlbGV0ZVByb3NwZWN0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3NwZWN0OiB0aGlzLnN0YXRlLnByb3NwZWN0c1tpXSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHRoaXMuZ2VuZXJhdGVfaWQoKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rOiB0aGVfbGluaywgbGk6IGxpfSlcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvc3BlY3RzLnB1c2goXG4gICAgICAgICAgQ29tcGFueVByb3NwZWN0KHtkZWxldGVQcm9zcGVjdDogdGhpcy5kZWxldGVQcm9zcGVjdCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHRoaXMuZ2VuZXJhdGVfaWQoKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9zcGVjdDogdGhpcy5zdGF0ZS5wcm9zcGVjdHNbaV19KVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgcHJldmlvdXMgPSAodGhpcy5zdGF0ZS5jdXJyZW50UGFnZSAtIDEpID8gJycgOiAnZGlzYWJsZWQnXG4gICAgZm9yd2FyZCA9ICh0aGlzLnN0YXRlLmN1cnJlbnRQYWdlID09IHRoaXMuc3RhdGUucGFnZXMpID8gJ2Rpc2FibGVkJyA6ICcnXG5cbiAgICBsb3dlckxpbWl0ID0gKHRoaXMuc3RhdGUuY3VycmVudFBhZ2UtMSkqMTAwXG4gICAgdXBwZXJMaW1pdCA9IHRoaXMuc3RhdGUuY3VycmVudFBhZ2UqMTAwXG5cbiAgICBsb3dlckxpbWl0ID0gKGxvd2VyTGltaXQpID8gbG93ZXJMaW1pdCA6IDFcbiAgICB1cHBlckxpbWl0ID0gKHVwcGVyTGltaXQgPiB0aGlzLnN0YXRlLmNvdW50KSA/IHRoaXMuc3RhdGUuY291bnQgOiB1cHBlckxpbWl0XG4gIFxuICAgIGNvbnNvbGUubG9nKHByb3NwZWN0cy5sZW5ndGgpXG4gICAgY29tcGFueVN0eWxlPSAocHJvc3BlY3RzLmxlbmd0aCkgPyB7cGFkZGluZzonMCd9IDoge2Rpc3BsYXk6J25vbmUnfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyIGJnLXJhZGl1c1wiLCBzdHlsZToge3dpZHRoOicxMDAlJyxwYWRkaW5nOicwJ319LCBcbiAgICAgICAgKHByb3NwZWN0cy5sZW5ndGggPT0gMCAmJiB0aGlzLnN0YXRlLmxvYWRpbmcgPT0gZmFsc2UpID8gRW1wdHlDb21wYW55UHJvc3BlY3RzUGFuZWwobnVsbCkgOiBcIlwiLCBcbiAgICAgICAgKHRoaXMuc3RhdGUubG9hZGluZykgPyBMb2FkaW5nU3Bpbm5lcihudWxsKSA6IFwiXCIsIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTEyXCIsIHN0eWxlOiBjb21wYW55U3R5bGV9LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJhdXRvc2Nyb2xsXCIsIHN0eWxlOiB7aGVpZ2h0Oic0MDBweCcsb3ZlcmZsb3c6J2F1dG8nfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRhYmxlKHtjbGFzc05hbWU6IFwidGFibGUgdGFibGUtc3RyaXBlZFwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50aGVhZCh7c3R5bGU6IHtiYWNrZ3JvdW5kQ29sb3I6J3doaXRlJ319LCBcbiAgICAgICAgICAgICAgICBDb21wYW55UHJvc3BlY3RIZWFkZXIobnVsbClcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50Ym9keShudWxsLCBcbiAgICAgICAgICAgICAgICBwcm9zcGVjdHNcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1mb290aW5nXCIsIGlkOiBcIm5hdmJhclwiLCBzdHlsZToge2hlaWdodDonMzVweCcscGFkZGluZzonMHB4JyxwYWRkaW5nVG9wOic3cHgnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luUmlnaHQ6JzIwcHgnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIHN0eWxlOiB7bWFyZ2luUmlnaHQ6JzVweCd9LCBvbkNsaWNrOiB0aGlzLnBhZ2luYXRlUHJldmlvdXMsIGNsYXNzTmFtZTogXCJibHVlLWdyYWRpZW50IGJ0biBidG4tcHJpbWFyeSBidG4teHMgXCIgKyBwcmV2aW91c30sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZmFzdC1iYWNrd2FyZFwifSkpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLnBhZ2luYXRlUHJldmlvdXMsIGNsYXNzTmFtZTogXCJibHVlLWdyYWRpZW50IGJ0biBidG4tcHJpbWFyeSBidG4teHMgXCIgKyBwcmV2aW91c30sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2hldnJvbi1sZWZ0XCJ9KSksIFxuICAgICAgICAgIFwiwqAgwqBcIiwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJcIn0sIGxvd2VyTGltaXQgKyAnIC0gJyt1cHBlckxpbWl0Kycgb2YgJyt0aGlzLnN0YXRlLmNvdW50KSwgXG4gICAgICAgICAgXCLCoCDCoFwiLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLnBhZ2luYXRlRm9yd2FyZCwgY2xhc3NOYW1lOiBcImJsdWUtZ3JhZGllbnQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBcIiArIGZvcndhcmR9LCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZXZyb24tcmlnaHRcIn0pKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgc3R5bGU6IHttYXJnaW5MZWZ0Oic1cHgnfSwgb25DbGljazogdGhpcy5wYWdpbmF0ZUZvcndhcmQsIGNsYXNzTmFtZTogXCJibHVlLWdyYWRpZW50IGJ0biBidG4tcHJpbWFyeSBidG4teHMgXCIgKyBmb3J3YXJkfSwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1mYXN0LWZvcndhcmRcIn0pKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXNzcyA9IHRoaXM7XG4gICAgcGFyc2VfaGVhZGVycyA9IHsnWC1QYXJzZS1BcHBsaWNhdGlvbi1JZCc6J044NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkonLCAnWC1QYXJzZS1SRVNULUFQSS1LZXknOidWTjZFd1Z5Qlp3TzF1cGhzQlBzYXU4dDdKUVJwMDBVTTNLWXNpaVFiJ31cbiAgICBjb21wYW55ID0gSlNPTi5zdHJpbmdpZnkoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLmNvbXBhbnkpXG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Db21wYW55UHJvc3BlY3QnLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGhlYWRlcnM6IHBhcnNlX2hlYWRlcnMsXG4gICAgICBhc3luYzogdHJ1ZSxcbiAgICAgIGRhdGE6ICd3aGVyZT17XCJjb21wYW55XCI6Jytjb21wYW55Kyd9JmNvdW50PTEmb3JkZXI9LWNyZWF0ZWRBdCcsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe3Byb3NwZWN0czogcmVzLnJlc3VsdHN9KVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe2NvdW50OiByZXMuY291bnR9KVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe3BhZ2VzOiBNYXRoLmNlaWwocmVzLmNvdW50LzEwMCl9KVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe2xvYWRpbmc6IGZhbHNlfSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJylcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIGdlbmVyYXRlX2lkIDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAnXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSk7XG4gIH0sXG59KTtcblxudmFyIFNpZGVNZW51Q29tcGFueVByb3NwZWN0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1NpZGVNZW51Q29tcGFueVByb3NwZWN0cycsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIFxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTJcIiwgc3R5bGU6IHtwYWRkaW5nOicwJyxoZWlnaHQ6JzQwMHB4JyxiYWNrZ3JvdW5kQ29sb3I6JyNlMGU5ZWUnLGJvcmRlclJpZ2h0OicxcHggc29saWQgI2IwYjhiZicsdGV4dEFsaWduOidjZW50ZXInfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicHJvc3BlY3QtbGlzdC1oZWFkZXJcIn0sIFxuICAgICAgICAgIFwiTGlzdHNcIlxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cC12ZXJ0aWNhbFwiLCBzdHlsZToge3dpZHRoOicxMDAlJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBjbGFzc05hbWU6IFwibGlzdC1uYW1lcyBidG4gYnRuLWRlZmF1bHRcIn0sIFwiVGVtcGxhdGVzXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBjbGFzc05hbWU6IFwibGlzdC1uYW1lcyBidG4gYnRuLWRlZmF1bHRcIn0sIFwiU2NoZWR1bGVzXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBjbGFzc05hbWU6IFwibGlzdC1uYW1lcyBidG4gYnRuLWRlZmF1bHRcIn0sIFwiUnVsZXNcIilcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnlcIiwgXG4gICAgICAgICAgICAgIHN0eWxlOiB7IGJhY2tncm91bmRJbWFnZTogJ2xpbmVhci1ncmFkaWVudCgxODBkZWcsICMwMDk2ZmYgMCUsICMwMDVkZmYgMTAwJSknfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1cy1jaXJjbGVcIn0pLCBcIsKgTmV3IENsYXNzXCJcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5icihudWxsKVxuICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgcGFnaW5hdGVQcmV2aW91czogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ3ByZXZpb3VzJylcbiAgICBjb25zb2xlLmxvZygodGhpcy5zdGF0ZS5jdXJyZW50UGFnZSAtIDEpKjEwMClcbiAgICB0aGlzcyA9IHRoaXM7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3Q/c2tpcD0nKyh0aGlzcy5zdGF0ZS5jdXJyZW50UGFnZS0yKSoxMDAsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgaGVhZGVyczogcGFyc2VfaGVhZGVycyxcbiAgICAgIGRhdGE6ICd3aGVyZT17XCJjb21wYW55XCI6Jytjb21wYW55Kyd9JmNvdW50PTEnLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe3Byb3NwZWN0czogcmVzLnJlc3VsdHN9KVxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7Y3VycmVudFBhZ2U6IHRoaXNzLnN0YXRlLmN1cnJlbnRQYWdlIC0gMX0pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBwYWdpbmF0ZUZvcndhcmQ6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdmb3J3YXJkJylcblxuICAgIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdD9za2lwPScrdGhpc3Muc3RhdGUuY3VycmVudFBhZ2UqMTAwLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGhlYWRlcnM6IHBhcnNlX2hlYWRlcnMsXG4gICAgICBkYXRhOiAnd2hlcmU9e1wiY29tcGFueVwiOicrY29tcGFueSsnfSZjb3VudD0xJyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtwcm9zcGVjdHM6IHJlcy5yZXN1bHRzfSlcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2N1cnJlbnRQYWdlOiB0aGlzcy5zdGF0ZS5jdXJyZW50UGFnZSArIDF9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG59KTtcblxudmFyIEVtcHR5Q29tcGFueVByb3NwZWN0c1BhbmVsID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnRW1wdHlDb21wYW55UHJvc3BlY3RzUGFuZWwnLFxuICBvcGVuTGlua2VkaW5XaW5kb3c6IGZ1bmN0aW9uKCkge1xuICAgIHdpbmRvdy5vcGVuKCdodHRwczovL3d3dy5saW5rZWRpbi5jb20vdnNlYXJjaC9jP3R5cGU9Y29tcGFuaWVzJylcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLW9mZnNldC0zIGNvbC1tZC02XCIsIHN0eWxlOiB7aGVpZ2h0OjQwMH19LCBcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0XCIsIHN0eWxlOiB7bWFyZ2luVG9wOjEwMCxoZWlnaHQ6MjAwfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtYm9keVwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmgxKHtjbGFzc05hbWU6IFwibGVhZFwiLCBzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcIlN0YXJ0IFByb3NwZWN0aW5nIE9uIExpbmtlZGluXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLm9wZW5MaW5rZWRpbldpbmRvdywgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2Vzc1wiLCBzdHlsZToge2JhY2tncm91bmRJbWFnZTogJ2xpbmVhci1ncmFkaWVudCgxODBkZWcsICMwMDk2ZmYgMCUsICMwMDVkZmYgMTAwJSkgIWltcG9ydGFudCcsZGlzcGxheTonYmxvY2snLG1hcmdpblJpZ2h0OidhdXRvJyxtYXJnaW5MZWZ0OidhdXRvJyx3aWR0aDoyMDAsIG1hcmdpblRvcDo1MH19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc2VhcmNoXCJ9KSwgXCIgwqBcIiArICcgJyArXG4gICAgICAgICAgICBcIlNlYXJjaCBmb3IgY29tcGFuaWVzIVwiKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgQ29tcGFueVByb3NwZWN0SGVhZGVyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ29tcGFueVByb3NwZWN0SGVhZGVyJyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnRyKG51bGwsIFxuICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJOYW1lXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiQWRkZWQgT25cIiksIFxuICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJJbmR1c3RyeVwiKSwgXG4gICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIiMgb2YgUHJvc3BlY3RzXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiU2lnbmFsc1wiKSwgXG4gICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIsKgXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiwqBcIilcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIFNpZ25hbENhcmRcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBjb21wYW55ID0gdGhpcy5wcm9wcy5jb21wYW55XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0IHNpZ25hbC1jYXJkXCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWJvZHlcIiwgc3R5bGU6IHtwYWRkaW5nTGVmdDoyNSwgcGFkZGluZ1JpZ2h0OjI1fX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNCh7c3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOicxMDAlJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZTogeyBmbG9hdDonbGVmdCcsbWF4V2lkdGg6ICc2MCUnLCB3aGl0ZVNwYWNlOiAnbm93cmFwJyxcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsIHRleHRPdmVyZmxvdzogJ2VsbGlwc2lzJ319LCBcbiAgICAgICAgICAgICAgY29tcGFueS5uYW1lKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLXN1Y2Nlc3NcIiwgXG4gICAgICAgICAgICAgIHN0eWxlOiB7bWFyZ2luTGVmdDo3LCBmbG9hdDoncmlnaHQnLGZvbnRTaXplOjEyLFxuICAgICAgICAgICAgICAgIG1heFdpZHRoOiAnNDAlJywgd2hpdGVTcGFjZTogJ25vd3JhcCcsXG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLCB0ZXh0T3ZlcmZsb3c6ICdlbGxpcHNpcyd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc3VpdGNhc2VcIn0pLCBcIiDCoFwiLCBcbiAgICAgICAgICAgICAgKGNvbXBhbnkuc2lnbmFscykgPyBjb21wYW55LnNpZ25hbHNbMF0uam9iX3RpdGxlIDogXCJcIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3NcIiwgXG4gICAgICAgICAgICBzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luVG9wOjE1LCBmb250V2VpZ2h0Oidib2xkJ319LCBcbiAgICAgICAgICAgIFwiUHJvc3BlY3QgVGhpcyBDb21wYW55XCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00ucCh7c3R5bGU6IHtmb250U2l6ZToxMix3aWR0aDonNzUlJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKG51bGwsIFxuICAgICAgICAgICAgKGNvbXBhbnkuc2lnbmFscykgPyBjb21wYW55LnNpZ25hbHNbMF0uc3VtbWFyeSA6IFwiXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbWFwLW1hcmtlclwifSksIFxuICAgICAgICAgICAgIFwiwqBcIiwgKGNvbXBhbnkuc2lnbmFscykgPyBjb21wYW55LnNpZ25hbHNbMF0ubG9jYXRpb24gOiBcIlwiXG4gICAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBjcmVhdGVMaXN0TW9kYWxcbiAgY3JlYXRlTGlzdDogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJCgnI2xpc3RUaXRsZScpLnZhbCgpKVxuXG4gICAgZGF0YSA9ICB7XG4gICAgICAnbmFtZScgICAgICAgIDogJCgnI2xpc3RUaXRsZScpLnZhbCgpLnRyaW0oKSwgICAvL1dhaXRpbmcgLCBSdW5uaW5nXG4gICAgICAndXNlcicgICAgICAgIDogeyAnX190eXBlJzonUG9pbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzTmFtZSc6J19Vc2VyJyxcbiAgICAgICAgICAgICAgICAgICAgICAnb2JqZWN0SWQnOid4V0VTaXc1U21kJyB9LFxuICAgIH1cblxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RMaXN0JyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpXG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGRhdGEuY291bnQgPSAwXG5cbiAgICB0aGlzLnByb3BzLmNyZWF0ZUxpc3QoZGF0YSlcbiAgICBcbiAgICAkKCcjY3JlYXRlTGlzdE1vZGFsJykubW9kYWwoJ2hpZGUnKVxuICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnbW9kYWwtb3BlbicpO1xuICAgICQoJy5tb2RhbC1iYWNrZHJvcCcpLnJlbW92ZSgpO1xuICAgIC8vJCgnYnV0dG9uLmNsb3NlJykuY2xpY2soKVxuICB9LFxuXG4gIGNyZWF0ZUNhbXBhaWduOiBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy9jb25zb2xlLmxvZygkKCcjbmV3TGlzdE5hbWUnKS52YWwoKSlcbiAgICBuZXdDYW1wYWlnbk5hbWUgPSAkKCcjbmV3Q2FtcGFpZ25OYW1lJykudmFsKClcbiAgICBwcm9zcGVjdExpc3ROYW1lID0gJCgnI3Byb3NwZWN0X2xpc3RzJykudmFsKClcbiAgICB0aGlzcyA9IHRoaXNcbiAgICBmb3IoaT0wO2k8IHRoaXMucHJvcHMucHJvc3BlY3RMaXN0cy5sZW5ndGg7IGkrKyl7XG4gICAgICBpZih0aGlzLnByb3BzLnByb3NwZWN0TGlzdHNbaV0ubmFtZSA9PSBwcm9zcGVjdExpc3ROYW1lKXtcbiAgICAgICAgcHJvc3BlY3RfbGlzdCA9IHRoaXMucHJvcHMucHJvc3BlY3RMaXN0c1tpXTsgXG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZihuZXdDYW1wYWlnbk5hbWUudHJpbSgpICE9IFwiXCIpXG4gICAgICB0aGlzLnByb3BzLmNyZWF0ZUNhbXBhaWduKHtcbiAgICAgICAgbmFtZTogbmV3Q2FtcGFpZ25OYW1lLFxuICAgICAgICBwcm9zcGVjdF9saXN0OiBwcm9zcGVjdF9saXN0XG4gICAgICB9KVxuICAgIC8vIERpc2FibGUgTW9kYWxcbiAgICAkKCcubW9kYWwtYmFja2Ryb3AnKS5jbGljaygpXG4gICAgJCgnLmZhZGUnKS5jbGljaygpXG4gICAgJCgnI25ld0NhbXBhaWduTmFtZScpLnZhbCgnJylcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHByb3NwZWN0X2xpc3RzID0gW11cbiAgICBmb3IoaT0wO2k8IHRoaXMucHJvcHMucHJvc3BlY3RMaXN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgcHJvc3BlY3RfbGlzdHMucHVzaCggUmVhY3QuRE9NLm9wdGlvbihudWxsLCB0aGlzLnByb3BzLnByb3NwZWN0TGlzdHNbaV0ubmFtZSkpXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbCBmYWRlIGJzLWNyZWF0ZUNhbXBhaWduLW1vZGFsLXNtXCIsIFxuICAgICAgICAgICB0YWJJbmRleDogXCItMVwiLCByb2xlOiBcImRpYWxvZ1wiLCAnYXJpYS1sYWJlbGxlZGJ5JzogXCJteVNtYWxsTW9kYWxMYWJlbFwiLCBcbiAgICAgICAgICAgJ2FyaWEtaGlkZGVuJzogXCJ0cnVlXCIsIGlkOiBcImNyZWF0ZUxpc3RNb2RhbFwiLCBzdHlsZToge3RvcDonMjAwcHgnfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1zbVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1jb250ZW50XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtaGVhZGVyXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJjbG9zZVwiLCAnZGF0YS1kaXNtaXNzJzogXCJtb2RhbFwifSwgUmVhY3QuRE9NLnNwYW4oeydhcmlhLWhpZGRlbic6IFwidHJ1ZVwifSwgXCLDl1wiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwic3Itb25seVwifSwgXCJDbG9zZVwiKSksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1lbnZlbG9wZVwifSksIFwiIMKgQ3JlYXRlIENhbXBhaWduXCIpXG4gICAgICAgICAgICAgICAgKSwgXG5cbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtYm9keVwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uZm9ybSh7b25TdWJtaXQ6IHRoaXMuY3JlYXRlQ2FtcGFpZ259LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHtpZDogXCJuZXdDYW1wYWlnbk5hbWVcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJFbnRlciBDYW1wYWlnbiBOYW1lLi4uXCIsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbFwifSksIFxuXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5zZWxlY3Qoe2NsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwicHJvc3BlY3RfbGlzdHNcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHttYXJnaW5Ub3A6MjAsbWFyZ2luQm90dG9tOjIwfX0sIFxuICAgICAgICAgICAgICAgICAgICAgIHByb3NwZWN0X2xpc3RzXG4gICAgICAgICAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY3JlYXRlQ2FtcGFpZ24sIFxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3NcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsIHdpZHRoOicxMDAlJ319LCBcbiAgICAgICAgICAgICAgICAgICAgICBcIkNyZWF0ZSBDYW1wYWlnblwiXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBjcmVhdGVDb21wYW55UHJvZmlsZU1vZGFsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbCBmYWRlIGJzLWNyZWF0ZVNpZ25hbC1tb2RhbC1tZFwiLCB0YWJJbmRleDogXCItMVwiLCByb2xlOiBcImRpYWxvZ1wiLCAnYXJpYS1sYWJlbGxlZGJ5JzogXCJteVNtYWxsTW9kYWxMYWJlbFwiLCAnYXJpYS1oaWRkZW4nOiBcInRydWVcIiwgXG4gICAgICAgICAgIGlkOiBcImNyZWF0ZUNvbXBhbnlQcm9maWxlTW9kYWxcIiwgXG4gICAgICAgICAgIHN0eWxlOiB7dG9wOic1MHB4JyxvdmVyZmxvdzonaGlkZGVuJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1kaWFsb2cgbW9kYWwtc21cIiwgc3R5bGU6IHt3aWR0aDo2NTB9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1jb250ZW50XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtaGVhZGVyXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNCh7Y2xhc3NOYW1lOiBcIm1vZGFsLXRpdGxlXCIsIGlkOiBcIm15TW9kYWxMYWJlbFwifSwgXG4gICAgICAgICAgICAgICAgICAgIFwiQ3JlYXRlIENvbXBhbnkgUHJvZmlsZVwiXG4gICAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXNtXCIsIFxuICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5jcmVhdGVDb21wYW55UHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICBzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luVG9wOi0yOCxtYXJnaW5SaWdodDotNX19LCBcbiAgICAgICAgICAgICAgICAgICAgXCJDcmVhdGUgUHJvZmlsZVwiXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICAgICAgQ3JlYXRlSGlyaW5nU2lnbmFsKG51bGwpXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1mb290ZXJcIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICAgIFwiQ2xvc2VcIlxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnlcIn0sIFxuICAgICAgICAgICAgICAgICAgXCJTZW5kIEVtYWlsXCJcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICApO1xuICB9LFxuXG4gIGNyZWF0ZUNvbXBhbnlQcm9maWxlOiBmdW5jdGlvbigpIHtcbiAgICBwcm9maWxlTmFtZSA9ICQoXCIuY29tcGFueS1wcm9maWxlLW5hbWVcIikudmFsKClcbiAgICBpbmR1c3RyeVByb2ZpbGUgPSB7XG4gICAgICAnY2xhc3NOYW1lJzogJ0luZHVzdHJ5UHJvZmlsZScsXG4gICAgICAnaW5kdXN0cmllcycgOiAkKCcuY29tcGFueS1wcm9maWxlLWluZHVzdHJpZXMnKS50YWdzaW5wdXQoJ2l0ZW1zJykucmV2ZXJzZSgpXG4gICAgfVxuXG4gICAgbG9jYXRpb25Qcm9maWxlID0ge1xuICAgICAgJ2NsYXNzTmFtZSc6ICdMb2NhdGlvblByb2ZpbGUnLFxuICAgICAgJ2xvY2FsZScgICAgOiAkKCcuY29tcGFueS1wcm9maWxlLWxvY2F0aW9uJykudGFnc2lucHV0KCdpdGVtcycpLnJldmVyc2UoKVxuICAgIH1cblxuICAgIGVtcGxveWVlUHJvZmlsZSA9IHtcbiAgICAgICdjbGFzc05hbWUnOidFbXBsb3llZVByb2ZpbGUnLCBcbiAgICAgICdlbXBsb3llZXMnOiBfLm1hcCgkKCcjY29tcGFueS1wcm9maWxlLWVtcGxveWVlQnRucycpLmZpbmQoJy5hY3RpdmUnKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXZCdG4peyByZXR1cm4gJChyZXZCdG4pLnRleHQoKS50cmltKCkgfSkucmV2ZXJzZSgpXG4gICAgfVxuXG4gICAgcmV2ZW51ZVByb2ZpbGUgPSB7XG4gICAgICAnY2xhc3NOYW1lJzonUmV2ZW51ZVByb2ZpbGUnLCBcbiAgICAgICdyZXZlbnVlcyc6IF8ubWFwKCQoJyNjb21wYW55LXByb2ZpbGUtY29tcGFueVJldmVudWVCdG5zJykuZmluZCgnLmFjdGl2ZScpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJldkJ0bil7IHJldHVybiAkKHJldkJ0bikudGV4dCgpLnRyaW0oKSB9KS5yZXZlcnNlKClcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhsb2NhdGlvblByb2ZpbGUpXG4gICAgXG4gICAgcHJvZmlsZXMgPSBbaW5kdXN0cnlQcm9maWxlLCBsb2NhdGlvblByb2ZpbGUsXG4gICAgICAgICAgICAgICAgZW1wbG95ZWVQcm9maWxlLCByZXZlbnVlUHJvZmlsZV1cblxuICAgIG5vbmVtcHR5UHJvZmlsZXMgPSBfLmZpbHRlcihwcm9maWxlcywgZnVuY3Rpb24ocHJvZmlsZSkge1xuICAgICAgaWYoXy52YWx1ZXMocHJvZmlsZSlbMV0peyByZXR1cm4gXy52YWx1ZXMocHJvZmlsZSlbMV0ubGVuZ3RoIH1cbiAgICB9KTtcblxuICAgIG5ld1Byb2ZpbGUgPSB7XG4gICAgICBuYW1lOiBwcm9maWxlTmFtZSxcbiAgICAgIHByb2ZpbGVzOiBub25lbXB0eVByb2ZpbGVzLFxuICAgICAgbWluaW5nX2pvYjp0cnVlLFxuICAgICAgdXNlcjp7XG4gICAgICAgIF9fdHlwZTonUG9pbnRlcicsXG4gICAgICAgIGNsYXNzTmFtZTonX1VzZXInLFxuICAgICAgICBvYmplY3RJZDpKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikub2JqZWN0SWRcbiAgICAgIH0sXG4gICAgICBjb21wYW55OiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikuY29tcGFueVxuICAgIH1cblxuICAgIGlmKG5vbmVtcHR5UHJvZmlsZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnBlcnNpc3RTaWduYWwobm9uZW1wdHlQcm9maWxlcywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgXy5vbWl0KG5ld1Byb2ZpbGUsJ3Byb2ZpbGVzJykpXG4gICAgICB0aGlzLnByb3BzLmFkZFByb2ZpbGUobmV3UHJvZmlsZSlcbiAgICAgICQoJy5tb2RhbCcpLmNsaWNrKClcbiAgICB9XG4gIH0sXG5cbiAgcGVyc2lzdFNpZ25hbDogZnVuY3Rpb24obm9uZW1wdHlQcm9maWxlcywgbmV3UHJvZmlsZSkge1xuICAgIGNvbnNvbGUubG9nKCdORVcgUFJPRklMRScpXG4gICAgY29uc29sZS5sb2cobmV3UHJvZmlsZSlcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0UHJvZmlsZScsXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgdHlwZTonUE9TVCcsXG4gICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KG5ld1Byb2ZpbGUpLFxuICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXNzKSB7XG4gICAgICAgIC8vIEFkZCBTaWduYWwgTGlzdFxuICAgICAgICBfLm1hcChub25lbXB0eVByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK18udmFsdWVzKHByb2ZpbGUpWzBdLFxuICAgICAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSggXy5waWNrKHByb2ZpbGUsIF8ua2V5cyhwcm9maWxlKVsxXSkgKSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0UHJvZmlsZS8nK3Jlc3Mub2JqZWN0SWQsXG4gICAgICAgICAgICAgICAgdHlwZTonUFVUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoe3Byb2ZpbGVzOntcbiAgICAgICAgICAgICAgICAgIF9fb3A6ICdBZGRVbmlxdWUnLFxuICAgICAgICAgICAgICAgICAgb2JqZWN0czpbe1xuICAgICAgICAgICAgICAgICAgICBfX3R5cGU6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IF8udmFsdWVzKHByb2ZpbGUpWzBdLFxuICAgICAgICAgICAgICAgICAgICBvYmplY3RJZDpyZXMub2JqZWN0SWRcbiAgICAgICAgICAgICAgICAgIH1dfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcblxuICAgICAgfSxcbiAgICB9KVxuICB9LFxuXG59KTtcblxudmFyIENyZWF0ZUhpcmluZ1NpZ25hbCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0NyZWF0ZUhpcmluZ1NpZ25hbCcsXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICBfLm1hcCgkKCcuaGlyaW5nLXJvbGUnKSxmdW5jdGlvbihpbnB1dCl7JChpbnB1dCkudGFnc2lucHV0KCl9KVxuICAgICQodGhpcy5nZXRET01Ob2RlKCkpLmZpbmQoJy5oaXJpbmctcm9sZScpLnRhZ3NpbnB1dCgpXG4gICAgJCgnLmJvb3RzdHJhcC10YWdzaW5wdXQnKS53aWR0aCg0MDApXG5cbiAgICAkKHRoaXMuZ2V0RE9NTm9kZSgpKS5maW5kKCcuYnRuLWRlZmF1bHQnKS5jbGljayhmdW5jdGlvbihlKSB7XG5cbiAgICAgIGlmKCQoZS50YXJnZXQpLnBhcmVudCgnbGFiZWwnKS5oYXNDbGFzcygnYWN0aXZlJykpXG4gICAgICAgICQoZS50YXJnZXQpLnBhcmVudCgnbGFiZWwnKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcbiAgICAgIGVsc2VcbiAgICAgICAgJChlLnRhcmdldCkucGFyZW50KCdsYWJlbCcpLmFkZENsYXNzKCdhY3RpdmUnKVxuXG4gICAgICBjb25zb2xlLmxvZygkKGUudGFyZ2V0KS5wYXJlbnQoJ2xhYmVsJykpXG4gICAgfSk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpe1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICBSZWFjdC5ET00uZm9ybSh7Y2xhc3NOYW1lOiBcImNyZWF0ZVNpZ25hbFwiLCBvblN1Ym1pdDogdGhpcy5jcmVhdGVTaWduYWx9LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJyxtYXJnaW5Cb3R0b206MjB9fSwgXG4gICAgICAgICAgICAgIFwiQ29tcGFueSBQcm9maWxlIE5hbWU6IMKgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonNzMuMSUnfSwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBjb21wYW55LXByb2ZpbGUtbmFtZVwiLCBcbiAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJDb21wYW55IFByb2ZpbGUgTmFtZSAuLi5cIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtkaXNwbGF5OidibG9jaycsbWFyZ2luQm90dG9tOi0xMH19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgICAgXCJJbmR1c3RyaWVzOiDCoFwiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonNzMuMSUnLG1hcmdpblJpZ2h0OjEwfSwgXG4gICAgICAgICAgICAgICAgICAgJ2RhdGEtcm9sZSc6IFwidGFnc2lucHV0XCIsIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgaGlyaW5nLXJvbGUgY29tcGFueS1wcm9maWxlLWluZHVzdHJpZXNcIn0pLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXhzIGJ0bi1zdWNjZXNzXCIsIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7ZGlzcGxheTonYmxvY2snLG1hcmdpbkJvdHRvbTotMTB9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7d2lkdGg6MTQwLGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICAgIFwiTG9jYXRpb246IMKgXCJcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOic3My4xJScsbWFyZ2luUmlnaHQ6MTB9LCBcbiAgICAgICAgICAgICAgICAgICAnZGF0YS1yb2xlJzogXCJ0YWdzaW5wdXRcIiwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBoaXJpbmctcm9sZSBjb21wYW55LXByb2ZpbGUtbG9jYXRpb25cIn0pLCBcblxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tc3VjY2Vzc1wiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsbWFyZ2luOjAsXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDoxNDAsbWFyZ2luQm90dG9tOjIwfX0sIFwiQ29tcGFueSBTaXplIFwiKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXBcIiwgJ2RhdGEtdG9nZ2xlJzogXCJidXR0b25zXCIsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7d2lkdGg6JzczLjUlJ30sIFxuICAgICAgICAgICAgICAgIGlkOiBcImNvbXBhbnktcHJvZmlsZS1lbXBsb3llZUJ0bnNcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgZW1wbG95ZWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgMSAtIDUwXCJcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGVtcGxveWVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDUwIC0gMjUwXCJcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGVtcGxveWVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDI1MCAtIDEwMDBcIlxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgZW1wbG95ZWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgMTAwMCArXCJcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXCIgXCIsIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtkaXNwbGF5Oidub25lJyxtYXJnaW46MCx3aWR0aDoxNDB9fSwgXG4gICAgICAgICAgICAgICAgXCJBcHByb3guIFJldmVudWUgIFwiKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXBcIiwgJ2RhdGEtdG9nZ2xlJzogXCJidXR0b25zXCIsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9LCBcbiAgICAgICAgICAgICAgICBpZDogXCJjb21wYW55LXByb2ZpbGUtY29tcGFueVJldmVudWVCdG5zXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IHJldmVudWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgXCIsICc8ICQxTSdcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IHJldmVudWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgJDFNIC0gJDVNXCJcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IHJldmVudWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgJDVNIC0gJDI1TVwiXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCByZXZlbnVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiICQyNU0gK1wiXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICksIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHttYXJnaW5Ub3A6MTB9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7d2lkdGg6MTQwLGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXCJBdXRvIFByb3NwZWN0OiDCoFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwIGF1dG9wcm9zcGVjdFwiLCAnZGF0YS10b2dnbGUnOiBcImJ1dHRvbnNcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGFjdGl2ZVwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInJhZGlvXCJ9KSwgXCIgWWVzXCJcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJyYWRpb1wifSksIFwiIE5vXCJcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfSxcbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIGNyZWF0ZUNvbXBhbnlQcm9maWxlTW9kYWxcbiAgY3JlYXRlUHJvZmlsZTogZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHByb2ZpbGVOYW1lID0gJCgnLmZ1bmRpbmctcHJvZmlsZS1uYW1lJykudmFsKClcbiAgICBcbiAgICAvL1N0YWdlXG4gICAgLy9BbW91bnQgUmFpc2VkXG4gICAgLy9Db21wYW55IFNpemVcbiAgICAvL0FwcHJveCBSZXZlbnVlXG5cbiAgICBhbW91bnRSYWlzZWRQcm9maWxlID0ge1xuICAgICAgJ2NsYXNzTmFtZSc6J0Z1bmRpbmdQcm9maWxlJywgXG4gICAgICAncmV2ZW51ZXMnOiBfLm1hcCgkKCcjYW1vdW50UmFpc2VkQnRucycpLmZpbmQoJy5hY3RpdmUnKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXZCdG4peyByZXR1cm4gJChyZXZCdG4pLnRleHQoKS50cmltKCkgfSkucmV2ZXJzZSgpXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYW1vdW50UmFpc2VkUHJvZmlsZSlcbiAgICBwcm9maWxlcyA9IFthbW91bnRSYWlzZWRQcm9maWxlXVxuXG4gICAgbm9uZW1wdHlQcm9maWxlcyA9IF8uZmlsdGVyKHByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICBpZihfLnZhbHVlcyhwcm9maWxlKVsxXSl7IHJldHVybiBfLnZhbHVlcyhwcm9maWxlKVsxXS5sZW5ndGggfVxuICAgIH0pO1xuXG4gICAgbmV3UHJvZmlsZSA9IHtcbiAgICAgIG5hbWU6IHByb2ZpbGVOYW1lLFxuICAgICAgcHJvZmlsZXM6IG5vbmVtcHR5UHJvZmlsZXMsXG4gICAgICB1c2VyOntcbiAgICAgICAgX190eXBlOidQb2ludGVyJyxcbiAgICAgICAgY2xhc3NOYW1lOidfVXNlcicsXG4gICAgICAgIG9iamVjdElkOkpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5vYmplY3RJZFxuICAgICAgfSxcbiAgICAgIGNvbXBhbnk6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55XG4gICAgfVxuXG4gICAgaWYobm9uZW1wdHlQcm9maWxlcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMucGVyc2lzdFNpZ25hbChub25lbXB0eVByb2ZpbGVzLnJldmVyc2UoKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgXy5vbWl0KG5ld1Byb2ZpbGUsJ3Byb2ZpbGVzJykpXG5cbiAgICAgIHRoaXMucHJvcHMuYWRkUHJvZmlsZShuZXdQcm9maWxlKVxuICAgICAgJCgnLm1vZGFsJykuY2xpY2soKVxuICAgIH1cbiAgfSxcblxuICBwZXJzaXN0U2lnbmFsOiBmdW5jdGlvbihub25lbXB0eVByb2ZpbGVzLCBuZXdQcm9maWxlKSB7XG4gICAgY29uc29sZS5sb2coJ05FVyBQUk9GSUxFJylcbiAgICBjb25zb2xlLmxvZyhuZXdQcm9maWxlKVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RQcm9maWxlJyxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkobmV3UHJvZmlsZSksXG4gICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlc3MpIHtcbiAgICAgICAgLy8gQWRkIFNpZ25hbCBMaXN0XG4gICAgICAgIF8ubWFwKG5vbmVtcHR5UHJvZmlsZXMsIGZ1bmN0aW9uKHByb2ZpbGUpIHtcbiAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzLycrXy52YWx1ZXMocHJvZmlsZSlbMF0sXG4gICAgICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgICAgdHlwZTonUE9TVCcsXG4gICAgICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KCBfLnBpY2socHJvZmlsZSwgXy5rZXlzKHByb2ZpbGUpWzFdKSApLFxuICAgICAgICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RQcm9maWxlLycrcmVzcy5vYmplY3RJZCxcbiAgICAgICAgICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSh7cHJvZmlsZXM6e1xuICAgICAgICAgICAgICAgICAgX19vcDogJ0FkZFVuaXF1ZScsXG4gICAgICAgICAgICAgICAgICBvYmplY3RzOlt7XG4gICAgICAgICAgICAgICAgICAgIF9fdHlwZTonUG9pbnRlcicsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXy52YWx1ZXMocHJvZmlsZSlbMF0sXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdElkOnJlcy5vYmplY3RJZFxuICAgICAgICAgICAgICAgICAgfV19XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuXG4gICAgICB9LFxuICAgIH0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsIGZhZGUgXCIsIHRhYkluZGV4OiBcIi0xXCIsIHJvbGU6IFwiZGlhbG9nXCIsIFxuICAgICAgICAgICAnYXJpYS1sYWJlbGxlZGJ5JzogXCJteVNtYWxsTW9kYWxMYWJlbFwiLCAnYXJpYS1oaWRkZW4nOiBcInRydWVcIiwgXG4gICAgICAgICAgIGlkOiBcImNyZWF0ZUZ1bmRpbmdTaWduYWxNb2RhbFwiLCBcbiAgICAgICAgICAgc3R5bGU6IHt0b3A6JzUwcHgnLG92ZXJmbG93OidoaWRkZW4nfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1zbVwiLCBzdHlsZToge3dpZHRoOjY1MH19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWNvbnRlbnRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1oZWFkZXJcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgXCJDcmVhdGUgRnVuZGluZyBTaWduYWxcIlxuICAgICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1zbVwiLCBcbiAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY3JlYXRlUHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICBzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luVG9wOi0yOCxtYXJnaW5SaWdodDotNX19LCBcbiAgICAgICAgICAgICAgICAgICAgXCJDcmVhdGUgUHJvZmlsZVwiXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWJvZHlcIn0sIFxuXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uZm9ybSh7Y2xhc3NOYW1lOiBcImNyZWF0ZVNpZ25hbFwiLCBvblN1Ym1pdDogdGhpcy5jcmVhdGVQcm9maWxlfSwgXG4gICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4obnVsbCwgXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7d2lkdGg6MTQwLGRpc3BsYXk6J2lubGluZS1ibG9jaycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5Cb3R0b206MjB9fSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiRnVuZGluZyBQcm9maWxlIE5hbWU6IMKgXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonNzMuMSUnfSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBmdW5kaW5nLXByb2ZpbGUtbmFtZVwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJGdW5kaW5nIFByb2ZpbGUgTmFtZSAuLi5cIn0pXG4gICAgICAgICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgICAgICAgQ29tcGFueVByb2ZpbGUobnVsbCksIFxuXG4gICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHttYXJnaW5Ub3A6MTAsZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7d2lkdGg6MTQwLGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiQXV0byBQcm9zcGVjdDogwqBcIiksIFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cCBhdXRvcHJvc3BlY3RcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YS10b2dnbGUnOiBcImJ1dHRvbnNcIn0sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGFjdGl2ZVwifSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInJhZGlvXCJ9KSwgXCIgWWVzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJyYWRpb1wifSksIFwiIE5vXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgY3JlYXRlRnVuZGluZ1Byb2ZpbGU6IGZ1bmN0aW9uKCkge1xuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICBfLm1hcCgkKCcuaGlyaW5nLXJvbGUnKSxmdW5jdGlvbihpbnB1dCl7JChpbnB1dCkudGFnc2lucHV0KCl9KVxuICAgICQodGhpcy5nZXRET01Ob2RlKCkpLmZpbmQoJy5oaXJpbmctcm9sZScpLnRhZ3NpbnB1dCgpXG4gICAgJCgnLmJvb3RzdHJhcC10YWdzaW5wdXQnKS53aWR0aCgnNTkuMSUnKVxuICB9LFxuXG59KTtcblxudmFyIENvbXBhbnlQcm9maWxlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ29tcGFueVByb2ZpbGUnLFxuICBjb21wYW55Rm9ybVN1Ym1pdDogZnVuY3Rpb24oZSkgeyBlLnByZXZlbnREZWZhdWx0KCkgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgJCh0aGlzLmdldERPTU5vZGUoKSkuZmluZCgnLmJ0bi1kZWZhdWx0JykuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgbGFiZWwgPSAkKGUudGFyZ2V0KS5wYXJlbnQoJ2xhYmVsJylcbiAgICAgIGlmKGxhYmVsLmhhc0NsYXNzKCdhY3RpdmUnKSlcbiAgICAgICAgbGFiZWwucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG4gICAgICBlbHNlXG4gICAgICAgIGxhYmVsLmFkZENsYXNzKCdhY3RpdmUnKVxuICAgIH0pO1xuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J25vbmUnLG1hcmdpbjowLFxuICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOjE0MCxtYXJnaW5Cb3R0b206MjB9fSwgXCJTdGFnZSBcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXBcIiwgJ2RhdGEtdG9nZ2xlJzogXCJidXR0b25zXCIsIGlkOiBcImVtcGxveWVlQnRuc1wiLCBcbiAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFwiLCBzdHlsZToge3dpZHRoOicyMCUnfX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIFNlZWRcIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBcIiwgc3R5bGU6IHt3aWR0aDonMjAlJ319LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiBTZXJpZXMgQVwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCIsIHN0eWxlOiB7d2lkdGg6JzIwJSd9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgU2VyaWVzIEJcIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFwiLCBzdHlsZToge3dpZHRoOicyMCUnfX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIFNlcmllcyBDXCJcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIiwgc3R5bGU6IHt3aWR0aDonMjAlJ319LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiBTZXJpZXMgRCtcIlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyxtYXJnaW46MCx3aWR0aDoxNDAsbWFyZ2luQm90dG9tOjIwfX0sIFxuICAgICAgICAgICAgICBcIkFtb3VudCBSYWlzZWQgIFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwIHByb2ZpbGUtYnRuc1wiLCAnZGF0YS10b2dnbGUnOiBcImJ1dHRvbnNcIiwgXG4gICAgICAgICAgICAgIGlkOiBcImFtb3VudFJhaXNlZEJ0bnNcIiwgc3R5bGU6IHt3aWR0aDonNzQlJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBhbW91bnRSYWlzZWRCdG5cIiwgc3R5bGU6IHt3aWR0aDonMjUlJ319LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiBcIiwgJzwgJDFNJ1xuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBhbW91bnRSYWlzZWRCdG5cIiwgc3R5bGU6IHt3aWR0aDonMjUlJ319LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkMU0gLSAkNU1cIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBhbW91bnRSYWlzZWRCdG5cIiwgc3R5bGU6IHt3aWR0aDonMjUlJ319LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkNU0gLSAkMjVNXCJcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgYW1vdW50UmFpc2VkQnRuXCIsIHN0eWxlOiB7d2lkdGg6JzI1JSd9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgJDI1TSArXCJcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuXG5cbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonbm9uZScsbWFyZ2luOjAsXG4gICAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTQwLG1hcmdpbkJvdHRvbToyMH19LCBcIkNvbXBhbnkgU2l6ZSBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cFwiLCAnZGF0YS10b2dnbGUnOiBcImJ1dHRvbnNcIiwgaWQ6IFwiZW1wbG95ZWVCdG5zXCIsIFxuICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGVtcGxveWVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAxIC0gNTBcIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBlbXBsb3llZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgNTAgLSAyNTBcIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBlbXBsb3llZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgMjUwIC0gMTAwMFwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGVtcGxveWVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAxMDAwICtcIlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLCBcblxuICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcIiBcIiwgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J25vbmUnLG1hcmdpbjowLHdpZHRoOjE0MH19LCBcbiAgICAgICAgICAgICAgXCJBcHByb3guIFJldmVudWUgIFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwXCIsICdkYXRhLXRvZ2dsZSc6IFwiYnV0dG9uc1wiLCBpZDogXCJyZXZlbnVlQnRuc1wiLCBcbiAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCByZXZlbnVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiBcIiwgJzwgJDFNJ1xuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCByZXZlbnVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkMU0gLSAkNU1cIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCByZXZlbnVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkNU0gLSAkMjVNXCJcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgcmV2ZW51ZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgJDI1TSArXCJcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gQ3JlYXRlSGlyaW5nU2lnbmFsTW9kYWxcbiAgY3JlYXRlU2lnbmFsOiBmdW5jdGlvbigpIHtcbiAgICBwcm9maWxlTmFtZSA9ICQoJy5oaXJpbmctcHJvZmlsZS1uYW1lJykudmFsKClcbiAgICBhdXRvUHJvc3BlY3QgPSAkKCcuYXV0b3Byb3NwZWN0ID4gLmFjdGl2ZScpLnRleHQoKSA9PSAgXCIgWWVzXCJcblxuICAgIGhpcmluZ1Byb2ZpbGUgPSB7XG4gICAgICAnY2xhc3NOYW1lJzogJ0hpcmluZ1Byb2ZpbGUnLFxuICAgICAgJ3JvbGVzJyAgICA6ICQoJy5oaXJpbmctcm9sZXMnKS50YWdzaW5wdXQoJ2l0ZW1zJylcbiAgICB9XG5cbiAgICByZXZlbnVlUHJvZmlsZSA9IHtcbiAgICAgICdjbGFzc05hbWUnOidSZXZlbnVlUHJvZmlsZScsIFxuICAgICAgJ3JldmVudWVzJzogXy5tYXAoJCgnI2hpcmluZy1yZXZlbnVlQnRucycpLmZpbmQoJy5hY3RpdmUnKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXZCdG4peyByZXR1cm4gJChyZXZCdG4pLnRleHQoKS50cmltKCkgfSlcbiAgICB9XG5cbiAgICBlbXBsb3llZVByb2ZpbGUgPSB7XG4gICAgICAnY2xhc3NOYW1lJzonRW1wbG95ZWVQcm9maWxlJywgXG4gICAgICAnZW1wbG95ZWVzJzogXy5tYXAoJCgnI2hpcmluZy1lbXBsb3llZUJ0bnMnKS5maW5kKCcuYWN0aXZlJyksIFxuICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVtcEJ0bil7IHJldHVybiAkKGVtcEJ0bikudGV4dCgpLnRyaW0oKSB9KVxuICAgIH1cblxuICAgIHByb3NwZWN0UHJvZmlsZSA9IHtcbiAgICAgICdjbGFzc05hbWUnOidQcm9zcGVjdFRpdGxlUHJvZmlsZScsXG4gICAgICAndGl0bGVfa2V5d29yZHMnIDogJCgnLnByb3NwZWN0Um9sZUtleXdvcmRzJykudGFnc2lucHV0KCdpdGVtcycpXG4gICAgfVxuXG4gICAgcHJvZmlsZXMgPSBbaGlyaW5nUHJvZmlsZSwgcmV2ZW51ZVByb2ZpbGUsIFxuICAgICAgICAgICAgICAgIGVtcGxveWVlUHJvZmlsZSwgcHJvc3BlY3RQcm9maWxlXVxuXG4gICAgbm9uZW1wdHlQcm9maWxlcyA9IF8uZmlsdGVyKHByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICBpZihfLnZhbHVlcyhwcm9maWxlKVsxXSl7IHJldHVybiBfLnZhbHVlcyhwcm9maWxlKVsxXS5sZW5ndGggfVxuICAgIH0pO1xuXG5cbiAgICBuZXdQcm9maWxlID0ge1xuICAgICAgbmFtZTogcHJvZmlsZU5hbWUsXG4gICAgICBhdXRvUHJvc3BlY3Q6IGF1dG9Qcm9zcGVjdCxcbiAgICAgIHByb2ZpbGVzOiBub25lbXB0eVByb2ZpbGVzLFxuICAgICAgdXNlcjp7XG4gICAgICAgIF9fdHlwZTonUG9pbnRlcicsXG4gICAgICAgIGNsYXNzTmFtZTonX1VzZXInLFxuICAgICAgICBvYmplY3RJZDpKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikub2JqZWN0SWRcbiAgICAgIH0sXG4gICAgICBjb21wYW55OiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikuY29tcGFueVxuICAgIH1cblxuICAgIGlmKG5vbmVtcHR5UHJvZmlsZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnBlcnNpc3RTaWduYWwobm9uZW1wdHlQcm9maWxlcywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgXy5vbWl0KG5ld1Byb2ZpbGUsJ3Byb2ZpbGVzJykpXG4gICAgICB0aGlzLnByb3BzLmFkZFByb2ZpbGUobmV3UHJvZmlsZSlcbiAgICAgICQoJy5tb2RhbCcpLmNsaWNrKClcbiAgICB9XG4gIH0sXG5cbiAgcGVyc2lzdFNpZ25hbDogZnVuY3Rpb24obm9uZW1wdHlQcm9maWxlcywgbmV3UHJvZmlsZSkge1xuICAgIGNvbnNvbGUubG9nKCdORVcgUFJPRklMRScpXG4gICAgY29uc29sZS5sb2cobmV3UHJvZmlsZSlcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0UHJvZmlsZScsXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgdHlwZTonUE9TVCcsXG4gICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KG5ld1Byb2ZpbGUpLFxuICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXNzKSB7XG4gICAgICAgIC8vIEFkZCBTaWduYWwgTGlzdFxuICAgICAgICBfLm1hcChub25lbXB0eVByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK18udmFsdWVzKHByb2ZpbGUpWzBdLFxuICAgICAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSggXy5waWNrKHByb2ZpbGUsIF8ua2V5cyhwcm9maWxlKVsxXSkgKSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0UHJvZmlsZS8nK3Jlc3Mub2JqZWN0SWQsXG4gICAgICAgICAgICAgICAgdHlwZTonUFVUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoe3Byb2ZpbGVzOntcbiAgICAgICAgICAgICAgICAgIF9fb3A6ICdBZGRVbmlxdWUnLFxuICAgICAgICAgICAgICAgICAgb2JqZWN0czpbe1xuICAgICAgICAgICAgICAgICAgICBfX3R5cGU6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IF8udmFsdWVzKHByb2ZpbGUpWzBdLFxuICAgICAgICAgICAgICAgICAgICBvYmplY3RJZDpyZXMub2JqZWN0SWRcbiAgICAgICAgICAgICAgICAgIH1dfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTdGFydCBNaW5pbmcgSm9iXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgLy91cmw6J2h0dHBzOi8vbmFtZWxlc3MtcmV0cmVhdC0zNTI1Lmhlcm9rdWFwcC5jb20vbWluaW5nX2pvYi90aXRsZScsXG4gICAgICAgICAgLy8vdXJsOidodHRwczovL25hbWVsZXNzLXJldHJlYXQtMzUyNS5oZXJva3VhcHAuY29tL3RpdGxlX21pbmluZ19qb2InLFxuICAgICAgICAgIHVybDonaHR0cDovLzEyNy4wLjAuMTo1MDAwL3NpZ25hbC9oaXJpbmcnLFxuICAgICAgICAgIHR5cGU6J0dFVCcsXG4gICAgICAgICAgZGF0YToge3Byb3NwZWN0X3Byb2ZpbGU6IHJlc3Mub2JqZWN0SWR9LFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyBjb25zb2xlLmxvZyhyZXMpIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIpIH1cbiAgICAgICAgfSlcbiAgICAgIFxuXG4gICAgICB9LFxuICAgIH0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsIGZhZGUgYnMtY3JlYXRlU2lnbmFsLW1vZGFsLW1kXCIsIHRhYkluZGV4OiBcIi0xXCIsIHJvbGU6IFwiZGlhbG9nXCIsICdhcmlhLWxhYmVsbGVkYnknOiBcIm15U21hbGxNb2RhbExhYmVsXCIsICdhcmlhLWhpZGRlbic6IFwidHJ1ZVwiLCBpZDogXCJjcmVhdGVIaXJpbmdTaWduYWxNb2RhbFwiLCBcbiAgICAgICAgICAgc3R5bGU6IHt0b3A6JzUwcHgnLG92ZXJmbG93OidoaWRkZW4nfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1zbVwiLCBzdHlsZToge3dpZHRoOjY1MH19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWNvbnRlbnRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1oZWFkZXJcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgXCJDcmVhdGUgSGlyaW5nIFNpZ25hbFwiXG4gICAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXNtXCIsIFxuICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5jcmVhdGVTaWduYWwsIFxuICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDotMjgsbWFyZ2luUmlnaHQ6LTV9fSwgXG4gICAgICAgICAgICAgICAgICAgIFwiQ3JlYXRlIFNpZ25hbFwiXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICAgICAgQ3JlYXRlSGlyaW5nU2lnbmFsKG51bGwpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgQ3JlYXRlSGlyaW5nU2lnbmFsID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ3JlYXRlSGlyaW5nU2lnbmFsJyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYWRkQ29tcGFueTogZmFsc2UsXG4gICAgICBhZGRQcm9zcGVjdDogZmFsc2UsXG4gICAgICBoaWRlQ29tcGFueURldGFpbHM6IGZhbHNlLFxuICAgICAgaGlkZVByb3NwZWN0RGV0YWlsczogZmFsc2UsXG4gICAgfVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcblxuICB9LFxuICBcbiAgdG9nZ2xlQ29tcGFueSA6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2FkZENvbXBhbnk6ICF0aGlzLnN0YXRlLmFkZENvbXBhbnl9KVxuICB9LFxuXG4gIHRvZ2dsZVByb3NwZWN0IDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7YWRkUHJvc3BlY3Q6ICF0aGlzLnN0YXRlLmFkZFByb3NwZWN0fSlcbiAgfSxcblxuICB0b2dnbGVDb21wYW55RGV0YWlsczogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7aGlkZUNvbXBhbnlEZXRhaWxzOiAhdGhpcy5zdGF0ZS5oaWRlQ29tcGFueURldGFpbHN9KVxuICB9LFxuXG4gIHRvZ2dsZVByb3NwZWN0RGV0YWlsczogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7aGlkZVByb3NwZWN0RGV0YWlsczogIXRoaXMuc3RhdGUuaGlkZVByb3NwZWN0RGV0YWlsc30pXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICQodGhpcy5nZXRET01Ob2RlKCkpLmZpbmQoJy5oaXJpbmctcm9sZScpLnRhZ3NpbnB1dCgpXG4gICAgJCgnLmJvb3RzdHJhcC10YWdzaW5wdXQnKS53aWR0aCg0MDApXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpe1xuICAgIGFkZENvbXBhbnkgPSAoIXRoaXMuc3RhdGUuYWRkQ29tcGFueSkgPyBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZUNvbXBhbnksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSksIFwiwqBcIiArICcgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkFkZCBDb21wYW55IERldGFpbHNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBDb21wYW55UHJvZmlsZSh7aGlkZUNvbXBhbnlEZXRhaWxzOiB0aGlzLnN0YXRlLmhpZGVDb21wYW55RGV0YWlsc30pXG5cbiAgICBhZGRQcm9zcGVjdCA9ICghdGhpcy5zdGF0ZS5hZGRQcm9zcGVjdCkgPyBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZVByb3NwZWN0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pLCBcIsKgXCIgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJBZGQgUHJvc3BlY3QgRGV0YWlsc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IFByb3NwZWN0UHJvZmlsZSh7aGlkZVByb3NwZWN0RGV0YWlsczogdGhpcy5zdGF0ZS5oaWRlUHJvc3BlY3REZXRhaWxzfSlcbiAgICBhZGRDb21wYW55U3R5bGUgPSAoIXRoaXMuc3RhdGUuYWRkQ29tcGFueSkgPyB7ZGlzcGxheTonYmxvY2snLHRleHRBbGlnbjonY2VudGVyJ30gOiB7fVxuICAgIGFkZFByb3NwZWN0U3R5bGUgPSAoIXRoaXMuc3RhdGUuYWRkUHJvc3BlY3QpID8ge2Rpc3BsYXk6J2Jsb2NrJyx0ZXh0QWxpZ246J2NlbnRlcid9IDoge31cblxuICAgIGNsb3NlQ29tcGFueUJ0bnMgPSAoIXRoaXMuc3RhdGUuYWRkQ29tcGFueSkgPyBcIlwiIDogUmVhY3QuRE9NLnNwYW4obnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLWRlZmF1bHRcIiwgXG4gICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZUNvbXBhbnksIFxuICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDotNX19LCBcbiAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdGltZXNcIn0pKSwgXG4gICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwiLCBcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMudG9nZ2xlQ29tcGFueURldGFpbHMsIFxuICAgICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDotNSxtYXJnaW5SaWdodDo1fX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiAodGhpcy5zdGF0ZS5oaWRlQ29tcGFueURldGFpbHMpID8gXCJmYSBmYS1wbHVzXCIgOlwiZmEgZmEtbWludXNcIn0pXG4gICAgICAgICAgKSlcblxuICAgIGNsb3NlUHJvc3BlY3RCdG5zID0gKCF0aGlzLnN0YXRlLmFkZFByb3NwZWN0KSA/IFwiXCIgOiBSZWFjdC5ET00uc3BhbihudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwiLCBcbiAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMudG9nZ2xlUHJvc3BlY3QsIFxuICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDotNX19LCBcbiAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdGltZXNcIn0pKSwgXG4gICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwiLCBcbiAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMudG9nZ2xlUHJvc3BlY3REZXRhaWxzLCBcbiAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6LTUsbWFyZ2luUmlnaHQ6NX19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogKHRoaXMuc3RhdGUuaGlkZVByb3NwZWN0RGV0YWlscykgPyBcImZhIGZhLXBsdXNcIiA6XCJmYSBmYS1taW51c1wifSlcbiAgICAgICAgICApKVxuXG4gICAgY29tcGFueUhlYWRpbmcgPSAoIXRoaXMuc3RhdGUuYWRkQ29tcGFueSkgPyBcIlwiIDogUmVhY3QuRE9NLmg1KG51bGwsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYnVpbGRpbmdcIn0pLCBcIsKgIENvbXBhbnkgRGV0YWlsc1wiKVxuICAgIHByb3NwZWN0SGVhZGluZyA9ICghdGhpcy5zdGF0ZS5hZGRQcm9zcGVjdCkgPyBcIlwiIDogUmVhY3QuRE9NLmg1KG51bGwsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdXNlclwifSksIFwiwqAgUHJvc3BlY3QgRGV0YWlsc1wiKVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICBSZWFjdC5ET00uZm9ybSh7Y2xhc3NOYW1lOiBcImNyZWF0ZVNpZ25hbFwiLCBvblN1Ym1pdDogdGhpcy5jcmVhdGVTaWduYWx9LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJyxtYXJnaW5Cb3R0b206MjB9fSwgXG4gICAgICAgICAgICAgIFwiSGlyaW5nIFByb2ZpbGUgTmFtZTogwqBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOic0MTNweCd9LCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGhpcmluZy1wcm9maWxlLW5hbWVcIiwgXG4gICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiSGlyaW5nIFByb2ZpbGUgTmFtZSAuLi5cIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgICAgXCJIaXJpbmcgUm9sZSBOYW1lOiDCoFwiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonNTAlJyxtYXJnaW5SaWdodDoxMH0sIFxuICAgICAgICAgICAgICAgICAgICdkYXRhLXJvbGUnOiBcInRhZ3NpbnB1dFwiLCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGhpcmluZy1yb2xlIGhpcmluZy1yb2xlc1wifSksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLXN1Y2Nlc3NcIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHttYXJnaW5Ub3A6MTB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge3dpZHRoOjE0MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFwiQXV0byBQcm9zcGVjdDogwqBcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXAgYXV0b3Byb3NwZWN0XCIsICdkYXRhLXRvZ2dsZSc6IFwiYnV0dG9uc1wifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGFjdGl2ZVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJyYWRpb1wifSksIFwiIFllc1wiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwicmFkaW9cIn0pLCBcIiBOb1wiXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaHIobnVsbCksIFwiIFwiLCBjbG9zZUNvbXBhbnlCdG5zLCBcIiBcIiwgY29tcGFueUhlYWRpbmcsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IGFkZENvbXBhbnlTdHlsZX0sIFwiIFwiLCBhZGRDb21wYW55LCBcIiBcIiksIFxuXG4gICAgICAgICAgICBSZWFjdC5ET00uaHIobnVsbCksIFwiIFwiLCBjbG9zZVByb3NwZWN0QnRucywgXCIgXCIsIHByb3NwZWN0SGVhZGluZywgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZTogYWRkUHJvc3BlY3RTdHlsZX0sIFwiIFwiLCBhZGRQcm9zcGVjdCwgXCIgXCIpXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9LFxuICBjcmVhdGVTaWduYWw6IGZ1bmN0aW9uKGUpIHsgZS5wcmV2ZW50RGVmYXVsdCgpIH1cbn0pO1xuXG52YXIgQ29tcGFueVByb2ZpbGUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdDb21wYW55UHJvZmlsZScsXG4gIGNvbXBhbnlGb3JtU3VibWl0OiBmdW5jdGlvbihlKSB7IGUucHJldmVudERlZmF1bHQoKSB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMuZ2V0RE9NTm9kZSgpKS5maW5kKCcuYnRuLWRlZmF1bHQnKS5jbGljayhmdW5jdGlvbihlKSB7XG5cbiAgICAgIGlmKCQoZS50YXJnZXQpLnBhcmVudCgnbGFiZWwnKS5oYXNDbGFzcygnYWN0aXZlJykpXG4gICAgICAgICQoZS50YXJnZXQpLnBhcmVudCgnbGFiZWwnKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcbiAgICAgIGVsc2VcbiAgICAgICAgJChlLnRhcmdldCkucGFyZW50KCdsYWJlbCcpLmFkZENsYXNzKCdhY3RpdmUnKVxuXG4gICAgICBjb25zb2xlLmxvZygkKGUudGFyZ2V0KS5wYXJlbnQoJ2xhYmVsJykpXG4gICAgfSk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBzaG93RGV0YWlscyA9ICh0aGlzLnByb3BzLmhpZGVDb21wYW55RGV0YWlscykgPyB7ZGlzcGxheTogJ25vbmUnfSA6IHtkaXNwbGF5OidibG9jayd9XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiBzaG93RGV0YWlsc30sIFxuICAgICAgICBSZWFjdC5ET00uZm9ybSh7Y2xhc3NOYW1lOiBcImNyZWF0ZVNpZ25hbFwiLCBvblN1Ym1pdDogdGhpcy5jb21wYW55Rm9ybVN1Ym1pdH0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsbWFyZ2luOjAsXG4gICAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTQwLG1hcmdpbkJvdHRvbToyMH19LCBcIkNvbXBhbnkgU2l6ZSBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cFwiLCAnZGF0YS10b2dnbGUnOiBcImJ1dHRvbnNcIiwgaWQ6IFwiaGlyaW5nLWVtcGxveWVlQnRuc1wifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDEgLSA1MFwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiA1MCAtIDI1MFwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAyNTAgLSAxMDAwXCJcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDEwMDAgK1wiXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFwiIFwiLCBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyxtYXJnaW46MCx3aWR0aDoxNDB9fSwgXG4gICAgICAgICAgICAgIFwiUmV2ZW51ZSBBbW91bnQgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXBcIiwgJ2RhdGEtdG9nZ2xlJzogXCJidXR0b25zXCIsIGlkOiBcImhpcmluZy1yZXZlbnVlQnRuc1wifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIFwiLCAnPCAkMU0nXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkMU0gLSAkNU1cIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgJDVNIC0gJDI1TVwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkMjVNICtcIlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH1cbn0pO1xuXG52YXIgUHJvc3BlY3RQcm9maWxlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnUHJvc3BlY3RQcm9maWxlJyxcbiAgcHJvc3BlY3RGb3JtU3VibWl0OiBmdW5jdGlvbihlKSB7IGUucHJldmVudERlZmF1bHQoKSB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAkKCcucHJvc3BlY3RSb2xlS2V5d29yZHMnKS50YWdzaW5wdXQoe1xuICAgICAgbWF4VGFnczogNSxcbiAgICB9KVxuXG4gICAgJCgnLmJvb3RzdHJhcC10YWdzaW5wdXQnKS53aWR0aCg0MDApXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBzaG93RGV0YWlscyA9ICh0aGlzLnByb3BzLmhpZGVQcm9zcGVjdERldGFpbHMpID8ge2Rpc3BsYXk6ICdub25lJ30gOiB7ZGlzcGxheTonYmxvY2snfVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZTogc2hvd0RldGFpbHN9LCBcbiAgICAgICAgUmVhY3QuRE9NLmZvcm0oe2NsYXNzTmFtZTogXCJjcmVhdGVTaWduYWxcIiwgb25TdWJtaXQ6IHRoaXMucHJvc3BlY3RGb3JtU3VibWl0fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4obnVsbCwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIFwiSm9iIFRpdGxlIEtleXdvcmQ6IMKgXCIpXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgICdkYXRhLXJvbGUnOiBcInRhZ3NpbnB1dFwiLCBcbiAgICAgICAgICAgICAgICAgICBzdHlsZToge3dpZHRoOic0MDBweCAhaW1wb3J0YW50J30sIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgcHJvc3BlY3RSb2xlS2V5d29yZHNcIiwgXG4gICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiXCJ9KVxuICAgICAgICAgIClcblxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KVxuXG4vKlxuICBGdW5kaW5nIFByb2ZpbGVcbiAgLSBBbW91bnQgUmFpc2VkXG4gIC0gU3RhZ2VcblxuICBQZW9wbGUgUHJvZmlsZVxuICAtIExvY2FsZVxuICAtIFRpdGxlXG5cbiAgQ29tcGFueSBQcm9maWxlXG4gIC0gSW5kdXN0cmllc1xuICAtIFJldmVudWVcbiAgLSBMb2NhbGVcbiAgLSAjIG9mIEVtcGxveWVlc1xuKi9cblxudmFyIEdlbmVyYWxGb3JtID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnR2VuZXJhbEZvcm0nLFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgUmVhY3QuRE9NLmZvcm0oe2NsYXNzTmFtZTogXCJjcmVhdGVTaWduYWxcIiwgb25TdWJtaXQ6IHRoaXMuY3JlYXRlU2lnbmFsfSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4obnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc3VpdGNhc2VcIn0pLCBcIiDCoFwiLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonOTAlJ30sIFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbFwiLCBwbGFjZWhvbGRlcjogXCJGaW5kIENvbXBhbmllcyBIaXJpbmcgRm9yIC4uLlwifSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFwiIFwiLCBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXVzZXJzXCJ9KSwgXCIgwqBcIiwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwidGV4dFwiLCBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6JzkwJSd9LCBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIiwgcGxhY2Vob2xkZXI6IFwiTnVtYmVyIG9mIEVtcGxveWVlcyAuLi5cIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcIiBcIiwgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcIiBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1pbnN0aXR1dGlvblwifSksIFwiIMKgXCIsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgc3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOic5MCUnfSwgXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sXCIsIHBsYWNlaG9sZGVyOiBcIkFtb3VudCBvZiBGdW5kaW5nIC4uLlwifSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFwiIFwiLCBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLW1vbmV5XCJ9KSwgXCIgwqBcIiwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwidGV4dFwiLCBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6JzkwJSd9LCBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIiwgcGxhY2Vob2xkZXI6IFwiUmV2ZW51ZSBBbW91bnQgLi4uXCJ9KVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXCIgXCIsIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4obnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtd3JlbmNoXCJ9KSwgXCIgwqBcIiwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwidGV4dFwiLCBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6JzkwJSd9LCBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIiwgcGxhY2Vob2xkZXI6IFwiVXNpbmcgVGVjaG5vbG9naWVzIFN1Y2ggQXMuLi5cIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcIiBcIiwgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY3JlYXRlU2lnbmFsLCBcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLWRlZmF1bHQgYnRuLXN1Y2Nlc3NcIiwgXG4gICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJywgd2lkdGg6JzEwMCUnfX0sIFxuICAgICAgICAgICAgXCJDcmVhdGUgU2lnbmFsXCJcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICApXG4gIH1cbn0pXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gY3JlYXRlTGlzdE1vZGFsXG4gIGNyZWF0ZUxpc3Q6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCQoJyNsaXN0VGl0bGUnKS52YWwoKSlcblxuICAgIGN1cnJlbnRVc2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpXG4gICAgZGF0YSA9ICB7XG4gICAgICBuYW1lIDogJCgnI2xpc3RUaXRsZScpLnZhbCgpLnRyaW0oKSxcbiAgICAgIHVzZXIgOiBhcHBDb25maWcucG9pbnRlcignX1VzZXInLCBjdXJyZW50VXNlci5vYmplY3RJZCksXG4gICAgICBjb21wYW55OiBjdXJyZW50VXNlci5jb21wYW55XG4gICAgfVxuXG4gICAgdGhpc3MgPSB0aGlzO1xuICAgIGxpc3RDbGFzc05hbWUgPSAodGhpcy5wcm9wcy5saXN0Q2xhc3NOYW1lKSA/IHRoaXMucHJvcHMubGlzdENsYXNzTmFtZSA6ICdQcm9zcGVjdExpc3QnXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK2xpc3RDbGFzc05hbWUsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5wYXJzZUhlYWRlcnMsXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyBjb25zb2xlLmxvZyhyZXMpIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUubG9nKGVycikgfVxuICAgIH0pO1xuXG4gICAgZGF0YS5jb3VudCA9IDBcblxuICAgIHRoaXMucHJvcHMuY3JlYXRlTGlzdChkYXRhKVxuICAgIFxuICAgICQoJyNjcmVhdGVMaXN0TW9kYWwnKS5tb2RhbCgnaGlkZScpXG4gICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdtb2RhbC1vcGVuJyk7XG4gICAgJCgnLm1vZGFsLWJhY2tkcm9wJykucmVtb3ZlKCk7XG4gIH0sXG5cbiAgY3JlYXRlTGlzdEJ1dHRvbkNsaWNrOiBmdW5jdGlvbigpIHtcbiAgICBpZigkKCcjbGlzdFRpdGxlJykudmFsKCkudHJpbSgpICE9IFwiXCIpXG4gICAgICB0aGlzLmNyZWF0ZUxpc3QoKVxuICB9LFxuXG4gIGNyZWF0ZU1pbmluZ0pvYjogZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnNvbGUubG9nKCdsbWFvJylcbiAgICBpZigkKCcjbGlzdFRpdGxlJykudmFsKCkudHJpbSgpICE9IFwiXCIpXG4gICAgICB0aGlzLmNyZWF0ZUxpc3QoKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwgZmFkZSBicy1leGFtcGxlLW1vZGFsLXNtXCIsIHRhYkluZGV4OiBcIi0xXCIsIHJvbGU6IFwiZGlhbG9nXCIsICdhcmlhLWxhYmVsbGVkYnknOiBcIm15U21hbGxNb2RhbExhYmVsXCIsICdhcmlhLWhpZGRlbic6IFwidHJ1ZVwiLCBpZDogXCJjcmVhdGVMaXN0TW9kYWxcIiwgc3R5bGU6IHt0b3A6JzIwMHB4J319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1kaWFsb2cgbW9kYWwtc21cIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtY29udGVudFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWhlYWRlclwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBjbGFzc05hbWU6IFwiY2xvc2VcIiwgJ2RhdGEtZGlzbWlzcyc6IFwibW9kYWxcIn0sIFJlYWN0LkRPTS5zcGFuKHsnYXJpYS1oaWRkZW4nOiBcInRydWVcIn0sIFwiw5dcIiksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcInNyLW9ubHlcIn0sIFwiQ2xvc2VcIikpLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNCh7Y2xhc3NOYW1lOiBcIm1vZGFsLXRpdGxlXCIsIGlkOiBcIm15TW9kYWxMYWJlbFwifSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbGlzdFwifSksIFwiIMKgQ3JlYXRlIExpc3RcIilcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtYm9keVwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uZm9ybSh7b25TdWJtaXQ6IHRoaXMuY3JlYXRlTWluaW5nSm9ifSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7aWQ6IFwibGlzdFRpdGxlXCIsIHR5cGU6IFwidGV4dFwiLCBwbGFjZWhvbGRlcjogXCJFbnRlciBsaXN0IHRpdGxlLi4uXCIsIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIn0pLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgb25DbGljazogdGhpcy5jcmVhdGVMaXN0QnV0dG9uQ2xpY2ssIHBsYWNlaG9sZGVyOiBcIkVudGVyIENpdHkgQXJlYS4uLlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzXCIsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snLCB3aWR0aDonMTAwJSd9fSwgXCJDcmVhdGUgTGlzdFwiKVxuICAgICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gY3JlYXRlU2lnbmFsTW9kYWxcbiAgY3JlYXRlTWluaW5nSm9iOiBmdW5jdGlvbihkYXRlKSB7XG4gICAgdGhpcy5wcm9wcy5jcmVhdGVNaW5pbmdKb2IodGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZSwgZGF0ZSlcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIC8vIG1vbWVudC51dGMobW9tZW50KCkuc3RhcnRPZignZGF5JykpLnZhbHVlT2YoKS8xMDAwXG4gICAgLy8gcmVjaWV2ZSBjb21wbGV0ZWQgZGF5cyBhcyBwcm9wc1xuICAgIC8vY29uc29sZS5sb2codGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZSlcbiAgICBtaW5pbmdfZGF5cyA9IHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGUubWluaW5nX2RheXNcbiAgICBkYXRlcyA9IFtdXG4gICAgZm9yKGk9MDtpPCAzMDsgaSsrKSB7ICBcbiAgICAgIGRhdGUgPSBtb21lbnQoKS5zdWJ0cmFjdCgoaSsxKSwgJ2RheXMnKS5zdGFydE9mKCdkYXknKVxuICAgICAgbWluaW5nX2RheSA9IF8uaW5kZXhPZihtaW5pbmdfZGF5cywgZGF0ZS52YWx1ZU9mKCkvMTAwMCkgIT0gLTFcbiAgICAgIGRhdGVzLnB1c2goRG93bmxvYWREYXRlUm93KHt1cGRhdGVEYXRlOiB0aGlzLnVwZGF0ZURhdGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZU1pbmluZ0pvYjogdGhpcy5jcmVhdGVNaW5pbmdKb2IsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmluZ19kYXk6IG1pbmluZ19kYXksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGV9KSlcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsIGZhZGUgYnMtY3JlYXRlTWluaW5nSm9iLW1vZGFsLW1kXCIsIFxuICAgICAgICAgICB0YWJJbmRleDogXCItMVwiLCByb2xlOiBcImRpYWxvZ1wiLCBcbiAgICAgICAgICAgJ2FyaWEtbGFiZWxsZWRieSc6IFwibXlTbWFsbE1vZGFsTGFiZWxcIiwgJ2FyaWEtaGlkZGVuJzogXCJ0cnVlXCIsIFxuICAgICAgICAgICBpZDogXCJjcmVhdGVNaW5pbmdKb2JNb2RhbFwiLCBcbiAgICAgICAgICAgc3R5bGU6IHt0b3A6JzUwcHgnLG92ZXJmbG93OidoaWRkZW4nfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtZGlhbG9nIG1vZGFsLXNtXCIsIHN0eWxlOiB7d2lkdGg6MzUwfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1jb250ZW50XCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1oZWFkZXJcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaDQoe2NsYXNzTmFtZTogXCJtb2RhbC10aXRsZVwiLCBpZDogXCJteU1vZGFsTGFiZWxcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvdWQtZG93bmxvYWRcIn0pLCBcIsKgXCIgKyAnICcgK1xuICAgICAgICAgICAgICAgIFwiRG93bmxvYWQgUHJvc3BlY3RzXCJcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXNtXCIsIFxuICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmNyZWF0ZU1pbmluZ0pvYiwgXG4gICAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6LTI4LFxuICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0Oi01LGRpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICAgICBcIkRvd25sb2FkXCJcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtYm9keVwifSwgXG5cbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cCBkYXRlLWRvd25sb2FkLXByb3NwZWN0c1wiLCBcbiAgICAgICAgICAgICAgICAgIHN0eWxlOiB7aGVpZ2h0OjQwMCxvdmVyZmxvdzonYXV0bycsXG4gICAgICAgICAgICAgICAgICBib3JkZXJCb3R0b206J3NvbGlkIDFweCAjZGRkJyxcbiAgICAgICAgICAgICAgICAgIGN1cnNvcjoncG9pbnRlcicsXG4gICAgICAgICAgICAgICAgICBib3JkZXJUb3A6J3NvbGlkIDFweCAjZGRkJ319LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luOjB9fSwgZGF0ZXMpXG4gICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH0sXG59KTtcblxudmFyIERvd25sb2FkRGF0ZVJvdyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0Rvd25sb2FkRGF0ZVJvdycsXG4gIHVwZGF0ZURhdGU6IGZ1bmN0aW9uKCkge1xuICAgIC8vdGhpcy5jcmVhdGVNaW5pbmdKb2IoKVxuICAgIGRhdGUgPSB0aGlzLnByb3BzLmRhdGUuc3RhcnRPZignZGF5JykudmFsdWVPZigpLzEwMDBcbiAgICAvL2RhdGUgPSBtb21lbnQoKS5zdWJ0cmFjdCgoaSsxKSwgJ2RheXMnKS5zdGFydE9mKCdkYXknKVxuICAgIHRoaXMucHJvcHMuY3JlYXRlTWluaW5nSm9iKGRhdGUpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBsb2FkaW5nID0gKHRoaXMucHJvcHMubWluaW5nX2RheSkgPyAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInByb2ZpbGUtbG9hZGluZ1wiLCBzdHlsZToge2Zsb2F0OidyaWdodCcsaGVpZ2h0OjIwLHdpZHRoOjIwfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRvdWJsZS1ib3VuY2UxXCIsIHN0eWxlOiB7YmFja2dyb3VuZENvbG9yOicjNWNiODVjJ319KSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZG91YmxlLWJvdW5jZTJcIiwgc3R5bGU6IHtiYWNrZ3JvdW5kQ29sb3I6JyM1Y2I4NWMnfX0pXG4gICAgICAgICAgKSA6IFwiXCJcbiAgICBsb2FkaW5nID0gXCJcIlxuICAgIHJldHVybiAoXG4gICAgICAgIFJlYWN0LkRPTS5saSh7b25DbGljazogdGhpcy51cGRhdGVEYXRlLCBzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ30sIFxuICAgICAgICAgIGNsYXNzTmFtZTogXCJsaXN0LWdyb3VwLWl0ZW0gZG93bmxvYWQtZGF0ZSBiZy1zdWNjZXNzXCIsIFxuICAgICAgICAgIHN0eWxlOiAodGhpcy5wcm9wcy5taW5pbmdfZGF5KSA/IHtiYWNrZ3JvdW5kQ29sb3I6JyNkZmYwZDgnLHRleHRBbGlnbjonY2VudGVyJ30gOiB7dGV4dEFsaWduOidjZW50ZXInfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge3dpZHRoOjg1fX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jYWxlbmRhclwifSksIFwiwqBcIiwgXG4gICAgICAgICAgICB0aGlzLnByb3BzLmRhdGUuZm9ybWF0KCdsbCcpLCBcIiDCoCDCoCDCoFwiXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgc3R5bGU6IHt3aWR0aDo4OX0sIFxuICAgICAgY2xhc3NOYW1lOiAodGhpcy5wcm9wcy5taW5pbmdfZGF5KSA/IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14cyBkaXNhYmxlZFwiIDogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzXCJ9LCBcbiAgICAgICAgICAgICh0aGlzLnByb3BzLm1pbmluZ19kYXkpID8gXCJEb3dubG9hZGluZ1wiIDogXCJEb3dubG9hZFwiKSwgXG4gICAgICAgICAgbG9hZGluZ1xuICAgICAgICApXG4gICAgKVxuICB9XG59KVxuXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gY3JlYXRlUHJvc3BlY3RMaXN0RnJvbUNvbXBhbnlMaXN0TW9kYWxcbiAgY3JlYXRlUHJvZmlsZTogZnVuY3Rpb24oKSB7XG4gICAgLy9wcm9maWxlTmFtZSA9ICQoXCIucHJvZmlsZU5hbWVcIikudmFsKClcbiAgICB0aXRsZVByb2ZpbGUgPSB7XG4gICAgICAnY2xhc3NOYW1lJzogJ1Byb3NwZWN0VGl0bGVQcm9maWxlJyxcbiAgICAgICd0aXRsZV9rZXl3b3JkcycgOiAkKCcucHJvc3BlY3RSb2xlS2V5d29yZHMnKS50YWdzaW5wdXQoJ2l0ZW1zJykucmV2ZXJzZSgpXG4gICAgfVxuXG4gICAgbGlzdFByb2ZpbGUgPSB7XG4gICAgICAnY2xhc3NOYW1lJzogJ0xpc3RQcm9maWxlJyxcbiAgICAgICdsaXN0TmFtZSc6dGhpcy5wcm9wcy5jdXJyZW50TGlzdCxcbiAgICAgICdsaXN0JyA6IGFwcENvbmZpZy5wb2ludGVyKCdDb21wYW55UHJvc3BlY3RMaXN0JywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jdXJyZW50TGlzdE9iamVjdElkKSxcbiAgICB9XG5cbiAgICBwcm9maWxlcyA9IFt0aXRsZVByb2ZpbGUsIGxpc3RQcm9maWxlXVxuXG4gICAgbm9uZW1wdHlQcm9maWxlcyA9IF8uZmlsdGVyKHByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICBpZihfLnZhbHVlcyhwcm9maWxlKVsxXSl7IHJldHVybiBfLnZhbHVlcyhwcm9maWxlKVsxXS5sZW5ndGggfVxuICAgIH0pO1xuXG4gICAgLy9ub25lbXB0eVByb2ZpbGVzLnB1c2gobGlzdFByb2ZpbGUpXG4gICAgbm9uZW1wdHlQcm9maWxlcy5yZXZlcnNlKClcblxuICAgIGNvbnNvbGUubG9nKG5vbmVtcHR5UHJvZmlsZXMpXG4gICAgY29uc29sZS5sb2codGhpcy5wcm9wcy5jdXJyZW50TGlzdClcblxuICAgIG5ld1Byb2ZpbGUgPSB7XG4gICAgICBuYW1lOiB0aGlzLnByb3BzLmN1cnJlbnRMaXN0LFxuICAgICAgcHJvZmlsZXM6IG5vbmVtcHR5UHJvZmlsZXMsXG4gICAgICB0eXBlOiAncHJvc3BlY3RfcHJvZmlsZScsXG4gICAgICBtaW5pbmdfam9iOnRydWUsXG4gICAgICBsaXN0X3R5cGU6XCJtaW5pbmdfam9iXCIsXG4gICAgICBvbmx5X3Blb3BsZTp0cnVlLFxuICAgICAgdXNlcjp7XG4gICAgICAgIF9fdHlwZTonUG9pbnRlcicsXG4gICAgICAgIGNsYXNzTmFtZTonX1VzZXInLFxuICAgICAgICBvYmplY3RJZDpKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikub2JqZWN0SWRcbiAgICAgIH0sXG4gICAgICBjb21wYW55OiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikuY29tcGFueVxuICAgIH1cblxuICAgIGlmKG5vbmVtcHR5UHJvZmlsZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnBlcnNpc3RTaWduYWwobm9uZW1wdHlQcm9maWxlcywgXy5vbWl0KG5ld1Byb2ZpbGUsJ3Byb2ZpbGVzJykpXG4gICAgICAkKCcubW9kYWwnKS5jbGljaygpXG4gICAgICAvL3RoaXMucHJvcHMuYWRkUHJvZmlsZShuZXdQcm9maWxlKVxuICAgICAgJCgnLnByb3NwZWN0LXByb2ZpbGUtdGl0bGUnKS52YWwoJycpXG4gICAgfVxuICB9LFxuXG4gIHBlcnNpc3RTaWduYWw6IGZ1bmN0aW9uKG5vbmVtcHR5UHJvZmlsZXMsIG5ld1Byb2ZpbGUpIHtcbiAgICBjb25zb2xlLmxvZygnTkVXIFBST0ZJTEUnKVxuICAgIGNvbnNvbGUubG9nKG5ld1Byb2ZpbGUpXG4gICAgdXBkYXRlUHJvZmlsZSA9IHRoaXMucHJvcHMudXBkYXRlUHJvZmlsZVdpdGhPYmplY3RJZFxuXG4gICAgdGhpc3NzcyA9IHRoaXM7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdFByb2ZpbGUnLFxuICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeShuZXdQcm9maWxlKSxcbiAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzcykge1xuICAgICAgICBjb25zb2xlLmxvZygnUHJvc3BlY3QgUHJvZmlsZScpXG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3MpXG5cbiAgICAgICAgLy90aGlzc3NzLnByb3BzLnVwZGF0ZVByb2ZpbGVXaXRoT2JqZWN0SWQobmV3UHJvZmlsZSwgcmVzcy5vYmplY3RJZClcbiAgICAgICAgXG4gICAgICAgIHVzZXJfaWQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikub2JqZWN0SWRcbiAgICAgICAgbmV3UHJvZmlsZS51c2VyID0gYXBwQ29uZmlnLnBvaW50ZXIoJ19Vc2VyJywgdXNlcl9pZCkgXG4gICAgICAgIG5ld1Byb2ZpbGUuY29tcGFueSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55XG5cbiAgICAgICAgaWYobmV3UHJvZmlsZS50eXBlID09ICdwcm9zcGVjdF9wcm9maWxlJylcbiAgICAgICAgICBuZXdQcm9maWxlLm1pbmluZ19qb2JfbGlzdCA9IHRydWVcbiAgICAgICAgICBuZXdQcm9maWxlLmxpc3RfdHlwZSA9IFwibWluaW5nX2pvYlwiXG4gICAgICAgICAgbmV3UHJvZmlsZS5vbmx5X3Blb3BsZSA9IHRydWVcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RMaXN0JyxcbiAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeShfLnBpY2sobmV3UHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25hbWUnLCd1c2VyJywnbGlzdF90eXBlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3Blbl9wZW9wbGUnLCAnY29tcGFueScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21pbmluZ19qb2JfbGlzdCcpKSxcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdFByb2ZpbGUvJytyZXNzLm9iamVjdElkLFxuICAgICAgICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICAgICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoeydwcm9zcGVjdF9saXN0Jzp7IF9fdHlwZTonUG9pbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6J1Byb3NwZWN0TGlzdCcsb2JqZWN0SWQ6cmVzLm9iamVjdElkIH0gfSksXG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7IGNvbnNvbGUubG9nKHJlcyk7IFxuICAgICAgICAgICAgICAgICQoJy5tb2RhbCcpLmNsaWNrKClcbiAgICAgICAgICAgICAgICAvL2xvY2F0aW9uLmhyZWY9XCIjc2lnbmFsc1wiIFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKXsgY29uc29sZS5sb2coZXJyKSB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkgeyB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gU3RhcnQgTWluaW5nIEpvYlxuICAgICAgICBpZihuZXdQcm9maWxlLnR5cGUgPT0gJ3Byb3NwZWN0X3Byb2ZpbGUnKSB7XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIC8vdXJsOidodHRwczovL25hbWVsZXNzLXJldHJlYXQtMzUyNS5oZXJva3VhcHAuY29tL21pbmluZ19qb2IvdGl0bGUnLFxuICAgICAgICAgICAgLy8vdXJsOidodHRwczovL25hbWVsZXNzLXJldHJlYXQtMzUyNS5oZXJva3VhcHAuY29tL3RpdGxlX21pbmluZ19qb2InLFxuICAgICAgICAgICAgdXJsOidodHRwOi8vMTI3LjAuMC4xOjUwMDAvdGl0bGVfbWluaW5nX2pvYicsXG4gICAgICAgICAgICB0eXBlOidHRVQnLFxuICAgICAgICAgICAgZGF0YToge3Byb3NwZWN0X3Byb2ZpbGU6IHJlc3Mub2JqZWN0SWR9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IGNvbnNvbGUubG9nKHJlcykgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyKSB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBQcm9maWxlc1xuICAgICAgICBfLm1hcChub25lbXB0eVByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK18udmFsdWVzKHByb2ZpbGUpWzBdLFxuICAgICAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSggXy5waWNrKHByb2ZpbGUsIF8ua2V5cyhwcm9maWxlKVsxXSkgKSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0UHJvZmlsZS8nK3Jlc3Mub2JqZWN0SWQsXG4gICAgICAgICAgICAgICAgdHlwZTonUFVUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoe3Byb2ZpbGVzOntcbiAgICAgICAgICAgICAgICAgIF9fb3A6ICdBZGRVbmlxdWUnLFxuICAgICAgICAgICAgICAgICAgb2JqZWN0czpbe1xuICAgICAgICAgICAgICAgICAgICBfX3R5cGU6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IF8udmFsdWVzKHByb2ZpbGUpWzBdLFxuICAgICAgICAgICAgICAgICAgICBvYmplY3RJZDpyZXMub2JqZWN0SWRcbiAgICAgICAgICAgICAgICAgIH1dfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsIGZhZGUgXCIsIHRhYkluZGV4OiBcIi0xXCIsIHJvbGU6IFwiZGlhbG9nXCIsIFxuICAgICAgICAgICAnYXJpYS1sYWJlbGxlZGJ5JzogXCJteVNtYWxsTW9kYWxMYWJlbFwiLCAnYXJpYS1oaWRkZW4nOiBcInRydWVcIiwgXG4gICAgICAgICAgIGlkOiBcImNyZWF0ZVByb3NwZWN0TGlzdEZyb21Db21wYW55TGlzdE1vZGFsXCIsIFxuICAgICAgICAgICBzdHlsZToge3RvcDonNTBweCcsb3ZlcmZsb3c6J2hpZGRlbid9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtZGlhbG9nIG1vZGFsLXNtXCIsIHN0eWxlOiB7d2lkdGg6NjUwfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtY29udGVudFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWhlYWRlclwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDQoe2NsYXNzTmFtZTogXCJtb2RhbC10aXRsZVwiLCBpZDogXCJteU1vZGFsTGFiZWxcIn0sIFxuICAgICAgICAgICAgICAgICAgICBcIkZpbmQgUHJvc3BlY3RzIEF0IFRoZXNlIENvbXBhbmllc1wiXG4gICAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXNtXCIsIFxuICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5jcmVhdGVQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6LTI4LG1hcmdpblJpZ2h0Oi01fX0sIFxuICAgICAgICAgICAgICAgICAgICBcIkNyZWF0ZSBQcm9maWxlXCJcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtYm9keVwifSwgXG4gICAgICAgICAgICAgICAgICBQcm9zcGVjdFByb2ZpbGUobnVsbClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgKTtcbiAgfSxcbn0pO1xuXG52YXIgUHJvc3BlY3RQcm9maWxlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnUHJvc3BlY3RQcm9maWxlJyxcbiAgcHJvc3BlY3RGb3JtU3VibWl0OiBmdW5jdGlvbihlKSB7IGUucHJldmVudERlZmF1bHQoKSB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAkKCcucHJvc3BlY3RSb2xlS2V5d29yZHMnKS50YWdzaW5wdXQoe1xuICAgICAgbWF4VGFnczogNSxcbiAgICB9KVxuICAgICQoJy5ib290c3RyYXAtdGFnc2lucHV0Jykud2lkdGgoNDAwKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgc2hvd0RldGFpbHMgPSAodGhpcy5wcm9wcy5oaWRlUHJvc3BlY3REZXRhaWxzKSA/IHtkaXNwbGF5OiAnbm9uZSd9IDoge2Rpc3BsYXk6J2Jsb2NrJ31cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHNob3dEZXRhaWxzfSwgXG4gICAgICAgIFJlYWN0LkRPTS5mb3JtKHtjbGFzc05hbWU6IFwiY3JlYXRlU2lnbmFsXCIsIG9uU3VibWl0OiB0aGlzLnByb3NwZWN0Rm9ybVN1Ym1pdH0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7d2lkdGg6MTQwLGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBcIkpvYiBUaXRsZSBLZXl3b3JkOiDCoFwiKVxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwidGV4dFwiLCBcbiAgICAgICAgICAgICAgICAgICAnZGF0YS1yb2xlJzogXCJ0YWdzaW5wdXRcIiwgXG4gICAgICAgICAgICAgICAgICAgc3R5bGU6IHt3aWR0aDonNDAwcHggIWltcG9ydGFudCd9LCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIHByb3NwZWN0Um9sZUtleXdvcmRzXCIsIFxuICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIlwifSlcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH1cbn0pXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gY3JlYXRlQ29tcGFueVByb2ZpbGVNb2RhbFxuICBjcmVhdGVQcm9maWxlOiBmdW5jdGlvbigpIHtcbiAgICBwcm9maWxlTmFtZSA9ICQoXCIucHJvZmlsZU5hbWVcIikudmFsKClcblxuICAgIHRpdGxlUHJvZmlsZSA9IHtcbiAgICAgICdjbGFzc05hbWUnOiAnUHJvc3BlY3RUaXRsZVByb2ZpbGUnLFxuICAgICAgJ3RpdGxlX2tleXdvcmRzJyAgICA6ICQoJy5wcm9zcGVjdC1wcm9maWxlLXRpdGxlJykudGFnc2lucHV0KCdpdGVtcycpLnJldmVyc2UoKVxuICAgIH1cblxuICAgIC8qXG4gICAgbG9jYXRpb25Qcm9maWxlID0ge1xuICAgICAgJ2NsYXNzTmFtZSc6ICdMb2NhdGlvblByb2ZpbGUnLFxuICAgICAgJ2xvY2FsZScgICAgOiAkKCcucHJvc3BlY3QtbG9jYXRpb24tcHJvZmlsZScpLnRhZ3NpbnB1dCgnaXRlbXMnKS5yZXZlcnNlKClcbiAgICB9XG5cbiAgICBjb21wYW55U2l6ZVByb2ZpbGUgPSB7XG4gICAgICAnY2xhc3NOYW1lJzonRW1wbG95ZWVQcm9maWxlJywgXG4gICAgICAnZW1wbG95ZWVzJzogXy5tYXAoJCgnI3Byb3NwZWN0LXByb2ZpbGUtY29tcGFueVNpemVCdG5zJykuZmluZCgnLmFjdGl2ZScpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJldkJ0bil7IHJldHVybiAkKHJldkJ0bikudGV4dCgpLnRyaW0oKSB9KS5yZXZlcnNlKClcbiAgICB9XG5cbiAgICByZXZlbnVlUHJvZmlsZSA9IHtcbiAgICAgICdjbGFzc05hbWUnOidSZXZlbnVlUHJvZmlsZScsIFxuICAgICAgJ3JldmVudWVzJzogXy5tYXAoJCgnI3Byb3NwZWN0LXByb2ZpbGUtY29tcGFueVJldmVudWVCdG5zJykuZmluZCgnLmFjdGl2ZScpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJldkJ0bil7IHJldHVybiAkKHJldkJ0bikudGV4dCgpLnRyaW0oKSB9KS5yZXZlcnNlKClcbiAgICB9XG5cbiAgICBwcm9maWxlcyA9IFt0aXRsZVByb2ZpbGUsIGxvY2F0aW9uUHJvZmlsZSxcbiAgICAgICAgICAgICAgICBjb21wYW55U2l6ZVByb2ZpbGUsIHJldmVudWVQcm9maWxlXVxuICAgICovXG4gICAgXG4gICAgcHJvZmlsZXMgPSBbdGl0bGVQcm9maWxlXVxuXG4gICAgbm9uZW1wdHlQcm9maWxlcyA9IF8uZmlsdGVyKHByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICBpZihfLnZhbHVlcyhwcm9maWxlKVsxXSl7IHJldHVybiBfLnZhbHVlcyhwcm9maWxlKVsxXS5sZW5ndGggfVxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKG5vbmVtcHR5UHJvZmlsZXMpXG5cbiAgICBuZXdQcm9maWxlID0ge1xuICAgICAgbmFtZTogcHJvZmlsZU5hbWUsXG4gICAgICBwcm9maWxlczogbm9uZW1wdHlQcm9maWxlcyxcbiAgICAgIHR5cGU6ICdwcm9zcGVjdF9wcm9maWxlJyxcbiAgICAgIG1pbmluZ19qb2I6dHJ1ZSxcbiAgICAgIGxpc3RfdHlwZTpcIm1pbmluZ19qb2JcIixcbiAgICAgIG9ubHlfcGVvcGxlOnRydWUsXG4gICAgICB0aW1lc3RhbXA6IG1vbWVudCgpLnZhbHVlT2YoKSxcbiAgICAgIGRvbmU6IDAsXG4gICAgICB1c2VyOntcbiAgICAgICAgX190eXBlOidQb2ludGVyJyxcbiAgICAgICAgY2xhc3NOYW1lOidfVXNlcicsXG4gICAgICAgIG9iamVjdElkOkpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5vYmplY3RJZFxuICAgICAgfSxcbiAgICAgIGNvbXBhbnk6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55XG4gICAgfVxuXG4gICAgaWYobm9uZW1wdHlQcm9maWxlcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMucHJvcHMuYWRkUHJvZmlsZShuZXdQcm9maWxlKVxuICAgICAgdGhpcy5wZXJzaXN0U2lnbmFsKG5vbmVtcHR5UHJvZmlsZXMsIG5ld1Byb2ZpbGUpXG4gICAgICAkKCcubW9kYWwnKS5jbGljaygpXG4gICAgICAkKCcucHJvc3BlY3QtcHJvZmlsZS10aXRsZScpLnZhbCgnJylcbiAgICB9XG4gIH0sXG5cbiAgcGVyc2lzdFNpZ25hbDogZnVuY3Rpb24obm9uZW1wdHlQcm9maWxlcywgbmV3UHJvZmlsZSkge1xuICAgIGNvbnNvbGUubG9nKCdORVcgUFJPRklMRScpXG4gICAgY29uc29sZS5sb2cobmV3UHJvZmlsZSlcblxuICAgIHZhciB0aGlzc3NzID0gdGhpcztcbiAgICB2YXIgdGhpc3MgPSB0aGlzO1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdFByb2ZpbGUnLFxuICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeShfLm9taXQobmV3UHJvZmlsZSwgJ3Byb2ZpbGVzJykpLFxuICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXNzKSB7XG4gICAgICAgIFxuICAgICAgICB1c2VyX2lkID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLm9iamVjdElkXG4gICAgICAgIG5ld1Byb2ZpbGUudXNlciA9IGFwcENvbmZpZy5wb2ludGVyKCdfVXNlcicsIHVzZXJfaWQpIFxuICAgICAgICBuZXdQcm9maWxlLmNvbXBhbnkgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikuY29tcGFueVxuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdExpc3QnLFxuICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KF8ucGljayhuZXdQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbmFtZScsJ3VzZXInLCdsaXN0X3R5cGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvcGVuX3Blb3BsZScsICdjb21wYW55JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWluaW5nX2pvYl9saXN0JykpLFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICAgICAgcHJvc3BlY3RMaXN0ID0gYXBwQ29uZmlnLnBvaW50ZXIoJ1Byb3NwZWN0TGlzdCcscmVzLm9iamVjdElkKVxuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0UHJvZmlsZS8nK3Jlc3Mub2JqZWN0SWQsXG4gICAgICAgICAgICAgIHR5cGU6J1BVVCcsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7J3Byb3NwZWN0X2xpc3QnOnByb3NwZWN0TGlzdH0pLFxuICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpeyBjb25zb2xlLmxvZyhyZXMpIH0sXG4gICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpeyBjb25zb2xlLmxvZyhlcnIpIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oKSB7IH1cbiAgICAgICAgfSlcblxuICAgICAgICAvLyBTdGFydCBNaW5pbmcgSm9iXG4gICAgICAgIGlmKG5ld1Byb2ZpbGUudHlwZSA9PSAncHJvc3BlY3RfcHJvZmlsZScpIHtcbiAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgLy91cmw6J2h0dHBzOi8vbmFtZWxlc3MtcmV0cmVhdC0zNTI1Lmhlcm9rdWFwcC5jb20vbWluaW5nX2pvYi90aXRsZScsXG4gICAgICAgICAgICAvLy91cmw6J2h0dHBzOi8vbmFtZWxlc3MtcmV0cmVhdC0zNTI1Lmhlcm9rdWFwcC5jb20vdGl0bGVfbWluaW5nX2pvYicsXG4gICAgICAgICAgICB1cmw6J2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC90aXRsZV9taW5pbmdfam9iJyxcbiAgICAgICAgICAgIHR5cGU6J0dFVCcsXG4gICAgICAgICAgICBkYXRhOiB7cHJvc3BlY3RfcHJvZmlsZTogcmVzcy5vYmplY3RJZH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgY29uc29sZS5sb2cocmVzKSB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIpIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlIFByb2ZpbGVzXG4gICAgICAgIF8ubWFwKG5vbmVtcHR5UHJvZmlsZXMsIGZ1bmN0aW9uKHByb2ZpbGUpIHtcbiAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzLycrXy52YWx1ZXMocHJvZmlsZSlbMF0sXG4gICAgICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgICAgdHlwZTonUE9TVCcsXG4gICAgICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KCBfLnBpY2socHJvZmlsZSwgXy5rZXlzKHByb2ZpbGUpWzFdKSApLFxuICAgICAgICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RQcm9maWxlLycrcmVzcy5vYmplY3RJZCxcbiAgICAgICAgICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSh7cHJvZmlsZXM6e1xuICAgICAgICAgICAgICAgICAgX19vcDogJ0FkZFVuaXF1ZScsXG4gICAgICAgICAgICAgICAgICBvYmplY3RzOlt7XG4gICAgICAgICAgICAgICAgICAgIF9fdHlwZTonUG9pbnRlcicsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXy52YWx1ZXMocHJvZmlsZSlbMF0sXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdElkOnJlcy5vYmplY3RJZFxuICAgICAgICAgICAgICAgICAgfV19XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpc3MucHJvcHMudXBkYXRlUHJvZmlsZVdpdGhPYmplY3RJZChuZXdQcm9maWxlLnRpbWVzdGFtcCwgcmVzcy5vYmplY3RJZClcbiAgICAgIH1cbiAgICB9KVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbCBmYWRlIFwiLCB0YWJJbmRleDogXCItMVwiLCByb2xlOiBcImRpYWxvZ1wiLCBcbiAgICAgICAgICAgJ2FyaWEtbGFiZWxsZWRieSc6IFwibXlTbWFsbE1vZGFsTGFiZWxcIiwgJ2FyaWEtaGlkZGVuJzogXCJ0cnVlXCIsIFxuICAgICAgICAgICBpZDogXCJjcmVhdGVQcm9zcGVjdFByb2ZpbGVNb2RhbFwiLCBcbiAgICAgICAgICAgc3R5bGU6IHt0b3A6JzUwcHgnLG92ZXJmbG93OidoaWRkZW4nfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1zbVwiLCBzdHlsZToge3dpZHRoOjY1MH19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWNvbnRlbnRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1oZWFkZXJcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgXCJDcmVhdGUgUHJvc3BlY3QgUHJvZmlsZVwiXG4gICAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXNtXCIsIFxuICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5jcmVhdGVQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6LTI4LG1hcmdpblJpZ2h0Oi01fX0sIFxuICAgICAgICAgICAgICAgICAgICBcIkNyZWF0ZSBQcm9maWxlXCJcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtYm9keVwifSwgXG4gICAgICAgICAgICAgICAgICBDcmVhdGVIaXJpbmdTaWduYWwobnVsbClcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWZvb3RlclwiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgICAgXCJDbG9zZVwiXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeVwifSwgXG4gICAgICAgICAgICAgICAgICBcIlNlbmQgRW1haWxcIlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICk7XG4gIH0sXG4gIGNyZWF0ZUNvbXBhbnlQcm9maWxlOiBmdW5jdGlvbigpIHtcbiAgfSxcbn0pO1xuXG52YXIgQ3JlYXRlSGlyaW5nU2lnbmFsID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ3JlYXRlSGlyaW5nU2lnbmFsJyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYWRkQ29tcGFueTogZmFsc2UsXG4gICAgICBhZGRQcm9zcGVjdDogZmFsc2UsXG4gICAgICBoaWRlQ29tcGFueURldGFpbHM6IGZhbHNlLFxuICAgICAgaGlkZVByb3NwZWN0RGV0YWlsczogZmFsc2UsXG4gICAgfVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcblxuICB9LFxuICBcbiAgdG9nZ2xlQ29tcGFueSA6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2FkZENvbXBhbnk6ICF0aGlzLnN0YXRlLmFkZENvbXBhbnl9KVxuICB9LFxuXG4gIHRvZ2dsZVByb3NwZWN0IDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7YWRkUHJvc3BlY3Q6ICF0aGlzLnN0YXRlLmFkZFByb3NwZWN0fSlcbiAgfSxcblxuICB0b2dnbGVDb21wYW55RGV0YWlsczogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7aGlkZUNvbXBhbnlEZXRhaWxzOiAhdGhpcy5zdGF0ZS5oaWRlQ29tcGFueURldGFpbHN9KVxuICB9LFxuXG4gIHRvZ2dsZVByb3NwZWN0RGV0YWlsczogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7aGlkZVByb3NwZWN0RGV0YWlsczogIXRoaXMuc3RhdGUuaGlkZVByb3NwZWN0RGV0YWlsc30pXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIF8ubWFwKCQoJy5oaXJpbmctcm9sZScpLGZ1bmN0aW9uKGlucHV0KXskKGlucHV0KS50YWdzaW5wdXQoKX0pXG4gICAgJCh0aGlzLmdldERPTU5vZGUoKSkuZmluZCgnLmhpcmluZy1yb2xlJykudGFnc2lucHV0KClcbiAgICAkKCcuYm9vdHN0cmFwLXRhZ3NpbnB1dCcpLndpZHRoKCc1OS4xJScpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpe1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICBSZWFjdC5ET00uZm9ybSh7Y2xhc3NOYW1lOiBcImNyZWF0ZVNpZ25hbFwiLCBvblN1Ym1pdDogdGhpcy5jcmVhdGVQcm9maWxlfSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4obnVsbCwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7d2lkdGg6MTQwLGRpc3BsYXk6J2lubGluZS1ibG9jaycsbWFyZ2luQm90dG9tOjIwfX0sIFxuICAgICAgICAgICAgICBcIlByb3NwZWN0IFByb2ZpbGUgTmFtZTogwqBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOic3My4xJSd9LCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGhpcmluZy1wcm9maWxlLW5hbWUgcHJvZmlsZU5hbWVcIiwgXG4gICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiUHJvc3BlY3QgUHJvZmlsZSBOYW1lIC4uLlwifSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJyxtYXJnaW5Cb3R0b206LTEwfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge3dpZHRoOjE0MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFxuICAgICAgICAgICAgICBcIlRpdGxlOiDCoFwiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonNzMuMSUnLG1hcmdpblJpZ2h0OjEwfSwgXG4gICAgICAgICAgICAgICAgICAgJ2RhdGEtcm9sZSc6IFwidGFnc2lucHV0XCIsIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgaGlyaW5nLXJvbGUgcHJvc3BlY3QtcHJvZmlsZS10aXRsZVwifSksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLXN1Y2Nlc3NcIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtkaXNwbGF5OidibG9jaycsbWFyZ2luQm90dG9tOi0xMH19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgIFwiTG9jYXRpb246IMKgXCJcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5Oidub25lJyx3aWR0aDonNzMuMSUnLG1hcmdpblJpZ2h0OjEwfSwgXG4gICAgICAgICAgICAgICAgICAgJ2RhdGEtcm9sZSc6IFwidGFnc2lucHV0XCIsIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgcHJvc3BlY3QtbG9jYXRpb24tcHJvZmlsZS10bXBcIn0pLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXhzIGJ0bi1zdWNjZXNzXCIsIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2Rpc3BsYXk6J25vbmUnLG1hcmdpbkJvdHRvbTotMTB9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7d2lkdGg6MTQwLGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICAgIFwiSW5kdXN0cmllczogwqBcIlxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwidGV4dFwiLCBcbiAgICAgICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6JzczLjElJyxtYXJnaW5SaWdodDoxMH0sIFxuICAgICAgICAgICAgICAgICAgICdkYXRhLXJvbGUnOiBcInRhZ3NpbnB1dFwiLCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIFwifSksIFxuXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXhzIGJ0bi1zdWNjZXNzXCIsIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLCBcbiAgICAgICAgICBDb21wYW55UHJvZmlsZShudWxsKSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7bWFyZ2luVG9wOjEwfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge3dpZHRoOjE0MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFwiQXV0byBQcm9zcGVjdDogwqBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cCBhdXRvcHJvc3BlY3RcIiwgJ2RhdGEtdG9nZ2xlJzogXCJidXR0b25zXCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBhY3RpdmVcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJyYWRpb1wifSksIFwiIFllc1wiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwicmFkaW9cIn0pLCBcIiBOb1wiXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfSxcbiAgY3JlYXRlU2lnbmFsOiBmdW5jdGlvbihlKSB7IGUucHJldmVudERlZmF1bHQoKSB9XG59KTtcblxudmFyIENvbXBhbnlQcm9maWxlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ29tcGFueVByb2ZpbGUnLFxuICBjb21wYW55Rm9ybVN1Ym1pdDogZnVuY3Rpb24oZSkgeyBlLnByZXZlbnREZWZhdWx0KCkgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgJCh0aGlzLmdldERPTU5vZGUoKSkuZmluZCgnLmJ0bi1kZWZhdWx0JykuY2xpY2soZnVuY3Rpb24oZSkge1xuXG4gICAgICBpZigkKGUudGFyZ2V0KS5wYXJlbnQoJ2xhYmVsJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKVxuICAgICAgICAkKGUudGFyZ2V0KS5wYXJlbnQoJ2xhYmVsJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG4gICAgICBlbHNlXG4gICAgICAgICQoZS50YXJnZXQpLnBhcmVudCgnbGFiZWwnKS5hZGRDbGFzcygnYWN0aXZlJylcblxuICAgICAgY29uc29sZS5sb2coJChlLnRhcmdldCkucGFyZW50KCdsYWJlbCcpKVxuICAgIH0pO1xuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLG1hcmdpbjowLFxuICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOjE0MCxtYXJnaW5Cb3R0b206MjB9fSwgXCJDb21wYW55IFNpemUgXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cFwiLCAnZGF0YS10b2dnbGUnOiBcImJ1dHRvbnNcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHt3aWR0aDonNzMuNSUnfSwgaWQ6IFwicHJvc3BlY3QtcHJvZmlsZS1jb21wYW55U2l6ZUJ0bnNcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGVtcGxveWVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAxIC0gNTBcIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBlbXBsb3llZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgNTAgLSAyNTBcIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBlbXBsb3llZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgMjUwIC0gMTAwMFwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGVtcGxveWVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAxMDAwICtcIlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcIiBcIiwgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsbWFyZ2luOjAsd2lkdGg6MTQwfX0sIFxuICAgICAgICAgICAgICBcIkFwcHJveC4gUmV2ZW51ZSAgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXBcIiwgJ2RhdGEtdG9nZ2xlJzogXCJidXR0b25zXCIsIFxuICAgICAgICAgICAgICBzdHlsZToge3dpZHRoOic3My41JSd9LCBpZDogXCJwcm9zcGVjdC1wcm9maWxlLWNvbXBhbnlSZXZlbnVlQnRuc1wifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgcmV2ZW51ZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgXCIsICc8ICQxTSdcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgcmV2ZW51ZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgJDFNIC0gJDVNXCJcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgcmV2ZW51ZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgJDVNIC0gJDI1TVwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IHJldmVudWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiICQyNU0gK1wiXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KTtcblxudmFyIFByb3NwZWN0UHJvZmlsZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1Byb3NwZWN0UHJvZmlsZScsXG4gIHByb3NwZWN0Rm9ybVN1Ym1pdDogZnVuY3Rpb24oZSkgeyBlLnByZXZlbnREZWZhdWx0KCkgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgJCgnLnByb3NwZWN0Um9sZUtleXdvcmRzJykudGFnc2lucHV0KHtcbiAgICAgIG1heFRhZ3M6IDUsXG4gICAgfSlcbiAgICAkKCcuYm9vdHN0cmFwLXRhZ3NpbnB1dCcpLndpZHRoKDQwMClcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHNob3dEZXRhaWxzID0gKHRoaXMucHJvcHMuaGlkZVByb3NwZWN0RGV0YWlscykgPyB7ZGlzcGxheTogJ25vbmUnfSA6IHtkaXNwbGF5OidibG9jayd9XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiBzaG93RGV0YWlsc30sIFxuICAgICAgICBSZWFjdC5ET00uZm9ybSh7Y2xhc3NOYW1lOiBcImNyZWF0ZVNpZ25hbFwiLCBvblN1Ym1pdDogdGhpcy5wcm9zcGVjdEZvcm1TdWJtaXR9LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge3dpZHRoOjE0MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgXCJKb2IgVGl0bGUgS2V5d29yZDogwqBcIilcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgJ2RhdGEtcm9sZSc6IFwidGFnc2lucHV0XCIsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7d2lkdGg6JzQwMHB4ICFpbXBvcnRhbnQnfSwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBwcm9zcGVjdFJvbGVLZXl3b3Jkc1wiLCBcbiAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJcIn0pXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KVxuIiwiLyoqIEBqc3ggcmVhY3QuZG9tICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIFxuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgJCgnLnRlbXBsYXRlLWJvZHknKS5odG1sKHRoaXMuc3RhdGUudGVtcGxhdGVCb2R5KVxuICB9LFxuXG4gIGNsaWNrZWRPdmVybGF5OiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnY2xpY2tlZCBvdmVybGF5JylcbiAgICB0aGlzLnByb3BzLnRvZ2dsZVRlbXBsYXRlRWRpdE1lbnUoKVxuICB9LFxuXG4gIGNoYW5nZU1vZGU6IGZ1bmN0aW9uKCkge1xuICAgIC8vIFVwZGF0ZSB0ZW1wbGF0ZSBodG1sIG9uIHRvZ2dsZVxuICAgIGNvbnNvbGUubG9nKCdFRElUIE1PREUnKVxuICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUuZWRpdE1vZGUpXG4gICAgcGFyc2VfaGVhZGVycyA9IGFwcENvbmZpZy5wYXJzZUhlYWRlcnNcbiAgICBpZih0aGlzLnN0YXRlLmVkaXRNb2RlKXtcbiAgICAgICQoJy5zdW1tZXInKS5kZXN0cm95KCk7XG4gICAgICB0aGlzLnByb3BzLnNhdmVUZW1wbGF0ZSh7XG4gICAgICAgIG5hbWU6IHRoaXMuc3RhdGUubmFtZSxcbiAgICAgICAgdGVtcGxhdGVCb2R5OiAkKCcuc3VtbWVyJykuY29kZSgpLFxuICAgICAgICB0ZW1wbGF0ZVN1YmplY3Q6ICQoJy5zdWJqZWN0JykudmFsKCksXG4gICAgICB9KVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHRlbXBsYXRlQm9keTogJCgnLnN1bW1lcicpLmNvZGUoKSxcbiAgICAgICAgdGVtcGxhdGVTdWJqZWN0OiAkKCcuc3ViamVjdCcpLnZhbCgpLFxuICAgICAgICBlZGl0TW9kZTogIXRoaXMuc3RhdGUuZWRpdE1vZGUsXG4gICAgICB9KVxuICAgICAgJC5hamF4KHtcbiAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1RlbXBsYXRlcy8nK3RoaXMucHJvcHMuaW5pdGlhbFRlbXBsYXRlVmFsdWVzLm9iamVjdElkLFxuICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICBoZWFkZXJzOnBhcnNlX2hlYWRlcnMsXG4gICAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoe2JvZHk6ICQoJy5zdW1tZXInKS5jb2RlKCksc3ViamVjdDogJCgnLnN1YmplY3QnKS52YWwoKX0pLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgZWRpdE1vZGU6ICF0aGlzLnN0YXRlLmVkaXRNb2RlIH0pXG4gICAgfVxuICB9LFxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgLyogdGhpc3MgPSB0aGlzOyAqL1xuXG4gICAgY29uc29sZS5sb2coJ09USEVSJylcbiAgICBpZih0aGlzLnN0YXRlLmVkaXRNb2RlKXtcbiAgICAgIGNvbnNvbGUubG9nKCdDQUxMRUQnKVxuICAgICAgLy8gUmVwbGFjZSBTdWJqZWN0IFxuICAgICAgJCgnLnN1YmplY3QnKS52YWwodGhpcy5zdGF0ZS50ZW1wbGF0ZVN1YmplY3QpXG5cbiAgICAgICQoJy5zdW1tZXInKS5zdW1tZXJub3RlKHtcbiAgICAgICAgaGVpZ2h0OiAyMDAsXG4gICAgICAgIHRvb2xiYXI6IFtcbiAgICAgICAgICBbJ3N0eWxlJywgWydib2xkJywgJ2l0YWxpYycsICd1bmRlcmxpbmUnLCAnY2xlYXInXV0sXG4gICAgICAgICAgWydmb250JywgWydzdHJpa2V0aHJvdWdoJ11dLFxuICAgICAgICAgIFsnZm9udHNpemUnLCBbJ2ZvbnRzaXplJ11dLFxuICAgICAgICAgIFsnY29sb3InLCBbJ2NvbG9yJ11dLFxuICAgICAgICAgIFsncGFyYScsIFsndWwnLCAnb2wnLCAncGFyYWdyYXBoJ11dLFxuICAgICAgICAgIFsnaGVpZ2h0JywgWydoZWlnaHQnXV0sXG4gICAgICAgIF1cbiAgICAgIH0pXG5cbiAgICAgIC8vIEluaXRpYWxpemUgRWRpdG9yIHdpdGggaHRtbFxuICAgICAgJCgnLnN1bW1lcicpLmNvZGUodGhpcy5zdGF0ZS50ZW1wbGF0ZUJvZHkpXG4gICAgfVxuICB9LFxuXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBzdWJqZWN0UGxhY2UgPSAodGhpcy5zdGF0ZS5lZGl0TW9kZSkgPyByZWFjdC5kb20uaW5wdXQoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lJyx3aWR0aDo0ODB9LCBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIHN1YmplY3RcIn0pIDogdGhpcy5zdGF0ZS50ZW1wbGF0ZVN1YmplY3RcblxuICAgIGlmKHRoaXMuc3RhdGUuZWRpdE1vZGUpe1xuICAgICAgIHRvZ2dsZUJ1dHRvbiA9IHJlYWN0LmRvbS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY2hhbmdlTW9kZSwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHNcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6NX19LCBcbiAgICAgICAgICAgIHJlYWN0LmRvbS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc2F2ZVwifSksIFwiIMKgIFNhdmUgVGVtcGxhdGVcIilcbiAgICB9IGVsc2Uge1xuICAgICAgIHRvZ2dsZUJ1dHRvbiA9IHJlYWN0LmRvbS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY2hhbmdlTW9kZSwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4teHNcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6NX19LCBcbiAgICAgICAgICAgIHJlYWN0LmRvbS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGVuY2lsLXNxdWFyZVwifSksIFwiIMKgIEVkaXQgVGVtcGxhdGVcIilcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgcmVhY3QuZG9tLmRpdihudWxsLCBcbiAgICAgIHJlYWN0LmRvbS5kaXYoe29uQ2xpY2s6IHRoaXMuY2xpY2tlZE92ZXJsYXksIGlkOiBcImVkaXRUZW1wbGF0ZU92ZXJsYXlcIn0pLCBcbiAgICAgIHJlYWN0LmRvbS5kaXYoe2lkOiBcImVkaXRUZW1wbGF0ZVZpZXdcIiwgXG4gICAgICAgICAgIGNsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1pbmZvXCIsIFxuICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJ319LCBcbiAgICAgICAgICAgcmVhY3QuZG9tLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWhlYWRpbmdcIiwgc3R5bGU6IHtoZWlnaHQ6NTB9fSwgXG4gICAgICAgICAgICAgcmVhY3QuZG9tLmg2KHtzdHlsZToge2Zsb2F0OidsZWZ0J319LCBcbiAgICAgICAgICAgICAgIHJlYWN0LmRvbS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZmlsZS10ZXh0LW9cIn0pLCBcbiAgICAgICAgICAgICAgIFwiICBcIiArIHRoaXMucHJvcHMuaW5pdGlhbFRlbXBsYXRlVmFsdWVzLm5hbWVcbiAgICAgICAgICAgICApLCBcbiAgICAgICAgICB0b2dnbGVCdXR0b25cbiAgICAgICAgKSwgXG4gICAgICAgIHJlYWN0LmRvbS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1ib2R5XCJ9LCBcbiAgICAgICAgICByZWFjdC5kb20uZGl2KHtjbGFzc05hbWU6IFwiZWRpdFRlbXBsYXRlVGl0bGVcIn0sIFxuICAgICAgICAgICAgcmVhY3QuZG9tLnNwYW4obnVsbCwgXCJTdWJqZWN0OiBcIiksIFxuICAgICAgICAgICAgc3ViamVjdFBsYWNlXG4gICAgICAgICAgKSwgXG4gICAgICAgICByZWFjdC5kb20uYnIobnVsbCksIFxuICAgICAgICAgcmVhY3QuZG9tLmRpdih7Y2xhc3NOYW1lOiBcInRlbXBsYXRlRGV0YWlsc1wifSwgXG4gICAgICAgICAgIHJlYWN0LmRvbS5oNih7c3R5bGU6IHttYXJnaW5Cb3R0b206JzAnfSwgY2xhc3NOYW1lOiBcInRleHQtbXV0ZWRcIn0sIFxuICAgICAgICAgICAgIFwiQ3JlYXRlZCBieSBNYXJrIG9uIEp1bC4gMjEsIDIwMTRcIlxuICAgICAgICAgICApLCBcbiAgICAgICAgICAgcmVhY3QuZG9tLmg2KHtzdHlsZToge21hcmdpblRvcDonMCd9LCBjbGFzc05hbWU6IFwidGV4dC1tdXRlZFwifSwgXG4gICAgICAgICAgICAgXCJsYXN0IHVwZGF0ZWQgNyBkYXlzIGFnb1wiXG4gICAgICAgICAgIClcbiAgICAgICAgICksIFxuICAgICAgICByZWFjdC5kb20uYnIobnVsbCksIFxuICAgICAgICByZWFjdC5kb20uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwgcGFuZWwtZGVmYXVsdFwifSwgXG4gICAgICAgICAgcmVhY3QuZG9tLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWJvZHkgc3VtbWVyIHRlbXBsYXRlLWJvZHlcIn1cbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICApXG4pXG4pXG4gICAgKTtcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gRGF0YVJvd1xuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7IH1cbiAgfSxcblxuICBjbGlja0NoZWNrOiBmdW5jdGlvbigpIHtcbiAgICBkb21Ob2RlID0gdGhpcy5nZXRET01Ob2RlKClcbiAgICBpc0NoZWNrZWQgPSAkKCQoZG9tTm9kZSkuZmluZCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJylbMF0pLnByb3AoJ2NoZWNrZWQnKVxuICAgIC8vY29uc29sZS5sb2coaXNDaGVja2VkKVxuICAgIHRoaXMuc2V0U3RhdGUoe2NoZWNrZWQ6IGlzQ2hlY2tlZH0pXG4gICAgdGhpcy5wcm9wcy5jaGVja2JveEFjdGlvbihpc0NoZWNrZWQsIHRoaXMucHJvcHMucHJvc3BlY3Qub2JqZWN0SWQpXG4gIH0sXG5cbiAgcm93Q2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgICQoJCh0aGlzLmdldERPTU5vZGUoKSkuZmluZCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJylbMF0pLmNsaWNrKClcbiAgfSxcblxuICBrZXlib2FyZENsaWNrOiBmdW5jdGlvbigpIHtcbiAgICAkKCQoJy5rZXlTZWxlY3QnKS5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKVswXSkuY2xpY2soKVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHsgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIGtleWJvYXJkU2VsZWN0ZWQgPSB7Ym9yZGVyTGVmdDonN3B4IHNvbGlkIHJnYmEoMCwwLDAsMCknfVxuICAgIHRoaXNzc3MgPSB0aGlzXG4gICAgaWYodGhpcy5wcm9wcy5rZXlib2FyZFNlbGVjdGVkKSB7XG4gICAgICAvLyBBZGp1c3QgU2Nyb2xsIGRlcGVuZGluZyBvbiB3aGVyZSB0aGUgcHJvc3BlY3QgaXNcbiAgICAgIGtleWJvYXJkU2VsZWN0ZWQgPSB7Ym9yZGVyTGVmdDonN3B4IHNvbGlkICMwMDk2ZmYgIWltcG9ydGFudCd9XG4gICAgICBNb3VzZXRyYXAudW5iaW5kKCd4JylcbiAgICAgIE1vdXNldHJhcC5iaW5kKCd4JywgZnVuY3Rpb24oKSB7IFxuICAgICAgICB0aGlzc3NzLmtleWJvYXJkQ2xpY2soKVxuICAgICAgICBpZih0aGlzc3NzLnN0YXRlLmNoZWNrZWQpXG4gICAgICAgICAgY29uc29sZS5sb2coXCJsbWFvXCIpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBwcm9zcGVjdCA9IHRoaXMucHJvcHMucHJvc3BlY3RcblxuICAgIGlmKHRoaXMucHJvcHMubWFzdGVyQ2hlY2tib3hDaGVja2VkICYmIHRoaXMuc3RhdGUuY2hlY2tlZClcbiAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgZWxzZSBpZih0aGlzLnByb3BzLmFscmVhZHlDaGVja2VkKVxuICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICBlbHNlIGlmKHRoaXMuc3RhdGUuY2hlY2tlZClcbiAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgZWxzZSBpZih0aGlzLnByb3BzLm1hc3RlckNoZWNrYm94Q2hlY2tlZCB8fCB0aGlzLnN0YXRlLmNoZWNrZWQpXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgIGVsc2VcbiAgICAgIGNoZWNrZWQgPSBmYWxzZVxuXG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLnN0YXRlLmNoZWNrZWQpXG4gICAgLy9jb25zb2xlLmxvZyhjaGVja2VkKVxuICAgIC8ve3Byb3NwZWN0LmVtcGxveWVlQ291bnRSYW5nZS5uYW1lICsgXCIgZW1wbG95ZWVzXCIgfVxuICAgIFxuICAgIGNvbG9yID0ge31cbiAgICBpZih0aGlzLnN0YXRlLmNoZWNrZWQgfHwgdGhpcy5wcm9wcy5hbHJlYWR5Q2hlY2tlZClcbiAgICAgIGNvbG9yID0ge2JhY2tncm91bmRDb2xvcjogJyNlZWY4ZmYnfVxuICAgICAgXG4gICAgcm93Q2wgPSAodGhpcy5wcm9wcy5rZXlib2FyZFNlbGVjdGVkKSA/IFwicHJvc3BlY3RzLXRyIGtleVNlbGVjdFwiIDogXCJwcm9zcGVjdHMtdHJcIlxuICAgIHdlYnNpdGVCdG4gPSAocHJvc3BlY3Qud2Vic2l0ZVVybCkgPyAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiaHR0cDovL1wiK3Byb3NwZWN0LndlYnNpdGVVcmwucmVwbGFjZSgnaHR0cDovLycsJycpfSwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZ2xvYmVcIn0pLCBcIiBcIikgOiBcIlwiXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS50cih7Y2xhc3NOYW1lOiByb3dDbCwgXG4gICAgICAgICAgb25DbGljazogdGhpcy5yb3dDbGljaywgXG4gICAgICAgICAgc3R5bGU6IGtleWJvYXJkU2VsZWN0ZWR9LCBcbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiBjb2xvcn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIiwgXG4gICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5jbGlja0NoZWNrLCBcbiAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IGNoZWNrZWR9KVxuICAgICAgICAgICksIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3IsIFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZml4ZWQtZGF0YS1jb2x1bW5cIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7Zm9udFdlaWdodDonYm9sZCd9fSwgcHJvc3BlY3QubmFtZSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2ZvbnRXZWlnaHQ6JzQwMCcsbWFyZ2luOicwcHgnfX0sIHByb3NwZWN0LmhlYWRjb3VudClcbiAgICAgICAgICApLCBcblxuICAgICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IGNvbG9yLCBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZpeGVkLWRhdGEtY29sdW1uXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW46JzBweCd9fSwgbW9tZW50KHByb3NwZWN0LmNyZWF0ZWRBdCwnWVlZWS1NTS1ERFRoOm1tOnNzJykuZnJvbU5vdygpKVxuICAgICAgICAgICksIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3IsIFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZml4ZWQtZGF0YS1jb2x1bW5cIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbjonMHB4J319LCBwcm9zcGVjdC5pbmR1c3RyeSlcbiAgICAgICAgICApLCBcblxuICAgICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IGNvbG9yfSwgXG4gICAgICAgICAgICBcIsKgIMKgXCIsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4teHNcIiwgXG4gICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMub3BlbkxpbmtlZGluQ29tcGFueVByb2ZpbGUsIFxuICAgICAgICAgICAgICBzdHlsZToge2JhY2tncm91bmRJbWFnZTogJ2xpbmVhci1ncmFkaWVudCgxODBkZWcsICMwMDk2ZmYgMCUsICMwMDVkZmYgMTAwJSknfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXNlYXJjaFwifSksIFwiIMKgXCIgKyAnICcgK1xuICAgICAgICAgICAgICBcIlNlYXJjaCBQcm9maWxlc1wiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFwiwqAgwqBcIiwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi14c1wiLCBcbiAgICAgICAgICAgICAgb25DbGljazogdGhpcy5vcGVuU2ltaWxhckNvbXBhbmllcywgXG4gICAgICAgICAgICAgIHN0eWxlOiB7YmFja2dyb3VuZEltYWdlOiAnbGluZWFyLWdyYWRpZW50KDE4MGRlZywgIzAwOTZmZiAwJSwgIzAwNWRmZiAxMDAlKSd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY29weVwifSksIFwiIMKgXCIgKyAnICcgK1xuICAgICAgICAgICAgICBcIkZpbmQgU2ltaWxhciBDb21wYW5pZXNcIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICksIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3J9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW46JzBweCd9fSwgcHJvc3BlY3QuY2l0eSlcbiAgICAgICAgICApLCBcblxuICAgICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IGNvbG9yfSwgXG4gICAgICAgICAgICB0aGlzLnByb3BzLmxpLCBcIsKgXCIsIHRoaXMucHJvcHMubGluaywgXG4gICAgICAgICAgICB3ZWJzaXRlQnRuXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgKTtcbiAgfSxcblxuICBvcGVuTGlua2VkaW5Db21wYW55UHJvZmlsZTogZnVuY3Rpb24oZSkge1xuICAgIGNpZCA9IHRoaXMucHJvcHMucHJvc3BlY3QucHJvZmlsZS5zcGxpdCgnPycpWzBdLnNwbGl0KCcvY29tcGFueS8nKVsxXVxuICAgIHdpbmRvdy5vcGVuKFwiaHR0cHM6Ly93d3cubGlua2VkaW4uY29tL3ZzZWFyY2gvcD9mX0NDPVwiK2NpZClcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gIH0sXG5cbiAgb3BlblNpbWlsYXJDb21wYW5pZXM6IGZ1bmN0aW9uKGUpIHtcbiAgICBjaWQgPSB0aGlzLnByb3BzLnByb3NwZWN0LnByb2ZpbGUuc3BsaXQoJz8nKVswXS5zcGxpdCgnL2NvbXBhbnkvJylbMV1cbiAgICB3aW5kb3cub3BlbihcImh0dHBzOi8vd3d3LmxpbmtlZGluLmNvbS92c2VhcmNoL2M/cnNpZD01MjY0NDAzNzE0MDkxODQ3NjgxNzUmcGl2b3RUeXBlPXNpbSZwaWQ9XCIrY2lkK1wiJnRyaz1zaW1fY29tcGFuaWVzX3Jlc19zaW0mdHJrSW5mbz1WU1JQc2VhcmNoSWQlM0E1MjY0NDAzNzE0MDkxODQ3NjgxNzUlMkNWU1JQdGFyZ2V0SWQlM0ExMDI1JTJDVlNSUGNtcHQlM0FwcmltYXJ5XCIpXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICB9LFxuXG4gIGRlbGV0ZVByb3NwZWN0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnByb3BzLmRlbGV0ZVByb3NwZWN0KHRoaXMucHJvcHMucHJvc3BlY3Qub2JqZWN0SWQsICdQcm9zcGVjdCcpXG4gIH1cbn0pO1xuXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxuLy9UT0RPIC0gYWJzdHJhY3QgbGlzdHNcbnZhciBTaWRlTWVudVByb3NwZWN0cyA9IHJlcXVpcmUoJy4vc2lkZV9tZW51X3VzZXJfcHJvc3BlY3RzLmpzLm1pbi5qcycpO1xuXG52YXIgVXNlclByb3NwZWN0ID0gcmVxdWlyZSgnLi91c2VyX3Byb3NwZWN0LmpzLm1pbi5qcycpO1xudmFyIERhdGFSb3cgPSByZXF1aXJlKCcuL2RhdGFfcm93LmpzLm1pbi5qcycpO1xuXG52YXIgVXNlclByb3NwZWN0SGVhZGVyID0gcmVxdWlyZSgnLi91c2VyX3Byb3NwZWN0X2hlYWRlci5qcy5taW4uanMnKTtcbnZhciBTaWRlTWVudUxpc3RPcHRpb24gPSByZXF1aXJlKCcuL3VzZXJfc2lkZV9tZW51X2xpc3QuanMubWluLmpzJyk7XG52YXIgTG9hZGluZ1NwaW5uZXIgPSByZXF1aXJlKCcuL2xvYWRpbmdfc3Bpbm5lci5qcy5taW4uanMnKVxudmFyIFBhbmVsRm9vdGluZyA9IHJlcXVpcmUoJy4vcGFuZWxfZm9vdGluZy5qcy5taW4uanMnKVxudmFyIE1lc3NlbmdlciA9IHJlcXVpcmUoJy4vbWVzc2VuZ2VyLmpzLm1pbi5qcycpXG52YXIgRGVsZXRlTGlzdE1vZGFsID0gcmVxdWlyZSgnLi9kZWxldGVfbGlzdF9tb2RhbC5qcy5taW4uanMnKVxudmFyIFJlbmFtZUxpc3RNb2RhbCA9IHJlcXVpcmUoJy4vcmVuYW1lX2xpc3RfbW9kYWwuanMubWluLmpzJylcbnZhciBDb21wYW55UHJvc3BlY3QgPSByZXF1aXJlKCcuL2NvbXBhbnkuanMubWluLmpzJyk7XG52YXIgQ3JlYXRlUHJvc3BlY3RMaXN0RnJvbUNvbXBhbnlMaXN0TW9kYWwgPSByZXF1aXJlKCcuL2NyZWF0ZV9wcm9zcGVjdF9saXN0X2Zyb21fY29tcGFueV9saXN0LmpzLm1pbi5qcycpXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHsgIGN1cnJlbnRQYWdlIDogMSxcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiB0aGlzLnByb3BzLmNsYXNzTmFtZSwgIFxuICAgICAgICAgICAgICBsaXN0Q2xhc3NOYW1lOiB0aGlzLnByb3BzLmxpc3RDbGFzc05hbWUsXG4gICAgICAgICAgICAgIGN1c3RvbVJvdzogdGhpcy5wcm9wcy50YWJsZVJvdyxcbiAgICAgICAgICAgICAgcGFnZXMgICAgICAgOiAxLFxuICAgICAgICAgICAgICBjdXJyZW50TGlzdCA6ICdBbGwnLFxuICAgICAgICAgICAgICBjdXJyZW50TGlzdE9iamVjdElkIDogJycsXG4gICAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsXG4gICAgICAgICAgICAgIGxpc3RzIDogW10sXG4gICAgICAgICAgICAgIG1hc3RlckNoZWNrYm94Q2hlY2tlZDogZmFsc2UsXG4gICAgICAgICAgICAgIHByb3NwZWN0c1BlclBhZ2U6IDUwLCAgICAgICAgIC8vY2xhc3NOYW1lcyBwZXIgcGFnZVxuICAgICAgICAgICAgICBrZXlib2FyZEFjdGl2ZVByb3NwZWN0OiAwLCAgICAvL2ZpcnN0XG4gICAgICAgICAgICAgIHNlbGVjdGVkUHJvc3BlY3RzOiBbXSwgICAgICAgIC8vc2VsZWN0ZWRDbGFzc05hbWVcbiAgICAgICAgICAgICAgcHJvc3BlY3RzICAgOiBbXSwgICAgICAgICAgICAgLy9jbGFzc05hbWVcbiAgICAgICAgICAgICAgdG90YWxDb3VudCAgOiBcIn5cIiwgXG4gICAgICAgICAgICAgIGNvdW50ICAgICAgIDogXCJ+XCIsIH1cbiAgfSxcblxuICBjcmVhdGVMaXN0OiBmdW5jdGlvbihkYXRhKSB7XG4gICAgbGlzdHMgPSB0aGlzLnN0YXRlLmxpc3RzXG4gICAgbGlzdHMucHVzaChkYXRhKVxuICAgIHRoaXMuc2V0U3RhdGUoeyBsaXN0czogbGlzdHMgfSlcbiAgfSxcblxuICByZW5hbWVMaXN0OiBmdW5jdGlvbihuZXdMaXN0TmFtZSkge1xuICAgIHBhcnNlSGVhZGVycyA9IHtcbiAgICAgICdYLVBhcnNlLUFwcGxpY2F0aW9uLUlkJyAgOiAnTjg1UU9rdGVFRVFrdVpWSktBdnQ4TVZlczBzakc2cU5wRUdxUUZWSicsIFxuICAgICAgJ1gtUGFyc2UtUkVTVC1BUEktS2V5JyAgICA6ICdWTjZFd1Z5Qlp3TzF1cGhzQlBzYXU4dDdKUVJwMDBVTTNLWXNpaVFiJyxcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9XG4gICAgY29uc29sZS5sb2codGhpcy5zdGF0ZS5jdXJyZW50TGlzdE9iamVjdElkKVxuICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUuY3VycmVudExpc3QpXG4gICAgY29uc29sZS5sb2cobmV3TGlzdE5hbWUpXG5cbiAgICAvLyBVcGRhdGUgTG9jYWwgU3RhdGVcbiAgICB0aGlzcyA9IHRoaXM7XG4gICAgdmFyIGZpbHRlcmVkID0gXy5maWx0ZXIodGhpcy5zdGF0ZS5saXN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgaWYoaXRlbS5uYW1lID09IHRoaXNzLnN0YXRlLmN1cnJlbnRMaXN0KXtcbiAgICAgICAgaXRlbS5uYW1lID0gbmV3TGlzdE5hbWVcbiAgICAgICAgcmV0dXJuIGl0ZW1cbiAgICAgIH1cbiAgICAgIHJldHVybiBpdGVtXG4gICAgfSk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHtsaXN0cyA6IGZpbHRlcmVkfSlcbiAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50TGlzdDogbmV3TGlzdE5hbWV9KVxuXG4gICAgJCgnLm1vZGFsJykuY2xpY2soKVxuICAgICQoJyNuZXdMaXN0TmFtZScpLnZhbCgnJylcbiAgICAkKCcubW9kYWwtYmFja2Ryb3AnKS5jbGljaygpXG5cbiAgICAvLyBQZXJzaXN0IC8gQWpheFxuICAgIGxpc3RDbGFzc05hbWUgPSB0aGlzLnN0YXRlLmxpc3RDbGFzc05hbWVcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzLycrbGlzdENsYXNzTmFtZSsnLycrdGhpcy5zdGF0ZS5jdXJyZW50TGlzdE9iamVjdElkLFxuICAgICAgaGVhZGVyczogcGFyc2VIZWFkZXJzLFxuICAgICAgdHlwZTonUFVUJyxcbiAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoeyduYW1lJzpuZXdMaXN0TmFtZX0pLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBkZWxldGVMaXN0OiBmdW5jdGlvbigpIHtcbiAgICAvLyBUT0RPIFxuICAgIC8vIEdldCBBbGwgTWVtYmVycyBPZiBUaGlzIExpc3RcbiAgICAvLyBSZW1vdmUgRnJvbSBMaXN0IEFycmF5XG4gICAgcGFyc2VIZWFkZXJzID0ge1xuICAgICAgJ1gtUGFyc2UtQXBwbGljYXRpb24tSWQnICA6ICdOODVRT2t0ZUVFUWt1WlZKS0F2dDhNVmVzMHNqRzZxTnBFR3FRRlZKJywgXG4gICAgICAnWC1QYXJzZS1SRVNULUFQSS1LZXknICAgIDogJ1ZONkV3VnlCWndPMXVwaHNCUHNhdTh0N0pRUnAwMFVNM0tZc2lpUWInLFxuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgIH1cbiAgICBcbiAgICB2YXIgZmlsdGVyZWQgPSBfLmZpbHRlcih0aGlzLnN0YXRlLmxpc3RzLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICBpZihpdGVtLm9iamVjdElkID09IHRoaXNzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWQpXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9KTtcblxuICAgIHRoaXMuc2V0U3RhdGUoe2xpc3RzOiBmaWx0ZXJlZH0pXG4gICAgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudExpc3Q6ICdBbGwnfSlcbiAgICB0aGlzLmNoYW5nZUxpc3QoJ0FsbCcsICcnKVxuXG4gICAgLy8gUmVtb3ZlXG4gICAgJCgnLm1vZGFsJykuY2xpY2soKVxuICAgICQoJyNuZXdMaXN0TmFtZScpLnZhbCgnJylcbiAgICAkKCcubW9kYWwtYmFja2Ryb3AnKS5jbGljaygpXG5cbiAgICAvLyBQZXJzaXN0IC8gQWpheFxuICAgIGxpc3RDbGFzc05hbWUgPSB0aGlzLnN0YXRlLmxpc3RDbGFzc05hbWVcblxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvJytsaXN0Q2xhc3NOYW1lKycvJyt0aGlzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWQsXG4gICAgICBoZWFkZXJzOiBwYXJzZUhlYWRlcnMsXG4gICAgICB0eXBlOidERUxFVEUnLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBjaGFuZ2VMaXN0OiBmdW5jdGlvbihuZXdMaXN0TmFtZSxvYmplY3RJZCkge1xuICAgIC8vIGFkZCBvdmVybGF5IGxvYWRpbmdcbiAgICAvL2NvbnNvbGUubG9nKG5ld0xpc3ROYW1lKVxuICAgIC8vY29uc29sZS5sb2cob2JqZWN0SWQpXG5cbiAgICBsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnN0cmluZ2lmeShbXSlcblxuICAgIHRoaXMuc2V0U3RhdGUoe2N1cnJlbnRMaXN0IDogbmV3TGlzdE5hbWV9KVxuICAgIHRoaXMuc2V0U3RhdGUoe2N1cnJlbnRMaXN0T2JqZWN0SWQgOiBvYmplY3RJZH0pXG4gICAgdGhpcy5zZXRTdGF0ZSh7cHJvc3BlY3RzICA6IFtdICAgIH0pXG4gICAgdGhpcy5zZXRTdGF0ZSh7Y291bnQgICAgICA6ICd+JyAgIH0pXG4gICAgdGhpcy5zZXRTdGF0ZSh7cGFnZXMgICAgICA6IDEgICAgIH0pXG4gICAgdGhpcy5zZXRTdGF0ZSh7bG9hZGluZyAgICA6IHRydWUgIH0pXG4gICAgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudFBhZ2U6IDF9KVxuICAgIHRoaXMuc2V0U3RhdGUoe2tleWJvYXJkQWN0aXZlUHJvc3BlY3Q6IDB9KVxuXG4gICAgcXJ5ID0gJ3doZXJlPXtcImNvbXBhbnlcIjonK2NvbXBhbnkrJyxcImFyY2hpdmVkXCI6dHJ1ZX0mY291bnQ9MSZvcmRlcj0tY3JlYXRlZEF0J1xuICAgIGNvbnNvbGUubG9nKG5ld0xpc3ROYW1lKVxuXG4gICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50TGlzdCAhPSAnQWxsJyB8fCB0eXBlb2Yob2JqZWN0SWQpICE9IFwidW5kZWZpbmVkXCIgJiYgbmV3TGlzdE5hbWUgIT0gJ0FyY2hpdmVkJyl7XG4gICAgICBjdXJyZW50TGlzdCA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgJ29iamVjdElkJyAgOiBvYmplY3RJZCwgXG4gICAgICAgICdfX3R5cGUnICAgIDogJ1BvaW50ZXInLCBcbiAgICAgICAgJ2NsYXNzTmFtZScgOiB0aGlzLnN0YXRlLmxpc3RDbGFzc05hbWVcbiAgICAgIH0pXG5cbiAgICAgIGNvbXBhbnkgPSBKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikuY29tcGFueSlcbiAgICAgIHFyeSA9ICd3aGVyZT17XCJjb21wYW55XCI6Jytjb21wYW55Kyd9JmNvdW50PTEnXG4gICAgICBxcnkgPSAnd2hlcmU9e1wibGlzdHNcIjonK2N1cnJlbnRMaXN0Kyd9JmNvdW50PTEmb3JkZXI9LWNyZWF0ZWRBdCdcbiAgICB9IGVsc2UgaWYgKG5ld0xpc3ROYW1lID09ICdBcmNoaXZlZCcpIHtcbiAgICAgIHFyeSA9ICd3aGVyZT17XCJjb21wYW55XCI6Jytjb21wYW55KycsXCJhcmNoaXZlZFwiOmZhbHNlfSZjb3VudD0xJm9yZGVyPS1jcmVhdGVkQXQnXG4gICAgfVxuICAgIGNvbnNvbGUubG9nKHFyeSlcblxuICAgIGNsYXNzTmFtZSA9IHRoaXMuc3RhdGUuY2xhc3NOYW1lXG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK2NsYXNzTmFtZSxcbiAgICAgIHR5cGU6J0dFVCcsXG4gICAgICBoZWFkZXJzOiBwYXJzZV9oZWFkZXJzLFxuICAgICAgYXN5bmM6IHRydWUsXG4gICAgICBkYXRhOiBxcnksXG4gICAgICBhamF4U3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnc3RhcnRlZCBsaXN0JylcbiAgICAgIH0sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe3Byb3NwZWN0czogcmVzLnJlc3VsdHN9KVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe2NvdW50OiByZXMuY291bnR9KVxuICAgICAgICAvL3RoaXNzcy5zZXRTdGF0ZSh7dG90YWxDb3VudDogcmVzLmNvdW50fSlcbiAgICAgICAgdGhpc3NzLnNldFN0YXRlKHtwYWdlczogTWF0aC5jZWlsKHJlcy5jb3VudC90aGlzc3MucHJvcHMucHJvc3BlY3RzUGVyUGFnZSl9KVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe2xvYWRpbmc6IGZhbHNlfSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZXJyb3InKVxuICAgICAgICAvL2NvbnNvbGUubG9nKHJlcylcbiAgICAgIH1cbiAgICB9KVxuICB9LFxuXG4gIGNoZWNrYm94QWN0aW9uOiBmdW5jdGlvbihjaGVja2VkU3RhdGUsIG9iaklkKSB7XG4gICAgLyogU3RvcmluZyBDaGVja2VkIFByb3NwZWN0cyBJbiBMb2NhbFN0b3JhZ2UgVG8gTWFrZSBpdCBFYXNpZXIgVG9cbiAgICAgKiBDb3B5IGFuZCBNb3ZlIFByb3NwZWN0cyBcbiAgICAgKlxuICAgICAqIE1vdmUgVG8gVXNlcl9Qcm9zcGVjdHM/XG4gICAgICovXG4gICAgXG4gICAgc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cylcbiAgICAvL2NvbnNvbGUubG9nKGNoZWNrZWRTdGF0ZSlcbiAgICBpZihjaGVja2VkU3RhdGUpXG4gICAgICBzZWxlY3RlZFByb3NwZWN0cy5wdXNoKG9iaklkKVxuICAgIGVsc2VcbiAgICAgIHNlbGVjdGVkUHJvc3BlY3RzID0gXy5yZWplY3Qoc2VsZWN0ZWRQcm9zcGVjdHMsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihpZCl7cmV0dXJuIGlkID09IG9iaklkfSlcblxuICAgIGNvbnNvbGUubG9nKHNlbGVjdGVkUHJvc3BlY3RzKVxuICAgIGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cyA9IEpTT04uc3RyaW5naWZ5KHNlbGVjdGVkUHJvc3BlY3RzKVxuICAgIHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkUHJvc3BlY3RzOiBzZWxlY3RlZFByb3NwZWN0c30pXG4gIH0sXG5cbiAgbWFzdGVyQ2hlY2tib3hDaGFuZ2VkOiBmdW5jdGlvbihtYXN0ZXJDaGVja2JveFZhbHVlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7bWFzdGVyQ2hlY2tib3hDaGVja2VkOiBtYXN0ZXJDaGVja2JveFZhbHVlfSlcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuXG5cbiAgICB0aGlzLnN0YXJ0S2V5Ym9hcmRTaG9ydGN1dHMoKVxuICAgICQoJ2JvZHknKS5jc3Moe292ZXJmbG93OidhdXRvJ30pXG5cbiAgICBwcm9zcGVjdHMgPSBbXVxuICAgIGZvcihpPTA7aTwgdGhpcy5zdGF0ZS5wcm9zcGVjdHMubGVuZ3RoO2krKykge1xuICAgICAgdXJsID0gdGhpcy5zdGF0ZS5wcm9zcGVjdHNbaV0udXJsXG4gICAgICBwcm9zcGVjdCA9IHRoaXMuc3RhdGUucHJvc3BlY3RzW2ldXG5cbiAgICAgIGlmKHVybCAhPSBcIm5vIGxpbmtlZGluIHdlYnNpdGVcIiAmJiB0eXBlb2YodXJsKSAhPSBcInVuZGVmaW5lZFwiICYmIHVybCAhPSBcIlwiKXtcbiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoJ2h0dHA6Ly8nLCcnKVxuICAgICAgICB0aGVfbGluayA9IFJlYWN0LkRPTS5hKHtocmVmOiAnaHR0cDovLycrdXJsfSwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1nbG9iZVwifSkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGVfbGluayA9IFwiXCJcbiAgICAgIH1cblxuICAgICAgcHJvZmlsZSA9IHRoaXMuc3RhdGUucHJvc3BlY3RzW2ldLnByb2ZpbGUucmVwbGFjZSgnaHR0cDovLycsJycpXG4gICAgICBwcm9maWxlID0gdGhpcy5zdGF0ZS5wcm9zcGVjdHNbaV0ucHJvZmlsZS5yZXBsYWNlKCdodHRwczovLycsJycpXG4gICAgICBwcm9maWxlID0gKHR5cGVvZihwcm9maWxlKSAhPSBcInVuZGVmaW5lZFwiKSA/IHByb2ZpbGUgOiBcIlwiXG4gICAgICBsaSA9IFJlYWN0LkRPTS5hKHtocmVmOiBwcm9maWxlLCBjbGFzc05hbWU6IFwibGlua2VkaW5fbGlua1wifSwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1saW5rZWRpbi1zcXVhcmVcIn0pKVxuXG4gICAgICBrZXlib2FyZFNlbGVjdGVkID0gKGkgPT0gdGhpcy5zdGF0ZS5rZXlib2FyZEFjdGl2ZVByb3NwZWN0KVxuXG4gICAgICBzZWxlY3RlZFByb3NwZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzKVxuICAgICAgYWxyZWFkeUNoZWNrZWQ9ZmFsc2VcbiAgICAgIGZvcihpaT0wO2lpPCBzZWxlY3RlZFByb3NwZWN0cy5sZW5ndGg7aWkrKylcbiAgICAgICAgaWYocHJvc3BlY3Qub2JqZWN0SWQgPT0gc2VsZWN0ZWRQcm9zcGVjdHNbaWldKVxuICAgICAgICAgIGFscmVhZHlDaGVja2VkID0gdHJ1ZVxuXG4gICAgICBwcm9zcGVjdHMucHVzaChcbiAgICAgICAgRGF0YVJvdyh7ZGVsZXRlUHJvc3BlY3Q6IHRoaXMuZGVsZXRlUHJvc3BlY3QsIFxuICAgICAgICAgICAgICAgICBwcm9zcGVjdDogdGhpcy5zdGF0ZS5wcm9zcGVjdHNbaV0sIFxuICAgICAgICAgICAgICAgICBtYXN0ZXJDaGVja2JveENoZWNrZWQ6IHRoaXMuc3RhdGUubWFzdGVyQ2hlY2tib3hDaGVja2VkLCBcbiAgICAgICAgICAgICAgICAga2V5OiB0aGlzLmdlbmVyYXRlX2lkKCksIFxuICAgICAgICAgICAgICAgICBsaW5rOiB0aGVfbGluaywgXG4gICAgICAgICAgICAgICAgIGtleWJvYXJkU2VsZWN0ZWQ6IGtleWJvYXJkU2VsZWN0ZWQsIFxuICAgICAgICAgICAgICAgICBjaGVja2JveEFjdGlvbjogdGhpcy5jaGVja2JveEFjdGlvbiwgXG4gICAgICAgICAgICAgICAgIGFscmVhZHlDaGVja2VkOiBhbHJlYWR5Q2hlY2tlZCwgXG4gICAgICAgICAgICAgICAgIGxpOiBsaX0pKVxuICAgIH1cblxuICAgIGxpc3RUeXBlID0gKHRoaXMuc3RhdGUuY3VycmVudExpc3QgPT0gXCJBbGxcIikgPyB7ZGlzcGxheTonbm9uZSd9IDoge2Zsb2F0OidsZWZ0J31cbiAgICBsaXN0TmFtZVN0eWxlID0gKHRoaXMuc3RhdGUuY3VycmVudExpc3QgPT0gXCJBbGxcIikgPyB7ZGlzcGxheTonbm9uZSd9IDoge2Zsb2F0OidsZWZ0JyxkaXNwbGF5OidpbmxpbmUtYmxvY2snLCBmb250V2VpZ2h0OiAyMDAsIG1hcmdpblRvcDogMSwgcGFkZGluZ1JpZ2h0OiAxMCwgbWFyZ2luTGVmdDogLTEwfVxuICAgIGxpc3RCdG4gPSAodGhpcy5zdGF0ZS5jdXJyZW50TGlzdCA9PSBcIkFsbFwiKSA/IHtkaXNwbGF5Oidub25lJ30gOiB7ZmxvYXQ6J2xlZnQnLG1hcmdpbkxlZnQ6NX1cbiAgICBsaXN0T3B0aW9ucyA9ICh0aGlzLnN0YXRlLmN1cnJlbnRMaXN0ID09IFwiQWxsXCIpID8ge2Rpc3BsYXk6J25vbmUnfSA6IHtmbG9hdDoncmlnaHQnfVxuICAgIGNvcHlEcm9wZG93blN0eWxlID0gKHRoaXMuc3RhdGUuY3VycmVudExpc3QgPT0gXCJBbGxcIikgPyB7d2lkdGg6MTE0LCByaWdodDo0fSA6IHt3aWR0aDoxMTQsIHJpZ2h0OjM2fVxuICAgIGN1cnJlbnRMaXN0ID0gdGhpcy5zdGF0ZS5jdXJyZW50TGlzdFxuICAgIHJldHVybiAoXG4gICAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCIsIHN0eWxlOiB7d2lkdGg6JzEwMCUnLHBhZGRpbmc6JzAnLCBiYWNrZ3JvdW5kOiAnbGluZWFyLWdyYWRpZW50KCNkYWU4ZmYsI2RhZThmZiknLCBiYWNrZ3JvdW5kSW1hZ2U6ICdyYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IGNlbnRlciBjZW50ZXIsI2ZmZiwjZGZmMWZkIDkwMHB4KSd9fSwgXG4gICAgICAgIFNpZGVNZW51UHJvc3BlY3RzKHtjdXJyZW50TGlzdDogdGhpcy5zdGF0ZS5jdXJyZW50TGlzdCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogdGhpcy5zdGF0ZS5jb3VudCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbENvdW50OiB0aGlzLnN0YXRlLnRvdGFsQ291bnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTGlzdDogdGhpcy5jaGFuZ2VMaXN0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RDbGFzc05hbWU6IHRoaXMuc3RhdGUubGlzdENsYXNzTmFtZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVMaXN0OiB0aGlzLmNyZWF0ZUxpc3QsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdHM6IHRoaXMuc3RhdGUubGlzdHN9KSwgXG5cbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0xMFwiLCBzdHlsZToge3BhZGRpbmc6JzAnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJwcm9zcGVjdERldGFpbEJ1dHRvbnNcIn0sIFxuICAgICAgICAgICAgICAgIExpc3REZXRhaWxCdXR0b25zKHtcbiAgICAgICAgICAgICAgICAgIHJlbmFtZUxpc3Q6IHRoaXMucmVuYW1lTGlzdCwgXG4gICAgICAgICAgICAgICAgICBkZWxldGVMaXN0OiB0aGlzLmRlbGV0ZUxpc3QsIFxuICAgICAgICAgICAgICAgICAgY3VycmVudExpc3ROYW1lOiB0aGlzLnN0YXRlLmN1cnJlbnRMaXN0LCBcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRMaXN0OiB0aGlzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWR9KSwgXG5cbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZHJvcGRvd25cIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBsaXN0LW9wdGlvbnNcIiwgXG4gICAgICAgICAgICAgICAgICAgICBpZDogXCJcIiwgXG4gICAgICAgICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J25vbmUnfVxuICAgICAgICAgICAgICAgICAgICAgfSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYmFyc1wifSlcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJkcm9wZG93blwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7J2RhdGEtdG9nZ2xlJzogXCJkcm9wZG93blwiLCBcbiAgICAgICAgICAgICAgICAgICAgIGlkOiBcImNvcHlUb0xpc3RcIiwgXG4gICAgICAgICAgICAgICAgICAgICBocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImRyb3AtdGFyZ2V0IGJ0biBidG4tcHJpbWFyeSBidG4teHMgbGlzdC1vcHRpb25zXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY29weVwifSksIFxuICAgICAgICAgICAgICAgICAgICAgICBcIsKgIENvcHkgVG8gTGlzdCDCoFwiLCAgXG4gICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNhcmV0LWRvd25cIn0pXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgQ3VycmVudExpc3RzVHdvKHtsaXN0czogdGhpcy5zdGF0ZS5saXN0cywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5RHJvcGRvd25TdHlsZTogY29weURyb3Bkb3duU3R5bGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEFjdGlvbjogdGhpcy5jb3B5U2VsZWN0ZWRQcm9zcGVjdHN9KVxuICAgICAgICAgICAgICAgICksIFxuICBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZHJvcGRvd25cIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoeydkYXRhLXRvZ2dsZSc6IFwiZHJvcGRvd25cIiwgXG4gICAgICAgICAgICAgICAgICAgICBocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgICAgaWQ6IFwibW92ZVRvTGlzdFwiLCBcbiAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBsaXN0T3B0aW9ucywgXG4gICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBsaXN0LW9wdGlvbnNcIn0sIFxuICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1zaGFyZVwifSksIFxuICAgICAgICAgICAgICAgICAgICAgXCLCoCBNb3ZlIFRvIExpc3QgwqBcIiwgIFxuICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jYXJldC1kb3duXCJ9KVxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIEN1cnJlbnRMaXN0cyh7bGlzdHM6IHRoaXMuc3RhdGUubGlzdHMsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEFjdGlvbjogdGhpcy5tb3ZlU2VsZWN0ZWRQcm9zcGVjdHN9KVxuICAgICAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe29uQ2xpY2s6IHRoaXMuZG93bmxvYWRGaWxlLCBcbiAgICAgICAgICAgICAgICAgICBocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgIGlkOiBcImRvd25sb2FkUHJvc3BlY3RzXCIsIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJkcm9wLXRhcmdldCBidG4gYnRuLXByaW1hcnkgYnRuLXhzIGxpc3Qtb3B0aW9uc1wifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWRvd25sb2FkXCJ9KSwgXCIgwqAgRG93bmxvYWQgQ1NWIMKgXCIgXG4gICAgICAgICAgICAgICAgKSwgXG5cbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7b25DbGljazogdGhpcy5sYXVuY2hQcm9zcGVjdExpc3RGcm9tQ29tcGFueUxpc3RNb2RhbCwgXG4gICAgICAgICAgICAgICAgICAgc3R5bGU6IGxpc3RPcHRpb25zLCBcbiAgICAgICAgICAgICAgICAgICBocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgIGlkOiBcImRvd25sb2FkUHJvc3BlY3RzXCIsIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJkcm9wLXRhcmdldCBidG4gYnRuLXByaW1hcnkgYnRuLXhzIGxpc3Qtb3B0aW9uc1wifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNsb3VkLWRvd25sb2FkXCJ9KSwgXCIgwqAgRmluZCBQcm9zcGVjdHMgIMKgXCIgXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgXG5cbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJhdXRvc2Nyb2xsXCIsIHN0eWxlOiB7aGVpZ2h0Oic0MDBweCcsb3ZlcmZsb3c6J2F1dG8nfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRhYmxlKHtjbGFzc05hbWU6IFwicHJvc3BlY3RzLXRhYmxlIHRhYmxlIHRhYmxlLXN0cmlwZWRcIiwgc3R5bGU6IHttYXJnaW5Cb3R0b206JzBweCd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50aGVhZCh7c3R5bGU6IHtiYWNrZ3JvdW5kQ29sb3I6J3doaXRlJ319LCBcbiAgICAgICAgICAgICAgICBDb21wYW55UHJvc3BlY3RIZWFkZXIoe21hc3RlckNoZWNrYm94Q2hhbmdlZDogdGhpcy5tYXN0ZXJDaGVja2JveENoYW5nZWR9KVxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnRib2R5KG51bGwsIFxuICAgICAgICAgICAgICAgIHByb3NwZWN0c1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgICh0aGlzLnN0YXRlLmxvYWRpbmcpID8gTG9hZGluZ1NwaW5uZXIobnVsbCkgOiBcIlwiXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApLCBcblxuICAgICAgUGFuZWxGb290aW5nKHtjdXJyZW50UGFnZTogdGhpcy5zdGF0ZS5jdXJyZW50UGFnZSwgXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiB0aGlzLnN0YXRlLmNvdW50LCBcbiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGU6IHRoaXMucGFnaW5hdGUsIFxuICAgICAgICAgICAgICAgICAgICBwcm9zcGVjdHNQZXJQYWdlOiB0aGlzLnN0YXRlLnByb3NwZWN0c1BlclBhZ2UsIFxuICAgICAgICAgICAgICAgICAgICBwYWdlczogdGhpcy5zdGF0ZS5wYWdlc30pLCBcbiAgICAgIE1lc3NlbmdlcihudWxsKSwgXG4gICAgICBDcmVhdGVQcm9zcGVjdExpc3RGcm9tQ29tcGFueUxpc3RNb2RhbCh7Y3VycmVudExpc3Q6IHRoaXMuc3RhdGUuY3VycmVudExpc3QsIGN1cnJlbnRMaXN0T2JqZWN0SWQ6IHRoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZH0pXG4gICAgKVxuICAgICk7XG4gIH0sXG5cbiAgcGFnaW5hdGU6IGZ1bmN0aW9uKG5ld1Byb3NwZWN0cywgbmV3UGFnZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgcHJvc3BlY3RzOiBuZXdQcm9zcGVjdHMsXG4gICAgICBjdXJyZW50UGFnZTogbmV3UGFnZSxcbiAgICAgIGtleWJvYXJkQWN0aXZlUHJvc3BlY3Q6IDBcbiAgICB9KVxuICAgIHRoaXMuc3RhcnRLZXlib2FyZFNob3J0Y3V0cygpXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dG9zY3JvbGwnKS5zY3JvbGxUb3AgPSAwXG4gIH0sXG5cbiAgbGF1bmNoUHJvc3BlY3RMaXN0RnJvbUNvbXBhbnlMaXN0TW9kYWw6IGZ1bmN0aW9uKCkge1xuICAgIFxuICAgICQoJyNjcmVhdGVQcm9zcGVjdExpc3RGcm9tQ29tcGFueUxpc3RNb2RhbCcpLm1vZGFsKClcbiAgfSxcblxuICBkb3dubG9hZEZpbGU6IGZ1bmN0aW9uKCkge1xuICAgIHBhcnNlX2hlYWRlcnMgPSB7XG4gICAgICAnWC1QYXJzZS1BcHBsaWNhdGlvbi1JZCcgIDogJ044NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkonLCBcbiAgICAgICdYLVBhcnNlLVJFU1QtQVBJLUtleScgICAgOiAnVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYicsXG4gICAgfVxuXG4gICAgLy8gR2V0IExpc3QgQ291bnRcbiAgICBsaXN0ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgJ19fdHlwZScgICA6ICAnUG9pbnRlcicsXG4gICAgICAnY2xhc3NOYW1lJzogIHRoaXMuc3RhdGUubGlzdENsYXNzTmFtZSxcbiAgICAgICdvYmplY3RJZCcgOiAgdGhpcy5zdGF0ZS5jdXJyZW50TGlzdE9iamVjdElkXG4gICAgfSlcbiAgICBjb25zb2xlLmxvZyhsaXN0KVxuICAgIC8vIEFkZCBTdXBwb3J0IEZvciBNb3JlIHRoYW4gMTAwMFxuICAgIC8vIG51bV9vZl9yZXF1ZXN0c1xuICAgIC8vdGhpcy5wcm9wcy5wYWdpbmF0ZShyZXMucmVzdWx0cywgdGhpcy5wcm9wcy5jdXJyZW50UGFnZSArIDEpXG4gICAgbG9jYWxTdG9yYWdlLmRvd25sb2FkX3RvdGFsID0gTWF0aC5jZWlsKHRoaXMuc3RhdGUuY291bnQvMTAwMClcbiAgICBsb2NhbFN0b3JhZ2UuZG93bmxvYWRzICAgICAgPSAwXG5cbiAgICBpZih0aGlzLnN0YXRlLmN1cnJlbnRMaXN0ID09IFwiQWxsXCIpXG4gICAgICBxcnkgPSAnd2hlcmU9e1wiY29tcGFueVwiOicrY29tcGFueSsnfSZjb3VudD0xJ1xuICAgIGVsc2VcbiAgICAgIHFyeSA9ICd3aGVyZT17XCJsaXN0c1wiOicrbGlzdCsnfSZjb3VudD0xJ1xuXG4gICAgY2xhc3NOYW1lID0gdGhpcy5zdGF0ZS5jbGFzc05hbWVcblxuICAgIGZvcihpPTA7aTwgTWF0aC5jZWlsKHRoaXMuc3RhdGUuY291bnQvMTAwMCk7IGkrKyl7XG4gICAgICAkLmFqYXgoe1xuICAgICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzLycrY2xhc3NOYW1lKyc/bGltaXQ9MTAwMCZza2lwPScraSxcbiAgICAgICAgdHlwZTonR0VUJyxcbiAgICAgICAgaGVhZGVyczogcGFyc2VfaGVhZGVycyxcbiAgICAgICAgZG93bmxvYWRGaWxlOiAnZG93bmxvYWRfJytpLFxuICAgICAgICBkYXRhOiBxcnksXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgICAgLy8gQ2xlYW4gUmVzdWx0c1xuICAgICAgICAgIC8vIFJlbW92ZSBDZXJ0YWluIFBhcnNlIENvbHVtbnMgLSBjcmVhdGVkX2F0LCB1cGRhdGVkX2F0LCBvYmplY3RJZFxuICAgICAgICAgIC8vIFJlbmFtZSBjcmVhdGVkQXQgYXMgZGF0ZSBwcm9zcGVjdGVkXG4gICAgICAgICAgZm9yKGk9MDtpPCByZXMucmVzdWx0cy5sZW5ndGg7aSsrKSB7XG4gICAgICAgICAgICBkZWxldGUgcmVzLnJlc3VsdHNbaV0uY29tcGFueVxuICAgICAgICAgICAgZGVsZXRlIHJlcy5yZXN1bHRzW2ldLnBvc1xuICAgICAgICAgICAgZGVsZXRlIHJlcy5yZXN1bHRzW2ldLnVzZXJcbiAgICAgICAgICAgIGRlbGV0ZSByZXMucmVzdWx0c1tpXS5vYmplY3RJZFxuICAgICAgICAgICAgZGVsZXRlIHJlcy5yZXN1bHRzW2ldLmNyZWF0ZWRBdFxuICAgICAgICAgICAgZGVsZXRlIHJlcy5yZXN1bHRzW2ldLnVwZGF0ZWRBdFxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEFkZCBSZXN1bHRzIFRvIExvY2FsU3RvcmFnZVxuICAgICAgICAgIGxvY2FsU3RvcmFnZS5kb3dubG9hZHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5kb3dubG9hZHMpICsgMSBcbiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLmRvd25sb2FkRmlsZSwgSlNPTi5zdHJpbmdpZnkocmVzLnJlc3VsdHMpKVxuXG4gICAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIGFsbCBhamF4IHJlcXMgaW4gZm9yIGxvb3AgYXJlIGNvbXBsZXRlXG4gICAgICAgICAgaWYobG9jYWxTdG9yYWdlLmRvd25sb2FkcyA9PSBsb2NhbFN0b3JhZ2UuZG93bmxvYWRfdG90YWwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtYXRjaGVkJylcbiAgICAgICAgICAgIC8vIE1lcmdlIGFsbCBsb2NhbFN0b3JhZ2UgcmVzdWx0c1xuICAgICAgICAgICAgcHJvc3BlY3RzID0gW11cbiAgICAgICAgICAgIGZvcihpaT0wO2lpIDwgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZG93bmxvYWRfdG90YWwpOyBpaSsrKXtcbiAgICAgICAgICAgICAgcHJvc3BlY3RzID0gcHJvc3BlY3RzLmNvbmNhdChKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkb3dubG9hZF8nK2lpKSkpXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb3NwZWN0cylcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc29sZS5sb2cocHJvc3BlY3RzKVxuICAgICAgICAgICAgLy8gT3V0cHV0IGFzIENTVlxuICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbUGFwYS51bnBhcnNlKHByb3NwZWN0cyldLCB7dHlwZTogXCJ0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLThcIn0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYmxvYilcbiAgICAgICAgICAgIHNhdmVBcyhibG9iLCBcInByb3NwZWN0cy5jc3ZcIik7XG4gICAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb21wYW55ID0gSlNPTi5zdHJpbmdpZnkoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLmNvbXBhbnkpXG4gICAgXG5cbiAgfSxcblxuICByZW1vdmVTZWxlY3RlZFByb3NwZWN0czogZnVuY3Rpb24oKSB7XG4gICAgLy8gSWYgTGlzdCBUeXBlIGlzIEFsbCBBcmNoaXZlIHRoZSBwcm9zcGVjdFxuICAgIHBhcnNlSGVhZGVycyA9IHtcbiAgICAgICdYLVBhcnNlLUFwcGxpY2F0aW9uLUlkJyAgOiAnTjg1UU9rdGVFRVFrdVpWSktBdnQ4TVZlczBzakc2cU5wRUdxUUZWSicsIFxuICAgICAgJ1gtUGFyc2UtUkVTVC1BUEktS2V5JyAgICA6ICdWTjZFd1Z5Qlp3TzF1cGhzQlBzYXU4dDdKUVJwMDBVTTNLWXNpaVFiJyxcbiAgICAgIFwiQ29udGVudC1UeXBlXCIgOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH1cblxuICAgIHNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMpXG4gICAgYmF0Y2hEYXRhID0gW11cblxuICAgIGZvcihpPTA7aTwgc2VsZWN0ZWRQcm9zcGVjdHMubGVuZ3RoO2krKyl7XG4gICAgICBpZih0aGlzLnN0YXRlLmN1cnJlbnRMaXN0ICE9ICdBbGwnKXtcbiAgICAgICAgdG1wID0ge1xuICAgICAgICAgIG1ldGhvZDonUFVUJyxcbiAgICAgICAgICBwYXRoOicvMS9jbGFzc2VzLycrdGhpcy5zdGF0ZS5jbGFzc05hbWUrJy8nK3NlbGVjdGVkUHJvc3BlY3RzW2ldLFxuICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgIGxpc3RzOiB7XG4gICAgICAgICAgICAgICdfX29wJyAgICA6ICdSZW1vdmUnLFxuICAgICAgICAgICAgICBcIm9iamVjdHNcIiA6IFt7IFxuICAgICAgICAgICAgICAgICAgJ19fdHlwZSc6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgJ2NsYXNzTmFtZSc6dGhpcy5zdGF0ZS5saXN0Q2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICAgJ29iamVjdElkJzp0aGlzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWRcbiAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1lbHNle1xuICAgICAgICB0bXAgPSB7XG4gICAgICAgICAgbWV0aG9kOidQVVQnLFxuICAgICAgICAgIHBhdGg6Jy8xL2NsYXNzZXMvJyt0aGlzLnN0YXRlLmNsYXNzTmFtZSsnLycrc2VsZWN0ZWRQcm9zcGVjdHNbaV0sXG4gICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgYXJjaGl2ZWQ6ZmFsc2UsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBiYXRjaERhdGEucHVzaCh0bXApXG4gICAgfVxuXG4gICAgdGhpc3MgPSB0aGlzO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2JhdGNoJyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczpwYXJzZUhlYWRlcnMsXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7cmVxdWVzdHM6IGJhdGNoRGF0YX0pLFxuICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICBsaXN0cyA9IHRoaXNzLnN0YXRlLmxpc3RzXG5cbiAgICAgICAgZm9yKGk9MDtpPCBsaXN0cy5sZW5ndGg7IGkrKykgeyBcbiAgICAgICAgICAvLyBTdWJ0cmFjdCBGcm9tIE9sZCBMaXN0IC0gTm90IFdvcmtpbmcgRm9yIEFyY2hpdmVcbiAgICAgICAgICBpZihsaXN0c1tpXS5vYmplY3RJZCA9PSB0aGlzcy5zdGF0ZS5jdXJyZW50TGlzdE9iamVjdElkKVxuICAgICAgICAgICAgbGlzdHNbaV0uY291bnQgPSBwYXJzZUludChsaXN0c1tpXS5jb3VudCkgLSBwYXJzZUludChzZWxlY3RlZFByb3NwZWN0cy5sZW5ndGgpXG4gICAgICAgIH1cbiAgICAgICAgLy8gVXBkYXRlIGxvY2FsIGxpc3QgY291bnRcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2xpc3RzOiBsaXN0c30pXG5cbiAgICAgICAgLy8gcmVtb3ZlIGZyb20gY3VycmVudCBsaXN0IHVpXG4gICAgICAgIHNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMpXG4gICAgICAgIGNvbnNvbGUubG9nKCdyZW1vdmUgc2VsZWN0ZWQgcHJvc3BlY3RzJylcbiAgICAgICAgY29uc29sZS5sb2coc2VsZWN0ZWRQcm9zcGVjdHMpXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXNzLnN0YXRlLnByb3NwZWN0cylcbiAgICAgICAgdmFyIGZpbHRlcmVkID0gXy5maWx0ZXIodGhpc3Muc3RhdGUucHJvc3BlY3RzLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgZm9yKGk9MDtpPCBzZWxlY3RlZFByb3NwZWN0cy5sZW5ndGg7aSsrKSBcbiAgICAgICAgICAgIGlmKGl0ZW0ub2JqZWN0SWQgPT0gc2VsZWN0ZWRQcm9zcGVjdHNbaV0pXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZyhmaWx0ZXJlZClcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe3Byb3NwZWN0czogZmlsdGVyZWR9KVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnN0cmluZ2lmeShbXSlcblxuICAgICAgICAvLyBhZGQgYWxlcnQgdG8gaW5mb3JtIHVzZXJcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBtb3ZlU2VsZWN0ZWRQcm9zcGVjdHM6IGZ1bmN0aW9uKGxpc3RPYmplY3RJZCkge1xuICAgIHBhcnNlSGVhZGVycyA9IHtcbiAgICAgICdYLVBhcnNlLUFwcGxpY2F0aW9uLUlkJyAgOiAnTjg1UU9rdGVFRVFrdVpWSktBdnQ4TVZlczBzakc2cU5wRUdxUUZWSicsIFxuICAgICAgJ1gtUGFyc2UtUkVTVC1BUEktS2V5JyAgICA6ICdWTjZFd1Z5Qlp3TzF1cGhzQlBzYXU4dDdKUVJwMDBVTTNLWXNpaVFiJyxcbiAgICAgIFwiQ29udGVudC1UeXBlXCIgOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH1cblxuICAgIC8vIGdldCB0aGUgc2VsZWN0ZWQgb2JqZWN0SWQgZnJvbSBzZWxlY3RlZFByb3NwZWN0cyBzdGF0ZVxuICAgIHNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMpXG4gICAgYmF0Y2hEYXRhID0gW11cblxuXG4gICAgLy8gQmF0Y2ggVXBkYXRlIFBhcnNlXG4gICAgLy8gLSBSZW1vdmUgQWxsIFNlbGVjdGVkIFByb3NwZWN0cyBGcm9tIEN1cnJlbnQgTGlzdFxuICAgIGZvcihpPTA7aTwgc2VsZWN0ZWRQcm9zcGVjdHMubGVuZ3RoO2krKyl7XG4gICAgICB0bXAgPSB7XG4gICAgICAgIG1ldGhvZDonUFVUJyxcbiAgICAgICAgcGF0aDonLzEvY2xhc3Nlcy8nK3RoaXMuc3RhdGUuY2xhc3NOYW1lKycvJytzZWxlY3RlZFByb3NwZWN0c1tpXSxcbiAgICAgICAgYm9keToge1xuICAgICAgICAgIGxpc3RzOiB7XG4gICAgICAgICAgICAnX19vcCcgICAgOiAnUmVtb3ZlJyxcbiAgICAgICAgICAgIFwib2JqZWN0c1wiIDogW3sgXG4gICAgICAgICAgICAgICAgJ19fdHlwZSc6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICdjbGFzc05hbWUnOnRoaXMuc3RhdGUubGlzdENsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAnb2JqZWN0SWQnOnRoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZFxuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJhdGNoRGF0YS5wdXNoKHRtcClcbiAgICB9XG4gICAgXG4gICAgLy8gLSBBZGQgT3RoZXIgTGlzdCBcbiAgICBmb3IoaT0wO2k8IHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aDtpKyspe1xuICAgICAgdG1wID0ge1xuICAgICAgICBtZXRob2Q6J1BVVCcsXG4gICAgICAgIHBhdGg6Jy8xL2NsYXNzZXMvJyt0aGlzLnN0YXRlLmNsYXNzTmFtZSsnLycrc2VsZWN0ZWRQcm9zcGVjdHNbaV0sXG4gICAgICAgIGJvZHk6IHtcbiAgICAgICAgICBsaXN0czoge1xuICAgICAgICAgICAgJ19fb3AnICAgIDogJ0FkZFVuaXF1ZScsXG4gICAgICAgICAgICBcIm9iamVjdHNcIiA6IFt7IFxuICAgICAgICAgICAgICAgICdfX3R5cGUnOidQb2ludGVyJyxcbiAgICAgICAgICAgICAgICAnY2xhc3NOYW1lJzp0aGlzLnN0YXRlLmxpc3RDbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgJ29iamVjdElkJzpsaXN0T2JqZWN0SWRcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBiYXRjaERhdGEucHVzaCh0bXApXG4gICAgfVxuXG4gICAgdGhpc3MgPSB0aGlzO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2JhdGNoJyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczpwYXJzZUhlYWRlcnMsXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7cmVxdWVzdHM6IGJhdGNoRGF0YX0pLFxuICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICBsaXN0cyA9IHRoaXNzLnN0YXRlLmxpc3RzXG5cbiAgICAgICAgZm9yKGk9MDtpPCBsaXN0cy5sZW5ndGg7IGkrKykgeyBcbiAgICAgICAgICAvLyBBZGQgVG8gTmV3IExpc3RcbiAgICAgICAgICBpZihsaXN0c1tpXS5vYmplY3RJZCA9PSBsaXN0T2JqZWN0SWQpXG4gICAgICAgICAgICBsaXN0c1tpXS5jb3VudCA9IHBhcnNlSW50KGxpc3RzW2ldLmNvdW50KSArIHBhcnNlSW50KHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aClcbiAgICAgICAgICAvLyBTdWJ0cmFjdCBGcm9tIE9sZCBMaXN0XG4gICAgICAgICAgaWYobGlzdHNbaV0ub2JqZWN0SWQgPT0gdGhpc3Muc3RhdGUuY3VycmVudExpc3RPYmplY3RJZClcbiAgICAgICAgICAgIGxpc3RzW2ldLmNvdW50ID0gcGFyc2VJbnQobGlzdHNbaV0uY291bnQpIC0gcGFyc2VJbnQoc2VsZWN0ZWRQcm9zcGVjdHMubGVuZ3RoKVxuICAgICAgICB9XG4gICAgICAgIC8vIFVwZGF0ZSBsb2NhbCBsaXN0IGNvdW50XG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtsaXN0czogbGlzdHN9KVxuXG4gICAgICAgIC8vIHJlbW92ZSBmcm9tIGN1cnJlbnQgbGlzdCB1aVxuICAgICAgICBjb25zb2xlLmxvZygnc2VsZWN0ZWRQcm9zcGVjdHMnKVxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzcy5zdGF0ZS5wcm9zcGVjdHMpXG4gICAgICAgIHZhciBmaWx0ZXJlZCA9IF8uZmlsdGVyKHRoaXNzLnN0YXRlLnByb3NwZWN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgIGlzX3NlbGVjdGVkID0gdHJ1ZVxuICAgICAgICAgIGZvcihpPTA7aTwgc2VsZWN0ZWRQcm9zcGVjdHMubGVuZ3RoO2krKykgXG4gICAgICAgICAgICBpZihpdGVtLm9iamVjdElkID09IHNlbGVjdGVkUHJvc3BlY3RzW2ldKVxuICAgICAgICAgICAgICBpc19zZWxlY3RlZCA9IGZhbHNlXG4gICAgICAgICAgcmV0dXJuIGlzX3NlbGVjdGVkXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZyhmaWx0ZXJlZClcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe3Byb3NwZWN0czogZmlsdGVyZWR9KVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnN0cmluZ2lmeShbXSlcblxuICAgICAgICAvLyBhZGQgYWxlcnQgdG8gaW5mb3JtIHVzZXJcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBjb3B5U2VsZWN0ZWRQcm9zcGVjdHM6IGZ1bmN0aW9uKGxpc3RPYmplY3RJZCkge1xuICAgIGNvbnNvbGUubG9nKGxpc3RPYmplY3RJZClcbiAgICBcbiAgICAvLyBtYWtlIGJhdGNoIGFqYXggcmVxdWVzdCB0byBwYXJzZVxuICAgIHBhcnNlSGVhZGVycyA9IHtcbiAgICAgICdYLVBhcnNlLUFwcGxpY2F0aW9uLUlkJyAgOiAnTjg1UU9rdGVFRVFrdVpWSktBdnQ4TVZlczBzakc2cU5wRUdxUUZWSicsIFxuICAgICAgJ1gtUGFyc2UtUkVTVC1BUEktS2V5JyAgICA6ICdWTjZFd1Z5Qlp3TzF1cGhzQlBzYXU4dDdKUVJwMDBVTTNLWXNpaVFiJyxcbiAgICAgIFwiQ29udGVudC1UeXBlXCIgOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH1cblxuICAgIC8vIEFkZCBMb2FkaW5nIFNpZ24gVG8gTGlzdFxuXG4gICAgc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cylcbiAgICBiYXRjaERhdGEgPSBbXVxuICAgIGZvcihpPTA7aTwgc2VsZWN0ZWRQcm9zcGVjdHMubGVuZ3RoO2krKyl7XG4gICAgICB0bXAgPSB7XG4gICAgICAgIG1ldGhvZDonUFVUJyxcbiAgICAgICAgcGF0aDonLzEvY2xhc3Nlcy8nK3RoaXMuc3RhdGUuY2xhc3NOYW1lKycvJytzZWxlY3RlZFByb3NwZWN0c1tpXSxcbiAgICAgICAgYm9keToge1xuICAgICAgICAgIGxpc3RzOiB7XG4gICAgICAgICAgICAnX19vcCcgICAgOiAnQWRkVW5pcXVlJyxcbiAgICAgICAgICAgIFwib2JqZWN0c1wiIDogW3sgXG4gICAgICAgICAgICAgICAgJ19fdHlwZSc6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICdjbGFzc05hbWUnOnRoaXMuc3RhdGUubGlzdENsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAnb2JqZWN0SWQnOmxpc3RPYmplY3RJZFxuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJhdGNoRGF0YS5wdXNoKHRtcClcbiAgICB9XG5cbiAgICB0aGlzcyA9IHRoaXM7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvYmF0Y2gnLFxuICAgICAgdHlwZTonUE9TVCcsXG4gICAgICBoZWFkZXJzOnBhcnNlSGVhZGVycyxcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtyZXF1ZXN0czogYmF0Y2hEYXRhfSksXG4gICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIC8vIFVwZGF0ZSBXaXRoIHRoZSBudW1iZXIgb2Ygc3VjY2Vzc2VzXG4gICAgICAgIC8vIFVwZGF0ZSBsb2NhbCBsaXN0IGNvdW50XG4gICAgICAgIGxpc3RzID0gdGhpc3Muc3RhdGUubGlzdHNcbiAgICAgICAgZm9yKGk9MDtpPCBsaXN0cy5sZW5ndGg7IGkrKykgeyBcbiAgICAgICAgICBpZihsaXN0c1tpXS5vYmplY3RJZCA9PSBsaXN0T2JqZWN0SWQpXG4gICAgICAgICAgICBsaXN0c1tpXS5jb3VudCA9IHBhcnNlSW50KGxpc3RzW2ldLmNvdW50KSArIHBhcnNlSW50KHJlcy5sZW5ndGgpXG4gICAgICAgIH1cbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2xpc3RzOiBsaXN0c30pXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cyA9IFwiW11cIlxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7c2VsZWN0ZWRQcm9zcGVjdHMgOiBbXSB9KVxuICAgICAgICBcbiAgICAgICAgLy8gYWRkIGFsZXJ0IHRvIGluZm9ybSB1c2VyXG4gICAgICAgIC8vIFVuc2VsZWN0IGFsbCBzZWxlY3RlZFxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuXG4gIH0sXG5cbiAgaGlkZUFsZXJ0OiBmdW5jdGlvbigpIHtcbiAgICAkKCcuYWxlcnQnKS5oaWRlKClcbiAgfSxcblxuICBhZGp1c3RIZWlnaHQ6IGZ1bmN0aW9uKHdoaWNoT25lKSB7XG4gICAgcHJvc3BlY3RXaW5kb3dUb3AgPSAkKCcjcHJvc3BlY3REZXRhaWxCdXR0b25zJykucG9zaXRpb24oKS50b3BcbiAgICBwcm9zcGVjdFdpbmRvd1RvcCA9IHByb3NwZWN0V2luZG93VG9wICsgJCgnI3Byb3NwZWN0RGV0YWlsQnV0dG9ucycpLmhlaWdodCgpXG4gICAgcHJvc3BlY3RXaW5kb3dCb3R0b20gPSAkKCcjYXV0b3Njcm9sbCcpLnBvc2l0aW9uKCkudG9wICsgJCgnI2F1dG9zY3JvbGwnKS5oZWlnaHQoKVxuXG4gICAgaWYod2hpY2hPbmUgPT0gJ2onKVxuICAgICAgYWN0aXZlUHJvc3BlY3QgPSB0aGlzLnN0YXRlLmtleWJvYXJkQWN0aXZlUHJvc3BlY3QgKzEgXG4gICAgZWxzZVxuICAgICAgYWN0aXZlUHJvc3BlY3QgPSB0aGlzLnN0YXRlLmtleWJvYXJkQWN0aXZlUHJvc3BlY3QgLTEgXG5cbiAgICBhY3RpdmVUb3AgPSAkKCQoJy5wcm9zcGVjdHMtdHInKVthY3RpdmVQcm9zcGVjdF0pLnBvc2l0aW9uKCkudG9wXG4gICAgc2VsZWN0ZWRIZWlnaHQgPSAkKCQoJy5wcm9zcGVjdHMtdHInKVthY3RpdmVQcm9zcGVjdF0pLmhlaWdodCgpXG4gICAgYWN0aXZlQm90dG9tID0gJCgkKCcucHJvc3BlY3RzLXRyJylbYWN0aXZlUHJvc3BlY3RdKS5wb3NpdGlvbigpLnRvcCtzZWxlY3RlZEhlaWdodFxuXG4gICAgY29uc29sZS5sb2cocHJvc3BlY3RXaW5kb3dUb3AsIHByb3NwZWN0V2luZG93Qm90dG9tKVxuICAgIGNvbnNvbGUubG9nKGFjdGl2ZVRvcCwgYWN0aXZlQm90dG9tKVxuXG4gICAgc2Nyb2xsVG9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dG9zY3JvbGwnKS5zY3JvbGxUb3BcbiAgICBpZihhY3RpdmVCb3R0b20gPiBwcm9zcGVjdFdpbmRvd0JvdHRvbSlcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvc2Nyb2xsJykuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wICsgYWN0aXZlQm90dG9tIC0gcHJvc3BlY3RXaW5kb3dCb3R0b21cblxuICAgIGlmKGFjdGl2ZVRvcCA8IDApXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0b3Njcm9sbCcpLnNjcm9sbFRvcCA9IHNjcm9sbFRvcCArIGFjdGl2ZVRvcCAtIDM3XG4gICAgZWxzZSBpZihhY3RpdmVUb3AgPT0gJCgkKCcucHJvc3BlY3RzLXRyJylbMF0pLnBvc2l0aW9uKCkudG9wKVxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dG9zY3JvbGwnKS5zY3JvbGxUb3AgPSAwXG4gICAgICBcbiAgICAvLyBHZXQgUG9zdGlvbiBvZiBUb3BcbiAgICAvLyBHZXQgUG9zaXRpb24gb2YgQm90dG9tIFxuICAgIC8vIEdldCBQb3NpdGlvbiBvZiBDdXJyZW50IFNlbGVjdGVkXG4gICAgLy8gQWRqdXN0IGJ5IHNjcm9sbGluZyBkb3duIG9yIHVwXG4gIH0sXG5cbiAgc3RhcnRLZXlib2FyZFNob3J0Y3V0czogZnVuY3Rpb24oKSB7XG4gICAgLyogS2V5Ym9hcmQgU2hvcnRjdXRzICovXG4gICAgTW91c2V0cmFwLnJlc2V0KClcbiAgICAvL01vdXNldHJhcC51bmJpbmQoWydqJywnaycsJ28nXSlcbiAgICB0aGlzcyA9IHRoaXM7XG5cbiAgICAvKiBQcm9zcGVjdCBUYWJsZSBTaG9ydGN1dHMgKi9cbiAgICBNb3VzZXRyYXAuYmluZCgnaicsIGZ1bmN0aW9uKCkgeyBcbiAgICAgIGtleWJvYXJkID0gdGhpc3Muc3RhdGUua2V5Ym9hcmRBY3RpdmVQcm9zcGVjdFxuICAgICAgaWYoa2V5Ym9hcmQgIT0gdGhpc3Muc3RhdGUucHJvc3BlY3RzUGVyUGFnZSsxKVxuICAgICAgICB0aGlzcy5hZGp1c3RIZWlnaHQoJ2onKVxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7a2V5Ym9hcmRBY3RpdmVQcm9zcGVjdDoga2V5Ym9hcmQrMX0pXG4gICAgfSk7XG5cbiAgICBNb3VzZXRyYXAuYmluZCgnaycsIGZ1bmN0aW9uKCkgeyBcbiAgICAgIGtleWJvYXJkID0gdGhpc3Muc3RhdGUua2V5Ym9hcmRBY3RpdmVQcm9zcGVjdFxuICAgICAgaWYoa2V5Ym9hcmQgIT0gMSlcbiAgICAgICAgdGhpc3MuYWRqdXN0SGVpZ2h0KCdrJylcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2tleWJvYXJkQWN0aXZlUHJvc3BlY3Q6IGtleWJvYXJkLTF9KVxuICAgIH0pO1xuXG5cbiAgICBNb3VzZXRyYXAuYmluZCgnbycsIGZ1bmN0aW9uKCkgeyBcbiAgICAgIGNvbnNvbGUubG9nKCdvcGVuIGN1cnJlbnQgcHJvc3BlY3QnKVxuICAgICAgY29uc29sZS5sb2coJCgkKCcua2V5U2VsZWN0JykuZmluZCgnYS5saW5rZWRpbl9saW5rJylbMF0pLmF0dHIoJ2hyZWYnKSlcbiAgICAgIGxpbmsgPSAkKCQoJy5rZXlTZWxlY3QnKS5maW5kKCdhLmxpbmtlZGluX2xpbmsnKVswXSkuYXR0cignaHJlZicpXG4gICAgICAvKlxuICAgICAgd2luZG93Lm9wZW4obGluaywgJ19ibGFuaycpXG4gICAgICBjb25zb2xlLmxvZygnbmV3JylcbiAgICAgICovXG4gICAgICAvL3BvcHVwV2luZG93LmJsdXIoKTtcbiAgICAgIC8vd2luZG93LmZvY3VzKCk7XG4gICAgICAvLyBrZXlib2FyZCA9IHRoaXNzLnN0YXRlLmtleWJvYXJkQWN0aXZlUHJvc3BlY3RcbiAgICAgIFxuICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgIGEuaHJlZiA9IGxpbmtcbiAgICAgIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIk1vdXNlRXZlbnRzXCIpO1xuICAgICAgLy90aGUgdGVudGggcGFyYW1ldGVyIG9mIGluaXRNb3VzZUV2ZW50IHNldHMgY3RybCBrZXlcbiAgICAgIC8vIEZvciBNYWMgVGhpcyBXb3JrcyBDaGVjayBGb3IgLSBXaW5kb3dzXG4gICAgICBldnQuaW5pdE1vdXNlRXZlbnQoXCJjbGlja1wiLCB0cnVlLCB0cnVlLCB3aW5kb3csIDAsIDAsIDAsIDAsIDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2UsIGZhbHNlLCBmYWxzZSwgdHJ1ZSwgMCwgbnVsbCk7XG4gICAgICBhLmRpc3BhdGNoRXZlbnQoZXZ0KTtcbiAgICB9KTtcblxuXG5cbiAgICAvKiBMaXN0IE1vZGlmaWNhdGlvbiBTaG9ydGN1dHMgKi9cbiAgICBNb3VzZXRyYXAuYmluZCgndGFiK3InLCBmdW5jdGlvbigpe1xuICAgICAgLy9jb25zb2xlLmxvZygncmVsb2FkJylcbiAgICAgICQoJyNyZW5hbWVMaXN0QnRuJykuY2xpY2soKVxuICAgIH0pXG5cbiAgICBNb3VzZXRyYXAuYmluZCgndGFiK2QnLCBmdW5jdGlvbigpe1xuICAgICAgLy9jb25zb2xlLmxvZygncmVsb2FkJylcbiAgICAgICQoJyNkZWxldGVMaXN0TW9kYWwnKS5jbGljaygpXG4gICAgfSlcblxuICAgIE1vdXNldHJhcC5iaW5kKCd0YWIrcycsIGZ1bmN0aW9uKCl7XG4gICAgICAvL2NvbnNvbGUubG9nKCdyZWxvYWQnKVxuICAgICAgLy8kKCcjZG93bmxvYWRQcm9zcGVjdHMnKS5jbGljaygpXG4gICAgICB0aGlzcy5kb3dubG9hZEZpbGUoKVxuICAgIH0pXG5cbiAgICBNb3VzZXRyYXAuYmluZCgnc2hpZnQrbCcsIGZ1bmN0aW9uKCl7XG4gICAgICAvL2NvbnNvbGUubG9nKCdyZWxvYWQnKVxuICAgICAgLy8kKCcjZG93bmxvYWRQcm9zcGVjdHMnKS5jbGljaygpXG4gICAgICAvL3RoaXNzLmRvd25sb2FkRmlsZSgpXG4gICAgICAkKCcubmV3LWxpc3QtYnRuJykuY2xpY2soKVxuICAgIH0pXG5cbiAgICBNb3VzZXRyYXAuYmluZCgnZScsIGZ1bmN0aW9uKCl7XG4gICAgICBjb25zb2xlLmxvZygncmVsb2FkJylcbiAgICAgIC8vJCgnI2Rvd25sb2FkUHJvc3BlY3RzJykuY2xpY2soKVxuICAgICAgdGhpc3MucmVtb3ZlU2VsZWN0ZWRQcm9zcGVjdHMoKVxuICAgIH0pXG5cbiAgICBNb3VzZXRyYXAuYmluZCgnYycsIGZ1bmN0aW9uKCkgeyBcbiAgICAgIGNvbnNvbGUubG9nKCdjb3B5JylcbiAgICAgICQoJyNjb3B5VG9MaXN0JykuY2xpY2soKVxuICAgIH0pO1xuXG4gICAgTW91c2V0cmFwLmJpbmQoJ20nLCBmdW5jdGlvbigpIHsgXG4gICAgICBjb25zb2xlLmxvZygnY29weScpXG4gICAgICAkKCcjbW92ZVRvTGlzdCcpLmNsaWNrKClcbiAgICB9KTtcblxuICAgIC8vTW91c2V0cmFwLmJpbmQoJ2UnLCBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ2UnKTsgfSk7XG4gICAgTW91c2V0cmFwLmJpbmQoJ3JpZ2h0JywgZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKCdyaWdodCcpOyB9KTtcbiAgICBNb3VzZXRyYXAuYmluZCgnbGVmdCcsIGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygnbGVmdCcpOyB9KTtcblxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAvKiBPbkxvYWQgRm9yIFRoZSBGaXJzdCBUaW1lIEZ1bmN0aW9uICovXG4gICAgbG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5zdHJpbmdpZnkoW10pXG4gICAgdGhpc3NzID0gdGhpcztcblxuICAgIC8vdGhpcy5zdGFydEtleWJvYXJkU2hvcnRjdXRzKClcblxuICAgIHBhcnNlX2hlYWRlcnMgPSB7XG4gICAgICAnWC1QYXJzZS1BcHBsaWNhdGlvbi1JZCcgIDogJ044NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkonLCBcbiAgICAgICdYLVBhcnNlLVJFU1QtQVBJLUtleScgICAgOiAnVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYidcbiAgICB9XG5cbiAgICBjb21wYW55ID0gSlNPTi5zdHJpbmdpZnkoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLmNvbXBhbnkpXG4gICAgY3VpZCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5vYmplY3RJZFxuICAgIHVzZXIgPSBKU09OLnN0cmluZ2lmeSh7J19fdHlwZSc6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29iamVjdElkJzpjdWlkLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdjbGFzc05hbWUnOiAnVXNlcid9KVxuICAgIGFyY2hpdmVMaXN0ID0gSlNPTi5zdHJpbmdpZnkoeyAvL2hhcmRDb2RlXG4gICAgICAnb2JqZWN0SWQnOidTZXJQUWpja3ZlJyxcbiAgICAgICdfX3R5cGUnOidQb2ludGVyJywgXG4gICAgICAnY2xhc3NOYW1lJyA6IHRoaXMuc3RhdGUubGlzdENsYXNzTmFtZVxuICAgIH0pXG5cbiAgICBxcnkgPSAnd2hlcmU9e1wiY29tcGFueVwiOicrY29tcGFueSsnLFwiYXJjaGl2ZWRcIjp0cnVlfSZjb3VudD0xJm9yZGVyPS1jcmVhdGVkQXQnXG5cbiAgICBpZih0aGlzLnN0YXRlLmN1cnJlbnRMaXN0ICE9ICdBbGwnKXtcbiAgICAgIGN1cnJlbnRMaXN0ID0ge1xuICAgICAgICAnb2JqZWN0SWQnOnRoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZCwgXG4gICAgICAgICdfX3R5cGUnOidQb2ludGVyJywgXG4gICAgICAgICdjbGFzc05hbWUnIDogdGhpcy5zdGF0ZS5saXN0Q2xhc3NOYW1lXG4gICAgICB9XG4gICAgICBjdXJyZW50TGlzdCA9IEpTT04uc3RyaW5naWZ5KGN1cnJlbnRMaXN0KVxuICAgICAgdXNlciA9IEpTT04uc3RyaW5naWZ5KHsnX190eXBlJzonUG9pbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvYmplY3RJZCc6J3hUaEFYYzBMWlQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3NOYW1lJzonVXNlcid9KVxuXG4gICAgICAvLyBhZGQgY29tcGFueSB0byBwcm9zcGVjdHMgYWRkZWQgdGhyb3VnaCBtaW5pbmcgam9iXG4gICAgICBxcnkgPSAnd2hlcmU9e1wiY29tcGFueVwiOicrY29tcGFueSsnLFwibGlzdHNcIjonK2N1cnJlbnRMaXN0Kyd9JmNvdW50PTEnXG4gICAgfVxuXG4gICAgY2xhc3NOYW1lID0gdGhpcy5zdGF0ZS5jbGFzc05hbWVcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK2NsYXNzTmFtZSsnP2xpbWl0PScrdGhpc3NzLnN0YXRlLnByb3NwZWN0c1BlclBhZ2UsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgaGVhZGVyczogcGFyc2VfaGVhZGVycyxcbiAgICAgIGNhY2hlOiB0cnVlLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgY29uc29sZS5sb2coJ0NPTVBBTlkgUkVTVUxUUycpXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcy5yZXN1bHRzKVxuICAgICAgICBjb25zb2xlLmxvZyhyZXMucmVzdWx0cy5sZW5ndGgpXG4gICAgICAgIHRoaXNzcy5zZXRTdGF0ZSh7cHJvc3BlY3RzOiByZXMucmVzdWx0c30pXG4gICAgICAgIHRoaXNzcy5zZXRTdGF0ZSh7Y291bnQ6IHJlcy5jb3VudH0pXG4gICAgICAgIHRoaXNzcy5zZXRTdGF0ZSh7dG90YWxDb3VudDogcmVzLmNvdW50fSlcbiAgICAgICAgdGhpc3NzLnNldFN0YXRlKHtwYWdlczogTWF0aC5jZWlsKHJlcy5jb3VudC90aGlzc3MucHJvcHMucHJvc3BlY3RzUGVyUGFnZSl9KVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe2xvYWRpbmc6IGZhbHNlfSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJylcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBwYXJzZV9oZWFkZXJzID0ge1xuICAgICAgJ1gtUGFyc2UtQXBwbGljYXRpb24tSWQnICA6ICdOODVRT2t0ZUVFUWt1WlZKS0F2dDhNVmVzMHNqRzZxTnBFR3FRRlZKJywgXG4gICAgICAnWC1QYXJzZS1SRVNULUFQSS1LZXknICAgIDogJ1ZONkV3VnlCWndPMXVwaHNCUHNhdTh0N0pRUnAwMFVNM0tZc2lpUWInLFxuICAgIH1cblxuICAgIGN1cnJlbnRVc2VyID0geyBcbiAgICAgICdfX3R5cGUnICAgOiAnUG9pbnRlcicsXG4gICAgICAnY2xhc3NOYW1lJzogJ19Vc2VyJyxcbiAgICAgICdvYmplY3RJZCcgOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikub2JqZWN0SWRcbiAgICB9XG5cbiAgICB0aGlzcyA9IHRoaXM7XG4gICAgbGlzdENsYXNzTmFtZSA9IHRoaXMuc3RhdGUubGlzdENsYXNzTmFtZVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzLycrbGlzdENsYXNzTmFtZSxcbiAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgaGVhZGVyczogcGFyc2VfaGVhZGVycyxcbiAgICAgIGRhdGE6ICd3aGVyZT17XCJ1c2VyXCI6JytKU09OLnN0cmluZ2lmeShjdXJyZW50VXNlcikrXCJ9JmNvdW50PTEmb3JkZXI9LWNyZWF0ZWRBdFwiLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgcmVzdWx0cyA9IHJlcy5yZXN1bHRzXG4gICAgICAgIGZvcihpPTA7aTwgcmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHJlc3VsdHMuY291bnQgPSAnfidcbiAgICAgICAgfVxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7bGlzdHM6IHJlc3VsdHN9KVxuICAgICAgICAvLyBNYWtlIGJhdGNoIHJlcXVlc3QgdG8gZ2V0IGxpc3QgY291bnRzIGFmdGVyIHRoZXkgYXJlIGxvYWRlZFxuICAgICAgICBmb3IoaT0wO2kgPCByZXMucmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHJlcy5yZXN1bHRzW2ldLm9iamVjdElkLCBcIlwiKVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yKGk9MDtpPCByZXMucmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxpc3QgPSB7XG4gICAgICAgICAgICAnX190eXBlJyAgICA6ICdQb2ludGVyJyxcbiAgICAgICAgICAgICdvYmplY3RJZCcgIDogcmVzLnJlc3VsdHNbaV0ub2JqZWN0SWQsXG4gICAgICAgICAgICAnY2xhc3NOYW1lJyA6IHRoaXNzLnN0YXRlLmxpc3RDbGFzc05hbWUsXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2xhc3NOYW1lID0gdGhpc3Muc3RhdGUuY2xhc3NOYW1lXG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK2NsYXNzTmFtZSxcbiAgICAgICAgICAgIHR5cGU6J0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOnBhcnNlX2hlYWRlcnMsXG4gICAgICAgICAgICBsaXN0T2JqZWN0SWQ6IHJlcy5yZXN1bHRzW2ldLm9iamVjdElkLFxuICAgICAgICAgICAgZGF0YTogJ3doZXJlPXtcImxpc3RzXCI6JytKU09OLnN0cmluZ2lmeShsaXN0KSsnfSZjb3VudD0xJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMubGlzdE9iamVjdElkKVxuICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLmxpc3RPYmplY3RJZCwgcmVzLmNvdW50KVxuICAgICAgICAgICAgICBhbW91bnQgPSAwXG4gICAgICAgICAgICAgIGZvcihpaT0wO2lpPCByZXN1bHRzLmxlbmd0aDtpaSsrKXtcbiAgICAgICAgICAgICAgICBpZihsb2NhbFN0b3JhZ2UuZ2V0SXRlbShyZXN1bHRzW2lpXS5vYmplY3RJZCkgPT0gXCJcIilcbiAgICAgICAgICAgICAgICAgIGFtb3VudCA9IGFtb3VudCArIDFcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmKGFtb3VudCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgZm9yKGlpPTA7aWk8IHJlc3VsdHMubGVuZ3RoO2lpKyspXG4gICAgICAgICAgICAgICAgICByZXN1bHRzW2lpXS5jb3VudCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHJlc3VsdHNbaWldLm9iamVjdElkKVxuXG4gICAgICAgICAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2xpc3RzOiByZXN1bHRzfSlcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdHb3QgQ291bnRzJylcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIHVwZGF0ZWQgcmVzLmNvdW50XG4gICAgICAgICAgICAgIC8vdGhpc3Muc2V0U3RhdGUoe2NvdW50OiByZXMuY291bnR9KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpXG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBnZW5lcmF0ZV9pZCA6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJ18nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpO1xuICB9LFxufSk7XG5cbi8qICBEcm9wZG93biBNZW51cyAqL1xuXG52YXIgQ3VycmVudExpc3RzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ3VycmVudExpc3RzJyxcbiAgbGlzdEFjdGlvbjogZnVuY3Rpb24oZSkge1xuICAgIGxpc3ROYW1lID0gJChlLnRhcmdldCkudGV4dCgpXG4gICAgXG4gICAgdmFyIGxpc3RTZWxlY3QgPSBfLmZpbHRlcih0aGlzLnByb3BzLmxpc3RzLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PSBsaXN0TmFtZVxuICAgIH0pO1xuXG4gICAgdGhpcy5wcm9wcy5saXN0QWN0aW9uKGxpc3RTZWxlY3RbMF0ub2JqZWN0SWQpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBsaXN0cyA9IFtdIFxuICAgIGZvcihpPTA7aTwgdGhpcy5wcm9wcy5saXN0cy5sZW5ndGg7aSsrKSB7XG4gICAgICBsaXN0cy5wdXNoKFxuICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe3N0eWxlOiB7Zm9udFdlaWdodDonYm9sZCcsZm9udFNpemU6JzEwcHgnfSwgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLmxpc3RBY3Rpb259LCB0aGlzLnByb3BzLmxpc3RzW2ldLm5hbWUpKVxuICAgICAgKVxuICAgIH1cbiAgICAvL2NvbnNvbGUubG9nKHRoaXMucHJvcHMuY29weURyb3Bkb3duU3R5bGUpXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcImRyb3Bkb3duLW1lbnUgZHJvcC10ZXN0XCIsIGlkOiBcImRyb3Bkb3duXCIsIFxuICAgICAgICAgIHN0eWxlOiB7cmlnaHQ6MTU4fX0sIFxuICAgICAgICBsaXN0c1xuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgTGlzdHNNZW51ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnTGlzdHNNZW51JyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwiZHJvcGRvd24tbWVudSBkcm9wLXRlc3RcIiwgaWQ6IFwiZHJvcGRvd25cIiwgXG4gICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgIG1pbldpZHRoOidpbmhlcml0JyxcbiAgICAgICAgICAgIHRvcDogJzIwcHgnLFxuICAgICAgICAgICAgd2lkdGg6ICcxMjVweCcsXG4gICAgICAgICAgICByaWdodDogJzE1NHB4JyxcbiAgICAgICAgICAgIGxlZnQ6J2F1dG8nXG4gICAgICAgICAgfX0sIFxuICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiI2Jvb2tzXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXRpbWVzXCJ9KSwgXCIgwqBcIiArICcgJyArXG4gICAgICAgICAgXCJEZWxldGUgTGlzdFwiXG4gICAgICAgICkpLCBcbiAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtocmVmOiBcIiNwb2RjYXN0c1wifSwgXG4gICAgICAgICAgXCJSZW5hbWUgTGlzdHNcIlxuICAgICAgICApKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgQ3VycmVudExpc3RzVHdvID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ3VycmVudExpc3RzVHdvJyxcbiAgbGlzdEFjdGlvbjogZnVuY3Rpb24oZSkge1xuICAgIGxpc3ROYW1lID0gJChlLnRhcmdldCkudGV4dCgpXG4gICAgXG4gICAgdmFyIGxpc3RTZWxlY3QgPSBfLmZpbHRlcih0aGlzLnByb3BzLmxpc3RzLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PSBsaXN0TmFtZVxuICAgIH0pO1xuXG4gICAgdGhpcy5wcm9wcy5saXN0QWN0aW9uKGxpc3RTZWxlY3RbMF0ub2JqZWN0SWQpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBsaXN0cyA9IFtdIFxuICAgIGZvcihpPTA7aTx0aGlzLnByb3BzLmxpc3RzLmxlbmd0aDtpKyspIHtcbiAgICAgIGxpc3RzLnB1c2goXG4gICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7c3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJyxmb250U2l6ZTonMTBweCd9LCBcbiAgICAgICAgICAgICAgIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmxpc3RBY3Rpb259LCBcbiAgICAgICAgICB0aGlzLnByb3BzLmxpc3RzW2ldLm5hbWUpKVxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwiZHJvcGRvd24tbWVudSBkcm9wLXRlc3RcIiwgaWQ6IFwiZHJvcGRvd25cIiwgXG4gICAgICAgICAgc3R5bGU6IHRoaXMucHJvcHMuY29weURyb3Bkb3duU3R5bGV9LCBcbiAgICAgICAgbGlzdHNcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxudmFyIExpc3REZXRhaWxCdXR0b25zID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnTGlzdERldGFpbEJ1dHRvbnMnLFxuICAvLyBSZW5hbWUgTGlzdFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBlZGl0TW9kZTogZmFsc2VcbiAgICB9XG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLnByb3BzLmN1cnJlbnRMaXN0T2JqZWN0SWQpXG4gICAgaWYoIXRoaXMuc3RhdGUuZWRpdE1vZGUpIHtcbiAgICAgIHN0dWZmID0gUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJcIiwgc3R5bGU6IGxpc3ROYW1lU3R5bGV9LCBcbiAgICAgICAgICAgICh0aGlzLnByb3BzLmN1cnJlbnRMaXN0TmFtZSA9PSBcIkFsbFwiKSA/ICcnIDogUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1iYXJzXCIsIHN0eWxlOiB7Zm9udFNpemU6MTYsIG1hcmdpblRvcDotNX19KSwgXG4gICAgICAgICAgICAodGhpcy5wcm9wcy5jdXJyZW50TGlzdE5hbWUgPT0gXCJBbGxcIikgPyAnJyA6IFwiICAgXCIgK3RoaXMucHJvcHMuY3VycmVudExpc3ROYW1lXG4gICAgICAgICAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgc3R1ZmYgPSBSZWFjdC5ET00uaW5wdXQoe2NsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIiwgc3R5bGU6IHt3aWR0aDogMTAwLCBmbG9hdDogJ2xlZnQnLCBoZWlnaHQ6IDI0LCBtYXJnaW5Ub3A6IC0xfX0pXG4gICAgfVxuICAgIHJldHVybiAoXG5cbiAgICAgICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtzdHlsZToge21hcmdpbjowfX0sIFxuICAgICAgICAgICAgICBzdHVmZiwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiBsaXN0QnRuLCBcbiAgICAgICAgICAgICAgICAnZGF0YS10b2dnbGUnOiBcIm1vZGFsXCIsIFxuICAgICAgICAgICAgICAgIGlkOiBcInJlbmFtZUxpc3RCdG5cIiwgXG4gICAgICAgICAgICAgICAgJ2RhdGEtdGFyZ2V0JzogXCIuYnMtcmVuYW1lTGlzdC1tb2RhbC1zbVwiLCBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiIGJ0biBidG4teHMgYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGVuY2lsXCJ9KVxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgc3R5bGU6IGxpc3RCdG4sIFxuICAgICAgICAgICAgICAgICdkYXRhLXRvZ2dsZSc6IFwibW9kYWxcIiwgXG4gICAgICAgICAgICAgICAgaWQ6IFwiZGVsZXRlTGlzdE1vZGFsXCIsIFxuICAgICAgICAgICAgICAgICdkYXRhLXRhcmdldCc6IFwiLmJzLWRlbGV0ZUxpc3QtbW9kYWwtc21cIiwgXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdHJhc2gtb1wifSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSwgXG5cbiAgICAgICAgICAgIFJlbmFtZUxpc3RNb2RhbCh7cmVuYW1lTGlzdDogdGhpcy5wcm9wcy5yZW5hbWVMaXN0fSksIFxuICAgICAgICAgICAgRGVsZXRlTGlzdE1vZGFsKHtkZWxldGVMaXN0OiB0aGlzLnByb3BzLmRlbGV0ZUxpc3R9KVxuICAgICAgICAgIClcbiAgICAgICk7XG4gIH0sXG5cbiAgcmVuYW1lTGlzdDogZnVuY3Rpb24obmV3TGlzdE5hbWUpIHtcbiAgICB0aGlzLnByb3BzLnJlbmFtZUxpc3QobmV3TGlzdE5hbWUpXG4gIH0sXG5cbiAgZGVsZXRlTGlzdDogZnVuY3Rpb24oKXtcbiAgICB0aGlzLnByb3BzLmRlbGV0ZUxpc3QoKVxuICB9LFxuXG4gIHRvZ2dsZUVkaXQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2VkaXRNb2RlOiAhdGhpcy5zdGF0ZS5lZGl0TW9kZSB9KVxuICB9XG59KTtcblxudmFyIENvbXBhbnlQcm9zcGVjdEhlYWRlciA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0NvbXBhbnlQcm9zcGVjdEhlYWRlcicsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS50cihudWxsLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3dpZHRoOjMwMH19LCBcIk5hbWVcIiksIFxuICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7d2lkdGg6MTAwfX0sIFwiQWRkZWQgT25cIiksIFxuICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJJbmR1c3RyeVwiKSwgXG4gICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt3aWR0aDoxMzcsZGlzcGxheTonbm9uZSd9fSwgXCIjIG9mIFByb3NwZWN0c1wiKSwgXG4gICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcIlNpZ25hbHNcIiksIFxuICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7d2lkdGg6NjAwfX0sIFwiwqBcIiksIFxuICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCLCoFwiKSwgXG4gICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIsKgXCIpXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gY3JlYXRlTGlzdE1vZGFsXG4gIGNyZWF0ZUxpc3Q6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCQoJyNsaXN0VGl0bGUnKS52YWwoKSlcblxuICAgIGRhdGEgPSAge1xuICAgICAgJ25hbWUnICAgICAgICA6ICQoJyNsaXN0VGl0bGUnKS52YWwoKS50cmltKCksICAgLy9XYWl0aW5nICwgUnVubmluZ1xuICAgICAgJ3VzZXInICAgICAgICA6IHsgJ19fdHlwZSc6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICdjbGFzc05hbWUnOidfVXNlcicsXG4gICAgICAgICAgICAgICAgICAgICAgJ29iamVjdElkJzoneFdFU2l3NVNtZCcgfSxcbiAgICB9XG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0TGlzdCcsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5wYXJzZUhlYWRlcnMsXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InKVxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBkYXRhLmNvdW50ID0gMFxuXG4gICAgdGhpcy5wcm9wcy5jcmVhdGVMaXN0KGRhdGEpXG4gICAgXG4gICAgJCgnI2NyZWF0ZUxpc3RNb2RhbCcpLm1vZGFsKCdoaWRlJylcbiAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ21vZGFsLW9wZW4nKTtcbiAgICAkKCcubW9kYWwtYmFja2Ryb3AnKS5yZW1vdmUoKTtcbiAgICAvLyQoJ2J1dHRvbi5jbG9zZScpLmNsaWNrKClcbiAgfSxcblxuICBjcmVhdGVMaXN0QnV0dG9uQ2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgIGlmKCQoJyNsaXN0VGl0bGUnKS52YWwoKS50cmltKCkgIT0gXCJcIilcbiAgICAgIHRoaXMuY3JlYXRlTGlzdCgpXG4gIH0sXG5cbiAgY3JlYXRlTWluaW5nSm9iOiBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc29sZS5sb2coJ2xtYW8nKVxuICAgIGlmKCQoJyNsaXN0VGl0bGUnKS52YWwoKS50cmltKCkgIT0gXCJcIilcbiAgICAgIHRoaXMuY3JlYXRlTGlzdCgpXG4gIH0sXG5cbiAgZGVsZXRlTGlzdDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcm9wcy5kZWxldGVMaXN0KClcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsIGZhZGUgYnMtZGVsZXRlTGlzdC1tb2RhbC1zbVwiLCB0YWJJbmRleDogXCItMVwiLCByb2xlOiBcImRpYWxvZ1wiLCAnYXJpYS1sYWJlbGxlZGJ5JzogXCJteVNtYWxsTW9kYWxMYWJlbFwiLCAnYXJpYS1oaWRkZW4nOiBcInRydWVcIiwgaWQ6IFwiY3JlYXRlTGlzdE1vZGFsXCIsIHN0eWxlOiB7dG9wOicyMDBweCd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtZGlhbG9nIG1vZGFsLXNtXCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWNvbnRlbnRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1oZWFkZXJcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgY2xhc3NOYW1lOiBcImNsb3NlXCIsICdkYXRhLWRpc21pc3MnOiBcIm1vZGFsXCJ9LCBSZWFjdC5ET00uc3Bhbih7J2FyaWEtaGlkZGVuJzogXCJ0cnVlXCJ9LCBcIsOXXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJzci1vbmx5XCJ9LCBcIkNsb3NlXCIpKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDQoe2NsYXNzTmFtZTogXCJtb2RhbC10aXRsZVwiLCBpZDogXCJteU1vZGFsTGFiZWxcIn0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXRyYXNoLW9cIn0pLCBcIiDCoERlbGV0ZSBMaXN0P1wiKVxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1ib2R5XCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5mb3JtKHtjbGFzc05hbWU6IFwiZGVsZXRlRm9ybVwiLCBvblN1Ym1pdDogdGhpcy5kZWxldGVMaXN0fSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuZGVsZXRlTGlzdCwgXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tZGFuZ2VyXCIsIFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snLCB3aWR0aDonMTAwJSd9fSwgXG4gICAgICAgICAgICAgICAgICAgICAgXCJEZWxldGVcIlxuICAgICAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5kZWxldGVMaXN0LCBcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1kZWZhdWx0XCIsIFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snLCB3aWR0aDonMTAwJSd9fSwgXG4gICAgICAgICAgICAgICAgICAgICAgXCJDYW5jZWxcIlxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLnByb3BzLmluaXRpYWxUZW1wbGF0ZVZhbHVlcy5uYW1lLFxuICAgICAgYm9keTogdGhpcy5wcm9wcy5pbml0aWFsVGVtcGxhdGVWYWx1ZXMuYm9keSxcbiAgICAgIHN1YmplY3Q6IHRoaXMucHJvcHMuaW5pdGlhbFRlbXBsYXRlVmFsdWVzLnN1YmplY3QsXG4gICAgICBlZGl0TW9kZTogdGhpcy5wcm9wcy5pbml0aWFsVGVtcGxhdGVWYWx1ZXMuZWRpdE1vZGVcbiAgICB9XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdkaWQgbW91bnQnKVxuICAgICQoJy50ZW1wbGF0ZS1ib2R5JykuaHRtbCh0aGlzLnN0YXRlLmJvZHkpXG4gICAgaWYodGhpcy5zdGF0ZS5lZGl0TW9kZSkge1xuICAgICAgJCgnLnN1bW1lcicpLnN1bW1lcm5vdGUoe1xuICAgICAgICBoZWlnaHQ6IDIwMCxcbiAgICAgICAgdG9vbGJhcjogW1xuICAgICAgICAgIFsnc3R5bGUnLCBbJ2JvbGQnLCAnaXRhbGljJywgJ3VuZGVybGluZScsICdjbGVhciddXSxcbiAgICAgICAgICBbJ2ZvbnQnLCBbJ3N0cmlrZXRocm91Z2gnXV0sXG4gICAgICAgICAgWydmb250c2l6ZScsIFsnZm9udHNpemUnXV0sXG4gICAgICAgICAgWydjb2xvcicsIFsnY29sb3InXV0sXG4gICAgICAgICAgWydwYXJhJywgWyd1bCcsICdvbCcsICdwYXJhZ3JhcGgnXV0sXG4gICAgICAgICAgWydoZWlnaHQnLCBbJ2hlaWdodCddXSxcbiAgICAgICAgXVxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZW5kZXJqc29uLnNldF9zaG93X3RvX2xldmVsKCdhbGwnKVxuICAgIHByb3NwZWN0ID0gXy5waWNrKHRoaXMucHJvcHMucHJvc3BlY3QsIFxuICAgICAgJ2NvbXBhbnlfbmFtZScsICduYW1lJywgJ3BvcydcbiAgICApXG4gICAgcHJvc3BlY3QuZmlyc3RfbmFtZSA9IHByb3NwZWN0Lm5hbWUuc3BsaXQoJyAnKVswXVxuICAgIHByb3NwZWN0Lmxhc3RfbmFtZSA9IF8ubGFzdChwcm9zcGVjdC5uYW1lLnNwbGl0KCcgJykpXG4gICAgcHJvc3BlY3QgPSBfLm9taXQocHJvc3BlY3QsICduYW1lJylcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdFRlbXBsYXRlXCIpLmFwcGVuZENoaWxkKHJlbmRlcmpzb24ocHJvc3BlY3QpKTtcbiAgICAkKCcjZWRpdFRlbXBsYXRlT3ZlcmxheScpLmh0bWwoKVxuICAgIHRoaXNzID0gdGhpcztcbiAgICAkKCcucmVuZGVyanNvbicpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgdGhpc3MucHJvcHMudG9nZ2xlVGVtcGxhdGVFZGl0TWVudSgpXG4gICAgfSlcblxuICAgICQoJy5yZW5kZXJqc29uJykuY3NzKHtcbiAgICAgICdwb3NpdGlvbic6ICdhYnNvbHV0ZScsXG4gICAgICAnei1pbmRleCc6ICcxMDAwMDAwMDAwJyxcbiAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzoncmdiYSgwLDAsMCwwKScsXG4gICAgICAnYm9yZGVyJzonMCcsXG4gICAgICAnY29sb3InOid3aGl0ZScsXG4gICAgICAnbWFyZ2luLXRvcCc6JzBweCcsXG4gICAgICAnaGVpZ2h0JzogJzU0MnB4JyxcbiAgICAgICdvdmVyZmxvdyc6J2F1dG8nLFxuICAgICAgJ3dpZHRoJzonMzgwcHgnXG4gICAgfSlcblxuICAgICQoJy5rZXknKS5jc3Moe1xuICAgICAgJ2N1cnNvcic6J3BvaW50ZXInXG4gICAgfSlcblxuICAgICQoJy50aW1lbGluZScpLmNzcyh7XG4gICAgICAnLXdlYmtpdC1maWx0ZXInOiAnYmx1cigxMHB4KScsXG4gICAgfSlcbiAgICAkKCcjY2FtcGFpZ24tdG9wLWRldGFpbCcpLmNzcyh7XG4gICAgICAnLXdlYmtpdC1maWx0ZXInOiAnYmx1cigxMHB4KScsXG4gICAgfSlcbiAgfSxcbiAgY29tcG9uZW50V2lsbFVubW91bnQ6ZnVuY3Rpb24oKSB7XG4gICAgJCgnLnRpbWVsaW5lJykuY3NzKHtcbiAgICAgICctd2Via2l0LWZpbHRlcic6ICcnLFxuICAgIH0pXG4gICAgJCgnI2NhbXBhaWduLXRvcC1kZXRhaWwnKS5jc3Moe1xuICAgICAgJy13ZWJraXQtZmlsdGVyJzogJycsXG4gICAgfSlcbiAgfSxcblxuICBjbGlja2VkT3ZlcmxheTogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2NsaWNrZWQgb3ZlcmxheScpXG4gICAgdGhpcy5wcm9wcy50b2dnbGVUZW1wbGF0ZUVkaXRNZW51KClcbiAgfSxcblxuICBjaGFuZ2VNb2RlOiBmdW5jdGlvbigpIHtcbiAgICAvLyBVcGRhdGUgdGVtcGxhdGUgaHRtbCBvbiB0b2dnbGVcbiAgICBwYXJzZV9oZWFkZXJzID0gYXBwQ29uZmlnLnBhcnNlSGVhZGVyc1xuICAgIGlmKHRoaXMuc3RhdGUuZWRpdE1vZGUpe1xuICAgICAgJCgnLnN1bW1lcicpLmRlc3Ryb3koKTtcbiAgICAgICQoJy50aW1lbGluZScpLmNzcyh7XG4gICAgICAgICctd2Via2l0LWZpbHRlcic6ICdibHVyKDIwcHgpJyxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnNvbGUubG9nKCdsb29rIGF0IHRoaXMnKVxuICAgICAgY29uc29sZS5sb2cobmFtZSlcbiAgICAgIG5hbWUgPSAodGhpcy5wcm9wcy5pbml0aWFsVGVtcGxhdGVWYWx1ZXMubmV3VGVtcGxhdGUpID8gJCgnI3RlbXBsYXRlLW5hbWUnKS52YWwoKSA6IHRoaXMuc3RhdGUubmFtZVxuICAgICAgdGhpcy5wcm9wcy5zYXZlVGVtcGxhdGUoe1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBib2R5OiAkKCcuc3VtbWVyJykuY29kZSgpLFxuICAgICAgICBzdWJqZWN0OiAkKCcuc3ViamVjdCcpLnZhbCgpLFxuICAgICAgfSwgdGhpcy5wcm9wcy5pbml0aWFsVGVtcGxhdGVWYWx1ZXMubmV3VGVtcGxhdGUpXG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBuYW1lOiAkKCcjdGVtcGxhdGUtbmFtZScpLnZhbCgpLFxuICAgICAgICBib2R5OiAkKCcuc3VtbWVyJykuY29kZSgpLFxuICAgICAgICBzdWJqZWN0OiAkKCcuc3ViamVjdCcpLnZhbCgpLFxuICAgICAgICBlZGl0TW9kZTogIXRoaXMuc3RhdGUuZWRpdE1vZGUsXG4gICAgICB9KVxuXG4gICAgICBvYmpJZCA9IHRoaXMucHJvcHMuaW5pdGlhbFRlbXBsYXRlVmFsdWVzLm9iamVjdElkXG4gICAgICAkLmFqYXgoe1xuICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvVGVtcGxhdGVzLycrb2JqSWQsXG4gICAgICAgIHR5cGU6J1BVVCcsXG4gICAgICAgIGhlYWRlcnM6cGFyc2VfaGVhZGVycyxcbiAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSh7Ym9keTogJCgnLnN1bW1lcicpLmNvZGUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdDogJCgnLnN1YmplY3QnKS52YWwoKX0pLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgZWRpdE1vZGU6ICF0aGlzLnN0YXRlLmVkaXRNb2RlIH0pXG4gICAgICAkKCcudGltZWxpbmUnKS5jc3Moe1xuICAgICAgICAnLXdlYmtpdC1maWx0ZXInOiAnYmx1cigyMHB4KScsXG4gICAgICB9KVxuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnRXaWxsVXBkYXRlOiBmdW5jdGlvbihuZXdQcm9wcykge1xuICAgIGNvbnNvbGUubG9nKCdUSEUgTkVXIFBST1BTJylcbiAgICBjb25zb2xlLmxvZyhuZXdQcm9wcylcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgIC8qIHRoaXNzID0gdGhpczsgKi9cbiAgICBjb25zb2xlLmxvZygnT1RIRVInKVxuICAgIGlmKHRoaXMuc3RhdGUuZWRpdE1vZGUpe1xuICAgICAgY29uc29sZS5sb2coJ0NBTExFRCcpXG4gICAgICAvLyBSZXBsYWNlIFN1YmplY3QgXG4gICAgICAkKCcuc3ViamVjdCcpLnZhbCh0aGlzLnN0YXRlLnN1YmplY3QpXG4gICAgICAkKCcjdGVtcGxhdGUtbmFtZScpLnZhbCh0aGlzLnN0YXRlLm5hbWUpXG5cbiAgICAgICQoJy5zdW1tZXInKS5zdW1tZXJub3RlKHtcbiAgICAgICAgaGVpZ2h0OiAyMDAsXG4gICAgICAgIHRvb2xiYXI6IFtcbiAgICAgICAgICBbJ3N0eWxlJywgWydib2xkJywgJ2l0YWxpYycsICd1bmRlcmxpbmUnLCAnY2xlYXInXV0sXG4gICAgICAgICAgWydmb250JywgWydzdHJpa2V0aHJvdWdoJ11dLFxuICAgICAgICAgIFsnZm9udHNpemUnLCBbJ2ZvbnRzaXplJ11dLFxuICAgICAgICAgIFsnY29sb3InLCBbJ2NvbG9yJ11dLFxuICAgICAgICAgIFsncGFyYScsIFsndWwnLCAnb2wnLCAncGFyYWdyYXBoJ11dLFxuICAgICAgICAgIFsnaGVpZ2h0JywgWydoZWlnaHQnXV0sXG4gICAgICAgIF1cbiAgICAgIH0pXG5cbiAgICAgIC8vIEluaXRpYWxpemUgRWRpdG9yIHdpdGggaHRtbFxuICAgICAgJCgnLnN1bW1lcicpLmNvZGUodGhpcy5zdGF0ZS5ib2R5KVxuICAgIH1cbiAgfSxcblxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgc3ViamVjdFBsYWNlID0gKHRoaXMuc3RhdGUuZWRpdE1vZGUpID8gUmVhY3QuRE9NLmlucHV0KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZScsd2lkdGg6NDgwfSwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBzdWJqZWN0XCJ9KSA6IHRoaXMuc3RhdGUuc3ViamVjdFxuXG4gICAgaWYodGhpcy5zdGF0ZS5lZGl0TW9kZSl7XG4gICAgICAgdG9nZ2xlQnV0dG9uID0gUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgb25DbGljazogdGhpcy5jaGFuZ2VNb2RlLCBcbiAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14c1wiLCBcbiAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJyxmbG9hdDoncmlnaHQnLG1hcmdpblRvcDo1fX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1zYXZlXCJ9KSwgXCIgwqAgU2F2ZSBUZW1wbGF0ZVwiKVxuXG4gICAgICAgaWYodGhpcy5wcm9wcy5pbml0aWFsVGVtcGxhdGVWYWx1ZXMubmV3VGVtcGxhdGUpe1xuICAgICAgICAgdGhlX25hbWUgPSBSZWFjdC5ET00uaW5wdXQoe2NsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJ0ZW1wbGF0ZS1uYW1lXCIsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDonbGVmdCcsd2lkdGg6MjAwfX0pXG4gICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgdG9nZ2xlQnV0dG9uID0gUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgb25DbGljazogdGhpcy5jaGFuZ2VNb2RlLCBcbiAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi14c1wiLCBcbiAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJyxmbG9hdDoncmlnaHQnLG1hcmdpblRvcDo1fX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wZW5jaWwtc3F1YXJlXCJ9KSwgXCIgwqAgRWRpdCBUZW1wbGF0ZVwiKVxuXG4gICAgICAgdGhlX25hbWUgPSBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZmxvYXQ6J2xlZnQnfX0sIFxuICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZmlsZS10ZXh0LW9cIn0pLCBcIsKgXCIsIFxuICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubmFtZVxuICAgICAgICAgICAgICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJlZGl0VGVtcGxhdGVcIn0sIFxuICAgICAgICBSZWFjdC5ET00uaDUoe2NsYXNzTmFtZTogXCJleGFtcGxlLXRlbXBsYXRlLXRpdGxlXCJ9LCBcIkV4YW1wbGUgVGVtcGxhdGUgVmFsdWVzXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImV4YW1wbGUtdGVtcGxhdGUtdGl0bGVcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHttYXJnaW5MZWZ0OjIxNSwgbWFyZ2luVG9wOjh9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi14c1wifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZXZyb24tbGVmdFwifSkpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgIHN0eWxlOiB7bWFyZ2luTGVmdDo1fSwgXG4gICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi14c1wifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZXZyb24tcmlnaHRcIn0pKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7b25DbGljazogdGhpcy5jbGlja2VkT3ZlcmxheSwgaWQ6IFwiZWRpdFRlbXBsYXRlT3ZlcmxheVwifSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcImVkaXRUZW1wbGF0ZVZpZXdcIiwgXG4gICAgICAgICAgICAgICBjbGFzc05hbWU6IFwicGFuZWwgcGFuZWwtZGVmYXVsdFwiLCBcbiAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snfX0sIFxuICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWhlYWRpbmdcIiwgc3R5bGU6IHtoZWlnaHQ6NTB9fSwgXG4gICAgICAgICAgICAgICAgIHRoZV9uYW1lLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tZGVmYXVsdCBidG4teHNcIiwgXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpbkxlZnQ6NSxtYXJnaW5Ub3A6NX19LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXRyYXNoXCJ9KVxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgdG9nZ2xlQnV0dG9uXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1ib2R5XCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImVkaXRUZW1wbGF0ZVRpdGxlXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcIlN1YmplY3Q6IFwiKSwgXG4gICAgICAgICAgICAgICAgc3ViamVjdFBsYWNlXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInRlbXBsYXRlRGV0YWlsc1wifSwgXG4gICAgICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luQm90dG9tOicwJ30sIGNsYXNzTmFtZTogXCJ0ZXh0LW11dGVkXCJ9LCBcbiAgICAgICAgICAgICAgICAgXCJDcmVhdGVkIGJ5IE1hcmsgb24gSnVsLiAyMSwgMjAxNFwiXG4gICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5Ub3A6JzAnfSwgY2xhc3NOYW1lOiBcInRleHQtbXV0ZWRcIn0sIFxuICAgICAgICAgICAgICAgICBcImxhc3QgdXBkYXRlZCA3IGRheXMgYWdvXCJcbiAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwgcGFuZWwtZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1ib2R5IHN1bW1lciB0ZW1wbGF0ZS1ib2R5XCJ9XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgICApO1xuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG52YXIgVGVtcGxhdGVzID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMuanMubWluLmpzJyk7XG52YXIgU2NoZWR1bGVzID0gcmVxdWlyZSgnLi9zY2hlZHVsZS5qcy5taW4uanMnKTtcbnZhciBDYW1wYWlnbnMgPSByZXF1aXJlKCcuL2NhbXBhaWducy5qcy5taW4uanMnKTtcbnZhciBTZW50TWFpbCA9IHJlcXVpcmUoJy4vc2VudF9tYWlsLmpzLm1pbi5qcycpO1xudmFyIEZvbGxvd3VwRmVlZCA9IHJlcXVpcmUoJy4vZm9sbG93dXBfZmVlZC5qcy5taW4uanMnKTtcbnZhciBDYW1wYWlnbkRldGFpbCA9IHJlcXVpcmUoJy4vY2FtcGFpZ25fZGV0YWlsLmpzLm1pbi5qcycpO1xudmFyIENyZWF0ZUNhbXBhaWduTW9kYWwgPSByZXF1aXJlKCcuL2NyZWF0ZV9jYW1wYWlnbi5qcy5taW4uanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2VsZWN0ZWRTY3JlZW46ICdDYW1wYWlnbnMnLFxuICAgICAgc2VsZWN0ZWRDYW1wYWlnbjonJyxcbiAgICAgIHByb3NwZWN0TGlzdHM6IFtdLFxuICAgICAgY2FtcGFpZ25zOiBbXVxuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgdGhpc3MgPSB0aGlzO1xuICAgICBjb21wYW55ID0gSlNPTi5zdHJpbmdpZnkoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLmNvbXBhbnkpXG4gICAgIHFyeSA9ICd3aGVyZT17XCJjb21wYW55XCI6Jytjb21wYW55Kyd9JmluY2x1ZGU9cHJvc3BlY3RfbGlzdCxmb2xsb3d1cHMsZm9sbG93dXBzLnRlbXBsYXRlJm9yZGVyPS1jcmVhdGVkQXQnXG4gICAgICQuYWpheCh7XG4gICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL0NhbXBhaWduJyxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcy5yZXN1bHRzKVxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7Y2FtcGFpZ25zOiByZXMucmVzdWx0c30pXG4gICAgICAgIC8vIFRPRE8gIC0gQWRkIEdldCBQcm9zcGVjdCBMaXN0IENvdW50XG4gICAgICAgIC8vIEZvbGxvdyBVcCBGZWVkIEZlYXR1cmVcbiAgICAgICAgLy8gLSBTaG93cyB3aGF0IHN0YWdlcyBkaWZmZXJlbnQgcHJvc3BlY3RzIGFyZSBhdCBhbmQgd2hldGhlciB5b3UgXG4gICAgICAgIC8vICAgc2hvdWxkIHNlbmQgYSBmb2xsb3cgdXAgdG8gdGhlbS5cbiAgICAgICAgLy8gSG93IHRvIGdldCB0aGUgc3RhZ2Ugb2YgUHJvc3BlY3QgTGlzdFxuICAgICAgICAvLyAtIFdoZXJlIHRvIHBlcnNpc3QgbGFzdCBlbWFpbCBzZW50XG4gICAgICAgIC8vIC0gV2hhdCBpcyBzdG9yZWQgYXQgdGhlIGNhbXBhaWduIGxldmVsXG4gICAgICAgIC8vIC0gV2hhdCBpcyBzdG9yZWQgYXQgdGhlIHByb3NwZWN0IGxldmVsXG4gICAgICAgIC8vIC0gVGltZWxpbmUgKEdlbmVyYWwgNyB4IDcgY2FkZW5jZXMpXG4gICAgICAgIC8vICAgLSBcbiAgICAgICAgLy8gLSBSdWxlcyAoU2Fua2V5IC8gRmxvdyBWaWV3KVxuICAgICAgICAvLyAgIC0gU2hvd3MgYWxsIG9yIG9ubHkgdGhlIG9uZXMgdGhhdCBoYXZlbnQgcmVzcG9uZGVkIFxuICAgICAgICAvLyAgIC0gU2hvdyBhbGwgdGhlIG9uZXMgaHRoYXQgaGF2ZW4ndCByZXBsaWVkXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InKVxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgIH0pO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0TGlzdCcsXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgIC8vIFRPRE9cbiAgICAgIC8vIC0gQ29tcGFueSBTcGVjaWZpY1xuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtwcm9zcGVjdExpc3RzOiByZXMucmVzdWx0c30pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuXG4gICAgICB9XG4gICAgfSlcblxuXG4gIH0sXG4gIFxuICB0b2dnbGVTY3JlZW46IGZ1bmN0aW9uKHNjcmVlbikge1xuICAgIHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkU2NyZWVuIDogc2NyZWVufSlcbiAgfSxcblxuICBjaGFuZ2VTZWxlY3RlZENhbXBhaWduOiBmdW5jdGlvbihzY3JlZW4sIHNlbGVjdGVkQ2FtcGFpZ24pIHtcbiAgICBjb25zb2xlLmxvZyhzZWxlY3RlZENhbXBhaWduKVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2VsZWN0ZWRDYW1wYWlnbiA6IHNlbGVjdGVkQ2FtcGFpZ24sXG4gICAgICBzZWxlY3RlZFNjcmVlbjogc2NyZWVuLFxuICAgIH0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzcyA9IHRoaXNcbiAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLnNlbGVjdGVkQ2FtcGFpZ24pXG4gICAgY29uc29sZS5sb2codGhpcy5zdGF0ZS5zZWxlY3RlZFNjcmVlbilcbiAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLmNhbXBhaWducylcbiAgICBzd2l0Y2ggKHRoaXMuc3RhdGUuc2VsZWN0ZWRTY3JlZW4pe1xuICAgICAgY2FzZSAnQ2FtcGFpZ25zJzpcbiAgICAgICAgQ3VycmVudFNjcmVlbiA9IENhbXBhaWducyh7Y2FtcGFpZ25zOiB0aGlzcy5zdGF0ZS5jYW1wYWlnbnMsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVNlbGVjdGVkQ2FtcGFpZ246IHRoaXNzLmNoYW5nZVNlbGVjdGVkQ2FtcGFpZ24sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZVNjcmVlbjogdGhpc3MudG9nZ2xlU2NyZWVufSlcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdDYW1wYWlnbkRldGFpbCc6XG4gICAgICAgIEN1cnJlbnRTY3JlZW4gPSBDYW1wYWlnbkRldGFpbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENhbXBhaWduOiB0aGlzcy5zdGF0ZS5zZWxlY3RlZENhbXBhaWduLCBcbiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENhbXBhaWduT2JqZWN0SWQ6IHRoaXNzLnN0YXRlLnNlbGVjdGVkQ2FtcGFnaW5PYmplY3RJZCwgXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVTY3JlZW46IHRoaXNzLnRvZ2dsZVNjcmVlbn0pXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnVGVtcGxhdGVzJzpcbiAgICAgICAgQ3VycmVudFNjcmVlbiA9IFRlbXBsYXRlcyhudWxsKVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ092ZXJ2aWV3JzpcbiAgICAgICAgQ3VycmVudFNjcmVlbiA9IENhbXBhaWducyh7Y2FtcGFpZ25zOiB0aGlzcy5zdGF0ZS5jYW1wYWlnbnMsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVNlbGVjdGVkQ2FtcGFpZ246IHRoaXNzLmNoYW5nZVNlbGVjdGVkQ2FtcGFpZ24sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZVNjcmVlbjogdGhpc3MudG9nZ2xlU2NyZWVufSlcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdTZW50IE1haWwnOlxuICAgICAgICBDdXJyZW50U2NyZWVuID0gU2VudE1haWwobnVsbClcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdGb2xsb3d1cCBGZWVkJzpcbiAgICAgICAgQ3VycmVudFNjcmVlbiA9IEZvbGxvd3VwRmVlZChudWxsKVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ1NjaGVkdWxlcyc6XG4gICAgICAgIEN1cnJlbnRTY3JlZW4gPSBTY2hlZHVsZXMobnVsbClcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJcIiwgc3R5bGU6IHtoZWlnaHQ6JzU1MHB4J319LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lclwiLCBzdHlsZToge3BhZGRpbmc6JzAnLHdpZHRoOicxMDAlJyxoZWlnaHQ6JzEwMCUnfX0sIFxuICAgICAgICAgIFNpZGVNZW51KHtcbiAgICAgICAgICAgICAgICBjcmVhdGVDYW1wYWlnbjogdGhpcy5jcmVhdGVDYW1wYWlnbiwgXG4gICAgICAgICAgICAgICAgcHJvc3BlY3RMaXN0czogdGhpcy5zdGF0ZS5wcm9zcGVjdExpc3RzLCBcbiAgICAgICAgICAgICAgICB0b2dnbGVTY3JlZW46IHRoaXMudG9nZ2xlU2NyZWVufSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTEwXCIsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7cGFkZGluZzonMCcsaGVpZ2h0OicxMDAlJ319LCBcbiAgICAgICAgICAgIEN1cnJlbnRTY3JlZW5cbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9LFxuXG4gIHBlcnNpc3RDYW1wYWlnbjogZnVuY3Rpb24obmV3Q2FtcGFpZ24pIHtcbiAgICBDYW1wYWlnbiA9IHt9XG4gICAgQ2FtcGFpZ24ubmFtZSA9IG5ld0NhbXBhaWduLm5hbWVcbiAgICBDYW1wYWlnbi5jb21wYW55ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLmNvbXBhbnlcbiAgICB0aGlzcyA9IHRoaXM7XG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL0NhbXBhaWduJyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoQ2FtcGFpZ24pLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIHRoZV9jYW1wYWlnbiA9IF8uZmluZCh0aGlzcy5zdGF0ZS5jYW1wYWlnbnMsIGZ1bmN0aW9uKGNhbXBhaWduKXtcbiAgICAgICAgICBmaXJzdCA9IGNhbXBhaWduLm5hbWUgPT0gbmV3Q2FtcGFpZ24ubmFtZSBcbiAgICAgICAgICBzZWNvbmQgPSBjYW1wYWlnbi5wcm9zcGVjdF9saXN0ID09IG5ld0NhbXBhaWduLnByb3NwZWN0X2xpc3RcbiAgICAgICAgICByZXR1cm4gZmlyc3QgJiYgc2Vjb25kXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgY29uc29sZS5sb2cocmVzLm9iamVjdElkKVxuXG4gICAgICAgIHRoZV9jYW1wYWlnbi5vYmplY3RJZCA9IHJlcy5vYmplY3RJZFxuICAgICAgICBjYW1wYWlnbnMgPSBfLmZpbHRlcih0aGlzcy5zdGF0ZS5jYW1wYWlnbnMsIGZ1bmN0aW9uKGNhbXBhaWduKXtcbiAgICAgICAgICBmaXJzdCA9IGNhbXBhaWduLm5hbWUgPT0gbmV3Q2FtcGFpZ24ubmFtZSBcbiAgICAgICAgICBzZWNvbmQgPSBjYW1wYWlnbi5wcm9zcGVjdF9saXN0ID09IG5ld0NhbXBhaWduLnByb3NwZWN0X2xpc3RcbiAgICAgICAgICByZXR1cm4gIShmaXJzdCAmJiBzZWNvbmQpXG4gICAgICAgIH0pXG4gICAgICAgIGNhbXBhaWducy5wdXNoKHRoZV9jYW1wYWlnbilcbiAgICAgICAgY29uc29sZS5sb2coY2FtcGFpZ25zKVxuXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtjYW1wYWlnbnM6ICBjYW1wYWlnbnN9KVxuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL0NhbXBhaWduLycrcmVzLm9iamVjdElkLFxuICAgICAgICAgIHR5cGU6J1BVVCcsXG4gICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe3Byb3NwZWN0X2xpc3Q6e1xuICAgICAgICAgICAgJ19fdHlwZSc6J1BvaW50ZXInLFxuICAgICAgICAgICAgJ2NsYXNzTmFtZSc6J1Byb3NwZWN0TGlzdCcsXG4gICAgICAgICAgICAnb2JqZWN0SWQnOm5ld0NhbXBhaWduLnByb3NwZWN0X2xpc3Qub2JqZWN0SWQsXG4gICAgICAgICAgfX0pLFxuICAgICAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBjcmVhdGVDYW1wYWlnbjogZnVuY3Rpb24obmV3Q2FtcGFpZ24pIHtcbiAgICBjYW1wYWlnbnMgPSB0aGlzLnN0YXRlLmNhbXBhaWduc1xuICAgIGNhbXBhaWducy5wdXNoKG5ld0NhbXBhaWduKVxuICAgIHRoaXMuc2V0U3RhdGUoe2NhbXBhaWduczogY2FtcGFpZ25zfSlcbiAgICBjb25zb2xlLmxvZyhuZXdDYW1wYWlnbilcblxuICAgICQoJy5tb2RhbCcpLmNsaWNrKClcbiAgICAkKCcubW9kYWwtYmFja2Ryb3AnKS5jbGljaygpXG5cbiAgICB0aGlzLnBlcnNpc3RDYW1wYWlnbihuZXdDYW1wYWlnbilcbiAgfVxufSk7XG5cbnZhciBTaWRlTWVudSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1NpZGVNZW51JyxcbiAgdG9nZ2xlU2NyZWVuOiBmdW5jdGlvbihlKSB7XG4gICAgdGhpcy5wcm9wcy50b2dnbGVTY3JlZW4oJChlLnRhcmdldCkudGV4dCgpLnRyaW0oKSlcbiAgfSxcblxuICAvKlxuICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT1cInNoYXJwIGJ0biBidG4tZGVmYXVsdFwiIG9uQ2xpY2s9e3RoaXMudG9nZ2xlU2NyZWVufT5cbiAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWZpbGUtdGV4dFwiIC8+ICZuYnNwOyBUZW1wbGF0ZXNcbiAgICA8L2J1dHRvbj5cbiAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJzaGFycCBidG4gYnRuLWRlZmF1bHRcIiBvbkNsaWNrPXt0aGlzLnRvZ2dsZVNjcmVlbn0+XG4gICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1jbG9jay1vXCIgLz4gJm5ic3A7IFNjaGVkdWxlc1xuICAgIDwvYnV0dG9uPlxuICAqL1xuICBjcmVhdGVDYW1wYWlnbk1vZGFsOiBmdW5jdGlvbigpIHtcblxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtMlwiLCBcbiAgICAgICAgc3R5bGU6IHtwYWRkaW5nOicwJyxoZWlnaHQ6JzEwMCUnLCBiYWNrZ3JvdW5kQ29sb3I6J3JnYig5MCwgMTA3LCAxMTkpJyxib3JkZXJCb3R0b21MZWZ0UmFkaXVzOiczcHgnfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwLXZlcnRpY2FsXCIsIHN0eWxlOiB7d2lkdGg6JzEwMCUnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcInNoYXJwIGJ0biBidG4tZGVmYXVsdFwiLCBcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMudG9nZ2xlU2NyZWVufSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHttYXJnaW5MZWZ0OicyN3B4J319LCBcIk92ZXJ2aWV3XCIpXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwic2hhcnAgYnRuIGJ0bi1kZWZhdWx0XCIsIFxuICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy50b2dnbGVTY3JlZW59LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbmV3c3BhcGVyLW9cIn0pLCBcIiDCoFwiLCAgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHttYXJnaW5MZWZ0Oic0cHgnfX0sIFwiRm9sbG93dXAgRmVlZFwiKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9LCBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJzaGFycCBidG4gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jb2RlLWZvcmtcIn0pLCBcIiDCoFwiLCAgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHttYXJnaW5MZWZ0Oic0cHgnfX0sIFwiUnVsZXNcIilcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfSwgXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwic2hhcnAgYnRuIGJ0bi1kZWZhdWx0XCIsIG9uQ2xpY2s6IHRoaXMudG9nZ2xlU2NyZWVufSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBpZS1jaGFydFwifSksIFwiIMKgIEFuYWx5dGljc1wiXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwic2hhcnAgYnRuIGJ0bi1kZWZhdWx0XCIsIFxuICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy50b2dnbGVTY3JlZW59LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGFwZXItcGxhbmVcIn0pLCBcIiDCoCBTZW50IE1haWxcIlxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG5cbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIlwiLCBzdHlsZToge3dpZHRoOicxMDAlJyx0ZXh0QWxpZ246J2NlbnRlcicsbWFyZ2luVG9wOjEwMH19LCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5IG5ldy1saXN0LWJ0blwiLCBcbiAgICAgICAgICAgICAgICAnZGF0YS10b2dnbGUnOiBcIm1vZGFsXCIsICdkYXRhLXRhcmdldCc6IFwiLmJzLWNyZWF0ZUNhbXBhaWduLW1vZGFsLXNtXCIsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7IGJhY2tncm91bmRJbWFnZTogJ2xpbmVhci1ncmFkaWVudCgxODBkZWcsICMwMDk2ZmYgMCUsICMwMDVkZmYgMTAwJSknfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wbHVzLWNpcmNsZVwifSksIFwiwqDCoE5ldyBDYW1wYWlnblwiXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgQ3JlYXRlQ2FtcGFpZ25Nb2RhbCh7cHJvc3BlY3RMaXN0czogdGhpcy5wcm9wcy5wcm9zcGVjdExpc3RzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlQ2FtcGFpZ246IHRoaXMuY3JlYXRlQ2FtcGFpZ259KVxuICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgY3JlYXRlQ2FtcGFpZ246IGZ1bmN0aW9uKG5ld0NhbXBhaWduKSB7XG4gICAgdGhpcy5wcm9wcy5jcmVhdGVDYW1wYWlnbihuZXdDYW1wYWlnbilcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gRm9sbG93dXBGZWVkXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNjaGVkdWxlZEZvbGxvd3VwczogW11cbiAgICB9XG4gIH0sXG5cblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHNjaGVkdWxlZEZvbGxvd3VwcyA9IFtdXG4gICAgZm9yKGk9MDtpPCB0aGlzLnN0YXRlLnNjaGVkdWxlZEZvbGxvd3Vwcy5sZW5ndGg7IGkrKyl7IFxuICAgICAgc2NoZWR1bGVkRm9sbG93dXBzLnB1c2goU2NoZWR1bGVkRm9sbG93dXBSb3cobnVsbCkpXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7b3ZlcmZsb3c6J2F1dG8nLCBoZWlnaHQ6NTUwfX0sIFxuICAgICAgICBSZWFjdC5ET00udGFibGUoe2NsYXNzTmFtZTogXCJ0YWJsZSB0YWJsZS1zdHJpcGVkXCIsIHN0eWxlOiB7bWFyZ2luQm90dG9tOjB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRoZWFkKG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIlByb3NwZWN0IE5hbWVcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiUHJvc3BlY3QgRW1haWxcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcIlN0YXR1c1wiKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS50Ym9keShudWxsLCBcbiAgICAgICAgICAgIHNjaGVkdWxlZEZvbGxvd3Vwc1xuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgU2NoZWR1bGVkRm9sbG93dXBSb3cgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdTY2hlZHVsZWRGb2xsb3d1cFJvdycsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS50cihudWxsXG5cbiAgICAgIClcbiAgICApO1xuICB9XG59KVxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG52YXIgU2VuZEVtYWlsTW9kYWwgPSByZXF1aXJlKCcuL3NlbmRfZW1haWxfbW9kYWwuanMubWluLmpzJylcbnZhciBUaW1lbGluZURheUVsZW1lbnQgPSByZXF1aXJlKCcuL3RpbWVsaW5lX2RheV9lbGVtZW50LmpzLm1pbi5qcycpXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIEZvbGxvd3VwVGltZWxpbmVcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICBpbml0aWFsRm9sbG93dXBzID0gdGhpcy5wcm9wcy5pbml0aWFsRm9sbG93dXBzXG4gICAgaW5pdGlhbEZvbGxvd3VwcyA9IChpbml0aWFsRm9sbG93dXBzKSA/IGluaXRpYWxGb2xsb3d1cHMgOiBbXVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGZvbGxvd3VwczogaW5pdGlhbEZvbGxvd3VwcyxcbiAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgY3VycmVudFRlbXBsYXRlOicnXG4gICAgfVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzcyA9IHRoaXM7XG4gICAgJCgnLmRheScpLnRvb2x0aXAoe1xuICAgICAgcGxhY2VtZW50OiAncmlnaHQnLFxuICAgICAgdGl0bGU6JysgQWRkIGEgZm9sbG93LXVwJ1xuICAgIH0pXG4gICAgLy8gRm9sbG93dXBzIHRoYXQgYmVsb25nIHRvIGNhbXBhaWduXG4gICAgIGNvbXBhbnkgPSBKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikuY29tcGFueSlcbiAgICAgY3VycmVudENhbXBhaWduID0ge1xuICAgICAgICdfX3R5cGUnOiAnUG9pbnRlcicsXG4gICAgICAgJ2NsYXNzTmFtZSc6J0NhbXBhaWduJyxcbiAgICAgICAnb2JqZWN0SWQnOnRoaXMucHJvcHMuY3VycmVudENhbXBhaWduLm9iamVjdElkXG4gICAgIH1cbiAgICAgY3VycmVudENhbXBhaWduID0gSlNPTi5zdHJpbmdpZnkoY3VycmVudENhbXBhaWduKVxuICAgICAvL3FyeSA9ICd3aGVyZT17XCJjb21wYW55XCI6Jytjb21wYW55KycsXCJjYW1wYWlnblwiOicrY3VycmVudENhbXBhaWduKyd9JmluY2x1ZGU9dGVtcGxhdGUnXG4gICAgIHFyeSA9ICd3aGVyZT17XCJjYW1wYWlnblwiOicrY3VycmVudENhbXBhaWduKyd9JmluY2x1ZGU9dGVtcGxhdGUnXG4gICAgIC8vcXJ5ID0gJ3doZXJlPXtcImNhbXBhaWduXCI6JytjdXJyZW50Q2FtcGFpZ24rJ30nXG4gICAgICQuYWpheCh7XG4gICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL0ZvbGxvd3VwJyxcbiAgICAgICB0eXBlOidHRVQnLFxuICAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgIGRhdGE6IHFyeSxcbiAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgIGNvbnNvbGUubG9nKCdmb2xsb3d1cCB0aW1lbGluZScpXG4gICAgICAgICBjb25zb2xlLmxvZyhyZXMucmVzdWx0cylcbiAgICAgICB9LFxuICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpXG4gICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgfVxuICAgICB9KVxuICB9LFxuICBcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBiYXRjaGVzID0gIF8uY291bnRCeSh0aGlzLnByb3BzLnByb3NwZWN0cywgXG4gICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocHJvc3BlY3QpIHsgcmV0dXJuIHByb3NwZWN0Lmxhc3RfY29udGFjdGVkIH0pXG5cbiAgICB0aW1lbGluZUVsZW1lbnRzID0gW11cbiAgICBmb2xsb3d1cHMgPSAodGhpcy5zdGF0ZS5mb2xsb3d1cHMpID8gdGhpcy5zdGF0ZS5mb2xsb3d1cHMgOiBbXVxuICAgIGNvbnNvbGUubG9nKGZvbGxvd3VwcylcbiAgICBmb3IoaT0wO2k8IDMxO2krKyl7XG4gICAgICBiYXRjaENvdW50ID0gKGJhdGNoZXNbaV0pID8gYmF0Y2hlc1tpXSA6IDBcbiAgICAgIFxuICAgICAgYWRkVGVtcGxhdGVNb2RlID0gZmFsc2U7IFxuICAgICAgY3VycmVudFRlbXBsYXRlID0gZmFsc2U7XG4gICAgICBlbGVtZW50VHlwZSA9IGZhbHNlXG4gICAgICBmb3IoaWk9MDtpaTwgZm9sbG93dXBzLmxlbmd0aDsgaWkrKyl7XG4gICAgICAgIC8vIFRPRE8gLSBSZXBsYWNlIHdpdGggdW5kZXJzY29yZSBtZXRob2RcbiAgICAgICAgLy9jb25zb2xlLmxvZygnRk9MTE9XVVBTIEVSUk9SJylcbiAgICAgICAgLy9jb25zb2xlLmxvZyhmb2xsb3d1cHMpXG4gICAgICAgIGVsZW1lbnRUeXBlID0gaSA9PSBmb2xsb3d1cHNbaWldLmRheVxuICAgICAgICBpZihlbGVtZW50VHlwZSkge1xuICAgICAgICAgIGFkZFRlbXBsYXRlTW9kZSA9IChmb2xsb3d1cHNbaWldLmFkZFRlbXBsYXRlTW9kZSkgPyB0cnVlIDogZmFsc2VcbiAgICAgICAgICBjdXJyZW50VGVtcGxhdGUgPSBmb2xsb3d1cHNbaWldLnRlbXBsYXRlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aW1lbGluZUVsZW1lbnRzLnB1c2goVGltZWxpbmVEYXlFbGVtZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheUNvdW50OiBpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlczogdGhpcy5wcm9wcy50ZW1wbGF0ZXMsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFRlbXBsYXRlOiBjdXJyZW50VGVtcGxhdGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmF0Y2hDb3VudDogYmF0Y2hDb3VudCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRUZW1wbGF0ZU1vZGU6IGFkZFRlbXBsYXRlTW9kZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50VHlwZTogIWVsZW1lbnRUeXBlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvbGxvd3VwOiB0aGlzLmFkZEZvbGxvd3VwLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRGb2xsb3d1cDogdGhpcy5lZGl0Rm9sbG93dXAsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUZvbGxvd3VwOiB0aGlzLnNhdmVGb2xsb3d1cCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVGb2xsb3d1cDogdGhpcy5yZW1vdmVGb2xsb3d1cCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50VGVtcGxhdGU6IHRoaXMuc2V0Q3VycmVudFRlbXBsYXRlfSkpXG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwidGltZWxpbmVcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHtoZWlnaHQ6JzEwMCUnLGJhY2tncm91bmRDb2xvcjoncmdiKDkwLCAxMDcsIDExOSknLFxuICAgICAgICAgICAgICAgICAgICAgd2lkdGg6NSxtYXJnaW5Ub3A6LTM1fX0sIFxuICAgICAgICAgICAgIHRpbWVsaW5lRWxlbWVudHNcbiAgICAgICAgKSwgXG4gICAgICAgIFNlbmRFbWFpbE1vZGFsKHtwcm9zcGVjdHM6IHRoaXMucHJvcHMucHJvc3BlY3RzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUZW1wbGF0ZTogdGhpcy5zdGF0ZS5jdXJyZW50VGVtcGxhdGV9KVxuICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgY3JlYXRlRm9sbG93dXA6IGZ1bmN0aW9uKCkge1xuICAgIC8vXG4gIH0sICAgICAgICAgXG5cbiAgYWRkRm9sbG93dXA6IGZ1bmN0aW9uKGRheSkge1xuICAgIC8vY29uc29sZS5sb2coJ2NhbGxlZCB0ZW1wbGF0ZSBlZGl0IG1lbnUnKVxuICAgIGZvbGxvd3VwcyA9IHRoaXMuc3RhdGUuZm9sbG93dXBzXG4gICAgZm9sbG93dXBzLnB1c2goe2FkZFRlbXBsYXRlTW9kZTogdHJ1ZSwgZGF5OiBkYXl9KVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZm9sbG93dXBzOiBmb2xsb3d1cHNcbiAgICB9KVxuICB9LFxuXG4gIGVkaXRGb2xsb3d1cDogZnVuY3Rpb24oZGF5KSB7XG4gICAgLy8gZmluZCB0ZW1wbGF0ZSBzZXQgZWRpdG1vZGUgaXMgZmFsc2VcbiAgICBmb3IoaT0wO2k8IHRoaXMuc3RhdGUuZm9sbG93dXBzLmxlbmd0aDsgaSsrKXtcbiAgICAgIGlmKHRoaXMuc3RhdGUuZm9sbG93dXBzW2ldLmRheSA9PSBkYXkpe1xuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvbGxvd3VwcyA9IHRoaXMuc3RhdGUuZm9sbG93dXBzXG4gICAgZm9sbG93dXBzW2ldLmFkZFRlbXBsYXRlTW9kZSA9IHRydWVcbiAgICB0aGlzLnNldFN0YXRlKHtmb2xsb3d1cHM6IGZvbGxvd3Vwc30pXG4gIH0sXG5cbiAgc2F2ZUZvbGxvd3VwOiBmdW5jdGlvbihkYXksIGNob3NlblRlbXBsYXRlKSB7XG4gICAgbmV3X2ZvbGxvd3VwcyA9IHRoaXMuc3RhdGUuZm9sbG93dXBzXG4gICAgbmV3X2ZvbGxvd3Vwc1tkYXldLmFkZFRlbXBsYXRlTW9kZSA9IGZhbHNlXG4gICAgbmV3X2ZvbGxvd3Vwc1tkYXldLnRlbXBsYXRlID0gY2hvc2VuVGVtcGxhdGVcblxuICAgIHRoaXMuc2V0U3RhdGUoe2ZvbGxvd3VwczogbmV3X2ZvbGxvd3Vwc30pXG5cbiAgICBpZihuZXdfZm9sbG93dXBzW2RheV0ub2JqZWN0SWQpe1xuICAgICAgdXJsID0gXCIvXCIrbmV3X2ZvbGxvd3Vwc1tpXS5vYmplY3RJZDsgdHlwZT1cIlBVVFwiXG5cbiAgICAgIGRhdGEgPSB7dGVtcGxhdGU6e1xuICAgICAgICBfX3R5cGU6J1BvaW50ZXInLFxuICAgICAgICBjbGFzc05hbWU6J1RlbXBsYXRlJyxcbiAgICAgICAgb2JqZWN0SWQ6IGNob3NlblRlbXBsYXRlLm9iamVjdElkXG4gICAgICB9fVxuICAgIH0gZWxzZSB7XG4gICAgICB1cmwgPSBcIlwiOyB0eXBlPVwiUE9TVFwiO1xuXG4gICAgICBkYXRhID0ge1xuICAgICAgICBkYXk6IGRheSxcbiAgICAgICAgY2FtcGFpZ246IHtcbiAgICAgICAgICBfX3R5cGU6ICdQb2ludGVyJyxcbiAgICAgICAgICBjbGFzc05hbWU6J0NhbXBhaWduJyxcbiAgICAgICAgICBvYmplY3RJZDogdGhpcy5wcm9wcy5jdXJyZW50Q2FtcGFpZ24ub2JqZWN0SWRcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGU6IHtcbiAgICAgICAgICBfX3R5cGU6ICdQb2ludGVyJyxcbiAgICAgICAgICBjbGFzc05hbWU6J1RlbXBsYXRlJyxcbiAgICAgICAgICBvYmplY3RJZDpjaG9zZW5UZW1wbGF0ZS5vYmplY3RJZCxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL0ZvbGxvd3VwJyxcbiAgICAgIHR5cGU6dHlwZSxcbiAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIFxuICAgICAgICBuZXdfZm9sbG93dXBzW2RheV0ub2JqZWN0SWQgPSByZXMub2JqZWN0SWRcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2ZvbGxvd3VwczogbmV3X2ZvbGxvd3Vwc30pXG5cbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9DYW1wYWlnbi8nK3RoaXNzLnByb3BzLmN1cnJlbnRDYW1wYWlnbi5vYmplY3RJZCxcbiAgICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoe2ZvbGxvd3Vwczoge1xuICAgICAgICAgICAgX19vcDogJ0FkZFVuaXF1ZScsXG4gICAgICAgICAgICBvYmplY3RzOlt7XG4gICAgICAgICAgICAgIF9fdHlwZTonUG9pbnRlcicsIFxuICAgICAgICAgICAgICBjbGFzc05hbWU6J0ZvbGxvd3VwJyxcbiAgICAgICAgICAgICAgb2JqZWN0SWQ6cmVzLm9iamVjdElkXG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH19KSxcbiAgICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oKSB7XG5cbiAgICAgIH0sXG4gICAgfSlcbiAgfSxcblxuICByZW1vdmVGb2xsb3d1cDogZnVuY3Rpb24oZGF5KSB7XG4gICAgZm9sbG93dXBzID0gW11cbiAgICBmb3IoaT0wO2k8IHRoaXMuc3RhdGUuZm9sbG93dXBzLmxlbmd0aDtpKyspXG4gICAgICBpZih0aGlzLnN0YXRlLmZvbGxvd3Vwc1tpXS5kYXkgIT0gZGF5KVxuICAgICAgICBmb2xsb3d1cHMucHVzaCh0aGlzLnN0YXRlLmZvbGxvd3Vwc1tpXSlcbiAgICAgIFxuICAgIGZvcihpPTA7aTwgdGhpcy5zdGF0ZS5mb2xsb3d1cHMubGVuZ3RoO2krKylcbiAgICAgIGlmKHRoaXMuc3RhdGUuZm9sbG93dXBzW2ldLmRheSA9PSBkYXkpXG4gICAgICAgIGJyZWFrXG4gICAgXG4gICAgdGhpcy5zZXRTdGF0ZSh7Zm9sbG93dXBzOiBmb2xsb3d1cHN9KSBcbiAgICBpZCA9IHRoaXMuc3RhdGUuZm9sbG93dXBzW2ldXG5cbiAgICB0aGlzcyA9IHRoaXM7XG4gICAgaWYoaWQpIHtcbiAgICAgIGlkID0gaWQub2JqZWN0SWRcbiAgICAgICQuYWpheCh7XG4gICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Gb2xsb3d1cC8nK2lkLFxuICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICB0eXBlOidERUxFVEUnLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgY29uc29sZS5sb2coJ1JFTU9WRSBBUlJBWScpXG4gICAgICAkLmFqYXgoe1xuICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvQ2FtcGFpZ24vJyt0aGlzcy5wcm9wcy5jdXJyZW50Q2FtcGFpZ24ub2JqZWN0SWQsXG4gICAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgIHR5cGU6J1BVVCcsXG4gICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBmb2xsb3d1cHM6IHtcbiAgICAgICAgICAgIF9fb3AgOiAnUmVtb3ZlJyxcbiAgICAgICAgICAgIG9iamVjdHM6IFt7XG4gICAgICAgICAgICAgIF9fdHlwZTogJ1BvaW50ZXInLFxuICAgICAgICAgICAgICBjbGFzc05hbWU6ICdGb2xsb3d1cCcsXG4gICAgICAgICAgICAgIG9iamVjdElkOiBpZFxuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfSxcblxuICBzZXRDdXJyZW50VGVtcGxhdGU6IGZ1bmN0aW9uKHRlbXBsYXRlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudFRlbXBsYXRlOiB0ZW1wbGF0ZSB9KVxuICB9XG59KTtcblxuXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxuZGF0YSA9IHJlcXVpcmUoJy4uL2xpYi9kYXRhLm1pbi5qcycpIFxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBmcmVlIHRyaWFsXG4gIG9wZW46IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdvcGVuJylcbiAgICBoYW5kbGVyLm9wZW4oe1xuICAgICAgbmFtZTogJ0N1c3RvbWVybycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0dldCA5MDAgZnJlZSBlbWFpbCBjcmVkaXRzIScsXG4gICAgICBhbW91bnQ6IDAsXG4gICAgICBwYW5lbExhYmVsOiBcIlN0YXJ0IFlvdXIgRnJlZSBUcmlhbCFcIixcbiAgICAgIG9wZW46IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZygkKCcuY2xvc2UnKSlcbiAgICAgICAgJCgnLmNsb3NlJykuaGlkZSgpXG4gICAgICB9LFxuICAgICAgY2xvc2VkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJjbG9zZWRcIilcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgJCgnYm9keScpLmNzcyh7b3ZlcmZsb3c6J2hpZGRlbid9KVxuXG5cbiAgICAvL2NvbnNvbGUubG9nKHRoaXMuZ2V0RE9NTm9kZSgpKVxuICAgIC8qXG4gICAgJCh0aGlzLmdldERPTU5vZGUoKSkuYXBwZW5kKCcgPGZvcm0gYWN0aW9uPVwiXCIgbWV0aG9kPVwiUE9TVFwiPiA8c2NyaXB0IHNyYz1cImh0dHBzOi8vY2hlY2tvdXQuc3RyaXBlLmNvbS9jaGVja291dC5qc1wiIGNsYXNzPVwic3RyaXBlLWJ1dHRvblwiIGRhdGEta2V5PVwicGtfdGVzdF80VDVQZnRsNGhvMEVnRlZvMUc3T0tSZGFcIiBkYXRhLWFtb3VudD1cIjIwMDBcIiBkYXRhLW5hbWU9XCJEZW1vIFNpdGVcIiBkYXRhLWRlc2NyaXB0aW9uPVwiMiB3aWRnZXRzICgkMjAuMDApXCIgZGF0YS1pbWFnZT1cIlwiPiA8L3NjcmlwdD4gPC9mb3JtPicpXG5cbiAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygkKCcuc3RyaXBlLWJ1dHRvbi1lbCcpLmh0bWwoKSlcbiAgICAkKCcuc3RyaXBlLWJ1dHRvbi1lbCcpLmNsaWNrKClcblxuICB9LCA0MDApXG4qL1xuXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHsgXG4gIGRhdGEgPSBkYXRhKClcbiAgICBpbWdzXzEgPSBbXVxuICAgIGltZ3NfMiA9IFtdXG4gICAgZm9yKGk9MDtpIDwgMTIwOyBpKyspIHtcbiAgICAgIGltZ3NfMS5wdXNoKFJlYWN0LkRPTS5pbWcoe3NyYzogZGF0YVtpXSwgY2xhc3NOYW1lOiBcInByb3NwZWN0LWltZ1wifSkpXG4gICAgfVxuICAgIGZvcihpPTE1O2kgPCAzMDsgaSsrKSB7XG4gICAgICBpbWdzXzIucHVzaChSZWFjdC5ET00uaW1nKHtzcmM6IGRhdGFbaV0sIGNsYXNzTmFtZTogXCJwcm9zcGVjdC1pbWdcIn0pKVxuICAgIH1cblxuICBjb25zb2xlLmxvZyhkYXRhKVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgUmVhY3QuRE9NLmRpdih7aWQ6IFwic2lnbnVwXCJ9LCBcIiBcIiksIFxuXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICBSZWFjdC5ET00uaDEoe2NsYXNzTmFtZTogXCJ0aXRsZVwifSwgXCJDdXN0b21lcm8uXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLmg1KHtjbGFzc05hbWU6IFwidGFnbGluZVwifSwgXCJHZXQgOTAwIGZyZWUgZW1haWwgY3JlZGl0cy4gMTAwJSByZWZ1bmQgZ3VhcmFudGVlLiAgV2Ugd2lsbCBvbmx5IHN0YXJ0IGNoYXJnaW5nIHlvdXIgY2FyZCBhZnRlciAxIG1vbnRoLlwiKVxuXG4gICAgICApLCBcblxuICAgICAgUmVhY3QuRE9NLmRpdih7aWQ6IFwiXCIsIHN0eWxlOiB7cG9zaXRpb246J2Fic29sdXRlJyx6SW5kZXg6Jy0yJyx0b3A6MCxsZWZ0OjB9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJcIiwgc3R5bGU6IHttYXJnaW5MZWZ0OjM0fX0sIFxuICAgICAgICBpbWdzXzEsIFxuICAgICAgICBpbWdzXzJcbiAgICAgICAgKVxuICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gTGFuZGluZyBQYWdlXG4gIGxvZ2luOiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnbG9naW4nKVxuICAgIGVtYWlsID0gJCgnI2VtYWlsJykudmFsKClcbiAgICBwYXNzd29yZCA9ICQoJyNwYXNzd29yZCcpLnZhbCgpXG4gICAgcCA9IHtcIlgtUGFyc2UtQXBwbGljYXRpb24tSWRcIjogXCJOODVRT2t0ZUVFUWt1WlZKS0F2dDhNVmVzMHNqRzZxTnBFR3FRRlZKXCIsXG4gICAgICAgICBcIlgtUGFyc2UtUkVTVC1BUEktS2V5XCI6IFwiVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYlwifVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2xvZ2luJyxcbiAgICAgIGhlYWRlcnM6IHAsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgZGF0YToge1xuICAgICAgICAndXNlcm5hbWUnOmVtYWlsLFxuICAgICAgICAncGFzc3dvcmQnOnBhc3N3b3JkXG4gICAgICB9LFxuICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1cnJlbnRVc2VyJywgSlNPTi5zdHJpbmdpZnkocmVzKSlcbiAgICAgICAgbG9jYXRpb24uaHJlZiA9IFwiI1wiXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAkKCdib2R5JykuY3NzKHtvdmVyZmxvdzonYXV0byd9KVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJcIn0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYmFja2dyb3VuZC1pbWFnZVwifSksIFxuICAgICAgICBSZWFjdC5ET00ubmF2KHtjbGFzc05hbWU6IFwidGhlbmF2YmFyIG5hdmJhciBuYXZiYXItZGVmYXVsdCBuYXZiYXItZml4ZWQtdG9wXCIsIHJvbGU6IFwibmF2aWdhdGlvblwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lci1mbHVpZFwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcInRoZS10aXRsZSB0ay1mb2NvIGJyYW5kIG5hdmJhci1icmFuZFwiLCBzdHlsZToge2ZvbnRXZWlnaHQ6JzEwMCd9LCBcbiAgICAgICAgICAgICAgICBocmVmOiBcIiNcIn0sIFxuICAgICAgICAgICAgICBcIkN1c3RvbWVyb1wiLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7Zm9udFNpemU6JzIycHgnLG1hcmdpbkxlZnQ6JzMwcHgnfX0sIFwiU3VwZXJjaGFyZ2UgeW91ciBzYWxlcyEgXCIpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiI2xvZ2luXCIsIGNsYXNzTmFtZTogXCJidG4tbGcgYnRuIGxvZ2luLWJ0blwifSwgXCJMb2cgSW5cIilcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtMTJcIiwgc3R5bGU6IHttYXJnaW5Ub3A6JzEwMHB4JyxwYWRkaW5nVG9wOicxMDBweCd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmgxKHtzdHlsZToge2NvbG9yOicjMWNhM2ZkJyxmb250V2VpZ2h0Oidib2xkJyx0ZXh0QWxpZ246J2NlbnRlcicsZm9udFNpemU6JzU2cHgnfX0sIFwiIEdlbmVyYXRlIEhpZ2ggUXVhbGl0eSBQcm9zcGVjdCBMaXN0cyBcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oMSh7c3R5bGU6IHtjb2xvcjonIzFjYTNmZCcsZm9udFdlaWdodDonMTAwJyx0ZXh0QWxpZ246J2NlbnRlcicsZm9udFNpemU6JzU2cHgnfX0sIFwiIEFjY2VsZXJhdGUgU2FsZXMgXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCIjc2lnbnVwXCIsIGNsYXNzTmFtZTogXCJidG4tbGcgYnRuLXN1Y2Nlc3MgYnRuIHN0YXJ0LXRyaWFsXCJ9LCBcIlN0YXJ0IFlvdXIgRnJlZSBUcmlhbCBUb2RheVwiKSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwgcGFuZWwtZGVmYXVsdFwiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1oZWFkaW5nXCJ9LCBcIsKgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1ib2R5XCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmZvcm0oe29uU3VibWl0OiB0aGlzLmxvZ2lufSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7cGxhY2Vob2xkZXI6IFwiRW1haWxcIiwgaWQ6IFwiZW1haWxcIiwgdHlwZTogXCJ0ZXh0XCIsIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgaW5wdXQtbGdcIiwgc3R5bGU6IHtmb250V2VpZ2h0OicxMDAnLGZvbnRTaXplOicyMnB4J319KSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7cGxhY2Vob2xkZXI6IFwiUGFzc3dvcmRcIiwgdHlwZTogXCJwYXNzd29yZFwiLCBpZDogXCJwYXNzd29yZFwiLCBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGlucHV0LWxnXCIsIHN0eWxlOiB7Zm9udFdlaWdodDonMTAwJyxmb250U2l6ZTonMjJweCd9fSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLmxvZ2luLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1sZ1wiLCBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJyxiYWNrZ3JvdW5kQ29sb3I6JyMxY2EzZmQnfX0sIFwiTG9nIEluXCIpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1mb290ZXJcIn0sIFwiwqBcIilcbiAgICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZ3JhZGllbnRcIn0sIFwiIFwiKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIExhbmRpbmcgUGFnZVxuICBsb2dpbjogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2xvZ2luJylcbiAgICBlbWFpbCA9ICQoJyNlbWFpbCcpLnZhbCgpXG4gICAgcGFzc3dvcmQgPSAkKCcjcGFzc3dvcmQnKS52YWwoKVxuICAgIHAgPSB7XCJYLVBhcnNlLUFwcGxpY2F0aW9uLUlkXCI6IFwiTjg1UU9rdGVFRVFrdVpWSktBdnQ4TVZlczBzakc2cU5wRUdxUUZWSlwiLFxuICAgICAgICAgXCJYLVBhcnNlLVJFU1QtQVBJLUtleVwiOiBcIlZONkV3VnlCWndPMXVwaHNCUHNhdTh0N0pRUnAwMFVNM0tZc2lpUWJcIn1cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9sb2dpbicsXG4gICAgICBoZWFkZXJzOiBwLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgJ3VzZXJuYW1lJzplbWFpbCxcbiAgICAgICAgJ3Bhc3N3b3JkJzpwYXNzd29yZFxuICAgICAgfSxcbiAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50VXNlcicsIEpTT04uc3RyaW5naWZ5KHJlcykpXG4gICAgICAgIGxvY2F0aW9uLmhyZWYgPSBcIiNcIlxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgJCgnYm9keScpLmNzcyh7b3ZlcmZsb3c6J2F1dG8nfSlcblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiXCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJhY2tncm91bmQtaW1hZ2VcIn0pLCBcbiAgICAgICAgUmVhY3QuRE9NLm5hdih7Y2xhc3NOYW1lOiBcInRoZW5hdmJhciBuYXZiYXIgbmF2YmFyLWRlZmF1bHQgbmF2YmFyLWZpeGVkLXRvcFwiLCByb2xlOiBcIm5hdmlnYXRpb25cIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb250YWluZXItZmx1aWRcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmltZyh7Y2xhc3NOYW1lOiBcIm5ldHdvcmstbG9nb1wiLCBzcmM6IFwiYnVpbGQvaW1nL25ldHdvcmsucG5nXCJ9KSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcInRoZS10aXRsZSB0ay1mb2NvIGJyYW5kIG5hdmJhci1icmFuZFwiLCBzdHlsZToge2ZvbnRXZWlnaHQ6JzEwMCd9LCBcbiAgICAgICAgICAgICAgICBocmVmOiBcIiNcIn0sIFxuICAgICAgICAgICAgICBcIkN1c3RvbWVyb1wiLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7Zm9udFNpemU6JzIwcHgnLG1hcmdpbkxlZnQ6JzMwcHgnLGZvbnRGYW1pbHk6J09wZW4gU2Fucyd9fSwgXCJTb2NpYWwgUHJvc3BlY3RpbmcgT24gU3Rlcm9pZHMgXCIpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiI2xvZ2luXCIsIGNsYXNzTmFtZTogXCJidG4tbGcgYnRuIGxvZ2luLWJ0blwiLCBzdHlsZToge2ZvbnRGYW1pbHk6J3Byb3hpbWEtbm92YSd9fSwgXCJMT0cgSU5cIilcbiAgICAgICAgKSwgXG5cbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC03IGNvbC1zbS03XCIsIHN0eWxlOiB7bWFyZ2luVG9wOicxMDBweCcscGFkZGluZ1RvcDonODBweCd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmgxKHtzdHlsZToge2NvbG9yOicjMWNhM2ZkJyxmb250V2VpZ2h0OicxMDAnLGNvbG9yOid3aGl0ZScsdGV4dEFsaWduOidjZW50ZXInLGZvbnRTaXplOiczOHB4Jyxmb250RmFtaWx5OidPcGVuIFNhbnMnLGZvbnRTaXplOic0MHB4J319LCBcIiBHZW5lcmF0ZSBIaWdoIFF1YWxpdHkgUHJvc3BlY3QgTGlzdHMgXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDEoe3N0eWxlOiB7Y29sb3I6JyMxY2EzZmQnLGZvbnRXZWlnaHQ6JzEwMCcsdGV4dEFsaWduOidjZW50ZXInLGNvbG9yOid3aGl0ZScsZm9udFNpemU6JzQ2cHgnLGZvbnRGYW1pbHk6J09wZW4gU2FucycsIGZvbnRTdHlsZTonaXRhbGljJ319LCBcIiBBY2NlbGVyYXRlIFNhbGVzIFwiKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiI3NpZ251cFwiLCBjbGFzc05hbWU6IFwiYnRuLWxnIGJ0bi1zdWNjZXNzIGJ0biBzdGFydC10cmlhbFwifSwgXCJTdGFydCBZb3VyIEZyZWUgVHJpYWwgVG9kYXlcIiksIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsIHBhbmVsLWRlZmF1bHRcIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtaGVhZGluZ1wifSwgXCLCoFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtYm9keVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5mb3JtKHtvblN1Ym1pdDogdGhpcy5sb2dpbn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3BsYWNlaG9sZGVyOiBcIkVtYWlsXCIsIGlkOiBcImVtYWlsXCIsIHR5cGU6IFwidGV4dFwiLCBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGlucHV0LWxnXCIsIHN0eWxlOiB7Zm9udFdlaWdodDonMTAwJyxmb250U2l6ZTonMjJweCd9fSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3BsYWNlaG9sZGVyOiBcIlBhc3N3b3JkXCIsIHR5cGU6IFwicGFzc3dvcmRcIiwgaWQ6IFwicGFzc3dvcmRcIiwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBpbnB1dC1sZ1wiLCBzdHlsZToge2ZvbnRXZWlnaHQ6JzEwMCcsZm9udFNpemU6JzIycHgnfX0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgb25DbGljazogdGhpcy5sb2dpbiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4tbGdcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsYmFja2dyb3VuZENvbG9yOicjMWNhM2ZkJ319LCBcIkxvZyBJblwiKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtZm9vdGVyXCJ9LCBcIsKgXCIpXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImdyYWRpZW50XCJ9LCBcIiBcIiksIFxuXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtNSBjb2wtc20tNVwiLCBpZDogXCJuZXR3b3JrLXBpY3R1cmVcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHtoZWlnaHQ6NTAwLGJhY2tncm91bmRJbWFnZTpcInVybCgnYnVpbGQvaW1nL25ldHdvcmtfaWNvbl8xLnBuZycpXCJ9fVxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gTG9hZGluZ1NwaW5uZXJcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJzcGlubmVyXCIsIHN0eWxlOiB7bWFyZ2luVG9wOicxODBweCd9fSwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwic3Bpbm5lci1jb250YWluZXIgY29udGFpbmVyMVwifSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUgY2lyY2xlMVwifSksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlIGNpcmNsZTJcIn0pLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZSBjaXJjbGUzXCJ9KSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUgY2lyY2xlNFwifSlcbiAgICAgICksIFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInNwaW5uZXItY29udGFpbmVyIGNvbnRhaW5lcjJcIn0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlIGNpcmNsZTFcIn0pLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZSBjaXJjbGUyXCJ9KSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUgY2lyY2xlM1wifSksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlIGNpcmNsZTRcIn0pXG4gICAgICApLCBcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJzcGlubmVyLWNvbnRhaW5lciBjb250YWluZXIzXCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZSBjaXJjbGUxXCJ9KSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUgY2lyY2xlMlwifSksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlIGNpcmNsZTNcIn0pLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZSBjaXJjbGU0XCJ9KVxuICAgICAgKVxuICAgIClcbiAgICApXG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbnRoZURhdGEgPSByZXF1aXJlKCcuLi9saWIvZGF0YS5taW4uanMnKSBcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gU2lnblVwXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAkKCdib2R5JykuY3NzKHtvdmVyZmxvdzonaGlkZGVuJ30pXG4gIH0sXG5cbiAgbG9naW46IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdsb2dpbicpXG4gICAgZW1haWwgPSAkKCcjZW1haWwnKS52YWwoKVxuICAgIHBhc3N3b3JkID0gJCgnI3Bhc3N3b3JkJykudmFsKClcbiAgICBwID0ge1wiWC1QYXJzZS1BcHBsaWNhdGlvbi1JZFwiOiBcIk44NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkpcIixcbiAgICAgICAgIFwiWC1QYXJzZS1SRVNULUFQSS1LZXlcIjogXCJWTjZFd1Z5Qlp3TzF1cGhzQlBzYXU4dDdKUVJwMDBVTTNLWXNpaVFiXCJ9XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvbG9naW4nLFxuICAgICAgaGVhZGVyczogcCxcbiAgICAgIHR5cGU6J0dFVCcsXG4gICAgICBkYXRhOiB7XG4gICAgICAgICd1c2VybmFtZSc6ZW1haWwsXG4gICAgICAgICdwYXNzd29yZCc6cGFzc3dvcmRcbiAgICAgIH0sXG4gICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlcykge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudFVzZXInLCBKU09OLnN0cmluZ2lmeShyZXMpKVxuICAgICAgICBsb2NhdGlvbi5ocmVmID0gXCIjXCJcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkgeyBcbiAgICBkYXRhID0gdGhlRGF0YSgpXG4gICAgaW1nc18xID0gW11cbiAgICBpbWdzXzIgPSBbXVxuICAgIGZvcihpPTA7aSA8IDEyMDsgaSsrKSB7XG4gICAgICBpbWdzXzEucHVzaChSZWFjdC5ET00uaW1nKHtzcmM6IGRhdGFbaV0sIGNsYXNzTmFtZTogXCJwcm9zcGVjdC1pbWdcIn0pKVxuICAgIH1cbiAgICBmb3IoaT0xNTtpIDwgMzA7IGkrKykge1xuICAgICAgaW1nc18yLnB1c2goUmVhY3QuRE9NLmltZyh7c3JjOiBkYXRhW2ldLCBjbGFzc05hbWU6IFwicHJvc3BlY3QtaW1nXCJ9KSlcbiAgICB9XG5cbiAgY29uc29sZS5sb2coZGF0YSlcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcInNpZ251cFwifSwgXCIgXCIpLCBcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICAgIFJlYWN0LkRPTS5oMSh7Y2xhc3NOYW1lOiBcInRpdGxlXCJ9LCBcIkN1c3RvbWVyby5cIiksIFxuICAgICAgICBSZWFjdC5ET00uaDUoe2NsYXNzTmFtZTogXCJ0YWdsaW5lXCJ9LCBcIkdlbmVyYXRlIGhpZ2ggcXVhbGl0eSBwcm9zcGVjdCBsaXN0cy4gQWNjZWxlcmF0ZSBTYWxlcy5cIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0IGxvZ2luLWluZm9cIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtYm9keVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5mb3JtKHtvblN1Ym1pdDogdGhpcy5sb2dpbn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3BsYWNlaG9sZGVyOiBcIkVtYWlsXCIsIGlkOiBcImVtYWlsXCIsIHR5cGU6IFwidGV4dFwiLCBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGlucHV0LWxnXCIsIHN0eWxlOiB7Zm9udFdlaWdodDonMTAwJyxmb250U2l6ZTonMjJweCd9fSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3BsYWNlaG9sZGVyOiBcIlBhc3N3b3JkXCIsIHR5cGU6IFwicGFzc3dvcmRcIiwgaWQ6IFwicGFzc3dvcmRcIiwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBpbnB1dC1sZ1wiLCBzdHlsZToge2ZvbnRXZWlnaHQ6JzEwMCcsZm9udFNpemU6JzIycHgnfX0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgb25DbGljazogdGhpcy5sb2dpbiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4tbGdcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsYmFja2dyb3VuZENvbG9yOicjMWNhM2ZkJ319LCBcIkxvZyBJblwiKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgKSwgXG5cbiAgICAgICAgUmVhY3QuRE9NLmRpdih7aWQ6IFwiXCIsIHN0eWxlOiB7cG9zaXRpb246J2Fic29sdXRlJyx6SW5kZXg6Jy0yJyx0b3A6MCxsZWZ0OjB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIlwiLCBzdHlsZToge21hcmdpbkxlZnQ6MzQsIGRpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgIGltZ3NfMSwgXG4gICAgICAgICAgaW1nc18yXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvL01lc3NlbmdlclxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJhbGVydCBhbGVydC1zdWNjZXNzXCIsIFxuICAgICAgICAgICAgICdkYXRhLWFsZXJ0JzogXCJhbGVydFwiLCBcbiAgICAgICAgICAgICBzdHlsZToge3Bvc2l0aW9uOidhYnNvbHV0ZScsXG4gICAgICAgICAgICAgICAgICAgICB0b3A6IDMxLCBcbiAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OjMwLCBcbiAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6J25vbmUnLFxuICAgICAgICAgICAgICAgICAgICAgd2lkdGg6MjAwfX0sIFxuICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJjbG9zZVwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oaWRlQWxlcnR9LCBcIsOXXCIpLCBcbiAgICAgICAgICAgIFwiVGVzdFwiXG4gICAgICAgIClcbiAgICApO1xuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG52YXIgTG9hZGluZ1NwaW5uZXIgPSByZXF1aXJlKCcuL2xvYWRpbmdfc3Bpbm5lci5qcy5taW4uanMnKVxuXG52YXIgSm9iID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnSm9iJyxcbiAgc3RhcnRKb2I6IGZ1bmN0aW9uKCkge1xuICAgIC8vIEFkZCBMaW5rZWRpbiBMb2NhdGlvbnNcbiAgICAvLyBFbWFpbCBXaGVuIENvbXBsZXRlZFxuICAgIC8vIEhhdmUgUmVwb3J0IEZvciBOdW1iZXIgb2YgUHJvZmlsZXMgRm91bmQgLyBudW1iZXIgb2YgZW1haWxzIGZvdW5kIHBlciBtaW5pbmcgam9iXG4gICAgXG4gICAgbWluaW5nSm9iID0gdGhpcy5wcm9wcy5taW5pbmdKb2JcbiAgICBtaW5pbmdKb2Iuc3RhdHVzID0gXCJSdW5uaW5nXCJcbiAgICBtaW5pbmdKb2IubGFzdF9yYW4gPSBNYXRoLnJvdW5kKCtuZXcgRGF0ZSgpLzEwMDApXG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9NaW5pbmdKb2IvJyttaW5pbmdKb2Iub2JqZWN0SWQsXG4gICAgICB0eXBlOidQVVQnLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIC8vIHN0YXR1cyBzaG91bGQgYmUgd2FpdGluZ1xuICAgICAgZGF0YSA6IEpTT04uc3RyaW5naWZ5KHsnc3RhdHVzJzonUnVubmluZycsICdsYXN0X3Jhbic6TWF0aC5yb3VuZCgrbmV3IERhdGUoKS8xMDAwKStcIlwiIH0pLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgLy8gbWFrZSByZXF1ZXN0IHRvIGhlcm9rdSBhcGlcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAvL3VybDogJ2h0dHBzOi8vMC4wLjAuMDo1MDAwL21pbmluZ19qb2InICxcbiAgICAgICAgICB1cmw6ICdodHRwOi8vYWdpbGUtcGxhaW5zLTI0MzAuaGVyb2t1YXBwLmNvbS9taW5pbmdfam9iJyAsXG4gICAgICAgICAgLy90eXBlOidQT1NUJyxcbiAgICAgICAgICBjcm9zc0RvbWFpbjogdHJ1ZSxcbiAgICAgICAgICBkYXRhOnsnbG9jYWxlJzptaW5pbmdKb2IubG9jYWxlLCBcbiAgICAgICAgICAgICAgICAnY3VycmVudF90aXRsZSc6bWluaW5nSm9iLnByb3NwZWN0X3RpdGxlLFxuICAgICAgICAgICAgICAgICdjdXJyZW50X3VzZXJfaWQnOkpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5vYmplY3RJZCxcbiAgICAgICAgICAgICAgICAnY29tcGFueV9pZCc6SlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLmNvbXBhbnkub2JqZWN0SWQsXG4gICAgICAgICAgICAgICAgJ21pbmluZ19qb2JfaWQnOm1pbmluZ0pvYi5vYmplY3RJZH0sXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJylcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7bWluaW5nSm9iOiBtaW5pbmdKb2J9KVxuICB9LFxuXG4gIGRlbGV0ZUpvYjogZnVuY3Rpb24oKSB7XG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLnN0YXRlLm1pbmluZ0pvYilcbiAgICB0aGlzLnByb3BzLmRlbGV0ZUpvYih0aGlzLnN0YXRlLm1pbmluZ0pvYilcbiAgICAgIC8qXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvTWluaW5nSm9iLycrdGhpcy5zdGF0ZS5taW5pbmdKb2Iub2JqZWN0SWQsXG4gICAgICB0eXBlOidERUxFVEUnLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InKVxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG4gICAgICAqL1xuICB9LFxuXG4gIGNhbmNlbEpvYjogZnVuY3Rpb24oKSB7XG4gICAgbWluaW5nSm9iID0gdGhpcy5zdGF0ZS5taW5pbmdKb2JcbiAgICBtaW5pbmdKb2Iuc3RhdHVzID0gXCJcIlxuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvTWluaW5nSm9iLycrbWluaW5nSm9iLm9iamVjdElkLFxuICAgICAgdHlwZTonUFVUJyxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5wYXJzZUhlYWRlcnMsXG4gICAgICBkYXRhIDogSlNPTi5zdHJpbmdpZnkoeydzdGF0dXMnOicnfSksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJylcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuc2V0U3RhdGUoe21pbmluZ0pvYjogbWluaW5nSm9ifSlcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCl7XG4gICAgbWluaW5nSm9iID0gdGhpcy5wcm9wcy5taW5pbmdKb2JcbiAgICBidXR0b24gPSAobWluaW5nSm9iLnN0YXR1cyA9PSBcIlwiKSA/IFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXhzIGJ0bi1zdWNjZXNzXCIsIG9uQ2xpY2s6IHRoaXMuc3RhcnRKb2J9LCBcIiBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jaGVja1wifSksIFwiwqBSdW4gXCIpIDogUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLWRhbmdlclwiLCBvbkNsaWNrOiB0aGlzLmNhbmNlbEpvYn0sIFwiIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXRpbWVzXCJ9KSwgXCLCoENhbmNlbCBcIilcblxuICAgIGRpc2FibGVkID0gXCJcIlxuICAgIGRpc2FibGVkX3RyYXNoID0gXCJcIlxuICAgIC8qXG4gICAgZGlzYWJsZWQgPSAobWluaW5nSm9iLnN0YXR1cyA9PSBcIlwiKSA/IFwiYnRuIGJ0bi14cyBidG4tc3VjY2Vzc1wiIDogXCJidG4gYnRuLXhzIGJ0bi1zdWNjZXNzIGRpc2FibGVkXCJcbiAgICBkaXNhYmxlZF90cmFzaCA9IChtaW5pbmdKb2Iuc3RhdHVzID09IFwiXCIpID8gXCJidG4gYnRuLXhzIGJ0bi1kZWZhdWx0XCIgOiAgXCJidG4gYnRuLXhzIGJ0bi1kZWZhdWx0IGRpc2FibGVkXCJcbiAgICBidXR0b24gPSA8YSBocmVmPVwiamF2YXNjcmlwdDpcIiBjbGFzc05hbWU9e2Rpc2FibGVkfSBvbkNsaWNrPXt0aGlzLnN0YXJ0Sm9ifT4gPGkgY2xhc3NOYW1lPVwiZmEgZmEtY2hlY2tcIiAvPiZuYnNwO1J1biA8L2E+IFxuICAgICovXG5cbiAgICAvL2NvbnNvbGUubG9nKG1pbmluZ0pvYilcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnRyKG51bGwsIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgUmVhY3QuRE9NLmg2KG51bGwsIG1pbmluZ0pvYi5wcm9zcGVjdF90aXRsZSkpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFJlYWN0LkRPTS5oNihudWxsLCBtaW5pbmdKb2IubG9jYWxlKSksIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgUmVhY3QuRE9NLmg2KG51bGwsIChtaW5pbmdKb2IubGFzdF9yYW4gPT0gXCJcIiApID8gXCItLS0tXCIgOiBtb21lbnQudW5peChtaW5pbmdKb2IubGFzdF9yYW4pLmZyb21Ob3coKSkpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwiYmFkZ2VcIn0sIFxuICAgICAgICAgICAgKG1pbmluZ0pvYi5yZXN1bHRzID09IFwiXCIpID8gMCA6IG1pbmluZ0pvYi5yZXN1bHRzXG4gICAgICAgICAgKSwgXCLCoFwiLCAgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXCJwcm9maWxlcyBmb3VuZFwiKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3BhZGRpbmdUb3A6JzEycHgnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IChtaW5pbmdKb2Iuc3RhdHVzID09IFwiXCIgKSA/IFwibGFiZWwgbGFiZWwtcHJpbWFyeVwiIDogXCJsYWJlbCBsYWJlbC1zdWNjZXNzXCJ9LCBcbiAgICAgICAgICAgIChtaW5pbmdKb2Iuc3RhdHVzID09IFwiXCIpID8gXCJSZWFkeVwiIDogbWluaW5nSm9iLnN0YXR1c1xuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHtwYWRkaW5nVG9wOicxM3B4Jyx3aWR0aDonMTA1cHgnfX0sIFxuICAgICAgICAgIGJ1dHRvbiwgXG4gICAgICAgICAgXCLCoFwiLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IGRpc2FibGVkX3RyYXNoLCBcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuZGVsZXRlSm9ifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXRyYXNoLW9cIn0pXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gTWluaW5nIEpvYnNcbiAgLy97KHByb3NwZWN0cy5sZW5ndGggPT0gMCAmJiB0aGlzLnN0YXRlLmxvYWRpbmcgPT0gZmFsc2UpID8gPEVtcHR5Q29tcGFueVByb3NwZWN0c1BhbmVsIC8+IDogXCJcIn1cbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4geyBcbiAgICAgIG1pbmluZ0pvYnMgOiBbXSxcbiAgICAgIGxvYWRpbmcgICAgOiB0cnVlXG4gICAgfVxuICB9LFxuXG4gIGRlbGV0ZUpvYjogZnVuY3Rpb24oam9iKSB7XG4gICAgLy9jb25zb2xlLmxvZyhqb2Iub2JqZWN0SWQpXG4gICAgdmFyIGZpbHRlcmVkID0gXy5maWx0ZXIodGhpcy5zdGF0ZS5taW5pbmdKb2JzLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgY29uc29sZS5sb2coaXRlbS5vYmplY3RJZCAhPSBqb2Iub2JqZWN0SWQpXG4gICAgICAgcmV0dXJuIGl0ZW0ub2JqZWN0SWQgIT0gam9iLm9iamVjdElkXG4gICAgfSk7XG4gICAgLy9jb25zb2xlLmxvZyhmaWx0ZXJlZClcbiAgICB0aGlzLnNldFN0YXRlKHttaW5pbmdKb2JzOiBmaWx0ZXJlZH0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgLy9jb25zb2xlLmxvZygncmVuZGVyJylcbiAgICBtaW5pbmdKb2JzID0gW11cbiAgICBmb3IoaT0wO2k8dGhpcy5zdGF0ZS5taW5pbmdKb2JzLmxlbmd0aDtpKyspe1xuICAgICAgbWluaW5nSm9iID0gdGhpcy5zdGF0ZS5taW5pbmdKb2JzW2ldXG4gICAgICBtaW5pbmdKb2JzLnB1c2goXG4gICAgICAgIEpvYih7ZGVsZXRlSm9iOiB0aGlzLmRlbGV0ZUpvYiwgbWluaW5nSm9iOiBtaW5pbmdKb2J9KVxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1pbmluZy1qb2ItdG9vbGJhciBjb250YWluZXJcIiwgc3R5bGU6IHt3aWR0aDonMTAwJSd9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzXCIsICdkYXRhLXRvZ2dsZSc6IFwibW9kYWxcIiwgJ2RhdGEtdGFyZ2V0JzogXCIuYnMtZXhhbXBsZS1tb2RhbC1zbVwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wbHVzXCJ9KSwgXCIgwqAgRmluZCBQcm9zcGVjdHMgQnkgVGl0bGUgYW5kIEFyZWFcIlxuICAgICAgICApLCBcbiAgICAgICAgXCLCoCDCoFwiLCBcbiAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHMgZGlzYWJsZWRcIiwgJ2RhdGEtdG9nZ2xlJzogXCJtb2RhbFwiLCAnZGF0YS10YXJnZXQnOiBcIi5icy1leGFtcGxlLW1vZGFsLXNtXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pLCBcIiDCoCBGaW5kIENvbXBhbmllcyBIaXJpbmcgRm9yIFJvbGVzXCJcbiAgICAgICAgKSwgXG4gICAgICAgIFwiwqAgwqBcIiwgXG4gICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzIGRpc2FibGVkXCIsICdkYXRhLXRvZ2dsZSc6IFwibW9kYWxcIiwgJ2RhdGEtdGFyZ2V0JzogXCIuYnMtZXhhbXBsZS1tb2RhbC1zbVwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wbHVzXCJ9KSwgXCIgwqAgRmluZCBDb21wYW5pZXMgV2hvIEp1c3QgUmFpc2VkIEZ1bmRpbmdcIlxuICAgICAgICApLCBcbiAgICAgICAgXCLCoCDCoFwiLCBcbiAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHMgZGlzYWJsZWRcIiwgJ2RhdGEtdG9nZ2xlJzogXCJtb2RhbFwiLCAnZGF0YS10YXJnZXQnOiBcIi5icy1leGFtcGxlLW1vZGFsLXNtXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pLCBcIiDCoCBGaW5kIENvbXBhbmllcyBCeSBJbmR1c3R5IEFuZCBBcmVhXCJcbiAgICAgICAgKSwgXG4gICAgICAgIFwiwqAgwqBcIiwgXG4gICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzIGRpc2FibGVkXCIsICdkYXRhLXRvZ2dsZSc6IFwibW9kYWxcIiwgJ2RhdGEtdGFyZ2V0JzogXCIuYnMtZXhhbXBsZS1tb2RhbC1zbVwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wbHVzXCJ9KSwgXCIgwqAgUHJlc3MgQ292ZXJhZ2VcIlxuICAgICAgICApXG4gICAgKSwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJhdXRvc2Nyb2xsXCIsIHN0eWxlOiB7aGVpZ2h0Oic0MDBweCcsb3ZlcmZsb3c6J2F1dG8nfX0sIFxuICAgICAgICBSZWFjdC5ET00udGFibGUoe2NsYXNzTmFtZTogXCJ0YWJsZSB0YWJsZS1zdHJpcGVkXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00udGhlYWQobnVsbCwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJKb2IgVGl0bGVcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiQ2l0eVwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJMYXN0IFJhblwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJSZXN1bHRzXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIlN0YXR1c1wiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCLCoFwiKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS50Ym9keShudWxsLCBcbiAgICAgICAgICAgIG1pbmluZ0pvYnNcbiAgICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICAgICh0aGlzLnN0YXRlLmxvYWRpbmcpID8gTG9hZGluZ1NwaW5uZXIobnVsbCkgOiBcIlwiLCBcbiAgICAgICAgY3JlYXRlSm9iTW9kYWwoe2NyZWF0ZUpvYjogdGhpcy5jcmVhdGVKb2J9KVxuICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH0sXG4gIFxuICBydW5NaW5pbmdKb2I6IGZ1bmN0aW9uKCkge1xuXG4gIH0sXG5cbiAgY3JlYXRlSm9iOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgbWluaW5nSm9icyA9IHRoaXMuc3RhdGUubWluaW5nSm9ic1xuICAgIG1pbmluZ0pvYnMucHVzaChkYXRhKVxuICAgIHRoaXMuc2V0U3RhdGUoeyBtaW5pbmdKb2JzOiBtaW5pbmdKb2JzIH0pXG5cbiAgICAkKCcjbWluaW5nSm9iTW9kYWwnKS5tb2RhbCgnaGlkZScpXG4gICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdtb2RhbC1vcGVuJyk7XG4gICAgJCgnLm1vZGFsLWJhY2tkcm9wJykucmVtb3ZlKCk7XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCd0aGlzIGRpZCBtb3VudCcpXG4gICAgdGhpc3MgPSB0aGlzO1xuICAgIHFyeSA9ICd3aGVyZT17XCJjb21wYW55XCI6Jytjb21wYW55Kyd9JmNvdW50PTEmb3JkZXI9LWNyZWF0ZWRBdCdcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL01pbmluZ0pvYicsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIGRhdGE6IHFyeSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7bWluaW5nSm9icyA6IHJlcy5yZXN1bHRzfSlcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2xvYWRpbmcgICAgOiBmYWxzZX0pXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG59KTtcblxudmFyIGNyZWF0ZUpvYk1vZGFsID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnY3JlYXRlSm9iTW9kYWwnLFxuICBjcmVhdGVNaW5pbmdKb2I6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdtaW5pbmcgam9iJylcbiAgICBjb25zb2xlLmxvZygkKCcjcHJvc3BlY3RUaXRsZScpLnZhbCgpKVxuICAgIGNvbnNvbGUubG9nKCQoJyNsb2NhbGUnKS52YWwoKSlcblxuICAgIGRhdGEgPSAge1xuICAgICAgJ3Byb3NwZWN0X3RpdGxlJzogJCgnI3Byb3NwZWN0VGl0bGUnKS52YWwoKSxcbiAgICAgICdsb2NhbGUnICAgICAgICA6ICQoJyNsb2NhbGUnKS52YWwoKSxcbiAgICAgICdsYXN0X3JhbicgICAgICA6ICcnLFxuICAgICAgJ3Jlc3VsdHMnICAgICAgIDogJycsXG4gICAgICAnc3RhdHVzJyAgICAgICAgOiAnJywgICAvL1dhaXRpbmcgLCBSdW5uaW5nXG4gICAgfVxuICAgIC8vICB1cGRhdGUgbG9jYWwgam9icyBzdGF0ZVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvTWluaW5nSm9iJyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpXG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMucHJvcHMuY3JlYXRlSm9iKGRhdGEpXG4gICAgXG4gICAgLy8kKCdidXR0b24uY2xvc2UnKS5jbGljaygpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbCBmYWRlIGJzLWV4YW1wbGUtbW9kYWwtc21cIiwgdGFiSW5kZXg6IFwiLTFcIiwgcm9sZTogXCJkaWFsb2dcIiwgJ2FyaWEtbGFiZWxsZWRieSc6IFwibXlTbWFsbE1vZGFsTGFiZWxcIiwgJ2FyaWEtaGlkZGVuJzogXCJ0cnVlXCIsIGlkOiBcIm1pbmluZ0pvYk1vZGFsXCIsIHN0eWxlOiB7dG9wOicyMDBweCd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtZGlhbG9nIG1vZGFsLXNtXCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWNvbnRlbnRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1oZWFkZXJcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgY2xhc3NOYW1lOiBcImNsb3NlXCIsICdkYXRhLWRpc21pc3MnOiBcIm1vZGFsXCJ9LCBSZWFjdC5ET00uc3Bhbih7J2FyaWEtaGlkZGVuJzogXCJ0cnVlXCJ9LCBcIsOXXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJzci1vbmx5XCJ9LCBcIkNsb3NlXCIpKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDQoe2NsYXNzTmFtZTogXCJtb2RhbC10aXRsZVwiLCBpZDogXCJteU1vZGFsTGFiZWxcIn0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWJvbHRcIn0pLCBcIiDCoENyZWF0ZSBNaW5pbmcgSm9iXCIpXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmZvcm0oe29uU3VibWl0OiB0aGlzLmNyZWF0ZU1pbmluZ0pvYn0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe2lkOiBcInByb3NwZWN0VGl0bGVcIiwgdHlwZTogXCJ0ZXh0XCIsIHBsYWNlaG9sZGVyOiBcIkVudGVyIHByb3NwZWN0IHRpdGxlLi4uXCIsIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIn0pLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHtpZDogXCJsb2NhbGVcIiwgdHlwZTogXCJ0ZXh0XCIsIHBsYWNlaG9sZGVyOiBcIkVudGVyIENpdHkgQXJlYS4uLlwiLCBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sXCJ9KSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIG9uQ2xpY2s6IHRoaXMuY3JlYXRlTWluaW5nSm9iLCBwbGFjZWhvbGRlcjogXCJFbnRlciBDaXR5IEFyZWEuLi5cIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2Vzc1wiLCBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJywgd2lkdGg6JzEwMCUnfX0sIFwiU3RhcnQgTWluaW5nIVwiKVxuICAgICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgRW1wdHlNaW5pbmdKb2IgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdFbXB0eU1pbmluZ0pvYicsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtb2Zmc2V0LTMgY29sLW1kLTZcIiwgc3R5bGU6IHtoZWlnaHQ6NDAwfX0sIFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsIHBhbmVsLWRlZmF1bHRcIiwgc3R5bGU6IHttYXJnaW5Ub3A6MTAwLGhlaWdodDoyMDB9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1ib2R5XCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDEoe2NsYXNzTmFtZTogXCJsZWFkXCIsIHN0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInfX0sIFwiU3RhcnQgUHJvc3BlY3RpbmcgT24gTGlua2VkaW5cIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIG9uQ2xpY2s6IHRoaXMub3BlbkxpbmtlZGluV2luZG93LCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzXCIsIHN0eWxlOiB7YmFja2dyb3VuZEltYWdlOiAnbGluZWFyLWdyYWRpZW50KDE4MGRlZywgIzAwOTZmZiAwJSwgIzAwNWRmZiAxMDAlKSAhaW1wb3J0YW50JyxkaXNwbGF5OidibG9jaycsbWFyZ2luUmlnaHQ6J2F1dG8nLG1hcmdpbkxlZnQ6J2F1dG8nLHdpZHRoOjIwMCwgbWFyZ2luVG9wOjUwfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1zZWFyY2hcIn0pLCBcIiDCoFwiICsgJyAnICtcbiAgICAgICAgICAgIFwiU2VhcmNoIGZvciBjb21wYW5pZXMhXCIpXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gICAgKTtcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gTWluaW5nSm9iQ2FsZW5kYXJcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVwb3J0cyA6IFtdXG4gICAgfVxuICB9LFxuXG4gIGdldFNpZ25hbFJlcG9ydDogZnVuY3Rpb24oKSB7XG4gICAgdGhpc3NzcyA9IHRoaXM7XG4gICAgcHJvZmlsZSA9IEpTT04uc3RyaW5naWZ5KHtwcm9maWxlOiBhcHBDb25maWcucG9pbnRlcignUHJvc3BlY3RQcm9maWxlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGUub2JqZWN0SWQpfSlcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9TaWduYWxSZXBvcnQ/b3JkZXI9LWNyZWF0ZWRBdCcsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgZGF0YToge3doZXJlOiBwcm9maWxlfSxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICB0aGlzc3NzLnNldFN0YXRlKHtyZXBvcnRzOiByZXMucmVzdWx0c30pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgZ2V0UmVzdWx0czogZnVuY3Rpb24oKSB7XG4gICAgdGhpc3NzcyA9IHRoaXM7XG4gICAgcHJvZmlsZSA9IEpTT04uc3RyaW5naWZ5KHtwcm9maWxlOiBhcHBDb25maWcucG9pbnRlcignUHJvc3BlY3RQcm9maWxlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGUub2JqZWN0SWQpfSlcbiAgICBjb25zb2xlLmxvZyh0aGlzLnByb3BzKVxuICAgIHRoZVByb2ZpbGUgPSB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUGVvcGxlU2lnbmFsJyxcbiAgICAgIHR5cGU6J0dFVCcsXG4gICAgICBkYXRhOiB7d2hlcmU6IHByb2ZpbGUsIG9yZGVyOiAnLWNyZWF0ZWRBdCcsY291bnQ6dHJ1ZX0sXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5wYXJzZUhlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgLy8gZGl2aWRlIHJlc3VsdHMgaW50byBncm91cHMgb2YgMTAwXG4gICAgICAgIC8vIHNjaGVkdWxlIHRoZW0gZm9yIDEgaW50ZXJ2YWxzXG4gICAgICAgIG51bWJlcl9vZl9yZXBvcnRzID0gTWF0aC5jZWlsKHJlcy5jb3VudC8xMDApXG4gICAgICAgIHJlcG9ydHMgPSBbXVxuICAgICAgICBmb3IoaT0wO2k8IG51bWJlcl9vZl9yZXBvcnRzO2krKyl7XG4gICAgICAgICAgY291bnQgPSAoaSA9PSBudW1iZXJfb2ZfcmVwb3J0cy0xKSA/IHJlcy5jb3VudCAlIDEwMCA6IDEwMFxuICAgICAgICAgIGNvbnNvbGUubG9nKHRoZVByb2ZpbGUuZG9uZSlcbiAgICAgICAgICByZXBvcnRzLnB1c2goe1xuICAgICAgICAgIHNjaGVkdWxlZEF0OiBtb21lbnQudW5peCh0aGVQcm9maWxlLmRvbmUpLmFkZChpLCdkYXknKS5mcm9tTm93KCksXG4gICAgICAgICAgcGVvcGxlX2NvdW50OiBjb3VudCxcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHRoaXNzc3Muc2V0U3RhdGUoe3JlcG9ydHM6IHJlcG9ydHN9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmdldFJlc3VsdHMoKVxuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxSZWNpZXZlUHJvcHM6IGZ1bmN0aW9uKCkge1xuICAgIC8vdGhpcy5nZXRSZXN1bHRzKClcbiAgfSxcblxuICBzZXRDdXJyZW50UmVwb3J0OiBmdW5jdGlvbihuZXdSZXBvcnQpIHtcbiAgICBjb25zb2xlLmxvZygnQ1VSUkVOVCBSRVBPUlQnKVxuICAgIGNvbnNvbGUubG9nKG5ld1JlcG9ydClcbiAgICB0aGlzLnByb3BzLnNldEN1cnJlbnRSZXBvcnQobmV3UmVwb3J0KVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmVwb3J0cyA9IFtdXG4gICAgZm9yKGk9MDtpPCB0aGlzLnN0YXRlLnJlcG9ydHMubGVuZ3RoOyBpKyspXG4gICAgICByZXBvcnRzLnB1c2goU2lnbmFsUmVwb3J0Um93KHtzZXRDdXJyZW50UmVwb3J0OiB0aGlzLnNldEN1cnJlbnRSZXBvcnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFZpZXc6IHRoaXMuc2V0Q3VycmVudFZpZXcsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwb3J0OiB0aGlzLnN0YXRlLnJlcG9ydHNbaV19KSlcblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCIsIHN0eWxlOiB7aGVpZ2h0OjQwMCwgb3ZlcmZsb3c6J2F1dG8nLHBhZGRpbmdMZWZ0OjAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDowLHdpZHRoOicxMDAlJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtoZWlnaHQ6NDQsYm9yZGVyQm90dG9tOidzb2xpZCAxcHggcmdiKDIyMSwgMjIxLCAyMjEpJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDQoe29uQ2xpY2s6IHRoaXMucmV0dXJuVG9DYWxlbmRhclZpZXcsIFxuICAgICAgICAgICAgICBzdHlsZToge2Zsb2F0OidsZWZ0JyxjdXJzb3I6J3BvaW50ZXInLG1hcmdpblRvcDo3LGZvbnRXZWlnaHQ6MjAwLFxuICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OjIwLHBhZGRpbmdUb3A6NSwgZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNhbGVuZGFyXCIsIHN0eWxlOiB7bWFyZ2luUmlnaHQ6NX19KSwgXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZS5uYW1lXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0xMlwiLCBzdHlsZToge3BhZGRpbmdMZWZ0OjAscGFkZGluZ1JpZ2h0OjAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6J2F1dG8nLGhlaWdodDozNTZ9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtvdmVyZmxvdzonYXV0byd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGFibGUoe2NsYXNzTmFtZTogXCJ0YWJsZSB0YWJsZS1zdHJpcGVkXCIsIHN0eWxlOiB7bWFyZ2luQm90dG9tOjB9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50aGVhZChudWxsLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG9jay1vXCJ9KSwgXCLCoFwiICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgXCJTY2hlZHVsZWRcIlxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9fSwgXCJQcm9zcGVjdHNcIiksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt3aWR0aDoxNTAsdGV4dEFsaWduOidjZW50ZXInfX0pXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGJvZHkoe2NsYXNzTmFtZTogXCJyZXBvcnRzXCJ9LCBcbiAgICAgICAgICAgICAgICByZXBvcnRzXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxudmFyIFNpZ25hbFJlcG9ydFJvdyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1NpZ25hbFJlcG9ydFJvdycsXG4gIHJvd0NsaWNrOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnByb3BzLnNldEN1cnJlbnRSZXBvcnQodGhpcy5wcm9wcy5yZXBvcnQpXG4gIH0sXG5cbiAgcHJvc3BlY3RBbGxTaWduYWxSZXBvcnRQcm9zcGVjdHM6IGZ1bmN0aW9uKGUpIHtcbiAgICAvKlxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAvLyBVcGRhdGUgVUlcbiAgICBjb25zb2xlLmxvZyh0aGlzLnByb3BzLnJlcG9ydC5vYmplY3RJZClcbiAgICB0aGlzcyA9IHRoaXNcbiAgICAkLmFqYXgoe1xuICAgICAgLy91cmw6J2h0dHA6Ly9uYW1lbGVzcy1yZXRyZWF0LTM1MjUuaGVyb2t1YXBwLmNvbS9wcm9zcGVjdF9zaWduYWxfcmVwb3J0JyxcbiAgICAgIHVybDonaHR0cDovLzEyNy4wLjAuMTo1MDAwL3Byb3NwZWN0X3NpZ25hbF9yZXBvcnQnLFxuICAgICAgZGF0YToge3NpZ25hbF9yZXBvcnRfaWQ6IHRoaXNzLnByb3BzLnJlcG9ydC5vYmplY3RJZCB9LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IGNvbnNvbGUubG9nKHJlcykgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyKSB9XG4gICAgfSlcbiAgICAqL1xuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS50cih7b25DbGljazogdGhpcy5yb3dDbGljaywgc3R5bGU6IHtjdXJzb3I6J3BvaW50ZXInfX0sIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCksIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidyaWdodCcscGFkZGluZ1RvcDoxNX19LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNsb3VkLWRvd25sb2FkXCIsIHN0eWxlOiB7Y29sb3I6JyM1NTUnfX0pXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBcbiAgICAgICAgICAgIHRoaXMucHJvcHMucmVwb3J0LnNjaGVkdWxlZEF0XG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLXN1Y2Nlc3NcIn0sIFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5yZXBvcnQucGVvcGxlX2NvdW50XG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICBcIsKgIFBlb3BsZSBmb3VuZC5cIlxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucHJvc3BlY3RBbGxTaWduYWxSZXBvcnRQcm9zcGVjdHMsIFxuICAgICAgICAgICAgIHN0eWxlOiB7Zm9udFdlaWdodDonYm9sZCcsbWFyZ2luVG9wOjV9LCBcbiAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tc3VjY2Vzc1wifSwgXG4gICAgICAgICAgICBcIlByb3NwZWN0IEFsbFwiXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBTaWduYWxMb2FkaW5nXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvdW50OiAnficsXG4gICAgICBwcm9zcGVjdE5hbWUgOiAnficsXG4gICAgICBwcm9zcGVjdFRpdGxlIDogJ34nLFxuICAgICAgY29tcGFueU5hbWUgOiAnficsXG4gICAgfVxuICB9LFxuXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgdmFyIHB1c2hlciA9IG5ldyBQdXNoZXIoJzFhNjhhOTZjOGZkZTkzOGZhNzVhJyk7XG4gICAgb2JqZWN0SWQgPSB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm9iamVjdElkXG4gICAgdmFyIGNoYW5uZWwgPSBwdXNoZXIuc3Vic2NyaWJlKG9iamVjdElkKTtcbiAgICBjaGFubmVsLmJpbmQoXCJteS1ldmVudFwiLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKVxuICAgICAgdGhpc3Muc2V0U3RhdGUoe1xuICAgICAgICBjb3VudDogZGF0YS5jb3VudCxcbiAgICAgICAgcHJvc3BlY3ROYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgIHByb3NwZWN0VGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgIGNvbXBhbnlOYW1lOiBkYXRhLmNvbXBhbnlcbiAgICAgIH0pXG4gICAgfSk7XG5cbiAgICAvLyBHZXQgU2lnbmFsIFJlcG9ydCBDb3VudFxuICAgIC8vIEdldCBMYXN0IFBlb3BsZVNpZ25hbCBGb3VuZFxuICAgIHFyeSA9IHsgcHJvZmlsZTogYXBwQ29uZmlnLnBvaW50ZXIoJ1Byb3NwZWN0UHJvZmlsZScsb2JqZWN0SWQpIH1cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1NpZ25hbFJlcG9ydCcsXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgZGF0YTogeyd3aGVyZSc6SlNPTi5zdHJpbmdpZnkocXJ5KSxvcmRlcjonLWNyZWF0ZWRBdCd9LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2cocmVzKVxuICAgICAgICBjb3VudCA9IChyZXMucmVzdWx0c1swXSkgPyByZXMucmVzdWx0c1swXS5wZW9wbGVfY291bnQgOiAwXG4gICAgICAgIFxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7Y291bnQ6IGNvdW50IH0pXG4gICAgICB9LFxuICAgIH0pO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUGVvcGxlU2lnbmFsJyxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBkYXRhOiB7J3doZXJlJzpKU09OLnN0cmluZ2lmeShxcnkpLG9yZGVyOictY3JlYXRlZEF0J30sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtcbiAgICAgICAgICBwcm9zcGVjdE5hbWU6IChyZXMucmVzdWx0c1swXSkgPyByZXMucmVzdWx0c1swXS5saW5rX3RleHQgOiBcIlwiLFxuICAgICAgICAgIHByb3NwZWN0VGl0bGU6IChyZXMucmVzdWx0c1swXSkgPyByZXMucmVzdWx0c1swXS50aXRsZSA6IFwiXCIsXG4gICAgICAgICAgY29tcGFueU5hbWU6IChyZXMucmVzdWx0c1swXSkgPyByZXMucmVzdWx0c1swXS5jb21wYW55IDogXCJcIlxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICB9KTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgUHVzaGVyLmxvZyA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgIGlmICh3aW5kb3cuY29uc29sZSAmJiB3aW5kb3cuY29uc29sZS5sb2cpIHtcbiAgICAgICAgLy93aW5kb3cuY29uc29sZS5sb2cobWVzc2FnZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuaW5pdGlhbGl6ZSgpXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgfSxcblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGNvdW50OiAnficsXG4gICAgICBwcm9zcGVjdE5hbWUgOiAnficsXG4gICAgICBwcm9zcGVjdFRpdGxlIDogJ34nLFxuICAgICAgY29tcGFueU5hbWUgOiAnficsXG4gICAgfSlcbiAgICB0aGlzLmluaXRpYWxpemUoKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgLy8gU2hvdyBjb21wYW5pZXMgZm9yIGhpcmluZyBzaWduYWxzXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7YmFja2dyb3VuZDonbGluZWFyLWdyYWRpZW50KCNkYWU4ZmYsI2RhZThmZiknLCBiYWNrZ3JvdW5kSW1hZ2U6ICdyYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IGNlbnRlciBjZW50ZXIsI2ZmZiwjZGZmMWZkIDkwMHB4KScsaGVpZ2h0OicxMDAlJyxwYWRkaW5nVG9wOjEwfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwic2lnbmFsLWNhcmRcIiwgc3R5bGU6IHtcbiAgICAgICAgICAgIHdpZHRoOjUwMCx0ZXh0QWxpZ246J2NlbnRlcicsZGlzcGxheTonYmxvY2snLG1hcmdpblJpZ2h0OidhdXRvJyxcbiAgICAgICAgICAgIG1hcmdpbkxlZnQ6J2F1dG8nLG1hcmdpblRvcDowLGhlaWdodDoyMDBcbiAgICAgICAgICB9fSwgXG5cbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImxvYWRpbmctdHdvLWJhbGxzXCIsIHN0eWxlOiB7aGVpZ2h0OjIwLHdpZHRoOjIwfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJkb3QxXCIsIHN0eWxlOiB7Y29sb3I6J3JlZCd9fSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJkb3QyXCIsIHN0eWxlOiB7Y29sb3I6J3JlZCd9fSlcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcIlwiLCBzdHlsZToge2NvbG9yOicjMWNhM2ZkJywgZm9udFdlaWdodDonYm9sZCcsbWFyZ2luVG9wOi0xMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luTGVmdDotMjAwLCBmb250U2l6ZTozMiwgZm9udEZhbWlseTonUHJveGltYS1Ob3ZhJ319LCBcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuY291bnQgKyBcIiBwZW9wbGUgZm91bmQuXCJcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luVG9wOi00OCxtYXJnaW5SaWdodDo1NX19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5Cb3R0b206MywgZm9udFdlaWdodDonYm9sZCd9fSwgdGhpcy5zdGF0ZS5wcm9zcGVjdE5hbWUsIFwiIC0gwqBcIiwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2ZvbnRXZWlnaHQ6NTAwLCBmb250U3R5bGU6J2l0YWxpYyd9fSwgXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5wcm9zcGVjdFRpdGxlKSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpblRvcDowLHRleHRBbGlnbjonbGVmdCd9fSwgXG4gICAgICAgICAgICAgIHRoaXMuc3RhdGUuY29tcGFueU5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH0sXG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBQYW5lbCBGb290aW5nXG4gIHBhZ2luYXRlUHJldmlvdXM6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0aGlzcyA9IHRoaXM7XG5cbiAgICBxcnkgPSB7XG4gICAgICB3aGVyZTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBjb21wYW55OiBhcHBDb25maWcuY29tcGFueSxcbiAgICAgICAgYXJjaGl2ZWQ6IHRydWUsXG4gICAgICB9KSxcbiAgICAgIGNvdW50OiAxLFxuICAgICAgc2tpcDogKHRoaXNzLnByb3BzLmN1cnJlbnRQYWdlLTIpKnRoaXNzLnByb3BzLnByb3NwZWN0c1BlclBhZ2UsXG4gICAgICBsaW1pdDogdGhpc3MucHJvcHMucHJvc3BlY3RzUGVyUGFnZVxuICAgIH1cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdCcsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdiZWZvcmUgU2VuZCcpXG4gICAgICAgIHRoaXNzLnByb3BzLnNldFBhZ2luYXRlKHRydWUpXG4gICAgICB9LFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIGRhdGE6IHFyeSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIC8vdGhpc3Muc2V0U3RhdGUoe3Byb3NwZWN0czogcmVzLnJlc3VsdHN9KVxuICAgICAgICAvL3RoaXNzLnNldFN0YXRlKHtjdXJyZW50UGFnZTogdGhpcy5wcm9wcy5jdXJyZW50UGFnZSAtIDF9KVxuICAgICAgICB0aGlzcy5wcm9wcy5wYWdpbmF0ZShyZXMucmVzdWx0cywgdGhpc3MucHJvcHMuY3VycmVudFBhZ2UgLSAxKVxuICAgICAgICB0aGlzcy5wcm9wcy5zZXRQYWdpbmF0ZShmYWxzZSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24ocmVzKXsgY29uc29sZS5sb2cocmVzKSB9XG4gICAgfSk7XG4gIH0sXG5cblxuICBwYWdpbmF0ZTogZnVuY3Rpb24oZGlyZWN0aW9uKSB7XG4gICAgcHJvc3BlY3RzUGVyUGFnZSA9IHRoaXMucHJvcHMucHJvc3BlY3RzUGVyUGFnZVxuICAgIGlmKGRpcmVjdGlvbj09J3ByZXZpb3VzJylcbiAgICAgIHNraXAgPSAodGhpcy5wcm9wcy5jdXJyZW50UGFnZSAtIDIpKnByb3NwZWN0c1BlclBhZ2VcbiAgICBlbHNlIGlmKGRpcmVjdGlvbj09XCJmb3J3YXJkXCIpXG4gICAgICBza2lwID0gdGhpcy5wcm9wcy5jdXJyZW50UGFnZSpwcm9zcGVjdHNQZXJQYWdlXG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdD9za2lwPScrc2tpcCxcbiAgICAgIHR5cGU6J0dFVCcsXG4gICAgICBoZWFkZXJzOiBwYXJzZV9oZWFkZXJzLFxuICAgICAgZGF0YTogJ3doZXJlPXtcImNvbXBhbnlcIjonK2FwcENvbmZpZy5jb21wYW55Kyd9JmNvdW50PTEnLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgLy90aGlzcy5zZXRTdGF0ZSh7cHJvc3BlY3RzOiByZXMucmVzdWx0c30pXG4gICAgICAgIC8vdGhpc3Muc2V0U3RhdGUoe2N1cnJlbnRQYWdlOiB0aGlzLnByb3BzLmN1cnJlbnRQYWdlICsgMX0pXG4gICAgICAgIHRoaXMucHJvcHMucGFnaW5hdGUocmVzLnJlc3VsdHMsIHRoaXMucHJvcHMuY3VycmVudFBhZ2UgKyAxKVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgcGFnaW5hdGVGb3J3YXJkOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGhpc3MgPSB0aGlzO1xuICAgIHFyeSA9IHtcbiAgICAgIHdoZXJlOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGNvbXBhbnk6IGFwcENvbmZpZy5jb21wYW55LFxuICAgICAgICAvL3VzZXI6IGFwcENvbmZpZy51c2VyLFxuICAgICAgICBhcmNoaXZlZDogdHJ1ZVxuICAgICAgfSksXG4gICAgICBjb3VudDogMSxcbiAgICAgIHNraXA6IHRoaXNzLnByb3BzLmN1cnJlbnRQYWdlKnRoaXNzLnByb3BzLnByb3NwZWN0c1BlclBhZ2UsXG4gICAgICBsaW1pdDogdGhpc3MucHJvcHMucHJvc3BlY3RzUGVyUGFnZSxcbiAgICB9XG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdCcsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIGRhdGE6IHFyeSxcbiAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzcy5wcm9wcy5zZXRQYWdpbmF0ZSh0cnVlKVxuICAgICAgfSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcy5yZXN1bHRzKVxuICAgICAgICBjb25zb2xlLmxvZyhcInN1Y2Nlc3NcIilcbiAgICAgICAgdGhpc3MucHJvcHMucGFnaW5hdGUocmVzLnJlc3VsdHMsIHRoaXNzLnByb3BzLmN1cnJlbnRQYWdlICsgMSlcbiAgICAgICAgdGhpc3MucHJvcHMuc2V0UGFnaW5hdGUoZmFsc2UpXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlcyl7IGNvbnNvbGUubG9nKHJlcyk7IH1cbiAgICB9KTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgcGFnaW5hdGVGb3J3YXJkID0gdGhpcy5wYWdpbmF0ZUZvcndhcmRcbiAgICBwYWdpbmF0ZVByZXZpb3VzID0gdGhpcy5wYWdpbmF0ZVByZXZpb3VzXG5cbiAgICBNb3VzZXRyYXAuYmluZCgnbCcsIGZ1bmN0aW9uKCkgeyBcbiAgICAgIGNvbnNvbGUubG9nKCduZXcgZm9yd2FyZCcpXG4gICAgICBwYWdpbmF0ZUZvcndhcmQoKVxuICAgIH0pO1xuXG4gICAgTW91c2V0cmFwLmJpbmQoJ2gnLCBmdW5jdGlvbigpIHsgXG4gICAgICBjb25zb2xlLmxvZygnbmV3IGJhY2snKVxuICAgICAgcGFnaW5hdGVQcmV2aW91cygpXG4gICAgfSk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAvLyBTaG91bGQgYmUgaGFuZGxlZCBieSBQYW5sZSBGb290aW5nXG5cbiAgICBsYXN0UGFnZSA9IHRoaXMucHJvcHMuY3VycmVudFBhZ2UgPT0gdGhpcy5wcm9wcy5wYWdlc1xuICAgIGxlc3NUaGFuT25lUGFnZSA9IHRoaXMucHJvcHMuY291bnQgPCB0aGlzLnByb3BzLnByb3NwZWN0c1BlclBhZ2VcbiAgICBmb3J3YXJkID0gKGxhc3RQYWdlIHx8IGxlc3NUaGFuT25lUGFnZSkgPyAnZGlzYWJsZWQnIDogJydcblxuICAgIHByZXZpb3VzID0gKHRoaXMucHJvcHMuY3VycmVudFBhZ2UgLSAxKSA/ICcnIDogJ2Rpc2FibGVkJ1xuXG4gICAgbG93ZXJMaW1pdCA9ICh0aGlzLnByb3BzLmN1cnJlbnRQYWdlLTEpKnRoaXMucHJvcHMucHJvc3BlY3RzUGVyUGFnZVxuICAgIHVwcGVyTGltaXQgPSB0aGlzLnByb3BzLmN1cnJlbnRQYWdlKnRoaXMucHJvcHMucHJvc3BlY3RzUGVyUGFnZVxuXG4gICAgbG93ZXJMaW1pdCA9IChsb3dlckxpbWl0KSA/IGxvd2VyTGltaXQgOiAxXG4gICAgdXBwZXJMaW1pdCA9ICh1cHBlckxpbWl0ID4gdGhpcy5wcm9wcy5jb3VudCkgPyB0aGlzLnByb3BzLmNvdW50IDogdXBwZXJMaW1pdFxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1mb290aW5nXCIsIFxuICAgICAgICAgICBpZDogXCJuYXZiYXJcIiwgXG4gICAgICAgICAgIHN0eWxlOiB7aGVpZ2h0OiczNXB4JyxwYWRkaW5nOicwcHgnLCBwYWRkaW5nVG9wOic3cHgnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luUmlnaHQ6JzIwcHgnfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICBzdHlsZToge21hcmdpblJpZ2h0Oic1cHgnfSwgXG4gICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnBhZ2luYXRlUHJldmlvdXMsIFxuICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJsdWUtZ3JhZGllbnQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBcIitwcmV2aW91c30sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1mYXN0LWJhY2t3YXJkXCJ9KVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucGFnaW5hdGVQcmV2aW91cywgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcInBhZ2luYXRlLWJhY2stYnRuIGJsdWUtZ3JhZGllbnQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBcIitwcmV2aW91c30sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jaGV2cm9uLWxlZnRcIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7bWFyZ2luTGVmdDo1LCBtYXJnaW5SaWdodDo1LGRpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6MTE1LCB0ZXh0QWxpZ246J2NlbnRlcid9fSwgXG4gICAgICAgICAgICBsb3dlckxpbWl0KycgLSAnK3VwcGVyTGltaXQrJyBvZiAnK3RoaXMucHJvcHMuY291bnRcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnBhZ2luYXRlRm9yd2FyZCwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcInBhZ2luYXRlLWZvcndhcmQtYnRuIGJsdWUtZ3JhZGllbnQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBcIitmb3J3YXJkfSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZXZyb24tcmlnaHRcIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHttYXJnaW5MZWZ0Oic1cHgnfSwgXG4gICAgICAgICAgICAgb25DbGljazogdGhpcy5wYWdpbmF0ZUZvcndhcmQsIFxuICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJibHVlLWdyYWRpZW50IGJ0biBidG4tcHJpbWFyeSBidG4teHMgXCIrZm9yd2FyZH0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1mYXN0LWZvcndhcmRcIn0pKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gU2lnbmFsQ2FyZFxuICBwcm9zcGVjdFBlcnNvbjogZnVuY3Rpb24oKSB7XG4gICAgLy8gQWRkIFRvIFNpZ25hbCBMaXN0XG4gICAgLy8gQWRkIENvbXBhbnlcbiAgICAvLyBBZGQgUHJvc3BlY3RcbiAgICBwZXJzb24gPSB0aGlzLnByb3BzLnBlcnNvblxuICAgIHBlcnNvbklkID0gcGVyc29uLm9iamVjdElkXG4gICAgY29tcGFueSA9IHRoaXMucHJvcHMucGVyc29uLmNvbXBhbnlcbiAgICBjb21wYW55SWQgPSBjb21wYW55Lm9iamVjdElkXG4gICAgcGVyc29uLnNpZ25hbElkID0gcGVyc29uLnNpZ25hbElkXG4gICAgY29tcGFueS5zaWduYWxJZCA9IGNvbXBhbnkub2JqZWN0SWRcbiAgICBwID0gcGVyc29uOyBjID0gY29tcGFueTtcbiAgICBkZWxldGUgcC5vYmplY3RJZDsgZGVsZXRlIGMub2JqZWN0SWQ7XG4gICAgZGVsZXRlIHAuY2xhc3NOYW1lOyBkZWxldGUgYy5jbGFzc05hbWU7XG4gICAgZGVsZXRlIHAuX190eXBlOyBkZWxldGUgYy5fX3R5cGU7XG4gICAgZGVsZXRlIHAuY3JlYXRlZEF0OyBkZWxldGUgYy5jcmVhdGVkQXQ7XG4gICAgZGVsZXRlIHAudXBkYXRlZEF0OyBkZWxldGUgYy51cGRhdGVkQXQ7XG4gICAgcC5jb21wYW55U2lnbmFsID0gcC5jb21wYW55XG4gICAgZGVsZXRlIHAuY29tcGFueVxuXG4gICAgcC5saW5rZWRpbl91cmwgPSBwLnVybFxuICAgIHAuY29tcGFueSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55XG4gICAgcC5hcmNoaXZlZCA9IHRydWVcbiAgICBwLmxvYWRpbmcgPSB0cnVlXG4gICAgcC5jaXR5ID0gcC50aXRsZS5zcGxpdCgnLScpWzBdXG4gICAgcC5wb3MgPSBwLnRpdGxlLnNwbGl0KCctJykuc2xpY2UoLTEpWzBdLnNwbGl0KCcgYXQgJylbMF1cbiAgICBwLmNvbXBhbnlfbmFtZSA9IHAudGl0bGUuc3BsaXQoJy0nKS5zbGljZSgtMSlbMF0uc3BsaXQoJyBhdCAnKS5zbGljZSgtMSlbMF0gXG4gICAgbmFtZSA9IHAubGlua190ZXh0LnNwbGl0KCd8JylbMF1cbiAgICBuYW1lID0gbmFtZS5zcGxpdCgnLScpWzBdXG4gICAgcC5uYW1lID0gbmFtZVxuICAgIHAud2Vic2l0ZVVybCA9IGNvbXBhbnkud2Vic2l0ZVVybFxuICAgIC8vIEF1dG9tYXRpY2FsbHkgQWRkIFRvIFRoZSBTaWduYWwgTGlzdCBJdCBCZWxvbmdzIFRvXG4gICAgXG4gICAgY29uc29sZS5sb2codGhpcy5wcm9wcy5wcm9maWxlKVxuICAgIHAubGlzdHMgPSBbeydfX3R5cGUnOidQb2ludGVyJywnY2xhc3NOYW1lJzonUHJvc3BlY3RMaXN0Jywnb2JqZWN0SWQnOnRoaXMucHJvcHMucHJvZmlsZS5wcm9zcGVjdF9saXN0Lm9iamVjdElkfV0gXG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0cycsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KHApLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Blb3BsZVNpZ25hbC8nK3BlcnNvbklkLFxuICAgICAgICAgIHR5cGU6J1BVVCcsXG4gICAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7cHJvc3BlY3RJZDogcmVzLm9iamVjdElkLCBwcm9zcGVjdGVkX29uOiBEYXRlLm5vdygpLzEwMDB9KSxcbiAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlcykgeyBjb25zb2xlLmxvZyhyZXMpIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkgeyB9XG4gICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgfVxuICAgIH0pXG5cbiAgICAvL0NyZWF0ZSBDb21wYW55IFByb3NwZWN0IHdpdGggUG9pbnRlciB0byBDb21wYW55U2lnbmFsXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Db21wYW55UHJvc3BlY3RzJyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoYyksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgLy9VcGRhdGUgQ29tcGFueSBTaWduYWwgV2l0aCBQb2ludGVyIHRvIENvbXBhbnkgUHJvc3BlY3QgYW5kIGRhdGUgcHJvc3BlY3RlZFxuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvQ29tcGFueVNpZ25hbC8nK2NvbXBhbnlJZCxcbiAgICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe3Byb3NwZWN0SWQ6IHJlcy5vYmplY3RJZCwgcHJvc3BlY3RlZF9vbjogRGF0ZS5ub3coKS8xMDAwfSksXG4gICAgICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpIHsgY29uc29sZS5sb2cocmVzKSB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgfVxuICAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IH1cbiAgICB9KVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcGVyc29uID0gdGhpcy5wcm9wcy5wZXJzb25cbiAgICBzaWduYWwgPSAocGVyc29uLnNpZ25hbHMpID8gcGVyc29uLnNpZ25hbHNbMF0gOiB7fVxuICAgIFxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwgcGFuZWwtZGVmYXVsdCBzaWduYWwtY2FyZFwifSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1ib2R5XCIsIHN0eWxlOiB7cGFkZGluZ0xlZnQ6MjUsIHBhZGRpbmdSaWdodDoyNX19LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDQobnVsbCwgXG4gICAgICAgICAgICBwZXJzb24udGl0bGVcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonMTAwJSd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHsgZmxvYXQ6J2xlZnQnLG1heFdpZHRoOiAnNjAlJywgd2hpdGVTcGFjZTogJ25vd3JhcCcsXG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLCB0ZXh0T3ZlcmZsb3c6ICdlbGxpcHNpcyd9fSwgXG4gICAgICAgICAgICAgIHBlcnNvbi5saW5rX3RleHQpXG4gICAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcInNpZ25hbC1zdHVmZlwiLCBcbiAgICAgICAgICAgIHN0eWxlOiAoXy5pc0VxdWFsKHNpZ25hbCwge30pKSA/IHtkaXNwbGF5Oidub25lJ30gOiB7ZGlzcGxheTonYmxvY2snfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBcIiBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1idWlsZGluZ1wifSksIFxuICAgICAgICAgICAgXCLCoCBcIiwgc2lnbmFsLmNvbXBhbnkpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbWFwLW1hcmtlclwifSksIFxuICAgICAgICAgICAgXCLCoCBcIiwgc2lnbmFsLmxvY2F0aW9uKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIFwiIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXN1aXRjYXNlXCJ9KSwgXG4gICAgICAgICAgICBcIsKgXCIsIHNpZ25hbC5qb2JfdGl0bGUsIFwiIFwiKVxuICAgICAgICApLCBcblxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3NcIiwgXG4gICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnByb3NwZWN0UGVyc29uLCBcbiAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6MTUsIGZvbnRXZWlnaHQ6J2JvbGQnLHdpZHRoOicxMDAlJ319LCBcbiAgICAgICAgICAgIFwiUHJvc3BlY3QgVGhpcyBQZXJzb25cIilcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgJCgnYm9keScpLmNzcyh7b3ZlcmZsb3c6J2hpZGRlbid9KVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYmFja2dyb3VuZC1pbWFnZVwifSksIFxuICAgICAgICBSZWFjdC5ET00ubmF2KHtjbGFzc05hbWU6IFwidGhlbmF2YmFyIG5hdmJhciBuYXZiYXItZGVmYXVsdCBuYXZiYXItZml4ZWQtdG9wXCIsIHJvbGU6IFwibmF2aWdhdGlvblwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lci1mbHVpZFwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcInRoZS10aXRsZSB0ay1mb2NvIGJyYW5kIG5hdmJhci1icmFuZFwiLCBzdHlsZToge2ZvbnRXZWlnaHQ6JzEwMCd9LCBcbiAgICAgICAgICAgICAgICBocmVmOiBcIiNcIn0sIFxuICAgICAgICAgICAgICBcIkN1c3RvbWVyb1wiLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7Zm9udFNpemU6JzIycHgnLG1hcmdpbkxlZnQ6JzMwcHgnfX0sIFwiU3VwZXJjaGFyZ2UgeW91ciBzYWxlcyEgXCIpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgICBQcmljaW5nVGFibGVzKG51bGwpLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImdyYWRpZW50XCJ9LCBcIiBcIilcbiAgICAgIClcbiAgICApXG4gICAgLypcbiAgICAgICAgICAgICAgPGEgaHJlZj1cIiNzaWdudXBcIiBjbGFzc05hbWU9XCJidG4gYnRuLXN1Y2Nlc3MgYnRuLWxnXCIgc3R5bGU9e3tkaXNwbGF5OidibG9jaycsYmFja2dyb3VuZENvbG9yOicjMWNhM2ZkJyxmbG9hdDoncmlnaHQnLG1hcmdpblRvcDonMTNweCcgfX0+TG9nIEluPC9hPlxuICAgICovXG4gIH1cbn0pO1xuXG52YXIgUHJpY2luZ1RhYmxlcyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1ByaWNpbmdUYWJsZXMnLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb250YWluZXJcIiwgc3R5bGU6IHttYXJnaW5Ub3A6MTUwfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicm93IGZsYXRcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1sZy0zIGNvbC1tZC0zIGNvbC14cy02XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJzaWduYWwtY2FyZCBwbGFuIHBsYW4yXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwicGxhbi1uYW1lXCJ9LCBcIiBTdGFydHVwIFwiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcInBsYW4tcHJpY2VcIn0sIFxuICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oMSh7c3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJyxjb2xvcjonIzAyOTRmNSd9fSwgXCIkNDk5wqBcIiwgUmVhY3QuRE9NLnNtYWxsKG51bGwsIFwiLyBtb250aFwiKSlcbiAgICAgICAgICAgICAgICAgICAgKSwgXG5cbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsLCBcIlVwIHRvIDEwMDAgRW1haWwgQ3JlZGl0c1wiKSwgXCIgXCIpLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsLCBcIlVwIHRvIDEwIFRlYW0gTWVtYmVyc1wiKSksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtzdHlsZToge3BhZGRpbmc6MH19LCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsKSwgXCIgSW5jbHVkZXM6IFwiKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgJ0VtYWlscyAmIFBob25lIE51bWJlcnMnKSksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uc3Ryb25nKG51bGwsIFwiUXVpY2sgU3RhcnQgUGFja2FnZVwiKSksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uc3Ryb25nKG51bGwsIFwiU2lnbmFsc1wiKSksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwiXCIsIHN0eWxlOiB7cGFkZGluZ0JvdHRvbTowfX0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCIjXCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgYnRuLW1kIGNvb2wtYnRuXCJ9LCBcIlNpZ24gVXBcIilcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICApXG4gICAgICAgICApLCBcblxuICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1sZy0zIGNvbC1tZC0zIGNvbC14cy02XCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcInNpZ25hbC1jYXJkIHBsYW4gcGxhbjMgZmVhdHVyZWRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcInBsYW4tbmFtZVwifSwgXCIgR3Jvd3RoIFwiKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwicGxhbi1wcmljZVwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDEoe3N0eWxlOiB7Zm9udFdlaWdodDonYm9sZCcsY29sb3I6JyMwMjk0ZjUnfX0sIFwiJDEyOTnCoFwiLCBSZWFjdC5ET00uc21hbGwobnVsbCwgXCIvIG1vbnRoXCIpKVxuICAgICAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgXCJVcCB0byAyNTAwIEVtYWlsIENyZWRpdHNcIiksIFwiIFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgXCJVcCB0byAyNSBUZWFtIE1lbWJlcnNcIikpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHtwYWRkaW5nOjB9fSwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCksIFwiIEluY2x1ZGVzOiBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uc3Ryb25nKG51bGwsIFwiQWxsIFN0YXJ0dXAgRmVhdHVyZXMgXCIpKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkoe3N0eWxlOiB7cGFkZGluZzowfX0sIFwiIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgXCJCdWxrIFNhbGVzZm9yY2UgSW50ZWdyYXRpb25cIikpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsLCBcIk1pbmluZyBKb2JzXCIpKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJcIiwgc3R5bGU6IHtwYWRkaW5nQm90dG9tOjB9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcIiNcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4tbWQgY29vbC1idG5cIn0sIFwiU2lnbiBVcFwiKVxuICAgICAgICAgICAgKVxuICAgICAgICAgKVxuICAgICApLCBcblxuICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLWxnLTMgY29sLW1kLTMgY29sLXhzLTZcIn0sIFxuICAgICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJzaWduYWwtY2FyZCBwbGFuIHBsYW40XCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcInBsYW4tbmFtZVwifSwgXCIgUHJlbWl1bSBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwicGxhbi1wcmljZVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5oMSh7c3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJyxjb2xvcjonIzAyOTRmNSd9fSwgXCIkMjk5OcKgXCIsIFJlYWN0LkRPTS5zbWFsbChudWxsLCBcIi8gbW9udGhcIikpXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsLCBcIlVwIHRvIDc1MDAgRW1haWwgQ3JlZGl0c1wiKSwgXCIgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsLCBcIlVwIHRvIDUwIFRlYW0gTWVtYmVyc1wiKSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtzdHlsZToge3BhZGRpbmc6MH19LCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsKSwgXCIgSW5jbHVkZXM6IFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgXCJBbGwgR3Jvd3RoIEZlYXR1cmVzIFwiKSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtzdHlsZToge3BhZGRpbmc6MH19LCBcIiBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wbHVzXCJ9KSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uc3Ryb25nKG51bGwsIFwiRGVkaWNhdGVkIEhhcHBpbmVzcyBPZmZpY2VyXCIpKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgXCJJbXByb3ZlZCB0ZXJyaXRvcnkgcGxhbm5pbmdcIikpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcIlwiLCBzdHlsZToge3BhZGRpbmdCb3R0b206MH19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiI1wiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi1tZCBjb29sLWJ0blwifSwgXCJTaWduIFVwXCIpXG4gICAgICAgICAgICApXG4gICAgICAgICApXG4gICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLWxnLTMgY29sLW1kLTMgY29sLXhzLTZcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcInNpZ25hbC1jYXJkIHBsYW4gcGxhbjFcIn0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJwbGFuLW5hbWVcIn0sIFwiIEVudGVycHJpc2UgXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwiXCJ9LCBcIiBcIiksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCksIFwiIFwiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsKSwgXCIgXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtzdHlsZToge2ZvbnRTaXplOjIyfX0sIFwiIFwiLCBSZWFjdC5ET00uc3Ryb25nKG51bGwsIFwiQ29udGFjdCBVc1wiKSwgXCIgXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uc3Ryb25nKG51bGwpLCBcIiBcIiksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCksIFwiICBcIilcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG5cbilcblxuKVxuICAgICAgKVxuICAgICk7XG4gIH0sXG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG4vL1RPRE8gLSBhYnN0cmFjdCBsaXN0c1xudmFyIFNpZGVNZW51UHJvc3BlY3RzID0gcmVxdWlyZSgnLi9zaWRlX21lbnVfdXNlcl9wcm9zcGVjdHMuanMubWluLmpzJyk7XG5cbnZhciBVc2VyUHJvc3BlY3QgPSByZXF1aXJlKCcuL3VzZXJfcHJvc3BlY3QuanMubWluLmpzJyk7XG52YXIgVXNlclByb3NwZWN0SGVhZGVyID0gcmVxdWlyZSgnLi91c2VyX3Byb3NwZWN0X2hlYWRlci5qcy5taW4uanMnKTtcbnZhciBTaWRlTWVudUxpc3RPcHRpb24gPSByZXF1aXJlKCcuL3VzZXJfc2lkZV9tZW51X2xpc3QuanMubWluLmpzJyk7XG52YXIgTG9hZGluZ1NwaW5uZXIgPSByZXF1aXJlKCcuL2xvYWRpbmdfc3Bpbm5lci5qcy5taW4uanMnKVxudmFyIFNwaW5uZXIgPSByZXF1aXJlKCcuL3NwaW5uZXIuanMubWluLmpzJylcbnZhciBQYW5lbEZvb3RpbmcgPSByZXF1aXJlKCcuL3BhbmVsX2Zvb3RpbmcuanMubWluLmpzJylcbnZhciBNZXNzZW5nZXIgPSByZXF1aXJlKCcuL21lc3Nlbmdlci5qcy5taW4uanMnKVxuXG52YXIgRGVsZXRlTGlzdE1vZGFsID0gcmVxdWlyZSgnLi9kZWxldGVfbGlzdF9tb2RhbC5qcy5taW4uanMnKVxudmFyIFJlbmFtZUxpc3RNb2RhbCA9IHJlcXVpcmUoJy4vcmVuYW1lX2xpc3RfbW9kYWwuanMubWluLmpzJylcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4geyAgcHJvc3BlY3RzICAgOiBbXSxcbiAgICAgICAgICAgICAgY3VycmVudFBhZ2UgOiAxLFxuICAgICAgICAgICAgICBjbGFzc05hbWU6ICdQcm9zcGVjdCcsXG4gICAgICAgICAgICAgIGxpc3RDbGFzc05hbWU6ICdQcm9zcGVjdExpc3QnLFxuICAgICAgICAgICAgICBwYWdlcyAgICAgICA6IDEsXG4gICAgICAgICAgICAgIGN1cnJlbnRMaXN0IDogJ0FsbCcsXG4gICAgICAgICAgICAgIGN1cnJlbnRMaXN0T2JqZWN0SWQgOiAnJyxcbiAgICAgICAgICAgICAgbG9hZGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgcGFnaW5hdGluZzogZmFsc2UsXG4gICAgICAgICAgICAgIHByb3NwZWN0c1BlclBhZ2U6IDUwLFxuICAgICAgICAgICAgICBkb3dubG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICAgIGxpc3RzIDogW10sXG4gICAgICAgICAgICAgIG1hc3RlckNoZWNrYm94Q2hlY2tlZDogZmFsc2UsXG4gICAgICAgICAgICAgIGtleWJvYXJkQWN0aXZlUHJvc3BlY3Q6IDAsIC8vZmlyc3RcbiAgICAgICAgICAgICAgc2VsZWN0ZWRQcm9zcGVjdHM6IFtdLFxuICAgICAgICAgICAgICB0b3RhbENvdW50ICA6IFwiflwiLCBcbiAgICAgICAgICAgICAgY291bnQgICAgICAgOiBcIn5cIiwgfVxuICB9LFxuXG4gIGNyZWF0ZUxpc3Q6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICBsaXN0cyA9IHRoaXMuc3RhdGUubGlzdHNcbiAgICBsaXN0cyA9IFtkYXRhXS5jb25jYXQobGlzdHMpXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGxpc3RzOiBsaXN0cyB9KVxuICB9LFxuXG4gIHJlbmFtZUxpc3Q6IGZ1bmN0aW9uKG5ld0xpc3ROYW1lKSB7XG4gICAgLy8gVXBkYXRlIExvY2FsIFN0YXRlXG4gICAgdGhpc3MgPSB0aGlzO1xuICAgIHZhciBmaWx0ZXJlZCA9IF8uZmlsdGVyKHRoaXMuc3RhdGUubGlzdHMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgIGlmKGl0ZW0ubmFtZSA9PSB0aGlzcy5zdGF0ZS5jdXJyZW50TGlzdCl7XG4gICAgICAgIGl0ZW0ubmFtZSA9IG5ld0xpc3ROYW1lXG4gICAgICAgIHJldHVybiBpdGVtXG4gICAgICB9XG4gICAgICByZXR1cm4gaXRlbVxuICAgIH0pO1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7bGlzdHMgOiBmaWx0ZXJlZCwgY3VycmVudExpc3Q6IG5ld0xpc3ROYW1lfSlcblxuICAgICQoJy5tb2RhbCcpLmNsaWNrKClcbiAgICAkKCcjbmV3TGlzdE5hbWUnKS52YWwoJycpXG4gICAgJCgnLm1vZGFsLWJhY2tkcm9wJykuY2xpY2soKVxuXG4gICAgLy8gUGVyc2lzdCAvIEFqYXhcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0TGlzdC8nK3RoaXNzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWQsXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgdHlwZTonUFVUJyxcbiAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoeyduYW1lJzpuZXdMaXN0TmFtZX0pLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IGNvbnNvbGUubG9nKHJlcykgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyKSB9XG4gICAgfSk7XG4gIH0sXG5cbiAgZGVsZXRlTGlzdDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGZpbHRlcmVkID0gXy5maWx0ZXIodGhpcy5zdGF0ZS5saXN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgaWYoaXRlbS5vYmplY3RJZCA9PSB0aGlzcy5zdGF0ZS5jdXJyZW50TGlzdE9iamVjdElkKVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHtsaXN0czogZmlsdGVyZWQsIGN1cnJlbnRMaXN0OiAnQWxsJ30pXG4gICAgdGhpcy5jaGFuZ2VMaXN0KCdBbGwnLCAnJylcblxuICAgIC8vIFJlbW92ZVxuICAgIGFwcENvbmZpZy5jbG9zZU1vZGFsKClcbiAgICAkKCcjbmV3TGlzdE5hbWUnKS52YWwoJycpXG5cbiAgICAvLyBQZXJzaXN0IC8gQWpheFxuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogYXBwQ29uZmlnLnVybCsnUHJvc3BlY3RMaXN0LycrdGhpc3Muc3RhdGUuY3VycmVudExpc3RPYmplY3RJZCxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5wYXJzZUhlYWRlcnMsXG4gICAgICB0eXBlOidERUxFVEUnLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IGNvbnNvbGUubG9nKHJlcykgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyKSB9XG4gICAgfSk7XG4gIH0sXG5cbiAgc2V0UGFnaW5hdGU6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7cGFnaW5hdGluZzogdmFsdWV9KVxuICB9LFxuXG4gIHNldERvd25sb2FkaW5nOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2Rvd25sb2FkaW5nOiB2YWx1ZX0pXG4gIH0sXG5cbiAgY2hhbmdlTGlzdDogZnVuY3Rpb24obmV3TGlzdE5hbWUsb2JqZWN0SWQpIHtcbiAgICAvLyBhZGQgb3ZlcmxheSBsb2FkaW5nXG4gICAgLy9jb25zb2xlLmxvZyhuZXdMaXN0TmFtZSlcbiAgICAvL2NvbnNvbGUubG9nKG9iamVjdElkKVxuXG4gICAgbG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5zdHJpbmdpZnkoW10pXG5cbiAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50TGlzdCA6IG5ld0xpc3ROYW1lfSlcbiAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50TGlzdE9iamVjdElkIDogb2JqZWN0SWR9KVxuICAgIHRoaXMuc2V0U3RhdGUoe3Byb3NwZWN0cyAgOiBbXSAgICB9KVxuICAgIHRoaXMuc2V0U3RhdGUoe2NvdW50ICAgICAgOiAnficgICB9KVxuICAgIHRoaXMuc2V0U3RhdGUoe3BhZ2VzICAgICAgOiAxICAgICB9KVxuICAgIHRoaXMuc2V0U3RhdGUoe2xvYWRpbmcgICAgOiB0cnVlICB9KVxuICAgIHRoaXMuc2V0U3RhdGUoe2N1cnJlbnRQYWdlOiAxfSlcbiAgICB0aGlzLnNldFN0YXRlKHtrZXlib2FyZEFjdGl2ZVByb3NwZWN0OiAwfSlcblxuICAgIGNvbXBhbnkgPSBKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikuY29tcGFueSlcbiAgICBxcnkgPSAnd2hlcmU9e1wiY29tcGFueVwiOicrY29tcGFueSsnLFwiYXJjaGl2ZWRcIjp0cnVlfSZjb3VudD0xJm9yZGVyPS1jcmVhdGVkQXQnXG4gICAgY29uc29sZS5sb2cobmV3TGlzdE5hbWUpXG5cbiAgICBpZih0aGlzLnN0YXRlLmN1cnJlbnRMaXN0ICE9ICdBbGwnIHx8IHR5cGVvZihvYmplY3RJZCkgIT0gXCJ1bmRlZmluZWRcIiAmJiBuZXdMaXN0TmFtZSAhPSAnQXJjaGl2ZWQnKXtcbiAgICAgIGN1cnJlbnRMaXN0ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAnb2JqZWN0SWQnICA6IG9iamVjdElkLCBcbiAgICAgICAgJ19fdHlwZScgICAgOiAnUG9pbnRlcicsIFxuICAgICAgICAnY2xhc3NOYW1lJyA6ICdQcm9zcGVjdExpc3QnIFxuICAgICAgfSlcblxuICAgICAgY29tcGFueSA9IEpTT04uc3RyaW5naWZ5KEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55KVxuICAgICAgcXJ5ID0gJ3doZXJlPXtcImNvbXBhbnlcIjonK2NvbXBhbnkrJ30mY291bnQ9MSdcbiAgICAgIHFyeSA9ICd3aGVyZT17XCJsaXN0c1wiOicrY3VycmVudExpc3QrJ30mY291bnQ9MSZvcmRlcj0tY3JlYXRlZEF0JmluY2x1ZGU9ZW1haWxfZ3Vlc3NlcyxlbWFpbF9ndWVzc2VzLnBhdHRlcm4nXG4gICAgfSBlbHNlIGlmIChuZXdMaXN0TmFtZSA9PSAnQXJjaGl2ZWQnKSB7XG4gICAgICBxcnkgPSAnd2hlcmU9e1wiY29tcGFueVwiOicrY29tcGFueSsnLFwiYXJjaGl2ZWRcIjpmYWxzZX0mY291bnQ9MSZvcmRlcj0tY3JlYXRlZEF0JmluY2x1ZGU9ZW1haWxfZ3Vlc3NlcyxlbWFpbF9ndWVzc2VzLnBhdHRlcm4nXG4gICAgfVxuICAgIGNvbnNvbGUubG9nKHFyeSlcbiAgICB2YXIgdGhpc3NzID0gdGhpcztcblxuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0JyxcbiAgICAgIHR5cGU6J0dFVCcsXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgYXN5bmM6IHRydWUsXG4gICAgICBkYXRhOiBxcnksXG4gICAgICBhamF4U3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnc3RhcnRlZCBsaXN0JylcbiAgICAgIH0sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe3Byb3NwZWN0czogcmVzLnJlc3VsdHN9KVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe2NvdW50OiByZXMuY291bnR9KVxuICAgICAgICAvL3RoaXNzcy5zZXRTdGF0ZSh7dG90YWxDb3VudDogcmVzLmNvdW50fSlcbiAgICAgICAgdGhpc3NzLnNldFN0YXRlKHtwYWdlczogTWF0aC5jZWlsKHJlcy5jb3VudC90aGlzc3MucHJvcHMucHJvc3BlY3RzUGVyUGFnZSl9KVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe2xvYWRpbmc6IGZhbHNlfSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnZXJyb3InKVxuICAgICAgICAvL2NvbnNvbGUubG9nKHJlcylcbiAgICAgIH1cbiAgICB9KVxuICB9LFxuXG4gIGNoZWNrYm94QWN0aW9uOiBmdW5jdGlvbihjaGVja2VkU3RhdGUsIG9iaklkKSB7XG4gICAgLyogU3RvcmluZyBDaGVja2VkIFByb3NwZWN0cyBJbiBMb2NhbFN0b3JhZ2UgVG8gTWFrZSBpdCBFYXNpZXIgVG9cbiAgICAgKiBDb3B5IGFuZCBNb3ZlIFByb3NwZWN0cyBcbiAgICAgKlxuICAgICAqIE1vdmUgVG8gVXNlcl9Qcm9zcGVjdHM/XG4gICAgICovXG4gICAgXG4gICAgc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cylcbiAgICAvL2NvbnNvbGUubG9nKGNoZWNrZWRTdGF0ZSlcbiAgICBpZihjaGVja2VkU3RhdGUpXG4gICAgICBzZWxlY3RlZFByb3NwZWN0cy5wdXNoKG9iaklkKVxuICAgIGVsc2VcbiAgICAgIHNlbGVjdGVkUHJvc3BlY3RzID0gXy5yZWplY3Qoc2VsZWN0ZWRQcm9zcGVjdHMsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihpZCl7cmV0dXJuIGlkID09IG9iaklkfSlcblxuICAgIHNlbGVjdGVkUHJvc3BlY3RzID0gXy51bmlxKHNlbGVjdGVkUHJvc3BlY3RzKVxuICAgIGNvbnNvbGUubG9nKHNlbGVjdGVkUHJvc3BlY3RzKVxuICAgIGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cyA9IEpTT04uc3RyaW5naWZ5KHNlbGVjdGVkUHJvc3BlY3RzKVxuICAgIHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkUHJvc3BlY3RzOiBzZWxlY3RlZFByb3NwZWN0c30pXG4gIH0sXG5cbiAgbWFzdGVyQ2hlY2tib3hDaGFuZ2VkOiBmdW5jdGlvbihtYXN0ZXJDaGVja2JveFZhbHVlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7bWFzdGVyQ2hlY2tib3hDaGVja2VkOiBtYXN0ZXJDaGVja2JveFZhbHVlfSlcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc3RhcnRLZXlib2FyZFNob3J0Y3V0cygpXG4gICAgJCgnYm9keScpLmNzcyh7b3ZlcmZsb3c6J2F1dG8nfSlcblxuICAgIHByb3NwZWN0cyA9IFtdXG4gICAgZm9yKGk9MDtpPCB0aGlzLnN0YXRlLnByb3NwZWN0cy5sZW5ndGg7aSsrKSB7XG4gICAgICB1cmwgPSB0aGlzLnN0YXRlLnByb3NwZWN0c1tpXS51cmxcbiAgICAgIHByb3NwZWN0ID0gdGhpcy5zdGF0ZS5wcm9zcGVjdHNbaV1cblxuICAgICAgaWYodXJsICE9IFwibm8gbGlua2VkaW4gd2Vic2l0ZVwiICYmIHR5cGVvZih1cmwpICE9IFwidW5kZWZpbmVkXCIgJiYgdXJsICE9IFwiXCIpe1xuICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSgnaHR0cDovLycsJycpXG4gICAgICAgIHRoZV9saW5rID0gUmVhY3QuRE9NLmEoe2hyZWY6ICdodHRwOi8vJyt1cmx9LCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWdsb2JlXCJ9KSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoZV9saW5rID0gXCJcIlxuICAgICAgfVxuXG4gICAgICBwcm9maWxlID0gdGhpcy5zdGF0ZS5wcm9zcGVjdHNbaV0ubGlua2VkaW5fdXJsLnJlcGxhY2UoJ2h0dHA6Ly8nLCcnKVxuICAgICAgcHJvZmlsZSA9IHRoaXMuc3RhdGUucHJvc3BlY3RzW2ldLmxpbmtlZGluX3VybC5yZXBsYWNlKCdodHRwczovLycsJycpXG4gICAgICBsaSA9IFJlYWN0LkRPTS5hKHtocmVmOiAnaHR0cDovLycrcHJvZmlsZSwgY2xhc3NOYW1lOiBcImxpbmtlZGluX2xpbmtcIn0sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbGlua2VkaW4tc3F1YXJlXCJ9KSlcblxuICAgICAga2V5Ym9hcmRTZWxlY3RlZCA9IChpID09IHRoaXMuc3RhdGUua2V5Ym9hcmRBY3RpdmVQcm9zcGVjdClcblxuICAgICAgc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cylcbiAgICAgIGFscmVhZHlDaGVja2VkPWZhbHNlXG4gICAgICBmb3IoaWk9MDtpaTwgc2VsZWN0ZWRQcm9zcGVjdHMubGVuZ3RoO2lpKyspXG4gICAgICAgIGlmKHByb3NwZWN0Lm9iamVjdElkID09IHNlbGVjdGVkUHJvc3BlY3RzW2lpXSlcbiAgICAgICAgICBhbHJlYWR5Q2hlY2tlZCA9IHRydWVcblxuICAgICAgICAvL2NvbnNvbGUubG9nKGFscmVhZHlDaGVja2VkKVxuXG4gICAgICBwcm9zcGVjdHMucHVzaChcbiAgICAgICAgVXNlclByb3NwZWN0KHtkZWxldGVQcm9zcGVjdDogdGhpcy5kZWxldGVQcm9zcGVjdCwgXG4gICAgICAgICAgICAgICAgICAgICAgcHJvc3BlY3Q6IHRoaXMuc3RhdGUucHJvc3BlY3RzW2ldLCBcbiAgICAgICAgICAgICAgICAgICAgICBtYXN0ZXJDaGVja2JveENoZWNrZWQ6IHRoaXMuc3RhdGUubWFzdGVyQ2hlY2tib3hDaGVja2VkLCBcbiAgICAgICAgICAgICAgICAgICAgICBrZXk6IHRoaXMuZ2VuZXJhdGVfaWQoKSwgXG4gICAgICAgICAgICAgICAgICAgICAgbGluazogdGhlX2xpbmssIFxuICAgICAgICAgICAgICAgICAgICAgIGtleWJvYXJkU2VsZWN0ZWQ6IGtleWJvYXJkU2VsZWN0ZWQsIFxuICAgICAgICAgICAgICAgICAgICAgIGNoZWNrYm94QWN0aW9uOiB0aGlzLmNoZWNrYm94QWN0aW9uLCBcbiAgICAgICAgICAgICAgICAgICAgICBhbHJlYWR5Q2hlY2tlZDogYWxyZWFkeUNoZWNrZWQsIFxuICAgICAgICAgICAgICAgICAgICAgIGxpOiBsaX0pKVxuICAgIH1cblxuICAgIGxpc3RUeXBlID0gKHRoaXMuc3RhdGUuY3VycmVudExpc3QgPT0gXCJBbGxcIikgPyB7ZGlzcGxheTonbm9uZSd9IDoge2Zsb2F0OidsZWZ0J31cbiAgICBsaXN0TmFtZVN0eWxlID0gKHRoaXMuc3RhdGUuY3VycmVudExpc3QgPT0gXCJBbGxcIikgPyB7ZGlzcGxheTonbm9uZSd9IDoge2Zsb2F0OidsZWZ0JyxkaXNwbGF5OidpbmxpbmUtYmxvY2snLCBmb250V2VpZ2h0OiAyMDAsIG1hcmdpblRvcDogMSwgcGFkZGluZ1JpZ2h0OiAxMCwgbWFyZ2luTGVmdDogLTEwfVxuICAgIGxpc3RCdG4gPSAodGhpcy5zdGF0ZS5jdXJyZW50TGlzdCA9PSBcIkFsbFwiKSA/IHtkaXNwbGF5Oidub25lJ30gOiB7ZmxvYXQ6J2xlZnQnLG1hcmdpbkxlZnQ6NX1cbiAgICBsaXN0T3B0aW9ucyA9ICh0aGlzLnN0YXRlLmN1cnJlbnRMaXN0ID09IFwiQWxsXCIpID8ge2Rpc3BsYXk6J25vbmUnfSA6IHtmbG9hdDoncmlnaHQnfVxuICAgIGNvcHlEcm9wZG93blN0eWxlID0gKHRoaXMuc3RhdGUuY3VycmVudExpc3QgPT0gXCJBbGxcIikgPyB7d2lkdGg6MTE0LCByaWdodDo0fSA6IHt3aWR0aDoxMTQsIHJpZ2h0OjM2fVxuICAgIGN1cnJlbnRMaXN0ID0gdGhpcy5zdGF0ZS5jdXJyZW50TGlzdFxuICAgIHBhZ2luYXRlT3ZlcmxheSA9ICh0aGlzLnN0YXRlLnBhZ2luYXRpbmcpID8gUGFnaW5hdGVPdmVybGF5KG51bGwpIDogXCJcIlxuXG4gICAgZG93bmxvYWRJY29uID0gKCF0aGlzLnN0YXRlLmRvd25sb2FkaW5nKSA/IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZG93bmxvYWRcIn0pIDogU3Bpbm5lcih7Y2lyY2xlU3R5bGU6IHtiYWNrZ3JvdW5kQ29sb3I6J3doaXRlJyxoZWlnaHQ6NCx3aWR0aDo0fSwgc3Bpbm5lclN0eWxlOiB7aGVpZ2h0OjEzLCB3aWR0aDoxMyxtYXJnaW46MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snLHBhZGRpbmdUb3A6Mn19KVxuICAgIHJldHVybiAoXG4gICAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCIsIHN0eWxlOiB7d2lkdGg6JzEwMCUnLHBhZGRpbmc6JzAnLCBiYWNrZ3JvdW5kOiAnbGluZWFyLWdyYWRpZW50KCNkYWU4ZmYsI2RhZThmZiknLCBiYWNrZ3JvdW5kSW1hZ2U6ICdyYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IGNlbnRlciBjZW50ZXIsI2ZmZiwjZGZmMWZkIDkwMHB4KSd9fSwgXG4gICAgICAgIFNpZGVNZW51UHJvc3BlY3RzKHtjdXJyZW50TGlzdDogdGhpcy5zdGF0ZS5jdXJyZW50TGlzdCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogdGhpcy5zdGF0ZS5jb3VudCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbENvdW50OiB0aGlzLnN0YXRlLnRvdGFsQ291bnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTGlzdDogdGhpcy5jaGFuZ2VMaXN0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUxpc3Q6IHRoaXMuY3JlYXRlTGlzdCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0czogdGhpcy5zdGF0ZS5saXN0c30pLCBcblxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLWxkLTEwIGNvbC1tZC0xMCBjb2wtc20tMTAgY29sLXhzLTEwXCIsIFxuICAgICAgICAgICAgIHN0eWxlOiB7cGFkZGluZzonMCd9fSwgXG4gICAgICAgICAgICAgIHBhZ2luYXRlT3ZlcmxheSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcInByb3NwZWN0RGV0YWlsQnV0dG9uc1wifSwgXG4gICAgICAgICAgICAgICAgTGlzdERldGFpbEJ1dHRvbnMoe1xuICAgICAgICAgICAgICAgICAgcmVuYW1lTGlzdDogdGhpcy5yZW5hbWVMaXN0LCBcbiAgICAgICAgICAgICAgICAgIGRlbGV0ZUxpc3Q6IHRoaXMuZGVsZXRlTGlzdCwgXG4gICAgICAgICAgICAgICAgICBjdXJyZW50TGlzdE5hbWU6IHRoaXMuc3RhdGUuY3VycmVudExpc3QsIFxuICAgICAgICAgICAgICAgICAgY3VycmVudExpc3Q6IHRoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZH0pLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJkcm9wZG93blwiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBsaXN0LW9wdGlvbnNcIiwgXG4gICAgICAgICAgICAgICAgICAgICBpZDogXCJcIiwgXG4gICAgICAgICAgICAgICAgICAgICBzdHlsZTogbGlzdE9wdGlvbnN9LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1iYXJzXCJ9KVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRyb3Bkb3duXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHsnZGF0YS10b2dnbGUnOiBcImRyb3Bkb3duXCIsIFxuICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiY29weVRvTGlzdFwiLCBcbiAgICAgICAgICAgICAgICAgICAgIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZHJvcC10YXJnZXQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBsaXN0LW9wdGlvbnNcIn0sIFxuICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jb3B5XCJ9KSwgXG4gICAgICAgICAgICAgICAgICAgICAgIFwiwqAgQ29weSBUbyBMaXN0IMKgXCIsICBcbiAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2FyZXQtZG93blwifSlcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBDdXJyZW50TGlzdHNUd28oe2xpc3RzOiB0aGlzLnN0YXRlLmxpc3RzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlEcm9wZG93blN0eWxlOiBjb3B5RHJvcGRvd25TdHlsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0QWN0aW9uOiB0aGlzLmNvcHlTZWxlY3RlZFByb3NwZWN0c30pXG4gICAgICAgICAgICAgICAgKSwgXG4gIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJkcm9wZG93blwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7J2RhdGEtdG9nZ2xlJzogXCJkcm9wZG93blwiLCBcbiAgICAgICAgICAgICAgICAgICAgIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgICBpZDogXCJtb3ZlVG9MaXN0XCIsIFxuICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IGxpc3RPcHRpb25zLCBcbiAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgYnRuLXhzIGxpc3Qtb3B0aW9uc1wifSwgXG4gICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXNoYXJlXCJ9KSwgXG4gICAgICAgICAgICAgICAgICAgICBcIsKgIE1vdmUgVG8gTGlzdCDCoFwiLCAgXG4gICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNhcmV0LWRvd25cIn0pXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgQ3VycmVudExpc3RzKHtsaXN0czogdGhpcy5zdGF0ZS5saXN0cywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0QWN0aW9uOiB0aGlzLm1vdmVTZWxlY3RlZFByb3NwZWN0c30pXG4gICAgICAgICAgICAgICAgKSwgXG5cbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7b25DbGljazogdGhpcy5kb3dubG9hZEZpbGUsIFxuICAgICAgICAgICAgICAgICAgIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgaWQ6IFwiZG93bmxvYWRQcm9zcGVjdHNcIiwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImRyb3AtdGFyZ2V0IGJ0biBidG4tcHJpbWFyeSBidG4teHMgbGlzdC1vcHRpb25zXCJ9LCBcbiAgICAgICAgICAgICAgICAgICBkb3dubG9hZEljb24sIFxuICAgICAgICAgICAgICAgICAgIFwiwqAgRG93bmxvYWQgQ1NWIMKgXCIgXG4gICAgICAgICAgICAgICAgKSwgXG5cbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7b25DbGljazogdGhpcy5kb3dubG9hZEZpbGUsIFxuICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IGxpc3RPcHRpb25zLCBcbiAgICAgICAgICAgICAgICAgICBocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgIGlkOiBcImRvd25sb2FkUHJvc3BlY3RzXCIsIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJkcm9wLXRhcmdldCBidG4gYnRuLXByaW1hcnkgYnRuLXhzIGxpc3Qtb3B0aW9uc1wifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWJ1aWxkaW5nXCJ9KSwgXCIgwqAgR2VuZXJhdGUgQ29tcGFueSBMaXN0IMKgXCIgXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgXG5cbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJhdXRvc2Nyb2xsXCIsIHN0eWxlOiB7aGVpZ2h0Oic0MDBweCcsb3ZlcmZsb3c6J2F1dG8nfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRhYmxlKHtjbGFzc05hbWU6IFwicHJvc3BlY3RzLXRhYmxlIHRhYmxlIHRhYmxlLXN0cmlwZWRcIiwgc3R5bGU6IHttYXJnaW5Cb3R0b206JzBweCd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50aGVhZCh7c3R5bGU6IHtiYWNrZ3JvdW5kQ29sb3I6J3doaXRlJ319LCBcbiAgICAgICAgICAgICAgICBVc2VyUHJvc3BlY3RIZWFkZXIoe21hc3RlckNoZWNrYm94Q2hhbmdlZDogdGhpcy5tYXN0ZXJDaGVja2JveENoYW5nZWR9KVxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnRib2R5KG51bGwsIFxuICAgICAgICAgICAgICAgIHByb3NwZWN0c1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgICh0aGlzLnN0YXRlLmxvYWRpbmcpID8gTG9hZGluZ1NwaW5uZXIobnVsbCkgOiBcIlwiXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApLCBcblxuICAgICAgUGFuZWxGb290aW5nKHtjdXJyZW50UGFnZTogdGhpcy5zdGF0ZS5jdXJyZW50UGFnZSwgXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiB0aGlzLnN0YXRlLmNvdW50LCBcbiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGU6IHRoaXMucGFnaW5hdGUsIFxuICAgICAgICAgICAgICAgICAgICBwcm9zcGVjdHNQZXJQYWdlOiB0aGlzLnN0YXRlLnByb3NwZWN0c1BlclBhZ2UsIFxuICAgICAgICAgICAgICAgICAgICBzZXRQYWdpbmF0ZTogdGhpcy5zZXRQYWdpbmF0ZSwgXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VzOiB0aGlzLnN0YXRlLnBhZ2VzfSksIFxuICAgICAgTWVzc2VuZ2VyKG51bGwpXG4gICAgKVxuICAgICk7XG4gIH0sXG5cbiAgcGFnaW5hdGU6IGZ1bmN0aW9uKG5ld1Byb3NwZWN0cywgbmV3UGFnZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgcHJvc3BlY3RzOiBuZXdQcm9zcGVjdHMsXG4gICAgICBjdXJyZW50UGFnZTogbmV3UGFnZSxcbiAgICAgIGtleWJvYXJkQWN0aXZlUHJvc3BlY3Q6IDBcbiAgICB9KVxuICAgIHRoaXMuc3RhcnRLZXlib2FyZFNob3J0Y3V0cygpXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dG9zY3JvbGwnKS5zY3JvbGxUb3AgPSAwXG4gIH0sXG5cbiAgZG93bmxvYWRGaWxlOiBmdW5jdGlvbigpIHtcbiAgICBsaXN0ID0ge1xuICAgICAgJ19fdHlwZScgICA6ICAnUG9pbnRlcicsXG4gICAgICAnY2xhc3NOYW1lJzogICdQcm9zcGVjdExpc3QnLFxuICAgICAgJ29iamVjdElkJyA6ICB0aGlzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWRcbiAgICB9XG4gICAgbG9jYWxTdG9yYWdlLmRvd25sb2FkX3RvdGFsID0gTWF0aC5jZWlsKHRoaXMuc3RhdGUuY291bnQvMTAwMClcbiAgICBsb2NhbFN0b3JhZ2UuZG93bmxvYWRzICAgICAgPSAwXG5cbiAgICBpZih0aGlzLnN0YXRlLmN1cnJlbnRMaXN0ID09IFwiQWxsXCIpIHtcbiAgICAgIHFyeSA9IHtcbiAgICAgICAgd2hlcmUgOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgY29tcGFueTogYXBwQ29uZmlnLmNvbXBhbnlcbiAgICAgICAgfSksXG4gICAgICAgIGNvdW50OiAxLFxuICAgICAgICBhcmNoaXZlZDogdHJ1ZSxcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcXJ5ID0ge1xuICAgICAgICB3aGVyZTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGxpc3RzOiBsaXN0XG4gICAgICAgIH0pLFxuICAgICAgICBjb3VudDogMSxcbiAgICAgICAgYXJjaGl2ZWQ6IHRydWUsXG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHRoaXNzID0gdGhpcztcbiAgICBmb3IoaT0wO2k8IE1hdGguY2VpbCh0aGlzLnN0YXRlLmNvdW50LzEwMDApOyBpKyspe1xuICAgICAgJC5hamF4KHtcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdD9saW1pdD0xMDAwJnNraXA9JytpLFxuICAgICAgICB0eXBlOidHRVQnLFxuICAgICAgICBoZWFkZXJzOiBhcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7ZG93bmxvYWRpbmc6IHRydWV9KVxuICAgICAgICB9LFxuICAgICAgICBkb3dubG9hZEZpbGU6ICdkb3dubG9hZF8nK2ksXG4gICAgICAgIGRhdGE6IHFyeSxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgICBmb3IoaT0wO2k8IHJlcy5yZXN1bHRzLmxlbmd0aDtpKyspIHtcbiAgICAgICAgICAgIGRlbGV0ZSByZXMucmVzdWx0c1tpXS5jb21wYW55XG4gICAgICAgICAgICBkZWxldGUgcmVzLnJlc3VsdHNbaV0ucG9zXG4gICAgICAgICAgICBkZWxldGUgcmVzLnJlc3VsdHNbaV0udXNlclxuICAgICAgICAgICAgZGVsZXRlIHJlcy5yZXN1bHRzW2ldLm9iamVjdElkXG4gICAgICAgICAgICBkZWxldGUgcmVzLnJlc3VsdHNbaV0uY3JlYXRlZEF0XG4gICAgICAgICAgICBkZWxldGUgcmVzLnJlc3VsdHNbaV0udXBkYXRlZEF0XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQWRkIFJlc3VsdHMgVG8gTG9jYWxTdG9yYWdlXG4gICAgICAgICAgbG9jYWxTdG9yYWdlLmRvd25sb2FkcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmRvd25sb2FkcykgKyAxIFxuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuZG93bmxvYWRGaWxlLCBKU09OLnN0cmluZ2lmeShyZXMucmVzdWx0cykpXG5cbiAgICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgYWxsIGFqYXggcmVxcyBpbiBmb3IgbG9vcCBhcmUgY29tcGxldGVcbiAgICAgICAgICBpZihsb2NhbFN0b3JhZ2UuZG93bmxvYWRzID09IGxvY2FsU3RvcmFnZS5kb3dubG9hZF90b3RhbCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ21hdGNoZWQnKVxuICAgICAgICAgICAgLy8gTWVyZ2UgYWxsIGxvY2FsU3RvcmFnZSByZXN1bHRzXG4gICAgICAgICAgICBwcm9zcGVjdHMgPSBbXVxuICAgICAgICAgICAgZm9yKGlpPTA7aWkgPCBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5kb3dubG9hZF90b3RhbCk7IGlpKyspe1xuICAgICAgICAgICAgICBwcm9zcGVjdHMgPSBwcm9zcGVjdHMuY29uY2F0KEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Rvd25sb2FkXycraWkpKSlcbiAgICAgICAgICAgICAgY29uc29sZS5sb2cocHJvc3BlY3RzKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9zcGVjdHMpXG4gICAgICAgICAgICAvLyBPdXRwdXQgYXMgQ1NWXG4gICAgICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtQYXBhLnVucGFyc2UocHJvc3BlY3RzKV0sIHt0eXBlOiBcInRleHQvcGxhaW47Y2hhcnNldD11dGYtOFwifSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhibG9iKVxuICAgICAgICAgICAgc2F2ZUFzKGJsb2IsIFwicHJvc3BlY3RzLmNzdlwiKTtcbiAgICAgICAgICAgIHRoaXNzLnNldFN0YXRlKHtkb3dubG9hZGluZzogZmFsc2V9KVxuICAgICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIGVycm9yOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgY29tcGFueSA9IEpTT04uc3RyaW5naWZ5KEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55KVxuICAgIFxuXG4gIH0sXG5cbiAgcmVtb3ZlU2VsZWN0ZWRQcm9zcGVjdHM6IGZ1bmN0aW9uKCkge1xuICAgIC8vIElmIExpc3QgVHlwZSBpcyBBbGwgQXJjaGl2ZSB0aGUgcHJvc3BlY3RcbiAgICBwYXJzZUhlYWRlcnMgPSB7XG4gICAgICAnWC1QYXJzZS1BcHBsaWNhdGlvbi1JZCcgIDogJ044NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkonLCBcbiAgICAgICdYLVBhcnNlLVJFU1QtQVBJLUtleScgICAgOiAnVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYicsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiIDogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9XG5cbiAgICBzZWxlY3RlZFByb3NwZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzKVxuICAgIGJhdGNoRGF0YSA9IFtdXG5cbiAgICBmb3IoaT0wO2k8IHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aDtpKyspe1xuICAgICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50TGlzdCAhPSAnQWxsJyl7XG4gICAgICAgIHRtcCA9IHtcbiAgICAgICAgICBtZXRob2Q6J1BVVCcsXG4gICAgICAgICAgcGF0aDonLzEvY2xhc3Nlcy9Qcm9zcGVjdC8nK3NlbGVjdGVkUHJvc3BlY3RzW2ldLFxuICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgIGxpc3RzOiB7XG4gICAgICAgICAgICAgICdfX29wJyAgICA6ICdSZW1vdmUnLFxuICAgICAgICAgICAgICBcIm9iamVjdHNcIiA6IFt7IFxuICAgICAgICAgICAgICAgICAgJ19fdHlwZSc6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgJ2NsYXNzTmFtZSc6J1Byb3NwZWN0TGlzdCcsXG4gICAgICAgICAgICAgICAgICAnb2JqZWN0SWQnOnRoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZFxuICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfWVsc2V7XG4gICAgICAgIHRtcCA9IHtcbiAgICAgICAgICBtZXRob2Q6J1BVVCcsXG4gICAgICAgICAgcGF0aDonLzEvY2xhc3Nlcy9Qcm9zcGVjdC8nK3NlbGVjdGVkUHJvc3BlY3RzW2ldLFxuICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgIGFyY2hpdmVkOmZhbHNlLFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYmF0Y2hEYXRhLnB1c2godG1wKVxuICAgIH1cblxuICAgIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9iYXRjaCcsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGhlYWRlcnM6cGFyc2VIZWFkZXJzLFxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe3JlcXVlc3RzOiBiYXRjaERhdGF9KSxcbiAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgbGlzdHMgPSB0aGlzcy5zdGF0ZS5saXN0c1xuXG4gICAgICAgIGZvcihpPTA7aTwgbGlzdHMubGVuZ3RoOyBpKyspIHsgXG4gICAgICAgICAgLy8gU3VidHJhY3QgRnJvbSBPbGQgTGlzdCAtIE5vdCBXb3JraW5nIEZvciBBcmNoaXZlXG4gICAgICAgICAgaWYobGlzdHNbaV0ub2JqZWN0SWQgPT0gdGhpc3Muc3RhdGUuY3VycmVudExpc3RPYmplY3RJZClcbiAgICAgICAgICAgIGxpc3RzW2ldLmNvdW50ID0gcGFyc2VJbnQobGlzdHNbaV0uY291bnQpIC0gcGFyc2VJbnQoc2VsZWN0ZWRQcm9zcGVjdHMubGVuZ3RoKVxuICAgICAgICB9XG4gICAgICAgIC8vIFVwZGF0ZSBsb2NhbCBsaXN0IGNvdW50XG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtsaXN0czogbGlzdHN9KVxuXG4gICAgICAgIC8vIHJlbW92ZSBmcm9tIGN1cnJlbnQgbGlzdCB1aVxuICAgICAgICBzZWxlY3RlZFByb3NwZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzKVxuICAgICAgICBjb25zb2xlLmxvZygncmVtb3ZlIHNlbGVjdGVkIHByb3NwZWN0cycpXG4gICAgICAgIGNvbnNvbGUubG9nKHNlbGVjdGVkUHJvc3BlY3RzKVxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzcy5zdGF0ZS5wcm9zcGVjdHMpXG4gICAgICAgIHZhciBmaWx0ZXJlZCA9IF8uZmlsdGVyKHRoaXNzLnN0YXRlLnByb3NwZWN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgIGZvcihpPTA7aTwgc2VsZWN0ZWRQcm9zcGVjdHMubGVuZ3RoO2krKykgXG4gICAgICAgICAgICBpZihpdGVtLm9iamVjdElkID09IHNlbGVjdGVkUHJvc3BlY3RzW2ldKVxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coZmlsdGVyZWQpXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtwcm9zcGVjdHM6IGZpbHRlcmVkfSlcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5zdHJpbmdpZnkoW10pXG5cbiAgICAgICAgLy8gYWRkIGFsZXJ0IHRvIGluZm9ybSB1c2VyXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgbW92ZVNlbGVjdGVkUHJvc3BlY3RzOiBmdW5jdGlvbihsaXN0T2JqZWN0SWQpIHtcbiAgICBwYXJzZUhlYWRlcnMgPSB7XG4gICAgICAnWC1QYXJzZS1BcHBsaWNhdGlvbi1JZCcgIDogJ044NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkonLCBcbiAgICAgICdYLVBhcnNlLVJFU1QtQVBJLUtleScgICAgOiAnVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYicsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiIDogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9XG5cbiAgICAvLyBnZXQgdGhlIHNlbGVjdGVkIG9iamVjdElkIGZyb20gc2VsZWN0ZWRQcm9zcGVjdHMgc3RhdGVcbiAgICBzZWxlY3RlZFByb3NwZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzKVxuICAgIGJhdGNoRGF0YSA9IFtdXG5cblxuICAgIC8vIEJhdGNoIFVwZGF0ZSBQYXJzZVxuICAgIC8vIC0gUmVtb3ZlIEFsbCBTZWxlY3RlZCBQcm9zcGVjdHMgRnJvbSBDdXJyZW50IExpc3RcbiAgICBmb3IoaT0wO2k8IHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aDtpKyspe1xuICAgICAgdG1wID0ge1xuICAgICAgICBtZXRob2Q6J1BVVCcsXG4gICAgICAgIHBhdGg6Jy8xL2NsYXNzZXMvUHJvc3BlY3QvJytzZWxlY3RlZFByb3NwZWN0c1tpXSxcbiAgICAgICAgYm9keToge1xuICAgICAgICAgIGxpc3RzOiB7XG4gICAgICAgICAgICAnX19vcCcgICAgOiAnUmVtb3ZlJyxcbiAgICAgICAgICAgIFwib2JqZWN0c1wiIDogW3sgXG4gICAgICAgICAgICAgICAgJ19fdHlwZSc6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICdjbGFzc05hbWUnOidQcm9zcGVjdExpc3QnLFxuICAgICAgICAgICAgICAgICdvYmplY3RJZCc6dGhpcy5zdGF0ZS5jdXJyZW50TGlzdE9iamVjdElkXG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYmF0Y2hEYXRhLnB1c2godG1wKVxuICAgIH1cbiAgICBcbiAgICAvLyAtIEFkZCBPdGhlciBMaXN0IFxuICAgIGZvcihpPTA7aTwgc2VsZWN0ZWRQcm9zcGVjdHMubGVuZ3RoO2krKyl7XG4gICAgICB0bXAgPSB7XG4gICAgICAgIG1ldGhvZDonUFVUJyxcbiAgICAgICAgcGF0aDonLzEvY2xhc3Nlcy9Qcm9zcGVjdC8nK3NlbGVjdGVkUHJvc3BlY3RzW2ldLFxuICAgICAgICBib2R5OiB7XG4gICAgICAgICAgbGlzdHM6IHtcbiAgICAgICAgICAgICdfX29wJyAgICA6ICdBZGRVbmlxdWUnLFxuICAgICAgICAgICAgXCJvYmplY3RzXCIgOiBbeyBcbiAgICAgICAgICAgICAgICAnX190eXBlJzonUG9pbnRlcicsXG4gICAgICAgICAgICAgICAgJ2NsYXNzTmFtZSc6J1Byb3NwZWN0TGlzdCcsXG4gICAgICAgICAgICAgICAgJ29iamVjdElkJzpsaXN0T2JqZWN0SWRcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBiYXRjaERhdGEucHVzaCh0bXApXG4gICAgfVxuXG4gICAgdGhpc3MgPSB0aGlzO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2JhdGNoJyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczpwYXJzZUhlYWRlcnMsXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7cmVxdWVzdHM6IGJhdGNoRGF0YX0pLFxuICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICBsaXN0cyA9IHRoaXNzLnN0YXRlLmxpc3RzXG5cbiAgICAgICAgZm9yKGk9MDtpPCBsaXN0cy5sZW5ndGg7IGkrKykgeyBcbiAgICAgICAgICAvLyBBZGQgVG8gTmV3IExpc3RcbiAgICAgICAgICBpZihsaXN0c1tpXS5vYmplY3RJZCA9PSBsaXN0T2JqZWN0SWQpXG4gICAgICAgICAgICBsaXN0c1tpXS5jb3VudCA9IHBhcnNlSW50KGxpc3RzW2ldLmNvdW50KSArIHBhcnNlSW50KHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aClcbiAgICAgICAgICAvLyBTdWJ0cmFjdCBGcm9tIE9sZCBMaXN0XG4gICAgICAgICAgaWYobGlzdHNbaV0ub2JqZWN0SWQgPT0gdGhpc3Muc3RhdGUuY3VycmVudExpc3RPYmplY3RJZClcbiAgICAgICAgICAgIGxpc3RzW2ldLmNvdW50ID0gcGFyc2VJbnQobGlzdHNbaV0uY291bnQpIC0gcGFyc2VJbnQoc2VsZWN0ZWRQcm9zcGVjdHMubGVuZ3RoKVxuICAgICAgICB9XG4gICAgICAgIC8vIFVwZGF0ZSBsb2NhbCBsaXN0IGNvdW50XG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtsaXN0czogbGlzdHN9KVxuXG4gICAgICAgIC8vIHJlbW92ZSBmcm9tIGN1cnJlbnQgbGlzdCB1aVxuICAgICAgICBjb25zb2xlLmxvZygnc2VsZWN0ZWRQcm9zcGVjdHMnKVxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzcy5zdGF0ZS5wcm9zcGVjdHMpXG4gICAgICAgIHZhciBmaWx0ZXJlZCA9IF8uZmlsdGVyKHRoaXNzLnN0YXRlLnByb3NwZWN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgIGlzX3NlbGVjdGVkID0gdHJ1ZVxuICAgICAgICAgIGZvcihpPTA7aTwgc2VsZWN0ZWRQcm9zcGVjdHMubGVuZ3RoO2krKykgXG4gICAgICAgICAgICBpZihpdGVtLm9iamVjdElkID09IHNlbGVjdGVkUHJvc3BlY3RzW2ldKVxuICAgICAgICAgICAgICBpc19zZWxlY3RlZCA9IGZhbHNlXG4gICAgICAgICAgcmV0dXJuIGlzX3NlbGVjdGVkXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZyhmaWx0ZXJlZClcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe3Byb3NwZWN0czogZmlsdGVyZWR9KVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnN0cmluZ2lmeShbXSlcblxuICAgICAgICAvLyBhZGQgYWxlcnQgdG8gaW5mb3JtIHVzZXJcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBjb3B5U2VsZWN0ZWRQcm9zcGVjdHM6IGZ1bmN0aW9uKGxpc3RPYmplY3RJZCkge1xuICAgIGNvbnNvbGUubG9nKGxpc3RPYmplY3RJZClcbiAgICBcbiAgICAvLyBtYWtlIGJhdGNoIGFqYXggcmVxdWVzdCB0byBwYXJzZVxuICAgIHBhcnNlSGVhZGVycyA9IHtcbiAgICAgICdYLVBhcnNlLUFwcGxpY2F0aW9uLUlkJyAgOiAnTjg1UU9rdGVFRVFrdVpWSktBdnQ4TVZlczBzakc2cU5wRUdxUUZWSicsIFxuICAgICAgJ1gtUGFyc2UtUkVTVC1BUEktS2V5JyAgICA6ICdWTjZFd1Z5Qlp3TzF1cGhzQlBzYXU4dDdKUVJwMDBVTTNLWXNpaVFiJyxcbiAgICAgIFwiQ29udGVudC1UeXBlXCIgOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH1cblxuICAgIC8vIEFkZCBMb2FkaW5nIFNpZ24gVG8gTGlzdFxuXG4gICAgc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cylcbiAgICBiYXRjaERhdGEgPSBbXVxuICAgIGZvcihpPTA7aTwgc2VsZWN0ZWRQcm9zcGVjdHMubGVuZ3RoO2krKyl7XG4gICAgICB0bXAgPSB7XG4gICAgICAgIG1ldGhvZDonUFVUJyxcbiAgICAgICAgcGF0aDonLzEvY2xhc3Nlcy9Qcm9zcGVjdC8nK3NlbGVjdGVkUHJvc3BlY3RzW2ldLFxuICAgICAgICBib2R5OiB7XG4gICAgICAgICAgbGlzdHM6IHtcbiAgICAgICAgICAgICdfX29wJyAgICA6ICdBZGRVbmlxdWUnLFxuICAgICAgICAgICAgXCJvYmplY3RzXCIgOiBbeyBcbiAgICAgICAgICAgICAgICAnX190eXBlJzonUG9pbnRlcicsXG4gICAgICAgICAgICAgICAgJ2NsYXNzTmFtZSc6J1Byb3NwZWN0TGlzdCcsXG4gICAgICAgICAgICAgICAgJ29iamVjdElkJzpsaXN0T2JqZWN0SWRcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBiYXRjaERhdGEucHVzaCh0bXApXG4gICAgfVxuXG4gICAgdGhpc3MgPSB0aGlzO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2JhdGNoJyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczpwYXJzZUhlYWRlcnMsXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7cmVxdWVzdHM6IGJhdGNoRGF0YX0pLFxuICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICAvLyBVcGRhdGUgV2l0aCB0aGUgbnVtYmVyIG9mIHN1Y2Nlc3Nlc1xuICAgICAgICAvLyBVcGRhdGUgbG9jYWwgbGlzdCBjb3VudFxuICAgICAgICBsaXN0cyA9IHRoaXNzLnN0YXRlLmxpc3RzXG4gICAgICAgIGZvcihpPTA7aTwgbGlzdHMubGVuZ3RoOyBpKyspIHsgXG4gICAgICAgICAgaWYobGlzdHNbaV0ub2JqZWN0SWQgPT0gbGlzdE9iamVjdElkKVxuICAgICAgICAgICAgbGlzdHNbaV0uY291bnQgPSBwYXJzZUludChsaXN0c1tpXS5jb3VudCkgKyBwYXJzZUludChyZXMubGVuZ3RoKVxuICAgICAgICB9XG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtsaXN0czogbGlzdHN9KVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMgPSBcIltdXCJcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe3NlbGVjdGVkUHJvc3BlY3RzIDogW10gfSlcbiAgICAgICAgXG4gICAgICAgIC8vIGFkZCBhbGVydCB0byBpbmZvcm0gdXNlclxuICAgICAgICAvLyBVbnNlbGVjdCBhbGwgc2VsZWN0ZWRcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcblxuICB9LFxuXG4gIGhpZGVBbGVydDogZnVuY3Rpb24oKSB7XG4gICAgJCgnLmFsZXJ0JykuaGlkZSgpXG4gIH0sXG5cbiAgYWRqdXN0SGVpZ2h0OiBmdW5jdGlvbih3aGljaE9uZSkge1xuICAgIHByb3NwZWN0V2luZG93VG9wID0gJCgnI3Byb3NwZWN0RGV0YWlsQnV0dG9ucycpLnBvc2l0aW9uKCkudG9wXG4gICAgcHJvc3BlY3RXaW5kb3dUb3AgPSBwcm9zcGVjdFdpbmRvd1RvcCArICQoJyNwcm9zcGVjdERldGFpbEJ1dHRvbnMnKS5oZWlnaHQoKVxuICAgIHByb3NwZWN0V2luZG93Qm90dG9tID0gJCgnI2F1dG9zY3JvbGwnKS5wb3NpdGlvbigpLnRvcCArICQoJyNhdXRvc2Nyb2xsJykuaGVpZ2h0KClcblxuICAgIGlmKHdoaWNoT25lID09ICdqJylcbiAgICAgIGFjdGl2ZVByb3NwZWN0ID0gdGhpcy5zdGF0ZS5rZXlib2FyZEFjdGl2ZVByb3NwZWN0ICsxIFxuICAgIGVsc2VcbiAgICAgIGFjdGl2ZVByb3NwZWN0ID0gdGhpcy5zdGF0ZS5rZXlib2FyZEFjdGl2ZVByb3NwZWN0IC0xIFxuXG4gICAgYWN0aXZlVG9wID0gJCgkKCcucHJvc3BlY3RzLXRyJylbYWN0aXZlUHJvc3BlY3RdKS5wb3NpdGlvbigpLnRvcFxuICAgIHNlbGVjdGVkSGVpZ2h0ID0gJCgkKCcucHJvc3BlY3RzLXRyJylbYWN0aXZlUHJvc3BlY3RdKS5oZWlnaHQoKVxuICAgIGFjdGl2ZUJvdHRvbSA9ICQoJCgnLnByb3NwZWN0cy10cicpW2FjdGl2ZVByb3NwZWN0XSkucG9zaXRpb24oKS50b3Arc2VsZWN0ZWRIZWlnaHRcblxuICAgIGNvbnNvbGUubG9nKHByb3NwZWN0V2luZG93VG9wLCBwcm9zcGVjdFdpbmRvd0JvdHRvbSlcbiAgICBjb25zb2xlLmxvZyhhY3RpdmVUb3AsIGFjdGl2ZUJvdHRvbSlcblxuICAgIHNjcm9sbFRvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvc2Nyb2xsJykuc2Nyb2xsVG9wXG4gICAgaWYoYWN0aXZlQm90dG9tID4gcHJvc3BlY3RXaW5kb3dCb3R0b20pXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0b3Njcm9sbCcpLnNjcm9sbFRvcCA9IHNjcm9sbFRvcCArIGFjdGl2ZUJvdHRvbSAtIHByb3NwZWN0V2luZG93Qm90dG9tXG5cbiAgICBpZihhY3RpdmVUb3AgPCAwKVxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dG9zY3JvbGwnKS5zY3JvbGxUb3AgPSBzY3JvbGxUb3AgKyBhY3RpdmVUb3AgLSAzN1xuICAgIGVsc2UgaWYoYWN0aXZlVG9wID09ICQoJCgnLnByb3NwZWN0cy10cicpWzBdKS5wb3NpdGlvbigpLnRvcClcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvc2Nyb2xsJykuc2Nyb2xsVG9wID0gMFxuICAgICAgXG4gICAgLy8gR2V0IFBvc3Rpb24gb2YgVG9wXG4gICAgLy8gR2V0IFBvc2l0aW9uIG9mIEJvdHRvbSBcbiAgICAvLyBHZXQgUG9zaXRpb24gb2YgQ3VycmVudCBTZWxlY3RlZFxuICAgIC8vIEFkanVzdCBieSBzY3JvbGxpbmcgZG93biBvciB1cFxuICB9LFxuXG4gIHN0YXJ0S2V5Ym9hcmRTaG9ydGN1dHM6IGZ1bmN0aW9uKCkge1xuICAgIC8qIEtleWJvYXJkIFNob3J0Y3V0cyAqL1xuICAgIE1vdXNldHJhcC5yZXNldCgpXG4gICAgLy9Nb3VzZXRyYXAudW5iaW5kKFsnaicsJ2snLCdvJ10pXG4gICAgdGhpc3MgPSB0aGlzO1xuXG4gICAgLyogUHJvc3BlY3QgVGFibGUgU2hvcnRjdXRzICovXG4gICAgTW91c2V0cmFwLmJpbmQoJ2onLCBmdW5jdGlvbigpIHsgXG4gICAgICBrZXlib2FyZCA9IHRoaXNzLnN0YXRlLmtleWJvYXJkQWN0aXZlUHJvc3BlY3RcbiAgICAgIGlmKGtleWJvYXJkICE9IHRoaXNzLnN0YXRlLnByb3NwZWN0c1BlclBhZ2UrMSlcbiAgICAgICAgdGhpc3MuYWRqdXN0SGVpZ2h0KCdqJylcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2tleWJvYXJkQWN0aXZlUHJvc3BlY3Q6IGtleWJvYXJkKzF9KVxuICAgIH0pO1xuXG4gICAgTW91c2V0cmFwLmJpbmQoJ2snLCBmdW5jdGlvbigpIHsgXG4gICAgICBrZXlib2FyZCA9IHRoaXNzLnN0YXRlLmtleWJvYXJkQWN0aXZlUHJvc3BlY3RcbiAgICAgIGlmKGtleWJvYXJkICE9IDEpXG4gICAgICAgIHRoaXNzLmFkanVzdEhlaWdodCgnaycpXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtrZXlib2FyZEFjdGl2ZVByb3NwZWN0OiBrZXlib2FyZC0xfSlcbiAgICB9KTtcblxuXG4gICAgTW91c2V0cmFwLmJpbmQoJ28nLCBmdW5jdGlvbigpIHsgXG4gICAgICBjb25zb2xlLmxvZygnb3BlbiBjdXJyZW50IHByb3NwZWN0JylcbiAgICAgIGNvbnNvbGUubG9nKCQoJCgnLmtleVNlbGVjdCcpLmZpbmQoJ2EubGlua2VkaW5fbGluaycpWzBdKS5hdHRyKCdocmVmJykpXG4gICAgICBsaW5rID0gJCgkKCcua2V5U2VsZWN0JykuZmluZCgnYS5saW5rZWRpbl9saW5rJylbMF0pLmF0dHIoJ2hyZWYnKVxuICAgICAgLypcbiAgICAgIHdpbmRvdy5vcGVuKGxpbmssICdfYmxhbmsnKVxuICAgICAgY29uc29sZS5sb2coJ25ldycpXG4gICAgICAqL1xuICAgICAgLy9wb3B1cFdpbmRvdy5ibHVyKCk7XG4gICAgICAvL3dpbmRvdy5mb2N1cygpO1xuICAgICAgLy8ga2V5Ym9hcmQgPSB0aGlzcy5zdGF0ZS5rZXlib2FyZEFjdGl2ZVByb3NwZWN0XG4gICAgICBcbiAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICBhLmhyZWYgPSBsaW5rXG4gICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50c1wiKTtcbiAgICAgIC8vdGhlIHRlbnRoIHBhcmFtZXRlciBvZiBpbml0TW91c2VFdmVudCBzZXRzIGN0cmwga2V5XG4gICAgICAvLyBGb3IgTWFjIFRoaXMgV29ya3MgQ2hlY2sgRm9yIC0gV2luZG93c1xuICAgICAgZXZ0LmluaXRNb3VzZUV2ZW50KFwiY2xpY2tcIiwgdHJ1ZSwgdHJ1ZSwgd2luZG93LCAwLCAwLCAwLCAwLCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlLCBmYWxzZSwgZmFsc2UsIHRydWUsIDAsIG51bGwpO1xuICAgICAgYS5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gICAgfSk7XG5cblxuXG4gICAgLyogTGlzdCBNb2RpZmljYXRpb24gU2hvcnRjdXRzICovXG4gICAgTW91c2V0cmFwLmJpbmQoJ3RhYityJywgZnVuY3Rpb24oKXtcbiAgICAgIC8vY29uc29sZS5sb2coJ3JlbG9hZCcpXG4gICAgICAkKCcjcmVuYW1lTGlzdEJ0bicpLmNsaWNrKClcbiAgICB9KVxuXG4gICAgTW91c2V0cmFwLmJpbmQoJ3RhYitkJywgZnVuY3Rpb24oKXtcbiAgICAgIC8vY29uc29sZS5sb2coJ3JlbG9hZCcpXG4gICAgICAkKCcjZGVsZXRlTGlzdE1vZGFsJykuY2xpY2soKVxuICAgIH0pXG5cbiAgICBNb3VzZXRyYXAuYmluZCgndGFiK3MnLCBmdW5jdGlvbigpe1xuICAgICAgLy9jb25zb2xlLmxvZygncmVsb2FkJylcbiAgICAgIC8vJCgnI2Rvd25sb2FkUHJvc3BlY3RzJykuY2xpY2soKVxuICAgICAgdGhpc3MuZG93bmxvYWRGaWxlKClcbiAgICB9KVxuXG4gICAgTW91c2V0cmFwLmJpbmQoJ3NoaWZ0K2wnLCBmdW5jdGlvbigpe1xuICAgICAgLy9jb25zb2xlLmxvZygncmVsb2FkJylcbiAgICAgIC8vJCgnI2Rvd25sb2FkUHJvc3BlY3RzJykuY2xpY2soKVxuICAgICAgLy90aGlzcy5kb3dubG9hZEZpbGUoKVxuICAgICAgJCgnLm5ldy1saXN0LWJ0bicpLmNsaWNrKClcbiAgICB9KVxuXG4gICAgTW91c2V0cmFwLmJpbmQoJ2UnLCBmdW5jdGlvbigpe1xuICAgICAgY29uc29sZS5sb2coJ3JlbG9hZCcpXG4gICAgICAvLyQoJyNkb3dubG9hZFByb3NwZWN0cycpLmNsaWNrKClcbiAgICAgIHRoaXNzLnJlbW92ZVNlbGVjdGVkUHJvc3BlY3RzKClcbiAgICB9KVxuXG4gICAgTW91c2V0cmFwLmJpbmQoJ2MnLCBmdW5jdGlvbigpIHsgXG4gICAgICBjb25zb2xlLmxvZygnY29weScpXG4gICAgICAkKCcjY29weVRvTGlzdCcpLmNsaWNrKClcbiAgICB9KTtcblxuICAgIE1vdXNldHJhcC5iaW5kKCdtJywgZnVuY3Rpb24oKSB7IFxuICAgICAgY29uc29sZS5sb2coJ2NvcHknKVxuICAgICAgJCgnI21vdmVUb0xpc3QnKS5jbGljaygpXG4gICAgfSk7XG5cbiAgICAvL01vdXNldHJhcC5iaW5kKCdlJywgZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKCdlJyk7IH0pO1xuICAgIE1vdXNldHJhcC5iaW5kKCdyaWdodCcsIGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygncmlnaHQnKTsgfSk7XG4gICAgTW91c2V0cmFwLmJpbmQoJ2xlZnQnLCBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ2xlZnQnKTsgfSk7XG5cbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgLyogT25Mb2FkIEZvciBUaGUgRmlyc3QgVGltZSBGdW5jdGlvbiAqL1xuICAgIHZhciB0aGlzc3MgPSB0aGlzO1xuICAgIGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cyA9IEpTT04uc3RyaW5naWZ5KFtdKVxuICAgIGN1cnJlbnRVc2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpXG4gICAgdXNlciA9IGFwcENvbmZpZy5wb2ludGVyKCdVc2VyJywgY3VycmVudFVzZXIub2JqZWN0SWQpXG5cbiAgICBhcmNoaXZlTGlzdCA9IEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICAnb2JqZWN0SWQnOidTZXJQUWpja3ZlJywgLy8gVE9ETyAtIERpZmZlcmVudGUgRm9yIFdhdGNoIFVzZXJcbiAgICAgICdfX3R5cGUnOidQb2ludGVyJywgXG4gICAgICAnY2xhc3NOYW1lJyA6ICdQcm9zcGVjdExpc3QnIFxuICAgIH0pXG5cbiAgICBxcnkgPSB7XG4gICAgICB3aGVyZTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBjb21wYW55OiBjdXJyZW50VXNlci5jb21wYW55LFxuICAgICAgICBhcmNoaXZlZDogdHJ1ZSxcbiAgICAgIH0pLFxuICAgICAgY291bnQ6IDEsXG4gICAgICBvcmRlcjogJy1jcmVhdGVkQXQnLFxuICAgICAgbGltaXQ6IHRoaXMuc3RhdGUucHJvc3BlY3RzUGVyUGFnZSxcbiAgICAgIGluY2x1ZGU6ICdlbWFpbF9ndWVzc2VzLGVtYWlsX2d1ZXNzZXMucGF0dGVybidcbiAgICB9XG5cbiAgICBpZih0aGlzLnN0YXRlLmN1cnJlbnRMaXN0ICE9ICdBbGwnKXtcbiAgICAgIGN1cnJlbnRMaXN0PWFwcENvbmZpZy5wb2ludGVyKCdQcm9zcGVjdExpc3QnLHRoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZClcbiAgICAgIHFyeSA9IHtcbiAgICAgICAgd2hlcmU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBjb21wYW55OiBjdXJyZW50VXNlci5jb21wYW55LFxuICAgICAgICAgIGxpc3RzOiBjdXJyZW50TGlzdFxuICAgICAgICB9KSxcbiAgICAgICAgY291bnQ6IDFcbiAgICAgIH1cbiAgICB9XG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdCcsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIGNhY2hlOiB0cnVlLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe1xuICAgICAgICAgIHByb3NwZWN0czogcmVzLnJlc3VsdHMsXG4gICAgICAgICAgY291bnQ6IHJlcy5jb3VudCxcbiAgICAgICAgICB0b3RhbENvdW50OiByZXMuY291bnQsXG4gICAgICAgICAgcGFnZXM6IE1hdGguY2VpbChyZXMuY291bnQvdGhpc3NzLnByb3BzLnByb3NwZWN0c1BlclBhZ2UpLFxuICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihyZXMpeyBjb25zb2xlLmxvZyhyZXMpIH1cbiAgICB9KVxuXG4gICAgY3VycmVudFVzZXIgPSB7IFxuICAgICAgJ19fdHlwZScgICA6ICdQb2ludGVyJyxcbiAgICAgICdjbGFzc05hbWUnOiAnX1VzZXInLFxuICAgICAgJ29iamVjdElkJyA6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5vYmplY3RJZFxuICAgIH1cblxuICAgIHRoaXNzID0gdGhpcztcbiAgICBxcnkgPSB7XG4gICAgICB3aGVyZTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB1c2VyOiBhcHBDb25maWcucG9pbnRlcignX1VzZXInLCBjdXJyZW50VXNlci5vYmplY3RJZClcbiAgICAgIH0pLFxuICAgICAgY291bnQ6IDEsXG4gICAgICBvcmRlcjogJy1jcmVhdGVkQXQnLFxuICAgIH1cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdExpc3QnLFxuICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgcmVzdWx0cyA9IHJlcy5yZXN1bHRzXG4gICAgICAgIGZvcihpPTA7aTwgcmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHJlc3VsdHMuY291bnQgPSAnfidcbiAgICAgICAgfVxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7bGlzdHM6IHJlc3VsdHN9KVxuICAgICAgICAvLyBNYWtlIGJhdGNoIHJlcXVlc3QgdG8gZ2V0IGxpc3QgY291bnRzIGFmdGVyIHRoZXkgYXJlIGxvYWRlZFxuICAgICAgICBmb3IoaT0wO2kgPCByZXMucmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHJlcy5yZXN1bHRzW2ldLm9iamVjdElkLCBcIlwiKVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yKGk9MDtpPCByZXMucmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxpc3QgPSB7XG4gICAgICAgICAgICAnX190eXBlJyAgICA6ICdQb2ludGVyJyxcbiAgICAgICAgICAgICdvYmplY3RJZCcgIDogcmVzLnJlc3VsdHNbaV0ub2JqZWN0SWQsXG4gICAgICAgICAgICAnY2xhc3NOYW1lJyA6ICdQcm9zcGVjdExpc3QnLCBcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0JyxcbiAgICAgICAgICAgIHR5cGU6J0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiBhcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgICAgICAgbGlzdE9iamVjdElkOiByZXMucmVzdWx0c1tpXS5vYmplY3RJZCxcbiAgICAgICAgICAgIGRhdGE6ICd3aGVyZT17XCJsaXN0c1wiOicrSlNPTi5zdHJpbmdpZnkobGlzdCkrJ30mY291bnQ9MScsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmxpc3RPYmplY3RJZClcbiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5saXN0T2JqZWN0SWQsIHJlcy5jb3VudClcbiAgICAgICAgICAgICAgYW1vdW50ID0gMFxuICAgICAgICAgICAgICBmb3IoaWk9MDtpaTwgcmVzdWx0cy5sZW5ndGg7aWkrKyl7XG4gICAgICAgICAgICAgICAgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0ocmVzdWx0c1tpaV0ub2JqZWN0SWQpID09IFwiXCIpXG4gICAgICAgICAgICAgICAgICBhbW91bnQgPSBhbW91bnQgKyAxXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZihhbW91bnQgPT0gMCkge1xuICAgICAgICAgICAgICAgIGZvcihpaT0wO2lpPCByZXN1bHRzLmxlbmd0aDtpaSsrKVxuICAgICAgICAgICAgICAgICAgcmVzdWx0c1tpaV0uY291bnQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShyZXN1bHRzW2lpXS5vYmplY3RJZClcblxuICAgICAgICAgICAgICAgIHRoaXNzLnNldFN0YXRlKHtsaXN0czogcmVzdWx0c30pXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnR290IENvdW50cycpXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyB1cGRhdGVkIHJlcy5jb3VudFxuICAgICAgICAgICAgICAvL3RoaXNzLnNldFN0YXRlKHtjb3VudDogcmVzLmNvdW50fSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIpIH1cbiAgICB9KTtcbiAgfSxcblxuICBnZW5lcmF0ZV9pZCA6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJ18nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpO1xuICB9LFxufSk7XG5cbi8qICBEcm9wZG93biBNZW51cyAqL1xuXG52YXIgQ3VycmVudExpc3RzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ3VycmVudExpc3RzJyxcbiAgbGlzdEFjdGlvbjogZnVuY3Rpb24oZSkge1xuICAgIGxpc3ROYW1lID0gJChlLnRhcmdldCkudGV4dCgpXG4gICAgXG4gICAgdmFyIGxpc3RTZWxlY3QgPSBfLmZpbHRlcih0aGlzLnByb3BzLmxpc3RzLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PSBsaXN0TmFtZVxuICAgIH0pO1xuXG4gICAgdGhpcy5wcm9wcy5saXN0QWN0aW9uKGxpc3RTZWxlY3RbMF0ub2JqZWN0SWQpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBsaXN0cyA9IFtdIFxuICAgIGZvcihpPTA7aTwgdGhpcy5wcm9wcy5saXN0cy5sZW5ndGg7aSsrKSB7XG4gICAgICBsaXN0cy5wdXNoKFxuICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe3N0eWxlOiB7Zm9udFdlaWdodDonYm9sZCcsZm9udFNpemU6JzEwcHgnfSwgXG4gICAgICAgICAgICBjbGFzc05hbWU6IFwiZHJvcGRvd24tbGlzdC1uYW1lXCIsIFxuICAgICAgICAgICAgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMubGlzdEFjdGlvbn0sIHRoaXMucHJvcHMubGlzdHNbaV0ubmFtZSkpXG4gICAgICApXG4gICAgfVxuICAgIC8vY29uc29sZS5sb2codGhpcy5wcm9wcy5jb3B5RHJvcGRvd25TdHlsZSlcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwiZHJvcGRvd24tbWVudSBkcm9wLXRlc3RcIiwgaWQ6IFwiZHJvcGRvd25cIiwgXG4gICAgICAgICAgc3R5bGU6IHtyaWdodDoxNTh9fSwgXG4gICAgICAgIGxpc3RzXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbnZhciBMaXN0c01lbnUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdMaXN0c01lbnUnLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJkcm9wZG93bi1tZW51IGRyb3AtdGVzdFwiLCBpZDogXCJkcm9wZG93blwiLCBcbiAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgbWluV2lkdGg6J2luaGVyaXQnLFxuICAgICAgICAgICAgdG9wOiAnMjBweCcsXG4gICAgICAgICAgICB3aWR0aDogJzEyNXB4JyxcbiAgICAgICAgICAgIHJpZ2h0OiAnMTU0cHgnLFxuICAgICAgICAgICAgbGVmdDonYXV0bydcbiAgICAgICAgICB9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCIjYm9va3NcIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdGltZXNcIn0pLCBcIiDCoFwiICsgJyAnICtcbiAgICAgICAgICBcIkRlbGV0ZSBMaXN0XCJcbiAgICAgICAgKSksIFxuICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiI3BvZGNhc3RzXCJ9LCBcbiAgICAgICAgICBcIlJlbmFtZSBMaXN0c1wiXG4gICAgICAgICkpXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbnZhciBDdXJyZW50TGlzdHNUd28gPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdDdXJyZW50TGlzdHNUd28nLFxuICBsaXN0QWN0aW9uOiBmdW5jdGlvbihlKSB7XG4gICAgbGlzdE5hbWUgPSAkKGUudGFyZ2V0KS50ZXh0KClcbiAgICBcbiAgICB2YXIgbGlzdFNlbGVjdCA9IF8uZmlsdGVyKHRoaXMucHJvcHMubGlzdHMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICByZXR1cm4gaXRlbS5uYW1lID09IGxpc3ROYW1lXG4gICAgfSk7XG5cbiAgICB0aGlzLnByb3BzLmxpc3RBY3Rpb24obGlzdFNlbGVjdFswXS5vYmplY3RJZClcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIGxpc3RzID0gW10gXG4gICAgZm9yKGk9MDtpPHRoaXMucHJvcHMubGlzdHMubGVuZ3RoO2krKykge1xuICAgICAgbGlzdHMucHVzaChcbiAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLGZvbnRTaXplOicxMHB4J30sIFxuICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImRyb3Bkb3duLWxpc3QtbmFtZVwiLCBcbiAgICAgICAgICAgICAgIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmxpc3RBY3Rpb259LCBcbiAgICAgICAgICB0aGlzLnByb3BzLmxpc3RzW2ldLm5hbWUpKVxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwiZHJvcGRvd24tbWVudSBkcm9wLXRlc3RcIiwgaWQ6IFwiZHJvcGRvd25cIiwgXG4gICAgICAgICAgc3R5bGU6IHRoaXMucHJvcHMuY29weURyb3Bkb3duU3R5bGV9LCBcbiAgICAgICAgbGlzdHNcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxudmFyIExpc3REZXRhaWxCdXR0b25zID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnTGlzdERldGFpbEJ1dHRvbnMnLFxuICAvLyBSZW5hbWUgTGlzdFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBlZGl0TW9kZTogZmFsc2VcbiAgICB9XG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLnByb3BzLmN1cnJlbnRMaXN0T2JqZWN0SWQpXG4gICAgaWYoIXRoaXMuc3RhdGUuZWRpdE1vZGUpIHtcbiAgICAgIHN0dWZmID0gUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJcIiwgc3R5bGU6IGxpc3ROYW1lU3R5bGV9LCBcbiAgICAgICAgICAgICh0aGlzLnByb3BzLmN1cnJlbnRMaXN0TmFtZSA9PSBcIkFsbFwiKSA/ICcnIDogUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1iYXJzXCIsIHN0eWxlOiB7Zm9udFNpemU6MTYsIG1hcmdpblRvcDotNX19KSwgXG4gICAgICAgICAgICAodGhpcy5wcm9wcy5jdXJyZW50TGlzdE5hbWUgPT0gXCJBbGxcIikgPyAnJyA6IFwiICAgXCIgK3RoaXMucHJvcHMuY3VycmVudExpc3ROYW1lXG4gICAgICAgICAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgc3R1ZmYgPSBSZWFjdC5ET00uaW5wdXQoe2NsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIiwgc3R5bGU6IHt3aWR0aDogMTAwLCBmbG9hdDogJ2xlZnQnLCBoZWlnaHQ6IDI0LCBtYXJnaW5Ub3A6IC0xfX0pXG4gICAgfVxuICAgIHJldHVybiAoXG5cbiAgICAgICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtzdHlsZToge21hcmdpbjowfX0sIFxuICAgICAgICAgICAgICBzdHVmZiwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiBsaXN0QnRuLCBcbiAgICAgICAgICAgICAgICAnZGF0YS10b2dnbGUnOiBcIm1vZGFsXCIsIFxuICAgICAgICAgICAgICAgIGlkOiBcInJlbmFtZUxpc3RCdG5cIiwgXG4gICAgICAgICAgICAgICAgJ2RhdGEtdGFyZ2V0JzogXCIuYnMtcmVuYW1lTGlzdC1tb2RhbC1zbVwiLCBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wZW5jaWxcIn0pXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmRlbGV0ZUxpc3QsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiBsaXN0QnRuLCBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS10cmFzaC1vXCJ9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLCBcblxuICAgICAgICAgICAgUmVuYW1lTGlzdE1vZGFsKHtyZW5hbWVMaXN0OiB0aGlzLnByb3BzLnJlbmFtZUxpc3R9KSwgXG4gICAgICAgICAgICBEZWxldGVMaXN0TW9kYWwoe2RlbGV0ZUxpc3Q6IHRoaXMucHJvcHMuZGVsZXRlTGlzdH0pXG4gICAgICAgICAgKVxuICAgICAgKTtcbiAgfSxcblxuICByZW5hbWVMaXN0OiBmdW5jdGlvbihuZXdMaXN0TmFtZSkge1xuICAgIHRoaXMucHJvcHMucmVuYW1lTGlzdChuZXdMaXN0TmFtZSlcbiAgfSxcblxuICBkZWxldGVMaXN0OiBmdW5jdGlvbigpe1xuICAgIHRoaXNzID0gdGhpcztcbiAgICBzd2FsKHsgICBcbiAgICAgIHRpdGxlOiBcIkFyZSB5b3Ugc3VyZT9cIiwgICBcbiAgICAgIHRleHQ6IFwiWW91ciB3aWxsIG5vdCBiZSBhYmxlIHRvIHJlY292ZXIgdGhpcyBwcm9zcGVjdCBsaXN0IVwiLCAgIFxuICAgICAgdHlwZTogXCJ3YXJuaW5nXCIsICAgXG4gICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLCAgIFxuICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiBcIiNERDZCNTVcIiwgICBcbiAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBcIlllcywgZGVsZXRlIGl0IVwiLCAgIFxuICAgICAgY2xvc2VPbkNvbmZpcm06IGZhbHNlIH0sIFxuICAgICAgZnVuY3Rpb24oKXsgICBzd2FsKFwiRGVsZXRlZCFcIiwgXCJZb3VyIHByb3NwZWN0IGxpc3QgaGFzIGJlZW4gZGVsZXRlZC5cIiwgXCJzdWNjZXNzXCIpOyBcbiAgICAgICAgY29uc29sZS5sb2coJ2RlbGV0ZWQnKVxuICAgICAgICB0aGlzcy5wcm9wcy5kZWxldGVMaXN0KClcbiAgICAgIH0pO1xuICB9LFxuXG4gIHRvZ2dsZUVkaXQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2VkaXRNb2RlOiAhdGhpcy5zdGF0ZS5lZGl0TW9kZSB9KVxuICB9XG59KTtcblxuXG5cbnZhciBQYWdpbmF0ZU92ZXJsYXkgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdQYWdpbmF0ZU92ZXJsYXknLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcInBhZ2luYXRlLW92ZXJsYXlcIiwgc3R5bGU6IHtwYWRkaW5nVG9wOjcwfX0sIFxuICAgICAgICAgIFNwaW5uZXIoe2NpcmNsZVN0eWxlOiB7YmFja2dyb3VuZENvbG9yOid3aGl0ZSd9fSlcbiAgICAgICAgKVxuXG4gICAgKVxuICB9XG59KVxuXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gY3JlYXRlTGlzdE1vZGFsXG4gIGNyZWF0ZUxpc3Q6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCQoJyNsaXN0VGl0bGUnKS52YWwoKSlcblxuICAgIGRhdGEgPSAge1xuICAgICAgJ25hbWUnICAgICAgICA6ICQoJyNsaXN0VGl0bGUnKS52YWwoKS50cmltKCksICAgLy9XYWl0aW5nICwgUnVubmluZ1xuICAgICAgJ3VzZXInICAgICAgICA6IHsgJ19fdHlwZSc6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICdjbGFzc05hbWUnOidfVXNlcicsXG4gICAgICAgICAgICAgICAgICAgICAgJ29iamVjdElkJzoneFdFU2l3NVNtZCcgfSxcbiAgICB9XG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0TGlzdCcsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5wYXJzZUhlYWRlcnMsXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InKVxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBkYXRhLmNvdW50ID0gMFxuXG4gICAgdGhpcy5wcm9wcy5jcmVhdGVMaXN0KGRhdGEpXG4gICAgXG4gICAgJCgnI2NyZWF0ZUxpc3RNb2RhbCcpLm1vZGFsKCdoaWRlJylcbiAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ21vZGFsLW9wZW4nKTtcbiAgICAkKCcubW9kYWwtYmFja2Ryb3AnKS5yZW1vdmUoKTtcbiAgICAvLyQoJ2J1dHRvbi5jbG9zZScpLmNsaWNrKClcbiAgfSxcblxuICByZW5hbWVMaXN0OiBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy9jb25zb2xlLmxvZygkKCcjbmV3TGlzdE5hbWUnKS52YWwoKSlcbiAgICBuZXdMaXN0TmFtZSA9ICQoJyNuZXdMaXN0TmFtZScpLnZhbCgpXG4gICAgaWYobmV3TGlzdE5hbWUudHJpbSgpICE9IFwiXCIpXG4gICAgICB0aGlzLnByb3BzLnJlbmFtZUxpc3QobmV3TGlzdE5hbWUpXG4gICAgLy8gRGlzYWJsZSBNb2RhbFxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwgZmFkZSBicy1yZW5hbWVMaXN0LW1vZGFsLXNtXCIsIHRhYkluZGV4OiBcIi0xXCIsIHJvbGU6IFwiZGlhbG9nXCIsICdhcmlhLWxhYmVsbGVkYnknOiBcIm15U21hbGxNb2RhbExhYmVsXCIsICdhcmlhLWhpZGRlbic6IFwidHJ1ZVwiLCBpZDogXCJjcmVhdGVMaXN0TW9kYWxcIiwgc3R5bGU6IHt0b3A6JzIwMHB4J319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1kaWFsb2cgbW9kYWwtc21cIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtY29udGVudFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWhlYWRlclwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBjbGFzc05hbWU6IFwiY2xvc2VcIiwgJ2RhdGEtZGlzbWlzcyc6IFwibW9kYWxcIn0sIFJlYWN0LkRPTS5zcGFuKHsnYXJpYS1oaWRkZW4nOiBcInRydWVcIn0sIFwiw5dcIiksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcInNyLW9ubHlcIn0sIFwiQ2xvc2VcIikpLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNCh7Y2xhc3NOYW1lOiBcIm1vZGFsLXRpdGxlXCIsIGlkOiBcIm15TW9kYWxMYWJlbFwifSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbGlzdFwifSksIFwiIMKgUmVuYW1lIExpc3RcIilcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtYm9keVwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uZm9ybSh7b25TdWJtaXQ6IHRoaXMucmVuYW1lTGlzdH0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe2lkOiBcIm5ld0xpc3ROYW1lXCIsIHR5cGU6IFwidGV4dFwiLCBwbGFjZWhvbGRlcjogXCJFbnRlciBsaXN0IHRpdGxlLi4uXCIsIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIn0pLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5yZW5hbWVMaXN0LCBcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzXCIsIFxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snLCB3aWR0aDonMTAwJSd9fSwgXG4gICAgICAgICAgICAgICAgICAgICAgXCJDcmVhdGUgTGlzdFwiXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICBcIlNjaGVkdWxzXCJcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjdXJyZW50UHJvc3BlY3Q6IDAsXG4gICAgfVxuICB9LFxuICAvL1NlbmRFbWFpbE1vZGFsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLnByb3BzLmN1cnJlbnRUZW1wbGF0ZSlcbiAgICBwcm9zcGVjdCA9IHRoaXMucHJvcHMucHJvc3BlY3RzW3RoaXMuc3RhdGUuY3VycmVudFByb3NwZWN0XVxuICAgIHByb3NwZWN0ID0gKHByb3NwZWN0KSA/IHByb3NwZWN0IDogeyduYW1lJzonJywnZW1haWwnOicnfVxuICAgIC8vY29uc29sZS5sb2cocHJvc3BlY3QpXG4gICAgcHJvc3BlY3RzID0gW11cbiAgICBmb3IoaT0wOyBpPCB0aGlzLnByb3BzLnByb3NwZWN0cy5sZW5ndGg7IGkrKyl7XG4gICAgICBwcm9zcGVjdHMucHVzaChVc2VyUGxhY2VIb2xkZXIoe3Byb3NwZWN0OiB0aGlzLnByb3BzLnByb3NwZWN0c1tpXX0pKVxuICAgIH1cbiAgICBlbWFpbCA9IChwcm9zcGVjdC5lbWFpbCkgPyBwcm9zcGVjdC5lbWFpbC50b0xvd2VyQ2FzZSgpIDogXCJcIlxuICAgIHJldHVybiAoXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsIGZhZGUgYnMtc2VuZEVtYWlsLW1vZGFsLWxnXCIsIHRhYkluZGV4OiBcIi0xXCIsIHJvbGU6IFwiZGlhbG9nXCIsICdhcmlhLWxhYmVsbGVkYnknOiBcIm15U21hbGxNb2RhbExhYmVsXCIsICdhcmlhLWhpZGRlbic6IFwidHJ1ZVwiLCBpZDogXCJzZW5kRW1haWxNb2RhbFwiLCBzdHlsZToge3RvcDonMTBweCd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtZGlhbG9nIG1vZGFsLWxnXCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWNvbnRlbnRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1oZWFkZXJcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgY2xhc3NOYW1lOiBcImNsb3NlXCIsICdkYXRhLWRpc21pc3MnOiBcIm1vZGFsXCJ9LCBSZWFjdC5ET00uc3Bhbih7J2FyaWEtaGlkZGVuJzogXCJ0cnVlXCJ9LCBcIsOXXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJzci1vbmx5XCJ9LCBcIkNsb3NlXCIpKSwgXG4gICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0J30sIFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgYnRuLXNtXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBhcGVyLXBsYW5lXCJ9KSwgXCLCoFwiICsgJyAnICtcbiAgICAgICAgICAgICAgICBcIlNlbmQgRW1haWxcIiksIFxuICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBzdHlsZToge21hcmdpblJpZ2h0OjEwLCBmbG9hdDoncmlnaHQnfSwgXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tZGVmYXVsdCBidG4tc21cIiwgJ2RhdGEtZGlzbWlzcyc6IFwibW9kYWxcIn0sIFwiQ2xvc2VcIiksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1lbnZlbG9wZVwifSksIFwiIMKgU2VuZCBFbWFpbFwiICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgXCLCoMKgXCIsIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uc21hbGwobnVsbCwgXCIoXCIrdGhpcy5wcm9wcy5wcm9zcGVjdHMubGVuZ3RoK1wiKVwiKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1ib2R5XCIsIHN0eWxlOiB7cGFkZGluZ1RvcDo1fX0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KG51bGwsIFwiUGVvcGxlXCIpLCBcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInByb3NwZWN0LWNvbnRhaW5lclwifSwgXG4gICAgICAgICAgICAgICAgICAgIHByb3NwZWN0c1xuICAgICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXCJFbWFpbHMgwqDCoMKgXCIsIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uc21hbGwobnVsbCwgKHRoaXMuc3RhdGUuY3VycmVudFByb3NwZWN0KzEpKycgb2YgJyt0aGlzLnByb3BzLnByb3NwZWN0cy5sZW5ndGgpKSwgXG4gICAgICAgICAgICAgICAgICBcIsKgwqDCoFwiLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICBjbGFzc05hbWU6ICh0aGlzLnN0YXRlLmN1cnJlbnRQcm9zcGVjdCA9PSAwICkgPyBcImJ0biBkaXNhYmxlZFwiIDogXCJidG5cIiwgXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucHJldmlvdXNQcm9zcGVjdH0sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYXJyb3ctbGVmdFwifSkpLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgY2xhc3NOYW1lOiAodGhpcy5zdGF0ZS5jdXJyZW50UHJvc3BlY3QgPT0gMTM1ICkgPyBcImJ0biBkaXNhYmxlZFwiIDogXCJidG5cIiwgXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMubmV4dFByb3NwZWN0fSwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1hcnJvdy1yaWdodFwifSkpLCBcblxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcblxuUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cCBlbWFpbC1ob2xkZXJcIiwgc3R5bGU6IHtib3JkZXJUb3A6J3NvbGlkIDFweCAjZWVlJ319LCBcbiAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cC1pdGVtXCJ9LCBcbiAgICBSZWFjdC5ET00uaDUoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyxtYXJnaW5Ub3A6MCxtYXJnaW5Cb3R0b206MH19LCBcIlRvOsKgwqBcIiksIFxuICAgIHByb3NwZWN0Lm5hbWUgKyBcIiAtIFwiICsgZW1haWxcbiAgKSwgXG4gIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcImxpc3QtZ3JvdXAtaXRlbVwifSwgXG4gICAgUmVhY3QuRE9NLmg1KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsbWFyZ2luVG9wOjAsbWFyZ2luQm90dG9tOjB9fSwgXCJTdWJqZWN0OsKgwqBcIiksIFwiIFwiLCB0aGlzLnByb3BzLmN1cnJlbnRUZW1wbGF0ZS5zdWJqZWN0XG4gICksIFxuICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJsaXN0LWdyb3VwLWl0ZW0gYm9keVwifSlcbilcbiAgXG4gICAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICApLCBcblxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWZvb3RlclwiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1kZWZhdWx0XCIsICdkYXRhLWRpc21pc3MnOiBcIm1vZGFsXCJ9LCBcIkNsb3NlXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeVwifSwgXCJTZW5kIEVtYWlsXCIpXG4gICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgKTtcbiAgfSxcblxuICBwcmV2aW91c1Byb3NwZWN0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50UHJvc3BlY3Q6IHRoaXMuc3RhdGUuY3VycmVudFByb3NwZWN0LTEgfSlcbiAgfSxcblxuICBuZXh0UHJvc3BlY3Q6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2N1cnJlbnRQcm9zcGVjdDogdGhpcy5zdGF0ZS5jdXJyZW50UHJvc3BlY3QrMSB9KVxuICB9LFxuXG4gIHBhcnNlVGVtcGxhdGU6IGZ1bmN0aW9uKHRlbXBsYXRlQm9keSkge1xuICAgIGZpcnN0X25hbWUgPSBwcm9zcGVjdC5uYW1lLnNwbGl0KCcgJylbMF1cbiAgICAvL2hpcmluZ19zaWduYWwgPSBwcm9zcGVjdC5zaWduYWxzXG5cbiAgICBzaWduYWxzID0gKHByb3NwZWN0LnNpZ25hbHMpID8gcHJvc3BlY3Quc2lnbmFsc1swXSA6IFwiXCJcbiAgICB0ZW1wbGF0ZUJvZHkgPSBNdXN0YWNoZS5yZW5kZXIodGVtcGxhdGVCb2R5LCB7XG4gICAgICBoaXJpbmdfc2lnbmFsOiBzaWduYWxzLFxuICAgICAgZmlyc3RfbmFtZTogcHJvc3BlY3QubmFtZS5zcGxpdCgnICcpWzBdXG4gICAgfSlcblxuICAgIGNvbnNvbGUubG9nKHRlbXBsYXRlQm9keSlcbiAgICAgIFxuICAgIHJldHVybiB0ZW1wbGF0ZUJvZHlcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgIC8vY29uc29sZS5sb2codGhpcy5wcm9wcy5jdXJyZW50VGVtcGxhdGUpXG4gICAgcGFyc2VkVGVtcGxhdGUgPSB0aGlzLnBhcnNlVGVtcGxhdGUodGhpcy5wcm9wcy5jdXJyZW50VGVtcGxhdGUuYm9keSlcbiAgICBcbiAgICAvLyQoJy5ib2R5JykuaHRtbCh0aGlzLnByb3BzLmN1cnJlbnRUZW1wbGF0ZS5ib2R5KVxuICAgICQoJy5ib2R5JykuaHRtbChwYXJzZWRUZW1wbGF0ZSlcbiAgfVxufSk7XG5cbnZhciBVc2VyUGxhY2VIb2xkZXIgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdVc2VyUGxhY2VIb2xkZXInLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXBcIiwgc3R5bGU6IHttYXJnaW5SaWdodDo1LG1hcmdpbkJvdHRvbTo1fX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXBcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXNtXCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS11c2VyXCJ9KSwgXCLCoMKgXCIsIFxuICAgICAgICAgICAgICAodGhpcy5wcm9wcy5wcm9zcGVjdCkgPyB0aGlzLnByb3BzLnByb3NwZWN0Lm5hbWUgOiBcIlwiXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4tc21cIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS10cmFzaC1vXCJ9KVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgIClcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gU2VudCBNYWlsXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNlbnRFbWFpbHM6IFtdXG4gICAgfVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzcyA9IHRoaXM7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvU2VudEVtYWlsJyxcbiAgICAgIGRhdGE6e2luY2x1ZGU6ICdjYW1wYWlnbixwcm9zcGVjdCxwcm9zcGVjdC5lbWFpbF9ndWVzc2VzLnBhdHRlcm4nfSxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IHRoaXNzLnNldFN0YXRlKHtzZW50RW1haWxzOiByZXMucmVzdWx0c30pIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oKSB7fVxuICAgIH0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBzZW50RW1haWxzID0gW11cbiAgICBmb3IoaT0wO2k8IHRoaXMuc3RhdGUuc2VudEVtYWlscy5sZW5ndGg7IGkrKykgXG4gICAgICBzZW50RW1haWxzLnB1c2goU2VudEVtYWlsUm93KHtzZW50RW1haWw6IHRoaXMuc3RhdGUuc2VudEVtYWlsc1tpXX0pKVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7b3ZlcmZsb3c6J2F1dG8nLGhlaWdodDo1NTB9fSwgXG4gICAgICAgIFJlYWN0LkRPTS50YWJsZSh7Y2xhc3NOYW1lOiBcInRhYmxlIHRhYmxlLXN0cmlwZWRcIiwgc3R5bGU6IHttYXJnaW5Cb3R0b206MH19LCBcbiAgICAgICAgICBSZWFjdC5ET00udGhlYWQobnVsbCwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiUHJvc3BlY3QgTmFtZVwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJQcm9zcGVjdCBFbWFpbFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7d2lkdGg6MjkwfX0sIFwiU3RhdHVzXCIpXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRib2R5KG51bGwsIFxuICAgICAgICAgICAgc2VudEVtYWlsc1xuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgU2VudEVtYWlsUm93ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnU2VudEVtYWlsUm93JyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBzZW50RW1haWwgPSB0aGlzLnByb3BzLnNlbnRFbWFpbFxuICAgIC8vY29uc29sZS5sb2coc2VudEVtYWlsKVxuXG4gICAgZW1haWwgPSBzZW50RW1haWwuZW1haWxcbiAgICBpZihlbWFpbCA9PSBcIm5vX2VtYWlsXCIpe1xuICAgICAgZmlyc3QgPSBzZW50RW1haWwucHJvc3BlY3QubmFtZS5zcGxpdCgnICcpWzBdXG4gICAgICBsYXN0ID0gXy5sYXN0KHNlbnRFbWFpbC5wcm9zcGVjdC5uYW1lLnNwbGl0KCcgJykpXG5cbiAgICAgIHBhdHRlcm4gPSBfLmZpbmRXaGVyZShzZW50RW1haWwucHJvc3BlY3QuZW1haWxfZ3Vlc3Nlcywgeyd0cmllZCc6ZmFsc2V9KVxuICAgICAgZGF0YSA9IHtmaXJzdDogZmlyc3QsIGxhc3Q6IGxhc3QsIGZpOiBmaXJzdFswXSwgbGk6IGxhc3RbMF19XG4gICAgICBlbWFpbCA9IE11c3RhY2hlLnJlbmRlcihwYXR0ZXJuLnBhdHRlcm4ucGF0dGVybiwgZGF0YSkudG9Mb3dlckNhc2UoKVxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udHIobnVsbCwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBSZWFjdC5ET00uaDYobnVsbCwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNsb2NrXCJ9KSwgXG4gICAgICAgICAgICBtb21lbnQoc2VudEVtYWlsLmNyZWF0ZWRBdCkuZnJvbU5vdygpKSksIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2ZvbnRTaXplOjE0LGZvbnRXZWlnaHQ6J2JvbGQnLG1hcmdpbkJvdHRvbTowfX0sIHNlbnRFbWFpbC5wcm9zcGVjdC5uYW1lKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpblRvcDo0LG1hcmdpbkJvdHRvbTowfX0sIHNlbnRFbWFpbC5wcm9zcGVjdC5wb3MudHJpbSgpKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpblRvcDo0fX0sIHNlbnRFbWFpbC5wcm9zcGVjdC5jb21wYW55X25hbWUpXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgUmVhY3QuRE9NLmg2KG51bGwsIGVtYWlsKSksIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7cGFkZGluZ1RvcDoxM319LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLWRlZmF1bHRcIn0sIFwiUXVldWVkXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZXZyb24tY2lyY2xlLXJpZ2h0IHRleHQtbXV0ZWRcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHtwYWRkaW5nTGVmdDo1LHBhZGRpbmdSaWdodDo1fX0pLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLXN1Y2Nlc3NcIn0sIFwiT3BlbmVkXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZXZyb24tY2lyY2xlLXJpZ2h0IHRleHQtbXV0ZWRcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHtwYWRkaW5nTGVmdDo1LHBhZGRpbmdSaWdodDo1fX0pLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLWRlZmF1bHRcIn0sIFwiRGVsaXZlcmVkXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZXZyb24tY2lyY2xlLXJpZ2h0IHRleHQtbXV0ZWRcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHtwYWRkaW5nTGVmdDo1LHBhZGRpbmdSaWdodDo1fX0pLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLWRlZmF1bHRcIn0sIFwiUmVwbGllZFwiKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KVxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbnZhciBTaWRlTWVudUxpc3RPcHRpb24gPSByZXF1aXJlKCcuL3VzZXJfc2lkZV9tZW51X2xpc3QuanMubWluLmpzJyk7XG52YXIgY3JlYXRlTGlzdE1vZGFsID0gcmVxdWlyZSgnLi9jcmVhdGVfbGlzdF9tb2RhbC5qcy5taW4uanMnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvL1NpZGVNZW51UHJvc3BlY3RzIC0gU2lkZUxpc3RcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLypcbiAgICAgIGNyZWF0ZUxpc3Q6IFxuICAgICAgcmVuYW1lTGlzdDpcbiAgICAgIGRlbGV0ZUxpc3Q6XG4gICAgICBjaGFuZ2VMaXN0OlxuICAgICAgY3VycmVudExpc3Q6XG4gICAgICB0b3RhbENvdW50OlxuICAgICAgbGlzdHM6XG4gICAgICAqL1xuICAgIH1cbiAgfSxcblxuICBjcmVhdGVMaXN0OiBmdW5jdGlvbiAoZGF0YSkge1xuICAgIHRoaXMucHJvcHMuY3JlYXRlTGlzdChkYXRhKVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgfSxcblxuICBjaGFuZ2VMaXN0OiBmdW5jdGlvbihlKSB7XG4gICAgLypcbiAgICBjdXJyZW50TGlzdCA9ICQoZS50YXJnZXQpLnBhcmVudCgpLy8uZGF0YSgnbGlzdCcpXG4gICAgY29uc29sZS5sb2coY3VycmVudExpc3QpXG4gICAgdGhpcy5wcm9wcy5jaGFuZ2VMaXN0KGN1cnJlbnRMaXN0Lm5hbWUsIGN1cnJlbnRMaXN0Lm9iamVjdElkKVxuICAgICovXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBpZih0aGlzLnByb3BzLmN1cnJlbnRMaXN0ID09IFwiQWxsXCIpXG4gICAgICBzdHlsZXMgPSB7J2JhY2tncm91bmRDb2xvcic6J3JnYigwLCAxMjIsIDI1NSknLCAnY29sb3InOid3aGl0ZSd9IFxuICAgIGVsc2VcbiAgICAgIHN0eWxlcyA9ICB7fVxuXG4gICAgbGlzdHMgPSBbU2lkZU1lbnVMaXN0T3B0aW9uKHtsaXN0OiB7bmFtZTogJ0FsbCcsY291bnQ6IHRoaXMucHJvcHMudG90YWxDb3VudH0sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblR5cGU6ICd1c2VycycsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTGlzdDogdGhpcy5wcm9wcy5jaGFuZ2VMaXN0fSksIFxuICAgICAgICAgICAgIFNpZGVNZW51TGlzdE9wdGlvbih7bGlzdDoge25hbWU6ICdBcmNoaXZlZCcsIGNvdW50OiAnfid9LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25UeXBlOiAnYXJjaGl2ZScsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTGlzdDogdGhpcy5wcm9wcy5jaGFuZ2VMaXN0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVDb3VudDogdHJ1ZX0pXVxuXG4gICAgZm9yKGk9MDtpPCB0aGlzLnByb3BzLmxpc3RzLmxlbmd0aDtpKyspe1xuICAgICAgbGlzdCA9IHRoaXMucHJvcHMubGlzdHNbaV1cbiAgICAgIGlmKGxpc3QubGlzdF90eXBlID09IFwic2lnbmFsX2xpc3RcIilcbiAgICAgICAgaWNvblR5cGUgPSBcIndpZmlcIlxuICAgICAgZWxzZSBpZiAobGlzdC5saXN0X3R5cGUgPT0gXCJtaW5pbmdfam9iXCIpXG4gICAgICAgIGljb25UeXBlID0gXCJjbG91ZERvd25sb2FkXCJcbiAgICAgIGlmKGxpc3QubGlzdF90eXBlKVxuICAgICAgICBsaXN0cy5wdXNoKCBTaWRlTWVudUxpc3RPcHRpb24oe2xpc3Q6IGxpc3QsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25UeXBlOiBpY29uVHlwZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTGlzdDogdGhpcy5wcm9wcy5jaGFuZ2VMaXN0fSkpXG4gICAgICBlbHNlIFxuICAgICAgICBsaXN0cy5wdXNoKCBTaWRlTWVudUxpc3RPcHRpb24oe2xpc3Q6IGxpc3QsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZUxpc3Q6IHRoaXMucHJvcHMuY2hhbmdlTGlzdH0pKVxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLWxnLTIgY29sLW1kLTIgY29sLXNtLTIgY29sLXhzLTJcIiwgXG4gICAgICAgICAgIHN0eWxlOiB7cGFkZGluZzonMCcsaGVpZ2h0Oic0MzhweCcsYmFja2dyb3VuZENvbG9yOicjZTBlOWVlJyxcbiAgICAgICAgICAgICAgICAgICBib3JkZXJSaWdodDonMXB4IHNvbGlkICNiMGI4YmYnLHRleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInByb3NwZWN0LWxpc3QtaGVhZGVyXCJ9LCBcIiBMaXN0cyBcIiksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwLXZlcnRpY2FsXCIsIFxuICAgICAgICAgICAgIHN0eWxlOiB7d2lkdGg6JzEwMCUnLCBoZWlnaHQ6ICczMjBweCcsIG92ZXJmbG93OiAnYXV0byd9fSwgXG4gICAgICAgICAgbGlzdHNcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBuZXctbGlzdC1idG5cIiwgXG4gICAgICAgICAgICAgICdkYXRhLXRvZ2dsZSc6IFwibW9kYWxcIiwgJ2RhdGEtdGFyZ2V0JzogXCIuYnMtZXhhbXBsZS1tb2RhbC1zbVwiLCBcbiAgICAgICAgICAgICAgc3R5bGU6IHsgYmFja2dyb3VuZEltYWdlOiAnbGluZWFyLWdyYWRpZW50KDE4MGRlZywgIzAwOTZmZiAwJSwgIzAwNWRmZiAxMDAlKSd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wbHVzLWNpcmNsZVwifSksIFwiwqDCoE5ldyBMaXN0XCJcbiAgICAgICAgKSwgXG4gICAgICAgIGNyZWF0ZUxpc3RNb2RhbCh7Y3JlYXRlTGlzdDogdGhpcy5jcmVhdGVMaXN0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0Q2xhc3NOYW1lOiB0aGlzLnByb3BzLmxpc3RDbGFzc05hbWV9KSwgXCIgXCIsIFJlYWN0LkRPTS5icihudWxsKVxuICAgICAgKVxuICAgICk7XG4gIH0sXG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBTaWduYWxDYWxlbmRhclxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXBvcnRzIDogW11cbiAgICB9XG4gIH0sXG5cbiAgZ2V0U2lnbmFsUmVwb3J0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzc3NzID0gdGhpcztcbiAgICBxcnkgPSB7J3doZXJlJyA6IEpTT04uc3RyaW5naWZ5KHtwcm9maWxlOntcbiAgICAgIF9fdHlwZTonUG9pbnRlcicsXG4gICAgICBjbGFzc05hbWU6J1Byb3NwZWN0UHJvZmlsZScsXG4gICAgICBvYmplY3RJZDp0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm9iamVjdElkXG4gICAgfX0pfVxuXG4gICAgLy8gR2V0IFNpZ25hbCBSZXBvcnRzIE9mIEN1cnJlbnQgUHJvZmlsZVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1NpZ25hbFJlcG9ydD9vcmRlcj0tY3JlYXRlZEF0JyxcbiAgICAgIHR5cGU6J0dFVCcsXG4gICAgICBkYXRhOiBxcnksXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5wYXJzZUhlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhyZXMucmVzdWx0cylcbiAgICAgICAgdGhpc3Nzcy5zZXRTdGF0ZSh7cmVwb3J0czogcmVzLnJlc3VsdHN9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAvL3RoaXMuZ2V0U2lnbmFsUmVwb3J0KClcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgIC8vdGhpcy5nZXRTaWduYWxSZXBvcnQoKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmVwb3J0cyA9IFtdXG4gICAgZm9yKGk9MDtpPCB0aGlzLnByb3BzLnJlcG9ydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlcG9ydHMucHVzaChTaWduYWxSZXBvcnRSb3coe3NldEN1cnJlbnRSZXBvcnQ6IHRoaXMuc2V0Q3VycmVudFJlcG9ydCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9zcGVjdFNpZ25hbFJlcG9ydDogdGhpcy5wcm9zcGVjdFNpZ25hbFJlcG9ydCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50VmlldzogdGhpcy5zZXRDdXJyZW50VmlldywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBvcnQ6IHRoaXMucHJvcHMucmVwb3J0c1tpXX0pKVxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCIsIHN0eWxlOiB7cGFkZGluZ0xlZnQ6MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OjAsd2lkdGg6JzEwMCUnfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2hlaWdodDo0NCxib3JkZXJCb3R0b206J3NvbGlkIDFweCByZ2IoMjIxLCAyMjEsIDIyMSknfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNCh7b25DbGljazogdGhpcy5yZXR1cm5Ub0NhbGVuZGFyVmlldywgXG4gICAgICAgICAgICAgIHN0eWxlOiB7Zm9udFdlaWdodDoyMDAsIGZsb2F0OidsZWZ0JyxjdXJzb3I6J3BvaW50ZXInLG1hcmdpblRvcDo3LFxuICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OjIwLHBhZGRpbmdUb3A6NSwgZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNhbGVuZGFyXCIsIHN0eWxlOiB7bWFyZ2luUmlnaHQ6NX19KSwgXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZS5uYW1lXG4gICAgICAgICAgKVxuICAgICAgICAgIFxuXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTEyXCIsIHN0eWxlOiB7cGFkZGluZ0xlZnQ6MCxwYWRkaW5nUmlnaHQ6MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MzU2LG92ZXJmbG93OidhdXRvJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge292ZXJmbG93OidhdXRvJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50YWJsZSh7Y2xhc3NOYW1lOiBcInRhYmxlIHRhYmxlLXN0cmlwZWRcIiwgc3R5bGU6IHttYXJnaW5Cb3R0b206MH19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoZWFkKG51bGwsIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvY2stb1wifSksIFwiIExhc3QgUmFuXCJcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInfX0sIFwiUG9zdGVkIEpvYiBMaXN0aW5nXCIpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJDb21wYW55IFNpZ25hbHNcIiksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcIlByb3NwZWN0IFNpZ25hbHNcIiksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt3aWR0aDoxNTAsdGV4dEFsaWduOidjZW50ZXInfX0pXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGJvZHkoe2NsYXNzTmFtZTogXCJyZXBvcnRzXCJ9LCBcbiAgICAgICAgICAgICAgICByZXBvcnRzXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9LFxuXG4gIHNldEN1cnJlbnRSZXBvcnQ6IGZ1bmN0aW9uKG5ld1JlcG9ydCkge1xuICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFJlcG9ydChuZXdSZXBvcnQpXG4gIH0sXG5cbiAgcHJvc3BlY3RTaWduYWxSZXBvcnQ6IGZ1bmN0aW9uKHNpZ25hbFJlcG9ydCkge1xuICAgIHRoaXMucHJvcHMucHJvc3BlY3RTaWduYWxSZXBvcnQodGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZSwgc2lnbmFsUmVwb3J0KVxuICB9LFxufSk7XG5cbnZhciBTaWduYWxSZXBvcnRSb3cgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdTaWduYWxSZXBvcnRSb3cnLFxuICByb3dDbGljazogZnVuY3Rpb24oKSB7XG4gICAgaWYodGhpcy5wcm9wcy5yZXBvcnQuZG9uZSlcbiAgICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFJlcG9ydCh0aGlzLnByb3BzLnJlcG9ydClcbiAgICBlbHNlXG4gICAgICBhbGVydGlmeS5sb2coXCJUaGlzIG1pbmluZyBqb2IgaXMgc3RpbGwgaW4gcHJvZ3Jlc3MuIFlvdSdsbCBiZSBub3RpZmllZCB3aGVuIGl0J3MgY29tcGxldGVkXCIpXG4gIH0sXG5cbiAgcHJvc3BlY3RTaWduYWxSZXBvcnQ6IGZ1bmN0aW9uKGUpIHtcbiAgICB0aGlzLnByb3BzLnByb3NwZWN0U2lnbmFsUmVwb3J0KHRoaXMucHJvcHMucmVwb3J0KVxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgfSxcblxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcHJvc3BlY3RlZCA9IHRoaXMucHJvcHMucmVwb3J0LnByb3NwZWN0ZWRcbiAgICBpZighdGhpcy5wcm9wcy5yZXBvcnQubWluaW5nX2pvYilcbiAgICAgIGljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXdpZmlcIn0pXG4gICAgZWxzZVxuICAgICAgaWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvdWQtZG93bmxvYWRcIiwgc3R5bGU6IHtjb2xvcjonIzU1NSd9fSlcblxuICAgIGxvYWRpbmcgPSAoIXRoaXMucHJvcHMucmVwb3J0LmRvbmUpID8gUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInByb2ZpbGUtbG9hZGluZ1wiLCBzdHlsZToge21hcmdpbkxlZnQ6MzB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRvdWJsZS1ib3VuY2UxXCIsIHN0eWxlOiB7YmFja2dyb3VuZENvbG9yOicjNWNiODVjJ319KSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRvdWJsZS1ib3VuY2UyXCIsIHN0eWxlOiB7YmFja2dyb3VuZENvbG9yOicjNWNiODVjJ319KVxuICAgICAgICAgICkgOiBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5wcm9zcGVjdFNpZ25hbFJlcG9ydCwgXG4gICAgICAgICAgICAgc3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJyxtYXJnaW5Ub3A6NX0sIFxuICAgICBjbGFzc05hbWU6IChwcm9zcGVjdGVkKSA/IFwiYnRuIGJ0bi14cyBidG4tc3VjY2VzcyBkaXNhYmxlZFwiIDogXCJidG4gYnRuLXhzIGJ0bi1zdWNjZXNzXCJ9LCBcbiAgICAgICAgICAgICAocHJvc3BlY3RlZCkgPyAnUHJvc3BlY3RlZCcgOiAnUHJvc3BlY3QgQWxsJ1xuICAgICAgICAgIClcbiAgICAvLyBNYWtlIGFuIEFsZXJ0IHdoZW4gc29tZWJvZHkgY2xpY2tzIG9uIGluIHByb2dyZXNzIHNpZ25hbCByZXBvcnRcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnRyKHtvbkNsaWNrOiB0aGlzLnJvd0NsaWNrLCBzdHlsZToge2N1cnNvcjoncG9pbnRlcid9fSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt0ZXh0QWxpZ246J3JpZ2h0JyxwYWRkaW5nVG9wOjE1fX0sIFxuICAgICAgICAgIGljb25cbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIFxuICAgICAgICAgICAgbW9tZW50KHRoaXMucHJvcHMucmVwb3J0LmNyZWF0ZWRBdCkuZnJvbU5vdygpXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgXG4gICAgICAgICAgJ2xvbCdcbiAgICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1zdWNjZXNzXCJ9LCBcbiAgICAgICAgICAgIHRoaXMucHJvcHMucmVwb3J0LmNvbXBhbnlfY291bnRcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgIFwiwqAgQ29tcGFuaWVzIGZvdW5kLlwiXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwibGFiZWwgbGFiZWwtc3VjY2Vzc1wifSwgXG4gICAgICAgICAgICB0aGlzLnByb3BzLnJlcG9ydC5wZW9wbGVfY291bnRcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgIFwiwqAgUGVvcGxlIGZvdW5kLlwiXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogKHRoaXMucHJvcHMucmVwb3J0LmRvbmUpID8ge30gOiB7cGFkZGluZ1RvcDoxN319LCBcbiAgICAgICAgICBsb2FkaW5nXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIFNpZ25hbERldGFpbFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzaWduYWxzOiBbXVxuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgdGhpc3NzcyA9IHRoaXM7XG4gICAgY3VycmVudFByb2ZpbGVSZXBvcnQgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBfX3R5cGU6ICdQb2ludGVyJyxcbiAgICAgIGNsYXNzTmFtZTogJ1NpZ25hbFJlcG9ydCcsXG4gICAgICBvYmplY3RJZDogdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZVJlcG9ydC5vYmplY3RJZFxuICAgIH0pXG5cbiAgICBjb25zb2xlLmxvZygnQ1VSUkVOVCBQUk9GSUxFJylcbiAgICBjb25zb2xlLmxvZyhjdXJyZW50UHJvZmlsZVJlcG9ydClcbiAgICBxcnkgPSAnd2hlcmU9e1wic2lnbmFsX3JlcG9ydFwiOicrY3VycmVudFByb2ZpbGVSZXBvcnQrJ30maW5jbHVkZT1jb21wYW55X3NpZ25hbCxjb21wYW55X3NpZ25hbC5zaWduYWxzJm9yZGVyPS1jcmVhdGVkQXQnXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUGVvcGxlU2lnbmFsPycrcXJ5LFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZygnU0lHTkFMIERFVEFJTCcpXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcy5yZXN1bHRzKVxuICAgICAgICB0aGlzc3NzLnNldFN0YXRlKHtzaWduYWxzOiByZXMucmVzdWx0c30pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgcmV0dXJuVG9DYWxlbmRhclZpZXc6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdyZXR1cm4gdG8gY2FsZW5kYXIgdmlldycpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBzaWduYWxzID0gW11cbiAgICBmb3IoaT0wO2k8IHRoaXMuc3RhdGUuc2lnbmFscy5sZW5ndGg7IGkrKylcbiAgICAgIHNpZ25hbHMucHVzaChTaWduYWxSb3coe3NpZ25hbDogdGhpcy5zdGF0ZS5zaWduYWxzW2ldfSkpXG5cbiAgICBjdXJyZW50UHJvZmlsZVJlcG9ydCA9IHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGVSZXBvcnRcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lclwiLCBzdHlsZToge2hlaWdodDozNTYscGFkZGluZ0xlZnQ6MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OjAsd2lkdGg6JzEwMCUnfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2hlaWdodDo0NCxib3JkZXJCb3R0b206J3NvbGlkIDFweCByZ2IoMjIxLCAyMjEsIDIyMSknfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNCh7b25DbGljazogdGhpcy5yZXR1cm5Ub0NhbGVuZGFyVmlldywgXG4gICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J2xlZnQnLGN1cnNvcjoncG9pbnRlcicsbWFyZ2luVG9wOjcsZm9udFdlaWdodDoyMDAsXG4gICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0xlZnQ6MjAscGFkZGluZ1RvcDo1LGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2FsZW5kYXJcIiwgc3R5bGU6IHttYXJnaW5SaWdodDo1fX0pLCBcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm5hbWVcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7Zm9udFNpemU6MTMscGFkZGluZ0xlZnQ6NSxwYWRkaW5nVG9wOjUsZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2hldnJvbi1yaWdodFwiLCBzdHlsZToge2ZvbnRTaXplOjl9fSksIFwiIMKgXCIsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG9jay1vXCJ9KSwgXCIgwqBcIiwgXG4gICAgICAgICAgICBtb21lbnQoY3VycmVudFByb2ZpbGVSZXBvcnQuY3JlYXRlZEF0KS5mcm9tTm93KCksIFwiIMKgXCJcbiAgICAgICAgICApLCBcblxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIHN0eWxlOiB7Zm9udFdlaWdodDonYm9sZCcsZmxvYXQ6J3JpZ2h0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDoxMCxtYXJnaW5Ub3A6MTB9LCBcbiAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14c1wifSwgXG4gICAgICAgICAgICBcIlByb3NwZWN0IEFsbFwiXG4gICAgICAgICAgKSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwXCIsIFxuICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDoxMCxtYXJnaW5SaWdodDoxMH0sIFxuICAgICAgICAgICAgICAgJ2RhdGEtdG9nZ2xlJzogXCJidXR0b25zXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLWRlZmF1bHQgYWN0aXZlXCIsIHN0eWxlOiB7d2lkdGg6MzB9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXVzZXJcIn0pXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLWRlZmF1bHRcIiwgc3R5bGU6IHt3aWR0aDozMH19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYnVpbGRpbmdcIn0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTEyXCIsIHN0eWxlOiB7cGFkZGluZ0xlZnQ6MCxwYWRkaW5nUmlnaHQ6MH19LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge292ZXJmbG93OidhdXRvJyxoZWlnaHQ6MzU2fX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRhYmxlKHtjbGFzc05hbWU6IFwidGFibGUgdGFibGUtc3RyaXBlZFwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50aGVhZChudWxsLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInLHdpZHRoOjkwfX0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG9jay1vXCJ9KVxuICAgICAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiUGVvcGxlXCIpLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIkNvbXBhbmllc1wiKSwgXG5cbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7d2lkdGg6OTAsdGV4dEFsaWduOidjZW50ZXInfX1cbiAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50Ym9keSh7Y2xhc3NOYW1lOiBcInJlcG9ydHNcIn0sIFxuICAgICAgICAgICAgICAgIHNpZ25hbHNcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgU2lnbmFsUm93ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnU2lnbmFsUm93JyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBjb21wYW55ID0gKHRoaXMucHJvcHMuc2lnbmFsLmNvbXBhbnlfc2lnbmFsKSA/IHRoaXMucHJvcHMuc2lnbmFsLmNvbXBhbnlfc2lnbmFsIDoge31cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnRyKG51bGwsIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBcbiAgICAgICAgICAgIG1vbWVudCh0aGlzLnByb3BzLnNpZ25hbC5jcmVhdGVkQXQpLmZyb21Ob3coKVxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG5cbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCB0aGlzLnByb3BzLnNpZ25hbC5saW5rX3RleHQpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgdGhpcy5wcm9wcy5zaWduYWwudGl0bGUpXG4gICAgICAgICksIFxuXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgY29tcGFueS5uYW1lKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIHRoaXMucHJvcHMuc2lnbmFsLnRpdGxlKVxuICAgICAgICApLCBcblxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHNcIiwgXG4gICAgICAgICAgICBzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnfX0sIFxuICAgICAgICAgICAgXCJQcm9zcGVjdFwiXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KVxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIFNpZ25hbExvYWRpbmdcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY291bnQ6ICd+JyxcbiAgICAgIHByb3NwZWN0TmFtZSA6ICd+JyxcbiAgICAgIHByb3NwZWN0VGl0bGUgOiAnficsXG4gICAgICBjb21wYW55TmFtZSA6ICd+JyxcbiAgICB9XG4gIH0sXG5cbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRoaXNzID0gdGhpcztcbiAgICB2YXIgcHVzaGVyID0gbmV3IFB1c2hlcignMWE2OGE5NmM4ZmRlOTM4ZmE3NWEnKTtcbiAgICBvYmplY3RJZCA9IHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGUub2JqZWN0SWRcbiAgICB2YXIgY2hhbm5lbCA9IHB1c2hlci5zdWJzY3JpYmUob2JqZWN0SWQpO1xuICAgIGNoYW5uZWwuYmluZChcIm15LWV2ZW50XCIsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpXG4gICAgICB0aGlzcy5zZXRTdGF0ZSh7XG4gICAgICAgIGNvdW50OiBkYXRhLmNvdW50LFxuICAgICAgICBwcm9zcGVjdE5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgcHJvc3BlY3RUaXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgY29tcGFueU5hbWU6IGRhdGEuY29tcGFueVxuICAgICAgfSlcbiAgICB9KTtcblxuICAgIC8vIEdldCBTaWduYWwgUmVwb3J0IENvdW50XG4gICAgLy8gR2V0IExhc3QgUGVvcGxlU2lnbmFsIEZvdW5kXG4gICAgcXJ5ID0geyBwcm9maWxlOiBhcHBDb25maWcucG9pbnRlcignUHJvc3BlY3RQcm9maWxlJyxvYmplY3RJZCkgfVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvU2lnbmFsUmVwb3J0JyxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBkYXRhOiB7J3doZXJlJzpKU09OLnN0cmluZ2lmeShxcnkpLG9yZGVyOictY3JlYXRlZEF0J30sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIGNvdW50ID0gKHJlcy5yZXN1bHRzWzBdKSA/IHJlcy5yZXN1bHRzWzBdLnBlb3BsZV9jb3VudCA6IDBcbiAgICAgICAgXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtjb3VudDogY291bnQgfSlcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9QZW9wbGVTaWduYWwnLFxuICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgIGRhdGE6IHsnd2hlcmUnOkpTT04uc3RyaW5naWZ5KHFyeSksb3JkZXI6Jy1jcmVhdGVkQXQnfSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAvL2NvbnNvbGUubG9nKHJlcylcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe1xuICAgICAgICAgIHByb3NwZWN0TmFtZTogKHJlcy5yZXN1bHRzWzBdKSA/IHJlcy5yZXN1bHRzWzBdLmxpbmtfdGV4dCA6IFwiXCIsXG4gICAgICAgICAgcHJvc3BlY3RUaXRsZTogKHJlcy5yZXN1bHRzWzBdKSA/IHJlcy5yZXN1bHRzWzBdLnRpdGxlIDogXCJcIixcbiAgICAgICAgICBjb21wYW55TmFtZTogKHJlcy5yZXN1bHRzWzBdKSA/IHJlcy5yZXN1bHRzWzBdLmNvbXBhbnkgOiBcIlwiXG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgIH0pO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICBQdXNoZXIubG9nID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgaWYgKHdpbmRvdy5jb25zb2xlICYmIHdpbmRvdy5jb25zb2xlLmxvZykge1xuICAgICAgICAvL3dpbmRvdy5jb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5pbml0aWFsaXplKClcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uKCkge1xuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgY291bnQ6ICd+JyxcbiAgICAgIHByb3NwZWN0TmFtZSA6ICd+JyxcbiAgICAgIHByb3NwZWN0VGl0bGUgOiAnficsXG4gICAgICBjb21wYW55TmFtZSA6ICd+JyxcbiAgICB9KVxuICAgIHRoaXMuaW5pdGlhbGl6ZSgpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAvLyBTaG93IGNvbXBhbmllcyBmb3IgaGlyaW5nIHNpZ25hbHNcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtiYWNrZ3JvdW5kOidsaW5lYXItZ3JhZGllbnQoI2RhZThmZiwjZGFlOGZmKScsIGJhY2tncm91bmRJbWFnZTogJ3JhZGlhbC1ncmFkaWVudChjaXJjbGUgYXQgY2VudGVyIGNlbnRlciwjZmZmLCNkZmYxZmQgOTAwcHgpJyxoZWlnaHQ6JzEwMCUnLHBhZGRpbmdUb3A6MTB9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJzaWduYWwtY2FyZFwiLCBzdHlsZToge1xuICAgICAgICAgICAgd2lkdGg6NTAwLHRleHRBbGlnbjonY2VudGVyJyxkaXNwbGF5OidibG9jaycsbWFyZ2luUmlnaHQ6J2F1dG8nLFxuICAgICAgICAgICAgbWFyZ2luTGVmdDonYXV0bycsbWFyZ2luVG9wOjAsaGVpZ2h0OjIwMFxuICAgICAgICAgIH19LCBcblxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibG9hZGluZy10d28tYmFsbHNcIiwgc3R5bGU6IHtoZWlnaHQ6MjAsd2lkdGg6MjB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRvdDFcIiwgc3R5bGU6IHtjb2xvcjonYmxhY2snfX0pLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZG90MlwiLCBzdHlsZToge2NvbG9yOidibGFjayd9fSlcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcIlwiLCBzdHlsZToge2NvbG9yOicjMWNhM2ZkJywgZm9udFdlaWdodDonYm9sZCcsbWFyZ2luVG9wOi0xMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luTGVmdDotMjAwLCBmb250U2l6ZTozMiwgZm9udEZhbWlseTonUHJveGltYS1Ob3ZhJ319LCBcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuY291bnQgKyBcIiBwZW9wbGUgZm91bmQuXCJcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luVG9wOi00OCxtYXJnaW5SaWdodDo1NX19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5Cb3R0b206MywgZm9udFdlaWdodDonYm9sZCd9fSwgdGhpcy5zdGF0ZS5wcm9zcGVjdE5hbWUsIFwiIC0gwqBcIiwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2ZvbnRXZWlnaHQ6NTAwLCBmb250U3R5bGU6J2l0YWxpYyd9fSwgXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5wcm9zcGVjdFRpdGxlKSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpblRvcDowLHRleHRBbGlnbjonbGVmdCd9fSwgXG4gICAgICAgICAgICAgIHRoaXMuc3RhdGUuY29tcGFueU5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH0sXG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBTaWduYWxQcm9maWxlXG4gIHNldEN1cnJlbnRWaWV3OiBmdW5jdGlvbihlKSB7XG4gICAgaWYoIXRoaXMucHJvcHMucHJvZmlsZS5taW5pbmdfam9iKVxuICAgICAgdGhpcy5wcm9wcy5zZXRDdXJyZW50VmlldygnQ2FsZW5kYXInKVxuICAgIGVsc2VcbiAgICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFZpZXcoJ01pbmluZ0pvYkNhbGVuZGFyJylcbiAgICAvL2Uuc3RvcFByb3BhZ2F0aW9uKClcbiAgfSxcblxuICBjYWxlbmRhckNsaWNrOmZ1bmN0aW9uKGUpIHtcbiAgICB0aGlzLnByb3BzLnNldEN1cnJlbnRQcm9maWxlKHRoaXMucHJvcHMucHJvZmlsZSlcbiAgICBpZighdGhpcy5wcm9wcy5wcm9maWxlLm1pbmluZ19qb2IpXG4gICAgICB0aGlzLnByb3BzLnNldEN1cnJlbnRWaWV3KCdDYWxlbmRhcicpXG4gICAgZWxzZVxuICAgICAgdGhpcy5wcm9wcy5zZXRDdXJyZW50VmlldygnTWluaW5nSm9iQ2FsZW5kYXInKVxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgfSxcblxuICBzZXRDdXJyZW50UHJvZmlsZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcm9wcy5zZXRDdXJyZW50UHJvZmlsZSh0aGlzLnByb3BzLnByb2ZpbGUpXG4gICAgdGhpcy5wcm9wcy5zZXRDdXJyZW50VmlldygnRmVlZCcpXG4gIH0sXG5cbiAgcmVtb3ZlVGhlUHJvZmlsZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcm9wcy5yZW1vdmVQcm9maWxlKHRoaXMucHJvcHMucHJvZmlsZSlcbiAgfSxcblxuICByZW1vdmVQcm9maWxlOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzc3NzID0gdGhpcztcbiAgICBjb25zb2xlLmxvZyh0aGlzcy5yZW1vdmVUaGVQcm9maWxlKVxuXG4gICAgc3dhbCh7ICAgXG4gICAgICB0aXRsZTogXCJBcmUgeW91IHN1cmU/XCIsICAgXG4gICAgICB0ZXh0OiBcIllvdXIgd2lsbCBub3QgYmUgYWJsZSB0byByZWNvdmVyIHRoaXMgcHJvc3BlY3QgbGlzdCFcIiwgICBcbiAgICAgIHR5cGU6IFwid2FybmluZ1wiLCAgIFxuICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwgICBcbiAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogXCIjREQ2QjU1XCIsICAgXG4gICAgICBjb25maXJtQnV0dG9uVGV4dDogXCJZZXMsIGRlbGV0ZSBpdCFcIiwgICBcbiAgICAgIGNsb3NlT25Db25maXJtOiBmYWxzZSB9LCBcbiAgICAgIGZ1bmN0aW9uKCl7ICAgXG4gICAgICAgIHN3YWwoXCJEZWxldGVkIVwiLCBcIllvdXIgcHJvc3BlY3QgbGlzdCBoYXMgYmVlbiBkZWxldGVkLlwiLCBcInN1Y2Nlc3NcIik7IFxuICAgICAgICB0aGlzc3NzLnJlbW92ZVRoZVByb2ZpbGUoKVxuICAgICAgICBjb25zb2xlLmxvZygnZGVsZXRlZCcpXG4gICAgICB9KTtcbiAgfSxcblxuICAvL2NvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24ocHJldlByb3BzLCBwcmV2U3RhdGUpIHsgfSxcbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24obmV4dFByb3BzKSB7XG4gIC8vY29tcG9uZW50V2lsbFVwZGF0ZTogZnVuY3Rpb24obmV4dFByb3BzKSB7XG4gICAgaWYodHlwZW9mKHRoaXMucHJvcHMucHJvZmlsZS5vYmplY3RJZCkgPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgY29uc29sZS5sb2coJ1JFQ0VJVkUgUFJPUFMnKVxuXG4gICAgICB2YXIgcHVzaGVyID0gbmV3IFB1c2hlcignMWE2OGE5NmM4ZmRlOTM4ZmE3NWEnKTtcbiAgICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgICBjb25zb2xlLmxvZyhuZXh0UHJvcHMpXG4gICAgICBjb25zb2xlLmxvZyhuZXh0UHJvcHMucHJvZmlsZSlcbiAgICAgIGNvbnNvbGUubG9nKF8ua2V5cyhuZXh0UHJvcHMucHJvZmlsZSkpXG4gICAgICBjb25zb2xlLmxvZyhuZXh0UHJvcHMucHJvZmlsZS5vYmplY3RJZClcbiAgICAgIG9iamVjdElkID0gbmV4dFByb3BzLnByb2ZpbGUub2JqZWN0SWRcbiAgICAgIGNvbnNvbGUubG9nKCduZXcgcHVzaGVyIGNoYW5uZWwgLT4gJysgb2JqZWN0SWQpXG5cbiAgICAgIHZhciBjaGFubmVsID0gcHVzaGVyLnN1YnNjcmliZShvYmplY3RJZCk7XG4gICAgICBjaGFubmVsLmJpbmQoXCJkb25lXCIsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSlcbiAgICAgICAgY29uc29sZS5sb2codGhpc3MucHJvcHMpXG4gICAgICAgIC8vdGhpc3Muc2V0U3RhdGUoeyBkb25lOiBkYXRhLmRvbmVfdGltZXN0YW1wIH0pXG4gICAgICAgIHRoaXNzLnByb3BzLnVwZGF0ZU1pbmluZ0pvYkRvbmUodGhpc3MucHJvcHMucHJvZmlsZSlcbiAgICAgICAgYWxlcnRpZnkuc3VjY2VzcyhcIlN1Y2Nlc3Mgbm90aWZpY2F0aW9uXCIpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgcHVzaGVyID0gbmV3IFB1c2hlcignMWE2OGE5NmM4ZmRlOTM4ZmE3NWEnKTtcbiAgICBvYmplY3RJZCA9IHRoaXMucHJvcHMucHJvZmlsZS5vYmplY3RJZFxuICAgIGNvbnNvbGUubG9nKCduZXcgcHVzaGVyIGNoYW5uZWwgLT4nLCBvYmplY3RJZClcbiAgICB2YXIgY2hhbm5lbCA9IHB1c2hlci5zdWJzY3JpYmUob2JqZWN0SWQpO1xuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgY2hhbm5lbC5iaW5kKFwiZG9uZVwiLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKVxuICAgICAgY29uc29sZS5sb2codGhpc3MucHJvcHMpXG4gICAgICAvL3RoaXNzLnNldFN0YXRlKHsgZG9uZTogZGF0YS5kb25lX3RpbWVzdGFtcCB9KVxuICAgICAgdGhpc3MucHJvcHMudXBkYXRlTWluaW5nSm9iRG9uZSh0aGlzcy5wcm9wcy5wcm9maWxlKVxuICAgICAgYWxlcnRpZnkuc3VjY2VzcyhcIlN1Y2Nlc3Mgbm90aWZpY2F0aW9uXCIpO1xuICAgIH0pO1xuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgc2lnbmFsRGV0YWlscyA9IFtdXG4gICAgZm9yKGk9MDtpPCB0aGlzLnByb3BzLnByb2ZpbGUucHJvZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHNpZ25hbERldGFpbHMucHVzaChQcm9maWxlVHlwZSh7cHJvZmlsZTogdGhpcy5wcm9wcy5wcm9maWxlLnByb2ZpbGVzW2ldfSkpXG4gICAgfVxuICAgIGlmKCF0aGlzLnByb3BzLnByb2ZpbGUubWluaW5nX2pvYikgXG4gICAgICBpY29uID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS13aWZpXCIsIHN0eWxlOiB7bWFyZ2luUmlnaHQ6NX19KVxuICAgIGVsc2VcbiAgICAgIGljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNsb3VkLWRvd25sb2FkXCIsIHN0eWxlOiB7bWFyZ2luUmlnaHQ6NX19KVxuXG4gICAgbG9hZGluZyA9ICghdGhpcy5wcm9wcy5wcm9maWxlLmRvbmUpID8gUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInByb2ZpbGUtbG9hZGluZ1wifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZG91YmxlLWJvdW5jZTFcIn0pLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJkb3VibGUtYm91bmNlMlwifSlcbiAgICAgICAgICApIDogXCJcIlxuICAgIFxuICAgIGlmKHRoaXMucHJvcHMucHJvZmlsZS5taW5pbmdfam9iICYmIHRoaXMucHJvcHMucHJvZmlsZS5kb25lKVxuICAgICAgbWluaW5nX2pvYl9kb25lID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jaGVjay1jaXJjbGVcIiwgc3R5bGU6IHtjb2xvcjonIzAwOTZmZicsbWFyZ2luTGVmdDo1LGZvbnRTaXplOjE1fX0pXG4gICAgZWxzZVxuICAgICAgbWluaW5nX2pvYl9kb25lID0gXCJcIlxuXG4gICAgc2VsZWN0ZWRTdHlsZSA9IHtwYWRkaW5nVG9wOjUsYm9yZGVyTGVmdDowLHBhZGRpbmdMZWZ0OjEwLCBib3JkZXJSaWdodDonMXB4IHNvbGlkICNkZGQnLCBib3JkZXJMZWZ0OiAnNXB4IHNvbGlkICMwMDk2ZmYgIWltcG9ydGFudCd9XG4gICAgcmVndWxhclN0eWxlID0ge3BhZGRpbmdUb3A6NSxib3JkZXJMZWZ0OjAscGFkZGluZ0xlZnQ6MTAsIGJvcmRlclJpZ2h0OicxcHggc29saWQgI2RkZCcsIGJvcmRlckxlZnQ6ICc1cHggc29saWQgcmVkICFpbXBvcnRhbnQnfVxuICAgIHJlZ3VsYXJTdHlsZSA9IHtwYWRkaW5nVG9wOjUsYm9yZGVyTGVmdDowLHBhZGRpbmdMZWZ0OjEwLCBib3JkZXJSaWdodDonMXB4IHNvbGlkICNkZGQnLCBib3JkZXJMZWZ0Oic1cHggc29saWQgcmdiYSgwLDAsMCwwKSd9XG4gICAgc2VsZWN0ZWQ9IHRoaXMucHJvcHMucHJvZmlsZS5vYmplY3RJZCA9PSB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm9iamVjdElkXG4gICAgaXRlbVN0eWxlID0gKHNlbGVjdGVkKSA/IHNlbGVjdGVkU3R5bGUgOiByZWd1bGFyU3R5bGVcbiAgICBpdGVtQ2xhc3MgPSAoc2VsZWN0ZWQpID8gXCJsaXN0LWdyb3VwLWl0ZW0gaWRlYWwtY29tcGFueS1wcm9maWxlIGxpc3QtZ3JvdXAtc2VsZWN0ZWRcIiA6IFwibGlzdC1ncm91cC1pdGVtIGlkZWFsLWNvbXBhbnktcHJvZmlsZVwiXG5cblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IGl0ZW1DbGFzcywgXG4gICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuc2V0Q3VycmVudFByb2ZpbGUsIFxuICAgICAgICAgICBzdHlsZTogcmVndWxhclN0eWxlfSwgXG4gICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwicHJvZmlsZS10aXRsZVwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtjbGFzc05hbWU6IFwibGFiZWwgbGFiZWwtZGVmYXVsdCBwcm9maWxlLW5hbWVcIn0sIFxuICAgICAgICAgICAgaWNvbiwgXG4gICAgICAgICAgICB0aGlzLnByb3BzLnByb2ZpbGUubmFtZVxuICAgICAgICAgICksIFxuICAgICAgICAgIGxvYWRpbmcsIG1pbmluZ19qb2JfZG9uZSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4teHMgc2lnbmFsLWRldGFpbC1idG5cIiwgXG4gICAgICAgICAgICAgb25DbGljazogdGhpcy5yZW1vdmVQcm9maWxlfSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWFyY2hpdmVcIn0pKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J25vbmUnfSwgXG4gICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBzaWduYWwtZGV0YWlsLWJ0blwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNvZ1wifSkpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBzaWduYWwtZGV0YWlsLWJ0blwiLCBcbiAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmNhbGVuZGFyQ2xpY2t9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2FsZW5kYXJcIn0pKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgb25DbGljazogdGhpcy5sYXVuY2hNb2RhbCwgXG4gICAgICAgICAgICAgc3R5bGU6ICh0aGlzLnByb3BzLnByb2ZpbGUubWluaW5nX2pvYikgPyB7ZGlzcGxheTonbm9uZSd9OntkaXNwbGF5OidibG9jayd9LCBcbiAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBzaWduYWwtZGV0YWlsLWJ0blwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNsb3VkLWRvd25sb2FkXCJ9KSlcbiAgICAgICAgKSwgXG5cbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInByb2ZpbGUtYm9keVwiLCBzdHlsZToge21hcmdpblRvcDo1fX0sIFxuICAgICAgICAgIHNpZ25hbERldGFpbHNcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgbGF1bmNoTW9kYWw6IGZ1bmN0aW9uKGUpIHtcbiAgICAkKCcjY3JlYXRlTWluaW5nSm9iTW9kYWwnKS5tb2RhbCgpXG4gICAgdGhpcy5wcm9wcy5zZXRDdXJyZW50UHJvZmlsZSh0aGlzLnByb3BzLnByb2ZpbGUpXG4gICAgaWYodGhpcy5wcm9wcy5jdXJyZW50VmlldyA9PSAnQ2FsZW5kYXInKVxuICAgICAgdGhpcy5wcm9wcy5zZXRDdXJyZW50VmlldygnQ2FsZW5kYXInKVxuICAgIGVsc2UgaWYodGhpcy5wcm9wcy5jdXJyZW50VmlldyA9PSAnRmVlZCcpXG4gICAgICB0aGlzLnByb3BzLnNldEN1cnJlbnRWaWV3KCdGZWVkJylcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gIH1cbn0pO1xuXG52YXIgUHJvZmlsZVR5cGUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdQcm9maWxlVHlwZScsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cbiAgaWYodGhpcy5wcm9wcy5wcm9maWxlKXtcbiAgICBpZih0aGlzLnByb3BzLnByb2ZpbGUuY2xhc3NOYW1lID09IFwiSGlyaW5nUHJvZmlsZVwiKSB7XG4gICAgICBzaWduYWxJY29uID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1zdWl0Y2FzZVwifSlcbiAgICAgIHNpZ25hbE5hbWUgPSBcIkhpcmluZ1wiXG4gICAgICBzaWduYWxWYWx1ZSA9IF8ucmVkdWNlKHRoaXMucHJvcHMucHJvZmlsZS5yb2xlcywgZnVuY3Rpb24ocmVzdWx0LCByb2xlKSB7XG4gICAgICAgIHJldHVybiByb2xlICsgXCIsIFwiKyByZXN1bHRcbiAgICAgIH0sIFwiXCIpO1xuICAgICAgLy9jb25zb2xlLmxvZygnd3RmJylcbiAgICAgIC8vY29uc29sZS5sb2coc2lnbmFsVmFsdWUpXG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnByb2ZpbGUuY2xhc3NOYW1lICA9PSBcIkVtcGxveWVlUHJvZmlsZVwiKSB7XG4gICAgICBzaWduYWxJY29uID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS11c2Vyc1wifSlcbiAgICAgIHNpZ25hbE5hbWUgPSBcIkNvbXBhbnkgU2l6ZVwiXG4gICAgICBzaWduYWxWYWx1ZSA9IF8ucmVkdWNlKHRoaXMucHJvcHMucHJvZmlsZS5lbXBsb3llZXMsIGZ1bmN0aW9uKHJlc3VsdCwgcm9sZSkge1xuICAgICAgICByZXR1cm4gcm9sZSArIFwiLCBcIisgcmVzdWx0XG4gICAgICB9LCBcIlwiKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMucHJvZmlsZS5jbGFzc05hbWUgID09IFwiRnVuZGluZ1Byb2ZpbGVcIikge1xuICAgICAgc2lnbmFsSWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtaW5zdGl0dXRpb25cIn0pXG4gICAgICBzaWduYWxOYW1lID0gXCJGdW5kaW5nXCJcbiAgICAgIHNpZ25hbFZhbHVlID0gXy5yZWR1Y2UodGhpcy5wcm9wcy5wcm9maWxlLnJldmVudWVzLCBmdW5jdGlvbihyZXN1bHQsIHJvbGUpIHtcbiAgICAgICAgcmV0dXJuIHJvbGUgKyBcIiwgXCIrIHJlc3VsdFxuICAgICAgfSwgXCJcIik7XG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnByb2ZpbGUuY2xhc3NOYW1lICA9PSBcIlJldmVudWVQcm9maWxlXCIpIHtcbiAgICAgIHNpZ25hbEljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLW1vbmV5XCJ9KVxuICAgICAgc2lnbmFsTmFtZSA9IFwiUmV2ZW51ZVwiXG4gICAgICBzaWduYWxWYWx1ZSA9IF8ucmVkdWNlKHRoaXMucHJvcHMucHJvZmlsZS5yZXZlbnVlcywgZnVuY3Rpb24ocmVzdWx0LCByb2xlKSB7XG4gICAgICAgIHJldHVybiByb2xlICsgXCIsIFwiKyByZXN1bHRcbiAgICAgIH0sIFwiXCIpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wcm9maWxlLmNsYXNzTmFtZSAgPT0gXCJUZWNobm9sb2d5UHJvZmlsZVwiKSB7XG4gICAgICBzaWduYWxJY29uID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS13cmVuY2hcIn0pXG4gICAgICBzaWduYWxOYW1lID0gXCJUZWNobm9sb2d5XCJcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMucHJvZmlsZS5jbGFzc05hbWUgID09IFwiTG9jYXRpb25Qcm9maWxlXCIpIHtcbiAgICAgIHNpZ25hbEljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLW1hcC1tYXJrZXJcIn0pXG4gICAgICBzaWduYWxOYW1lID0gXCJMb2NhbGVcIlxuICAgICAgc2lnbmFsVmFsdWUgPSBfLnJlZHVjZSh0aGlzLnByb3BzLnByb2ZpbGUubG9jYWxlLCBmdW5jdGlvbihyZXN1bHQsIHJvbGUpIHtcbiAgICAgICAgcmV0dXJuIHJvbGUgKyBcIiwgXCIrIHJlc3VsdFxuICAgICAgfSwgXCJcIik7XG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnByb2ZpbGUuY2xhc3NOYW1lICA9PSBcIkluZHVzdHJ5UHJvZmlsZVwiKSB7XG4gICAgICBzaWduYWxJY29uID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1idWlsZGluZ1wifSlcbiAgICAgIHNpZ25hbE5hbWUgPSBcIkluZHVzdHJpZXNcIlxuICAgICAgc2lnbmFsVmFsdWUgPSBfLnJlZHVjZSh0aGlzLnByb3BzLnByb2ZpbGUuaW5kdXN0cmllcywgZnVuY3Rpb24ocmVzdWx0LCByb2xlKSB7XG4gICAgICAgIHJldHVybiByb2xlICsgXCIsIFwiKyByZXN1bHRcbiAgICAgIH0sIFwiXCIpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wcm9maWxlLmNsYXNzTmFtZSAgPT0gXCJDb21wYW55U2l6ZVByb2ZpbGVcIikge1xuICAgICAgc2lnbmFsSWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtd3JlbmNoXCJ9KVxuICAgICAgc2lnbmFsTmFtZSA9IFwiVGVjaG5vbG9neVwiXG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnByb2ZpbGUuY2xhc3NOYW1lICA9PSBcIkxpc3RQcm9maWxlXCIpIHtcbiAgICAgIHNpZ25hbEljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWxpc3QtYWx0XCJ9KVxuICAgICAgc2lnbmFsTmFtZSA9IFwiQ29tcGFueSBMaXN0XCJcbiAgICAgIHNpZ25hbFZhbHVlID0gdGhpcy5wcm9wcy5wcm9maWxlLmxpc3ROYW1lXG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnByb2ZpbGUuY2xhc3NOYW1lICA9PSBcIlByb3NwZWN0VGl0bGVQcm9maWxlXCIpIHtcbiAgICAgIHNpZ25hbEljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXVzZXJcIn0pXG4gICAgICBzaWduYWxOYW1lID0gXCJUaXRsZXNcIlxuICAgICAgc2lnbmFsVmFsdWUgPSBfLnJlZHVjZSh0aGlzLnByb3BzLnByb2ZpbGUudGl0bGVfa2V5d29yZHMsIFxuICAgICBmdW5jdGlvbihyZXN1bHQsIHJvbGUpIHtcbiAgICAgICAgcmV0dXJuIHJvbGUgKyBcIiwgXCIrIHJlc3VsdFxuICAgICAgfSwgXCJcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNpZ25hbEljb24gPSBcIm5vdCBmb3VuZFwiXG4gICAgICBzaWduYWxOYW1lID0gXCJOb3QgZm91bmRcIlxuICAgICAgc2lnbmFsVmFsdWU9IFwiTm90IGZvdW5kXCJcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgICBzaWduYWxJY29uID0gXCJub3QgZm91bmRcIlxuICAgICAgc2lnbmFsTmFtZSA9IFwiTm90IGZvdW5kXCJcbiAgICAgIHNpZ25hbFZhbHVlPSBcIk5vdCBmb3VuZFwiXG5cbiAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwiaWRlYWwtcHJvZmlsZVwifSwgXCIgXCIsIHNpZ25hbEljb24sIFxuICAgICAgICBSZWFjdC5ET00uaDYoe2NsYXNzTmFtZTogXCJwcm9maWxlLXNpZ25hbC1uYW1lXCJ9LCBzaWduYWxOYW1lLCBcIiAtIFwiKSwgXG4gICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwicHJvZmlsZS1zaWduYWwtdmFsdWVcIn0sIFwiIFwiK3NpZ25hbFZhbHVlKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG4vKlxuICBGdW5kaW5nIFByb2ZpbGVcbiAgLSBBbW91bnQgUmFpc2VkIC0gYnRuIGdyb3VwXG4gIC0gU3RhZ2UgLSBidG4gZ3JvdXBcblxuICBQZW9wbGUgUHJvZmlsZVxuICAtIExvY2FsZSAtIHRhZ3Mgdy8gdHlwYWhlYWRcbiAgLSBUaXRsZSAtIHRhZ3Mgdy8gdHlwYWhlYWRcblxuICBDb21wYW55IFByb2ZpbGVcbiAgLSBJbmR1c3RyaWVzIC0gdGFncyB3aXRoIHR5cGFoZWFkXG4gIC0gUmV2ZW51ZSAtIGJ0biBncm91cFxuICAtICMgb2YgRW1wbG95ZWVzIC0gYnRuIGdyb3VwXG4gIC0gTG9jYWxlIC0gdGFncyB3aXRoIHR5cGFoZWFkXG4qL1xuXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxudmFyIFNpZ25hbFByb2ZpbGUgPSByZXF1aXJlKCcuL3NpZ25hbF9wcm9maWxlLmpzLm1pbi5qcycpXG52YXIgU2lnbmFsTG9hZGluZyA9IHJlcXVpcmUoJy4vc2lnbmFsX2xvYWRpbmcuanMubWluLmpzJylcbnZhciBNaW5pbmdKb2JMb2FkaW5nID0gcmVxdWlyZSgnLi9taW5pbmdfam9iX2xvYWRpbmcuanMubWluLmpzJylcbnZhciBDb21wYW55U2lnbmFsQ2FyZCA9IHJlcXVpcmUoJy4vY29tcGFueV9zaWduYWxfY2FyZC5qcy5taW4uanMnKVxudmFyIFBlb3BsZVNpZ25hbENhcmQgPSByZXF1aXJlKCcuL3Blb3BsZV9zaWduYWxfY2FyZC5qcy5taW4uanMnKVxudmFyIFNpZ25hbENhbGVuZGFyID0gcmVxdWlyZSgnLi9zaWduYWxfY2FsZW5kYXIuanMubWluLmpzJylcbnZhciBNaW5pbmdKb2JDYWxlbmRhciA9IHJlcXVpcmUoJy4vbWluaW5nX2pvYl9jYWxlbmRhci5qcy5taW4uanMnKVxudmFyIFNpZ25hbHNEZXRhaWwgPSByZXF1aXJlKCcuL3NpZ25hbF9kZXRhaWwuanMubWluLmpzJylcblxudmFyIENyZWF0ZUhpcmluZ1NpZ25hbE1vZGFsID0gcmVxdWlyZSgnLi9jcmVhdGVfaGlyaW5nX3NpZ25hbF9tb2RhbC5qcy5taW4uanMnKVxudmFyIENyZWF0ZUZ1bmRpbmdTaWduYWxNb2RhbCA9IHJlcXVpcmUoJy4vY3JlYXRlX2Z1bmRpbmdfc2lnbmFsX21vZGFsLmpzLm1pbi5qcycpXG52YXIgQ3JlYXRlUHJvc3BlY3RQcm9maWxlTW9kYWwgPSByZXF1aXJlKCcuL2NyZWF0ZV9wcm9zcGVjdF9wcm9maWxlX21vZGFsLmpzLm1pbi5qcycpXG52YXIgQ3JlYXRlQ29tcGFueVByb2ZpbGVNb2RhbCA9IHJlcXVpcmUoJy4vY3JlYXRlX2NvbXBhbnlfcHJvZmlsZV9tb2RhbC5qcy5taW4uanMnKVxudmFyIENyZWF0ZU1pbmluZ0pvYk1vZGFsID0gcmVxdWlyZSgnLi9jcmVhdGVfbWluaW5nX2pvYl9tb2RhbC5qcy5taW4uanMnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzaWduYWxUeXBlOiAnQ29tcGFueVNpZ25hbCcsXG4gICAgICBjdXJyZW50UHJvZmlsZToge25hbWU6J0FsbCd9LFxuICAgICAgY3VycmVudFByb2ZpbGVPYmplY3RJZDoge30sXG4gICAgICBjdXJyZW50UHJvZmlsZVJlcG9ydDoge30sXG4gICAgICBzaWduYWxzOiBbXSxcbiAgICAgIGN1cnJlbnRWaWV3OiAnRmVlZCcsXG4gICAgICBwcm9maWxlczogW10sXG4gICAgfVxuICB9LFxuXG4gIHNldEN1cnJlbnRSZXBvcnQ6IGZ1bmN0aW9uKG5ld1Byb2ZpbGVSZXBvcnQpIHtcbiAgICBjb25zb2xlLmxvZygnTkVXIFJFUE9SVCcpXG4gICAgY29uc29sZS5sb2cobmV3UHJvZmlsZVJlcG9ydClcblxuICAgIHRoaXMuc2V0U3RhdGUoeyBcbiAgICAgIGN1cnJlbnRWaWV3OidEZXRhaWwnLFxuICAgICAgY3VycmVudFByb2ZpbGVSZXBvcnQ6IG5ld1Byb2ZpbGVSZXBvcnQgXG4gICAgfSlcbiAgfSxcblxuICBwcm9zcGVjdFNpZ25hbFJlcG9ydDogZnVuY3Rpb24ocHJvZmlsZSwgcmVwb3J0KSB7XG4gICAgcHJvZmlsZXMgPSBfLm1hcCh0aGlzLnN0YXRlLnByb2ZpbGVzLCBmdW5jdGlvbihfcHJvZmlsZSkge1xuICAgICAgICAgICAgICAgICAgaWYoX3Byb2ZpbGUub2JqZWN0SWQgPT0gcHJvZmlsZS5vYmplY3RJZCl7XG4gICAgICAgICAgICAgICAgICAgIHJlcG9ydHMgPSBfLm1hcChfcHJvZmlsZS5yZXBvcnRzLCBmdW5jdGlvbihfcmVwb3J0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKF9yZXBvcnQub2JqZWN0SWQgPT0gcmVwb3J0Lm9iamVjdElkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVwb3J0LnByb3NwZWN0ZWQgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZXBvcnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlcG9ydFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgX3Byb2ZpbGUucmVwb3J0cyA9IHJlcG9ydHNcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9wcm9maWxlXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICByZXR1cm4gX3Byb2ZpbGVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocHJvZmlsZXMpXG4gICAgdGhpcy5zZXRTdGF0ZSh7cHJvZmlsZXM6IHByb2ZpbGVzfSlcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1NpZ25hbFJlcG9ydC8nK3JlcG9ydC5vYmplY3RJZCxcbiAgICAgIHR5cGU6J1BVVCcsXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSh7cHJvc3BlY3RlZDptb21lbnQoKS52YWx1ZU9mKCkvMTAwMH0pLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7fSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHt9XG4gICAgfSlcbiAgfSxcblxuICBzZXRDdXJyZW50VmlldzogZnVuY3Rpb24obmV3U2lnbmFsVmlldykge1xuICAgIHRoaXMuc2V0U3RhdGUoe2N1cnJlbnRWaWV3OiBuZXdTaWduYWxWaWV3fSlcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIGN1cnJlbnRQcm9maWxlID0gdGhpcy5zdGF0ZS5jdXJyZW50UHJvZmlsZVxuICAgIHJlcG9ydHMgPSB0aGlzLnN0YXRlLmN1cnJlbnRQcm9maWxlLnJlcG9ydHNcbiAgICByZXBvcnRzID0gKHJlcG9ydHMpID8gcmVwb3J0cyA6IFtdXG4gICAgcmVwb3J0cyA9IF8uc29ydEJ5KHJlcG9ydHMsIGZ1bmN0aW9uKG8peyByZXR1cm4gby5jcmVhdGVkQXQgfSkucmV2ZXJzZSgpXG4gICAgLy9jb25zb2xlLmxvZyhjdXJyZW50UHJvZmlsZSlcbiAgICBpZihjdXJyZW50UHJvZmlsZS5uYW1lID09IFwiQWxsXCIgfHwgY3VycmVudFByb2ZpbGUuZG9uZSl7XG4gICAgICBpZih0aGlzLnN0YXRlLmN1cnJlbnRWaWV3ID09IFwiRmVlZFwiKSB7XG4gICAgICAgIHNpZ25hbFZpZXcgPSBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICAgICAgU2lnbmFsRGV0YWlsQnV0dG9ucyh7c2lnbmFsVHlwZTogdGhpcy5zdGF0ZS5zaWduYWxUeXBlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9maWxlOiB0aGlzLnN0YXRlLmN1cnJlbnRQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNpZ25hbFR5cGU6IHRoaXMuc2V0U2lnbmFsVHlwZX0pLCBcbiAgICAgICAgICAgIFNpZ25hbHNGZWVkKHtzZXRDdXJyZW50VmlldzogdGhpcy5zZXRDdXJyZW50VmlldywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsVHlwZTogdGhpcy5zdGF0ZS5zaWduYWxUeXBlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlOiB0aGlzLnN0YXRlLmN1cnJlbnRQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYWxzOiB0aGlzLnN0YXRlLnNpZ25hbHN9KVxuICAgICAgICAgICAgKVxuICAgICAgfSBlbHNlIGlmKHRoaXMuc3RhdGUuY3VycmVudFZpZXcgPT0gXCJDYWxlbmRhclwiKXtcbiAgICAgICAgc2lnbmFsVmlldyA9IFNpZ25hbENhbGVuZGFyKHtjdXJyZW50UHJvZmlsZTogdGhpcy5zdGF0ZS5jdXJyZW50UHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9zcGVjdFNpZ25hbFJlcG9ydDogdGhpcy5wcm9zcGVjdFNpZ25hbFJlcG9ydCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwb3J0czogcmVwb3J0cywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFJlcG9ydDogdGhpcy5zZXRDdXJyZW50UmVwb3J0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50VmlldzogdGhpcy5zZXRDdXJyZW50Vmlld30pXG4gICAgICB9IGVsc2UgaWYodGhpcy5zdGF0ZS5jdXJyZW50VmlldyA9PSBcIkRldGFpbFwiKXtcbiAgICAgICAgc2lnbmFsVmlldyA9IFNpZ25hbHNEZXRhaWwoe2N1cnJlbnRQcm9maWxlOiB0aGlzLnN0YXRlLmN1cnJlbnRQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9maWxlUmVwb3J0OiB0aGlzLnN0YXRlLmN1cnJlbnRQcm9maWxlUmVwb3J0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRWaWV3OiB0aGlzLnNldEN1cnJlbnRWaWV3fSlcbiAgICAgIH0gZWxzZSBpZih0aGlzLnN0YXRlLmN1cnJlbnRWaWV3ID09IFwiTWluaW5nSm9iQ2FsZW5kYXJcIil7XG4gICAgICAgIHNpZ25hbFZpZXcgPSBNaW5pbmdKb2JDYWxlbmRhcih7Y3VycmVudFByb2ZpbGU6IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRSZXBvcnQ6IHRoaXMuc2V0Q3VycmVudFJlcG9ydCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFZpZXc6IHRoaXMuc2V0Q3VycmVudFZpZXd9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTaG93IENhbGVuZGFyIEV2ZW4gV2hlbiBTaWduYWwgSXMgTG9hZGluZ1xuICAgICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50VmlldyA9PSBcIkNhbGVuZGFyXCIpe1xuICAgICAgICBzaWduYWxWaWV3ID0gU2lnbmFsQ2FsZW5kYXIoe2N1cnJlbnRQcm9maWxlOiB0aGlzLnN0YXRlLmN1cnJlbnRQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50UmVwb3J0OiB0aGlzLnNldEN1cnJlbnRSZXBvcnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcG9ydHM6IHJlcG9ydHMsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRWaWV3OiB0aGlzLnNldEN1cnJlbnRWaWV3fSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGUpXG4gICAgICAgIGlmKHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGUudHlwZSA9PSBcInByb3NwZWN0X3Byb2ZpbGVcIilcbiAgICAgICAgICBzaWduYWxWaWV3ID1NaW5pbmdKb2JMb2FkaW5nKHtjdXJyZW50UHJvZmlsZTogdGhpcy5zdGF0ZS5jdXJyZW50UHJvZmlsZX0pXG4gICAgICAgIGVsc2VcbiAgICAgICAgICBzaWduYWxWaWV3ID0gU2lnbmFsTG9hZGluZyh7Y3VycmVudFByb2ZpbGU6IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGV9KVxuICAgICAgfVxuICAgIH1cblxuICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7aGVpZ2h0OjQwMH19LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lclwiLCBzdHlsZToge3BhZGRpbmc6MCwgd2lkdGg6JzEwMCUnLCBoZWlnaHQ6JzEwMCUnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtMyBzaWduYWwtbGlzdFwiLCBcbiAgICAgICAgICAgICAgIHN0eWxlOiB7IGhlaWdodDonMTAyLjglJywgcGFkZGluZzowfX0sIFxuICAgICAgICAgICAgICBTaWduYWxzT3B0aW9ucyh7cHJvZmlsZXM6IHRoaXMuc3RhdGUucHJvZmlsZXMsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkUHJvZmlsZTogdGhpcy5hZGRQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZU1pbmluZ0pvYkRvbmU6IHRoaXMudXBkYXRlTWluaW5nSm9iRG9uZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVQcm9maWxlOiB0aGlzLnJlbW92ZVByb2ZpbGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFZpZXc6IHRoaXMuc2V0Q3VycmVudFZpZXcsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFByb2ZpbGU6IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFByb2ZpbGU6IHRoaXMuc2V0Q3VycmVudFByb2ZpbGV9KVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtOVwiLCBzdHlsZToge2hlaWdodDonMTAwJScscGFkZGluZzowfX0sIFxuICAgICAgICAgICAgc2lnbmFsVmlld1xuICAgICAgICAgIClcbiAgICAgICAgKSwgXG5cbiAgICAgICAgQ3JlYXRlTWluaW5nSm9iTW9kYWwoe2NyZWF0ZU1pbmluZ0pvYjogdGhpcy5jcmVhdGVNaW5pbmdKb2IsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFByb2ZpbGU6IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGV9KSwgXG4gICAgICAgIENyZWF0ZUhpcmluZ1NpZ25hbE1vZGFsKHthZGRQcm9maWxlOiB0aGlzLmFkZFByb2ZpbGV9KSwgXG4gICAgICAgIENyZWF0ZUZ1bmRpbmdTaWduYWxNb2RhbCh7YWRkUHJvZmlsZTogdGhpcy5hZGRQcm9maWxlfSksIFxuICAgICAgICBDcmVhdGVDb21wYW55UHJvZmlsZU1vZGFsKHthZGRQcm9maWxlOiB0aGlzLmFkZFByb2ZpbGV9KSwgXG4gICAgICAgIENyZWF0ZVByb3NwZWN0UHJvZmlsZU1vZGFsKHthZGRQcm9maWxlOiB0aGlzLmFkZFByb2ZpbGUsIFxuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVByb2ZpbGVXaXRoT2JqZWN0SWQ6IHRoaXMudXBkYXRlUHJvZmlsZVdpdGhPYmplY3RJZH0pXG4gICAgICApXG4gICAgKVxuICB9LFxuXG4gIGNyZWF0ZU1pbmluZ0pvYjogZnVuY3Rpb24odGhlUHJvZmlsZSwgZGF0ZSkge1xuICAgIGNvbnNvbGUubG9nKCdjcmVhdGUgbWluaW5nIGpvYicpXG4gICAgdmFyIHRoaXNzID0gdGhpcztcbiAgICByZXBvcnQgPSB7XG4gICAgICAvL2NyZWF0ZWRBdDogbW9tZW50KCkudmFsdWVPZigpLFxuICAgICAgY29tcGFueV9jb3VudDogMCxcbiAgICAgIHBlb3BsZV9jb3VudDogMCxcbiAgICAgIGxpc3RfdHlwZTonbWluaW5nX2pvYicsXG4gICAgICBkb25lOiAwLFxuICAgICAgbWluaW5nX2pvYjogdHJ1ZSxcbiAgICB9XG5cbiAgICBwcm9maWxlcz1fLm1hcCh0aGlzLnN0YXRlLnByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICBpZihfLmlzRXF1YWwodGhlUHJvZmlsZSwgcHJvZmlsZSkpe1xuICAgICAgICBpZihwcm9maWxlLm1pbmluZ19kYXlzKXtcbiAgICAgICAgICBwcm9maWxlLm1pbmluZ19kYXlzLnB1c2goZGF0ZSlcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgcHJvZmlsZS5taW5pbmdfZGF5cyA9IFtkYXRlXVxuICAgICAgICB9XG5cbiAgICAgICAgaWYocHJvZmlsZS5yZXBvcnRzKXtcbiAgICAgICAgICBwcm9maWxlLnJlcG9ydHMgPSBbcmVwb3J0XS5jb25jYXQocHJvZmlsZS5yZXBvcnRzKVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICBwcm9maWxlLnJlcG9ydHMgPSBbcmVwb3J0XVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7Y3VycmVudFByb2ZpbGU6IHByb2ZpbGV9KVxuICAgICAgICB0aGlzcy5wZXJzaXN0TWluaW5nSm9iKGRhdGUsIHJlcG9ydClcbiAgICAgICAgcmV0dXJuIHByb2ZpbGVcbiAgICAgIH1cbiAgICAgIHJldHVybiBwcm9maWxlXG4gICAgfSlcbiAgICB0aGlzcy5zZXRTdGF0ZSh7cHJvZmlsZXM6IHByb2ZpbGVzfSlcbiAgfSxcblxuICBwZXJzaXN0TWluaW5nSm9iOiBmdW5jdGlvbihkYXRlLCByZXBvcnQpIHtcbiAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlKVxuICAgIG9iamVjdElkID0gdGhpcy5zdGF0ZS5jdXJyZW50UHJvZmlsZS5vYmplY3RJZFxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvU2lnbmFsUmVwb3J0JyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkocmVwb3J0KSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0UHJvZmlsZS8nK29iamVjdElkLFxuICAgICAgICAgIHR5cGU6J1BVVCcsXG4gICAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIG1pbmluZ19kYXlzOiB7XG4gICAgICAgICAgICAgIF9fb3A6J0FkZFVuaXF1ZScsXG4gICAgICAgICAgICAgIG9iamVjdHM6W2RhdGVdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlcG9ydHM6IHtcbiAgICAgICAgICAgICAgX19vcDonQWRkVW5pcXVlJyxcbiAgICAgICAgICAgICAgb2JqZWN0czpbYXBwQ29uZmlnLnBvaW50ZXIoJ1NpZ25hbFJlcG9ydCcsIHJlcy5vYmplY3RJZCldXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSksXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IGNvbnNvbGUubG9nKHJlcykgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7fSxcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7fSxcbiAgICB9KVxuICB9LFxuXG4gIGFkZFByb2ZpbGU6IGZ1bmN0aW9uKG5ld1Byb2ZpbGUpIHtcbiAgICBwcm9maWxlcyA9IHRoaXMuc3RhdGUucHJvZmlsZXNcbiAgICB0aGlzLnNldFN0YXRlKHtwcm9maWxlczogW25ld1Byb2ZpbGVdLmNvbmNhdChwcm9maWxlcyl9KVxuICAgIHRoaXMuc2V0Q3VycmVudFByb2ZpbGUobmV3UHJvZmlsZSlcbiAgfSxcblxuICByZW1vdmVQcm9maWxlOiBmdW5jdGlvbihvbGRQcm9maWxlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7cHJvZmlsZXM6IF8ucmVqZWN0KHRoaXMuc3RhdGUucHJvZmlsZXMsIGZ1bmN0aW9uKHByb2ZpbGUpIHtcbiAgICAgIHJldHVybiBfLmlzRXF1YWwob2xkUHJvZmlsZSwgcHJvZmlsZSlcbiAgICB9KX0pXG5cbiAgICBpZihvbGRQcm9maWxlLm9iamVjdElkKXtcbiAgICAgICQuYWpheCh7XG4gICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdFByb2ZpbGUvJytvbGRQcm9maWxlLm9iamVjdElkLFxuICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICB0eXBlOidERUxFVEUnLFxuICAgICAgfSlcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlTWluaW5nSm9iRG9uZTogZnVuY3Rpb24ocHJvZmlsZSkge1xuICAgIHByb2ZpbGVzID0gXy5tYXAodGhpcy5zdGF0ZS5wcm9maWxlcywgZnVuY3Rpb24oX3Byb2ZpbGUpIHtcbiAgICAgICAgICAgICAgICAgIGlmKF9wcm9maWxlLm9iamVjdElkID09IHByb2ZpbGUub2JqZWN0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3Byb2ZpbGUuZG9uZSA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9wcm9maWxlXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICByZXR1cm4gX3Byb2ZpbGVcbiAgICAgICAgICAgICAgICB9KVxuICAgIHRoaXMuc2V0U3RhdGUoe3Byb2ZpbGVzOiBwcm9maWxlc30pXG4gIH0sXG5cbiAgdXBkYXRlUHJvZmlsZVdpdGhPYmplY3RJZDogZnVuY3Rpb24odGltZXN0YW1wLCBvYmplY3RJZCkge1xuICAgIGNvbnNvbGUubG9nKCdVUERBVEUgUFJPRklMRVMnKVxuICAgIG5ld1Byb2ZpbGVzID0gXy5tYXAodGhpcy5zdGF0ZS5wcm9maWxlcywgZnVuY3Rpb24ocHJvZmlsZSkge1xuICAgICAgICBpZihwcm9maWxlLnRpbWVzdGFtcCA9PSB0aW1lc3RhbXApIHtcbiAgICAgICAgICBwcm9maWxlLm9iamVjdElkID0gb2JqZWN0SWRcbiAgICAgICAgICByZXR1cm4gcHJvZmlsZVxuICAgICAgICB9XG4gICAgICByZXR1cm4gcHJvZmlsZVxuICAgIH0pXG4gICAgXG4gICAgY29uc29sZS5sb2cobmV3UHJvZmlsZXMpXG4gICAgdGhpcy5zZXRTdGF0ZSh7cHJvZmlsZXM6IG5ld1Byb2ZpbGVzfSlcbiAgICBjb25zb2xlLmxvZyhvYmplY3RJZClcblxuICAgIHZhciBwdXNoZXIgPSBuZXcgUHVzaGVyKCcxYTY4YTk2YzhmZGU5MzhmYTc1YScpO1xuICAgIGNvbnNvbGUubG9nKCduZXcgcHVzaGVyIGNoYW5uZWwgLT4nLCBvYmplY3RJZClcbiAgICB2YXIgY2hhbm5lbCA9IHB1c2hlci5zdWJzY3JpYmUob2JqZWN0SWQpO1xuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgY2hhbm5lbC5iaW5kKFwiZG9uZVwiLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICB0aGlzcy51cGRhdGVNaW5pbmdKb2JEb25lKF8uZmluZFdoZXJlKHRoaXNzLnN0YXRlLnByb2ZpbGVzLCB7dGltZXN0YW1wOiB0aW1lc3RhbXB9KSlcbiAgICAgIGFsZXJ0aWZ5LnN1Y2Nlc3MoXCJOZXcgU3VjY2VzcyBub3RpZmljYXRpb25cIik7XG4gICAgfSk7XG4gIH0sXG5cbiAgc2V0Q3VycmVudFByb2ZpbGU6IGZ1bmN0aW9uKG5ld1Byb2ZpbGUpIHtcbiAgICBpZihuZXdQcm9maWxlLm9ubHlfcGVvcGxlKSB7XG4gICAgICB0aGlzLmdldFNpZ25hbHMoJ1Blb3BsZVNpZ25hbCcsIFxuICAgICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICBfX3R5cGU6ICdQb2ludGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdQcm9zcGVjdFByb2ZpbGUnLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RJZDogbmV3UHJvZmlsZS5vYmplY3RJZH0pKVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHNpZ25hbFR5cGU6ICdQZW9wbGVTaWduYWwnLFxuICAgICAgICBjdXJyZW50UHJvZmlsZTogbmV3UHJvZmlsZSBcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2N1cnJlbnRQcm9maWxlOiBuZXdQcm9maWxlIH0pXG4gICAgfVxuXG4gICAgdGhpcy5nZXRTaWduYWxzKCdQZW9wbGVTaWduYWwnLCBuZXdQcm9maWxlKVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmdldFNpZ25hbHModGhpcy5zdGF0ZS5zaWduYWxUeXBlKVxuICAgIGN1cnJlbnRVc2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpXG4gICAgdXNlciA9IEpTT04uc3RyaW5naWZ5KGFwcENvbmZpZy5wb2ludGVyKCdfVXNlcicsIGN1cnJlbnRVc2VyLm9iamVjdElkKSlcbiAgICBjb21wYW55ID0gSlNPTi5zdHJpbmdpZnkoY3VycmVudFVzZXIuY29tcGFueSlcbiAgICBxcnkgPSAnd2hlcmU9e1wiY29tcGFueVwiOicrY29tcGFueSsnLFwidXNlclwiOicrdXNlcisnfSdcbiAgICBxcnkgPSBxcnkrJyZpbmNsdWRlPXByb2ZpbGVzLHJlcG9ydHMscHJvc3BlY3RfbGlzdCZvcmRlcj0tY3JlYXRlZEF0J1xuICBcbiAgICB0aGlzc3MgPSB0aGlzXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RQcm9maWxlJyxcbiAgICAgIHR5cGU6J0dFVCcsXG4gICAgICBkYXRhOiBxcnksXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5wYXJzZUhlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1Byb3NwZWN0IFByb2ZpbGUnKVxuICAgICAgICBjb25zb2xlLmxvZyhyZXMucmVzdWx0cylcbiAgICAgICAgLy90aGlzc3Muc2V0Q3VycmVudFByb2ZpbGUocmVzLnJlc3VsdHNbMF0pXG4gICAgICAgIHRoaXNzcy5zZXRTdGF0ZSh7cHJvZmlsZXM6IHJlcy5yZXN1bHRzfSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBzZXRTaWduYWxUeXBlOiBmdW5jdGlvbihsYWJlbFRleHQpIHtcbiAgICBpZihsYWJlbFRleHQgPT0gXCJQZW9wbGVcIilcbiAgICAgIGN1cnJlbnRTaWduYWwgPSBcIlBlb3BsZVNpZ25hbFwiXG4gICAgZWxzZSBpZihsYWJlbFRleHQgPT0gXCJDb21wYW5pZXNcIilcbiAgICAgIGN1cnJlbnRTaWduYWwgPSBcIkNvbXBhbnlTaWduYWxcIlxuICAgIHRoaXMuZ2V0U2lnbmFscyhjdXJyZW50U2lnbmFsKVxuICAgIHRoaXMuc2V0U3RhdGUoe3NpZ25hbFR5cGU6IGN1cnJlbnRTaWduYWx9KVxuICB9LFxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24obmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcbiAgfSxcblxuICBnZXRTaWduYWxzOiBmdW5jdGlvbihzaWduYWxUeXBlLCBjdXJyZW50UHJvZmlsZSkge1xuICAgIGN1cnJlbnRVc2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpXG4gICAgdXNlciA9IHtcbiAgICAgICdfX3R5cGUnICAgIDogJ1BvaW50ZXInLFxuICAgICAgJ2NsYXNzTmFtZScgOiAnX1VzZXInLFxuICAgICAgJ29iamVjdElkJyAgOiBjdXJyZW50VXNlci5vYmplY3RJZFxuICAgIH1cblxuICAgIHVzZXIgPSBKU09OLnN0cmluZ2lmeSh1c2VyKVxuICAgIGNvbXBhbnkgPSBKU09OLnN0cmluZ2lmeShjdXJyZW50VXNlci5jb21wYW55KVxuICAgIHByb2ZpbGVzID0gdGhpcy5zdGF0ZS5jdXJyZW50UHJvZmlsZS5wcm9maWxlc1xuXG4gICAgaWYocHJvZmlsZXMpe1xuICAgICAgLy9xcnkgPSAnd2hlcmU9e1wiY29tcGFueVwiOicrY29tcGFueSsnLFwidXNlclwiOicrdXNlcisnLFwicHJvZmlsZVwiOicrY3VycmVudFByb2ZpbGUrJ30nXG4gICAgICBwcm9maWxlID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBfX3R5cGU6J1BvaW50ZXInLFxuICAgICAgICBjbGFzc05hbWU6J1Byb3NwZWN0UHJvZmlsZScsXG4gICAgICAgIG9iamVjdElkOmN1cnJlbnRQcm9maWxlLm9iamVjdElkXG4gICAgICB9KVxuICAgICAgcXJ5ID0gJ3doZXJlPXtcInByb2ZpbGVcIjonK3Byb2ZpbGUrJ30nXG4gICAgICAvL3FyeSA9IHFyeSArICcsXCJwcm9maWxlc1wiOntcIiRhbGxcIjonK0pTT04uc3RyaW5naWZ5KHByb2ZpbGVzKSsnfX0nXG4gICAgICBpZihzaWduYWxUeXBlID09ICdQZW9wbGVTaWduYWwnKVxuICAgICAgICBxcnkgPSBxcnkgKyAnJmluY2x1ZGU9c2lnbmFscydcbiAgICAgIGVsc2VcbiAgICAgICAgcXJ5ID0gcXJ5ICsgJyZpbmNsdWRlPXNpZ25hbHMsY29tcGFueSdcblxuICAgIH0gZWxzZSB7XG4gICAgICBxcnkgPSB7J2luY2x1ZGUnOlsnc2lnbmFscycsJ2NvbXBhbnknXX1cbiAgICB9XG4gIFxuICAgIHRoaXNzID0gdGhpc1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzLycrc2lnbmFsVHlwZSxcbiAgICAgIC8vdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Db21wYW55U2lnbmFsJyxcbiAgICAgIHR5cGU6J0dFVCcsXG4gICAgICBkYXRhOiBxcnksXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5wYXJzZUhlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhyZXMucmVzdWx0cylcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe3NpZ25hbHM6IHJlcy5yZXN1bHRzfSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUubG9nKGVycikgfVxuICAgIH0pO1xuICB9LFxufSk7XG5cbnZhciBTaWduYWxEZXRhaWxCdXR0b25zID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnU2lnbmFsRGV0YWlsQnV0dG9ucycsXG4gIHNldFNpZ25hbFR5cGU6IGZ1bmN0aW9uKGUpIHtcbiAgICB0aGlzLnByb3BzLnNldFNpZ25hbFR5cGUoJChlLnRhcmdldCkudGV4dCgpLnRyaW0oKSlcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHBwbCA9ICh0aGlzLnByb3BzLnNpZ25hbFR5cGUgPT0gXCJQZW9wbGVTaWduYWxcIikgPyBcImNob29zZSBidG4gYnRuLXByaW1hcnkgYXBwLWFjdGl2ZVwiIDogXCJjaG9vc2UgYnRuIGJ0bi1wcmltYXJ5XCJcbiAgICBjbXAgPSAodGhpcy5wcm9wcy5zaWduYWxUeXBlID09IFwiQ29tcGFueVNpZ25hbFwiKSA/IFwiY2hvb3NlIGJ0biBidG4tcHJpbWFyeSBhcHAtYWN0aXZlXCIgOiBcImNob29zZSBidG4gYnRuLXByaW1hcnlcIlxuXG4gICAgY21wID0gKHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGUub25seV9wZW9wbGUpICA/IGNtcCArIFwiIGRpc2FibGVkXCIgOiBjbXBcblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJzaWduYWxEZXRhaWxCdXR0b25zXCIsIHN0eWxlOiB7aGVpZ2h0OjQ0fX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNCh7c3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLGZsb2F0OidsZWZ0Jyx3aWR0aDozMDAsXG4gICAgICAgICAgICAgICAgICAgICAgZm9udFdlaWdodDoyMDAsbWFyZ2luVG9wOjQscGFkZGluZ0xlZnQ6MjB9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLW5ld3NwYXBlci1vXCJ9KSwgXCLCoFwiLCAgXG4gICAgICAgICAgICB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm5hbWVcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwXCIsIHN0eWxlOiB7bWFyZ2luTGVmdDonMCUnfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogcHBsLCBcbiAgICAgICAgICAgICAgIHN0eWxlOiB7cGFkZGluZzoyfSwgXG4gICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnNldFNpZ25hbFR5cGV9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXVzZXJcIn0pLCBcIsKgUGVvcGxlXCJcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogY21wLCBcbiAgICAgICAgICAgICAgIHN0eWxlOiB7cGFkZGluZzoyfSwgXG4gICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnNldFNpZ25hbFR5cGV9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWJ1aWxkaW5nXCJ9KSwgXCLCoENvbXBhbmllc1wiXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbnZhciBTaWduYWxzT3B0aW9ucyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1NpZ25hbHNPcHRpb25zJyxcbiAgYWRkUHJvZmlsZTogZnVuY3Rpb24obmV3UHJvZmlsZSkge1xuICAgIHRoaXMucHJvcHMuYWRkUHJvZmlsZShuZXdQcm9maWxlKVxuICB9LFxuXG4gIHNldEN1cnJlbnRQcm9maWxlOiBmdW5jdGlvbihjdXJyZW50UHJvZmlsZSkge1xuICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFByb2ZpbGUoY3VycmVudFByb2ZpbGUpXG4gIH0sXG5cbiAgcmVtb3ZlUHJvZmlsZTogZnVuY3Rpb24ob2xkUHJvZmlsZSkge1xuICAgIHRoaXMucHJvcHMucmVtb3ZlUHJvZmlsZShvbGRQcm9maWxlKVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgfSxcblxuICBzZXRDdXJyZW50VmlldzogZnVuY3Rpb24obmV3Vmlldykge1xuICAgIGNvbnNvbGUubG9nKG5ld1ZpZXcpXG4gICAgdGhpcy5wcm9wcy5zZXRDdXJyZW50VmlldyhuZXdWaWV3KVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcHJvZnMgPSBbXVxuICAgIC8vY29uc29sZS5sb2coJ3NpZ25hbHMgcmVuZGVyJylcbiAgICBmb3IoaT0wOyBpPCB0aGlzLnByb3BzLnByb2ZpbGVzLmxlbmd0aDtpKyspIHtcbiAgICAgIHNlbGVjdD0gdGhpcy5wcm9wcy5wcm9maWxlc1tpXS5vYmplY3RJZCA9PSB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm9iamVjdElkXG4gICAgICBwcm9mcy5wdXNoKFNpZ25hbFByb2ZpbGUoe3NldEN1cnJlbnRQcm9maWxlOiB0aGlzLnNldEN1cnJlbnRQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlTWluaW5nSm9iRG9uZTogdGhpcy5wcm9wcy51cGRhdGVNaW5pbmdKb2JEb25lLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFZpZXc6IHRoaXMuc2V0Q3VycmVudFZpZXcsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UHJvZmlsZTogdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBzZWxlY3QsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVQcm9maWxlOiB0aGlzLnJlbW92ZVByb2ZpbGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlOiB0aGlzLnByb3BzLnByb2ZpbGVzW2ldfSkpXG4gICAgfVxuXG4gICAgcHJvZmlsZXNfbnVtID0gKHRoaXMucHJvcHMucHJvZmlsZXMubGVuZ3RoKSA/IHRoaXMucHJvcHMucHJvZmlsZXMubGVuZ3RoIDogXCJ+XCJcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJsaXN0LWdyb3VwXCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cC1pdGVtXCIsIFxuICAgICAgICAgICAgc3R5bGU6IHtib3JkZXJUb3A6MCxib3JkZXJMZWZ0OjAsaGVpZ2h0OjQ0LHBhZGRpbmdSaWdodDo1LHBhZGRpbmdMZWZ0OjEwLFxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6JyNlMGU2ZWEnLFxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6J2xpbmVhci1ncmFkaWVudCgjZjVmN2Y4LCNlMGU2ZWEpOyd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDQoe3N0eWxlOiB7bWFyZ2luOjAsdGV4dEFsaWduOidjZW50ZXInLGZvbnRXZWlnaHQ6MjAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQ6J2xlZnQnLG1hcmdpblRvcDoyfX0sIFwiUHJvZmlsZXMgKFwiLCBwcm9maWxlc19udW0sIFwiKVwiKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLXByaW1hcnkgY3JlYXRlLXByb2ZpbGUtZHJvcGRvd25cIiwgXG4gICAgICAgICAgICAgJ2RhdGEtdG9nZ2xlJzogXCJkcm9wZG93blwiLCBcbiAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmxhdW5jaERyb3Bkb3duLCBcbiAgICAgICAgICAgICBzdHlsZToge2Zsb2F0OidyaWdodCcsXG4gICAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZTonbGluZWFyLWdyYWRpZW50KDE4MGRlZywgIzAwOTZmZiAwJSwgIzAwNWRmZiAxMDAlKSd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pLCBcIsKgIENyZWF0ZSBQcm9maWxlXCJcbiAgICAgICAgICApLCBcblxuICAgICAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcImRyb3Bkb3duLW1lbnVcIiwgXG4gICAgICAgICAgICAgIHN0eWxlOiB7bWFyZ2luTGVmdDoxNzUsbWFyZ2luVG9wOi0xMH0sIFxuICAgICAgICAgICAgICByb2xlOiBcIm1lbnVcIiwgJ2FyaWEtbGFiZWxsZWRieSc6IFwiZHJvcGRvd25NZW51MVwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkoe3JvbGU6IFwicHJlc2VudGF0aW9uXCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMubGF1bmNoTW9kYWwsIFxuICAgICAgICAgICAgICAgICBzdHlsZToge3BhZGRpbmdMZWZ0OjV9fSwgXG4gICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW46Mn19LCBcbiAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXN1aXRjYXNlXCIsIHN0eWxlOiB7d2lkdGg6MTB9fSksIFxuICAgICAgICAgICAgICAgICAgXCLCoMKgQ3JlYXRlIEhpcmluZyBTaWduYWxcIlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkoe3JvbGU6IFwicHJlc2VudGF0aW9uXCIsIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmxhdW5jaE1vZGFsLCBcbiAgICAgICAgICAgICAgICAgc3R5bGU6IHtwYWRkaW5nTGVmdDo1fX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW46Mn19LCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWluc3RpdHV0aW9uXCIsIHN0eWxlOiB7d2lkdGg6MTB9fSksIFxuICAgICAgICAgICAgICAgICAgXCLCoMKgQ3JlYXRlIEZ1bmRpbmcgU2lnbmFsXCJcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtyb2xlOiBcInByZXNlbnRhdGlvblwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtvbkNsaWNrOiB0aGlzLmxhdW5jaE1vZGFsLCBcbiAgICAgICAgICAgICAgICAgc3R5bGU6IHtwYWRkaW5nTGVmdDo1LHBhZGRpbmdSaWdodDoyfSwgXG4gICAgICAgICAgICAgICAgIGhyZWY6IFwiamF2YXNjcmlwdFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbjoyfX0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS11c2VyXCIsIHN0eWxlOiB7d2lkdGg6MTB9fSksIFxuICAgICAgICAgICAgICAgICAgXCLCoMKgQ3JlYXRlIFByb3NwZWN0IFByb2ZpbGVcIlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkoe3JvbGU6IFwicHJlc2VudGF0aW9uXCIsIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtyb2xlOiBcIm1lbnVpdGVtXCIsIHRhYmluZGV4OiBcIi0xXCIsIFxuICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmxhdW5jaE1vZGFsLCBcbiAgICAgICAgICAgICAgICAgc3R5bGU6IHtwYWRkaW5nTGVmdDo1LHBhZGRpbmdSaWdodDoyfSwgaHJlZjogXCIjXCJ9LCBcbiAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbjoyfX0sIFxuICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYnVpbGRpbmdcIiwgc3R5bGU6IHt3aWR0aDoxMH19KSwgXG4gICAgICAgICAgICAgICAgICAgXCLCoMKgQ3JlYXRlIENvbXBhbnkgUHJvZmlsZVwiXG4gICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcInByb2ZpbGVzLW1lbnVcIiwgc3R5bGU6IHtoZWlnaHQ6MzU2LCBvdmVyZmxvdzonYXV0bycsbWFyZ2luVG9wOjF9fSwgXG4gICAgICAgICAgcHJvZnNcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgICApO1xuICB9LFxuXG4gIGxhdW5jaE1vZGFsOiBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc29sZS5sb2coJChlLnRhcmdldCkudGV4dCgpLnRyaW0oKSlcbiAgICBpZigkKGUudGFyZ2V0KS50ZXh0KCkudHJpbSgpID09ICdDcmVhdGUgSGlyaW5nIFNpZ25hbCcpXG4gICAgICAkKCcjY3JlYXRlSGlyaW5nU2lnbmFsTW9kYWwnKS5tb2RhbCgpXG4gICAgZWxzZSBpZigkKGUudGFyZ2V0KS50ZXh0KCkudHJpbSgpID09ICdDcmVhdGUgRnVuZGluZyBTaWduYWwnKVxuICAgICAgJCgnI2NyZWF0ZUZ1bmRpbmdTaWduYWxNb2RhbCcpLm1vZGFsKClcbiAgICBlbHNlIGlmKCQoZS50YXJnZXQpLnRleHQoKS50cmltKCkgPT0gJ0NyZWF0ZSBQcm9zcGVjdCBQcm9maWxlJylcbiAgICAgICQoJyNjcmVhdGVQcm9zcGVjdFByb2ZpbGVNb2RhbCcpLm1vZGFsKClcbiAgICBlbHNlIGlmKCQoZS50YXJnZXQpLnRleHQoKS50cmltKCkgPT0gJ0NyZWF0ZSBDb21wYW55IFByb2ZpbGUnKVxuICAgICAgJCgnI2NyZWF0ZUNvbXBhbnlQcm9maWxlTW9kYWwnKS5tb2RhbCgpXG4gIH0sXG5cbiAgbGF1bmNoRHJvcGRvd246IGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAkKCcuY3JlYXRlLXByb2ZpbGUtZHJvcGRvd24nKS5kcm9wZG93bigpXG4gIH1cbn0pO1xuXG52YXIgU2lnbmFsc0ZlZWQgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdTaWduYWxzRmVlZCcsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgLy90aGlzLmdldFNpZ25hbHMoKVxuXG4gICAgc2lnbmFsQ2FyZHMgPSBbXVxuICAgIGZvcihpPTA7aTwgdGhpcy5wcm9wcy5zaWduYWxzLmxlbmd0aDtpKyspIHtcbiAgICAgIGlmKHRoaXMucHJvcHMuc2lnbmFsVHlwZSA9PSBcIkNvbXBhbnlTaWduYWxcIilcbiAgICAgICAgc2lnbmFsQ2FyZHMucHVzaChDb21wYW55U2lnbmFsQ2FyZCh7Y29tcGFueTogdGhpcy5wcm9wcy5zaWduYWxzW2ldfSkpXG4gICAgICBlbHNlIGlmKHRoaXMucHJvcHMuc2lnbmFsVHlwZSA9PSBcIlBlb3BsZVNpZ25hbFwiKVxuICAgICAgICBzaWduYWxDYXJkcy5wdXNoKFBlb3BsZVNpZ25hbENhcmQoe3Byb2ZpbGU6IHRoaXMucHJvcHMucHJvZmlsZSwgcGVyc29uOiB0aGlzLnByb3BzLnNpZ25hbHNbaV19KSlcbiAgICB9XG4gICAgXG4gICAgY29udGVudCA9ICh0aGlzLnByb3BzLnNpZ25hbHMubGVuZ3RoKSA/IHNpZ25hbENhcmRzIDogUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInNpZ25hbC1jYXJkXCJ9LCBcIkxPTFwiKVxuICAgIGNvbnRlbnQgPSBzaWduYWxDYXJkc1xuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb250YWluZXIgc2lnbmFsLWNhcmQtYmFja2dyb3VuZFwiLCBzdHlsZToge2hlaWdodDozNTYsIG92ZXJmbG93OidhdXRvJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC04IGNvbC1tZC1vZmZzZXQtMlwifSwgXG4gICAgICAgICAgY29udGVudFxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxudGhlRGF0YSA9IHJlcXVpcmUoJy4uL2xpYi9kYXRhLm1pbi5qcycpIFxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBTaWduVXBcbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICQoJ2JvZHknKS5jc3Moe292ZXJmbG93OidoaWRkZW4nfSlcbiAgfSxcblxuICByZXRyaWV2ZVVzZXI6IGZ1bmN0aW9uKG9iamVjdElkKSB7XG4gICAgaGVhZGVycyA9IHtcbiAgICAgIFwiWC1QYXJzZS1BcHBsaWNhdGlvbi1JZFwiOiBcIk44NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkpcIixcbiAgICAgIFwiWC1QYXJzZS1SRVNULUFQSS1LZXlcIjogXCJWTjZFd1Z5Qlp3TzF1cGhzQlBzYXU4dDdKUVJwMDBVTTNLWXNpaVFiXCJcbiAgICB9XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvdXNlcnMvJytvYmplY3RJZCxcbiAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1cnJlbnRVc2VyJywgSlNPTi5zdHJpbmdpZnkocmVzKSlcbiAgICAgICAgbG9jYXRpb24uaHJlZiA9IFwiI1wiXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgc2lnbnVwOiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnc2lnbnVwJylcbiAgICBlbWFpbCA9ICQoJyNlbWFpbCcpLnZhbCgpXG4gICAgcGFzc3dvcmQgPSAkKCcjcGFzc3dvcmQnKS52YWwoKVxuICAgIHAgPSB7XG4gICAgICBcIlgtUGFyc2UtQXBwbGljYXRpb24tSWRcIiAgOiBcIk44NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkpcIixcbiAgICAgIFwiWC1QYXJzZS1SRVNULUFQSS1LZXlcIiAgICA6IFwiVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYlwiLFxuICAgICAgXCJDb250ZW50LVR5cGVcIiAgICAgICAgICAgIDogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9XG4gICAgdGhpc3MgPSB0aGlzO1xuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Db21wYW55JyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczogcCxcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgJ25hbWUnOiAkKCcjY29tcGFueScpLnZhbCgpLFxuICAgICAgfSksXG4gICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlcykge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvdXNlcnMnLFxuICAgICAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IHAsXG4gICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgJ3VzZXJuYW1lJzplbWFpbCxcbiAgICAgICAgICAgICdwYXNzd29yZCc6cGFzc3dvcmQsXG4gICAgICAgICAgICAnY29tcGFueSc6e1xuICAgICAgICAgICAgICAnX190eXBlJyAgICA6ICdQb2ludGVyJyxcbiAgICAgICAgICAgICAgJ2NsYXNzTmFtZScgOiAnQ29tcGFueScsXG4gICAgICAgICAgICAgICdvYmplY3RJZCcgIDogcmVzLm9iamVjdElkLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAvLyBEbyBhbm90aGVyIHJlcXVlc3QgdG8gZ2V0IGN1cnJlbnQgdXNlclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1cnJlbnRVc2VyJywgSlNPTi5zdHJpbmdpZnkocmVzKSlcbiAgICAgICAgICAgIHRoaXNzLnJldHJpZXZlVXNlcihyZXMub2JqZWN0SWQpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkgeyBcbiAgICBkYXRhID0gdGhlRGF0YSgpXG4gICAgaW1nc18xID0gW11cbiAgICBpbWdzXzIgPSBbXVxuICAgIGZvcihpPTA7aSA8IDEyMDsgaSsrKSB7XG4gICAgICBpbWdzXzEucHVzaChSZWFjdC5ET00uaW1nKHtzcmM6IGRhdGFbaV0sIGNsYXNzTmFtZTogXCJwcm9zcGVjdC1pbWdcIn0pKVxuICAgIH1cbiAgICBmb3IoaT0xNTtpIDwgMzA7IGkrKykge1xuICAgICAgaW1nc18yLnB1c2goUmVhY3QuRE9NLmltZyh7c3JjOiBkYXRhW2ldLCBjbGFzc05hbWU6IFwicHJvc3BlY3QtaW1nXCJ9KSlcbiAgICB9XG5cbiAgY29uc29sZS5sb2coZGF0YSlcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcInNpZ251cFwifSwgXCIgXCIpLCBcblxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgUmVhY3QuRE9NLmgxKHtjbGFzc05hbWU6IFwidGl0bGVcIn0sIFwiQ3VzdG9tZXJvLlwiKSwgXG4gICAgICAgIFJlYWN0LkRPTS5oNSh7Y2xhc3NOYW1lOiBcInRhZ2xpbmVcIn0sIFwiR2VuZXJhdGUgaGlnaCBxdWFsaXR5IHByb3NwZWN0IGxpc3RzLiBBY2NlbGVyYXRlIFNhbGVzLlwiKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsIHBhbmVsLWRlZmF1bHQgbG9naW4taW5mb1wiLCBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJyxtYXJnaW5Ub3A6NTB9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtYm9keVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5mb3JtKHtvblN1Ym1pdDogdGhpcy5sb2dpbn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3BsYWNlaG9sZGVyOiBcIkVtYWlsXCIsIGlkOiBcImVtYWlsXCIsIHR5cGU6IFwidGV4dFwiLCBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGlucHV0LWxnXCIsIHN0eWxlOiB7Zm9udFdlaWdodDonMTAwJyxmb250U2l6ZTonMjJweCd9fSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3BsYWNlaG9sZGVyOiBcIkNvbXBhbnlcIiwgdHlwZTogXCJ0ZXh0XCIsIGlkOiBcImNvbXBhbnlcIiwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBpbnB1dC1sZ1wiLCBzdHlsZToge2ZvbnRXZWlnaHQ6JzEwMCcsZm9udFNpemU6JzIycHgnfX0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHtwbGFjZWhvbGRlcjogXCJQYXNzd29yZFwiLCB0eXBlOiBcInBhc3N3b3JkXCIsIGlkOiBcInBhc3N3b3JkXCIsIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgaW5wdXQtbGdcIiwgc3R5bGU6IHtmb250V2VpZ2h0OicxMDAnLGZvbnRTaXplOicyMnB4J319KSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7cGxhY2Vob2xkZXI6IFwiUmVwZWF0IFBhc3N3b3JkXCIsIHR5cGU6IFwicGFzc3dvcmRcIiwgaWQ6IFwicmVwZWF0X3Bhc3N3b3JkXCIsIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgaW5wdXQtbGdcIiwgc3R5bGU6IHtmb250V2VpZ2h0OicxMDAnLGZvbnRTaXplOicyMnB4J319KSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIG9uQ2xpY2s6IHRoaXMuc2lnbnVwLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1sZ1wiLCBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJyxiYWNrZ3JvdW5kQ29sb3I6JyMxY2EzZmQnfX0sIFwiU2lnbiBVcFwiKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgKSwgXG5cbiAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcIlwiLCBzdHlsZToge3Bvc2l0aW9uOidhYnNvbHV0ZScsekluZGV4OictMicsdG9wOjAsbGVmdDowfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiXCIsIHN0eWxlOiB7bWFyZ2luTGVmdDozNH19LCBcbiAgICAgICAgaW1nc18xLCBcbiAgICAgICAgaW1nc18yXG4gICAgICAgIClcbiAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIFNwaW5uZXJcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBjaXJjbGVTdHlsZT0odGhpcy5wcm9wcy5jaXJjbGVTdHlsZSkgPyB0aGlzLnByb3BzLmNpcmNsZVN0eWxlIDoge31cbiAgICBzcGlubmVyU3R5bGU9dGhpcy5wcm9wcy5zcGlubmVyU3R5bGUgPyB0aGlzLnByb3BzLnNwaW5uZXJTdHlsZSA6IHt9XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJzcGlubmVyXCIsIHN0eWxlOiBzcGlubmVyU3R5bGV9LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInNwaW5uZXItY29udGFpbmVyIGNvbnRhaW5lcjFcIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUxXCIsIHN0eWxlOiBjaXJjbGVTdHlsZX0pLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlMlwiLCBzdHlsZTogY2lyY2xlU3R5bGV9KSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZTNcIiwgc3R5bGU6IGNpcmNsZVN0eWxlfSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGU0XCIsIHN0eWxlOiBjaXJjbGVTdHlsZX0pXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwic3Bpbm5lci1jb250YWluZXIgY29udGFpbmVyMlwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZTFcIiwgc3R5bGU6IGNpcmNsZVN0eWxlfSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUyXCIsIHN0eWxlOiBjaXJjbGVTdHlsZX0pLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlM1wiLCBzdHlsZTogY2lyY2xlU3R5bGV9KSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZTRcIiwgc3R5bGU6IGNpcmNsZVN0eWxlfSlcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJzcGlubmVyLWNvbnRhaW5lciBjb250YWluZXIzXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlMVwiLCBzdHlsZTogY2lyY2xlU3R5bGV9KSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZTJcIiwgc3R5bGU6IGNpcmNsZVN0eWxlfSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUzXCIsIHN0eWxlOiBjaXJjbGVTdHlsZX0pLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlNFwiLCBzdHlsZTogY2lyY2xlU3R5bGV9KVxuICAgICAgICApXG4gICAgICApXG5cbiAgICApXG4gIH0sXG59KVxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbnZhciBFZGl0VGVtcGxhdGVWaWV3ID0gcmVxdWlyZSgnLi9lZGl0X3RlbXBsYXRlLmpzLm1pbi5qcycpXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vVGVtcGxhdGVzXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNlbGVjdGVkVGVtcGxhdGU6IDAsXG4gICAgICBlZGl0TW9kZTogZmFsc2VcbiAgICB9XG4gIH0sXG5cbiAgY2hhbmdlTW9kZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7ZWRpdE1vZGU6ICF0aGlzLnN0YXRlLmVkaXRlTW9kZX0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICB0ZW1wbGF0ZVZpZXcgPSAoIXRoaXMuc3RhdGUuZWRpdE1vZGUpID8gVGVtcGxhdGVWaWV3KHtjaGFuZ2VNb2RlOiB0aGlzLmNoYW5nZU1vZGV9KSA6IEVkaXRUZW1wbGF0ZVZpZXcobnVsbClcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtoZWlnaHQ6JzEwMCUnfX0sIFxuICAgICAgICAgIFRlbXBsYXRlU2lkZU1lbnUobnVsbCksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtOVwiLCBzdHlsZToge3BhZGRpbmc6MCxoZWlnaHQ6JzEwMCUnfX0sIFxuICAgICAgICAgICAgICB0ZW1wbGF0ZVZpZXdcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxuXG52YXIgVGVtcGxhdGVWaWV3ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnVGVtcGxhdGVWaWV3JyxcbiAgY2hhbmdlTW9kZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcm9wcy5jaGFuZ2VNb2RlKClcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsIHBhbmVsLWluZm9cIiwgc3R5bGU6IHt3aWR0aDonMTAwJScsaGVpZ2h0OicxMDAlJyxib3JkZXI6MH19LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWhlYWRpbmdcIn0sIFxuICAgICAgICAgIFwiVGVtcGxhdGUgTmFtZVwiLCAgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgb25DbGljazogdGhpcy5jaGFuZ2VNb2RlLCBcbiAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi14c1wiLCBcbiAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJyxmbG9hdDoncmlnaHQnLG1hcmdpblRvcDonMHB4J319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGVuY2lsLXNxdWFyZVwifSksIFwiIMKgIEVkaXQgVGVtcGxhdGVcIilcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1ib2R5XCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmg0KG51bGwsIFwiRm9sbG93dXAgLSBQcm9zcGVjdGluZyBTQUFTIE91dHJlYWNoXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbkJvdHRvbTonMCd9LCBjbGFzc05hbWU6IFwidGV4dC1tdXRlZFwifSwgXCJDcmVhdGVkIGJ5IE1hcmsgb24gSnVsLiAyMSwgMjAxNFwiKSwgXG4gICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5Ub3A6JzAnfSwgY2xhc3NOYW1lOiBcInRleHQtbXV0ZWRcIn0sIFwibGFzdCB1cGRhdGVkIDcgZGF5cyBhZ29cIiksIFxuICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0XCJ9LCBcblxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1ib2R5XCJ9LCBcbiAgICAgICAgICBcIjE1IG1pbnV0ZXMgdG8gZ2V0IGNvbXBhbnlfbmFtZSBtb3JlIGN1c3RvbWVyc1wiICsgJyAnICtcbiAgICAgICAgICBcIkhleSBmaXJzdF9uYW1lLFwiICsgJyAnICtcblxuICAgICAgICAgIFwiV291bGQgeW91IGxpa2UgdG8gaGVhciBhbiBpZGVhIGZvciBhIDE1IG1pbnV0ZSBoYWNrIHRoYXQgY291bGQgc2lnbmlmaWNhbnRseSBpbmNyZWFzZSB0aGUgbnVtYmVyIG9mIHByb3NwZWN0cyB5b3VyIHNhbGVzIHBlb3BsZSBoYXZlIGFjY2VzcyB0byA/XCIgKyAnICcgK1xuICAgICAgICAgICBcbiAgICAgICAgICBcIlJlY2VudGx5IG9uZSBvZiBvdXIgQjJCIGNsaWVudHMgc2F3IGEgaHVnZSBpbmNyZWFzZSBpbiB0cmlhbCBzaWduIHVwcyBhZnRlciB3b3JraW5nIHdpdGggdXMuIGZpcnN0X25hbWUsIGxldHMgc2NoZWR1bGUgYSAxNSBtaW51dGUgY2FsbCB0aGlzIHdlZWsgdG8gc2VlIGlmIHRoaXMgd291bGQgYmUgYSBnb29kIGZpdCBmb3IgYm90aCBvZiB1cy5cIiArICcgJyArXG4gICAgICAgICAgIFxuICAgICAgICAgIFwiV2hhdCB0aGUgYmVzdCB0aW1lIGZvciB5b3UgdGhpcyB3ZWVrID9cIiArICcgJyArXG4gICAgICAgICAgIFxuICAgICAgICAgIFwiLS1cIiArICcgJyArXG4gICAgICAgICAgXCJNYXJrXCIgKyAnICcgKyBcbiAgICAgICAgICBcIkN1c3RvbWVyb1wiICsgJyAnICtcbiAgICAgICAgICBcIm1hcmtAY3VzdG9tZXJvaHEuY29tXCJcbiAgICAgICAgICBcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gICAgKTtcbiAgfSxcbn0pO1xuXG52YXIgVGVtcGxhdGVTaWRlTWVudSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1RlbXBsYXRlU2lkZU1lbnUnLFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0ZW1wbGF0ZXM6IFtdLFxuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgLy9BamF4IFJlcXVlc3QgRm9yIFRlbXBsYXRlc1xuICAgIC8qXG4gICAgICQuYWpheCh7XG4gICAgICB1cmw6JycsXG4gICAgICBoZWFkZXJzOiBcIlwiLFxuICAgICAgZGF0YTogXCJcIixcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKCkge1xuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbigpIHtcbiAgICAgIH1cbiAgICAgfSk7XG4gICAgKi9cbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHRlbXBsYXRlcyA9IFtdXG4gICAgZm9yKGk9MDtpPCB0aGlzLnN0YXRlLnRlbXBsYXRlcy5sZW5ndGg7IGkrKylcbiAgICAgIHRlbXBsYXRlcy5wdXNoKFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJsaXN0LWdyb3VwLWl0ZW1cIn0sIFwidGVtcGxhdGVzW2ldLm5hbWVcIikpXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtM1wiLCBzdHlsZToge3BhZGRpbmc6JzAnLCBib3JkZXJSaWdodDonMXB4IHNvbGlkICNkZGQnLGhlaWdodDonMTAwJScsdGV4dEFsaWduOidjZW50ZXInfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwgcGFuZWwtZGVmYXVsdFwiLCBzdHlsZToge2JvcmRlcjowfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1oZWFkaW5nXCIsIHN0eWxlOiB7aGVpZ2h0OjYwfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7ZmxvYXQ6J2xlZnQnLGZvbnRTaXplOjIwLGZvbnRXZWlnaHQ6J2JvbGQnfX0sIFxuICAgICAgICAgICAgICBcIlRlbXBsYXRlc1wiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgXCIsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0J319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wbHVzXCJ9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcImxpc3QtZ3JvdXBcIiwgc3R5bGU6IHt0ZXh0QWxpZ246J2xlZnQnfX0sIFxuICAgICAgICAgICAgdGVtcGxhdGVzXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvL1RlbXBsYXRlc01lbnVcbiAgdG9nZ2xlVGVtcGxhdGVFZGl0TWVudTogZnVuY3Rpb24oY3VycmVudFRlbXBsYXRlKSB7XG4gICAgdGhpcy5wcm9wcy50b2dnbGVUZW1wbGF0ZUVkaXRNZW51KGN1cnJlbnRUZW1wbGF0ZSlcbiAgfSxcblxuICBjcmVhdGVUZW1wbGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcm9wcy50b2dnbGVUZW1wbGF0ZUVkaXRNZW51KHtcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgYm9keTonJyxcbiAgICAgIHN1YmplY3Q6JycsXG4gICAgICBlZGl0TW9kZTp0cnVlLFxuICAgICAgbmV3VGVtcGxhdGU6IHRydWVcbiAgICB9LCB0cnVlKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLnByb3BzLnRlbXBsYXRlcylcbiAgICB0ZW1wbGF0ZXMgPSBbXVxuICAgIGZvcihpPTA7aTwgdGhpcy5wcm9wcy50ZW1wbGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRlbXBsYXRlcy5wdXNoKFxuICAgICAgICBUZW1wbGF0ZUxpc3RJdGVtKHtcbiAgICAgICAgICB0b2dnbGVUZW1wbGF0ZUVkaXRNZW51OiB0aGlzLnRvZ2dsZVRlbXBsYXRlRWRpdE1lbnUsIFxuICAgICAgICAgIHRlbXBsYXRlOiB0aGlzLnByb3BzLnRlbXBsYXRlc1tpXX0pXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJcIiwgc3R5bGU6IHtwYWRkaW5nOicwJywgaGVpZ2h0OicxMDAlJyx0ZXh0QWxpZ246J2NlbnRlcid9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0XCIsIFxuICAgICAgICAgICAgIHN0eWxlOiB7Ym9yZGVyUmlnaHQ6MCxib3JkZXJSYWRpdXM6MCxoZWlnaHQ6JzEwMCUnLCBvdmVyZmxvdzonYXV0byd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWhlYWRpbmdcIiwgc3R5bGU6IHtoZWlnaHQ6NDB9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtmbG9hdDonbGVmdCcsZm9udFNpemU6MTQsZm9udFdlaWdodDonYm9sZCd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZmlsZS10ZXh0LW9cIn0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7bWFyZ2luTGVmdDo1fX0sIFwiVGVtcGxhdGVzXCIpXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14c1wiLCBcbiAgICAgICAgICAgICAgb25DbGljazogdGhpcy5jcmVhdGVUZW1wbGF0ZSwgXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7bWFyZ2luTGVmdDo1fX0sIFwiQ3JlYXRlIFRlbXBsYXRlXCIpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cFwiLCBcbiAgICAgICAgICAgICAgc3R5bGU6IHt0ZXh0QWxpZ246J2xlZnQnfX0sIFxuICAgICAgICAgICAgdGVtcGxhdGVzXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KTtcblxudmFyIFRlbXBsYXRlTGlzdEl0ZW0gPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdUZW1wbGF0ZUxpc3RJdGVtJyxcbiAgdG9nZ2xlVGVtcGxhdGVFZGl0TWVudTogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2codGhpcy5wcm9wcy50ZW1wbGF0ZSlcbiAgICB0ZW1wbGF0ZSA9IHRoaXMucHJvcHMudGVtcGxhdGVcbiAgICB0ZW1wbGF0ZS5lZGl0TW9kZSA9IGZhbHNlXG4gICAgdGhpcy5wcm9wcy50b2dnbGVUZW1wbGF0ZUVkaXRNZW51KHRlbXBsYXRlKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgIHN0eWxlOiB7Ym9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHJnYigyMjEsIDIyMSwgMjIxKScscGFkZGluZ1RvcDo1LHBhZGRpbmdCb3R0b206MH0sIFxuICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZVRlbXBsYXRlRWRpdE1lbnUsIFxuICAgICAgICAgICBjbGFzc05hbWU6IFwibGlzdC1ncm91cC1pdGVtXCJ9LCBcbiAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICB0aGlzLnByb3BzLnRlbXBsYXRlLm5hbWVcbiAgICAgICAgICAgKSwgXG4gICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBcIlN1YmplY3Q6XCIsIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwidGV4dCB0ZXh0LW11dGVkXCJ9LCBcbiAgICAgICAgICAgICBcIiBcIiArIHRoaXMucHJvcHMudGVtcGxhdGUuc3ViamVjdFxuICAgICAgICAgICApKVxuICAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIFRpbWVsaW5lRGF5RWxlbWVudFxuICAvLyBUT0RPXG4gIC8vIC0gYWRkIHByb3NwZWN0IGxpc3QgcHJvZ3Jlc3Npb25cbiAgLy8gLSBhZGQgc2NoZWR1bGVkIGZvbGxvd3VwXG4gIC8vXG5cbiAgYWRkRm9sbG93dXA6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucHJvcHMuYWRkRm9sbG93dXAodGhpcy5wcm9wcy5kYXlDb3VudClcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIGJhdGNoQ291bnQgPSB0aGlzLnByb3BzLmJhdGNoQ291bnRcbiAgICBiYXRjaFN0YWdlID0gKGJhdGNoQ291bnQpID8gQmF0Y2hTdGFnZSh7YmF0Y2hDb3VudDogdGhpcy5wcm9wcy5iYXRjaENvdW50fSkgOiBcIlwiXG5cbiAgICBpZih0aGlzLnByb3BzLmFkZFRlbXBsYXRlTW9kZSkge1xuICAgICAgbW9kZSA9IEVkaXRUZW1wbGF0ZSh7YWRkRm9sbG93dXA6IHRoaXMucHJvcHMuYWRkRm9sbG93dXAsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUZvbGxvd3VwOiB0aGlzLnByb3BzLnNhdmVGb2xsb3d1cCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVGb2xsb3d1cDogdGhpcy5wcm9wcy5yZW1vdmVGb2xsb3d1cCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlDb3VudDogdGhpcy5wcm9wcy5kYXlDb3VudCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZXM6IHRoaXMucHJvcHMudGVtcGxhdGVzfSlcbiAgICB9IGVsc2Uge1xuICAgICAgbW9kZSA9IFRlbXBsYXRlRm9sbG93dXAoe2N1cnJlbnRUZW1wbGF0ZTogdGhpcy5wcm9wcy5jdXJyZW50VGVtcGxhdGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRGb2xsb3d1cDogdGhpcy5wcm9wcy5lZGl0Rm9sbG93dXAsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheUNvdW50OiB0aGlzLnByb3BzLmRheUNvdW50LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVGb2xsb3d1cDogdGhpcy5wcm9wcy5yZW1vdmVGb2xsb3d1cCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFRlbXBsYXRlOiB0aGlzLnByb3BzLnNldEN1cnJlbnRUZW1wbGF0ZX0pXG4gICAgfVxuICAgIG1vZGUgPSAodGhpcy5wcm9wcy5lbGVtZW50VHlwZSkgPyBcIlwiIDogbW9kZVxuICAgIGFkZEZvbGxvd3VwID0gKHRoaXMucHJvcHMuZWxlbWVudFR5cGUpID8gdGhpcy5hZGRGb2xsb3d1cCA6IFwiXCJcblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtvbkNsaWNrOiBhZGRGb2xsb3d1cCwgY2xhc3NOYW1lOiBcImRheVwiLCAnZGF0YS10cmlnZ2VyJzogXCJtYW51YWxcIn0sIFxuICAgICAgICAgIFwiRFwiK3RoaXMucHJvcHMuZGF5Q291bnRcbiAgICAgICAgKSwgXG4gICAgICAgIGJhdGNoU3RhZ2UsIG1vZGVcbiAgICAgIClcbiAgICApXG4gIH0sXG5cbiAgc2V0Q3VycmVudFRlbXBsYXRlOiBmdW5jdGlvbih0ZW1wbGF0ZSkge1xuICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFRlbXBsYXRlKHRlbXBsYXRlKVxuICB9XG59KTtcblxudmFyIFRlbXBsYXRlRm9sbG93dXAgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdUZW1wbGF0ZUZvbGxvd3VwJyxcbiAgLy8gRWRpdE1vZGUgRmFsc2VcblxuICBzZXRDdXJyZW50VGVtcGxhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFRlbXBsYXRlKHRoaXMucHJvcHMuY3VycmVudFRlbXBsYXRlKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJmb2xsb3d1cC1wbGFjZW1lbnQgYXJyb3dfYm94XzEgdG1wXzJcIn0sIFxuICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7d2lkdGg6MTMwLGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1maWxlLXRleHQtb1wifSksIFwiwqDCoFwiLCBcbiAgICAgICAgICAodGhpcy5wcm9wcy5jdXJyZW50VGVtcGxhdGUpID8gdGhpcy5wcm9wcy5jdXJyZW50VGVtcGxhdGUubmFtZSA6IFwiXCJcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5idXR0b24oe2NsYXNzTmFtZTogXCJ3aW4tYnRuIGJ0biBidG4tc3VjY2VzcyBidG4teHNcIiwgXG4gICAgICAgICAgICAgICAgJ2RhdGEtdGFyZ2V0JzogXCIuYnMtc2VuZEVtYWlsLW1vZGFsLWxnXCIsIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuc2V0Q3VycmVudFRlbXBsYXRlLCBcbiAgICAgICAgICAgICAgICAnZGF0YS10b2dnbGUnOiBcIm1vZGFsXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBhcGVyLXBsYW5lXCJ9KSwgXCLCoFNlbmRcIiksIFwiwqBcIiwgXG4gICAgICAgIFJlYWN0LkRPTS5idXR0b24oe29uQ2xpY2s6IHRoaXMuZWRpdEZvbGxvd3VwLCBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwid2luLWJ0biBidG4gYnRuLWRlZmF1bHQgYnRuLXhzXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBlbmNpbFwifSkpLCBcIsKgXCIsIFxuICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHtvbkNsaWNrOiB0aGlzLnJlbW92ZUZvbGxvd3VwLCBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwid2luLWJ0biBidG4gYnRuLWRlZmF1bHQgYnRuLXhzXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXRyYXNoLW9cIn0pKVxuICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgZWRpdEZvbGxvd3VwOiBmdW5jdGlvbihlKSB7IFxuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnNvbGUubG9nKHRoaXMucHJvcHMuZGF5Q291bnQpXG4gICAgdGhpcy5wcm9wcy5lZGl0Rm9sbG93dXAodGhpcy5wcm9wcy5kYXlDb3VudClcbiAgfSxcblxuICByZW1vdmVGb2xsb3d1cDogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ3JlbW92ZScpXG4gICAgdGhpcy5wcm9wcy5yZW1vdmVGb2xsb3d1cCh0aGlzLnByb3BzLmRheUNvdW50KVxuICB9XG59KTtcblxudmFyIEJhdGNoU3RhZ2UgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdCYXRjaFN0YWdlJyxcbiAgLy8gRGlmZmVyZW50IFN0YWdlcyBvZiBQZW9wbGUgQWRkZWQgdG8gUHJvc3BlY3QgTGlzdFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZm9sbG93dXAtcGxhY2VtZW50IGFycm93X2JveCB0bXBcIn0sIFxuICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImJhZGdlXCJ9LCBcbiAgICAgICAgICB0aGlzLnByb3BzLmJhdGNoQ291bnRcbiAgICAgICAgKSwgXCLCoFwiLCBcbiAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgXCJwcm9zcGVjdHMgaW4gdGhlIHNhbGVzIGN5Y2xlLlwiKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgRWRpdFRlbXBsYXRlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnRWRpdFRlbXBsYXRlJyxcbiAgLy8gRWRpdCBNb2RlIC0gVHJ1ZVxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIG9wdGlvbnMgPSBbXVxuICAgIGZvcihpPTA7aTwgdGhpcy5wcm9wcy50ZW1wbGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG9wdGlvbnMucHVzaCggUmVhY3QuRE9NLm9wdGlvbihudWxsLCB0aGlzLnByb3BzLnRlbXBsYXRlc1tpXS5uYW1lKSlcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJmb2xsb3d1cC1wbGFjZW1lbnQgYXJyb3dfYm94XzEgdG1wXzJcIn0sIFxuICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7d2lkdGg6NTUsZGlzcGxheTonaW5saW5lLWJsb2NrJ30sIFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBcInRleHQtbXV0ZWRcIn0sIFxuICAgICAgICAgIFwiQ2hvb3NlIDpcIlxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnNlbGVjdCh7Y2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBpbnB1dC1zbVwiLCBcbiAgICAgICAgICAgICAgICBpZDogXCJjaG9vc2VUZW1wbGF0ZUZvckZvbGxvd3VwXCIsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDoxMjcsbWFyZ2luUmlnaHQ6NX19LCBcbiAgICAgICAgICBvcHRpb25zXG4gICAgICAgICksIFxuXG4gICAgICAgIFJlYWN0LkRPTS5idXR0b24oe2NsYXNzTmFtZTogXCJ3aW4tYnRuIGJ0biBidG4tc3VjY2VzcyBidG4teHNcIiwgXG4gICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5zYXZlRm9sbG93dXAsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7bWFyZ2luUmlnaHQ6NX19LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZWNrXCJ9KSksIFxuICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHtjbGFzc05hbWU6IFwid2luLWJ0biBidG4gYnRuLWRlZmF1bHQgYnRuLXhzXCIsIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucmVtb3ZlRm9sbG93dXB9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXRyYXNoLW9cIn0pKVxuICAgICAgKVxuICAgIClcbiAgfSxcblxuICBzYXZlRm9sbG93dXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAvL2dldCB0ZW1wbGF0ZSBmcm9tIGN1cnJlbnRUZW1wbGF0ZVxuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGNob3NlblRlbXBsYXRlID0gJCgnI2Nob29zZVRlbXBsYXRlRm9yRm9sbG93dXAnKS52YWwoKVxuICAgIGNvbnNvbGUubG9nKGNob3NlblRlbXBsYXRlKVxuICAgIGZvcihpPTA7aTwgdGhpcy5wcm9wcy50ZW1wbGF0ZXMubGVuZ3RoOyBpKyspe1xuICAgICAgaWYodGhpcy5wcm9wcy50ZW1wbGF0ZXNbaV0ubmFtZSA9PSBjaG9zZW5UZW1wbGF0ZSl7XG4gICAgICAgIGNob3NlblRlbXBsYXRlID0gdGhpcy5wcm9wcy50ZW1wbGF0ZXNbaV1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coY2hvc2VuVGVtcGxhdGUpXG4gICAgXG4gICAgdGhpcy5wcm9wcy5zYXZlRm9sbG93dXAodGhpcy5wcm9wcy5kYXlDb3VudCwgY2hvc2VuVGVtcGxhdGUpXG4gIH0sXG5cbiAgcmVtb3ZlRm9sbG93dXA6IGZ1bmN0aW9uKGRheSkge1xuICAgIHRoaXMucHJvcHMucmVtb3ZlRm9sbG93dXAodGhpcy5wcm9wcy5kYXlDb3VudClcbiAgfSxcbn0pO1xuXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gVXNlclByb3NwZWN0XG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHsgfVxuICB9LFxuXG4gIGNsaWNrQ2hlY2s6IGZ1bmN0aW9uKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgZG9tTm9kZSA9IHRoaXMuZ2V0RE9NTm9kZSgpXG4gICAgLy9pc0NoZWNrZWQgPSAkKCQoZG9tTm9kZSkuZmluZCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJylbMF0pLnByb3AoJ2NoZWNrZWQnKVxuICAgIGlzQ2hlY2tlZCA9ICQoJChkb21Ob2RlKS5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKVswXSkucHJvcCgnY2hlY2tlZCcpXG4gICAgJCgkKHRoaXMuZ2V0RE9NTm9kZSgpKS5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKVswXSkuY2xpY2soKVxuICAgIC8vY29uc29sZS5sb2coaXNDaGVja2VkKVxuICAgIHRoaXMuc2V0U3RhdGUoe2NoZWNrZWQ6IGlzQ2hlY2tlZH0pXG4gICAgdGhpcy5wcm9wcy5jaGVja2JveEFjdGlvbihpc0NoZWNrZWQsIHRoaXMucHJvcHMucHJvc3BlY3Qub2JqZWN0SWQpXG4gIH0sXG5cbiAgcm93Q2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgICQoJCh0aGlzLmdldERPTU5vZGUoKSkuZmluZCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJylbMF0pLmNsaWNrKClcbiAgfSxcblxuICBrZXlib2FyZENsaWNrOiBmdW5jdGlvbigpIHtcbiAgICAkKCQoJy5rZXlTZWxlY3QnKS5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKVswXSkuY2xpY2soKVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHsgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIGtleWJvYXJkU2VsZWN0ZWQgPSB7Ym9yZGVyTGVmdDonN3B4IHNvbGlkIHJnYmEoMCwwLDAsMCknfVxuICAgIHRoaXNzc3MgPSB0aGlzXG4gICAgaWYodGhpcy5wcm9wcy5rZXlib2FyZFNlbGVjdGVkKSB7XG4gICAgICAvLyBBZGp1c3QgU2Nyb2xsIGRlcGVuZGluZyBvbiB3aGVyZSB0aGUgcHJvc3BlY3QgaXNcbiAgICAgIGtleWJvYXJkU2VsZWN0ZWQgPSB7Ym9yZGVyTGVmdDonN3B4IHNvbGlkICMwMDk2ZmYgIWltcG9ydGFudCd9XG4gICAgICBNb3VzZXRyYXAudW5iaW5kKCd4JylcbiAgICAgIE1vdXNldHJhcC5iaW5kKCd4JywgZnVuY3Rpb24oKSB7IFxuICAgICAgICB0aGlzc3NzLmtleWJvYXJkQ2xpY2soKVxuICAgICAgICBpZih0aGlzc3NzLnN0YXRlLmNoZWNrZWQpXG4gICAgICAgICAgY29uc29sZS5sb2coXCJsbWFvXCIpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBwcm9zcGVjdCA9IHRoaXMucHJvcHMucHJvc3BlY3RcblxuICAgIGlmKHRoaXMucHJvcHMubWFzdGVyQ2hlY2tib3hDaGVja2VkICYmIHRoaXMuc3RhdGUuY2hlY2tlZClcbiAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgZWxzZSBpZih0aGlzLnByb3BzLmFscmVhZHlDaGVja2VkKVxuICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICBlbHNlIGlmKHRoaXMuc3RhdGUuY2hlY2tlZClcbiAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgZWxzZSBpZih0aGlzLnByb3BzLm1hc3RlckNoZWNrYm94Q2hlY2tlZCB8fCB0aGlzLnN0YXRlLmNoZWNrZWQpXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgIGVsc2VcbiAgICAgIGNoZWNrZWQgPSBmYWxzZVxuXG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLnN0YXRlLmNoZWNrZWQpXG4gICAgLy9jb25zb2xlLmxvZyhjaGVja2VkKVxuICAgIC8ve3Byb3NwZWN0LmVtcGxveWVlQ291bnRSYW5nZS5uYW1lICsgXCIgZW1wbG95ZWVzXCIgfVxuICAgIFxuICAgIGNvbG9yID0ge31cbiAgICBpZih0aGlzLnN0YXRlLmNoZWNrZWQgfHwgdGhpcy5wcm9wcy5hbHJlYWR5Q2hlY2tlZClcbiAgICAgIGNvbG9yID0ge2JhY2tncm91bmRDb2xvcjogJyNlZWY4ZmYnfVxuICAgICAgXG4gICAgcm93Q2wgPSAodGhpcy5wcm9wcy5rZXlib2FyZFNlbGVjdGVkKSA/IFwicHJvc3BlY3RzLXRyIGtleVNlbGVjdFwiIDogXCJwcm9zcGVjdHMtdHJcIlxuICAgIHdlYnNpdGVCdG4gPSAocHJvc3BlY3Qud2Vic2l0ZVVybCkgPyAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiaHR0cDovL1wiK3Byb3NwZWN0LndlYnNpdGVVcmwucmVwbGFjZSgnaHR0cDovLycsJycpfSwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZ2xvYmVcIn0pLCBcIiBcIikgOiBcIlwiXG4gICAgXG4gICAgcHJvc3BlY3RfZW1haWwgPSBwcm9zcGVjdC5lbWFpbFxuICAgIGlmKHR5cGVvZihwcm9zcGVjdC5kb21haW4pID09IFwidW5kZWZpbmVkXCIpXG4gICAgICBwcm9zcGVjdC5lbWFpbCA9IFwid2Vic2l0ZSBub3QgZm91bmRcIlxuICAgIGlmKHByb3NwZWN0LmVtYWlsID09IFwibm9fZW1haWxcIikge1xuICAgICAgaWYocHJvc3BlY3QuZW1haWxfZ3Vlc3Nlcykge1xuICAgICAgICBndWVzcyA9IF8uZmluZFdoZXJlKHByb3NwZWN0LmVtYWlsX2d1ZXNzZXMsIHt0cmllZDogZmFsc2V9KVxuICAgICAgICBuYW1lID0gdGhpcy5wcm9wcy5wcm9zcGVjdC5uYW1lXG5cbiAgICAgICAgdmFycyA9IHtcbiAgICAgICAgICBmaXJzdDogXy5maXJzdChuYW1lLnNwbGl0KCcgJykpLFxuICAgICAgICAgIGxhc3Q6IF8ubGFzdChuYW1lLnNwbGl0KCcgJykpLFxuICAgICAgICAgIGZpOiBfLmZpcnN0KG5hbWUuc3BsaXQoJyAnKSlbMF0sXG4gICAgICAgICAgbGk6IF8ubGFzdChuYW1lLnNwbGl0KCcgJykpWzBdXG4gICAgICAgIH1cbiAgICAgICAgaWYoZ3Vlc3Mpe1xuICAgICAgICAgIHByb3NwZWN0X2VtYWlsID0gTXVzdGFjaGUucmVuZGVyKGd1ZXNzLnBhdHRlcm4ucGF0dGVybiwgdmFycylcbiAgICAgICAgICBwcm9zcGVjdF9lbWFpbCA9IHByb3NwZWN0X2VtYWlsK1wiQFwiK3Byb3NwZWN0LmRvbWFpblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHByb3NwZWN0X2VtYWlsID0gKHByb3NwZWN0X2VtYWlsKSA/IHByb3NwZWN0X2VtYWlsLnRvTG93ZXJDYXNlKCkgOiBcIlwiXG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnRyKHtjbGFzc05hbWU6IHJvd0NsLCBcbiAgICAgICAgICBvbkNsaWNrOiB0aGlzLnJvd0NsaWNrLCBcbiAgICAgICAgICBzdHlsZToga2V5Ym9hcmRTZWxlY3RlZH0sIFxuICAgICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IGNvbG9yfSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwiLCBcbiAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmNsaWNrQ2hlY2ssIFxuICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogY2hlY2tlZH0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3IsIFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZml4ZWQtZGF0YS1jb2x1bW5cIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7Zm9udFdlaWdodDonYm9sZCd9fSwgcHJvc3BlY3QubmFtZSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2ZvbnRXZWlnaHQ6JzQwMCcsbWFyZ2luOicwcHgnfX0sIFxuICAgICAgICAgICAgICAocHJvc3BlY3QucG9zKSA/IHByb3NwZWN0LnBvcy50cmltKCkgOiBcIlwiXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3IsIFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZml4ZWQtZGF0YS1jb2x1bW5cIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7Zm9udFdlaWdodDonYm9sZCd9fSwgXG4gICAgICAgICAgICAgIHByb3NwZWN0LmNvbXBhbnlfbmFtZVxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7Zm9udFdlaWdodDonNDAwJyxtYXJnaW46JzBweCd9LCBjbGFzc05hbWU6IFwiY29tcGFueS1zaXplXCJ9LCBcbiAgICAgICAgICAgICAgKHByb3NwZWN0LmNvbXBhbnlfc2l6ZSkgPyBwcm9zcGVjdC5jb21wYW55X3NpemUgOiBcIlwiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtmb250V2VpZ2h0Oic0MDAnLG1hcmdpbjonMHB4JyxkaXNwbGF5Oidub25lJyxmb250U3R5bGU6J2l0YWxpYyd9LCBjbGFzc05hbWU6IFwiY29tcGFueS1zaXplXCJ9LCBcbiAgICAgICAgICAgICAgKHByb3NwZWN0LmluZHVzdHJ5KSA/IHByb3NwZWN0LmluZHVzdHJ5IDogXCJcIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICksIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3J9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW46JzBweCd9fSwgcHJvc3BlY3QuY2l0eSkpLCBcbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiBjb2xvcn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwibWFpbHRvOlwiK3Byb3NwZWN0X2VtYWlsLCBcbiAgICAgICAgICAgICAgIHN0eWxlOiB7bWFyZ2luOicwcHgnfX0sIFxuICAgICAgICAgICAgICAgcHJvc3BlY3RfZW1haWxcbiAgICAgICAgICApKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3J9LCB0aGlzLnByb3BzLmxpLCBcIsKgXCIsIHRoaXMucHJvcHMubGluayksIFxuICAgICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IGNvbG9yfSwgXG4gICAgICAgICAgICB3ZWJzaXRlQnRuXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgKTtcbiAgfSxcblxuICBkZWxldGVQcm9zcGVjdDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcm9wcy5kZWxldGVQcm9zcGVjdCh0aGlzLnByb3BzLnByb3NwZWN0Lm9iamVjdElkLCAnUHJvc3BlY3QnKVxuICB9XG59KTtcblxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIGNoZWNrYm94QWN0aW9uOiBmdW5jdGlvbihlKSB7XG4gICAgY2hlY2tib3hWYWwgPSAkKGUudGFyZ2V0KS5pcygnOmNoZWNrZWQnKVxuICAgIGNoZWNrYm94ZXMgPSBfLnJlc3QoJCgnYm9keScpLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpKVxuICAgIGNvbnNvbGUubG9nKGNoZWNrYm94ZXMpXG4gICAgaWYoY2hlY2tib3hWYWwpe1xuICAgICAgLy8gbWFrZSBzdXJlIGFsbCBjaGVja2JveGVzIGFyZSBjaGVja2VkXG4gICAgICBfLm1hcChjaGVja2JveGVzLCBmdW5jdGlvbihjaGVja2JveCl7XG4gICAgICAgIGlmKCEkKGNoZWNrYm94KS5wcm9wKCdjaGVja2VkJykpXG4gICAgICAgICAgJChjaGVja2JveCkuY2xpY2soKVxuICAgICAgfSlcbiAgICAgIFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBtYWtlIHN1cmUgYWxsIGNoZWNrYm94ZXMgYXJlIHVuY2hlY2tlZFxuICAgICAgXy5tYXAoY2hlY2tib3hlcywgZnVuY3Rpb24oY2hlY2tib3gpe1xuICAgICAgICBpZigkKGNoZWNrYm94KS5wcm9wKCdjaGVja2VkJykpXG4gICAgICAgICAgJChjaGVja2JveCkuY2xpY2soKVxuICAgICAgfSlcbiAgICB9XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRyKG51bGwsIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7cGFkZGluZ0xlZnQ6MTF9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCIsIG9uQ2hhbmdlOiB0aGlzLmNoZWNrYm94QWN0aW9ufSlcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIk5hbWVcIiksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJDb21wYW55XCIpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3dpZHRoOicxNzBweCd9fSwgXCJDaXR5XCIpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiRW1haWxcIiksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCLCoFwiKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIsKgXCIpXG4gICAgICAgICAgICApXG4gICAgKTtcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy9TaWRlTWVudUxpc3RPcHRpb25cbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge2NvdW50OiAnfid9XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIC8vIG1ha2UgYWpheCByZXF1ZXN0IHRvIGdldCBlYWNoIHJlcXVlc3RzIFxuICAgIC8qXG4gICAgbGlzdCA9IHtcbiAgICAgICdfX3R5cGUnICAgIDogJ1BvaW50ZXInLFxuICAgICAgJ29iamVjdElkJyAgOiB0aGlzLnByb3BzLmxpc3Qub2JqZWN0SWQsXG4gICAgICAnY2xhc3NOYW1lJyA6ICdQcm9zcGVjdExpc3QnLCBcbiAgICB9XG5cbiAgICBwYXJzZV9oZWFkZXJzID0ge1xuICAgICAgJ1gtUGFyc2UtQXBwbGljYXRpb24tSWQnICA6ICdOODVRT2t0ZUVFUWt1WlZKS0F2dDhNVmVzMHNqRzZxTnBFR3FRRlZKJywgXG4gICAgICAnWC1QYXJzZS1SRVNULUFQSS1LZXknICAgIDogJ1ZONkV3VnlCWndPMXVwaHNCUHNhdTh0N0pRUnAwMFVNM0tZc2lpUWInLFxuICAgIH1cblxuICAgIHRoaXNzID0gdGhpcztcblxuICAgIC8vY29uc29sZS5sb2codGhpcy5wcm9wcy5saXN0Lm5hbWUpXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdHMnLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGhlYWRlcnM6cGFyc2VfaGVhZGVycyxcbiAgICAgIGRhdGE6ICd3aGVyZT17XCJsaXN0c1wiOicrSlNPTi5zdHJpbmdpZnkobGlzdCkrJ30mY291bnQ9MScsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2NvdW50OiByZXMuY291bnR9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pXG4gICAgKi9cbiAgfSxcblxuICBjaGFuZ2VMaXN0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnByb3BzLmNoYW5nZUxpc3QodGhpcy5wcm9wcy5saXN0Lm5hbWUsIHRoaXMucHJvcHMubGlzdC5vYmplY3RJZClcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIGxpc3ROYW1lID0gdGhpcy5wcm9wcy5saXN0Lm5hbWVcbiAgICBwcm9wc0NvdW50ID0gdGhpcy5wcm9wcy5jb3VudFxuICAgIGNvdW50ID0gKHR5cGVvZihwcm9wc0NvdW50KT09IFwidW5kZWZpbmVkXCIpID8gdGhpcy5zdGF0ZS5jb3VudCA6IHByb3BzQ291bnRcblxuICAgIC8vY29uc29sZS5sb2codGhpcy5wcm9wcy5pY29uVHlwZSlcbiAgICBpY29uID0gXCJcIlxuICAgIGlmKHRoaXMucHJvcHMuaWNvblR5cGUgPT0gXCJhcmNoaXZlXCIpe1xuICAgICAgaWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYXJjaGl2ZVwiLCBzdHlsZToge2Zsb2F0OidsZWZ0JyxsaW5lSGVpZ2h0OjEuNSxtYXJnaW5SaWdodDo1fX0pXG4gICAgfSBlbHNlIGlmKHRoaXMucHJvcHMuaWNvblR5cGUgPT0gXCJ1c2Vyc1wiKXtcbiAgICAgIGljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXVzZXJcIiwgc3R5bGU6IHtmbG9hdDonbGVmdCcsbGluZUhlaWdodDoxLjUsbWFyZ2luUmlnaHQ6NX19KVxuICAgIH0gZWxzZSBpZih0aGlzLnByb3BzLmljb25UeXBlID09IFwid2lmaVwiKXtcbiAgICAgIGljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXdpZmlcIiwgc3R5bGU6IHtmbG9hdDonbGVmdCcsbGluZUhlaWdodDoxLjUsbWFyZ2luUmlnaHQ6NX19KVxuICAgIH0gZWxzZSBpZih0aGlzLnByb3BzLmljb25UeXBlID09IFwiY2xvdWREb3dubG9hZFwiKXtcbiAgICAgIGljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNsb3VkLWRvd25sb2FkXCIsIHN0eWxlOiB7ZmxvYXQ6J2xlZnQnLGxpbmVIZWlnaHQ6MS41LG1hcmdpblJpZ2h0OjV9fSlcbiAgICB9XG5cblxuICAgIGNvdW50U3R5bGUgPSAodGhpcy5wcm9wcy5oaWRlQ291bnQpID8geydkaXNwbGF5Jzonbm9uZSd9IDoge2JhY2tncm91bmRDb2xvcjonIzk5OScsZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6Mi4yNX1cbiAgICBsaXN0U3R5bGU9KGljb24gPT0gXCJcIikgPyBcImxpc3QtbmFtZVwiIDogXCJpY29uLWxpc3QtbmFtZVwiXG4gICAgaWYodGhpcy5wcm9wcy5pY29uVHlwZSA9PSBcInVzZXJzXCIpXG4gICAgICBsaXN0U3R5bGUgPSBcImFsbC1saXN0LW5hbWVcIiBcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgXG4gICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY2hhbmdlTGlzdCwgXG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJsaXN0LW5hbWVzIGJ0biBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgIGljb24sIFxuICAgICAgICAgICAgICBcIsKgXCIsIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBsaXN0U3R5bGV9LCBsaXN0TmFtZSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IGNvdW50U3R5bGUsIFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJiYWRnZSBiYWRnZS1kZWZhdWx0XCJ9LCB0aGlzLnByb3BzLmxpc3QuY291bnQpXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1wiMFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC84MzUzYTNmYzA1NzI0Y2JlNDVlOGMyM2IzNDdhMzllN18wOTk0ZDQ1OGZhZmYxZDBiNzFmMGY4ZTUzNDI5OTMzNWE1NzY1YmE0YTY3MmVkODE3NjY5NzI5ZjZhMGExZTlkXCIsXCIxXCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcLzEwN2ZjMjY5MWJiOGIzMzMzYmE3OGExODYwMGZhNTYxXzlhODMyYjJlMjdjMmFhOGNlNmVkMTJjNjJmYjY2NTkzOWU0ZGUzOGYzMGVjOWJlYmQ5MmY4MTNlYTY3N2Y4YzNcIixcIjJcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNDQzMmE1ZGY5OGM1ZWFkMzJjYTNlYzg5OGUxNzVjOTBfZjkzZWYwYTdkZGJhOWFjOTYwYzZhMTU5NDFhNjlhMTI0YTVkNTk2MWZkZTM0NDU1Y2I3Y2VlNmM5N2Y3MTJiYVwiLFwiM1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yMjk1ODBiNzE2NjA2YTRlYjIxNDJiMWVhYWNhMTBlN18yMzk4ZDUwNTBlMTkxZDE1ZmY1Y2Y5ZWI2OGNjNjgzNjkwYzA2ZDM5NDkzNDVkYmY3OTAzOTQ0MzdhNDY1YzA4XCIsXCI0XCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcLzQ5OWQ4YTg2M2Q3ODcyZDZlMjM5NTEyMTI0YWY5ZGRjXzc3MTE4MmRjN2I2YzA4MDFkZTZlNTcxZGVlZDg5YjQzN2FiMTIyMzcyYjU0N2UxZjdkOGRhY2FlOWNiMTcyNzVcIixcIjVcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYTllOTdhNjQ0NWE4YWMxODc1NjEzMTBiMTZiNGJiZDhfOTZjZTkyODlmZDhlNmYyYTZiZjI2MmI0YmFmNTQ4MzY3YWQ3ZjUzYWFjOWE5ZWMxMTU3MDIwNDY1ZGUwN2U2N1wiLFwiNlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8zNWFmNTA4ZGFhNGE1ODA4MDY5NjEyMzZiZmI3NDNhMV8xYTRhZmUyNjU2ZjhkOTVlMzcxNzc1MWY5NmEwYzZjZTZjNWIxZDI1OTIwZjRkNDVlNWNmZTliYmEwNWRlMGM4XCIsXCI3XCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcL2ExMDAzNTAzZWY1ZTIyNTRlNjY5NGVlYmJkMmI0NDk5X2E4Y2QyY2FlZmU2OTE0NzZlM2YwMjM1MTM2OWRjMmMwN2MxYTNkNmNlMGY4N2IxODdmNThmZGY0YjIwMjkyYzVcIixcIjhcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMDFkY2I1Mjc4ZjU1MjI1YjdlOWMwY2ZmNmFhM2Q2ZTZfYjQwZjkyYjljNWVmM2I4YzgxZDQ3OGJiNzBiN2EwOTRmMDc2ZWQ1OWI3ZDM2ZDdhNjQwMWYwZmQ5ZDk1ZWFjZlwiLFwiOVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC82MWQ3OWUzYzI1MTA1MDk5ZjczNjY4YzYyNWVhMzYxY18xZDdjMTI1NTk2ODI1OGMwM2QwNTY0ZTE0MTI4NGI0YmRkYmQyZGI1MjA5MWNmOGQ3NWNiMzg0YjIzOTQ5MzkwXCIsXCIxMFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9jYTgwODQ1MGE2MjIyYzliMDlkNWI4NjkyNGEwOGZiYl9mOTBlMDJjMWU5ODFlNWY2Y2FmOGFmNzZmZWZlZjc2NTNkMGE0NTFkYTUxYmE1YTIyYWMwZjI2NTg3NGJjNmNiXCIsXCIxMVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC85N2RlOTNhOTliOGE5MTU5ZGVkZTJiOWZmMTdjNzg4N18zZTkwZGY4ZTc4OTRjMGMxMjk2M2FiZjJmYWRiMjA1ZTQ0MzY1ZjU4YjUzN2YxNWI2NzdhNGE3ZTljNTU3YmNkXCIsXCIxMlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC85YmY4NDA0ZDY3M2M5ZDYxNzhmMjM1NDhjYWE0YzlhNF80NjYwNmRiYTlkZjRkMTBjZjI4MmZhN2FkZDIzZThhODdiN2Y5NzZkMGUzYTE1M2ZhZDBmZjE4MWUxYmU0ZTE3XCIsXCIxM1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC83ZjNhNDc1NGE2MzRmYzFlMzkwOTBjNWRkNmM0NjgwOF80MmQzMjk0YjM0YzRhYzljNmY5OWY2NmJjM2FkOWExOTVkMjBlOThiMDljNzU3OWZlMzQxZDBjZjQyZjljOTNmXCIsXCIxNFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9iNGJlYmJmYmZiZTQ3ZTUwZjQzNWI0YzJlZmUwZGIwZl8xODFhMzExOWYxMmZkMDNiNmJiNTE3MzUyYzYzNjUwODQ5N2JlYzYxZjkwNzhiMGUyODE1MTVlZmQxOTJiMzQ1XCIsXCIxNVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9lYzFmNjE5MGUyYjlhODBhM2Y3Y2YxMDE2NDljY2M2M18wMDI2MDE3ZjQzODA1ODVhMmU1NDBmMDU5MzZhNmY1OGZlNzI1ZmU3ZThlMDM3OGFhZTk4MDM5NjI4YzRiZGYyXCIsXCIxNlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC85ZGQ5MjFmNDFmYThkNGFiMjliY2MxYzQ1MzQ4YjVhMl8xNThkZjhhMjJjMWYxNTcwZThhMmMxN2FiNWUzMDE2OTI0ODAzMDU5MzY2NWZiZDg3OTJmNWYyZjAxNTE2MjkwXCIsXCIxN1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9iOTc4NmM5YjU2Yzk0Y2FhMTNlNzRkNTliOWE5ZGE0OF8xZjE5NWZiY2RmOTVjMGQyNjE4ZDU3MWUwMTkyZmYxYmUyZTQ5MjFkODhhZWQ4YjdiOWZkOWUxNDQ0NzQ5MjcxXCIsXCIxOFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9hYTg1NzdmODc4ODU4ZjMxODg1OGFjZWQ1YWJkMDM3Zl9jYjkyNmEwN2QwZTQ2ODY2MGUzNTY5Mjc5Y2MxMzU0YWE3MjQzY2RjOTUxZjk3MDMyNTI3Mzk5M2M4OWU5ZWU3XCIsXCIxOVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9jMTFiMzIyZDhhODAwNzAzN2VlM2UzMjQyYjI2MDkzMF8yYTYzYzEzYjMxNWEzOGIwNjlmMzhkYTY1N2IxODlhYWQ2YzdhZjU5NDFhMTk4NTkxMTFkZmIzYzcwYzk0YjQxXCIsXCIyMFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8xOWI2YzM5ODlhODA4YmU4NDU3MThkOGFmMjQzNTJmZl9hOGU3MmFiYjJiNTc3MjcwNmFjMWM3OWU1Y2JhZjU5YjNjMmYyMGVmYjBhY2E5YjkzZDA0YWU4YTI0OTIwOTY3XCIsXCIyMVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9mNDEyMDk3MGE2ODZhNTZiNDc1OTU4NTgwODE3N2NjN184ZTE3NWU0OTViMWRlOTIyY2NkOWE5MmE1ZGU5N2I5NTQzMzQ0NGFjYTQyMmIzZTYzMmMyZWE0ZWQ0OGQzYmM5XCIsXCIyMlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9hZWU3ZTQwYjJkZDRjNGM5OTYxMzIzZDk4MjQ5YzgyNl9jMWMzODdjNzE0ZTg5ZDVkZmNjZjA2ZDNmZTBmZWQzMzI5OTJlZmY4NzdjZGJkNjBiYzRlOTRlN2EyZWQzOGZmXCIsXCIyM1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC82NmQxOGJhZmZmNGY5YjhkMDc3YzEwN2JiNzNiMjkxMl9mODA1NTI4OWVhZTU4ZmFkMDBjYzBmNjcyN2IyYjVjZjBmNzJiODM3OTYzMzUxYjdjYTYyNTBiYTRlMjYzMmExXCIsXCIyNFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yZGE4NTQ2YzNiNmE5OWIxOTEyNDlhZTY5MjA3ZTMxYV9kYjg2NjgxMzMxZDBkMmI5ODUwZTU1OTZjZTc3MTFhYzM4NmY0ZTE0NjljNTI2OTM0MjY3OTc4YWYzNDk4MzM4XCIsXCIyNVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC81NjE3Zjc3ODdjZGYwMTc2ZTU0YzRmMTNlOWNjYzU0ZV9kYTdjYzE2OWY0NjU4NWRlNzJhY2Y1ZjcwNWNkMzRhNTJjNjg4YTQwZGM4YWE3MmVhNzIwZDU1NmE3MDIyZjcyXCIsXCIyNlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9mN2UyNzEyYWE4Y2ZhYjg4YzU1ZDFmNmM3OGVmMmU0NV81Yzg5NWNhMDZmNDBlMzAzNjllMDdiMTljNjRiN2JmMWZlNWJlMDk3N2U1YmJmYzBjMjIxMmI3M2VhNmU2NTEyXCIsXCIyN1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yOWFiNzJjMmI5N2IyNWM0ZTNlMWMyODBlMzI2NGY4MF8wNjliOTRjYWFkM2IxNGUyYmIzYjIwMTJhNTFkOTRlZDhlNDc2ZjBhM2Q5YTM2OGFhYzM2ZGI5ZDcxNmExMmFmXCIsXCIyOFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9lZTE3YTdkOTBjODA2NWEzYWJjZDBhNjcyMGI1MmU2Nl8zYjk5MzhjMjY5M2UxNDJiYTM3MDY1ZGUyNGRhYmVjNTU2YTE5MmFkZDRiODRiNGYyOTc4NWNlYTNiNzQ4NTNmXCIsXCIyOVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8xNmY2MWViZjE4MTBhYzMzM2Y3YzkzNmNlNzExYjI4YV8zNWQ0M2YzZDFjNzYyYjIxZDYyOTYzNGI0NTg0ZDBjZDk1YWVjZGZkOWEzMDg3ZjI0YTllYjcyOWQxMzRiNzY5XCIsXCIzMFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9lMzE4Y2NjNTEyMWNmZWIzYjk5YzIxZDA1NWU2ZWNlOV9lZGM2MDZkNGJjZDNkNzZmOGU0NWRhOTZkOWRiZDY1MWJmMGMwNjdhN2NhMTU5ZTEwNzNlM2I0NGIwMzUzMGM5XCIsXCIzMVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kZjljOTBmMmI5M2E5ZTQ4OGQ5NGZlNTI3MjViZDc5OF8zYjBlMzM5NmQ5ZGVhODY2OTYwZDhjZTZmNjdhZjEwYzg4MDlmMTU0YjY4MzFmYzI3OGI4ZWQzNDM5MGE5ZjI3XCIsXCIzMlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC82ZWVlMzU3ZDEyMWM4MTRhOTdiNjM2MmM0ZTU1NTI2YV9jYmZmNGFjNDM5YzIwNTQ4MTNkZWE4ZGE4YjhmMWVjM2I1ZTBjNjQ0YWNmMGRjMmFlNjI1NzQxZTk3ZjBiZWEwXCIsXCIzM1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC81NjBhZWQxYmVlOGUyMjBmMDk4MDE5MGRlZGI3YWRkNl85YWQyZGU3YzZlYmZkZDcyNGYyYTE3Yzg1ZWZkNTE5MmY4MzkzYTQ3N2RkZGYwYTBjOGM5MjYwZTE3ZDVhNTE1XCIsXCIzNFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC84NTBmMTI0MmRkZDY1MzlhZDhiMjdmNjk5MDhjN2Y5ZV8wOGZmZWNkMmI2ZDE4NGU3ZDcwYWI3MGFiYmJiYWJlNzEzMjI2OTI1MGM5M2RiYmRjYmE3ZjIyZTg2ZjA2OTJlXCIsXCIzNVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8wNzVjMDZjNDgxZWVhNDI5ZjZjYzgxNjY5N2ZjYmJmOF9jNTViOTliZTA1MGJkY2IxZjMyYzk1NzhjYjhlMTdmNmY0ZDZmMjAwYzFmMzdmNTI4YzI0ZmVlNjVhMjYxODJhXCIsXCIzNlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8wMjhiMzExMGFhNjA1NTRlNzQzNGYxYTI0NzMyMjljZl9kMTVlMWM3ZjAwYzgyNzU1ZTE0NDc3M2Q0NmJiNGUwZTk2NGZjZmE0MjVhMjU0Y2EwNWFjMTMxM2ZjZWEzYmFlXCIsXCIzN1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9jMzcxOWY4NWQyNGJhZmVmNjRlYWRhNjRlNzM1Y2E3M18wMjU4ODBjNTFmZjQyYmQzZmY3OWJhMzVkNDU2ZDhjYjE0YjZmYmM3ZWUxN2JhM2I5ODYxMmU3MWFhMWQ3NGI5XCIsXCIzOFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yMjM1NmFiNmFlNDQ2N2M0NGEwNzRhNDEzNGJhZDkzN19hOTkwOWMzN2U2ZTIzYjQzNDNjZTE5NTgyYzkxMThjZmIzNzQ4Yjg5NzdmMWRiODIzMGFhOTkyZDY0MGYxMjE3XCIsXCIzOVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yMTMyZTVhMmZjZDg5YTU0ZTdjNDJjNWZhMGI4ZWY3N19mZjBkYzQ2NTExYjE1MGE0YjBhZjljZGY4NjZhZjJlMDZjZTg5OGQ3MTE5YjdhYjIxMzUwZTBiMzMwNGQ4MDY1XCIsXCI0MFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC80NWFhYTczYjY5M2FlZWM0MTRiMzRmZDQ0MjYyZWY4Zl81MWMyMjUzMmFiZTBiNjE1ZjBlNmUzYzBlOTFjYjFhOWJjYTQxYTZmNmMwZWM2ZjMzYzM2OTNkMTI4ZmQxNzU1XCIsXCI0MVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC81N2JjMmQxYTJhYjY5MmUzODI4NGYzNTUwZjU4YjM4MV8wM2JkNDQxMTcyMDAxZTNjMmU1MDg0ZjMzOTBlZTBjYTAzMjdiNTAyYjBjMWRjNzk0YzhjOGFjMmIzZDIxMzBlXCIsXCI0MlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC80NzQ1YWQwNzgwN2NjYWQ5N2UwNzI2ZmM3YmExODE3MF80ODkxMWE3Mjc0NzRjMDM5OGMzZmM3MDE4ODBkNjIzZmFlZGM1OTJmMTY2NzczMTBmOGU4MTExYTI1ZTJiZTM3XCIsXCI0M1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9jZDE1OTRjNjJhMzFjODMxZDEyNGUyODZiNjkwOTcwMF8wY2Q5ZDA2MDM5MmM1ZjVkNTc1ZjI5YTg5MzBjNTVjNjlhNTQ1MDFjMWQ3NjM2OTI5NjgyYzM4ZTRlMDY5ZDVlXCIsXCI0NFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8xZjNkYjc3MTIzMTNhM2JjZmU1ZmY0YTk5YjY3ZmNkZl9hNjZiZWMwYTQzMTc5NTMxYmNlODAyMGFhYWRlM2Q4NTk2N2I3YzlkZjU0YWIyYmRmNDFmMTJmNmNkNjBkM2VmXCIsXCI0NVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yNjQzZTAwODc1MmRiZmZkMTdjZDdlNGNlYTMwYmIwOF84NjdmZDliNzZjNTM0MmI5MTRiZDliMjg1NzU2YWMxMGNmMDRlMWIzYWQ4Y2I2NTI0YTJjOTZkN2FiNzVjMDdhXCIsXCI0NlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kODlmZDI5NTlmOWVmZGNmNzA3Nzg4MDEyNTNhNDkyMF85N2E5MDY2ODRmODQzZThlYTNmMzIzNzc5N2FkYzYwMWM0ZDIwZGZjYzc5ZTdiNmU3NTY2MzAyMDYzMTJmZTg5XCIsXCI0N1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kMGI3OTIyODIxYzczYmIzNDM1N2I5YTdiYmYyMjY3Y19kNjNhNGU0NjU1NjY1MjY4ZWE5MmRhMDgwNjNjOTVmMzA5NjQ2Zjk2OTgxMjViMzE4YjA2MjE0ODdiOTA2Y2E0XCIsXCI0OFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9iNzZmOGRhOTUzOGVlYTllYjRkODk3NjU2ZjRhZWQ4Yl9mNDlmZmI5NzUxMzQ5M2QwNTZmNDJmZTMxNjY1MGYxZmI1MDdmYzFlYmU3YTA0YWQ4NDU0ZmQyYjU4YzUwZWE3XCIsXCI0OVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8xOTAyODVjNjUzZmUxZDE4ZGIzMjU3ZWVhZjRiZTQzYl82MGFhYzU2MTViOGMwOWZmM2NmYzg0MGVhZmJiMDIwOGE4ZGM0ODI0ZDk0MmRmMTA2MzdlZDFkYzQzMTk4ODk2XCIsXCI1MFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9iZGVlMTE0NDkwOTc2ODU0NGZiMjE2NWQ1ZTA1M2U2NV8wMWVlYjBiNjhmYmUwMzhiMzNiZDBkOTUyY2U2MDU5MGIyZmY1MmMzMmRhMzJiY2VlZTUxODY1MmE4OWU4MTQwXCIsXCI1MVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC82N2YzODE2ZmZhZTNmNzJiZTQyYTc4NTM2MDdmZjU0NV85Yjc3ZjdlZTllZDM5OWZlNzc2NjRhMGM2Y2RlZDMwOWExNDE4N2VkMzI1YjdkYWNlOWI3NGY1OGQzODRmYTcwXCIsXCI1MlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC80MzE0YjY1OTFjY2VjYWEzZWIyNjVlNGU4OTAwMjFmNV8xMzVmNDJhYzUyNWM3MTYwYzY2ODBkOTlkMDg0NjNjY2E0ZjRmODZiNGEwYTExMjUyYjI2YzU3ZjdmNjU1MmUyXCIsXCI1M1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kYzI0OThhMjIxMGY1YzhkZmM5Mzg5MDk2NzBiYTY4Zl9iYjRlZGIzMjRhZWI3NmY0ODA5ZDJmMmZmZWYwMzY4MTU0OTc0MDBmZDI3NmY4MzZkOTIzZTdlMDk5OWMzNTUyXCIsXCI1NFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC84ZWEyZjhhZWNiNjViY2MzY2VjNjkxYmUwNjE4MjJhNl9jOWU4Y2M0ZmY2NzBkZWYyNmEyMDE0YjQ2NThmNTYxYmIzOWFmNzU1NzI3YWIzMWEwNGI2NmM3MDNmYWE2YmZjXCIsXCI1NVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9jYzYyMjA1MDhkNmI1MDk5M2U4Y2I0OWU2YzA3MmEzYV8yNjZkNTdkNDA4Mjg1OTVkY2Y5OTY0MDc2OTU1MjQyY2JjNmQ5Y2RjNzhiYmMzMjNiYTM5ZjA4ODNjMDVmZGE4XCIsXCI1NlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC82ZDIwMGVlMzlmNDA5NmY0OWI1MjNkOThkODUzNmIwM18wZTBkMTkyN2Y2NThiMTRmZjM1YTI0YzlkOGZjNjkzMTkwYzlmNzM5YTZkMTRiMzYzOGE2OWU5MDFiMWE0OTRjXCIsXCI1N1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kZWFmMGQ0ZDQ0MzFkNmJiMmRjYzZiZGExMjU3NWRjOF83ODZiZTdlOGUzNTczMTcwZTE0MmQxYzM5NzRmMThkNmQ2OWQ0YzRkZDNjYTA2NTkzNDY3ZjJmNTNmODMxODk1XCIsXCI1OFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9lYmYzMzliMjk2MzkzNTVjMDFhN2UxZDBjOTA1NWJhM18wYzJjNjM1NGFmNThjNzFlZWUxNzlmNzcyYjhmOWM5NTU2MTExYzA0MmVkZGVjNDg4NjQyMjA1ZmNlOTAxZjZhXCIsXCI1OVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9hZGY3NThhOGRjMDMyMjM5ZDA1YzJiZjMwYTRhMGVkZl8xZGU2OTUyNzVhYWY4NGM1ZDk2MjQ4NzJlZmFjYzIxZjJiYjM1ZDc2OTA3YzAzMjc4OWYwYThhOTEwMDdhNzUxXCIsXCI2MFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9mY2ZkNzNiNmUzZWI1YTllMjQ5YjM3OWE2ZjU1OWZjN183ZjEyZmVlZWZiNzc3YzUyZGEyYzE3NWJmYzMzZGQxOWRiNDA3NDliMzg4YWY0MzVmNGE2OGMwZjA2YjRmOWFkXCIsXCI2MVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8zYzgyZDA4YmNhNzcwMDk5YmIxZmNkYmRhMjE0ODRlYV80YjFiMWEzMTU3MTcxMTQ0MDQ0NjMyN2EzNzMyN2NmODY2ODUzMDdmN2RkNThhZDI2YTViNTY0YjM4NGQ1NGM5XCIsXCI2MlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kYTA4NWRkZjYxZmFiZmM1MjNhNmQ1YmMyMmVhMzA1Yl9mMTk4ZGM0NzY0MTNhZTUyNGUyMzBlYmNkNDI4ZjQ2NDk1MDlhNjQ3OTRiYjEyZGZkZTBkOGZjMmQ5Y2Y4NzgyXCIsXCI2M1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC81MTBjNTdhYzgxOGQwNTM3MDEzMjFkMTZjZmVkOGIzZV83NDIxMGQ5OWFhNjU5N2IyMjdmZTUyMWIwYzdlMTI4YjY2NTEwZGE2YjJjZmJkNjdmNGQwZDBmOGJlN2ExYzEyXCIsXCI2NFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC80MDEyMjMzNDk2MGE1OTU0MjU1Y2NhODdkMDFiYTVhZV8xZDZmYTdhYjA3YTE1ZGY3OWU0YzYxY2VjNWEzNjllNmU3ZGNjN2U1N2ViZmQ1MmZkOTM3NjMwZTA1NmRiZjMyXCIsXCI2NVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yODFiYzAxMGRhNjQ2MDQ1NDU1MzFjYTQwNzRlZGEyZV85MWM0Nzc4MmUxZTdlMTllNThkM2Q1ZGE5ZTQzYzFjNTM1MDVhMTQ1ZGU0YWRjZDIyOTMxNzIxZjk1MWVkY2VkXCIsXCI2NlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8xZjAzMDZhYzE1ZjJhMTE3MDdmYjY2MzdiNjRhYjViY19iYmY3NWQ3YTMxYWZmNjM4OTE2YjE1NGQyNjNiMmZhMWFmOWYzZjUzZWYzMTI0ZTVkNDcwMjg5YjFiNGRjNWM0XCIsXCI2N1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC85OTE0N2I0MjZmMDJlYTYzZjUyZDdiOTA5NmJmYmE5NV8yYWY5MTg1NGU4OWE4MjE0NjY3MjIyZWE4NzFkOThlYjhjMWNjYWY0OTY5ZWMxMjkzNTZiZTBmY2UyZWVjYTUxXCIsXCI2OFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9lY2ViYjE3ZTVjYTIzZGE3ZjQyMGZhMzU3NDcyYmYzZV85ZGNjOTJlNjk2NmQ2ODhjOTU2ZTFlNmEwYWJmNDI0OTk2ODdmOWU4MmI4MmEyNDk5ZDU2YmI5M2E1OWIyYmQ4XCIsXCI2OVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9hYTk2OGQ1MTI4MTUzMjFiNWM3NGFmNDhmM2Q1M2MzZF83NGY3YjkyYTY2ZjQ1ZjhlMDUwYTQ2Zjk0Y2I2NzVkYjdmYzI1N2FjZWZlZDdjZWQ2ZmU4NWE4MmNhYTkzMTM5XCIsXCI3MFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yNDUxZWZhMzljYjZlZTc1NzZiNDFlMTRiOTA3OTI1YV9mNDhlYzkwM2FiMjI4MTJhMzg1NzQzNjI1ZTk3MmU3Njc3M2JkYmQzZTMyM2M3MzY4OWYyN2VjY2FhOWQ5MGJjXCIsXCI3MVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC82ZWNhNWM0NjA3NDgwMThmZTkxZjkxOWQzNWYxZGUwMl8yMTE2ZDdlOWM4MzMwMjFjN2ZiNTgyMzdkYjFlOGFiZDNlMzdhMzJmNjUyZTU0NDlmZWI5NGNkMjg3Y2E2M2NkXCIsXCI3MlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kMjMzZDY1ZGYyYTI3YjRlNmMxNzdhYjM3ZjcyNmMzM19jZWE3ZGJjYjc3NzBhOTc5OGE0OWZjZTNhOGQ1NTY4OWM2Yjc5YWQ3MTBlOGYzYWEwMTIxYmNhYmQ5YjAxNzZiXCIsXCI3M1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8wNjMyMTU5NDM1ZTY3YmRkMmE1ZmZkNjg0NzEzNjFmMF9iNzcxMWI5NmQ0OWJmZTA3YmE0YzZhOTcwMDYxOGM2OTQyNWM2Njc5OTkyMDljY2JkNzU3NTkyNTgwNWIwYjViXCIsXCI3NFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8xZjZlZGViZDU1OTdiYWU3ZGE2M2U3YWQ4NjIxNGNjZF8wYmNjNWVlMThhOTUzOTA0MzUyNGZkYWQ1ZDljYmRiNTI3NTE0MTQzZTc1NWExYTA1MTY5ZTA1ZTA2YzM3OTQxXCIsXCI3NVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8zMTg3NGMxMmQ5ZGYyZGZkODljYjZhNDQ2YmRjNDA0Ml82MTE2NDRlMGU2YmQ2NmYyOTI3MGJlOTk5YWY1ZDRhZWUzN2E1ODk4ZDkzZGQ0MWM0NmRlZTExMWY0ZTYzZmEzXCIsXCI3NlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC85NWJhZDMxYzgxMjdkZWVmOGFlZjdhOGMwZDk2Mjg1Zl8wNWI1NThiODZkYjllZDYxYmRiMTM0ZTdlMzJlNTZkZGVhOTYwZDE4MDY3YzRkNDRjYjdiMjA3Y2ViNTkyZTViXCIsXCI3N1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9lMWEyMWI2YTQ2NWJhOGMwNWFlYzk3ZmE3NTY4ZWZiNV84ODhhYjhhYjQyNGEzMmE1OGIwMDgwOGNhMmY3MTZiOTAzOTkzYTdkMDc2YjQ5MjVjNTIxMTdhMjQ2N2ZmMDRiXCIsXCI3OFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kOGMyNWIzZWQ5MWE4ZmM5MWY5M2FjNTYzNzdjOWRjY183MmFmZDk2Y2IzOWY1ZDA3ZWEyODYzNjFlZGIyNjQ2MjdkMWYyMzRlODcxY2U0ODM3MWRjYTU3YmM0NGM3YTgyXCIsXCI3OVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC85NWIxOTNlMGRiMGY4OTY1ZGU1YzcwYTViOTZiYjA3MV80YjU4N2EzOGE1YjNiNWYyZWI2YWQzN2Q3NDU1MzFlNzIzZWRjMDdlMzhlYjZkNGNmZWMzYTkzODZmNjViMWU4XCIsXCI4MFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC85MGIzZGE3ZTYyYmJkOTk2YjcyMjk3NWEzMjMwZjBmM19iM2U4OWViZTNhMGY5ZDFhNjUwODc3MWUxMTA4NjI3ODg1YjVkZjc5Mzc3YjI5MTQxM2EzNTI4NGNjNTA2ZjVlXCIsXCI4MVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8zMjQyMTU2MzUzYzkwNjU3N2U5ZWE0MGY5MjEzOTcxOV83NmNiNjdiY2I4MjFlZjRhODNiNDc5NjgzMmIxNWQzYWI0NDAyNjI3NTM0ZGUzNmMzZmY1OTJiYTBlMGNhY2IwXCIsXCI4MlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9hNGJlYjYzNGZiOTcyZWY5Y2FlZmVjZjQ3NTI3ZTM0NV9hMThkNjg1MTg4MmQwM2Q0MzcwZmExMmM4NjZmY2Q5MWNhYTkwN2IwY2QyMjYzYTcyMjM3OGMzOTlmYjU5MmI1XCIsXCI4M1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8wNDQ3Y2QyNWU0NTE1NTY5YzNiNjEzYmM0YmQ4OGEwNV9jMzY1NmRkYmJmNWRmYzg0ZTQ0YzM2MTZjZmFkNDEyNjdjOGQ3MzBlMDBkYjU5MThjY2M3NzU3M2ZhYzA3ZDQ5XCIsXCI4NFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8xZTAxYTRlY2JlYjljYTQ2YTYzYjc0NWM2YTJlNDYyZF8zZWJiYmFiMTRkZjBlMmRiNDNhMjk0OGMwMjk4YWQ2N2RlZDUzMDI5ZWZlOWFiYTZiZDQwYjNmZDk5ZDVhYTE4XCIsXCI4NVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC81NTljNTAyYWVhN2FhYjRhMTFlMTIxNzQzYzlkN2M0M182OWNhY2NmZWU0OWY3NDdlNzJhNDc2OGFkNDI3NGM4YjY4NzU4NDhlOWFiN2IyYzg1MTdlMjA5ZDM2YmRmYjMyXCIsXCI4NlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9iMjdhM2FmYTk1ZDg0OWI3Mzc1YTMwNDc2OWJkM2JmM19hY2FkYTdiYmNhMjA4M2NlNTVhYjExOWU4ODY2NmNhMGFlMTBhNGFhYzQ0OGFkNWQ3ZjQ1ZWRmMDA3Nzg5N2ExXCIsXCI4N1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kZTI0YWU2ZTZiNTMxYmFkNTdjMzdiZmZjYWMxOTU0ZF8yYzE1ZjNkYTM1OTNjOTUyNjA3OGJiODBiYzdmYWE2NmVjMDgxYjFjY2FlYTIzMWI1YzI1OWJkYjgyN2Y2ZmQ4XCIsXCI4OFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC83Mzc1YTMwOGM3NjRlNDA1ZjkyYWI5ZDk0Mzk0Mjk0OV82YjdiMzkyZjU2OTRhYmNmYmI3MGRhZjQ1OGMyMjM2OWRiMmY5Yjg5MDU4M2UzZTJkNzEzYjA0NmNkODRlYzg5XCIsXCI4OVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9hMWZjOGI0Y2I1ZTg5ZjFkYzNlZDc0ZWM4YmFmYzNhNV80ZDBlZmM3MTZmM2YyY2I3YmRhNjg5ZTVkYWE3YmE1ZDk1NGVlNTRhOGY5NGY3NzU1YjMwMzA0Mzk3MGIxZDk5XCIsXCI5MFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9jNGY3ZDJiNjI4YzY2MWQxYmFhZDZmZjFmNDcyMmRhOF8xNDllMmI2ZjNhZDQ4OGQxMGZjZTY3MTQ0Y2NlZTZiNjY1MTlkOWQ3Zjg0ODJhMWZmMGM5YWU2MjdmMWRkYmNhXCIsXCI5MVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8wOTQ1OTY0N2YzOTI4ZTc3NzUyNDQ5ZjQxOGE4NWMyN183YTcwNGY4Y2ZhZWE2MmExOTUzZGZkMWUzNDVlYjZlM2FlZTAyMTE0MTg5ZjE4NmYwMTgxYmZmM2E3ZTc3ZmU2XCIsXCI5MlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC82NTVhN2RiODYyY2NkZmExNjJiNmVhMGRmZmEzZWYxZV82ZWIxMzNlNzA1ODc4ZTY0MGE0MjdiNjY0NjU2MTg5ZjFlYTkzMzAyODUxMzNlNGE3M2E5NDNhMDk3NjA2ZGE2XCIsXCI5M1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC80MzRkODJiNDMwMjc5ZDI2YmNkZDliZDEzZGRlYzc2Zl81Y2JhZDdkN2ViNjc0MGRlYmM5ZTJlM2MxYjcxOTdmODYxYjcwNWU2ZTc0Mzc5MzA3YTViYzkwMGQ3NTI1MGY1XCIsXCI5NFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8xNDJlNjRiMDUzNWEyYjBjM2JiNTI1M2MwZDIyNjZhOV82Yzc0MDNjZGE2ZjhkYzYxZWI5ZDJiMzJkMzdmNjA4YzM0YzY0MTEwMWQ2YTJmMzVjMDczOTA3ODk4YTdlNGFlXCIsXCI5NVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8zZjg3OTBmMTEzNGYwNTE0YWYzZDJiYmMwNTIwOTA2MF82Mzc3ZTVkY2RmMGQyMzJmMWFhODEzOTAyMmI4YzkyODBmOGI0Mjk3ZjcwZWZmZjNlMGY3ZDUyNDE3YzFlYjIzXCIsXCI5NlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yMjBhNzA1MjkwZWI3YWRiY2RmMDUyZGRiMmQxMWM5OV8wNjM3NGQ4NTQ2ZDVjNzQ1NjcxZDk4Njg2ZjFiNGIwZGQzMWQ3NzdiMWM3YmNkZDBlNmRmZTYzZDBhMjNlNzE5XCIsXCI5N1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC81MTI0OWJiNmY1MDZlNDJlMTdiZjkyNDFlZjg4YjZiMl9jMTIyMTIwNWY4NTQzOTBkZjFkMjFhYTA1ZTVkMGRlMjY0YjFiOTUzYzY1OWExMGMxODQ3OGNmZDdmNzU1ZWZkXCIsXCI5OFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8yODRjMDBiNWZmMTE4OWQyYmRkZjY3ZGY0MDhlZGM0ZV8wMWMxOTE3YTI0NGZjYWRmMGJmZDM5MzNhZjIxYzY4NGRkOTBjYTI3NDExMTI0ODIxMjAyNTM2MWQ4NTVhYjM5XCIsXCI5OVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8zNzQ4M2ZmZTM2NzI1ZTA1YWYwOTU0YTVkOWE1NWEyNl9kYWYwYTJmMGUxMGM5OGMyYjcyYmU5YzBkYTI0YjM4MzIyZjBmOTU2NzMzYTQyNTY1MzY1ZWU2MTU1NjhiYTA3XCIsXCIxMDBcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYzZiMDM1MzFmZWQ0NGY5NmFjZWNhYjI2ODI4ZmJlMzdfMzAzOTNiNmZhMzA5NmE3NGJmYTUxY2FkMWNiNThmNzY2MDg0ODI2M2YwMWYyZjdkMmUxMmRhZTNhNWIxYzNlZFwiLFwiMTAxXCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcLzVkYzkzNDVlZTYwOTJjYTAwNmY3NzdiNDJiMzRlODUzX2RmMTNhZDdjNjE0MDdkMWEwMGUyNjFmY2Q1ZmNkOTNjMTZlMWEwYzFiZTEzZDA5MDNkNzZhMjFhODljZDM0NTlcIixcIjEwMlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8xZGJlZjk4NDA5MzhkNWUzMDU2M2MzZjg0NGI5ZWJhY18xMmZlMTBkZjY2YTZlZTQ4YmZmZTcyNTc4YTZmNDJkMzQwZmYwYjRmNzVkNGZlNjVmNmJlZDJiNzU4NDFlOTc4XCIsXCIxMDNcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYzNhZjI5MmE5MTYzMzllNmM1N2JhMGQwMzcxMmE0NDVfMjczYzM4YmU0MjIyNjlhNDY0NjZkNDg0OTRjNTEzZGFmNTNiM2E2NjQ0MGI2NDAxYzk0YzM3ZjFlNTUwNzBjMlwiLFwiMTA0XCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcL2I0NGRlZDBiMDkwMDk3NTI4YWYyYzRhZDY5NGMyYTQwXzNmNWVkNTZjNjYyZGE4OWUxZTBmM2FlNjJhNjdmOWUxNGVhMjM4NGYyOTg1Mjc3YjFjZGZhNmViZmUxZDE4YzlcIixcIjEwNVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kZjhlYTg2OTA2ZGUzMDdjNTJjYjljZjNiMjIyODA0M18zMTJiZGJkOTUzNmVjMzZlNDJkODMyOGRlZjhhZjFhZmNhYWYzZjcwNTkxN2E2MjhlYTRhZGQwMGJhNzdiOGI1XCIsXCIxMDZcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNjg0NmY2MWQ2YmZjZjc3YWVjZDcyMDZjNmFkYjViZTlfNjRlMTQ5MjQ3ZTUyZTg2YjY3MWZkZDJiNzFhYzI3ODUyZDU0YWU2ZWI2ZjQwNTk0NThiZGIxMTYxZjMwMGRhY1wiLFwiMTA3XCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcL2VmNGExNzY1OTExNDUzZGNhZThlNGJkZDVkMzIwM2ExXzMyMWNmM2JjODcxMGE2YTE5NTc2ZGZlOTM2NzdkZWY0NjY2ZGEwYjQ3NDQ0ODljMjZhYTQ0Zjc1YTc1MzMzM2VcIixcIjEwOFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kYzM4MWY5ZTBiNjE5M2U4YmU1ZDk0NTk1ZWQxYzRiN19kNjEyYWZkZTdiYWY0M2FjNWRhZWFlOWUwZWZlNDI3ODE4NjdiYzM0NTFlM2U4ODE0MjUzY2JmYzQ0MTBiYjRhXCIsXCIxMDlcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvOTU3OWQ1ZGQ4NTIzYzQ5M2UwNTkwZTM4ODFlMjUwNDFfMTA2YzM5YjdlOTdmZGQ1N2FiYjk5MmVjN2ZmN2MwZjBiMTVmMGY4M2EzNDhlM2EzNjk4ZTNmY2JkY2RmMjgzNlwiLFwiMTEwXCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcLzk1Y2ZkYTBjYjdiZmFhYzBmYzc4OWNmMDVjN2U1MTNlX2E1MDkwNDlhZWEwMjg4NmViNDA5YzUzYTE1ZTAzYTZjZjVlYjY1ODMxMjAyNjdiYmNhNzVjMjIwNjAyN2MwYjFcIixcIjExMVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC82ZTA1ZGFhYWI5YTgxYTJlYTUzNDhiNzA4MzNiZGZiNl8wMjNlYjFlOTQ3Njg2YWVmNzc2NGEzY2U0Yzk2ODNiNDdkMjIzNWM1MWEwMzFlMzZiOTQ3ZTQzOThlZjY5MDZkXCIsXCIxMTJcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZDI5ZDRmY2IxYjI1YTlkNDI0YTEyODAwODY5YTNiNjVfOTkxZDU2Mzg4MGEzMzQ1MDczZWJiNGNjM2NkNTc3NzhlZjVjZmJjM2FlNjI1Y2VmZWMyZmZjM2I2OTBhNWFhNVwiLFwiMTEzXCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcLzk4Mzc2NGNiNTA3NWVlZGJkOTZlYzAzNGRmMTM3NGExX2E5NGY1YTFmMGM5YjQ1YjkwODIwNDRlYmU3Mjc3NGIwMzEzYTU4ZTVhMmY1OGQwMGE2MzgyN2FkN2Q0OGJiNjJcIixcIjExNFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC85YWJhZmVkN2E5MTlmZTU0MDQ2YWJlNDU4YTZiMzE0MF80MDAzYzUyMjYwODNiN2JlYjdiNTkwMWM3OTAyN2UzODMzYmUwYWVjNzhkYTlhYTNmYzA1ZjAyOTNmNWJiNDNlXCIsXCIxMTVcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNDI2OGEyMzFlMzRjNzhhODA3YmQ1MWM3ZDVlMTA2NGVfYTkwNDljZmQ5Y2JiYjI1MDQ3NGMxMzY0NzEwZGNkMjc2ZTE4OTYyOTdiMmRlZTM3YjZmZmFkOTZhODgyYmRhOVwiLFwiMTE2XCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcL2I4MGJlNTRiZjBmYmI0M2ViZDhhMjBkY2E0ZDhmNmYwXzU0NGQ1YTM0ZTFkOTU5ZTRlNzc5NGM1ODUwM2IzNDc4ZGUzM2ViNGVmMjFlOGI3NDgzOWI5NTBhZGRhN2RlZGRcIixcIjExN1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC80Y2UyODM3MWRlNjVhMjJhMjQxZGVlMjgxMjhkZGE0ZF8wZGFlYzZkZmZlNmJkNzI2ZjMwMzFkNTFhMzk3MjhjNGY4OGY0ODQ4MmViYmFlNmMwNWY3NThjYTI0ZGQwODkwXCIsXCIxMThcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYzU1Mjg0YjgwOThjYmFhOWExZGIwOGNiZGY0NmJhZThfNmJhYTdhY2VmYjAzOGFjYmIyZmVkYmZkY2U1NTY3NjZjNDgzNDljNWQxMzM3NDM0N2EyNmJkODNlMmFjZjI4M1wiLFwiMTE5XCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcL2RkNzdjZjQyZjY5MGU4MDhiYjlkODEzMWI3Y2VjNDhiXzBiMzcxMzcxNmQxMTI3YjM2ZWIzMzU3Mzc3NzhjY2EzZDRiN2I0NzZhOTlhNTcxYTExZGMxMThlNzE0NjNkMmJcIixcIjEyMFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9jNjU3ZTNmMjVhYjlhZTg1YTk5ZTQyMTIzMWE2YzZhOF8wNmRlYjgxY2ZlYzcwZGJkMTRkYTZiYjY0NzFiOGVlNGJjYzE0MmVlMDhiNjA3MTRhZjlmOTE2ODNiNDYxZTZhXCIsXCIxMjFcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvY2Q0ZmM0MjY3MDdkNjNlNGQ5YjhiYzkyMDVkZWEzZmNfY2I2NDhmZmU3MGVjMDk0MmJlODBmMjk0YTFhMDdjNWU2NDk1ODU3MDI2NWI3MGNmZDg0ZGE3ODA3Mjg3N2ZlN1wifVxufVxuIiwiLyogbW91c2V0cmFwIHYxLjQuNiBjcmFpZy5pcy9raWxsaW5nL21pY2UgKi9cbihmdW5jdGlvbihKLHIsZil7ZnVuY3Rpb24gcyhhLGIsZCl7YS5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihiLGQsITEpOmEuYXR0YWNoRXZlbnQoXCJvblwiK2IsZCl9ZnVuY3Rpb24gQShhKXtpZihcImtleXByZXNzXCI9PWEudHlwZSl7dmFyIGI9U3RyaW5nLmZyb21DaGFyQ29kZShhLndoaWNoKTthLnNoaWZ0S2V5fHwoYj1iLnRvTG93ZXJDYXNlKCkpO3JldHVybiBifXJldHVybiBoW2Eud2hpY2hdP2hbYS53aGljaF06QlthLndoaWNoXT9CW2Eud2hpY2hdOlN0cmluZy5mcm9tQ2hhckNvZGUoYS53aGljaCkudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiB0KGEpe2E9YXx8e307dmFyIGI9ITEsZDtmb3IoZCBpbiBuKWFbZF0/Yj0hMDpuW2RdPTA7Ynx8KHU9ITEpfWZ1bmN0aW9uIEMoYSxiLGQsYyxlLHYpe3ZhciBnLGssZj1bXSxoPWQudHlwZTtpZighbFthXSlyZXR1cm5bXTtcImtleXVwXCI9PWgmJncoYSkmJihiPVthXSk7Zm9yKGc9MDtnPGxbYV0ubGVuZ3RoOysrZylpZihrPVxubFthXVtnXSwhKCFjJiZrLnNlcSYmbltrLnNlcV0hPWsubGV2ZWx8fGghPWsuYWN0aW9ufHwoXCJrZXlwcmVzc1wiIT1ofHxkLm1ldGFLZXl8fGQuY3RybEtleSkmJmIuc29ydCgpLmpvaW4oXCIsXCIpIT09ay5tb2RpZmllcnMuc29ydCgpLmpvaW4oXCIsXCIpKSl7dmFyIG09YyYmay5zZXE9PWMmJmsubGV2ZWw9PXY7KCFjJiZrLmNvbWJvPT1lfHxtKSYmbFthXS5zcGxpY2UoZywxKTtmLnB1c2goayl9cmV0dXJuIGZ9ZnVuY3Rpb24gSyhhKXt2YXIgYj1bXTthLnNoaWZ0S2V5JiZiLnB1c2goXCJzaGlmdFwiKTthLmFsdEtleSYmYi5wdXNoKFwiYWx0XCIpO2EuY3RybEtleSYmYi5wdXNoKFwiY3RybFwiKTthLm1ldGFLZXkmJmIucHVzaChcIm1ldGFcIik7cmV0dXJuIGJ9ZnVuY3Rpb24geChhLGIsZCxjKXttLnN0b3BDYWxsYmFjayhiLGIudGFyZ2V0fHxiLnNyY0VsZW1lbnQsZCxjKXx8ITEhPT1hKGIsZCl8fChiLnByZXZlbnREZWZhdWx0P2IucHJldmVudERlZmF1bHQoKTpiLnJldHVyblZhbHVlPSExLGIuc3RvcFByb3BhZ2F0aW9uP1xuYi5zdG9wUHJvcGFnYXRpb24oKTpiLmNhbmNlbEJ1YmJsZT0hMCl9ZnVuY3Rpb24geShhKXtcIm51bWJlclwiIT09dHlwZW9mIGEud2hpY2gmJihhLndoaWNoPWEua2V5Q29kZSk7dmFyIGI9QShhKTtiJiYoXCJrZXl1cFwiPT1hLnR5cGUmJno9PT1iP3o9ITE6bS5oYW5kbGVLZXkoYixLKGEpLGEpKX1mdW5jdGlvbiB3KGEpe3JldHVyblwic2hpZnRcIj09YXx8XCJjdHJsXCI9PWF8fFwiYWx0XCI9PWF8fFwibWV0YVwiPT1hfWZ1bmN0aW9uIEwoYSxiLGQsYyl7ZnVuY3Rpb24gZShiKXtyZXR1cm4gZnVuY3Rpb24oKXt1PWI7KytuW2FdO2NsZWFyVGltZW91dChEKTtEPXNldFRpbWVvdXQodCwxRTMpfX1mdW5jdGlvbiB2KGIpe3goZCxiLGEpO1wia2V5dXBcIiE9PWMmJih6PUEoYikpO3NldFRpbWVvdXQodCwxMCl9Zm9yKHZhciBnPW5bYV09MDtnPGIubGVuZ3RoOysrZyl7dmFyIGY9ZysxPT09Yi5sZW5ndGg/djplKGN8fEUoYltnKzFdKS5hY3Rpb24pO0YoYltnXSxmLGMsYSxnKX19ZnVuY3Rpb24gRShhLGIpe3ZhciBkLFxuYyxlLGY9W107ZD1cIitcIj09PWE/W1wiK1wiXTphLnNwbGl0KFwiK1wiKTtmb3IoZT0wO2U8ZC5sZW5ndGg7KytlKWM9ZFtlXSxHW2NdJiYoYz1HW2NdKSxiJiZcImtleXByZXNzXCIhPWImJkhbY10mJihjPUhbY10sZi5wdXNoKFwic2hpZnRcIikpLHcoYykmJmYucHVzaChjKTtkPWM7ZT1iO2lmKCFlKXtpZighcCl7cD17fTtmb3IodmFyIGcgaW4gaCk5NTxnJiYxMTI+Z3x8aC5oYXNPd25Qcm9wZXJ0eShnKSYmKHBbaFtnXV09Zyl9ZT1wW2RdP1wia2V5ZG93blwiOlwia2V5cHJlc3NcIn1cImtleXByZXNzXCI9PWUmJmYubGVuZ3RoJiYoZT1cImtleWRvd25cIik7cmV0dXJue2tleTpjLG1vZGlmaWVyczpmLGFjdGlvbjplfX1mdW5jdGlvbiBGKGEsYixkLGMsZSl7cVthK1wiOlwiK2RdPWI7YT1hLnJlcGxhY2UoL1xccysvZyxcIiBcIik7dmFyIGY9YS5zcGxpdChcIiBcIik7MTxmLmxlbmd0aD9MKGEsZixiLGQpOihkPUUoYSxkKSxsW2Qua2V5XT1sW2Qua2V5XXx8W10sQyhkLmtleSxkLm1vZGlmaWVycyx7dHlwZTpkLmFjdGlvbn0sXG5jLGEsZSksbFtkLmtleV1bYz9cInVuc2hpZnRcIjpcInB1c2hcIl0oe2NhbGxiYWNrOmIsbW9kaWZpZXJzOmQubW9kaWZpZXJzLGFjdGlvbjpkLmFjdGlvbixzZXE6YyxsZXZlbDplLGNvbWJvOmF9KSl9dmFyIGg9ezg6XCJiYWNrc3BhY2VcIiw5OlwidGFiXCIsMTM6XCJlbnRlclwiLDE2Olwic2hpZnRcIiwxNzpcImN0cmxcIiwxODpcImFsdFwiLDIwOlwiY2Fwc2xvY2tcIiwyNzpcImVzY1wiLDMyOlwic3BhY2VcIiwzMzpcInBhZ2V1cFwiLDM0OlwicGFnZWRvd25cIiwzNTpcImVuZFwiLDM2OlwiaG9tZVwiLDM3OlwibGVmdFwiLDM4OlwidXBcIiwzOTpcInJpZ2h0XCIsNDA6XCJkb3duXCIsNDU6XCJpbnNcIiw0NjpcImRlbFwiLDkxOlwibWV0YVwiLDkzOlwibWV0YVwiLDIyNDpcIm1ldGFcIn0sQj17MTA2OlwiKlwiLDEwNzpcIitcIiwxMDk6XCItXCIsMTEwOlwiLlwiLDExMTpcIi9cIiwxODY6XCI7XCIsMTg3OlwiPVwiLDE4ODpcIixcIiwxODk6XCItXCIsMTkwOlwiLlwiLDE5MTpcIi9cIiwxOTI6XCJgXCIsMjE5OlwiW1wiLDIyMDpcIlxcXFxcIiwyMjE6XCJdXCIsMjIyOlwiJ1wifSxIPXtcIn5cIjpcImBcIixcIiFcIjpcIjFcIixcblwiQFwiOlwiMlwiLFwiI1wiOlwiM1wiLCQ6XCI0XCIsXCIlXCI6XCI1XCIsXCJeXCI6XCI2XCIsXCImXCI6XCI3XCIsXCIqXCI6XCI4XCIsXCIoXCI6XCI5XCIsXCIpXCI6XCIwXCIsXzpcIi1cIixcIitcIjpcIj1cIixcIjpcIjpcIjtcIiwnXCInOlwiJ1wiLFwiPFwiOlwiLFwiLFwiPlwiOlwiLlwiLFwiP1wiOlwiL1wiLFwifFwiOlwiXFxcXFwifSxHPXtvcHRpb246XCJhbHRcIixjb21tYW5kOlwibWV0YVwiLFwicmV0dXJuXCI6XCJlbnRlclwiLGVzY2FwZTpcImVzY1wiLG1vZDovTWFjfGlQb2R8aVBob25lfGlQYWQvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKT9cIm1ldGFcIjpcImN0cmxcIn0scCxsPXt9LHE9e30sbj17fSxELHo9ITEsST0hMSx1PSExO2ZvcihmPTE7MjA+ZjsrK2YpaFsxMTErZl09XCJmXCIrZjtmb3IoZj0wOzk+PWY7KytmKWhbZis5Nl09ZjtzKHIsXCJrZXlwcmVzc1wiLHkpO3MocixcImtleWRvd25cIix5KTtzKHIsXCJrZXl1cFwiLHkpO3ZhciBtPXtiaW5kOmZ1bmN0aW9uKGEsYixkKXthPWEgaW5zdGFuY2VvZiBBcnJheT9hOlthXTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoOysrYylGKGFbY10sYixkKTtyZXR1cm4gdGhpc30sXG51bmJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbS5iaW5kKGEsZnVuY3Rpb24oKXt9LGIpfSx0cmlnZ2VyOmZ1bmN0aW9uKGEsYil7aWYocVthK1wiOlwiK2JdKXFbYStcIjpcIitiXSh7fSxhKTtyZXR1cm4gdGhpc30scmVzZXQ6ZnVuY3Rpb24oKXtsPXt9O3E9e307cmV0dXJuIHRoaXN9LHN0b3BDYWxsYmFjazpmdW5jdGlvbihhLGIpe3JldHVybi0xPChcIiBcIitiLmNsYXNzTmFtZStcIiBcIikuaW5kZXhPZihcIiBtb3VzZXRyYXAgXCIpPyExOlwiSU5QVVRcIj09Yi50YWdOYW1lfHxcIlNFTEVDVFwiPT1iLnRhZ05hbWV8fFwiVEVYVEFSRUFcIj09Yi50YWdOYW1lfHxiLmlzQ29udGVudEVkaXRhYmxlfSxoYW5kbGVLZXk6ZnVuY3Rpb24oYSxiLGQpe3ZhciBjPUMoYSxiLGQpLGU7Yj17fTt2YXIgZj0wLGc9ITE7Zm9yKGU9MDtlPGMubGVuZ3RoOysrZSljW2VdLnNlcSYmKGY9TWF0aC5tYXgoZixjW2VdLmxldmVsKSk7Zm9yKGU9MDtlPGMubGVuZ3RoOysrZSljW2VdLnNlcT9jW2VdLmxldmVsPT1mJiYoZz0hMCxcbmJbY1tlXS5zZXFdPTEseChjW2VdLmNhbGxiYWNrLGQsY1tlXS5jb21ibyxjW2VdLnNlcSkpOmd8fHgoY1tlXS5jYWxsYmFjayxkLGNbZV0uY29tYm8pO2M9XCJrZXlwcmVzc1wiPT1kLnR5cGUmJkk7ZC50eXBlIT11fHx3KGEpfHxjfHx0KGIpO0k9ZyYmXCJrZXlkb3duXCI9PWQudHlwZX19O0ouTW91c2V0cmFwPW07XCJmdW5jdGlvblwiPT09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKG0pfSkod2luZG93LGRvY3VtZW50KTtcbiJdfQ==
