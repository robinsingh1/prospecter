(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
   //Analytics
  render: function () {
    return (
      React.DOM.div({style: {height:'400px'}, className: ""}, 
        React.DOM.div({className: "container", style: {width:'100%',padding:'0',height:'100%'}}, 
          AnalyticsSideMenu(null), 
          React.DOM.div({className: "col-md-3", style: {padding:'0'}}, 
            React.DOM.table({className: "table table-striped"}, 
              React.DOM.thead(null, 
                React.DOM.th(null, "Stat"), 
                React.DOM.th(null, "#")
              ), 
              React.DOM.tbody(null, 
                React.DOM.tr(null, React.DOM.td(null, "# of People Prospected"), React.DOM.td(null, "lil")), 
                React.DOM.tr(null, React.DOM.td(null, "# of Companies Prospected"), React.DOM.td(null, "lil")), 
                React.DOM.tr(null, React.DOM.td(null, "# of Emails Sent"), React.DOM.td(null, "lil")), 
                React.DOM.tr(null, React.DOM.td(null, "# of Emails Delivered"), React.DOM.td(null, "lil")), 
                React.DOM.tr(null, React.DOM.td(null, "# of Emails Delivery Failures"), React.DOM.td(null, "lil"))
              )
            )
          )
        )
      )
    );
  }
});

var AnalyticsSideMenu = React.createClass({displayName: 'AnalyticsSideMenu',
  render: function() {
    return (
      React.DOM.div({className: "col-md-2", style: {padding:'0',height:'100%',backgroundColor:'rgb(90, 107, 119)',borderBottomLeftRadius:'3px'}}, 
        React.DOM.div({className: "btn-group-vertical", style: {width:'100%'}}, 
          React.DOM.button({type: "button", className: "sharp btn btn-default"}, 
            React.DOM.i({className: "fa fa-search"}), "   Prospecting Overview"
          ), 
          React.DOM.button({type: "button", className: "sharp btn btn-default"}, 
            React.DOM.i({className: "fa fa-paper-plane"}), "   Email Outreach"
          ), 
          React.DOM.button({type: "button", className: "sharp btn btn-default"}, 
            React.DOM.i({className: "fa fa-user"}), "   Team Stats"
          ), 
          React.DOM.button({type: "button", className: "sharp btn btn-default"}, 
            React.DOM.i({className: "fa fa-cloud"}), "   CRM Integration"
          ), 
          React.DOM.button({type: "button", className: "sharp btn btn-default"}, 
            React.DOM.i({className: "fa fa-circle-o"}), "   Sales Cycle"
          )
        )
      )
    );
  }
});

},{}]},{},[1])


},{}],2:[function(require,module,exports){
/** @jsx React.DOM */

/* TODO
 * 
 * - All count change, when prospect is archived
 * - When is list is chaanged from all and then returned to All prospects take a long     time to load
 * - Fix pagination issues
 *
 * - Parallelize Workers
 * - Scale up google scrape to hundreds of workers (heroku)
 *
 * - Company Shortcuts 
 * - Add ability to switch accounts for admins
 * - Add email uneditable email fields
 */

var Prospects = require('./prospects.js.min.js');
var DataTable = require('./prospects.js.min.js');
var MiningJob = require('./mining_job.js.min.js');
var Campaigns = require('./email.js.min.js');
var Analytics = require('./analytics.js.min.js');
var SignUp = require('./signup.js.min.js');
var Login = require('./login.js.min.js');
var LandingPage = require('./landing_page.js.min.js');
var LandingPage = require('./landing_page_concept.js.min.js');
var FreeTrial = require('./free_trial.js.min.js');
var Pricing = require('./pricing.js.min.js');
var Signals = require('./signals.js.min.js');
var MouseTrap = require('../lib/mousetrap.min.min.js')
var Headhesive = require('../lib/headhesive.min.js')
var UpgradePlanModal = require('./upgrade_plan_modal.js.min.js')
var LandingPageFeatures = require('./landing_page_features.js.min.js')
var LandingPageServices = require('./landing_page_services.js.min.js')
//var checkAuth = require('./auth.min.js')

var Home = React.createClass({displayName: 'Home',
  getInitialState: function() {
    // num_of_pages
    console.log(this.props)
    return {prospects: [] , 
            currentPage: 1, 
            pages: 1, 
            count:"~", 
            prospectType:'Prospect', 
            //selectedScreen:'Prospects'}
            currentUser: JSON.parse(localStorage.currentUser),
            selectedScreen: this.props.selectedScreen}
  },

  componentDidUpdate: function() {
    currentUser = JSON.parse(localStorage.currentUser)
    days = moment().diff(moment(currentUser.createdAt),'days')
    if(days > 14 && currentUser.accountType == 'trial') {
      $('#upgradePlanModal').modal( {
        backdrop: 'static',
        keyboard: false
      })
    }
  },

  componentWillMount: function(){
    //console.debug('WILL MOUNT')
    checkAuth()
    var thiss = this;
    //console.debug(this.state.currentUser)
    $.ajax({
      url:'https://api.parse.com/1/classes/_User/'+thiss.state.currentUser.objectId,
      headers: appConfig.headers,
      success: function(res) {
        //console.debug('LOL')
        // Number of Prospects for user
        // Number of Lists
        // Number of Emails found
        localStorage.currentUser = JSON.stringify(res)
        console.log(res)
        Intercom('boot', {
          app_id: 'd37c2de5ffe27d69b877645351490517333437bf',
          email: res.email,
          created_at: 1234567890,
          name: 'John Doe',
          user_id: 'lol'
        });
      },
      error: function(err) {
        console.debug('error')
      }
    });
    // Intercom
    // Mixpanel
  },


  toggleScreen: function(e) {
    e.preventDefault()
    this.setState({selectedScreen : $(e.target).text().trim()})
  },

  logout: function() {
    localStorage.clear()
    location.href = "#get_started"
  },

  listDropdown: function() {
    console.log('dropdown')
    //$('.dropdown-menu').dropdown()
    $('.prospect-list-select').css('border-bottom-right-radius','0px')
    $('.prospect-list-select').css('border-bottom-left-radius','0px')
      
    $('.list-select-dropdown').css('border-top-left-radius','0px')
    $('.list-select-dropdown').css('border-top-right-radius','0px')
  },

  selectChange : function() {

  },

  stripeCheckout: function() {
    /*
    handler.open({
      name: 'Customero',
      description: 'Get 900 free email credits!',
      amount: 0,
      panelLabel: "Start Your Free Trial!",
      opened: function() {

      },
      closed: function() {
        console.log("closed")
        //location.reload()
      }
    });
    */
  },

  componentDidMount: function() {
    // Credit Card Verified Check
    localStorage.selectedProspects = "[]"
    currentUser = JSON.parse(localStorage.currentUser)
    if(!currentUser.creditCardVerified)
      this.stripeCheckout()
    //console.debug('DID MOUNT')
    currentUser = JSON.parse(localStorage.currentUser)
    days = moment().diff(moment(currentUser.createdAt),'days')
    if(days > 14 && currentUser.accountType == 'trial') {
      $('#upgradePlanModal').modal( {
        backdrop: 'static',
        keyboard: false
      })
    }
  },

  render: function() {
    //console.debug('APP RENDER')
    prospects = "choose btn btn-primary "
    companyProspects = "choose btn btn-primary "
    campaigns = "choose btn btn-primary "
    signals = "choose btn btn-primary "

    switch (this.state.selectedScreen) {
      case 'Prospects':
        currentScreen = Prospects({listClassName: 'ProspectList', 
                                   className: 'Prospect'}
                                   )
        //currentScreen = <Prospects><ProspectRow /></Prospects>
        prospects = "choose btn btn-primary app-active"
        location.href= "#prospects"
        break;
      case 'Companies':
        currentScreen = Prospects({listClassName: 'CompanyProspectList', 
                                   className: 'CompanyProspect'}
                        )
                                    // paginationLimit
                                    // Add Lists
                                    // Adding Customizable Rows
                                    // Make Editable For NoSQL DataBases
        location.href= "#companies"
        companyProspects = "choose btn btn-primary app-active"
        break;
      case 'Mining Jobs':
        currentScreen = MiningJob(null)
        break;
      case 'Analytics':
        currentScreen = Analytics(null)
        break;
      case 'Campaigns':
        currentScreen = Campaigns(null)
        campaigns = "choose btn btn-primary app-active"
        location.href= "#campaigns"
        break;
      case 'Signals':
        currentScreen = Signals(null)
        signals = "choose btn btn-primary app-active"
        location.href= "#signals"
        break;
      case 'Strategies':
        currentScreen = Signals(null)
        signals = "choose btn btn-primary app-active"
        location.href= "#strategies"
        break;
      case 'Settings':
        currentScreen = Settings(null)
        break;
    }

    if(this.state.currentUser.accountType != "Staff"){
      signals = "dissappear"
      campaigns = "dissappear"
      if(companyProspects == "choose btn btn-primary app-active") {
        companyProspects = "choose btn btn-primary app-active right-btn-rounded"
      } else {
        companyProspects = "choose btn btn-primary right-btn-rounded"
      }
      if(prospects == "choose btn btn-primary app-active") {
        prospects = "choose btn btn-primary app-active left-btn-rounded"
      } else {
        prospects = "choose btn btn-primary left-btn-rounded"
      }
    }
      
    currentUser = JSON.parse(localStorage.currentUser)
    daysLeft = moment().diff(moment(currentUser.createdAt),'days')
    daysLeft = (daysLeft > 14) ? "" : (14 - daysLeft)+" days left. "

    if(currentUser.accountType != "trial")
      upgradeBtn = React.DOM.a({href: "javascript:", 
            style: {marginTop:0, marginRight:10,
                    backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)' , backgroundImage: 'linear-gradient(#8add6d, #60b044)'}, 
            className: "btn btn-success btn-xs", 
            onClick: this.upgradePlanModal}, 
            daysLeft+"Upgrade Today!"
          )
    else
      upgradeBtn = ""
    return (
      React.DOM.div(null, 
      React.DOM.br(null), 
      React.DOM.br(null), 
      React.DOM.div({className: "container"}, 
        React.DOM.h1({style: {fontWeight:'bold',display:'inline',fontWeight:'100',color:'#1ca3fd'}}, 
          React.DOM.img({src: "build/img/network.png", 
            style: { height:32,
              marginRight:5, }}
          ), 
          React.DOM.span({style: {fontWeight:'bold',fontSize:32,fontFamily:'Proxima-Nova'}}, "Customero",  
            React.DOM.h6({className: "beta-label"}, "BETA")
          ), 

          upgradeBtn
        ), 
      React.DOM.span({style: {float:'right',display:'none'}}, 
        React.DOM.img({src: "build/img/user.png", style: {height:'40px',width:'40px',padding:'2px',marginTop:'5px',borderRadius:'23px',display:'inline'}, className: "thumbnail"}), "   ",  
        React.DOM.h6({style: {marginTop:'20px',float:'right',display:'inline'}}, "Welcome ")
      ), 
      React.DOM.span({style: {float:'right', marginRight:'0px'}}, 
        React.DOM.h6({style: {marginTop:'20px',float:'right',display:'none',marginRight:'10px'}}, React.DOM.a({href: "#pricing", style: {color:'#1ca3fd'}}, "Pricing")), 
          React.DOM.a({href: "javascript:", 
            style: {marginTop:15, float:'right',marginRight:10,
                    backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)' , backgroundImage: 'linear-gradient(#8add6d, #60b044)'}, 
            className: "btn btn-success btn-xs", 
            onClick: this.downloadSocialProspecter}, 
            React.DOM.i({className: "fa fa-download"}), "  " + ' ' +
            "Download Chrome Social Prospecter"
          ), 
        React.DOM.h6({style: {marginTop:'20px',float:'right',display:'inline', marginRight:10}}, React.DOM.a({href: "javascript:", onClick: this.logout, style: {color:'#1ca3fd'}}, 
            React.DOM.i({className: "fa fa-sign-out"}), 
            "Logout")), 
          React.DOM.h6({style: {marginTop:'20px',float:'right',display:'inline', marginRight:'10px'}}, " ", React.DOM.a({href: "http://resources.customerohq.com/v1.0/discuss", style: {color:'#1ca3fd'}}, 

              React.DOM.i({className: "fa fa-question-circle"}), 
              React.DOM.span({style: {paddingLeft:2}}, 'Support')
        ), " "), 
        React.DOM.h6({style: {marginTop:'20px',float:'right',display:'inline', marginRight:'10px'}}, 
          React.DOM.a({href: "http://resources.customerohq.com/v1.0/docs", style: {color:'#1ca3fd'}}, 
              React.DOM.i({className: "fa fa-book"}), 
              React.DOM.span({style: {paddingLeft:2}}, "Resources")
          ), " "), 
          React.DOM.h6({style: {marginTop:'20px',float:'right',display:'inline', marginRight:'20px',display:'none'}}, 
            React.DOM.a({href: "javascript:", style: {color:'#1ca3fd'}}, 
              React.DOM.i({className: "fa fa-bell"}), 
              React.DOM.span({style: {paddingLeft:2}}, "Notifications "), 
              React.DOM.div({className: "label notification-badge"}, "0")
          )), 
          React.DOM.h6({style: {marginTop:'20px',float:'right',display:'inline', marginRight:'20px',display:'none'}}, 
            React.DOM.a({href: "javascript:", style: {color:'#1ca3fd'}}, 
              React.DOM.i({className: "fa fa-cloud-download"}), 
              React.DOM.span({style: {paddingLeft:2}}, "Mining Jobs "), 
              React.DOM.div({className: "label notification-badge"}, "0")
          ))

      ), 
      React.DOM.br(null), 
      React.DOM.br(null), 
        React.DOM.div({className: "panel panel-default"}, 
        React.DOM.div({id: "navbar", className: "panel-heading"}, 

          React.DOM.div({className: "btn-group col-md-offset-4"}, 
            React.DOM.a({href: "javascript:", className: signals, style: {display:'block'}, onClick: this.toggleScreen}, 
                React.DOM.i({className: "fa fa-line-chart"}), " Strategies"
            ), 
            React.DOM.a({href: "javascript:", className: prospects, onClick: this.toggleScreen}, 
                React.DOM.i({className: "fa fa-user"}), " Prospects"
            ), 
            React.DOM.a({href: "javascript:", className: "choose btn btn-primary", style: {display:'none'}, onClick: this.toggleScreen}, 
                React.DOM.i({className: "fa fa-bar-chart-o"}), " Analytics"
            ), 
            React.DOM.a({href: "javascript:", className: "choose btn btn-primary", 
                  style: {width:162,display:'none'}, 
                  onClick: this.toggleScreen}, 
                React.DOM.i({className: "fa fa-tasks"}), " Mining Jobs  ", 
                React.DOM.span({className: "label label-default"}, "BETA")
            ), 
            React.DOM.a({href: "javascript:", className: companyProspects, onClick: this.toggleScreen}, 
                React.DOM.i({className: "fa fa-building"}), " Companies"
            ), 
            React.DOM.a({href: "javascript:", className: campaigns, style: {display:'block'}, onClick: this.toggleScreen}, 
                React.DOM.i({className: "fa fa-envelope"}), " Campaigns"
            )
          )
        ), 

          currentScreen

        )
      ), 
      UpgradePlanModal(null)
      )
    );
  },

  upgradePlanModal: function() {
    $('#upgradePlanModal').modal()
  },
  
  downloadSocialProspecter: function() {
    window.open('https://chrome.google.com/webstore/detail/customero-prospecter/ofcalkjbogaiipekcocdefjenclioeci')
  },

  deleteProspect: function(objectId, endpoint) {
    var filtered = _.filter(this.state.prospects, function(item) {
       return item.objectId != objectId
    });
    this.setState({prospects: filtered})

    $.ajax({
      url:'https://api.parse.com/1/classes/'+endpoint+'/'+objectId,
      type:'DELETE',
      headers: parse_headers,
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
      }
    });
  }
});

var Workspace = Backbone.Router.extend({
  routes: {
    //landing_page
    "product/features"    : "features",
    "services"            : "services",
    
    // App
    ""            : "prospects",
    "get_started" : "landing_page",
    "free_trial"  : "free_trial",
    "signup"      : "signup",
    "login"       : "login",
    "pricing"     : "pricing",
    
    "signals"     : "signals",
    "strategies"  : "strategies",
    "prospects"   : "prospects",
    "companies"   : "companies",
    "campaigns"   : "campaigns",

    "prospects/p:page"       : "prospects",
    "prospects/list/:list"   : "prospects_list",

    "companies/p:page"       : "companies",
    "companies/list/:list"   : "companies_list",

    "signals/profile/:profile"  : "signals_profile",
    "signals/calendar/:profile" : "signals_calendar",

    "campaigns/followup_feed"      : "campaigns",
    "campaigns/sent_emails"         : "campaigns",
    "campaigns/template/:template" : "campaigns",
  },

  mainRoute: function(route) {
    console.log(route)
    currentUser = localStorage.getItem('currentUser')
    $('#content').html('')
    if (currentUser) 
      React.renderComponent(Home({selectedScreen: route}), 
                            document.getElementById('content'));
    else
      location.href = "#get_started"
  },

  signals  : function() { this.mainRoute('Signals') },
  strategies  : function() { this.mainRoute('Strategies') },
  prospects: function() { this.mainRoute('Prospects') },
  companies: function() { this.mainRoute('Companies') },
  campaigns: function() { this.mainRoute('Campaigns') },

  home: function() {
    currentUser = localStorage.getItem('currentUser')
    if (currentUser) 
      React.renderComponent(Home({selectedScreen: "Prospects"}), 
                            document.getElementById('content'));
    else
      location.href = "#get_started"
  },
  landing_page: function() {
    React.renderComponent(LandingPage(), document.getElementById('content'));
  },
  features: function() {
    React.renderComponent(LandingPageFeatures(), document.getElementById('content'));
  },
  services: function() {
    React.renderComponent(LandingPageServices(), document.getElementById('content'));
  },
  free_trial: function() {
    React.renderComponent(FreeTrial(), document.getElementById('content'));
  },
  signup: function() {
    React.renderComponent(SignUp(), document.getElementById('content'));
  },
  login: function() {
    React.renderComponent(Login(), document.getElementById('content'));
  },
  pricing: function() {
    React.renderComponent(Pricing(), document.getElementById('content'));
  }
});

$(document).ready(function(){
  checkAuth()
  var workspace = new Workspace;
  Backbone.history.start();
  // Add to linkedin
  // Add To Base
});

},{"../lib/headhesive.min.js":68,"../lib/mousetrap.min.min.js":69,"./analytics.js.min.js":1,"./email.js.min.js":23,"./free_trial.js.min.js":26,"./landing_page.js.min.js":28,"./landing_page_concept.js.min.js":29,"./landing_page_features.js.min.js":30,"./landing_page_services.js.min.js":31,"./login.js.min.js":33,"./mining_job.js.min.js":36,"./pricing.js.min.js":42,"./prospects.js.min.js":43,"./signals.js.min.js":55,"./signup.js.min.js":56,"./upgrade_plan_modal.js.min.js":63}],3:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // FollowupFeed
  getInitialState: function() {
    return {
      activities: []
    }
  },

  componentDidMount: function() {
    var thiss = this;
    $.ajax({
      url: 'https://api.parse.com/1/classes/EmailEvent',
      data: {include: 'prospect,sent_email', order:'-createdAt', limit:1000},
      headers: appConfig.headers,
      success: function(res) { 
        console.log(res.results)
        thiss.setState({activities: res.results}) 
      },
      error: function() {}
    })
  },

  render: function() {
    activities = _.map(this.state.activities, function(activity) {
      return EmailActivities({activity: activity})
    })

    return (
      React.DOM.div({style: {overflow:'auto',height:417}}, 
        React.DOM.table({className: "table", style: {marginBottom:0}}, 
          React.DOM.thead(null, 
            React.DOM.th(null), 
            React.DOM.th(null, "Sent "), 
            React.DOM.th(null, "Prospect "), 
            React.DOM.th(null, "Email "), 
            React.DOM.th(null, "Events "), 
            React.DOM.th({style: {textAlign:'center'}}, "Action Buttons"), 
            React.DOM.th(null, "Social")
          ), 
          React.DOM.tbody(null, 
            activities
          )
        )
      )
    )
  }
})

var Event = React.createClass({displayName: 'Event',
  render: function() {
    event = this.props.event
    if(event == "delivered"){
      iconType = "fa fa-paper-plane"; eventName = "Delivered";
    }else if(event == "failed") {
      iconType = "fa fa-exclamation-circle"; eventName="Failed"
    }else if(event == "opened"){
      iconType = "fa fa-eye"; eventName="Opened"
    }else if(event == "replied"){
      iconType = "fa fa-mail-reply";  eventName = "Replied"
    }else if(event == "visited"){
      iconType = "fa fa-home";  eventName="Visited"
    }

    return (
      React.DOM.ul({className: "list-group email-events", style: {marginBottom:0}}, 
        React.DOM.li({className: "list-group-item list-group-item-info", style: {paddingTop:16, height:49,textAlign:'center'}}, 
          React.DOM.i({className: iconType}), " ", React.DOM.span({style: {fontWeight:'bold'}}, eventName), " "
        ), 
        React.DOM.li({className: "list-group-item list-group-item-info", style: {display:'none'}}, 
          React.DOM.i({className: "fa fa-home"}), " ", React.DOM.span({style: {fontWeight:'bold'}}, "Visited"), " ", 
          React.DOM.a({href: "javascript:"}, "customerohq.com/resources"), "  "
        ), 
        React.DOM.li({className: "list-group-item list-group-item-info", style: {display:'none'}}, 
          React.DOM.i({className: "fa fa-external-link-square"}), " ", 
          React.DOM.span(null, "2:19 pm"), " ", 
          React.DOM.span({style: {fontWeight:'bold'}}, "clicked "), 
          React.DOM.a({href: "javascript:"}, "customerohq.com")
        )
      )
    )
  }
})

var EmailActivities = React.createClass({displayName: 'EmailActivities',
  render: function() {
    activity = this.props.activity
    prospect = (activity.prospect) ? activity.prospect : {}
    return (
      React.DOM.tr(null, 
          React.DOM.td(null), 
          React.DOM.td(null, 
            React.DOM.h6(null, 
              React.DOM.i({className: "fa fa-clock"}), " ", 
              moment(activity.createdAt).fromNow()
            )
          ), 
          React.DOM.td(null, React.DOM.h6(null, prospect.name)), 
          React.DOM.td(null, React.DOM.h6(null, activity.sent_email.subject)), 
          React.DOM.td({style: {padding:0, fontSize:12}}, 
            Event({event: activity.event_type})
          ), 
          React.DOM.td({style: {textAlign:'center'}}, 
            React.DOM.div({style: {display:'none'}}, 
            React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", style: {width:70,fontWeight:'bold',marginBottom:2}}, "Email"), React.DOM.br(null), 
            React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", style: {width:70,fontWeight:'bold',marginBottom:2}}, React.DOM.i({className: "fa fa-cloud-upload"}), " CRM"), React.DOM.br(null), 
            React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", style: {width:70,fontWeight:'bold',marginBottom:2}}, "Call")
          )
          ), 
          React.DOM.td(null, 
            "lol"
          )
      )
    )
  }
})

},{}],4:[function(require,module,exports){
/** @jsx React.DOM */
var TemplatesMenu = require('./templates_menu.js.min.js');
var EditTemplateView = require('./edit_template.js.min.js');
var CreateTemplateView = require('./create_template.js.min.js');
var Timeline = require('./followup_timeline.js.min.js');
var CampaignActivityView = require('./campaign_activity_view.js.min.js')
var CampaignFollowupFeed = require('./campaign_followup_feed.js.min.js')
var CampaignSentEmail = require('./campaign_sent_email.js.min.js')
var CampaignReport = require('./campaign_report.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  // Campaign Detail
  getInitialState: function() {
    return {
      selectedTemplate: 0,
      templateDetailMode: false,
      editMode: false,
      followupDay: 0,
      templates:[],
      currentTemplate:'',
      prospectListCount:'~',
      prospects:[],
      currentScreen: 'timeline',
      newProspects: [],
      bounced: '~',
      delivered: '~',
      opened: '~',
    }
  },

  changeScreen: function(e) {
    this.setState({currentScreen: $(e.target).text().toLowerCase()})
  },

  componentDidMount: function() {
    thissss = this;
    company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
    qry = 'where={"company":'+company+'}'



    $.ajax({
      url:'https://api.parse.com/1/classes/Template',
      headers: appConfig.headers,
      data: qry,
      success: function(res) { thissss.setState({templates: res.results}) },
      error: function(err) { console.log('error') }
    });

    currentList = JSON.stringify({
      '__type'    : 'Pointer', 
      'className' : 'ProspectList',
      'objectId'  : this.props.selectedCampaign.prospect_list.objectId, 
    })

    qry = 'where={"lists":'+currentList+'}&limit=1000&count=1&include=email_guesses,email_guesses.pattern'
    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospect',
      headers: appConfig.headers,
      data: qry,
      success: function (res) {
        // TODO - why is this being done
        console.log('RESULTS')
        console.log(res)
        console.log(res.results)
        thissss.setState({
          prospects: res.results,
          prospectListCount: res.count 
        })

        if(res.count > 1000){
          for(i=0;i< Math.ceil(res.count/1000); i++) {
            qry = 'where={"lists":'+currentList+'}&limit=1000&count=1'
            $.ajax({
              url: 'https://api.parse.com/1/classes/Prospect',
              headers: appConfig.headers,
              data: qry,
              success: function (res) {
                prospects = thissss.state.prospects
                thissss.setState({prospects:  prospects.concat(res.results)})
              },
              error: function(err) {}
            })
          }
        }
      },
      error: function(err) { }
    })

    var thiss = this;
    selectedCampaign = this.props.selectedCampaign
    console.debug(this.props.selectedCampaign)
    console.debug('Selected Campaign Batches')
    console.debug(this.props.selectedCampaign.batches)
    batches = this.props.selectedCampaign.batches
    if(_.isEqual(batches, [])){ 
      batch_query = { $in: [false, null] }
    } else {
      qry = _.map(batches, function(batch) {
        return appConfig.pointer('ProspectBatch', batch.objectId)
      })
      batch_query = { $nin: qry }
    }
    prospect_list = thiss.props.selectedCampaign.prospect_list.objectId
    // TODO - add support for more than 1000
    $.ajax({
      url:'https://api.parse.com/1/classes/Prospect',
      headers: appConfig.headers,
      selectedCampaign: thiss.props.selectedCampaign,
      data: {
        where: JSON.stringify({
            batches: batch_query,
            lists: appConfig.pointer('ProspectList', prospect_list),
        }), limit:1000
      },
      success: function(res) { thiss.setState({newProspects: res.results}) },
      error: function(err) { console.debug(err.responseText) }
    })
    campaignId = thiss.props.selectedCampaign.objectId
    qry = {
      where: JSON.stringify({campaign: appConfig.pointer('Campaign', campaignId)}),
      limit: 1000,
      count: true
    }
    $.ajax({
      url:'https://api.parse.com/1/classes/SentEmail',
      data: qry,
      headers: appConfig.headers,
      success: function(res) { thiss.setState({delivered: res.count})},
      error: function(err) { console.log(err.responseText) }
    })
    qry_1 = {
      where: JSON.stringify({
        campaign: appConfig.pointer('Campaign', campaignId),
        opened: {"$gte": 0} 
      }),
      count: true
    }
    $.ajax({
      url:'https://api.parse.com/1/classes/SentEmail',
      data: qry_1,
      headers: appConfig.headers,
      success: function(res) { thiss.setState({opened : res.count}) },
      error: function(err) { console.log(err.responseText) }
    })
    qry_2 = {
      where: JSON.stringify({
        campaign: appConfig.pointer('Campaign', campaignId),
        failed: {"$gte": 0} 
      }),
      count: true
    }
    $.ajax({
      url:'https://api.parse.com/1/classes/SentEmail',
      data: qry_2,
      headers: appConfig.headers,
      success: function(res) { thiss.setState({bounced : res.count}) },
      error: function(err) { console.log(err.responseText) }
    })
  },

  returnToOverview: function() {
    this.props.toggleScreen('Campaigns')
  },

  render: function() {
    //console.log('campaign detail')
    console.log(this.state.currentScreen)
    console.log(this.state.currentScreen.indexOf("sent email"))
    tab_1 = "campaign-tab-link"
    tab_2 = "campaign-tab-link"
    tab_3 = "campaign-tab-link"
    tab_4 = "campaign-tab-link"
    tab_5 = "campaign-tab-link"
    if(this.state.currentScreen == "timeline"){
      //console.debug('SELECTED CAMPAIGN')
      //console.debug(this.props.selectedCampaign)
      lolscreen = FollowupTimeline({
                  templates: this.state.templates, 
                  prospects: this.state.prospects, 
                  selectedCampaign: this.props.selectedCampaign, 
                  prospectListCount: this.state.prospectListCount, 
                  newProspects: this.state.newProspects, 
                  toggleTemplateEditMenu: this.toggleTemplateEditMenu, 
                  initialFollowups: this.props.selectedCampaign.followups})
      tab_1 = "active-campaign-tab campaign tab-link"
    } else if(this.state.currentScreen == "recent activity") {
      lolscreen = CampaignActivityView(null)
      tab_2 = "active-campaign-tab campaign tab-link"
    } else if(this.state.currentScreen == "scheduled followups") {
      lolscreen = CampaignFollowupFeed({
                    batches: this.props.selectedCampaign.batches, 
                    followups: this.props.selectedCampaign.followups})
      tab_3 = "active-campaign-tab campaign tab-link"
    } else if(this.state.currentScreen == "sent mail") {
      lolscreen = CampaignSentEmail({
                      selectedCampaign: this.props.selectedCampaign})
      tab_4 = "active-campaign-tab campaign tab-link"
    } else if(this.state.currentScreen == "analytics") {
      lolscreen = CampaignReport(null)
      tab_5 = "active-campaign-tab campaign tab-link"
    } else{
      console.log('LOL')
      lolscreen = FollowupTimeline({
                  templates: this.state.templates, 
                  prospects: this.state.prospects, 
                  selectedCampaign: this.props.selectedCampaign, 
                  prospectListCount: this.state.prospectListCount, 
                  newProspects: this.state.newProspects, 
                  toggleTemplateEditMenu: this.toggleTemplateEditMenu, 
                  templates: this.state.templates, 
                  initialFollowups: this.props.selectedCampaign.followups})
    }
    //activeTab = "active-campaign-tab campaign tab-link"
      

    //list_type = this.props.selectedCampaign.prospect_list.list_type
    list_type = ""
    if(list_type == "mining_job")
      list_type = React.DOM.span(null, React.DOM.i({className: "fa fa-cloud-download"}), " ")
    else if(list_type == "signal_list")
      list_type = React.DOM.span(null, React.DOM.i({className: "fa fa-wifi"}), " ")
    else
      list_type = React.DOM.span(null, React.DOM.i({className: "fa fa-list-alt"}), " ")

    batches = this.props.selectedCampaign.batches
    batches = (batches) ? batches : []
    console.log('BATCHES')
    console.log(batches)
    return (
      React.DOM.div({className: "container", 
           style: {width:'100%',height:'100%',paddingLeft:0,paddingRight:0}}, 
        React.DOM.div({style: {marginBottom:15}, id: "campaign-top-detail"}, 
        React.DOM.h5({style: {marginTop:20,marginLeft:20}}, 
          React.DOM.a({href: "javascript:", onClick: this.returnToOverview}, "Campaigns "), 
          React.DOM.small(null, 
            React.DOM.i({style: {marginLeft:10, marginRight:10}, 
               className: "fa fa-chevron-right"})
          ), 
          this.props.selectedCampaign.name
        ), 
        React.DOM.h6({style: {marginLeft:20,display:'inline-block',marginRight:15,marginBottom:0,fontWeight:'bold',fontSize:10}}, 
          React.DOM.span({className: "text-muted"}, "PROSPECT LIST:"), "  "
        ), 
          React.DOM.span({className: "label label-success"}, 
          list_type, 
          this.props.selectedCampaign.prospect_list.name, 
          "     ", 
        React.DOM.i({className: "fa fa-user"}), " ", this.state.prospectListCount
        ), 
        React.DOM.br(null), 
        React.DOM.h6({style: {marginLeft:20,display:'inline-block',marginRight:50,marginTop:0,fontWeight:'bold',fontSize:10}, 
            className: "text-muted"}, 
          "BATCHES:"
        ), 
        React.DOM.span({className: "label label-primary"}, 
          React.DOM.i({className: "fa fa-sitemap"}), " ", 
          (_.isEqual(batches, [])) ? 1 : batches.length
        ), 
        
        React.DOM.div({style: {border:'1px solid #ddd',borderRadius:5,float:'right',marginTop:-45,marginRight:100}}, 
            React.DOM.div({className: "bg-warning", style: {display:'inline-block',padding:10,fontWeight:'bold',cursor:'pointer',width:70,textAlign:'center'}}, 
              React.DOM.span({className: "text-warning"}, 
                React.DOM.i({className: "fa fa-paper-plane"}), " ", this.state.delivered
              )
            ), 
            React.DOM.div({className: "bg-success", style: {display:'inline-block',padding:10,fontWeight:'bold',cursor:'pointer',width:70,textAlign:'center'}}, 
              React.DOM.span({className: "text-success"}, 
                React.DOM.i({className: "fa fa-eye"}), " ", this.state.opened
              )
            ), 
            React.DOM.div({className: "bg-danger", style: {display:'inline-block',padding:10,fontWeight:'bold',cursor:'pointer',width:70,textAlign:'center'}}, 
              React.DOM.span({className: "text-danger"}, 
                React.DOM.i({className: "fa fa-exclamation-circle"}), " ", this.state.bounced
              )
            )
        ), 
        
        React.DOM.a({href: "javascript:", 
           style: {float: 'right', marginTop: -35, marginRight: 30, display:'none'}, 
           className: "btn btn-success btn-sm"}, 
          React.DOM.i({className: "fa fa-envelope"}), " Send!"
        )
        
        ), 
              React.DOM.ul({className: "nav nav-tabs campaign-tabs", role: "tablist", style: {paddingRight:0}}, 
                React.DOM.li({className: "campaign-tab"}, " ", React.DOM.a({onClick: this.changeScreen, href: "javascript:", className: tab_1}, "TIMELINE")), 
                React.DOM.li({className: "campaign-tab"}, React.DOM.a({onClick: this.changeScreen, href: "javascript:", className: tab_2}, "RECENT ACTIVITY")), 
                React.DOM.li({className: "campaign-tab"}, 
                  React.DOM.a({onClick: this.changeScreen, href: "javascript:", className: tab_3, style: {fontSize:12}}, 
                    "SCHEDULED FOLLOWUPS")), 
                React.DOM.li({className: "campaign-tab"}, React.DOM.a({onClick: this.changeScreen, href: "javascript:", className: tab_4}, "SENT MAIL")), 
                React.DOM.li({className: "campaign-tab"}, React.DOM.a({onClick: this.changeScreen, href: "javascript:", className: tab_5}, "ANALYTICS"))
              ), 
            lolscreen, 

          (this.state.templateDetailMode) ? EditTemplateView({
            editMode: this.state.editMode, 
            initialTemplateValues: this.state.currentTemplate, 
            saveTemplate: this.saveTemplate, 
            prospect: this.state.prospects[0], 
            toggleTemplateEditMenu: this.toggleTemplateEditMenu, 
            followupDay: this.state.followupDay}) : ""
      )
    );
  },

  saveTemplate: function(template, newTemplate) {
    templates = this.state.templates
    for(i=0;i< this.state.templates.length; i++)
      if(this.state.templates[i].name == template.name)
        break
    
    console.log(template)
    if(newTemplate){
      template.subject = template.subject
      template.name = template.name
      template.body = template.body
      templates.push(template)

      $.ajax({
        url:'https://api.parse.com/1/classes/Template',
        headers:appConfig.headers,
        type:'POST',
        data:JSON.stringify({
          name : template.name,
          subject: template.subject,
          body: template.body,
          user:{
            __type: 'Pointer',
            className:'_User',
            objectId:JSON.parse(localStorage.currentUser).objectId,
          },
          company:JSON.parse(localStorage.currentUser).company,
        }),
        success: function(res) {
          console.log(res)
        },
        error: function() {
        }
      })
    } else {
      templates[i].subject = template.subject
      templates[i].body = template.body

      $.ajax({
        url:'https://api.parse.com/1/classes/Template/'+templates[i].objectId,
        type:'PUT',
        headers:appConfig.headers,
        data:JSON.stringify({
          name : template.name,
          subject: template.subject,
          body: template.body,
        }),
        success: function(res) {
          console.log(res)
        },
        error: function() {
        }
      })
    }

    this.setState({templates: templates })

  },

  toggleTemplateEditMenu: function(currentTemplate, editMode) {
    editMode = (editMode) ? true : false
    this.setState({
      currentTemplate: currentTemplate,
      templateDetailMode: !this.state.templateDetailMode,
    })
  }
});

var FollowupTimeline = React.createClass({displayName: 'FollowupTimeline',
  render: function() {
    return (
        React.DOM.div(null, 
          React.DOM.div({className: "col-md-8 panel panel-default", 
               style: {height:436,paddingLeft:305,paddingTop:50,overflow:'auto',borderRight:0,borderRadius:0, borderTop:0}}, 
                Timeline({
                  templates: this.props.templates, 
                  prospects: this.props.prospects, 
                  selectedCampaign: this.props.selectedCampaign, 
                  prospectListCount: this.props.prospectListCount, 
                  newProspects: this.props.newProspects, 
                  toggleTemplateEditMenu: this.props.toggleTemplateEditMenu, 
                  initialFollowups: this.props.initialFollowups})
          ), 
          React.DOM.div({className: "col-md-4", 
               style: {paddingLeft:0,paddingRight:0,height:436}}, 
            TemplatesMenu({
              templates: this.props.templates, 
              toggleTemplateEditMenu: this.props.toggleTemplateEditMenu})
          )
        )

    )
  }
})

},{"./campaign_activity_view.js.min.js":3,"./campaign_followup_feed.js.min.js":5,"./campaign_report.js.min.js":6,"./campaign_sent_email.js.min.js":7,"./create_template.js.min.js":18,"./edit_template.js.min.js":22,"./followup_timeline.js.min.js":25,"./templates_menu.js.min.js":59}],5:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // FollowupFeed
  getInitialState: function() {
    return {
      followups: []
    }
  },

  componentDidMount: function() {
        // for each batch find followups remaining
        // sort followups by ascending followup day
        //
    // Batch Start Date
    // Current Batch Date
  },

  render: function() {
    var thiss = this;
    followups = _.map(this.props.batches, function(batch) {
      now = moment().startOf('day').valueOf()/1000
      batch.currentDay = moment(batch.started).diff(moment(now),  'days') * -1
      return _.map(thiss.props.followups, function(followup) {
        followup.batch = batch
        if(followup.day >= batch.currentDay)
          return followup
      })
    })
    followups = _.sortBy(followups, function(followup){ return followup.day })

    console.debug(followups)

    activities = _.map(followups[0], function(followup) {
      return Followups({followup: followup, batch: followup.batch})
    })
    console.debug(activities)

    return (
      React.DOM.div({style: {overflow:'auto',height:436}}, 
        React.DOM.table({className: "table", style: {marginBottom:0}}, 
          React.DOM.thead(null, 
            React.DOM.th(null), 
            React.DOM.th(null, "Scheduled for "), 
            React.DOM.th(null, "Outreach Stage "), 
            React.DOM.th(null, "Prospect List"), 
            React.DOM.th(null, "Template "), 
            React.DOM.th({style: {textAlign:'center'}}, "Action Buttons")
          ), 
          React.DOM.tbody(null, 
            activities
          )
        )
      )
    )
  }
})

var Followups = React.createClass({displayName: 'Followups',
  render: function() {
    // this.props.batch
    // this.props.followup
    return (
      React.DOM.tr(null, 
          React.DOM.td(null), 
          React.DOM.td(null, 
            React.DOM.h6(null, 
              React.DOM.i({className: "fa fa-clock"}), " " + ' ' +
              "29 minutes ago"
            )
          ), 
          React.DOM.td(null, 
            "second"
          ), 
          React.DOM.td(null, 
            React.DOM.h6({style: {cursor:'pointer'}}, 
            React.DOM.i({className: "fa fa-list-alt"}), "  " + ' ' +
            "Boston VP Sales - Retail"
            )
          ), 
          React.DOM.td(null, 
            React.DOM.h6({style: {cursor:'pointer'}}, 
            React.DOM.i({className: "fa fa-file-text-o"}), "  " + ' ' +
            "Followup #2 - Provide Value ", React.DOM.br(null), 
            React.DOM.span({className: "text-muted"}, " Subject: Just wanted to followup on the last email "), React.DOM.br(null), 
            React.DOM.span({className: "text-muted"}, " Body: Just wanted to followup on the last email ")

            )
          ), 

          React.DOM.td({style: {textAlign:'center'}}, 
            React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", style: {width:170,fontWeight:'bold',marginBottom:2}}, "Send Now"), React.DOM.br(null), 
            React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", style: {width:170,fontWeight:'bold',marginBottom:2}}, "Remind me in 1 hour"), React.DOM.br(null)
          )
      )
    )
  }
})

},{}],6:[function(require,module,exports){
/** @jsx React.DOM */

lol = 

module.exports = React.createClass({displayName: 'exports',
  // Campaign Report
  getInitialState: function() {
    return {
    }
  },

  componentDidMount: function() { 
    testData = this.testData()
    var industryChart   = dc.pieChart("#industry-chart"),
        spendHistChart  = dc.barChart("#chart-hist-spend"),
        spenderRowChart = dc.rowChart("#chart-row-spenders");

    // set crossfilter
    var ndx = crossfilter(spendData),
        yearDim  = ndx.dimension(function(d) {return +d.Year;}),
        spendDim = ndx.dimension(function(d) {return Math.floor(d.Spent/10);}),
        nameDim  = ndx.dimension(function(d) {return d.Name;}),
        spendPerYear = yearDim.group().reduceSum(function(d) {return +d.Spent;}),
        spendPerName = nameDim.group().reduceSum(function(d) {return +d.Spent;}),
        spendHist    = spendDim.group().reduceCount();

    industryChart
        .width(200).height(200)
        .dimension(yearDim)
        .group(spendPerYear)
        .innerRadius(50);

    //
    // Batch Analytics - Bubble Chart
    // Batch Block Charts
    // Pie Chart - Industry
    // Revenue - PC
    // Company Size - PC
    // Opens / Replies / Link Clicks / Bounces - Bar Chart
    // Titles - PC
    // Time / Date Email Sent - Line Chart
    // Date Prospected - BC
    //
  },
  
  render: function() {
    return (
      React.DOM.div(null, 
        "Report View", 
        React.DOM.div({id: "industry-chart"})
      )
    )
  },

  testData: function() { 
    return [{"website": "http://www.tencate.com", "campaign": {"className": "Campaign", "__type": "Pointer", "objectId": "nmElU7zcBf"}, "pos": "\\u00a0Director Sales & Marketing Aerospace", "__type": "Object", "updatedAt": "2014-10-10T13:29:22.516Z", "createdAt": "2014-10-07T15:20:18.481Z", "city": "Coventry, United Kingdom\\u00a0", "archived": true, "loading": false, "objectId": "ftyKCGmR9H", "company_name": "Tencate", "mailgun_id": "<20141010140218.58883.75040@customerohq.com>", "email_guesses": [{"className": "EmailGuess", "__type": "Pointer", "objectId": "u8SetCQOJP"}, {"className": "EmailGuess", "__type": "Pointer", "objectId": "P0KmFG92dK"}], "email": "n.tiffin@tencate.com", "prospect_created_at": "2014-10-07T15:20:18.481Z", "company": {"className": "Company", "__type": "Pointer", "objectId": "fqHWp5NsFx"}, "lists": [{"className": "ProspectList", "__type": "Pointer", "objectId": "izLbVulyr6"}], "user": {"className": "User", "__type": "Pointer", "objectId": "xWESiw5Smd"}, "company_size": "1001-5000 employees", "name": "Nick Tiffin", "industry": "Textiles", "linkedin_url": "uk.linkedin.com/pub/nick-tiffin/5/434/256", "batch": {"className": "ProspectBatch", "__type": "Pointer", "objectId": "YPaTGbD56a"}, "className": "Prospect", "queued": true}, {"website": "http://www.pearson.com", "campaign": {"className": "Campaign", "__type": "Pointer", "objectId": "nmElU7zcBf"}, "pos": "\\u00a0Director, Sales Performance Management", "__type": "Object", "updatedAt": "2014-10-10T13:29:22.780Z", "createdAt": "2014-10-07T15:20:17.873Z", "city": "Phoenix, Arizona Area\\u00a0", "archived": true, "loading": false, "objectId": "LPiE0CcEsR", "company_name": "Pearson plc", "mailgun_id": "<20141010140219.50015.20571@customerohq.com>", "email_guesses": [{"className": "EmailGuess", "__type": "Pointer", "objectId": "Q57kwN1LQT"}, {"className": "EmailGuess", "__type": "Pointer", "objectId": "53K0lWY7hv"}], "email": "jason.linkedin@pearson.com", "prospect_created_at": "2014-10-07T15:20:17.873Z", "company": {"className": "Company", "__type": "Pointer", "objectId": "fqHWp5NsFx"}, "lists": [{"className": "ProspectList", "__type": "Pointer", "objectId": "izLbVulyr6"}], "user": {"className": "User", "__type": "Pointer", "objectId": "xWESiw5Smd"}, "company_size": "10,001+ employees", "name": "Jason Upah", "industry": "Education Management", "linkedin_url": "www.linkedin.com/pub/jason-upah/7/233/940", "batch": {"className": "ProspectBatch", "__type": "Pointer", "objectId": "YPaTGbD56a"}, "className": "Prospect", "queued": true}, {"website": "http://www.rmwmusic.com", "campaign": {"className": "Campaign", "__type": "Pointer", "objectId": "nmElU7zcBf"}, "pos": "\\u00a0Director of Sales and Marketing", "__type": "Object", "updatedAt": "2014-10-10T13:29:23.049Z", "createdAt": "2014-10-07T15:20:16.735Z", "city": "Toronto, Ontario, Canada\\u00a0", "archived": true, "loading": false, "opened": true, "objectId": "COSpyXgsD2", "company_name": "RMW Music", "mailgun_id": "<20141010140219.50019.67418@customerohq.com>", "email_guesses": [{"className": "EmailGuess", "__type": "Pointer", "objectId": "3OEKtIxIAp"}, {"className": "EmailGuess", "__type": "Pointer", "objectId": "xvGbUYpo43"}], "email": "no_email", "prospect_created_at": "2014-10-07T15:20:16.735Z", "company": {"className": "Company", "__type": "Pointer", "objectId": "fqHWp5NsFx"}, "lists": [{"className": "ProspectList", "__type": "Pointer", "objectId": "izLbVulyr6"}], "user": {"className": "User", "__type": "Pointer", "objectId": "xWESiw5Smd"}, "company_size": "11-50 employees", "name": "Laura Nikolic", "industry": "Music", "linkedin_url": "ca.linkedin.com/pub/laura-nikolic/50/450/771", "batch": {"className": "ProspectBatch", "__type": "Pointer", "objectId": "YPaTGbD56a"}, "className": "Prospect", "queued": true}, {"website": "http://www.saudiacargo.com", "campaign": {"className": "Campaign", "__type": "Pointer", "objectId": "nmElU7zcBf"}, "pos": "\\u00a0Director Global Sales Support", "__type": "Object", "updatedAt": "2014-10-10T13:29:23.327Z", "createdAt": "2014-10-07T15:20:16.127Z", "city": "Saudi Arabia\\u00a0", "archived": true, "loading": false, "opened": true, "objectId": "Ke06g6kSk5", "company_name": "Saudi Airlines Cargo Company", "mailgun_id": "<20141010140220.58887.52484@customerohq.com>", "email_guesses": [{"className": "EmailGuess", "__type": "Pointer", "objectId": "o33JavhSpy"}, {"className": "EmailGuess", "__type": "Pointer", "objectId": "l3vy2TxF73"}], "email": "no_email", "prospect_created_at": "2014-10-07T15:20:16.127Z", "company": {"className": "Company", "__type": "Pointer", "objectId": "fqHWp5NsFx"}, "lists": [{"className": "ProspectList", "__type": "Pointer", "objectId": "izLbVulyr6"}], "user": {"className": "User", "__type": "Pointer", "objectId": "xWESiw5Smd"}, "company_size": "1001-5000 employees", "name": "Rainer Mueller", "industry": "Airlines/Aviation", "linkedin_url": "sa.linkedin.com/pub/rainer-mueller/5/a48/428", "batch": {"className": "ProspectBatch", "__type": "Pointer", "objectId": "YPaTGbD56a"}, "className": "Prospect", "queued": true}, {"website": "http://www.shadowzprotection.com", "campaign": {"className": "Campaign", "__type": "Pointer", "objectId": "nmElU7zcBf"}, "pos": "\\u00a0Director", "__type": "Object", "updatedAt": "2014-10-10T13:29:23.598Z", "createdAt": "2014-10-07T15:20:15.147Z", "city": "New Delhi Area, India\\u00a0", "archived": true, "loading": false, "opened": true, "objectId": "f44YU2Yrm7", "company_name": "M/S Golden Bricks Constructions Pvt. Ltd.", "mailgun_id": "<20141010140220.19960.3157@customerohq.com>", "email_guesses": [{"className": "EmailGuess", "__type": "Pointer", "objectId": "6B4MDqWqtw"}, {"className": "EmailGuess", "__type": "Pointer", "objectId": "e9sMFL1QWx"}], "email": "no_email", "prospect_created_at": "2014-10-07T15:20:15.147Z", "company": {"className": "Company", "__type": "Pointer", "objectId": "fqHWp5NsFx"}, "lists": [{"className": "ProspectList", "__type": "Pointer", "objectId": "izLbVulyr6"}], "user": {"className": "User", "__type": "Pointer", "objectId": "xWESiw5Smd"}, "company_size": "201-500 employees", "name": "Vivek Narang", "industry": "Security and Investigations", "linkedin_url": "in.linkedin.com/pub/vivek-narang/20/b67/39", "batch": {"className": "ProspectBatch", "__type": "Pointer", "objectId": "YPaTGbD56a"}, "className": "Prospect", "queued": true}, {"website": "http://www.shangri-la.com", "campaign": {"className": "Campaign", "__type": "Pointer", "objectId": "nmElU7zcBf"}, "pos": "\\u00a0Director of Sales and Marketing", "__type": "Object", "updatedAt": "2014-10-10T13:29:23.880Z", "createdAt": "2014-10-07T15:20:13.197Z", "city": "Brisbane, Australia\\u00a0", "archived": true, "loading": false, "objectId": "TSSDEZ3lUA", "company_name": "Shangri-La Hotels and Resorts", "mailgun_id": "<20141010140221.39548.29627@customerohq.com>", "email_guesses": [{"className": "EmailGuess", "__type": "Pointer", "objectId": "PIDGJPqraI"}, {"className": "EmailGuess", "__type": "Pointer", "objectId": "mG4U69xDcg"}], "email": "andy.mccutcheon@shangri-la.com", "prospect_created_at": "2014-10-07T15:20:13.197Z", "company": {"className": "Company", "__type": "Pointer", "objectId": "fqHWp5NsFx"}, "lists": [{"className": "ProspectList", "__type": "Pointer", "objectId": "izLbVulyr6"}], "user": {"className": "User", "__type": "Pointer", "objectId": "xWESiw5Smd"}, "company_size": "10,001+ employees", "name": "Andy McCutcheon", "industry": "Hospitality", "linkedin_url": "au.linkedin.com/pub/andy-mccutcheon/1a/665/650", "batch": {"className": "ProspectBatch", "__type": "Pointer", "objectId": "YPaTGbD56a"}, "className": "Prospect", "queued": true}, {"website": "http://www.tencate.com", "campaign": {"className": "Campaign", "__type": "Pointer", "objectId": "nmElU7zcBf"}, "pos": "\\u00a0Director Sales & Marketing Aerospace", "__type": "Object", "updatedAt": "2014-10-10T13:29:22.516Z", "createdAt": "2014-10-07T15:20:18.481Z", "city": "Coventry, United Kingdom\\u00a0", "archived": true, "loading": false, "objectId": "ftyKCGmR9H", "company_name": "Tencate", "mailgun_id": "<20141010140813.19956.20454@customerohq.com>", "email_guesses": [{"className": "EmailGuess", "__type": "Pointer", "objectId": "u8SetCQOJP"}, {"className": "EmailGuess", "__type": "Pointer", "objectId": "P0KmFG92dK"}], "email": "n.tiffin@tencate.com", "prospect_created_at": "2014-10-07T15:20:18.481Z", "company": {"className": "Company", "__type": "Pointer", "objectId": "fqHWp5NsFx"}, "lists": [{"className": "ProspectList", "__type": "Pointer", "objectId": "izLbVulyr6"}], "user": {"className": "User", "__type": "Pointer", "objectId": "xWESiw5Smd"}, "company_size": "1001-5000 employees", "name": "Nick Tiffin", "industry": "Textiles", "linkedin_url": "uk.linkedin.com/pub/nick-tiffin/5/434/256", "batch": {"className": "ProspectBatch", "__type": "Pointer", "objectId": "YPaTGbD56a"}, "className": "Prospect", "queued": true}, {"website": "http://www.pearson.com", "campaign": {"className": "Campaign", "__type": "Pointer", "objectId": "nmElU7zcBf"}, "pos": "\\u00a0Director, Sales Performance Management", "__type": "Object", "updatedAt": "2014-10-10T13:29:22.780Z", "createdAt": "2014-10-07T15:20:17.873Z", "city": "Phoenix, Arizona Area\\u00a0", "archived": true, "loading": false, "objectId": "LPiE0CcEsR", "company_name": "Pearson plc", "mailgun_id": "<20141010140813.58881.85733@customerohq.com>", "email_guesses": [{"className": "EmailGuess", "__type": "Pointer", "objectId": "Q57kwN1LQT"}, {"className": "EmailGuess", "__type": "Pointer", "objectId": "53K0lWY7hv"}], "email": "jason.linkedin@pearson.com", "prospect_created_at": "2014-10-07T15:20:17.873Z", "company": {"className": "Company", "__type": "Pointer", "objectId": "fqHWp5NsFx"}, "lists": [{"className": "ProspectList", "__type": "Pointer", "objectId": "izLbVulyr6"}], "user": {"className": "User", "__type": "Pointer", "objectId": "xWESiw5Smd"}, "company_size": "10,001+ employees", "name": "Jason Upah", "industry": "Education Management", "linkedin_url": "www.linkedin.com/pub/jason-upah/7/233/940", "batch": {"className": "ProspectBatch", "__type": "Pointer", "objectId": "YPaTGbD56a"}, "className": "Prospect", "queued": true}, {"website": "http://www.rmwmusic.com", "campaign": {"className": "Campaign", "__type": "Pointer", "objectId": "nmElU7zcBf"}, "pos": "\\u00a0Director of Sales and Marketing", "__type": "Object", "updatedAt": "2014-10-10T13:29:23.049Z", "createdAt": "2014-10-07T15:20:16.735Z", "city": "Toronto, Ontario, Canada\\u00a0", "archived": true, "loading": false, "opened": true, "objectId": "COSpyXgsD2", "company_name": "RMW Music", "mailgun_id": "<20141010140814.19938.90169@customerohq.com>", "email_guesses": [{"className": "EmailGuess", "__type": "Pointer", "objectId": "3OEKtIxIAp"}, {"className": "EmailGuess", "__type": "Pointer", "objectId": "xvGbUYpo43"}], "email": "no_email", "prospect_created_at": "2014-10-07T15:20:16.735Z", "company": {"className": "Company", "__type": "Pointer", "objectId": "fqHWp5NsFx"}, "lists": [{"className": "ProspectList", "__type": "Pointer", "objectId": "izLbVulyr6"}], "user": {"className": "User", "__type": "Pointer", "objectId": "xWESiw5Smd"}, "company_size": "11-50 employees", "name": "Laura Nikolic", "industry": "Music", "linkedin_url": "ca.linkedin.com/pub/laura-nikolic/50/450/771", "batch": {"className": "ProspectBatch", "__type": "Pointer", "objectId": "YPaTGbD56a"}, "className": "Prospect", "queued": true}, {"website": "http://www.saudiacargo.com", "campaign": {"className": "Campaign", "__type": "Pointer", "objectId": "nmElU7zcBf"}, "pos": "\\u00a0Director Global Sales Support", "__type": "Object", "updatedAt": "2014-10-10T13:29:23.327Z", "createdAt": "2014-10-07T15:20:16.127Z", "city": "Saudi Arabia\\u00a0", "archived": true, "loading": false, "opened": true, "objectId": "Ke06g6kSk5", "company_name": "Saudi Airlines Cargo Company", "mailgun_id": "<20141010140814.77386.74943@customerohq.com>", "email_guesses": [{"className": "EmailGuess", "__type": "Pointer", "objectId": "o33JavhSpy"}, {"className": "EmailGuess", "__type": "Pointer", "objectId": "l3vy2TxF73"}], "email": "no_email", "prospect_created_at": "2014-10-07T15:20:16.127Z", "company": {"className": "Company", "__type": "Pointer", "objectId": "fqHWp5NsFx"}, "lists": [{"className": "ProspectList", "__type": "Pointer", "objectId": "izLbVulyr6"}], "user": {"className": "User", "__type": "Pointer", "objectId": "xWESiw5Smd"}, "company_size": "1001-5000 employees", "name": "Rainer Mueller", "industry": "Airlines/Aviation", "linkedin_url": "sa.linkedin.com/pub/rainer-mueller/5/a48/428", "batch": {"className": "ProspectBatch", "__type": "Pointer", "objectId": "YPaTGbD56a"}, "className": "Prospect", "queued": true}]
  },

});

},{}],7:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Sent Mail
  getInitialState: function() {
    return {
      sentEmails: []
    }
  },

  componentDidMount: function() {
    thiss = this;
    qry = {
      include: 'campaign,prospect,prospect.email_guesses.pattern',
      order:'-createdAt',
      campaign: {
        __type: 'Pointer',
        className:'Campaign',
        objectId: this.props.selectedCampaign.objectId,
      }
    }
    $.ajax({
      url: 'https://api.parse.com/1/classes/SentEmail',
      data: qry,
      headers: appConfig.headers,
      success: function(res) { thiss.setState({sentEmails: res.results}) },
      error: function() {}
    })
  },

  render: function() {
    sentEmails = []
    for(i=0;i< this.state.sentEmails.length; i++) 
      sentEmails.push(SentEmailRow({sentEmail: this.state.sentEmails[i]}))

    return (
      React.DOM.div({style: {overflow:'auto',height:417}}, 
        React.DOM.table({className: "table table-striped", style: {marginBottom:0}}, 
          React.DOM.thead(null, 
            React.DOM.th(null), 
            React.DOM.th(null, "Prospect Name"), 
            React.DOM.th(null, "Prospect Email"), 
            React.DOM.th(null, "Template"), 
            React.DOM.th({style: {width:290}}, "Status")
          ), 
          React.DOM.tbody(null, 
            sentEmails
          )
        )
      )
    );
  }
});

var SentEmailRow = React.createClass({displayName: 'SentEmailRow',
  render: function() {
    sentEmail = this.props.sentEmail
    //console.log(sentEmail)

    email = sentEmail.email
    /*
    if(email == "no_email"){
      first = sentEmail.prospect.name.split(' ')[0]
      last = _.last(sentEmail.prospect.name.split(' '))

      pattern = _.findWhere(sentEmail.prospect.email_guesses, {'tried':false})
      data = {first: first, last: last, fi: first[0], li: last[0]}
      email = Mustache.render(pattern.pattern.pattern, data).toLowerCase()
    }
    */

    replied = "label label-default"
    opened = "label label-default"
    delivered = "label label-default"
    queued = "label label-default"

    if(sentEmail.replied) 
      replied = "label label-success"
    if(sentEmail.opened) 
      opened = "label label-success"
    if(sentEmail.delivered) 
      delivered = "label label-success"
    if(sentEmail.queued) 
      queued = "label label-success"

    return (
      React.DOM.tr(null, 
        React.DOM.td({style: {width:100}}, React.DOM.h6(null, 
            React.DOM.i({className: "fa fa-clock"}), 
            moment(sentEmail.createdAt).fromNow())), 
        React.DOM.td({style: {width:200}}, 
          React.DOM.h6({style: {fontSize:14,fontWeight:'bold',marginBottom:0}}, 
            sentEmail.prospect.name), 
          React.DOM.h6({style: {fontStyle:'italic',marginTop:4,marginBottom:0}}, 
            sentEmail.prospect.pos.trim()), 
          React.DOM.h6({style: {marginTop:4,fontWeight:'bold'}}, 
            React.DOM.i({className: "fa fa-building"}), " ", 
            sentEmail.prospect.company_name)
        ), 
        React.DOM.td({style: {width:200}}, React.DOM.h6(null, email)), 
        React.DOM.td(null, 
          React.DOM.h6(null, 
            React.DOM.i({className: "fa fa-file-text-o"}), " " + ' ' +
            "Template"
          )
        ), 
        React.DOM.td({style: {paddingTop:13}}, 
          React.DOM.span({className: queued}, "Queued"), 
          React.DOM.i({className: "fa fa-chevron-circle-right text-muted", 
             style: {paddingLeft:5,paddingRight:5}}), 
          React.DOM.span({className: delivered}, "Delivered"), 
          React.DOM.i({className: "fa fa-chevron-circle-right text-muted", 
             style: {paddingLeft:5,paddingRight:5}}), 
          React.DOM.span({className: opened}, "Opened"), 
          React.DOM.i({className: "fa fa-chevron-circle-right text-muted", 
             style: {paddingLeft:5,paddingRight:5}}), 
          React.DOM.span({className: replied}, "Replied")
        )
      )
    )
  }
})

},{}],8:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Campaigns
  getInitialState: function() {
    return {
      selectedScreen: 'Overview',
    }
  },

  changeSelectedCampaign: function(campaign) {
    //this.props.toggleScreen('CampaignDetail')
    this.props.changeSelectedCampaign('CampaignDetail', campaign)
  },

  render: function() {
    campaigns = []
    console.log(this.props)
    for(i=0;i< this.props.campaigns.length; i++){ 
      campaigns.push(CampaignRow({
                        toggleScreen: this.toggleScreen, 
                        deleteCampaign: this.props.deleteCampaign, 
                        changeSelectedCampaign: this.changeSelectedCampaign, 
                        campaign: this.props.campaigns[i]}) )
    }
    return (
      React.DOM.div({style: {overflow:'auto',height:550}}, 
        React.DOM.table({className: "table table-striped"}, 
          React.DOM.thead(null, 
            React.DOM.th(null), 
            React.DOM.th(null, "Campaign Name"), 
            React.DOM.th(null, "Prospect List"), 
            React.DOM.th(null, "Size"), 
            React.DOM.th({style: {textAlign:'center'}}, "Delivered"), 
            React.DOM.th({style: {textAlign:'center'}}, "Opened"), 
            React.DOM.th({style: {textAlign:'center',display:'none'}}, "Replied"), 
            React.DOM.th({style: {textAlign:'center',display:'none'}}, "Link Clicks"), 
            React.DOM.th({style: {textAlign:'center'}}, "Bounced"), 
            React.DOM.th({style: {width:150,textAlign:'center'}}, " ")
          ), 
          React.DOM.tbody(null, 
            campaigns
          )
        )
      )
    );
  },
});

var CampaignRow = React.createClass({displayName: 'CampaignRow',
  getInitialState: function() {
    return {
      delivered: '~',
      opened: '~',
      bounced: '~',
      prospectListCount: '~'
    }
  },

  DeleteCampaign: function(e) {
    var thiss = this;
    console.log('DELETE CAMPAIGN')
    e.stopPropagation()
    swal({   
      title: "Are you sure?",   
      text: "You will not be able to recover this Campaign!",
      type: "warning",   
      showCancelButton: true,   
      confirmButtonColor: "#DD6B55",   
      confirmButtonText: "Yes, delete it!",   
      closeOnConfirm: false }, 
      function(){   
        swal("Deleted!", "Your campaign has been deleted.", "success"); 
        console.log('deleted')
        thiss.props.deleteCampaign(thiss.props.campaign.objectId)
      });
  },

  toggleScreen: function() {
    //this.props.toggleScreen()
    this.props.changeSelectedCampaign(this.props.campaign)
  },

  componentDidMount: function() {
    var thiss = this;
    list = this.props.campaign.prospect_list
    list = (list) ? list.objectId : ""
    qry = {
      where: JSON.stringify({lists: appConfig.pointer('ProspectList',list)}),
      count: true
    }
    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospect',
      headers: appConfig.headers,
      data: qry,
      success: function(res) { thiss.setState({prospectListCount: res.count})},
      error: function(err) { console.log(err.responseText) }
    })
    campaignId = this.props.campaign.objectId
    qry = {
      where: JSON.stringify({campaign: appConfig.pointer('Campaign', campaignId)}),
      limit: 1000,
      count: true
    }
    $.ajax({
      url:'https://api.parse.com/1/classes/SentEmail',
      data: qry,
      headers: appConfig.headers,
      success: function(res) { thiss.setState({delivered: res.count})},
      error: function(err) { console.log(err.responseText) }
    })
    qry_1 = {
      where: JSON.stringify({
        campaign: appConfig.pointer('Campaign', campaignId),
        opened: {"$gte": 0} 
      }),
      count: true
    }
    $.ajax({
      url:'https://api.parse.com/1/classes/SentEmail',
      data: qry_1,
      headers: appConfig.headers,
      success: function(res) { thiss.setState({opened : res.count}) },
      error: function(err) { console.log(err.responseText) }
    })
    qry_2 = {
      where: JSON.stringify({
        campaign: appConfig.pointer('Campaign', campaignId),
        failed: {"$gte": 0} 
      }),
      count: true
    }
    $.ajax({
      url:'https://api.parse.com/1/classes/SentEmail',
      data: qry_2,
      headers: appConfig.headers,
      success: function(res) { thiss.setState({bounced : res.count}) },
      error: function(err) { console.log(err.responseText) }
    })
  },

  render: function() {
    prospect_list = (this.props.campaign.prospect_list) ? this.props.campaign.prospect_list : {list_type:"", name:""}
    if(prospect_list.list_type == "signal_list")
        iconType = React.DOM.i({className: "fa fa-wifi", style: {marginRight:5}})
    else if(prospect_list.list_type == "mining_job")
        iconType = React.DOM.i({className: "fa fa-cloud-download", style: {marginRight:5}})
    else 
        iconType =""
    return (
      React.DOM.tr({style: {cursor:'pointer'}, onClick: this.toggleScreen}, 
        React.DOM.td(null), 
        React.DOM.td(null, " ", React.DOM.h6(null, 
            this.props.campaign.name
        ), " "), 
        React.DOM.td(null, " ", React.DOM.h6(null, 
            iconType, 
            prospect_list.name
        ), " "), 
        React.DOM.td(null, 
          React.DOM.div({className: "label label-primary"}, 
            React.DOM.i({className: "fa fa-user"}), "  ", 
            this.state.prospectListCount
          )
        ), 
        React.DOM.td({style: {textAlign:'center',padding:12}}, 
          React.DOM.span({className: "badge", style: {backgroundColor:'#f0ad4e',width:50}}, 
            React.DOM.i({className: "fa fa-paper-plane", style: {float:'left'}}), "  ", 
            this.state.delivered
          )
        ), 
        React.DOM.td({style: {textAlign:'center',padding:12}}, 
          React.DOM.span({className: "label label-success"}, 
            React.DOM.i({className: "fa fa-eye"}), "   ", this.state.opened, " ")
        ), 
        React.DOM.td({style: {textAlign:'center',padding:12,display:'none'}}, 
          React.DOM.span({className: "label label-primary"}, 
            React.DOM.i({className: "fa fa-mail-reply"}), "  ", 
            this.state.bounced)
        ), 
        React.DOM.td({style: {textAlign:'center',padding:12,display:'none'}}, 
          React.DOM.span({className: "label label-info"}, 
            React.DOM.i({className: "fa fa-external-link-square"}), "  " + ' ' +
            "18%")
        ), 
        React.DOM.td({style: {textAlign:'center',padding:12}}, 
          React.DOM.span({className: "label label-default"}, 
            React.DOM.i({className: "fa fa-exclamation-circle"}), "  ", 
            this.state.bounced)
        ), 
        React.DOM.td({style: {textAlign:'center',paddingTop:12}}, 
          React.DOM.a({href: "javascript:", className: "btn btn-primary btn-xs", 
            style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%) !important;',display:'none'}}, 
            React.DOM.i({className: "fa fa-copy", style: {fontWeight:'bold'}}), "  Clone"), 

          React.DOM.a({href: "javascript:", 
             className: "btn-default", 
             onClick: this.DeleteCampaign, 
             style: {marginLeft:5}}, " ", React.DOM.i({className: "fa fa-trash-o"}))
        ), 
        React.DOM.td({style: {textAlign:'center',padding:12,display:'none'}}, 
          React.DOM.h4({style: {margin:0}}, 
            React.DOM.span({className: "label label-success"}, "Ready")
          )
        )
      )
    )
  }
});

},{}],9:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  //CompanyDetail
  getInitialState: function() {
    return {
      currentScreen:"press",
    }
  },

  changeScreen: function() {
  },

  toggleDetailMode: function() {
    console.log("detail mode")
    this.props.toggleDetailMode()
  },

  getData: function() {
    company = this.props.detailCompany
    qry = {company_name: company.company_name}
    var _this = this;
    Parse._get('CompanyBlogPost', qry).done(function(res) {
      _this.setState({blog_posts: res.results})
    })
    Parse._get('CompanyTechnology', qry).done(function(res) {
      _this.setState({technologies: res.results})
    })
    Parse._get('CompanyPressRelease', qry).done(function(res) {
      _this.setState({press_releases: res.results})
    })
    Parse._get('CompanyGlassdoorReview', qry).done(function(res) {
      _this.setState({reviews: res.results})
    })
    Parse._get('CompanyEmployee', qry).done(function(res) {
      _this.setState({employees: res.results})
    })
    Parse._get('CompanySimilar', qry).done(function(res) {
      _this.setState({similar: res.results})
    })
    Parse._get('CompanyHiring', qry).done(function(res) {
      _this.setState({hiring: res.results})
    })
    Parse._get('CompanyNews', qry).done(function(res) {
      _this.setState({news: res.results})
    })
  },

  changeScreen: function(e) {
    this.setState({currentScreen: $(e.target).text().toLowerCase()})
  },

  render: function() {
    console.log(this.props.detailCompany)
    console.log(this.state.currentScreen)
    this.getData()

    tab_1 = "campaign-tab-link"
    tab_2 = "campaign-tab-link"
    tab_3 = "campaign-tab-link"
    tab_4 = "campaign-tab-link"
    tab_5 = "campaign-tab-link"
    if(this.state.currentScreen == "press")
      screen = CompanyPress(null)
    else if(this.state.currentScreen == "news")
      screen = CompanyNews(null)
    else if(this.state.currentScreen == "blog posts")
      screen = CompanyBlogPosts(null)
    else if(this.state.currentScreen == "hiring")
      screen = CompanyHiring(null)
    else if(this.state.currentScreen == "employees")
      screen = CompanyEmployees(null)
    else if(this.state.currentScreen == "similar")
      screen = CompanySimilar(null)
    else if(this.state.currentScreen == "technologies")
      screen = CompanyTechnology(null)
    return (
      React.DOM.div(null, 
        React.DOM.div({className: "company_detail_overlay", onClick: this.toggleDetailMode}, " "), 
      React.DOM.div({className: "company_detail_mode"}, 
    React.DOM.div({className: "row"}, 
      React.DOM.div({className: "col-md-2"}, 
      React.DOM.div({style: {backgroundImage: "url("+company.logo+")",height:100,width:100,marginLeft:10,marginTop:10}, 
          className: "company-img-thumbnail"})
      ), 
      React.DOM.div({className: "col-md-3", style: {paddingRight:0,paddingLeft:28,paddingTop:8}}, 
        React.DOM.h4({style: {fontWeight:"bold",fontSize:14}}, company.name), 
        React.DOM.h6({style: {fontWeight:"bold"}}, company.industry), 
        React.DOM.h6({style: {fontWeight:"bold"}}, company.headcount), 
        React.DOM.h6({style: {fontWeight:"bold"}}, company.city)
      ), 
      React.DOM.div({className: "col-md-7"}, 
        React.DOM.p({className: "lead", style: {marginTop:10,fontSize:12,height:100,overflow:'auto'}}, company.description)
      )
    ), 


              React.DOM.ul({className: "nav nav-tabs campaign-tabs detail-tab", role: "tablist", style: {paddingRight:0}}, 
                React.DOM.li({className: "campaign-tab"}, " ", React.DOM.a({onClick: this.changeScreen, href: "javascript:", className: tab_1}, "Press")), 
                React.DOM.li({className: "campaign-tab"}, React.DOM.a({onClick: this.changeScreen, href: "javascript:", className: tab_2}, "News")), 
                React.DOM.li({className: "campaign-tab"}, 
                  React.DOM.a({onClick: this.changeScreen, href: "javascript:", className: tab_3, style: {fontSize:12}}, 
                    "Blogs")), 
                React.DOM.li({className: "campaign-tab"}, React.DOM.a({onClick: this.changeScreen, href: "javascript:", className: tab_4}, "Hiring")), 
                React.DOM.li({className: "campaign-tab"}, React.DOM.a({onClick: this.changeScreen, href: "javascript:", className: tab_5}, "Employees")), 
                React.DOM.li({className: "campaign-tab"}, React.DOM.a({onClick: this.changeScreen, href: "javascript:", className: tab_5}, "Similar")), 
                React.DOM.li({className: "campaign-tab"}, React.DOM.a({onClick: this.changeScreen, href: "javascript:", className: tab_5}, "Technologies"))
              ), 
      screen
      )
      )
    )
  }
});

var CompanyPress = React.createClass({displayName: 'CompanyPress',
  render: function() {
    return (
      React.DOM.div(null, 
        "Press"
      )
    )
  }
})

var CompanyNews = React.createClass({displayName: 'CompanyNews',
  render: function() {
    return (
      React.DOM.div(null, 
        "Press"
      )
    )
  }
})

var CompanyBlogPosts = React.createClass({displayName: 'CompanyBlogPosts',
  render: function() {
    return (
      React.DOM.div(null, 
        "Press"
      )
    )
  }
})
var CompanyHiring = React.createClass({displayName: 'CompanyHiring',
  render: function() {
    return (
      React.DOM.div(null, 
        "Press"
      )
    )
  }
})
var CompanyEmployees = React.createClass({displayName: 'CompanyEmployees',
  render: function() {
    return (
      React.DOM.div(null, 
        "Press"
      )
    )
  }
})
var CompanySimilar = React.createClass({displayName: 'CompanySimilar',
  render: function() {
    return (
      React.DOM.div(null, 
        "Press"
      )
    )
  }
})
var CompanyTechnology = React.createClass({displayName: 'CompanyTechnology',
  render: function() {
    return (
      React.DOM.div(null, 
        "Press"
      )
    )
  }
})

},{}],10:[function(require,module,exports){
/** @jsx React.DOM */


module.exports = React.createClass({displayName: 'exports',
  // SignalCard
  render: function() {
    company = this.props.company
    return (
      React.DOM.div({className: "panel panel-default signal-card"}, 
        React.DOM.div({className: "panel-body", style: {paddingLeft:25, paddingRight:25}}, 
          React.DOM.h4({style: {display:'inline-block',width:'100%'}}, 
            React.DOM.span({style: { float:'left',maxWidth: '60%', whiteSpace: 'nowrap',
                overflow: 'hidden', textOverflow: 'ellipsis'}}, 
              company.name), 
            React.DOM.span({className: "label label-success", 
              style: {marginLeft:7, float:'right',fontSize:12,
                maxWidth: '40%', whiteSpace: 'nowrap',
                overflow: 'hidden', textOverflow: 'ellipsis'}}, 
              React.DOM.i({className: "fa fa-suitcase"}), "  ", 
              (company.signals) ? company.signals[0].job_title : ""
            )
          ), 
          React.DOM.a({href: "javascript:", className: "btn btn-success", 
            style: {float:'right',marginTop:15, fontWeight:'bold'}}, 
            "Prospect This Company"), 
          React.DOM.p({style: {fontSize:12,width:'75%'}}, 
            React.DOM.span(null, 
            (company.signals) ? company.signals[0].summary : ""
            )
          ), 
          React.DOM.h6(null, " ", React.DOM.i({className: "fa fa-map-marker"}), 
             " ", (company.signals) ? company.signals[0].location : ""
            )
        )
      )
    );
  }
});

},{}],11:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createListModal
  createCampaign: function(e) {
    e.preventDefault()
    //console.log($('#newListName').val())
    newCampaignName = $('#newCampaignName').val()
    prospectListName = $('#prospect_lists').val()
    thiss = this
    for(i=0;i< this.props.prospectLists.length; i++){
      if(this.props.prospectLists[i].name == prospectListName){
        prospect_list = this.props.prospectLists[i]; 
        break;
      }
    }
    if(newCampaignName.trim() != "")
      this.props.createCampaign({
        name: newCampaignName,
        prospect_list: prospect_list
      })
    // Disable Modal
    $('.modal-backdrop').click()
    $('.fade').click()
    $('#newCampaignName').val('')
  },

  render: function() {
    prospect_lists = []
    for(i=0;i< this.props.prospectLists.length; i++) {
      prospect_lists.push( React.DOM.option(null, this.props.prospectLists[i].name))
    }

    return (
      React.DOM.div({className: "modal fade bs-createCampaign-modal-sm", 
           tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 
           'aria-hidden': "true", id: "createListModal", style: {top:'200px'}}, 
            React.DOM.div({className: "modal-dialog modal-sm"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-envelope"}), "  Create Campaign")
                ), 

                React.DOM.div({className: "modal-body"}, 
                  React.DOM.form({onSubmit: this.createCampaign}, 
                    React.DOM.input({id: "newCampaignName", 
                           type: "text", 
                           placeholder: "Enter Campaign Name...", 
                           className: "form-control"}), 

                    React.DOM.select({className: "form-control", 
                            id: "prospect_lists", 
                            style: {marginTop:20,marginBottom:20}}, 
                      prospect_lists
                    ), 

                    React.DOM.a({href: "javascript:", 
                      onClick: this.createCampaign, 
                      className: "btn btn-success", 
                      style: {display:'block', width:'100%'}}, 
                      "Create Campaign"
                    )
                  )
                )
              )
            )
          )
    );
  }
});


},{}],12:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createCompanyProfileModal
  render: function() {
    return (
      React.DOM.div({className: "modal fade bs-createSignal-modal-md", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", 
           id: "createCompanyProfileModal", 
           style: {top:'50px',overflow:'hidden'}}, 
            React.DOM.div({className: "modal-dialog modal-sm", style: {width:650}}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    "Create Company Profile"
                  ), 
                  React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                     onClick: this.createCompanyProfile, 
                     style: {float:'right',marginTop:-28,marginRight:-5}}, 
                    "Create Profile"
                  )
                ), 
                React.DOM.div({className: "modal-body"}, 
                  CreateHiringSignal(null)
                ), 
              React.DOM.div({className: "modal-footer", style: {display:'none'}}, 
                React.DOM.button({type: "button", className: "btn btn-default"}, 
                  "Close"
                ), 
                React.DOM.button({type: "button", className: "btn btn-primary"}, 
                  "Send Email"
                )
              )
              )
            )
          )
    );
  },

  createCompanyProfile: function() {
    profileName = $(".company-profile-name").val()
    industryProfile = {
      'className': 'IndustryProfile',
      'industries' : $('.company-profile-industries').tagsinput('items').reverse()
    }

    locationProfile = {
      'className': 'LocationProfile',
      'locale'    : $('.company-profile-location').tagsinput('items').reverse()
    }

    employeeProfile = {
      'className':'EmployeeProfile', 
      'employees': _.map($('#company-profile-employeeBtns').find('.active'), 
                        function(revBtn){ return $(revBtn).text().trim() }).reverse()
    }

    revenueProfile = {
      'className':'RevenueProfile', 
      'revenues': _.map($('#company-profile-companyRevenueBtns').find('.active'), 
                        function(revBtn){ return $(revBtn).text().trim() }).reverse()
    }

    console.log(locationProfile)
    
    profiles = [industryProfile, locationProfile,
                employeeProfile, revenueProfile]

    nonemptyProfiles = _.filter(profiles, function(profile) {
      if(_.values(profile)[1]){ return _.values(profile)[1].length }
    });

    newProfile = {
      name: profileName,
      profiles: nonemptyProfiles,
      mining_job:true,
      user:{
        __type:'Pointer',
        className:'_User',
        objectId:JSON.parse(localStorage.currentUser).objectId
      },
      company: JSON.parse(localStorage.currentUser).company
    }

    if(nonemptyProfiles.length) {
      this.persistSignal(nonemptyProfiles, 
                         _.omit(newProfile,'profiles'))
      this.props.addProfile(newProfile)
      $('.modal').click()
    }
  },

  persistSignal: function(nonemptyProfiles, newProfile) {
    console.log('NEW PROFILE')
    console.log(newProfile)
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectProfile',
      headers:appConfig.headers,
      type:'POST',
      data:JSON.stringify(newProfile),
      success:function(ress) {
        // Add Signal List
        _.map(nonemptyProfiles, function(profile) {
          $.ajax({
            url:'https://api.parse.com/1/classes/'+_.values(profile)[0],
            headers:appConfig.headers,
            type:'POST',
            data:JSON.stringify( _.pick(profile, _.keys(profile)[1]) ),
            success:function(res) {
              $.ajax({
                url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
                type:'PUT',
                headers:appConfig.headers,
                data:JSON.stringify({profiles:{
                  __op: 'AddUnique',
                  objects:[{
                    __type:'Pointer',
                    className: _.values(profile)[0],
                    objectId:res.objectId
                  }]}
                }),
              })
            },
          })
        });

      },
    })
  },

});

var CreateHiringSignal = React.createClass({displayName: 'CreateHiringSignal',
  componentDidMount: function() {
    _.map($('.hiring-role'),function(input){$(input).tagsinput()})
    $(this.getDOMNode()).find('.hiring-role').tagsinput()
    $('.bootstrap-tagsinput').width(400)

    $(this.getDOMNode()).find('.btn-default').click(function(e) {

      if($(e.target).parent('label').hasClass('active'))
        $(e.target).parent('label').removeClass('active')
      else
        $(e.target).parent('label').addClass('active')

      console.log($(e.target).parent('label'))
    });
  },

  render: function(){
    return (
      React.DOM.div(null, 
        React.DOM.form({className: "createSignal", onSubmit: this.createSignal}, 
          React.DOM.span(null, 
            React.DOM.h6({style: {width:140,display:'inline-block',marginBottom:20}}, 
              "Company Profile Name:  "), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%'}, 
                   className: "form-control company-profile-name", 
                   placeholder: "Company Profile Name ..."})
          ), 
          React.DOM.br(null), 
          React.DOM.span({style: {display:'block',marginBottom:-10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, 
              "Industries:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control hiring-role company-profile-industries"}), 

                React.DOM.a({href: "javascript:", 
                   className: "btn btn-xs btn-success", style: {display:'none'}}, 
                  React.DOM.i({className: "fa fa-plus"})
                )
          ), 
          React.DOM.br(null), 
          React.DOM.span({style: {display:'block',marginBottom:-10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, 
              "Location:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control hiring-role company-profile-location"}), 

            React.DOM.a({href: "javascript:", 
               className: "btn btn-xs btn-success", style: {display:'none'}}, 
              React.DOM.i({className: "fa fa-plus"})
            )
          ), 
        React.DOM.div(null, 
            React.DOM.br(null), 
            React.DOM.h6({style: {display:'inline-block',margin:0,
                        width:140,marginBottom:20}}, "Company Size "), 
              React.DOM.div({className: "btn-group", 'data-toggle': "buttons", 
                style: {width:'73.5%'}, 
                id: "company-profile-employeeBtns"}, 
                React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                  React.DOM.input({type: "checkbox"}), " 1 - 50"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                  React.DOM.input({type: "checkbox"}), " 50 - 250"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                  React.DOM.input({type: "checkbox"}), " 250 - 1000"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                  React.DOM.input({type: "checkbox"}), " 1000 +"
                )
              ), 

              React.DOM.br(null), " ", React.DOM.h6({style: {display:'none',margin:0,width:140}}, 
                "Approx. Revenue  "), 
              React.DOM.div({className: "btn-group", 'data-toggle': "buttons", 
                style: {display:'none'}, 
                id: "company-profile-companyRevenueBtns"}, 
                React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                  React.DOM.input({type: "checkbox"}), " ", '< $1M'
                ), 
                React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                  React.DOM.input({type: "checkbox"}), " $1M - $5M"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                  React.DOM.input({type: "checkbox"}), " $5M - $25M"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                  React.DOM.input({type: "checkbox"}), " $25M +"
                )
              )
        ), 

          React.DOM.div({style: {marginTop:10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, "Auto Prospect:  "), 
            React.DOM.div({className: "btn-group autoprospect", 'data-toggle': "buttons"}, 
              React.DOM.label({className: "btn btn-sm btn-default active"}, 
                React.DOM.input({type: "radio"}), " Yes"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "radio"}), " No"
              )
            )
          )
        )
      )
    )
  },
});

},{}],13:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createCompanyProfileModal
  createProfile: function(e) {
    e.preventDefault()
    profileName = $('.funding-profile-name').val()
    
    //Stage
    //Amount Raised
    //Company Size
    //Approx Revenue

    amountRaisedProfile = {
      'className':'FundingProfile', 
      'revenues': _.map($('#amountRaisedBtns').find('.active'), 
                        function(revBtn){ return $(revBtn).text().trim() }).reverse()
    }

    console.log(amountRaisedProfile)
    profiles = [amountRaisedProfile]

    nonemptyProfiles = _.filter(profiles, function(profile) {
      if(_.values(profile)[1]){ return _.values(profile)[1].length }
    });

    newProfile = {
      name: profileName,
      profiles: nonemptyProfiles,
      user:{
        __type:'Pointer',
        className:'_User',
        objectId:JSON.parse(localStorage.currentUser).objectId
      },
      company: JSON.parse(localStorage.currentUser).company
    }

    if(nonemptyProfiles.length) {
      this.persistSignal(nonemptyProfiles.reverse(), 
                         _.omit(newProfile,'profiles'))

      this.props.addProfile(newProfile)
      $('.modal').click()
    }
  },

  persistSignal: function(nonemptyProfiles, newProfile) {
    console.log('NEW PROFILE')
    console.log(newProfile)
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectProfile',
      headers:appConfig.headers,
      type:'POST',
      data:JSON.stringify(newProfile),
      success:function(ress) {
        // Add Signal List
        _.map(nonemptyProfiles, function(profile) {
          $.ajax({
            url:'https://api.parse.com/1/classes/'+_.values(profile)[0],
            headers:appConfig.headers,
            type:'POST',
            data:JSON.stringify( _.pick(profile, _.keys(profile)[1]) ),
            success:function(res) {
              $.ajax({
                url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
                type:'PUT',
                headers:appConfig.headers,
                data:JSON.stringify({profiles:{
                  __op: 'AddUnique',
                  objects:[{
                    __type:'Pointer',
                    className: _.values(profile)[0],
                    objectId:res.objectId
                  }]}
                }),
              })
            },
          })
        });

      },
    })
  },

  render: function() {
    return (
      React.DOM.div({className: "modal fade ", tabIndex: "-1", role: "dialog", 
           'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", 
           id: "createFundingSignalModal", 
           style: {top:'50px',overflow:'hidden'}}, 
            React.DOM.div({className: "modal-dialog modal-sm", style: {width:650}}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    "Create Funding Signal"
                  ), 
                  React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                     onClick: this.createProfile, 
                     style: {float:'right',marginTop:-28,marginRight:-5}}, 
                    "Create Profile"
                  )
                ), 
                React.DOM.div({className: "modal-body"}, 

                  React.DOM.div(null, 
                    React.DOM.form({className: "createSignal", onSubmit: this.createProfile}, 
                      React.DOM.span(null, 
                        React.DOM.h6({style: {width:140,display:'inline-block',
                                    marginBottom:20}}, 
                          "Funding Profile Name:  "), 
                        React.DOM.input({type: "text", 
                               style: {display:'inline-block',width:'73.1%'}, 
                               className: "form-control funding-profile-name", 
                               placeholder: "Funding Profile Name ..."})
                      ), 
                      CompanyProfile(null), 

                      React.DOM.div({style: {marginTop:10,display:'none'}}, 
                        React.DOM.h6({style: {width:140,display:'inline-block'}}, 
                          "Auto Prospect:  "), 
                        React.DOM.div({className: "btn-group autoprospect", 
                              'data-toggle': "buttons"}, 
                          React.DOM.label({className: "btn btn-sm btn-default active"}, 
                            React.DOM.input({type: "radio"}), " Yes"
                          ), 
                          React.DOM.label({className: "btn btn-sm btn-default"}, 
                            React.DOM.input({type: "radio"}), " No"
                          )
                        )
                      )
                    )
                  )

                )
              )
            )
          )
    );
  },

  createFundingProfile: function() {
  },

  componentDidMount: function() {
    _.map($('.hiring-role'),function(input){$(input).tagsinput()})
    $(this.getDOMNode()).find('.hiring-role').tagsinput()
    $('.bootstrap-tagsinput').width('59.1%')
  },

});

var CompanyProfile = React.createClass({displayName: 'CompanyProfile',
  companyFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $(this.getDOMNode()).find('.btn-default').click(function(e) {
      label = $(e.target).parent('label')
      if(label.hasClass('active'))
        label.removeClass('active')
      else
        label.addClass('active')
    });
  },

  render: function() {
    return (
      React.DOM.div(null, 
          React.DOM.h6({style: {display:'none',margin:0,
                      width:140,marginBottom:20}}, "Stage "), 
          React.DOM.div({className: "btn-group", 'data-toggle': "buttons", id: "employeeBtns", 
              style: {display:'none'}}, 
              React.DOM.label({className: "btn btn-sm btn-default", style: {width:'20%'}}, 
                React.DOM.input({type: "checkbox"}), " Seed"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default ", style: {width:'20%'}}, 
                React.DOM.input({type: "checkbox"}), " Series A"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default", style: {width:'20%'}}, 
                React.DOM.input({type: "checkbox"}), " Series B"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default", style: {width:'20%'}}, 
                React.DOM.input({type: "checkbox"}), " Series C"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default", style: {width:'20%'}}, 
                React.DOM.input({type: "checkbox"}), " Series D+"
              )
            ), 
            React.DOM.br(null), 
            React.DOM.h6({style: {display:'inline-block',margin:0,width:140,marginBottom:20}}, 
              "Amount Raised  "), 
            React.DOM.div({className: "btn-group profile-btns", 'data-toggle': "buttons", 
              id: "amountRaisedBtns", style: {width:'74%'}}, 
              React.DOM.label({className: "btn btn-sm btn-default amountRaisedBtn", style: {width:'25%'}}, 
                React.DOM.input({type: "checkbox"}), " ", '< $1M'
              ), 
              React.DOM.label({className: "btn btn-sm btn-default amountRaisedBtn", style: {width:'25%'}}, 
                React.DOM.input({type: "checkbox"}), " $1M - $5M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default amountRaisedBtn", style: {width:'25%'}}, 
                React.DOM.input({type: "checkbox"}), " $5M - $25M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default amountRaisedBtn", style: {width:'25%'}}, 
                React.DOM.input({type: "checkbox"}), " $25M +"
              )
            ), 

          React.DOM.br(null), 


          React.DOM.h6({style: {display:'none',margin:0,
                      width:140,marginBottom:20}}, "Company Size "), 
            React.DOM.div({className: "btn-group", 'data-toggle': "buttons", id: "employeeBtns", 
              style: {display:'none'}}, 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 1 - 50"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 50 - 250"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 250 - 1000"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 1000 +"
              )
            ), 

            React.DOM.br(null), " ", React.DOM.h6({style: {display:'none',margin:0,width:140}}, 
              "Approx. Revenue  "), 
            React.DOM.div({className: "btn-group", 'data-toggle': "buttons", id: "revenueBtns", 
              style: {display:'none'}}, 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " ", '< $1M'
              ), 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " $1M - $5M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " $5M - $25M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " $25M +"
              )
            )
      )
    )
  }
});

},{}],14:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // CreateHiringSignalModal
  createSignal: function() {
    profileName = $('.hiring-profile-name').val()
    autoProspect = $('.autoprospect > .active').text() ==  " Yes"

    hiringProfile = {
      'className': 'HiringProfile',
      'roles'    : $('.hiring-roles').tagsinput('items')
    }

    revenueProfile = {
      'className':'RevenueProfile', 
      'revenues': _.map($('#hiring-revenueBtns').find('.active'), 
                        function(revBtn){ return $(revBtn).text().trim() })
    }

    employeeProfile = {
      'className':'EmployeeProfile', 
      'employees': _.map($('#hiring-employeeBtns').find('.active'), 
                         function(empBtn){ return $(empBtn).text().trim() })
    }

    prospectProfile = {
      'className':'ProspectTitleProfile',
      'title_keywords' : $('.prospectRoleKeywords').tagsinput('items')
    }

    profiles = [hiringProfile, revenueProfile, 
                employeeProfile, prospectProfile]

    nonemptyProfiles = _.filter(profiles, function(profile) {
      if(_.values(profile)[1]){ return _.values(profile)[1].length }
    });


    newProfile = {
      name: profileName,
      autoProspect: autoProspect,
      profiles: nonemptyProfiles,
      user:{
        __type:'Pointer',
        className:'_User',
        objectId:JSON.parse(localStorage.currentUser).objectId
      },
      user_company: JSON.parse(localStorage.currentUser).user_company
    }

    if(nonemptyProfiles.length) {
      this.persistSignal(nonemptyProfiles, 
                         _.omit(newProfile,'profiles'))
      this.props.addProfile(newProfile)
      $('.modal').click()
    }
  },

  persistSignal: function(nonemptyProfiles, newProfile) {
    console.log('NEW PROFILE')
    console.log(newProfile)
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectProfile',
      headers:appConfig.headers,
      type:'POST',
      data:JSON.stringify(newProfile),
      success:function(ress) {

        $.ajax({
          url: 'https://api.parse.com/1/classes/CompanyProspectList',
          type: 'POST',
          headers: appConfig.headers,
          data:JSON.stringify(_.pick(newProfile, 
                                     'name','user','list_type',
                                     'open_people', 'company',
                                     'mining_job_list')),
          success: function(res) {
            console.log(res)
            prospectList = appConfig.pointer('CompanyProspectList',res.objectId)
            $.ajax({
              url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
              type:'PUT',
              headers: appConfig.headers,
              data: JSON.stringify({'company_prospect_list':prospectList}),
              success: function(res){ console.log(res) },
              error: function(err){ console.log(err) }
            })
          },
          error: function() { }
        })

        $.ajax({
          url: 'https://api.parse.com/1/classes/ProspectList',
          type: 'POST',
          headers: appConfig.headers,
          data:JSON.stringify(_.pick(newProfile, 
                                     'name','user','list_type',
                                     'open_people', 'company',
                                     'mining_job_list')),
          success: function(res) {
            console.log(res)
            prospectList = appConfig.pointer('ProspectList',res.objectId)
            $.ajax({
              url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
              type:'PUT',
              headers: appConfig.headers,
              data: JSON.stringify({'prospect_list':prospectList}),
              success: function(res){ console.log(res) },
              error: function(err){ console.log(err) }
            })
          },
          error: function() { }
        })
        

        // Add Signal List
        _.map(nonemptyProfiles, function(profile) {
          $.ajax({
            url:'https://api.parse.com/1/classes/'+_.values(profile)[0],
            headers:appConfig.headers,
            type:'POST',
            data:JSON.stringify( _.pick(profile, _.keys(profile)[1]) ),
            success:function(res) {
              $.ajax({
                url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
                type:'PUT',
                headers:appConfig.headers,
                data:JSON.stringify({profiles:{
                  __op: 'AddUnique',
                  objects:[{
                    __type:'Pointer',
                    className: _.values(profile)[0],
                    objectId:res.objectId
                  }]}
                }),
              })
            },
          })
        });

        // Start Mining Job
        $.ajax({
          //url:'https://nameless-retreat-3525.herokuapp.com/mining_job/title',
          ///url:'https://nameless-retreat-3525.herokuapp.com/title_mining_job',
          //url:'http://127.0.0.1:5000/signal/hiring',
          url:'https://nameless-retreat-3525.herokuapp.com/v1/signal/hiring',
          type:'GET',
          data: {profile: ress.objectId, type: "signal"},
          success: function(res) { console.log(res) },
          error: function(err) { console.log(err) }
        })
      

      },
    })
  },

  render: function() {
    return (
      React.DOM.div({className: "modal fade bs-createSignal-modal-md", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "createHiringSignalModal", 
           style: {top:'50px',overflow:'hidden'}}, 
            React.DOM.div({className: "modal-dialog modal-sm", style: {width:650}}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    "Create Hiring Signal"
                  ), 
                  React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                     onClick: this.createSignal, 
                     style: {float:'right',marginTop:-28,marginRight:-5}}, 
                    "Create Signal"
                  )
                ), 
                React.DOM.div({className: "modal-body"}, 
                  CreateHiringSignal(null)
                )
              )
            )
          )
    );
  }
});

var CreateHiringSignal = React.createClass({displayName: 'CreateHiringSignal',
  getInitialState: function() {
    return {
      addCompany: false,
      addProspect: false,
      hideCompanyDetails: false,
      hideProspectDetails: false,
    }
  },

  componentDidMount: function() {

  },
  
  toggleCompany : function() {
    this.setState({addCompany: !this.state.addCompany})
  },

  toggleProspect : function() {
    this.setState({addProspect: !this.state.addProspect})
  },

  toggleCompanyDetails: function() {
    this.setState({hideCompanyDetails: !this.state.hideCompanyDetails})
  },

  toggleProspectDetails: function() {
    this.setState({hideProspectDetails: !this.state.hideProspectDetails})
  },

  componentDidMount: function() {
    $(this.getDOMNode()).find('.hiring-role').tagsinput()
    $('.bootstrap-tagsinput').width(400)
  },

  render: function(){
    addCompany = (!this.state.addCompany) ? React.DOM.a({href: "javascript:", 
                                           onClick: this.toggleCompany, 
                                           className: "btn btn-sm btn-default"}, 
                                          React.DOM.i({className: "fa fa-plus"}), " " + ' ' +
                                          "Add Company Details"
                                        ) : CompanyProfile({hideCompanyDetails: this.state.hideCompanyDetails})

    addProspect = (!this.state.addProspect) ? React.DOM.a({href: "javascript:", 
                                           onClick: this.toggleProspect, 
                                           className: "btn btn-sm btn-default"}, 
                                          React.DOM.i({className: "fa fa-plus"}), " " + ' ' +
                                          "Add Prospect Details"
                                        ) : ProspectProfile({hideProspectDetails: this.state.hideProspectDetails})
    addCompanyStyle = (!this.state.addCompany) ? {display:'block',textAlign:'center'} : {}
    addProspectStyle = (!this.state.addProspect) ? {display:'block',textAlign:'center'} : {}

    closeCompanyBtns = (!this.state.addCompany) ? "" : React.DOM.span(null, React.DOM.a({href: "javascript:", className: "btn btn-xs btn-default", 
               onClick: this.toggleCompany, 
               style: {float:'right',marginTop:-5}}, 
               React.DOM.i({className: "fa fa-times"})), 
               React.DOM.a({href: "javascript:", className: "btn btn-xs btn-default", 
                  onClick: this.toggleCompanyDetails, 
                  style: {float:'right',marginTop:-5,marginRight:5}}, 
              React.DOM.i({className: (this.state.hideCompanyDetails) ? "fa fa-plus" :"fa fa-minus"})
          ))

    closeProspectBtns = (!this.state.addProspect) ? "" : React.DOM.span(null, React.DOM.a({href: "javascript:", className: "btn btn-xs btn-default", 
               onClick: this.toggleProspect, 
               style: {float:'right',marginTop:-5}}, 
               React.DOM.i({className: "fa fa-times"})), 
               React.DOM.a({href: "javascript:", className: "btn btn-xs btn-default", 
               onClick: this.toggleProspectDetails, 
               style: {float:'right',marginTop:-5,marginRight:5}}, 
              React.DOM.i({className: (this.state.hideProspectDetails) ? "fa fa-plus" :"fa fa-minus"})
          ))

    companyHeading = (!this.state.addCompany) ? "" : React.DOM.h5(null, React.DOM.i({className: "fa fa-building"}), "  Company Details")
    prospectHeading = (!this.state.addProspect) ? "" : React.DOM.h5(null, React.DOM.i({className: "fa fa-user"}), "  Prospect Details")
    return (
      React.DOM.div(null, 
        React.DOM.form({className: "createSignal", onSubmit: this.createSignal}, 
          React.DOM.span(null, 
            React.DOM.h6({style: {width:140,display:'inline-block',marginBottom:20}}, 
              "Hiring Profile Name:  "), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'413px'}, 
                   className: "form-control hiring-profile-name", 
                   placeholder: "Hiring Profile Name ..."})
          ), 
          React.DOM.br(null), 
          React.DOM.span(null, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, 
              "Hiring Role Name:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'50%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control hiring-role hiring-roles"}), 

                React.DOM.a({href: "javascript:", 
                   className: "btn btn-xs btn-success", style: {display:'none'}}, 
                  React.DOM.i({className: "fa fa-plus"})
                )
          ), 
          React.DOM.div({style: {marginTop:10}}, 
          React.DOM.h6({style: {width:140,display:'inline-block'}}, "Auto Prospect:  "), 
          React.DOM.div({className: "btn-group autoprospect", 'data-toggle': "buttons"}, 
            React.DOM.label({className: "btn btn-sm btn-default active"}, 
              React.DOM.input({type: "radio"}), " Yes"
            ), 
            React.DOM.label({className: "btn btn-sm btn-default"}, 
              React.DOM.input({type: "radio"}), " No"
            )
          )
          ), 
          React.DOM.div({style: {display:'none'}}, 
            React.DOM.hr(null), " ", closeCompanyBtns, " ", companyHeading, 
            React.DOM.div({style: addCompanyStyle}, " ", addCompany, " "), 

            React.DOM.hr(null), " ", closeProspectBtns, " ", prospectHeading, 
            React.DOM.div({style: addProspectStyle}, " ", addProspect, " ")
          )
        )
      )
    )
  },
  createSignal: function(e) { e.preventDefault() }
});

var CompanyProfile = React.createClass({displayName: 'CompanyProfile',
  companyFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $(this.getDOMNode()).find('.btn-default').click(function(e) {

      if($(e.target).parent('label').hasClass('active'))
        $(e.target).parent('label').removeClass('active')
      else
        $(e.target).parent('label').addClass('active')

      console.log($(e.target).parent('label'))
    });
  },

  render: function() {
    showDetails = (this.props.hideCompanyDetails) ? {display: 'none'} : {display:'block'}
    return (
      React.DOM.div({style: showDetails}, 
        React.DOM.form({className: "createSignal", onSubmit: this.companyFormSubmit}, 
          React.DOM.br(null), 
          React.DOM.h6({style: {display:'inline-block',margin:0,
                      width:140,marginBottom:20}}, "Company Size "), 
            React.DOM.div({className: "btn-group", 'data-toggle': "buttons", id: "hiring-employeeBtns"}, 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " 1 - 50"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " 50 - 250"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " 250 - 1000"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " 1000 +"
              )
            ), 

            React.DOM.br(null), " ", React.DOM.h6({style: {display:'inline-block',margin:0,width:140}}, 
              "Revenue Amount "), 
            React.DOM.div({className: "btn-group", 'data-toggle': "buttons", id: "hiring-revenueBtns"}, 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " ", '< $1M'
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " $1M - $5M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " $5M - $25M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " $25M +"
              )
            )
        )
      )
    )
  }
});

var ProspectProfile = React.createClass({displayName: 'ProspectProfile',
  prospectFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $('.prospectRoleKeywords').tagsinput({
      maxTags: 5,
    })

    $('.bootstrap-tagsinput').width(400)
  },

  render: function() {
    showDetails = (this.props.hideProspectDetails) ? {display: 'none'} : {display:'block'}
    return (
      React.DOM.div({style: showDetails}, 
        React.DOM.form({className: "createSignal", onSubmit: this.prospectFormSubmit}, 
          React.DOM.span(null, 
            React.DOM.span({style: {width:140,display:'inline-block'}}, 
              React.DOM.h6(null, "Job Title Keyword:  ")
            ), 
            React.DOM.input({type: "text", 
                   'data-role': "tagsinput", 
                   style: {width:'400px !important'}, 
                   className: "form-control prospectRoleKeywords", 
                   placeholder: ""})
          )

        )
      )
    )
  }
})

/*
  Funding Profile
  - Amount Raised
  - Stage

  People Profile
  - Locale
  - Title

  Company Profile
  - Industries
  - Revenue
  - Locale
  - # of Employees
*/

var GeneralForm = React.createClass({displayName: 'GeneralForm',

  render: function() {
    return (
        React.DOM.form({className: "createSignal", onSubmit: this.createSignal}, 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-suitcase"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Find Companies Hiring For ..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-users"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Number of Employees ..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-institution"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Amount of Funding ..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-money"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Revenue Amount ..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-wrench"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Using Technologies Such As..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.a({href: "javascript:", 
            onClick: this.createSignal, 
            className: "btn btn-default btn-success", 
            style: {display:'block', width:'100%'}}, 
            "Create Signal"
          )
        )
    )
  }
})

},{}],15:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createListModal
  createList: function() {
    console.log($('#listTitle').val())

    currentUser = JSON.parse(localStorage.currentUser)
    _id = Date.now()
    data =  {
      name : $('#listTitle').val().trim(),
      user : appConfig.pointer('_User', currentUser.objectId),
      user_company: Parse._user_company,
      count: 0,
      tmp: _id
    }
    console.log(data)

    thiss = this;
    listClassName = (this.props.listClassName) ? this.props.listClassName : 'ProspectList'
    var _this = this;
    $.ajax({
      url:'https://api.parse.com/1/classes/'+listClassName,
      type:'POST',
      headers: appConfig.parseHeaders,
      data: JSON.stringify(data),
      success: function(res) { 
        console.log(res) 
        console.log("should be updating")
        _this.props.updateList(_id, res.objectId)
      },
      error: function(err) { console.log(err) }
    });

    data.count = 0

    this.props.createList(data)
    
    $('#createListModal').modal('hide')
    $('body').removeClass('modal-open');
    $('.modal-backdrop').remove();
  },

  createListButtonClick: function() {
    if($('#listTitle').val().trim() != "")
      this.createList()
  },

  createMiningJob: function(e) {
    e.preventDefault()
    console.log('lmao')
    if($('#listTitle').val().trim() != "")
      this.createList()
  },

  render: function() {
    return (
          React.DOM.div({className: "modal fade bs-example-modal-sm", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "createListModal", style: {top:'200px'}}, 
            React.DOM.div({className: "modal-dialog modal-sm"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-list"}), "  Create List")
                ), 
                React.DOM.div({className: "modal-body"}, 
                  React.DOM.form({onSubmit: this.createMiningJob}, 
                    React.DOM.input({id: "listTitle", type: "text", placeholder: "Enter list title...", className: "form-control"}), 
                    React.DOM.br(null), 
                    React.DOM.a({href: "javascript:", onClick: this.createListButtonClick, placeholder: "Enter City Area...", className: "btn btn-success", style: {display:'block', width:'100%'}}, "Create List")
                  )

                )
              )
            )
          )
    );
  }
});


},{}],16:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createSignalModal
  createMiningJob: function(date) {
    var thiss = this;
    $.ajax({
      //url:'http://127.0.0.1:5000/mining_job/hiring',
      url:'https://nameless-retreat-3525.herokuapp.com/mining_job/hiring',
      data: {profile_id: thiss.props.currentProfile.objectId, timestamp: date},
      success: function(res) { console.log(res) },
      error: function(err) {console.log(err.responseText) }
    })
    this.props.createMiningJob(this.props.currentProfile, date)
  },

  render: function() {
    // moment.utc(moment().startOf('day')).valueOf()/1000
    // recieve completed days as props
    //console.log(this.props.currentProfile)
    mining_days = this.props.currentProfile.mining_days
    dates = []
    for(i=0;i< 30; i++) {  
      date = moment().subtract((i+1), 'days').startOf('day')
      mining_day = _.indexOf(mining_days, date.valueOf()/1000) != -1
      dates.push(DownloadDateRow({updateDate: this.updateDate, 
                                  createMiningJob: this.createMiningJob, 
                                  mining_day: mining_day, 
                                  date: date}))
    }

    return (
      React.DOM.div({className: "modal fade bs-createMiningJob-modal-md", 
           tabIndex: "-1", role: "dialog", 
           'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", 
           id: "createMiningJobModal", 
           style: {top:'50px',overflow:'hidden'}}, 
        React.DOM.div({className: "modal-dialog modal-sm", style: {width:350}}, 
          React.DOM.div({className: "modal-content"}, 
            React.DOM.div({className: "modal-header"}, 
              React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                React.DOM.i({className: "fa fa-cloud-download"}), " " + ' ' +
                "Download Prospects"
              ), 
              React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                 onClick: this.createMiningJob, 
                 style: {float:'right',marginTop:-28,
                         marginRight:-5,display:'none'}}, 
                 "Download"
              )
            ), 
            React.DOM.div({className: "modal-body"}, 

              React.DOM.ul({className: "list-group date-download-prospects", 
                  style: {height:400,overflow:'auto',
                  borderBottom:'solid 1px #ddd',
                  cursor:'pointer',
                  borderTop:'solid 1px #ddd'}}, 
                React.DOM.h6({style: {margin:0}}, dates)
              )

            )
          )
        )
      )
    );
  },
});

var DownloadDateRow = React.createClass({displayName: 'DownloadDateRow',
  updateDate: function() {
    //this.createMiningJob()
    date = this.props.date.startOf('day').valueOf()/1000
    //date = moment().subtract((i+1), 'days').startOf('day')
    this.props.createMiningJob(date)
  },

  render: function() {
    loading = (this.props.mining_day) ?  React.DOM.div({className: "profile-loading", style: {float:'right',height:20,width:20}}, 
            React.DOM.div({className: "double-bounce1", style: {backgroundColor:'#5cb85c'}}), 
            React.DOM.div({className: "double-bounce2", style: {backgroundColor:'#5cb85c'}})
          ) : ""
    loading = ""
    return (
        React.DOM.li({onClick: this.updateDate, style: {textAlign:'center'}, 
          className: "list-group-item download-date bg-success", 
          style: (this.props.mining_day) ? {backgroundColor:'#dff0d8',textAlign:'center'} : {textAlign:'center'}}, 
          React.DOM.span({style: {width:85}}, 
            React.DOM.i({className: "fa fa-calendar"}), " ", 
            this.props.date.format('ll'), "      "
          ), 
          React.DOM.a({href: "javascript:", style: {width:89}, 
      className: (this.props.mining_day) ? "btn btn-success btn-xs disabled" : "btn btn-success btn-xs"}, 
            (this.props.mining_day) ? "Downloading" : "Download"), 
          loading
        )
    )
  }
})


},{}],17:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createCompanyProfileModal
  createProfile: function() {
    profileName = $(".profileName").val()

    titleProfile = {
      'className': 'ProspectTitleProfile',
      'title_keywords'    : $('.prospect-profile-title').tagsinput('items').reverse()
    }

    /* */
    
    profiles = [titleProfile]

    nonemptyProfiles = _.filter(profiles, function(profile) {
      if(_.values(profile)[1]){ return _.values(profile)[1].length }
    });
    console.log(nonemptyProfiles)

    newProfile = {
      name: profileName,
      profiles: nonemptyProfiles,
      type: 'prospect_profile',
      mining_job:true,
      list_type:"mining_job",
      only_people:true,
      timestamp: moment().valueOf(),
      done: 0,
      user:{
        __type:'Pointer',
        className:'_User',
        objectId:JSON.parse(localStorage.currentUser).objectId
      },
      company: JSON.parse(localStorage.currentUser).company
    }

    if(nonemptyProfiles.length) {
      this.props.addProfile(newProfile)
      this.persistSignal(nonemptyProfiles, newProfile)
      $('.modal').click()
      $('.prospect-profile-title').val('')
    }
  },

  persistSignal: function(nonemptyProfiles, newProfile) {
    console.log('NEW PROFILE')
    console.log(newProfile)

    var thissss = this;
    var thiss = this;
    var _this = this;
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectProfile',
      headers:appConfig.headers,
      type:'POST',
      data:JSON.stringify(_.omit(newProfile, 'profiles')),
      success:function(ress) {
        
        user_id = JSON.parse(localStorage.currentUser).objectId
        newProfile.user = appConfig.pointer('_User', user_id) 
        newProfile._user_company = Parse._user_company

        $.ajax({
          url:     'https://api.parse.com/1/classes/ProspectList',
          type:    'POST',
          headers: appConfig.headers,
          data:    JSON.stringify(_.pick(newProfile, 
                                     'name','user','list_type',
                                     'open_people', 'company',
                                     'mining_job_list')),
          success: function(res) {
            console.log(res)
            prospectList = appConfig.pointer('ProspectList',res.objectId)
            $.ajax({
              url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
              type:'PUT',
              headers: appConfig.headers,
              data: JSON.stringify({'prospect_list':prospectList}),
              success: function(res){ console.log(res) },
              error: function(err){ console.log(err) }
            })
          },
          error: function() { }
        })

        // Start Mining Job
        if(newProfile.type == 'prospect_profile') {
          $.ajax({
            url: 'https://nameless-retreat-3525.herokuapp.com/title_mining_job',
            //url:'http://127.0.0.1:5000/title_mining_job',
            type:'GET',
            data: {prospect_profile: ress.objectId},
            success: function(res) { console.log(res) },
            error: function(err) { console.log(err) }
          })
        }

        // Create Profiles
        _.map(nonemptyProfiles, function(profile) {
          $.ajax({
            url:'https://api.parse.com/1/classes/'+_.values(profile)[0],
            headers:appConfig.headers,
            type:'POST',
            data:JSON.stringify( _.pick(profile, _.keys(profile)[1]) ),
            success:function(res) {
              $.ajax({
                url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
                type:'PUT',
                headers:appConfig.headers,
                data:JSON.stringify({profiles:{
                  __op: 'AddUnique',
                  objects:[{
                    __type:'Pointer',
                    className: _.values(profile)[0],
                    objectId:res.objectId
                  }]}
                }),
              })
            }
          })
        });

        thiss.props.updateProfileWithObjectId(newProfile.timestamp, ress.objectId)
      }
    })
  },

  render: function() {
    return (
      React.DOM.div({className: "modal fade ", tabIndex: "-1", role: "dialog", 
           'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", 
           id: "createProspectProfileModal", 
           style: {top:'50px',overflow:'hidden'}}, 
            React.DOM.div({className: "modal-dialog modal-sm", style: {width:650}}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    "Create Prospect Profile"
                  ), 
                  React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                     onClick: this.createProfile, 
                     style: {float:'right',marginTop:-28,marginRight:-5}}, 
                    "Create Profile"
                  )
                ), 
                React.DOM.div({className: "modal-body"}, 
                  CreateHiringSignal(null)
                ), 
              React.DOM.div({className: "modal-footer", style: {display:'none'}}, 
                React.DOM.button({type: "button", className: "btn btn-default"}, 
                  "Close"
                ), 
                React.DOM.button({type: "button", className: "btn btn-primary"}, 
                  "Send Email"
                )
              )
              )
            )
          )
    );
  },
  createCompanyProfile: function() {
  },
});

var CreateHiringSignal = React.createClass({displayName: 'CreateHiringSignal',
  getInitialState: function() {
    return {
      addCompany: false,
      addProspect: false,
      hideCompanyDetails: false,
      hideProspectDetails: false,
    }
  },

  componentDidMount: function() {

  },
  
  toggleCompany : function() {
    this.setState({addCompany: !this.state.addCompany})
  },

  toggleProspect : function() {
    this.setState({addProspect: !this.state.addProspect})
  },

  toggleCompanyDetails: function() {
    this.setState({hideCompanyDetails: !this.state.hideCompanyDetails})
  },

  toggleProspectDetails: function() {
    this.setState({hideProspectDetails: !this.state.hideProspectDetails})
  },

  componentDidMount: function() {
    _.map($('.hiring-role'),function(input){$(input).tagsinput()})
    $(this.getDOMNode()).find('.hiring-role').tagsinput()
    $('.bootstrap-tagsinput').width('59.1%')
  },

  render: function(){
    return (
      React.DOM.div(null, 
        React.DOM.form({className: "createSignal", onSubmit: this.createProfile}, 
          React.DOM.span(null, 
            React.DOM.h6({style: {width:140,display:'inline-block',marginBottom:20}}, 
              "Prospect Profile Name:  "), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%'}, 
                   className: "form-control hiring-profile-name profileName", 
                   placeholder: "Prospect Profile Name ..."})
          ), 
          React.DOM.br(null), 
          React.DOM.span({style: {display:'block',marginBottom:-10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, 
              "Title:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control hiring-role prospect-profile-title"}), 

                React.DOM.a({href: "javascript:", 
                   className: "btn btn-xs btn-success", style: {display:'none'}}, 
                  React.DOM.i({className: "fa fa-plus"})
                )
          ), 
          React.DOM.br(null), 
          React.DOM.span({style: {display:'block',marginBottom:-10}}, 
            React.DOM.h6({style: {width:140,display:'none'}}, 
              "Location:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'none',width:'73.1%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control prospect-location-profile-tmp"}), 

                React.DOM.a({href: "javascript:", 
                   className: "btn btn-xs btn-success", style: {display:'none'}}, 
                  React.DOM.i({className: "fa fa-plus"})
                )
          ), 
          React.DOM.span({style: {display:'none',marginBottom:-10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, 
              "Industries:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control "}), 

            React.DOM.a({href: "javascript:", 
               className: "btn btn-xs btn-success", style: {display:'none'}}, 
              React.DOM.i({className: "fa fa-plus"})
            )
          ), 
          CompanyProfile(null), 

          React.DOM.div({style: {display:'none'}}, 
          React.DOM.div({style: {marginTop:10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, "Auto Prospect:  "), 
            React.DOM.div({className: "btn-group autoprospect", 'data-toggle': "buttons"}, 
              React.DOM.label({className: "btn btn-sm btn-default active"}, 
                React.DOM.input({type: "radio"}), " Yes"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "radio"}), " No"
              )
            )
          )
        )
        )
      )
    )
  },
  createSignal: function(e) { e.preventDefault() }
});

var CompanyProfile = React.createClass({displayName: 'CompanyProfile',
  companyFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $(this.getDOMNode()).find('.btn-default').click(function(e) {

      if($(e.target).parent('label').hasClass('active'))
        $(e.target).parent('label').removeClass('active')
      else
        $(e.target).parent('label').addClass('active')

      console.log($(e.target).parent('label'))
    });
  },

  render: function() {
    return (
      React.DOM.div(null, 
          React.DOM.br(null), 
          React.DOM.div({style: {display:'none'}}, 
          React.DOM.h6({style: {display:'inline-block',margin:0,
                      width:140,marginBottom:20}}, "Company Size "), 
                    React.DOM.div({className: "btn-group", 'data-toggle': "buttons", 
                      style: {width:'73.5%'}, id: "prospect-profile-companySizeBtns"}, 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 1 - 50"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 50 - 250"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 250 - 1000"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default employeeBtn"}, 
                React.DOM.input({type: "checkbox"}), " 1000 +"
              )
            )
          ), 

          React.DOM.div({style: {display:'none'}}, 
            React.DOM.br(null), " ", React.DOM.h6({style: {display:'inline-block',margin:0,width:140}}, 
              "Approx. Revenue  "), 
            React.DOM.div({className: "btn-group", 'data-toggle': "buttons", 
              style: {width:'73.5%'}, id: "prospect-profile-companyRevenueBtns"}, 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " ", '< $1M'
              ), 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " $1M - $5M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " $5M - $25M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                React.DOM.input({type: "checkbox"}), " $25M +"
              )
            )
          )
      )
    )
  }
});

var ProspectProfile = React.createClass({displayName: 'ProspectProfile',
  prospectFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $('.prospectRoleKeywords').tagsinput({
      maxTags: 5,
    })
    $('.bootstrap-tagsinput').width(400)
  },

  render: function() {
    showDetails = (this.props.hideProspectDetails) ? {display: 'none'} : {display:'block'}
    return (
      React.DOM.div({style: showDetails}, 
        React.DOM.form({className: "createSignal", onSubmit: this.prospectFormSubmit}, 
          React.DOM.span(null, 
            React.DOM.span({style: {width:140,display:'inline-block'}}, 
              React.DOM.h6(null, "Job Title Keyword:  ")
            ), 
            React.DOM.input({type: "text", 
                   'data-role': "tagsinput", 
                   style: {width:'400px !important'}, 
                   className: "form-control prospectRoleKeywords", 
                   placeholder: ""})
          )
        )
      )
    )
  }
})

},{}],18:[function(require,module,exports){
/** @jsx react.dom */

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {
      
    }
  },

  componentDidMount: function() {
    $('.template-body').html(this.state.templateBody)
  },

  clickedOverlay: function() {
    console.log('clicked overlay')
    this.props.toggleTemplateEditMenu()
  },

  changeMode: function() {
    // Update template html on toggle
    console.log('EDIT MODE')
    console.log(this.state.editMode)
    parse_headers = appConfig.parseHeaders
    if(this.state.editMode){
      $('.summer').destroy();
      this.props.saveTemplate({
        name: this.state.name,
        templateBody: $('.summer').code(),
        templateSubject: $('.subject').val(),
      })
      this.setState({
        templateBody: $('.summer').code(),
        templateSubject: $('.subject').val(),
        editMode: !this.state.editMode,
      })
      $.ajax({
        url:'https://api.parse.com/1/classes/Templates/'+this.props.initialTemplateValues.objectId,
        type:'PUT',
        headers:parse_headers,
        data:JSON.stringify({body: $('.summer').code(),subject: $('.subject').val()}),
        success: function(res) {
          console.log(res)
        },
        error: function(err) {
          console.log(err)
        }
      });
    } else {
      this.setState({ editMode: !this.state.editMode })
    }
  },

  componentDidUpdate: function() {
    /* thiss = this; */

    console.log('OTHER')
    if(this.state.editMode){
      console.log('CALLED')
      // Replace Subject 
      $('.subject').val(this.state.templateSubject)

      $('.summer').summernote({
        height: 200,
        toolbar: [
          ['style', ['bold', 'italic', 'underline', 'clear']],
          ['font', ['strikethrough']],
          ['fontsize', ['fontsize']],
          ['color', ['color']],
          ['para', ['ul', 'ol', 'paragraph']],
          ['height', ['height']],
        ]
      })

      // Initialize Editor with html
      $('.summer').code(this.state.templateBody)
    }
  },


  render: function() {
    subjectPlace = (this.state.editMode) ? react.dom.input({style: {display:'inline',width:480}, className: "form-control subject"}) : this.state.templateSubject

    if(this.state.editMode){
       toggleButton = react.dom.a({href: "javascript:", 
             onClick: this.changeMode, 
             className: "btn btn-success btn-xs", 
             style: {display:'block',float:'right',marginTop:5}}, 
            react.dom.i({className: "fa fa-save"}), "   Save Template")
    } else {
       toggleButton = react.dom.a({href: "javascript:", 
             onClick: this.changeMode, 
             className: "btn btn-primary btn-xs", 
             style: {display:'block',float:'right',marginTop:5}}, 
            react.dom.i({className: "fa fa-pencil-square"}), "   Edit Template")
    }

    return (
      react.dom.div(null, 
      react.dom.div({onClick: this.clickedOverlay, id: "editTemplateOverlay"}), 
      react.dom.div({id: "editTemplateView", 
           className: "panel panel-info", 
           style: {display:'block'}}, 
           react.dom.div({className: "panel-heading", style: {height:50}}, 
             react.dom.h6({style: {float:'left'}}, 
               react.dom.i({className: "fa fa-file-text-o"}), 
               "  " + this.props.initialTemplateValues.name
             ), 
          toggleButton
        ), 
        react.dom.div({className: "panel-body"}, 
          react.dom.div({className: "editTemplateTitle"}, 
            react.dom.span(null, "Subject: "), 
            subjectPlace
          ), 
         react.dom.br(null), 
         react.dom.div({className: "templateDetails"}, 
           react.dom.h6({style: {marginBottom:'0'}, className: "text-muted"}, 
             "Created by Mark on Jul. 21, 2014"
           ), 
           react.dom.h6({style: {marginTop:'0'}, className: "text-muted"}, 
             "last updated 7 days ago"
           )
         ), 
        react.dom.br(null), 
        react.dom.div({className: "panel panel-default"}, 
          react.dom.div({className: "panel-body summer template-body"}
          )
        )
    )
)
)
    );
  }
});

},{}],19:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createCompanyProfileModal
  render: function() {
    return (
      React.DOM.div({className: "modal fade bs-createSignal-modal-md", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", 
           id: "createTerritoryStrategyModal", 
           style: {top:'50px',overflow:'hidden'}}, 
            React.DOM.div({className: "modal-dialog modal-sm", style: {width:650}}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-globe"}), "  " + ' ' +
                    "Create Territory Stategy"
                  ), 
                  React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                     onClick: this.createCompanyProfile, 
                     style: {float:'right',marginTop:-28,marginRight:-5}}, 
                    "Create Profile"
                  )
                ), 
                React.DOM.div({className: "modal-body"}, 
                  CreateHiringSignal(null)
                ), 
              React.DOM.div({className: "modal-footer", style: {display:'none'}}, 
                React.DOM.button({type: "button", className: "btn btn-default"}, 
                  "Close"
                ), 
                React.DOM.button({type: "button", className: "btn btn-primary"}, 
                  "Send Email"
                )
              )
              )
            )
          )
    );
  },

  createCompanyProfile: function() {
    profileName = $(".company-profile-name").val()
    industryProfile = {
      'className': 'IndustryProfile',
      'industries' : $('.company-profile-industries').tagsinput('items').reverse()
    }

    locationProfile = {
      'className': 'LocationProfile',
      'locale'    : $('.company-profile-location').tagsinput('items').reverse()
    }

    employeeProfile = {
      'className':'EmployeeProfile', 
      'employees': _.map($('#company-profile-employeeBtns').find('.active'), 
                        function(revBtn){ return $(revBtn).text().trim() }).reverse()
    }

    revenueProfile = {
      'className':'RevenueProfile', 
      'revenues': _.map($('#company-profile-companyRevenueBtns').find('.active'), 
                        function(revBtn){ return $(revBtn).text().trim() }).reverse()
    }

    console.log(locationProfile)
    
    profiles = [industryProfile, locationProfile,
                employeeProfile, revenueProfile]

    nonemptyProfiles = _.filter(profiles, function(profile) {
      if(_.values(profile)[1]){ return _.values(profile)[1].length }
    });

    newProfile = {
      name: profileName,
      profiles: nonemptyProfiles,
      mining_job:true,
      list_type:'territory',
      user:{
        __type:'Pointer',
        className:'_User',
        objectId:JSON.parse(localStorage.currentUser).objectId
      },
      company: JSON.parse(localStorage.currentUser).company
    }

    if(nonemptyProfiles.length) {
      this.persistSignal(nonemptyProfiles, 
                         _.omit(newProfile,'profiles'))
      this.props.addProfile(newProfile)
      $('.modal').click()
    }
  },

  persistSignal: function(nonemptyProfiles, newProfile) {
    console.log('NEW PROFILE')
    console.log(newProfile)
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectProfile',
      headers:appConfig.headers,
      type:'POST',
      data:JSON.stringify(newProfile),
      success:function(ress) {
        // Add Signal List
        _.map(nonemptyProfiles, function(profile) {
          $.ajax({
            url:'https://api.parse.com/1/classes/'+_.values(profile)[0],
            headers:appConfig.headers,
            type:'POST',
            data:JSON.stringify( _.pick(profile, _.keys(profile)[1]) ),
            success:function(res) {
              $.ajax({
                url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
                type:'PUT',
                headers:appConfig.headers,
                data:JSON.stringify({profiles:{
                  __op: 'AddUnique',
                  objects:[{
                    __type:'Pointer',
                    className: _.values(profile)[0],
                    objectId:res.objectId
                  }]}
                }),
              })
            },
          })
        });

      },
    })
  },

});

var CreateHiringSignal = React.createClass({displayName: 'CreateHiringSignal',
  componentDidMount: function() {
    _.map($('.hiring-role'),function(input){$(input).tagsinput()})
    $(this.getDOMNode()).find('.hiring-role').tagsinput()
    $('.bootstrap-tagsinput').width(400)

    $(this.getDOMNode()).find('.btn-default').click(function(e) {

      if($(e.target).parent('label').hasClass('active'))
        $(e.target).parent('label').removeClass('active')
      else
        $(e.target).parent('label').addClass('active')

      console.log($(e.target).parent('label'))
    });
  },

  render: function(){
    return (
      React.DOM.div(null, 
        React.DOM.form({className: "createSignal", onSubmit: this.createSignal}, 
          React.DOM.span(null, 
            React.DOM.h6({style: {width:140,display:'inline-block',marginBottom:20}}, 
              "Company Profile Name:  "), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%'}, 
                   className: "form-control company-profile-name", 
                   placeholder: "Company Profile Name ..."})
          ), 
          React.DOM.br(null), 
          React.DOM.span({style: {display:'block',marginBottom:-10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, 
              "Industries:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control hiring-role company-profile-industries"}), 

                React.DOM.a({href: "javascript:", 
                   className: "btn btn-xs btn-success", style: {display:'none'}}, 
                  React.DOM.i({className: "fa fa-plus"})
                )
          ), 
          React.DOM.span({style: {display:'block',marginBottom:-10, display:'none'}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, 
              "Location:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'73.1%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control hiring-role company-profile-location"}), 

            React.DOM.a({href: "javascript:", 
               className: "btn btn-xs btn-success", style: {display:'none'}}, 
              React.DOM.i({className: "fa fa-plus"})
            )
          ), 
        React.DOM.div(null, 
            React.DOM.br(null), 
            React.DOM.h6({style: {display:'inline-block',margin:0,
                        width:140,marginBottom:20}}, "Company Size "), 
              React.DOM.div({className: "btn-group", 'data-toggle': "buttons", 
                style: {width:'75.5%'}, 
                id: "company-profile-employeeBtns"}, 
                React.DOM.label({className: "btn btn-sm btn-default employeeBtn", style: {width:'16%'}}, 
                  React.DOM.input({type: "checkbox"}), " 1 - 20"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default employeeBtn", style: {width:'16%'}}, 
                  React.DOM.input({type: "checkbox"}), " 20 - 50"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default employeeBtn", style: {width:'16%'}}, 
                  React.DOM.input({type: "checkbox"}), " 50 - 100"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default employeeBtn", style: {width:'16%'}}, 
                  React.DOM.input({type: "checkbox"}), " 100 - 250"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default employeeBtn", style: {width:'16%'}}, 
                  React.DOM.input({type: "checkbox"}), " 250 - 1000"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default employeeBtn", style: {width:'16%'}}, 
                  React.DOM.input({type: "checkbox"}), " 1000 +"
                )
              ), 

              React.DOM.br(null), " ", React.DOM.h6({style: {display:'none',margin:0,width:140}}, 
                "Approx. Revenue  "), 
              React.DOM.div({className: "btn-group", 'data-toggle': "buttons", 
                style: {display:'none'}, 
                id: "company-profile-companyRevenueBtns"}, 
                React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                  React.DOM.input({type: "checkbox"}), " ", '< $1M'
                ), 
                React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                  React.DOM.input({type: "checkbox"}), " $1M - $5M"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                  React.DOM.input({type: "checkbox"}), " $5M - $25M"
                ), 
                React.DOM.label({className: "btn btn-sm btn-default revenueBtn"}, 
                  React.DOM.input({type: "checkbox"}), " $25M +"
                )
              )
        ), 

          React.DOM.div({style: {marginTop:10}}, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, "Auto Prospect:  "), 
            React.DOM.div({className: "btn-group autoprospect", 'data-toggle': "buttons"}, 
              React.DOM.label({className: "btn btn-sm btn-default active"}, 
                React.DOM.input({type: "radio"}), " Yes"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "radio"}), " No"
              )
            )
          )
        )
      )
    )
  },
});

},{}],20:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // DataRow
  getInitialState: function() {
    return { }
  },

  clickCheck: function() {
    domNode = this.getDOMNode()
    isChecked = $($(domNode).find('input[type="checkbox"]')[0]).prop('checked')
    //console.log(isChecked)
    this.setState({checked: isChecked})
    this.props.checkboxAction(isChecked, this.props.prospect.objectId)
  },

  rowClick: function() {
    $($(this.getDOMNode()).find('input[type="checkbox"]')[0]).click()
  },

  keyboardClick: function() {
    $($('.keySelect').find('input[type="checkbox"]')[0]).click()
  },

  componentDidMount: function() { },

  render: function() {
    keyboardSelected = {borderLeft:'7px solid rgba(0,0,0,0)'}
    thissss = this
    if(this.props.keyboardSelected) {
      // Adjust Scroll depending on where the prospect is
      keyboardSelected = {borderLeft:'7px solid #0096ff !important'}
      Mousetrap.unbind('x')
      Mousetrap.bind('x', function() { 
        thissss.keyboardClick()
        if(thissss.state.checked)
          console.log("lmao")
      });
    }

    prospect = this.props.prospect
    company = (prospect.company) ? prospect.company : prospect.company_info
    company = (company) ? company : {}
    console.log(prospect)

    if(this.props.masterCheckboxChecked && this.state.checked)
      checked = true
    else if(this.props.alreadyChecked)
      checked = true
    else if(this.state.checked)
      checked = true
    else if(this.props.masterCheckboxChecked || this.state.checked)
      checked = true
    else
      checked = false

    // console.log(this.state.checked)
    // console.log(checked)
    // {prospect.employeeCountRange.name + " employees" }
    // Today
    
    color = {}
    if(this.state.checked || this.props.alreadyChecked)
      color = {backgroundColor: '#eef8ff'}
      
    rowCl = (this.props.keyboardSelected) ? "prospects-tr keySelect" : "prospects-tr"
    websiteBtn = (prospect.website) ?  React.DOM.a({href: "http://"+prospect.website.replace('http://',''), className: "btn btn-xs btn-primary btn-gradient", style: {float:'right',marginLeft:5}}, " ", React.DOM.i({className: "fa fa-globe"}), " ") : ""
    //if(parseInt(prospect.linkedin_url.split('/').pop())){
    if(company.linkedin_url){
      btnClass = "btn btn-primary btn-xs btn-gradient"
    } else {
      btnClass = "btn btn-primary btn-xs btn-gradient disabled"
    }
    if(company.logo)
      logo = company.logo

    return (
      React.DOM.tr({className: rowCl, 
          onClick: this.rowClick, 
          style: keyboardSelected}, 
          React.DOM.td({style: color}, 
              React.DOM.input({type: "checkbox", 
                     onChange: this.clickCheck, 
                     checked: checked})
          ), 
          React.DOM.td({style: color}, 
              React.DOM.div({style: {backgroundImage: "url("+company.logo+")"}, 
              className: "company-img-thumbnail"})
          ), 

          React.DOM.td({style: color, 
              className: "fixed-data-column"}, 
            React.DOM.span({style: {fontWeight:'bold',fontSize:15}}, company.company_name), 
            React.DOM.h6({style: {fontWeight:'400',margin:'0px',fontSize:11}}, 
              company.headcount)
          ), 


          React.DOM.td({style: color, 
              className: "fixed-data-column"}, 
            React.DOM.h6({style: {margin:'0px',fontSize:13}}, company.industry), 
            React.DOM.h6({style: {margin:'0px',fontStyle:'italic',marginTop:5,fontSize:11}}, 
              company.city)
          ), 

          React.DOM.td({style: color}, 
            "   ", 
            React.DOM.div({style: {width:290,marginTop:-15}}, 
            React.DOM.a({href: "javascript:", className: btnClass, 
              onClick: this.openLinkedinCompanyProfile}, 
              React.DOM.i({className: "fa fa-search"}), "  " + ' ' +
              "Search Profiles"
            ), 
            "   ", 
            React.DOM.a({href: "javascript:", className: btnClass, 
              onClick: this.openSimilarCompanies}, 
              React.DOM.i({className: "fa fa-copy"}), "  " + ' ' +
              "Find Similar Companies"
            )
            )
          ), 
          React.DOM.td({style: color, 
              className: "fixed-data-column"}, 
            React.DOM.h6({style: {margin:'0px',fontSize:11,paddingTop:5}}, moment(company.createdAt).fromNow())
          ), 

          React.DOM.td({style: color}, " ", React.DOM.h6({style: {margin:'0px'}}, ""), " "), 

          React.DOM.td({style: color}, 
            React.DOM.div({style: {width:92, paddingTop:5}}, 
              this.props.li, " ", 
              websiteBtn
            )
          )
        )
    );
  },

  openLinkedinCompanyProfile: function(e) {
    console.log(this.props.prospect.linkedin_url)
    cid = this.props.prospect.company_info.linkedin_url.split('?')[0].split('/company/')[1]
    console.log(cid)
    window.open("https://www.linkedin.com/vsearch/p?f_CC="+cid)
    e.stopPropagation()
  },

  openSimilarCompanies: function(e) {
    cid = this.props.prospect.company_info.linkedin_url.split('?')[0].split('/company/')[1]
    //window.open("https://www.linkedin.com/vsearch/c?rsid=526440371409184768175&pivotType=sim&pid="+cid+"&trk=sim_companies_res_sim&trkInfo=VSRPsearchId%3A526440371409184768175%2CVSRPtargetId%3A1025%2CVSRPcmpt%3Aprimary")
    window.open("https://www.linkedin.com/vsearch/c?rsid=526440371409184768175&pivotType=sim&pid="+cid+"&trk=sim_companies_res_sim&trkInfo=VSRPsearchId%3A526440371409184768175%2CVSRPtargetId%3A1025%2CVSRPcmpt%3Aprimary")
    e.stopPropagation()
  },

  deleteProspect: function() {
    this.props.deleteProspect(this.props.prospect.objectId, 'Prospect')
  }
});


},{}],21:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createListModal
  createList: function() {
    console.log($('#listTitle').val())

    data =  {
      'name'        : $('#listTitle').val().trim(),   //Waiting , Running
      'user'        : { '__type':'Pointer',
                      'className':'_User',
                      'objectId':'xWESiw5Smd' },
    }

    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectList',
      type:'POST',
      headers: appConfig.parseHeaders,
      data: JSON.stringify(data),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });

    data.count = 0

    this.props.createList(data)
    
    $('#createListModal').modal('hide')
    $('body').removeClass('modal-open');
    $('.modal-backdrop').remove();
    //$('button.close').click()
  },

  createListButtonClick: function() {
    if($('#listTitle').val().trim() != "")
      this.createList()
  },

  createMiningJob: function(e) {
    e.preventDefault()
    console.log('lmao')
    if($('#listTitle').val().trim() != "")
      this.createList()
  },

  deleteList: function() {
    this.props.deleteList()
  },

  render: function() {
    return (
          React.DOM.div({className: "modal fade bs-deleteList-modal-sm", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "createListModal", style: {top:'200px'}}, 
            React.DOM.div({className: "modal-dialog modal-sm"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-trash-o"}), "  Delete List?")
                ), 
                React.DOM.div({className: "modal-body"}, 
                  React.DOM.form({className: "deleteForm", onSubmit: this.deleteList}, 
                    React.DOM.a({href: "javascript:", 
                      onClick: this.deleteList, 
                      className: "btn btn-danger", 
                      style: {display:'block', width:'100%'}}, 
                      "Delete"
                    ), 
                    React.DOM.br(null), 
                    React.DOM.a({href: "javascript:", 
                      onClick: this.deleteList, 
                      className: "btn btn-default", 
                      style: {display:'block', width:'100%'}}, 
                      "Cancel"
                    )
                  )

                )
              )
            )
          )
    );
  }
});


},{}],22:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {
      name: this.props.initialTemplateValues.name,
      body: this.props.initialTemplateValues.body,
      subject: this.props.initialTemplateValues.subject,
      editMode: this.props.initialTemplateValues.editMode
    }
  },

  componentDidMount: function() {
    console.log('did mount')
    $('.template-body').html(this.state.body)
    if(this.state.editMode) {
      $('.summer').summernote({
        height: 200,
        toolbar: [
          ['style', ['bold', 'italic', 'underline', 'clear']],
          ['font', ['strikethrough']],
          ['fontsize', ['fontsize']],
          ['color', ['color']],
          ['para', ['ul', 'ol', 'paragraph']],
          ['height', ['height']],
        ]
      })
    }

    renderjson.set_show_to_level('all')
    prospect = _.pick(this.props.prospect, 
      'company_name', 'name', 'pos'
    )
    prospect.first_name = prospect.name.split(' ')[0]
    prospect.last_name = _.last(prospect.name.split(' '))
    prospect = _.omit(prospect, 'name')

    document.getElementById("editTemplate").appendChild(renderjson(prospect));
    $('#editTemplateOverlay').html()
    thiss = this;
    $('.renderjson').click(function() {
      thiss.props.toggleTemplateEditMenu()
    })

    $('.renderjson').css({
      'position': 'absolute',
      'z-index': '1000000000',
      'background-color':'rgba(0,0,0,0)',
      'border':'0',
      'color':'white',
      'margin-top':'0px',
      'height': '542px',
      'overflow':'auto',
      'width':'380px'
    })

    $('.key').css({
      'cursor':'pointer'
    })

    $('.timeline').css({
      '-webkit-filter': 'blur(10px)',
    })
    $('#campaign-top-detail').css({
      '-webkit-filter': 'blur(10px)',
    })
  },
  componentWillUnmount:function() {
    $('.timeline').css({
      '-webkit-filter': '',
    })
    $('#campaign-top-detail').css({
      '-webkit-filter': '',
    })
  },

  clickedOverlay: function() {
    console.log('clicked overlay')
    this.props.toggleTemplateEditMenu()
  },

  changeMode: function() {
    // Update template html on toggle
    parse_headers = appConfig.parseHeaders
    if(this.state.editMode){
      $('.summer').destroy();
      $('.timeline').css({
        '-webkit-filter': 'blur(20px)',
      })

      console.log('look at this')
      console.log(name)
      name = (this.props.initialTemplateValues.newTemplate) ? $('#template-name').val() : this.state.name
      this.props.saveTemplate({
        name: name,
        body: $('.summer').code(),
        subject: $('.subject').val(),
      }, this.props.initialTemplateValues.newTemplate)

      this.setState({
        name: $('#template-name').val(),
        body: $('.summer').code(),
        subject: $('.subject').val(),
        editMode: !this.state.editMode,
      })

      objId = this.props.initialTemplateValues.objectId
      $.ajax({
        url:'https://api.parse.com/1/classes/Templates/'+objId,
        type:'PUT',
        headers:parse_headers,
        data:JSON.stringify({body: $('.summer').code(),
                             subject: $('.subject').val()}),
        success: function(res) {
          console.log(res)
        },
        error: function(err) {
          console.log(err)
        }
      });
    } else {
      this.setState({ editMode: !this.state.editMode })
      $('.timeline').css({
        '-webkit-filter': 'blur(20px)',
      })
    }
  },

  componentWillUpdate: function(newProps) {
    console.log('THE NEW PROPS')
    console.log(newProps)
  },

  componentDidUpdate: function() {
    /* thiss = this; */
    console.log('OTHER')
    if(this.state.editMode){
      console.log('CALLED')
      // Replace Subject 
      $('.subject').val(this.state.subject)
      $('#template-name').val(this.state.name)

      $('.summer').summernote({
        height: 200,
        toolbar: [
          ['style', ['bold', 'italic', 'underline', 'clear']],
          ['font', ['strikethrough']],
          ['fontsize', ['fontsize']],
          ['color', ['color']],
          ['para', ['ul', 'ol', 'paragraph']],
          ['height', ['height']],
        ]
      })

      // Initialize Editor with html
      $('.summer').code(this.state.body)
    }
  },


  render: function() {
    subjectPlace = (this.state.editMode) ? React.DOM.input({style: {display:'inline',width:480}, className: "form-control subject"}) : this.state.subject

    if(this.state.editMode){
       toggleButton = React.DOM.a({href: "javascript:", 
             onClick: this.changeMode, 
             className: "btn btn-success btn-xs", 
             style: {display:'block',float:'right',marginTop:5}}, 
            React.DOM.i({className: "fa fa-save"}), "   Save Template")

       if(this.props.initialTemplateValues.newTemplate){
         the_name = React.DOM.input({className: "form-control", 
                           id: "template-name", 
                           style: {float:'left',width:200}})
       }
    } else {
       toggleButton = React.DOM.a({href: "javascript:", 
             onClick: this.changeMode, 
             className: "btn btn-primary btn-xs", 
             style: {display:'block',float:'right',marginTop:5}}, 
            React.DOM.i({className: "fa fa-pencil-square"}), "   Edit Template")

       the_name = React.DOM.h6({style: {float:'left'}}, 
                   React.DOM.i({className: "fa fa-file-text-o"}), " ", 
                   this.state.name
                  )
    }

    return (
      React.DOM.div({id: "editTemplate"}, 
        React.DOM.h5({className: "example-template-title"}, "Example Template Values"), 
        React.DOM.div({className: "example-template-title", 
             style: {marginLeft:215, marginTop:8}}, 
          React.DOM.a({href: "javascript:", 
            className: "btn btn-default btn-xs"}, 
            React.DOM.i({className: "fa fa-chevron-left"})), 
          React.DOM.a({href: "javascript:", 
            style: {marginLeft:5}, 
            className: "btn btn-default btn-xs"}, 
            React.DOM.i({className: "fa fa-chevron-right"}))
        ), 
        React.DOM.div({onClick: this.clickedOverlay, id: "editTemplateOverlay"}), 
          React.DOM.div({id: "editTemplateView", 
               className: "panel panel-default", 
               style: {display:'block'}}, 
               React.DOM.div({className: "panel-heading", style: {height:50}}, 
                 the_name, 
              React.DOM.a({href: "javascript:", 
                className: "btn btn-default btn-xs", 
                style: {float:'right',marginLeft:5,marginTop:5}}, 
                React.DOM.i({className: "fa fa-trash"})
              ), 
              toggleButton
            ), 
            React.DOM.div({className: "panel-body"}, 
              React.DOM.div({className: "editTemplateTitle"}, 
                React.DOM.span(null, "Subject: "), 
                subjectPlace
              ), 
             React.DOM.br(null), 
             React.DOM.div({className: "templateDetails"}, 
               React.DOM.h6({style: {marginBottom:'0'}, className: "text-muted"}, 
                 "Created by Mark on Jul. 21, 2014"
               ), 
               React.DOM.h6({style: {marginTop:'0'}, className: "text-muted"}, 
                 "last updated 7 days ago"
               )
             ), 
            React.DOM.br(null), 
            React.DOM.div({className: "panel panel-default"}, 
              React.DOM.div({className: "panel-body summer template-body"}
              )
            )
        )
      )
    )
    );
  }
});

},{}],23:[function(require,module,exports){
/** @jsx React.DOM */

var Templates = require('./templates.js.min.js');
var Schedules = require('./schedule.js.min.js');
var Campaigns = require('./campaigns.js.min.js');
var SentMail = require('./sent_mail.js.min.js');
var FollowupFeed = require('./followup_feed.js.min.js');
var CampaignDetail = require('./campaign_detail.js.min.js');
var CreateCampaignModal = require('./create_campaign.js.min.js');

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {
      selectedScreen: 'Campaigns',
      selectedCampaign:'',
      prospectLists: [],
      campaigns: []
    }
  },

  deleteCampaign: function(objectId) {
    // sweetAlert
    console.log(this.state.campaigns)
    campaigns = _.filter(this.state.campaigns, function(campaign) {
      return campaign.objectId != objectId
    })
    console.log(campaigns)
    this.setState({campaigns: campaigns})
    $.ajax({
      url:'https://api.parse.com/1/classes/Campaign/'+objectId,
      type:'DELETE',
      headers:appConfig.headers,
      success: function(res) { console.log(res) },
      error: function(err) { console.log(err) }
    })
    // persist
    // error log
  },

  componentDidMount: function() {
    thiss = this;
     company = JSON.parse(localStorage.currentUser).company
     user = appConfig.pointer('_User', JSON.parse(localStorage.currentUser).objectId)
     qry = {
       where : JSON.stringify({
         user: user,
         company: company
       }),
       include: 'prospect_list,followups,followups.template,batches',
       order: '-createdAt'
     }
     $.ajax({
       url:'https://api.parse.com/1/classes/Campaign',
      headers: appConfig.headers,
      data: qry,
      success: function(res) {
        console.log(res.results)
        thiss.setState({campaigns: res.results})
        // Find All Prospects In ProspectList that are not in any batches
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
     });
    $.ajax({
      url: 'https://api.parse.com/1/classes/ProspectList',
      data: {
        order: '-createdAt',
        where : JSON.stringify({
          user: appConfig.user,
          company: appConfig.company,
        })
      },
      headers: appConfig.headers,
      success: function(res) {
        console.log('PROSPECT LISTS')
        console.log(res.results)
        thiss.setState({prospectLists: res.results})
      },
      error: function(err) {

      }
    })


  },
  
  toggleScreen: function(screen) {
    this.setState({selectedScreen : screen})
  },

  changeSelectedCampaign: function(screen, selectedCampaign) {
    console.log(selectedCampaign)
    this.setState({
      selectedCampaign : selectedCampaign,
      selectedScreen: screen,
    })
  },

  render: function() {
    thiss = this
    console.log(this.state.selectedCampaign)
    console.log(this.state.selectedScreen)
    console.log(this.state.campaigns)
    switch (this.state.selectedScreen){
      case 'Campaigns':
        CurrentScreen = Campaigns({campaigns: thiss.state.campaigns, 
                            changeSelectedCampaign: thiss.changeSelectedCampaign, 
                            deleteCampaign: this.deleteCampaign, 
                            toggleScreen: thiss.toggleScreen})
        break;
      case 'CampaignDetail':
        CurrentScreen = CampaignDetail({
                        selectedCampaign: thiss.state.selectedCampaign, 
                      selectedCampaignObjectId: thiss.state.selectedCampaginObjectId, 
                        toggleScreen: thiss.toggleScreen})
        break;
      case 'Templates':
        CurrentScreen = Templates(null)
        break;
      case 'Overview':
        CurrentScreen = Campaigns({campaigns: thiss.state.campaigns, 
                            changeSelectedCampaign: thiss.changeSelectedCampaign, 
                            toggleScreen: thiss.toggleScreen})
        break;
      case 'Sent Mail':
        CurrentScreen = SentMail(null)
        break;
      case 'Followup Feed':
        CurrentScreen = FollowupFeed(null)
        break;
      case 'Schedules':
        CurrentScreen = Schedules(null)
        break;
    }

    return (
      React.DOM.div({className: "", style: {height:'550px'}}, 
        React.DOM.div({className: "container", style: {padding:'0',width:'100%',height:'100%'}}, 
          SideMenu({
                createCampaign: this.createCampaign, 
                prospectLists: this.state.prospectLists, 
                toggleScreen: this.toggleScreen}), 
              React.DOM.div({className: "col-md-10", 
                   style: {padding:'0',height:'100%'}}, 
            CurrentScreen
          )
        )
      )
    );
  },

  persistCampaign: function(newCampaign) {
    Campaign = {}
    Campaign.name = newCampaign.name
    Campaign.user = appConfig.pointer('_User', JSON.parse(localStorage.currentUser).objectId)
    Campaign.company = JSON.parse(localStorage.currentUser).company
    var thiss = this;

    $.ajax({
      url:'https://api.parse.com/1/classes/Campaign',
      type:'POST',
      headers:appConfig.headers,
      data:JSON.stringify(Campaign),
      success: function(res) {
        the_campaign = _.find(thiss.state.campaigns, function(campaign){
          first = campaign.name == newCampaign.name 
          second = campaign.prospect_list == newCampaign.prospect_list
          return first && second
        })
        console.log(res)
        console.log(res.objectId)

        the_campaign.objectId = res.objectId
        campaigns = _.filter(thiss.state.campaigns, function(campaign){
          first = campaign.name == newCampaign.name 
          second = campaign.prospect_list == newCampaign.prospect_list
          return !(first && second)
        })
        campaigns.push(the_campaign)
        console.log(campaigns)

        thiss.setState({campaigns:  campaigns})

        $.ajax({
          url:'https://api.parse.com/1/classes/Campaign/'+res.objectId,
          type:'PUT',
          data: JSON.stringify({prospect_list:{
            '__type':'Pointer',
            'className':'ProspectList',
            'objectId':newCampaign.prospect_list.objectId,
          }}),
          headers:appConfig.headers,
          success: function(res){
          },
          error: function() {

          }
        })
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  createCampaign: function(newCampaign) {
    campaigns = this.state.campaigns
    campaigns.push(newCampaign)
    this.setState({campaigns: campaigns})
    console.log(newCampaign)

    $('.modal').click()
    $('.modal-backdrop').click()

    this.persistCampaign(newCampaign)
  }
});

var SideMenu = React.createClass({displayName: 'SideMenu',
  toggleScreen: function(e) {
    this.props.toggleScreen($(e.target).text().trim())
  },

  /*
    <button type="button" className="sharp btn btn-default" onClick={this.toggleScreen}>
      <i className="fa fa-file-text" /> &nbsp; Templates
    </button>
    <button type="button" className="sharp btn btn-default" onClick={this.toggleScreen}>
      <i className="fa fa-clock-o" /> &nbsp; Schedules
    </button>
  */
  createCampaignModal: function() {

  },

  render: function() {
    return (
      React.DOM.div({className: "col-md-2", 
        style: {padding:'0',height:'100%', backgroundColor:'rgb(90, 107, 119)',borderBottomLeftRadius:'3px'}}, 
        React.DOM.div({className: "btn-group-vertical", style: {width:'100%'}}, 
          React.DOM.button({type: "button", 
                  className: "sharp btn btn-default", 
                  onClick: this.toggleScreen}, 
            React.DOM.span({style: {marginLeft:'27px'}}, "Overview")
          ), 
          React.DOM.button({type: "button", 
                  className: "sharp btn btn-default", 
                  onClick: this.toggleScreen}, 
            React.DOM.i({className: "fa fa-newspaper-o"}), "  ",  
            React.DOM.span({style: {marginLeft:'4px'}}, "Followup Feed")
          ), 
          React.DOM.button({type: "button", style: {display:'none'}, 
                  className: "sharp btn btn-default"}, 
            React.DOM.i({className: "fa fa-code-fork"}), "  ",  
            React.DOM.span({style: {marginLeft:'4px'}}, "Rules")
          ), 
          React.DOM.button({type: "button", style: {display:'none'}, 
                  className: "sharp btn btn-default", onClick: this.toggleScreen}, 
            React.DOM.i({className: "fa fa-pie-chart"}), "   Analytics"
          ), 
          React.DOM.button({type: "button", 
                  className: "sharp btn btn-default", 
                  onClick: this.toggleScreen}, 
            React.DOM.i({className: "fa fa-paper-plane"}), "   Sent Mail"
          )
        ), 

        React.DOM.div({className: "", style: {width:'100%',textAlign:'center',marginTop:100}}, 
          React.DOM.a({href: "javascript:", className: "btn btn-primary new-list-btn", 
                'data-toggle': "modal", 'data-target': ".bs-createCampaign-modal-sm", 
                style: { backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
            React.DOM.i({className: "fa fa-plus-circle"}), "  New Campaign"
          )
        ), 
        CreateCampaignModal({prospectLists: this.props.prospectLists, 
                             createCampaign: this.createCampaign})
      )
    );
  },

  createCampaign: function(newCampaign) {
    this.props.createCampaign(newCampaign)
  }
});

},{"./campaign_detail.js.min.js":4,"./campaigns.js.min.js":8,"./create_campaign.js.min.js":11,"./followup_feed.js.min.js":24,"./schedule.js.min.js":45,"./sent_mail.js.min.js":47,"./templates.js.min.js":58}],24:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // FollowupFeed
  getInitialState: function() {
    return {
      scheduledFollowups: []
    }
  },


  render: function() {
    scheduledFollowups = []
    for(i=0;i< this.state.scheduledFollowups.length; i++){ 
      scheduledFollowups.push(ScheduledFollowupRow(null))
    }

    return (
      React.DOM.div({style: {overflow:'auto', height:550}}, 
        React.DOM.table({className: "table table-striped", style: {marginBottom:0}}, 
          React.DOM.thead(null, 
            React.DOM.th(null), 
            React.DOM.th(null, "Prospect Name"), 
            React.DOM.th(null, "Prospect Email"), 
            React.DOM.th({style: {textAlign:'center'}}, "Status")
          ), 
          React.DOM.tbody(null, 
            scheduledFollowups
          )
        )
      )
    );
  }
});

var ScheduledFollowupRow = React.createClass({displayName: 'ScheduledFollowupRow',
  render: function() {
    return (
      React.DOM.tr(null

      )
    );
  }
})

},{}],25:[function(require,module,exports){
/** @jsx React.DOM */
var SendEmailModal = require('./send_email_modal.js.min.js')
var TimelineDayElement = require('./timeline_day_element.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  // FollowupTimeline
  getInitialState: function() {
    initialFollowups = this.props.initialFollowups
    initialFollowups = (initialFollowups) ? initialFollowups : []
    batches = this.props.selectedCampaign.batches
    batches = (batches) ? batches : []
    return {
      followups: _.compact(initialFollowups),
      loading: false,
      currentTemplate:'',
      currentBatch: '',
      batches : batches
    }
  },

  componentDidMount: function() {
    thiss = this;
    $('.day').tooltip({
      placement: 'right',
      title:'+ Add a follow-up'
    })

    console.log(this.props.selectedCampaign)
     company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
     currentCampaign = appConfig.pointer('Campaign', this.props.selectedCampaign.objectId)
     $.ajax({
       url:'https://api.parse.com/1/classes/Followup',
       type:'GET',
       headers: appConfig.headers,
       data: {
         where: JSON.stringify({
           campaign: currentCampaign,
           company: appConfig.company
         }),
         include:'template',
       },
       success: function(res) {
         console.log('followup timeline')
         console.log(res.results)
       },
       error: function(err) {
         console.log('error')
         console.log(err)
       }
     })
  },

  addFollowupSentToBatch: function(batch, followup) {
    batches = _.map(this.state.batches, function(_batch) {
                  if(_batch.objectId == batch.objectId) {
                    if(_batch.followups)
                      _batch.followups.push(followup)
                    else
                      _batch.followups = [followup]
                  }
                  return _batch
              })
    // Persist
  },
  
  render: function() {
    timelineElements = []
    followups = this.state.followups

    batches = _.map(this.state.batches, function(batch) {
      if(batch){
        now = moment().startOf('day').valueOf()
        batch.currentDay = moment(batch.started).diff(moment(now),  'days') * -1
        return batch
      }
    })
    batches = _.compact(batches)

    for(i=0;i< 31;i++){
      followup = _.findWhere(this.state.followups, {day: i})
      var elementType = (followup) ? true : false
      var currentTemplate = (followup) ? followup.template : false
      var addTemplateMode = (followup) ? followup.addTemplateMode : true
      campaign = this.props.selectedCampaign

      currentBatch = {}
      batch_started_today = false
      alreadySent = false
      batchCount = undefined
      if(i == 0) {
        batchCount = (batches) ? this.props.newProspects.length : this.props.prospects.length
      } else {
        batch = _.findWhere(batches, {currentDay: i})
        if(batch) {
          currentBatch = batch.objectId
          console.debug(batch.objectId)
          batchCount = "~"
          if(followup) {
            _batches = followup.batches
            alreadySent = _.findWhere(_batches, _.pick(batch,'objectId'))
          }
        }
      }

      timelineElements.push(React.DOM.div(null, TimelineDayElement({
                                    dayCount: i, 
                                    elementType: !elementType, 
                                    currentTemplate: currentTemplate, 
                                    batchCount: batchCount, 
                                    currentBatch: currentBatch, 
                                    alreadySent: alreadySent, 
                                    addTemplateMode: addTemplateMode, 
                                    templates: this.props.templates, 
                                    newProspects: this.props.newProspects, 
                                    addFollowup: this.addFollowup, 
                                    editFollowup: this.editFollowup, 
                                    saveFollowup: this.saveFollowup, 
                                    removeFollowup: this.removeFollowup, 
                                 addFollowupSentToBatch: this.addFollowupSentToBatch, 
                                    batches: this.props.selectedCampaign.batches, 
                                    prospectListCount: this.props.prospectListCount, 
                                    setCurrentBatch: this.setCurrentBatch, 
                                    setCurrentTemplate: this.setCurrentTemplate})
                                  ))

      if(i == 0 && _.findWhere(batches, {currentDay: 0})){
          currentBatch = _.findWhere(batches, {currentDay: 0}).objectId
          console.debug('0.5')
          console.debug(currentBatch)
          batchCount = "~"
          timelineElements.push(React.DOM.div(null, TimelineDayElement({
                                  dayCount: 0.5, 
                                  batchCount: batchCount, 
                                  currentBatch: currentBatch, 
                                  newProspects: this.props.newProspects, 
                                  elementType: true, 
                                  batches: this.props.selectedCampaign.batches, 
                                  prospectListCount: this.props.prospectListCount, 
                                  setCurrentBatch: this.setCurrentBatch})
                                ))
      }
    }
    return (
      React.DOM.div(null, 
        React.DOM.div({className: "timeline", 
             style: {height:'100%',backgroundColor:'rgb(90, 107, 119)', width:5,marginTop:-35}}, 
             timelineElements
        ), 
        SendEmailModal({prospects: this.props.prospects, 
                        selectedCampaign: this.props.selectedCampaign, 
                        newProspects: this.props.newProspects, 
                        addFollowupSentToBatch: this.addFollowupSentToBatch, 
                        currentBatch: this.state.currentBatch, 
                        currentTemplate: this.state.currentTemplate})
      )
    );
  },

  createFollowup: function() {
    //
  },         

  addFollowup: function(day) {
    //console.log('called template edit menu')
    followups = this.state.followups
    followups.push({addTemplateMode: true, day: day})
    this.setState({ followups: followups })
  },

  editFollowup: function(day) {
    // find template set editmode is false
    followups = _.map(this.state.followups, function(followup) {
      if(followup.day == day){ followup.addTemplateMode = true }
      return followup
    })
    this.setState({followups: followups})
  },

  saveFollowup: function(day, chosenTemplate) {
    new_followups = _.map(this.state.followups, function(followup) {
      if(followup.day == day){
        followup.addTemplateMode = false
        followup.template = chosenTemplate
      }
      return followup
    })
    this.setState({followups: new_followups})
    followup = _.findWhere(new_followups, {day: day})

      if(followup.objectId){
        url = "/"+followup.objectId; type="PUT"
        data = {template: appConfig.pointer('Template', chosenTemplate.objectId)}
      } else {
        url = ""; type="POST";

          data = {
            day: day,
            campaign : appConfig.pointer('Campaign', 
                                         this.props.selectedCampaign.objectId),
            template: appConfig.pointer('Template', chosenTemplate.objectId),
          }
      }

    thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/classes/Followup'+url,
      type:type,
      data:JSON.stringify(data),
      headers:appConfig.headers,
      success: function(res) {
        new_followups = _.map(new_followups, function(followup) {
          if(followup.day == day) { followup.objectId = false }
          return followup
        })
        thiss.setState({followups: new_followups})

        console.log(res)
        $.ajax({
          url:'https://api.parse.com/1/classes/Campaign/'+thiss.props.selectedCampaign.objectId,
          type:'PUT',
          data:JSON.stringify({followups: {
            __op: 'AddUnique',
            objects:[appConfig.pointer('Followup', res.objectId)]
          }}),
          headers:appConfig.headers,
          success: function() { },
          error: function() { }
        })
      },
      error: function() { },
    })
  },

  removeFollowup: function(day) {
    followups = []
    for(i=0;i< this.state.followups.length;i++)
      if(this.state.followups[i].day != day)
        followups.push(this.state.followups[i])
      
    for(i=0;i< this.state.followups.length;i++)
      if(this.state.followups[i].day == day)
        break
    
    this.setState({followups: followups}) 
    id = this.state.followups[i]

    thiss = this;
    if(id) {
      id = id.objectId
      $.ajax({
        url:'https://api.parse.com/1/classes/Followup/'+id,
        headers:appConfig.headers,
        type:'DELETE',
        success: function(res) { console.log(res) }
      })

     console.log('REMOVE ARRAY')
      $.ajax({
        url:'https://api.parse.com/1/classes/Campaign/'+thiss.props.selectedCampaign.objectId,
        headers:appConfig.headers,
        type:'PUT',
        data: JSON.stringify({
          followups: {
            __op : 'Remove',
            objects: [appConfig.pointer('Followup', id)]
          }
        }),
        success: function(res){ console.log(res) },
        error: function() { }
      })
    }
  },

  setCurrentBatch: function(currentBatch) {
    this.setState({currentBatch: currentBatch})
  },

  setCurrentTemplate: function(template) {
    this.setState({currentTemplate: template })
  }
});

},{"./send_email_modal.js.min.js":46,"./timeline_day_element.js.min.js":62}],26:[function(require,module,exports){
/** @jsx React.DOM */

data = require('../lib/data.min.js') 

module.exports = React.createClass({displayName: 'exports',
  // free trial
  open: function() {
    console.log('open')
    handler.open({
      name: 'Customero',
      description: 'Get 900 free email credits!',
      amount: 0,
      panelLabel: "Start Your Free Trial!",
      open: function() {
        console.log($('.close'))
        $('.close').hide()
      },
      closed: function() {
        console.log("closed")
      }
    });
  },

  componentDidMount: function() {
    $('body').css({overflow:'hidden'})


    //console.log(this.getDOMNode())
    /*
    $(this.getDOMNode()).append(' <form action="" method="POST"> <script src="https://checkout.stripe.com/checkout.js" class="stripe-button" data-key="pk_test_4T5Pftl4ho0EgFVo1G7OKRda" data-amount="2000" data-name="Demo Site" data-description="2 widgets ($20.00)" data-image=""> </script> </form>')

  setTimeout(function() {
    console.log($('.stripe-button-el').html())
    $('.stripe-button-el').click()

  }, 400)
*/

  },

  render: function() { 
  data = data()
    imgs_1 = []
    imgs_2 = []
    for(i=0;i < 120; i++) {
      imgs_1.push(React.DOM.img({src: data[i], className: "prospect-img"}))
    }
    for(i=15;i < 30; i++) {
      imgs_2.push(React.DOM.img({src: data[i], className: "prospect-img"}))
    }

  console.log(data)
    return (
      React.DOM.div(null, 
      React.DOM.div({id: "signup"}, " "), 

      React.DOM.div(null, 
        React.DOM.h1({className: "title"}, "Customero."), 
        React.DOM.h5({className: "tagline"}, "Get 900 free email credits. 100% refund guarantee.  We will only start charging your card after 1 month.")

      ), 

      React.DOM.div({id: "", style: {position:'absolute',zIndex:'-2',top:0,left:0}}, 
        React.DOM.div({className: "", style: {marginLeft:34}}, 
        imgs_1, 
        imgs_2
        )
      )
      )
    )
  }
});

},{"../lib/data.min.js":67}],27:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Spinner
  render: function() {
    return (
      React.DOM.div({className: "horizantal-spinner"}, 
        React.DOM.div({className: "hoz-bounce1"}), 
        React.DOM.div({className: "hoz-bounce2"}), 
        React.DOM.div({className: "hoz-bounce3"})
      )
    )
  }
})

},{}],28:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Landing Page
  login: function() {
    console.log('login')
    email = $('#email').val()
    password = $('#password').val()
    p = {"X-Parse-Application-Id": "N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ",
         "X-Parse-REST-API-Key": "VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb"}
    $.ajax({
      url:'https://api.parse.com/1/login',
      headers: p,
      type:'GET',
      data: {
        'username':email,
        'password':password
      },
      success:function(res) {
        localStorage.setItem('currentUser', JSON.stringify(res))
        location.href = "#"
      },
      error: function(res) {
        console.log(res)
      }
    });
  },

  render: function() {
    $('body').css({overflow:'auto'})

    return (
      React.DOM.div({className: ""}, 
        React.DOM.div({className: "background-image"}), 
        React.DOM.nav({className: "thenavbar navbar navbar-default navbar-fixed-top", role: "navigation", style: {padding:70}}, 
          React.DOM.div({className: "container-fluid"}, 
            React.DOM.a({className: "the-title tk-foco brand navbar-brand", style: {fontWeight:'100'}, 
                href: "#"}, 
              "Customero", 
              React.DOM.span({style: {fontSize:'22px',marginLeft:'30px'}}, "Supercharge your sales! ")
            )
          ), 
          React.DOM.a({href: "#login", className: "btn-lg btn login-btn"}, "Log In")
        ), 
        React.DOM.div({className: "col-md-12", style: {marginTop:'100px',paddingTop:'100px'}}, 
          React.DOM.h1({style: {color:'#1ca3fd',fontWeight:'bold',textAlign:'center',fontSize:'56px'}}, " Generate High Quality Prospect Lists "), 
          React.DOM.h1({style: {color:'#1ca3fd',fontWeight:'100',textAlign:'center',fontSize:'56px'}}, " Accelerate Sales "), 
          React.DOM.a({href: "#signup", className: "btn-lg btn-success btn start-trial"}, "Start Your Free Trial Today"), 

          React.DOM.div({className: "panel panel-default", style: {display:'none'}}, 
          React.DOM.div({className: "panel-heading"}, " "), 
            React.DOM.div({className: "panel-body"}, 
              React.DOM.form({onSubmit: this.login}, 
              React.DOM.input({placeholder: "Email", id: "email", type: "text", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Password", type: "password", id: "password", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.a({href: "javascript:", onClick: this.login, className: "btn btn-success btn-lg", style: {display:'block',backgroundColor:'#1ca3fd'}}, "Log In")
              )
            ), 
          React.DOM.div({className: "panel-footer"}, " ")
          )
        ), 
        React.DOM.div({className: "gradient"}, " ")
      )
    );
  }
});

},{}],29:[function(require,module,exports){
/** @jsx React.DOM */

var MarketingFooter = require('./marketing_footer.js.min.js');

module.exports = React.createClass({displayName: 'exports',
  // Landing Page
  login: function() {
    console.log('login')
    email = $('#email').val()
    password = $('#password').val()
    p = {"X-Parse-Application-Id": "N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ",
         "X-Parse-REST-API-Key": "VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb"}
    $.ajax({
      url:'https://api.parse.com/1/login',
      headers: p,
      type:'GET',
      data: {
        'username':email,
        'password':password
      },
      success:function(res) {
        localStorage.setItem('currentUser', JSON.stringify(res))
        location.href = "#"
      },
      error: function(res) {
        console.log(res)
      }
    });
  },
  componentDidMount: function() {
    particles()
  },

  render: function() {
    $('body').css({overflow:'auto'})

    return (
      React.DOM.div({className: "particles-js", id: "particles-js"}, 
        React.DOM.nav({className: "thenavbar navbar navbar-default", role: "navigation", style: {padding:70}}, 
          React.DOM.div({className: "container-fluid", style: {fontFamily:'proxima-nova', fontSize:12}}, 
            React.DOM.a({href: "#"}, 
            React.DOM.img({className: "", src: "build/img/full-logo-5.png", style: {width:220}})
          ), 
              React.DOM.ul({className: "nav nav-pills landing-page-nav", role: "tablist", style: {marginRight:0,fontSize:11,marginTop:-70}}, 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", style: {display:'block'}, href: "#login"}, "LOGIN")), 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", style: {display:'block'}, href: "http://resources.customerohq.com/v1.0/blog"}, "BLOG")), 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", href: "http://resources.customerohq.com"}, "RESOURCES")), 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", href: "http://resources.customerohq.com/v1.0/discuss"}, "KNOWLEDGE BASE")), 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", href: "#"}, "+1905-616-7602 ", React.DOM.i({className: "fa fa-phone"})))
              )
          ), 
          React.DOM.a({href: "#signup", className: "btn-lg btn login-btn", style: {fontFamily:'proxima-nova'}}, "TRY IT"), 
              React.DOM.ul({className: "nav nav-pills landing-page-nav", role: "tablist", style: {width:600,fontSize:13,marginRight:100,marginTop:-45}}, 
                React.DOM.li({style: {width:'24%',textAlign:'center',display:'block'}}, " "), 
                React.DOM.li({style: {width:'24%',textAlign:'center',display:'none'}}, 
                  React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#"}, "PRODUCT")), 
                React.DOM.li({style: {width:'24%',textAlign:'center',display:'none'}}, 
                  React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#"}, "DATA")), 
                React.DOM.li({style: {width:'24%',textAlign:'center'}}, React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#product/features"}, "FEATURES")), 
                React.DOM.li({style: {width:'24%',textAlign:'center',display:'none'}}, 
                  React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#"}, "INTEGRATIONS")), 
                React.DOM.li({style: {width:'24%',textAlign:'center'}}, React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#pricing"}, "PRICING")), 
                React.DOM.li({style: {width:'24%',textAlign:'center'}}, React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#services"}, "SERVICES"))
              )
        ), 

        React.DOM.div({className: "row", style: {margin:0}}, 
        React.DOM.div({className: "gradient-2"}), 
        React.DOM.div({className: "the-background-image"}), 
        React.DOM.div({className: "col-md-12 col-sm-12", style: {paddingTop:'80px'}, id: ""}, 
          React.DOM.h1({style: {color:'#1ca3fd',fontWeight:'100',color:'white',textAlign:'center',fontSize:'38px',fontFamily:'Open Sans',fontSize:'40px'}}, 
            "Generate High Quality Prospect Lists" 
          ), 
          React.DOM.h1({style: {color:'#1ca3fd',fontWeight:'100',textAlign:'center',color:'white',fontSize:'46px',fontFamily:'Open Sans', fontStyle:'italic'}}, 
            "Find New Customers Faster"
          ), 
          React.DOM.a({href: "#signup", className: "btn-lg btn-success btn start-trial", style: {display:'none'}}, "Start Your Free Trial Today"), 

          React.DOM.div({className: "panel panel-default", style: {display:'none'}}, 
          React.DOM.div({className: "panel-heading"}, " "), 
            React.DOM.div({className: "panel-body"}, 
              React.DOM.form({onSubmit: this.login}, 
              React.DOM.input({placeholder: "Email", id: "email", type: "text", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Password", type: "password", id: "password", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 

              React.DOM.a({href: "javascript:", onClick: this.login, className: "btn btn-success btn-lg", style: {display:'block',backgroundColor:'#1ca3fd'}}, "Log In")
              )
            ), 
          React.DOM.div({className: "panel-footer"}, " "), 
        React.DOM.div({className: "the-gradient-1"})
          )
        )
      ), 

        React.DOM.div({className: "container product-header chrome-bar", 
             style: {height:100,paddingTop:45, marginTop:113}}, 
             React.DOM.div({className: "col-md-4", style: {textAlign:'center',fontFamily:'proxima-nova', fontSize:12}}, React.DOM.i({className: "fa fa-line-chart"}), " GROW PIPELINE FAST"), 
          React.DOM.div({className: "col-md-4", style: {textAlign:'center',fontFamily:'proxima-nova', fontSize:12}}, React.DOM.i({className: "fa fa-search"}), " IDENTIFY HIGH-VALUE PROSPECTS"), 
          React.DOM.div({className: "col-md-4", style: {textAlign:'center',fontFamily:'proxima-nova', fontSize:12}}, React.DOM.i({className: "fa fa-coffee"}), " CONNECT WITH DECISION MAKERS  ")
        ), 

      React.DOM.div({className: "container", style: {fontFamily:'open-sans'}}, 
        React.DOM.div({className: "row", style: {height:300}}, 
          React.DOM.div({className: "col-md-offset-1 col-md-6"}, 
            React.DOM.h1({style: {color:'rgb(0, 132, 255)'}}, " Grow Pipeline Fast"), " ", React.DOM.br(null), 
            React.DOM.h5({style: {fontWeight:100,lineHeight:1.7, fontStyle:'italic'}}, 
              "Automate list building through the power of social networks and sync contact information directly to your CRM"
            ), 
            React.DOM.h5({className: "text-muted", style: {fontWeight:100,lineHeight:1.7}}, 
              " Customero searches through social profiles on the web to find you the exact prospects you're looking for. Add prospects to lists with one click. Once you have your list you can start qualifying leads and tracking down new leads."
            )

          ), 
        React.DOM.div({className: "col-md-4"}, " ", React.DOM.i({className: "fa fa-line-chart lp-icon"}), 
            React.DOM.div({className: "col-md-1"}, " ")
        )
        )
      ), 

      React.DOM.div({style: {borderBottom: '1px solid #ecedee', borderTop: '1px solid #ecedee', backgroundColor:'#f5f7f9',fontFamily:'open-sans'}}, 
        React.DOM.div({className: "container"}, 
          React.DOM.div({className: "row", style: {height:300}}, 
            React.DOM.div({className: "col-md-4 col-md-offset-1"}, React.DOM.i({className: "fa fa-search lp-icon"}), "  "), 
            React.DOM.div({className: "col-md-6"}, 
            React.DOM.h1({style: {color:'rgb(0, 132, 255)'}}, 
              "Identify High-Value Prospects In Real Time"
            ), 
            React.DOM.h5({style: {fontWeight:100,lineHeight:1.7, fontStyle:'italic'}}, " ", React.DOM.br(null), 
              "Customero tracks over 2 million US, Canadian and International companies and our database is growing daily." 
            ), 
            React.DOM.h5({className: "text-muted", style: {fontWeight:100, lineHeight:1.7}}, 
          "Customero sits at the top of your sales funnel, proactively identifying and delivering high value prospects. This enables you to be first to call on a prospect with a high quality signal - such as funding, product launch, hiring, or job posting and many others."
            )
            ), 
            React.DOM.div({className: "col-md-1"}, " ")
          )
        )
      ), 

      React.DOM.div({style: {fontFamily:'open-sans'}}, 
          React.DOM.div({className: "container"}, 
            React.DOM.div({className: "row", style: {height:300}}, 
              React.DOM.div({className: "col-md-6 col-md-offset-1"}, " ", React.DOM.h1({style: {color:'rgb(0, 132, 255)'}}, "Connect With Decision Makers "), " ", React.DOM.br(null), 
                React.DOM.h5({style: {fontWeight:100,lineHeight:1.7, fontStyle:'italic'}}, 
                  "Create hyper-targeted email campaigns using our data-driven sales automation platform."
                ), 
                React.DOM.h5({style: {fontWeight:100,lineHeight:1.7}, className: "text-muted"}, 
                  " With Customero Sales Tracking, Templates and Analytics, put the most powerful sales acceleration platform to work for you and your team."
                )

              ), 
              React.DOM.div({className: "col-md-4"}, " ", React.DOM.i({className: "fa fa-coffee lp-icon"}), " "), 
            React.DOM.div({className: "col-md-1"}, " ")
            )
          )
      ), 

      React.DOM.div({style: {borderBottom: '1px solid #edeeef', borderTop: '1px solid #edeeef', 
                   paddingTop:50, backgroundColor:'#f5f8fa'}}, 
        React.DOM.div({className: "container"}, 
          React.DOM.div({className: "row", style: {height:200, textAlign:'center'}}, 
            React.DOM.h2(null, "Give Customero a try. Free 14-day trial available for all plans."), 
            React.DOM.br(null), 
            React.DOM.a({href: "#signup", className: "btn btn-success btn-lg start-trial", style: {marginTop:10}}, 
              "START A NO-RISK FREE TRIAL  ", React.DOM.i({className: "fa fa-chevron-right", style: {fontSize:18}})
            )
          )
        )
      ), 

      React.DOM.div({class: "tmp-footer"})

      )
    );
  }
});


},{"./marketing_footer.js.min.js":34}],30:[function(require,module,exports){
/** @jsx React.DOM */
var MarketingFooter = require('./marketing_footer.js.min.js');

module.exports = React.createClass({displayName: 'exports',
  render: function() {
    return (
      React.DOM.div({className: "particles-js", id: "particles-js"}, 
        React.DOM.nav({className: "thenavbar navbar navbar-default", role: "navigation", style: {padding:70}}, 
          React.DOM.div({className: "container-fluid", style: {fontFamily:'proxima-nova', fontSize:12}}, 
            React.DOM.a({href: "#"}, 
            React.DOM.img({className: "", src: "build/img/full-logo-5.png", style: {width:220}})
          ), 
              React.DOM.ul({className: "nav nav-pills landing-page-nav", role: "tablist", style: {marginRight:0,fontSize:11,marginTop:-70}}, 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", style: {display:'block'}, href: "#"}, "LOGIN")), 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", style: {display:'block'}, href: "#"}, "BLOG")), 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", href: "#pricing"}, "RESOURCES")), 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", href: "#pricing"}, "KNOWLEDGE BASE")), 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", href: "#pricing"}, "+1905-616-7602 ", React.DOM.i({className: "fa fa-phone"})))
              )
          ), 
          React.DOM.a({href: "#signup", className: "btn-lg btn login-btn", style: {fontFamily:'proxima-nova'}}, "TRY IT"), 
              React.DOM.ul({className: "nav nav-pills landing-page-nav", role: "tablist", style: {width:600,fontSize:13,marginRight:100,marginTop:-45}}, 
                React.DOM.li({style: {width:'24%',textAlign:'center',display:'block'}}, " "), 
                React.DOM.li({style: {width:'24%',textAlign:'center',display:'none'}}, 
                  React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#"}, "PRODUCT")), 
                React.DOM.li({style: {width:'24%',textAlign:'center',display:'none'}}, 
                  React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#"}, "DATA")), 
                React.DOM.li({style: {width:'24%',textAlign:'center'}}, React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav active", style: {display:'block'}, href: "#product/features"}, "FEATURES")), 
                React.DOM.li({style: {width:'24%',textAlign:'center',display:'none'}}, 
                  React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#"}, "INTEGRATIONS")), 
                React.DOM.li({style: {width:'24%',textAlign:'center'}}, React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#pricing"}, "PRICING")), 
                React.DOM.li({style: {width:'24%',textAlign:'center'}}, React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#services"}, "SERVICES"))
              )
        ), 
        React.DOM.div({className: "row", style: {margin:0}}, 
        React.DOM.div({className: "gradient-2"}), 
        React.DOM.div({className: "features-background-image"}), 
        React.DOM.div({className: "col-md-12 col-sm-12", style: {paddingTop:'80px'}}, 
          React.DOM.h1({style: {color:'#1ca3fd',fontWeight:'100',color:'white',textAlign:'center',fontSize:'38px',fontFamily:'Open Sans',fontSize:'40px'}}, 
            "Close more deals with powerful prospecting features."
          ), 
          React.DOM.h1({style: {color:'#1ca3fd',fontWeight:'100',textAlign:'center',color:'white',fontSize:'46px',fontFamily:'Open Sans', fontStyle:'italic',display:'none'}}, " Accelerate Sales "), 
          React.DOM.a({href: "#signup", className: "btn-lg btn-success btn start-trial", style: {display:'none'}}, "Start Your Free Trial Today"), 

          React.DOM.div({className: "panel panel-default", style: {display:'none'}}, 
          React.DOM.div({className: "panel-heading"}, " "), 
            React.DOM.div({className: "panel-body"}, 
              React.DOM.form({onSubmit: this.login}, 
              React.DOM.input({placeholder: "Email", id: "email", type: "text", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Password", type: "password", id: "password", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 

              React.DOM.a({href: "javascript:", onClick: this.login, className: "btn btn-success btn-lg", style: {display:'block',backgroundColor:'#1ca3fd'}}, "Log In")
              )
            ), 
          React.DOM.div({className: "panel-footer"}, " "), 
        React.DOM.div({className: "the-gradient-1"}), " ")
        )
      ), 
      MarketingBody(null)
    )
    )
  },
  componentDidMount: function() {
    console.log('features')
particlesJS('particles-js', {
    particles: {
      color: '#fff',
      shape: 'circle',
      opacity: 1,
      size: 2.5,
      size_random: true,
      nb: 100,
      line_linked: {
        enable_auto: true,
        distance: 250,
        color: '#fff',
        opacity: 0.5,
        width: 1,
        condensed_mode: {
          enable: false,
          rotateX: 600,
          rotateY: 600
        }
      },
      anim: {
        enable: true,
        speed: 2.5
      }
    },
    interactivity: {
      enable: true,
      mouse: {
        distance: 250
      },
      detect_on: 'canvas',
      mode: 'grab',
      line_linked: {
        opacity: 0.5
      },
      events: {
        onclick: {
          push_particles: {
            enable: true,
            nb: 4
          }
        }
      }
    },
    retina_detect: true
});
$('canvas').css({
  'width': '100%',
  'height': '376px',
  'background-color': 'rgba(0,0,0,0)',
  'top': '122px',
  'position': 'absolute',
})
    
    /*
    $(window).scroll(function (event) {
        var scroll = $(window).scrollTop();
        var top = $('.product-header').offset().top
        if(scroll > top){
          pos = $('.product-header').css('position')
          console.log(pos)
          if(pos != "static" || pos != "fixed"){
              $('.product-header').css({
                position: "fixed",
                top: 0,
                "z-index": 100000000,
              })
          }
        }else {
          $('.product-header').removeAttr( 'style' );
        }
    })
    */
  }
})

var MarketingBody = React.createClass({displayName: 'MarketingBody',
  render: function() {
    return (
      React.DOM.div({style: {marginTop:180, fontFamily:'open-sans'}}, 
        React.DOM.div({className: "container product-header chrome-bar", 
             style: {height:100,paddingTop:45, fontFamily:'proxima-nova', fontSize:12,textAlign:'center'}}, 
             React.DOM.div({className: "col-md-2"}, React.DOM.i({className: "fa fa-wifi"}), " SIGNALS"), 
          React.DOM.div({className: "col-md-2"}, React.DOM.i({className: "fa fa-cloud-download"}), " MINING JOBS"), 
          React.DOM.div({className: "col-md-2"}, React.DOM.i({className: "fa fa-globe"}), " TERRITORY MANAGEMENT"), 
          React.DOM.div({className: "col-md-2"}, React.DOM.i({className: "fa fa-users"}), " SOCIAL PROSPECT DATA"), 
          React.DOM.div({className: "col-md-2"}, React.DOM.i({className: "fa fa-envelope"}), " CAMPAIGNS"), 
          React.DOM.div({className: "col-md-2"}, React.DOM.i({className: "fa fa-database"}), " CRM INTEGRATION")
        ), 

      React.DOM.div({className: "container"}, 
        React.DOM.div({className: "row", style: {height:300}, id: "signals"}, 
          React.DOM.div({className: "col-md-6 col-md-offset-1"}, React.DOM.br(null), React.DOM.br(null), " ", React.DOM.h1(null, " Signals "), 
            React.DOM.br(null), 
            React.DOM.h5({style: {fontWeight:100,lineHeight:1.7}}, 
            "Your personal radar system for sales prospecting. The more companies you follow, the more trigger events you’ll find, and the more prospects you’ll have in your sales funnel. Start using signal-based selling to increase sales!"
          )
          ), 
        React.DOM.div({className: "col-md-4", style: {textAlign:'center',paddingTop:80}}, " ", React.DOM.i({className: "fa fa-wifi lp-icon"}), " "), 
        React.DOM.div({className: "col-md-1"})
        )
      ), 

      React.DOM.div({style: {borderBottom: '1px solid #ecedee', borderTop: '1px solid #ecedee', backgroundColor:'#f5f7f9'}}, 
        React.DOM.div({className: "container"}, 
          React.DOM.div({className: "row", style: {height:300}}, 
            React.DOM.div({className: "col-md-4 col-md-offset-1", style: {paddingTop:80,textAlign:'center'}}, 
              React.DOM.i({className: "fa fa-cloud-download lp-icon"}), " "), 
            React.DOM.div({className: "col-md-6"}, " ", React.DOM.br(null), React.DOM.br(null), React.DOM.h1(null, " Mining Jobs "), 
              React.DOM.br(null), 
              React.DOM.h5({style: {fontWeight:100,lineHeight:1.7}}, 
              "Generate highly specific prospect lists in minutes instead of days with on demand scraping jobs." + ' ' +
              "Automate search queries to find companies and titles prospects."
            )
            ), 
            React.DOM.div({className: "col-md-1"})
          )
        )
      ), 

      React.DOM.div(null, 
          React.DOM.div({className: "container"}, 
            React.DOM.div({className: "row", style: {height:300}}, 
              React.DOM.div({className: "col-md-6 col-md-offset-1"}, React.DOM.br(null), React.DOM.br(null), " ", React.DOM.h1(null, "Territory Management "), 
                React.DOM.br(null), 
              React.DOM.h5({style: {fontWeight:100,lineHeight:1.7}}, 
                "Organize companies that match your ideal customer profile by territory and" + ' ' + 
                "be confident that your sales reps are not missing a single opportunity."
              )
              ), 
            React.DOM.div({className: "col-md-4", style: {textAlign:'center',paddingTop:80}}, " ", React.DOM.i({className: "fa fa-globe lp-icon"}), " "), 
            React.DOM.div({className: "col-md-1"})
            )
          )
      ), 

      React.DOM.div({style: {borderBottom: '1px solid #ecedee', borderTop: '1px solid #ecedee', backgroundColor:'#f5f7f9'}}, 
        React.DOM.div({className: "container"}, 
          React.DOM.div({className: "row", style: {height:300}}, 
            React.DOM.div({className: "col-md-4 col-md-offset-1", style: {paddingTop:80,textAlign:'center'}}, 
              React.DOM.i({className: "fa fa-users lp-icon"}), " "), 
            React.DOM.div({className: "col-md-6"}, " ", React.DOM.br(null), React.DOM.br(null), React.DOM.h1(null, "Social Prospect Data "), 
              React.DOM.br(null), 
              React.DOM.h5({style: {fontWeight:100,lineHeight:1.7}}, 
              "You can run your search from anywhere on the web using our Chrome browser extension. Search for titles, industry, location, social network groups, and more. Build highly specific and targeted searches."
            )
            ), 
            React.DOM.div({className: "col-md-1"})
          )
        )
      ), 

      React.DOM.div(null, 
          React.DOM.div({className: "container"}, 
            React.DOM.div({className: "row", style: {height:300}}, 
              React.DOM.div({className: "col-md-6 col-md-offset-1"}, " ", React.DOM.br(null), React.DOM.br(null), React.DOM.h1(null, " Campaigns "), 
                React.DOM.br(null), 
              React.DOM.h5({style: {fontWeight:100,lineHeight:1.7}}, 
                "Build your own unique process for sales development emails, phone calls, and other activity. Customize each email with references to social profiles, blogs, or specific interests."
              )
              ), 
            React.DOM.div({className: "col-md-4", style: {textAlign:'center',paddingTop:80}}, " ", React.DOM.i({className: "fa fa-envelope lp-icon"}), " "), 
            React.DOM.div({className: "col-md-1"})
            )
          )
      ), 

      React.DOM.div({style: {borderBottom: '1px solid #ecedee', borderTop: '1px solid #ecedee', backgroundColor:'#f5f7f9'}}, 
        React.DOM.div({className: "container"}, 
          React.DOM.div({className: "row", style: {height:300}}, 
            React.DOM.div({className: "col-md-4 col-md-offset-1", style: {paddingTop:80,textAlign:'center'}}, 
              React.DOM.i({className: "fa fa-database lp-icon"}), " "), 
            React.DOM.div({className: "col-md-6"}, " ", React.DOM.br(null), React.DOM.br(null), React.DOM.h1(null, " CRM Integration "), 
              React.DOM.br(null), 
              React.DOM.h5({style: {fontWeight:100,lineHeight:1.7}}, 
              "Enjoy Native Integration with all Major CRMs"
            )
            ), 
            React.DOM.div({className: "col-md-1"})
          )
        )
      ), 

      React.DOM.div({style: {borderBottom: '1px solid #edeeef', borderTop: '1px solid #edeeef', 
                   paddingTop:50, backgroundColor:'#f5f8fa'}}, 
        React.DOM.div({className: "container"}, 
          React.DOM.div({className: "row", style: {height:200, textAlign:'center'}}, 
            React.DOM.h2(null, "Give Customero a try. Free 14-day trial available for all plans."), 
            React.DOM.br(null), 
            React.DOM.a({href: "#signup", className: "btn btn-success btn-lg start-trial", style: {marginTop:10}}, 
              "START A NO-RISK FREE TRIAL  ", React.DOM.i({className: "fa fa-chevron-right", style: {fontSize:18}})
            )
          )
        )
      )
    )

    )
  }
})

},{"./marketing_footer.js.min.js":34}],31:[function(require,module,exports){
/** @jsx React.DOM */
var MarketingFooter = require('./marketing_footer.js.min.js');

module.exports = React.createClass({displayName: 'exports',
  render: function() {
    return (
      React.DOM.div({className: "particles-js", id: "particles-js"}, 
        React.DOM.nav({className: "thenavbar navbar navbar-default", role: "navigation", style: {padding:70}}, 
          React.DOM.div({className: "container-fluid", style: {fontFamily:'proxima-nova', fontSize:12}}, 
            React.DOM.a({href: "#"}, 
            React.DOM.img({className: "", src: "build/img/full-logo-5.png", style: {width:220}})
          ), 
              React.DOM.ul({className: "nav nav-pills landing-page-nav", role: "tablist", style: {marginRight:0,fontSize:11,marginTop:-70}}, 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", style: {display:'block'}, href: "#"}, "LOGIN")), 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", style: {display:'block'}, href: "#"}, "BLOG")), 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", href: "#pricing"}, "RESOURCES")), 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", href: "#pricing"}, "KNOWLEDGE BASE")), 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", href: "#pricing"}, "+1905-616-7602 ", React.DOM.i({className: "fa fa-phone"})))
              )
          ), 
          React.DOM.a({href: "#signup", className: "btn-lg btn login-btn", style: {fontFamily:'proxima-nova'}}, "TRY IT"), 
              React.DOM.ul({className: "nav nav-pills landing-page-nav", role: "tablist", style: {width:600,fontSize:13,marginRight:100,marginTop:-45}}, 
                React.DOM.li({style: {width:'24%',textAlign:'center',display:'block'}}, " "), 
                React.DOM.li({style: {width:'24%',textAlign:'center',display:'none'}}, 
                  React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#"}, "PRODUCT")), 
                React.DOM.li({style: {width:'24%',textAlign:'center',display:'none'}}, 
                  React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#"}, "DATA")), 
                React.DOM.li({style: {width:'24%',textAlign:'center'}}, React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav active", style: {display:'block'}, href: "#product/features"}, "FEATURES")), 
                React.DOM.li({style: {width:'24%',textAlign:'center',display:'none'}}, 
                  React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#"}, "INTEGRATIONS")), 
                React.DOM.li({style: {width:'24%',textAlign:'center'}}, React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#pricing"}, "PRICING")), 
                React.DOM.li({style: {width:'24%',textAlign:'center'}}, React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#services"}, "SERVICES"))
              )
        ), 
        React.DOM.div({className: "row", style: {margin:0}}, 
        React.DOM.div({className: "gradient-2"}), 
        React.DOM.div({className: "services-background-image"}), 
        React.DOM.div({className: "col-md-12 col-sm-12", style: {paddingTop:'80px'}}, 
          React.DOM.h1({style: {color:'#1ca3fd',fontWeight:'100',color:'white',textAlign:'center',fontSize:'38px',fontFamily:'Open Sans',fontSize:'40px'}}, 
            "Your On-Demand Sales Development Team"
          ), 
          React.DOM.h1({style: {color:'#1ca3fd',fontWeight:'100',textAlign:'center',color:'white',fontSize:'46px',fontFamily:'Open Sans', fontStyle:'italic'}}, "   "), 

          React.DOM.div({className: "panel panel-default", style: {display:'none'}}, 
          React.DOM.div({className: "panel-heading"}, " "), 
            React.DOM.div({className: "panel-body"}, 
              React.DOM.form({onSubmit: this.login}, 
              React.DOM.input({placeholder: "Email", id: "email", type: "text", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Password", type: "password", id: "password", className: "form-control input-lg", style: {fontWeight:'100',fontSize:'22px'}}), 
              React.DOM.br(null), 

              React.DOM.a({href: "javascript:", onClick: this.login, className: "btn btn-success btn-lg", style: {display:'block',backgroundColor:'#1ca3fd'}}, "Log In")
              )
            ), 
          React.DOM.div({className: "panel-footer"}, " "), 
        React.DOM.div({className: "the-gradient-1"}), " ")
        )
      ), 
      React.DOM.br(null), 
      React.DOM.br(null), 
      MarketingBody(null), 
      MarketingFooter(null)
    )
    )
  }
})

var MarketingBody = React.createClass({displayName: 'MarketingBody',
  render: function() {
    return (
      React.DOM.div({style: {marginTop:70,fontFamily:'open-sans'}}, 
        React.DOM.div({className: "container"}, 
          React.DOM.div({className: "row", style: {height:300, textAlign:'center'}}, 
            React.DOM.br(null), " ", React.DOM.br(null), 
            React.DOM.div({className: "col-md-12"}, " ", React.DOM.h1(null, 
                "Building a Cold Calling 2.0 team can take 3 to 6 months and $100k+."
            ), 
            React.DOM.h2({style: {fontStyle:'italic'}}, 
            "Start a Predictable Revenue outbound sales program in 48 hours."
            )
          
            )
          )
        ), 

      React.DOM.div({style: {borderBottom: '1px solid #ecedee', borderTop: '1px solid #ecedee', backgroundColor:'#f5f7f9', textAlign:'center'}}, 
        React.DOM.div({className: "container"}, 
          React.DOM.div({className: "row", style: {height:300}}, 
              React.DOM.h1(null, "How It Works"), 
            React.DOM.div({className: "col-md-3"}, 
              "We have a dedicated fully-trained inside sales team ."
            ), 
            React.DOM.div({className: "col-md-3"}, 
              "We use Customero and other proprietary databases to find" + ' ' +
              "the best prospects for your business"
            ), 
            React.DOM.div({className: "col-md-3"}, 
              "We reach out to potential customers with tailored messages"
            ), 
            React.DOM.div({className: "col-md-3"}, 
              "View your leads in your CRM or as a .csv"
            )
          )
        )
      ), 

      React.DOM.div(null, " ", React.DOM.div({className: "container"}, 
            React.DOM.div({className: "row", style: {height:300, textAlign:'center'}}, 

              React.DOM.h1(null, "Why we're different"), 
            React.DOM.div({className: "col-md-3"}, 
              React.DOM.h4(null, "Research customized to you.")
            ), 
            React.DOM.div({className: "col-md-3"}, 
              React.DOM.h4(null, "Effective, targeted campaigns.")
            ), 
            React.DOM.div({className: "col-md-3"}, 
              React.DOM.h4(null, "Best in class technology.")
            ), 
            React.DOM.div({className: "col-md-3"}, 
              React.DOM.h4(null, "A scalable, on-demand team.")
            )
            )
          ), " "), 

      React.DOM.div({style: {borderBottom: '1px solid #edeeef', borderTop: '1px solid #edeeef', 
                   paddingTop:50, backgroundColor:'#f5f8fa', textAlign:'center'}}, 
        React.DOM.div({className: "container"}, 
          React.DOM.div({className: "row", style: {height:200, textAlign:'center'}}, 
            React.DOM.h2(null, 
              "Plans that grow with you, adjust at any time."
            ), 
            React.DOM.br(null), 
            React.DOM.a({href: "javascript:", className: "btn btn-success btn-lg start-trial", style: {marginTop:10}}, 
              "SCHEDULE A FREE DEMO  ", React.DOM.i({className: "fa fa-chevron-right", style: {fontSize:18}})
            )
          )
        )
      )
    )
    )
  },
  componentDidMount: function() {
    console.log('features')
particlesJS('particles-js', {
    particles: {
      color: '#fff',
      shape: 'circle',
      opacity: 1,
      size: 2.5,
      size_random: true,
      nb: 100,
      line_linked: {
        enable_auto: true,
        distance: 250,
        color: '#fff',
        opacity: 0.5,
        width: 1,
        condensed_mode: {
          enable: false,
          rotateX: 600,
          rotateY: 600
        }
      },
      anim: {
        enable: true,
        speed: 2.5
      }
    },
    interactivity: {
      enable: true,
      mouse: {
        distance: 250
      },
      detect_on: 'canvas',
      mode: 'grab',
      line_linked: {
        opacity: 0.5
      },
      events: {
        onclick: {
          push_particles: {
            enable: true,
            nb: 4
          }
        }
      }
    },
    retina_detect: true
});
$('canvas').css({
  'width': '100%',
  'height': '376px',
  'background-color': 'rgba(0,0,0,0)',
  'top': '122px',
  'position': 'absolute',
})
    
    /*
    $(window).scroll(function (event) {
        var scroll = $(window).scrollTop();
        var top = $('.product-header').offset().top
        if(scroll > top){
          pos = $('.product-header').css('position')
          console.log(pos)
          if(pos != "static" || pos != "fixed"){
              $('.product-header').css({
                position: "fixed",
                top: 0,
                "z-index": 100000000,
              })
          }
        }else {
          $('.product-header').removeAttr( 'style' );
        }
    })
    */
  }
})

},{"./marketing_footer.js.min.js":34}],32:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // LoadingSpinner
  render: function() {
    return (
    React.DOM.div({className: "spinner", style: {marginTop:'180px'}}, 
      React.DOM.div({className: "spinner-container container1"}, 
        React.DOM.div({className: "circle circle1"}), 
        React.DOM.div({className: "circle circle2"}), 
        React.DOM.div({className: "circle circle3"}), 
        React.DOM.div({className: "circle circle4"})
      ), 
      React.DOM.div({className: "spinner-container container2"}, 
        React.DOM.div({className: "circle circle1"}), 
        React.DOM.div({className: "circle circle2"}), 
        React.DOM.div({className: "circle circle3"}), 
        React.DOM.div({className: "circle circle4"})
      ), 
      React.DOM.div({className: "spinner-container container3"}, 
        React.DOM.div({className: "circle circle1"}), 
        React.DOM.div({className: "circle circle2"}), 
        React.DOM.div({className: "circle circle3"}), 
        React.DOM.div({className: "circle circle4"})
      )
    )
    )
  }
});

},{}],33:[function(require,module,exports){
/** @jsx React.DOM */

theData = require('../lib/data.min.js') 

module.exports = React.createClass({displayName: 'exports',
  // SignUp
  componentDidMount: function() {
    //$('body').css({overflow:'hidden'})
    var thiss = this;
    $("input").keypress(function(event) {
        if (event.which == 13) {
          event.preventDefault();
          thiss.login()
        }
    });
  },

  login: function() {
    console.log('login')
    $.ajax({
      url:'https://api.parse.com/1/login',
      headers: appConfig.headers,
      type:'GET',
      data: {
        'username':$('#email').val(),
        'password':$('#password').val()
      },
      beforeSend: function() { },
      success:function(res) {
        //alertify.success('Logging in...')
        localStorage.setItem('currentUser', JSON.stringify(res))
        location.href = "#"
      },
      error: function(res) {
        alertify.error('There was an error with your login request. Please try again')
      }
    });
  },

  render: function() { 
    data = theData()
    imgs_1 = []
    imgs_2 = []
    for(i=0;i < 120; i++) {
      imgs_1.push(React.DOM.img({src: data[i], className: "prospect-img"}))
    }
    for(i=15;i < 30; i++) {
      imgs_2.push(React.DOM.img({src: data[i], className: "prospect-img"}))
    }

  console.log(data)
    return (
      React.DOM.div({style: {height:'100%'}}, 
      React.DOM.div({id: "signup", style: {paddingTop:50}}, 
        React.DOM.h1({className: "title"}, "Customero."), 
        React.DOM.h5({className: "tagline"}, "Generate high quality prospect lists. Accelerate Sales."), 
          React.DOM.div({className: "panel panel-default login-info", style: {display:'block'}}, 
            React.DOM.div({className: "panel-body", style: {fontFamily:'proxima-nova',fontWeight:'bold'}}, 
              React.DOM.form({onSubmit: this.login}, 
              React.DOM.input({placeholder: "Email", id: "email", type: "text", className: "form-control input-lg"}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Password", type: "password", id: "password", className: "form-control input-lg"}), 
              React.DOM.br(null), 

              React.DOM.a({href: "javascript:", onClick: this.login, className: "btn btn-gradient btn-lg btn-primary", style: {borderRadius:3, display:'block',backgroundColor:'#1ca3fd',fontFamily:'proxima-nova',fontWeight:'bold'}}, "LOG IN")

              )
            )
          )
      ), 

        React.DOM.div({id: "", style: {position:'absolute',zIndex:'-2',top:0,left:0}}, 
          React.DOM.div({className: "", style: {marginLeft:34, display:'none'}}, 
          imgs_1, 
          imgs_2
          )
        )
      )
    )
  }
});

},{"../lib/data.min.js":67}],34:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  render: function() {
    return (
      React.DOM.div({className: "container footer", style: {marginTop:50}}, 
      React.DOM.div({className: "row", style: {fontFamily:"proxima-nova"}}, 
        React.DOM.div({className: "col-md-2 col-sm-2 col-xs-2"}, 
          React.DOM.h5(null, "PRODUCT"), 
          React.DOM.ul({className: "list-unstyled"}, 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Overview")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Customers")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Pricing")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Security"))
          )
        ), 
        React.DOM.div({className: "col-md-2 col-sm-2 col-xs-2"}, 
          React.DOM.h5(null, "FEATURES"), 
          React.DOM.ul({className: "list-unstyled"}, 
          React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Signals")), 
          React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Mining Jobs")), 
          React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Territory Management")), 
          React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Social Prospect Data")), 
          React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Campaigns")), 
          React.DOM.li(null, React.DOM.a({href: "javascript:"}, "CRM Integration"))
          )
        ), 
        React.DOM.div({className: "col-md-2 col-sm-2 col-xs-2"}, 
          React.DOM.h5(null, "ROLES"), 
          React.DOM.ul({className: "list-unstyled"}, 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Sales Leaders")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Sales Professionals")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "CIO and IT")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Sales Ops"))
          ), 
          React.DOM.br(null), 
          React.DOM.h5(null, "SOLUTIONS"), 
          React.DOM.ul({className: "list-unstyled"}, 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Small Business")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Mid-Market")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Enterprise"))
          )
        ), 
        React.DOM.div({className: "col-md-2 col-sm-2 col-xs-2"}, 
          React.DOM.h5(null, "COMPANY"), 
          React.DOM.ul({className: "list-unstyled"}, 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "About")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Careers")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Partner Program")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Press")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Blog"))
          )
        ), 
        React.DOM.div({className: "col-md-2 col-sm-2 col-xs-2"}, 
          React.DOM.h5(null, "COMMUNITY"), 
          React.DOM.ul({className: "list-unstyled"}, 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Facebook")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Twitter")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Linkedin")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Free Resources")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Sales Blog"))
          )
        ), 
        React.DOM.div({className: "col-md-2 col-sm-2 col-xs-2"}, 
          React.DOM.h5(null, "HELP AND SUPPORT"), 
          React.DOM.ul({className: "list-unstyled"}, 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Support Center")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Developer Tools")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:"}, "Contact Us"))
          ), 
          React.DOM.br(null), 
          React.DOM.h5({style: {color:'#0084ff',fontWeight:'bold',fontSize:12}}, "ACCOUNT"), 
          React.DOM.ul({className: "list-unstyled text-muted"}, 
            React.DOM.li(null, React.DOM.a({href: "javascript:", className: "text-muted"}, "Sign Up")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:", className: "text-muted"}, "Login")), 
            React.DOM.li(null, React.DOM.a({href: "javascript:", className: "text-muted"}, "Forgot Password"))
          )
        )
      ), 
      React.DOM.hr(null), 
      React.DOM.h6({className: "text-muted", style: {marginTop:-10}}, 
        React.DOM.i({className: "fa fa-copyright"}), " " + ' ' +
        "Customero 2014"
      ), 
      React.DOM.div({className: "text-muted", style: {float:'right',marginTop:-35}}, 
        React.DOM.h6(null, 
        React.DOM.a({href: "javascript:", className: "text-muted"}, "Facebook"), "   ", 
        React.DOM.a({href: "javascript:", className: "text-muted"}, "Twitter"), "   ", 
        React.DOM.a({href: "javascript:", className: "text-muted"}, "Linkedin"), "   "
      )
      )
    )
    )
  },

  componentDidMount: function() {
    $('.footer a').addClass('text-muted')
    $('.footer h5').css({color:'#0084ff',fontWeight:'bold',fontSize:12})
  }
})

},{}],35:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  //Messenger
  render: function() {
    return (
        React.DOM.div({className: "alert alert-success", 
             'data-alert': "alert", 
             style: {position:'absolute',
                     top: 31, 
                     right:30, 
                     display:'none',
                     width:200}}, 
                     React.DOM.a({className: "close", 
                       href: "javascript:", 
                       onClick: this.hideAlert}, "×"), 
            "Test"
        )
    );
  }
});

},{}],36:[function(require,module,exports){
/** @jsx React.DOM */

var LoadingSpinner = require('./loading_spinner.js.min.js')

var Job = React.createClass({displayName: 'Job',
  startJob: function() {
    // Add Linkedin Locations
    // Email When Completed
    // Have Report For Number of Profiles Found / number of emails found per mining job
    
    miningJob = this.props.miningJob
    miningJob.status = "Running"
    miningJob.last_ran = Math.round(+new Date()/1000)

    $.ajax({
      url: 'https://api.parse.com/1/classes/MiningJob/'+miningJob.objectId,
      type:'PUT',
      headers: appConfig.parseHeaders,
      // status should be waiting
      data : JSON.stringify({'status':'Running', 'last_ran':Math.round(+new Date()/1000)+"" }),
      success: function(res) {
        console.log(res)
        // make request to heroku api
        $.ajax({
          //url: 'https://0.0.0.0:5000/mining_job' ,
          url: 'http://agile-plains-2430.herokuapp.com/mining_job' ,
          //type:'POST',
          crossDomain: true,
          data:{'locale':miningJob.locale, 
                'current_title':miningJob.prospect_title,
                'current_user_id':JSON.parse(localStorage.currentUser).objectId,
                'company_id':JSON.parse(localStorage.currentUser).company.objectId,
                'mining_job_id':miningJob.objectId},
          success: function(res) {
            console.log(res)
          },
          error: function(err) {
            console.log(err)
          }
        })
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });

    this.setState({miningJob: miningJob})
  },

  deleteJob: function() {
    //console.log(this.state.miningJob)
    this.props.deleteJob(this.state.miningJob)
      /*
    $.ajax({
      url: 'https://api.parse.com/1/classes/MiningJob/'+this.state.miningJob.objectId,
      type:'DELETE',
      headers: appConfig.parseHeaders,
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });
      */
  },

  cancelJob: function() {
    miningJob = this.state.miningJob
    miningJob.status = ""

    $.ajax({
      url: 'https://api.parse.com/1/classes/MiningJob/'+miningJob.objectId,
      type:'PUT',
      headers: appConfig.parseHeaders,
      data : JSON.stringify({'status':''}),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });
    this.setState({miningJob: miningJob})
  },

  render: function(){
    miningJob = this.props.miningJob
    button = (miningJob.status == "") ? React.DOM.a({href: "javascript:", className: "btn btn-xs btn-success", onClick: this.startJob}, " ", React.DOM.i({className: "fa fa-check"}), " Run ") : React.DOM.a({href: "javascript:", className: "btn btn-xs btn-danger", onClick: this.cancelJob}, " ", React.DOM.i({className: "fa fa-times"}), " Cancel ")

    disabled = ""
    disabled_trash = ""
    /*
    disabled = (miningJob.status == "") ? "btn btn-xs btn-success" : "btn btn-xs btn-success disabled"
    disabled_trash = (miningJob.status == "") ? "btn btn-xs btn-default" :  "btn btn-xs btn-default disabled"
    button = <a href="javascript:" className={disabled} onClick={this.startJob}> <i className="fa fa-check" />&nbsp;Run </a> 
    */

    //console.log(miningJob)
    return (
      React.DOM.tr(null, 
        React.DOM.td(null, React.DOM.h6(null, miningJob.prospect_title)), 
        React.DOM.td(null, React.DOM.h6(null, miningJob.locale)), 
        React.DOM.td(null, React.DOM.h6(null, (miningJob.last_ran == "" ) ? "----" : moment.unix(miningJob.last_ran).fromNow())), 
        React.DOM.td(null, 
          React.DOM.span({className: "badge"}, 
            (miningJob.results == "") ? 0 : miningJob.results
          ), " ",  
          React.DOM.h6({style: {display:'inline-block'}}, "profiles found")
        ), 
        React.DOM.td({style: {paddingTop:'12px'}}, 
          React.DOM.span({className: (miningJob.status == "" ) ? "label label-primary" : "label label-success"}, 
            (miningJob.status == "") ? "Ready" : miningJob.status
          )
        ), 
        React.DOM.td({style: {paddingTop:'13px',width:'105px'}}, 
          button, 
          " ", 
          React.DOM.a({href: "javascript:", className: disabled_trash, 
                  onClick: this.deleteJob}, 
            React.DOM.i({className: "fa fa-trash-o"})
          )
        )
      )
    );
  }
});


module.exports = React.createClass({displayName: 'exports',
  // Mining Jobs
  //{(prospects.length == 0 && this.state.loading == false) ? <EmptyCompanyProspectsPanel /> : ""}
  getInitialState: function() {
    return { 
      miningJobs : [],
      loading    : true
    }
  },

  deleteJob: function(job) {
    //console.log(job.objectId)
    var filtered = _.filter(this.state.miningJobs, function(item) {
       console.log(item.objectId != job.objectId)
       return item.objectId != job.objectId
    });
    //console.log(filtered)
    this.setState({miningJobs: filtered})
  },

  render: function () {
    //console.log('render')
    miningJobs = []
    for(i=0;i<this.state.miningJobs.length;i++){
      miningJob = this.state.miningJobs[i]
      miningJobs.push(
        Job({deleteJob: this.deleteJob, miningJob: miningJob})
      )
    }

    return (
      React.DOM.div(null, 
      React.DOM.div({className: "mining-job-toolbar container", style: {width:'100%'}}, 
        React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", 'data-toggle': "modal", 'data-target': ".bs-example-modal-sm"}, 
          React.DOM.i({className: "fa fa-plus"}), "   Find Prospects By Title and Area"
        ), 
        "   ", 
        React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs disabled", 'data-toggle': "modal", 'data-target': ".bs-example-modal-sm"}, 
          React.DOM.i({className: "fa fa-plus"}), "   Find Companies Hiring For Roles"
        ), 
        "   ", 
        React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs disabled", 'data-toggle': "modal", 'data-target': ".bs-example-modal-sm"}, 
          React.DOM.i({className: "fa fa-plus"}), "   Find Companies Who Just Raised Funding"
        ), 
        "   ", 
        React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs disabled", 'data-toggle': "modal", 'data-target': ".bs-example-modal-sm"}, 
          React.DOM.i({className: "fa fa-plus"}), "   Find Companies By Industy And Area"
        ), 
        "   ", 
        React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs disabled", 'data-toggle': "modal", 'data-target': ".bs-example-modal-sm"}, 
          React.DOM.i({className: "fa fa-plus"}), "   Press Coverage"
        )
    ), 
      React.DOM.div({id: "autoscroll", style: {height:'400px',overflow:'auto'}}, 
        React.DOM.table({className: "table table-striped"}, 
          React.DOM.thead(null, 
            React.DOM.th(null, "Job Title"), 
            React.DOM.th(null, "City"), 
            React.DOM.th(null, "Last Ran"), 
            React.DOM.th(null, "Results"), 
            React.DOM.th(null, "Status"), 
            React.DOM.th(null, " ")
          ), 
          React.DOM.tbody(null, 
            miningJobs
          )
        ), 
          (this.state.loading) ? LoadingSpinner(null) : "", 
        createJobModal({createJob: this.createJob})
      )
      )
    );
  },
  
  runMiningJob: function() {

  },

  createJob: function(data) {
    miningJobs = this.state.miningJobs
    miningJobs.push(data)
    this.setState({ miningJobs: miningJobs })

    $('#miningJobModal').modal('hide')
    $('body').removeClass('modal-open');
    $('.modal-backdrop').remove();
  },

  componentDidMount: function() {
    console.log('this did mount')
    thiss = this;
    qry = 'where={"company":'+company+'}&count=1&order=-createdAt'
    $.ajax({
      url:'https://api.parse.com/1/classes/MiningJob',
      type:'GET',
      headers: appConfig.parseHeaders,
      data: qry,
      success: function(res) {
        thiss.setState({miningJobs : res.results})
        thiss.setState({loading    : false})
        console.log(res)
      },
      error: function(err) {
        console.log(err)
      }
    });
  }

});

var createJobModal = React.createClass({displayName: 'createJobModal',
  createMiningJob: function() {
    console.log('mining job')
    console.log($('#prospectTitle').val())
    console.log($('#locale').val())

    data =  {
      'prospect_title': $('#prospectTitle').val(),
      'locale'        : $('#locale').val(),
      'last_ran'      : '',
      'results'       : '',
      'status'        : '',   //Waiting , Running
    }
    //  update local jobs state
    $.ajax({
      url:'https://api.parse.com/1/classes/MiningJob',
      type:'POST',
      headers: appConfig.parseHeaders,
      data: JSON.stringify(data),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });

    this.props.createJob(data)
    
    //$('button.close').click()
  },

  render: function() {
    return (
          React.DOM.div({className: "modal fade bs-example-modal-sm", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "miningJobModal", style: {top:'200px'}}, 
            React.DOM.div({className: "modal-dialog modal-sm"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-bolt"}), "  Create Mining Job")
                ), 
                React.DOM.div({className: "modal-body"}, 
                  React.DOM.form({onSubmit: this.createMiningJob}, 
                    React.DOM.input({id: "prospectTitle", type: "text", placeholder: "Enter prospect title...", className: "form-control"}), 
                    React.DOM.br(null), 
                    React.DOM.input({id: "locale", type: "text", placeholder: "Enter City Area...", className: "form-control"}), 
                    React.DOM.br(null), 
                    React.DOM.a({href: "javascript:", onClick: this.createMiningJob, placeholder: "Enter City Area...", className: "btn btn-success", style: {display:'block', width:'100%'}}, "Start Mining!")
                  )

                )
              )
            )
          )
    );
  }
});

var EmptyMiningJob = React.createClass({displayName: 'EmptyMiningJob',
  render: function() {
    return (
      React.DOM.div({className: "col-md-offset-3 col-md-6", style: {height:400}}, 
      React.DOM.div({className: "panel panel-default", style: {marginTop:100,height:200}}, 
        React.DOM.div({className: "panel-body"}, 
          React.DOM.h1({className: "lead", style: {textAlign:'center'}}, "Start Prospecting On Linkedin"), 
          React.DOM.a({href: "javascript:", onClick: this.openLinkedinWindow, className: "btn btn-success", style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%) !important',display:'block',marginRight:'auto',marginLeft:'auto',width:200, marginTop:50}}, 
            React.DOM.i({className: "fa fa-search"}), "  " + ' ' +
            "Search for companies!")
        )
      )
    )
    );
  }
});

},{"./loading_spinner.js.min.js":32}],37:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // MiningJobCalendar
  getInitialState: function() {
    return {
      reports : [],
      reportCount: '~',
    }
  },

  getSignalReport: function() {
    thissss = this;
    profile = JSON.stringify({profile: appConfig.pointer('ProspectProfile',
                                          this.props.currentProfile.objectId)})
    $.ajax({
      url: 'https://api.parse.com/1/classes/SignalReport?order=-createdAt',
      type:'GET',
      data: {where: profile, count: true},
      headers:appConfig.parseHeaders,
      success: function(res) {
        thissss.setState({reports: res.results,})
                         //reportCount: res.count})
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  getResults: function() {
    thissss = this;
    profile = JSON.stringify({profile: appConfig.pointer('ProspectProfile',
                                          this.props.currentProfile.objectId)})
    console.log(this.props)
    theProfile = this.props.currentProfile
    $.ajax({
      url: 'https://api.parse.com/1/classes/PeopleSignal',
      type:'GET',
      data: {where: profile, order: '-createdAt',count:true},
      headers:appConfig.parseHeaders,
      success: function(res) {
        // divide results into groups of 100
        // schedule them for 1 intervals
        number_of_reports = Math.ceil(res.count/100)
        reports = []
        for(i=0;i< number_of_reports;i++){
          count = (i == number_of_reports-1) ? res.count % 100 : 100
          console.log(theProfile.done)
          reports.push({
          scheduledAt: moment.unix(theProfile.done).add(i,'day').fromNow(),
          people_count: count,
          })
        }
        thissss.setState({reports: reports})
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  componentDidMount: function() {
    //this.getResults()
    this.getSignalReport()
  },

  componentWillRecieveProps: function() {
    //this.getResults()
  },

  setCurrentReport: function(newReport) {
    console.log('CURRENT REPORT')
    console.log(newReport)
    this.props.setCurrentReport(newReport)
  },

  render: function() {
    reports = []
    for(i=0;i< this.state.reports.length; i++)
      reports.push(SignalReportRow({setCurrentReport: this.setCurrentReport, 
                                    setReport: this.props.setReport, 
                                    setCurrentView: this.setCurrentView, 
                                    report: this.state.reports[i]}))

    return (
      React.DOM.div({className: "container", style: {height:400, overflow:'auto',paddingLeft:0,
                                         paddingRight:0,width:'100%'}}, 
        React.DOM.div({style: {height:44,borderBottom:'solid 1px rgb(221, 221, 221)'}}, 
          React.DOM.h4({onClick: this.returnToCalendarView, 
              style: {float:'left',cursor:'pointer',marginTop:7,fontWeight:200,
                paddingLeft:20,paddingTop:5, display:'inline-block'}}, 
                React.DOM.i({className: "fa fa-calendar", style: {marginRight:5}}), 
                this.props.currentProfile.name + " - " + this.state.reportCount
          )
        ), 
        React.DOM.div({className: "col-md-12", style: {paddingLeft:0,paddingRight:0,
                                           overflow:'auto',height:356}}, 
          React.DOM.div({style: {overflow:'auto'}}, 
            React.DOM.table({className: "table table-striped", style: {marginBottom:0}}, 
              React.DOM.thead(null, 
                React.DOM.th(null), 
                React.DOM.th(null), 
                React.DOM.th({style: {textAlign:'center'}}, 
                    React.DOM.i({className: "fa fa-clock-o"}), " " + ' ' +
                    "Scheduled"
                ), 
                React.DOM.th({style: {textAlign:'center'}}, "Prospects"), 
                React.DOM.th({style: {width:150,textAlign:'center'}})
              ), 
              React.DOM.tbody({className: "reports"}, 
                reports
              )
            )
          )
        )
      )
    );
  }
});

var SignalReportRow = React.createClass({displayName: 'SignalReportRow',
  rowClick: function() {
    //this.props.setCurrentReport(this.props.report)
    this.props.setReport('MiningJobDetail', this.props.report)
  },

  prospectAllSignalReportProspects: function(e) {
    /*
    e.stopPropagation()
    // Update UI
    console.log(this.props.report.objectId)
    thiss = this
    $.ajax({
      //url:'http://nameless-retreat-3525.herokuapp.com/prospect_signal_report',
      url:'http://127.0.0.1:5000/prospect_signal_report',
      data: {signal_report_id: thiss.props.report.objectId },
      success: function(res) { console.log(res) },
      error: function(err) { console.log(err) }
    })
    */
  },

  render: function() {
    return (
      React.DOM.tr({onClick: this.rowClick, style: {cursor:'pointer'}}, 
        React.DOM.td(null), 
        React.DOM.td({style: {textAlign:'right',paddingTop:15}}, 
          React.DOM.i({className: "fa fa-cloud-download", style: {color:'#555'}})
        ), 
        React.DOM.td({style: {textAlign:'center'}}, 
          React.DOM.h6(null, 
            this.props.report.scheduledAt
          )
        ), 
        React.DOM.td({style: {textAlign:'center'}}, 
          React.DOM.span({className: "label label-success"}, 
            this.props.report.people_count
          ), 
          React.DOM.h6({style: {display:'inline-block'}}, 
            "  People found."
          )
        ), 
        React.DOM.td(null, 
          React.DOM.a({href: "javascript:", 
            onClick: this.prospectAllSignalReportProspects, 
             style: {fontWeight:'bold',marginTop:5}, 
             className: "btn btn-xs btn-success"}, 
            "Prospect All"
          )
        )
      )
    )
  }
});

},{}],38:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // SignalDetail
  getInitialState: function() {
    return {
      currentSignal: 'PeopleSignal',
      signals: [],
      //allProspected: this.props.currentProfileReport.prospected,
      companyCount: '~',
      peopleCount: '~'
    }
  },

  getSignals: function(currentSignal) {
    var thissss = this;
    currentReport = this.props.currentProfileReport.objectId
    currentProfileReport = appConfig.pointer('SignalReport', currentReport)
    currentProfile = appConfig.pointer('ProspectProfile', 
                                   this.props.currentProfile.objectId)

    qry = {
      //where:JSON.stringify({ profile: currentProfile }),
      where:JSON.stringify({ report: currentProfileReport}),
      include:'company_signal,company_signal.signals,signals',
      order:'createdAt',
      limit:100
    }

   $.ajax({
      url: 'https://api.parse.com/1/classes/'+currentSignal,
      data: qry,
      type:'GET',
      headers:appConfig.parseHeaders,
      success: function(res) {
        console.log('SIGNAL DETAIL')
        console.log(res.results)
        console.log('PROFILE REPORT')
        console.log(thissss.props.currentProfileReport.objectId)
        thissss.setState({signals: res.results})
      },
      error: function(err) { console.log(err.responseText) }
    });
  },

  setCompanyState: function() { this.setState({currentSignal: 'CompanySignal'}) }, 
  setPersonState: function() { this.setState({currentSignal: 'PeopleSignal'}) }, 

  componentDidMount: function() {
    console.log(this.props.currentProfileReport.objectId)
    this.getSignals(this.state.currentSignal)
    currentProfile = appConfig.pointer('ProspectProfile', 
                                   this.props.currentProfile.objectId)
    qry = {
      where:JSON.stringify({ profile: currentProfile }),
      count: 1,
      limit:100
    }
    var thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/classes/PeopleSignal',
      data: qry,
      headers: appConfig.headers,
      success: function(res) { thiss.setState({peopleCount: res.count})},
      error: function(err) { console.log(err.responseText) },
    })

    $.ajax({
      url:'https://api.parse.com/1/classes/CompanySignal',
      data: qry,
      headers: appConfig.headers,
      success: function(res) { thiss.setState({companyCount: res.count})},
      error: function(err) { console.log(err.responseText) },
    })
  },

  componentWillUpdate: function(nextProps, nextState) {
    if(this.state.currentSignal != nextState.currentSignal)
      this.getSignals(nextState.currentSignal)
  },

  returnToCalendarView: function() {
    console.log('return to calendar view')
  },

  render: function() {
    signals = []
    for(i=0;i< this.state.signals.length; i++) {
      if(this.state.currentSignal == 'CompanySignal')
        signals.push(CompanyHiringSignalRow({signal: this.state.signals[i], 
                                       allProspected: this.state.allProspected}))
      else
        signals.push(PeopleSignalRow({signal: this.state.signals[i], 
                                       allProspected: this.state.allProspected}))
    }

    currentProfileReport = this.props.currentProfileReport
    companyBtn = (this.state.currentSignal == "CompanySignal") ? "btn btn-xs btn-default active" : "btn btn-xs btn-default"
    peopleBtn = (this.state.currentSignal == "PeopleSignal") ? "btn btn-xs btn-default active" : "btn btn-xs btn-default"
    return (
      React.DOM.div({className: "container", style: {height:356,paddingLeft:0,
                                         paddingRight:0,width:'100%'}}, 
        React.DOM.div({style: {height:44,borderBottom:'solid 1px rgb(221, 221, 221)'}}, 
          React.DOM.h4({onClick: this.returnToCalendarView, 
              style: {float:'left',cursor:'pointer',marginTop:7,fontWeight:200,
                      paddingLeft:20,paddingTop:5,display:'inline-block'}}, 
              
                React.DOM.i({className: "fa fa-calendar", style: {marginRight:5}}), 
                this.props.currentProfile.name
          ), 
          React.DOM.h6({style: {fontSize:13,paddingLeft:5,paddingTop:5,display:'inline-block'}}, 
            React.DOM.i({className: "fa fa-chevron-right", style: {fontSize:9}}), "  ", 
            React.DOM.i({className: "fa fa-clock-o"}), "  ", 
            moment(currentProfileReport.createdAt).fromNow(), "  "
          ), 

          (this.state.allProspected) ?
          React.DOM.a({href: "javascript:", style: {fontWeight:'bold',float:'right',
                                        marginRight:10,marginTop:10}, 
             className: "btn btn-success btn-xs disabled"}, 
            "Prospected"
          ) :
          React.DOM.a({href: "javascript:", style: {fontWeight:'bold',float:'right',
                                        marginRight:10,marginTop:10}, 
             onClick: this.prospectAll, 
             className: "btn btn-success btn-xs"}, 
            "Prospect"
          ), 
          

          React.DOM.div({className: "btn-group", 
               style: {float:'right',marginTop:10,marginRight:10}, 
               'data-toggle': "buttons"}, 
            React.DOM.label({className: peopleBtn, style: {}, 
                 onClick: this.setPersonState}, 
              React.DOM.input({type: "checkbox"}), 
              React.DOM.i({className: "fa fa-user"}), "  ", 
              this.state.peopleCount
            ), 
            React.DOM.label({className: companyBtn, style: {}, 
              onClick: this.setCompanyState}, 
              React.DOM.input({type: "checkbox"}), 
              React.DOM.i({className: "fa fa-building"}), "  ", 
              this.state.companyCount
            )
          )
        ), 

        React.DOM.div({className: "col-md-12", style: {paddingLeft:0,paddingRight:0}}, 
          React.DOM.div({style: {overflow:'auto',height:356}}, 
            React.DOM.table({className: "table table-striped"}, 
              React.DOM.thead(null, 
                React.DOM.th({style: {textAlign:'center',width:90}}, 
                  React.DOM.i({className: "fa fa-clock-o"})
                ), 

                React.DOM.th({style: {width:300}}, 
                  (this.state.currentSignal == 'CompanySignal') ?  
                    "Companies" : "People"
                ), 

                React.DOM.th(null, "Company"), 

                React.DOM.th({style: {width:90,textAlign:'center'}}, " ")

              ), 
              React.DOM.tbody({className: "reports"}, 
                signals
              )
            )
          )
        )
      )
    );
  },

  prospectAll: function() {
    console.log('PROSPECT')
    console.log(this.state.currentSignal)
    console.log(this.props.currentProfileReport.objectId)
    report_id = this.props.currentProfileReport.objectId
    var thiss = this;

    $.ajax({
      //url: 'http://127.0.0.1:5000/signal_to_prospect',
      url: 'https://nameless-retreat-3525.herokuapp.com/signal_to_prospect',
      data: {all_signals:true, report_id: report_id, 
             signal_type: thiss.state.currentSignal},
      success: function(res) { console.log(res)},
      error: function(err) { console.log(err.responseText)},
    })
  }
});

var CompanyHiringSignalRow = React.createClass({displayName: 'CompanyHiringSignalRow',
  render: function() {
    //console.log(company)
    company = (this.props.signal) ? this.props.signal : {}
    return (
      React.DOM.tr({style: {}}, 
        React.DOM.td({style: {textAlign:'center',width:120}}, 
          React.DOM.h6(null, 
            moment(this.props.signal.createdAt).fromNow()
          )
        ), 

        React.DOM.td(null, 
          React.DOM.h6(null, company.name), 
          React.DOM.h6(null, company.revenue), 
          React.DOM.h6(null, React.DOM.a({href: "javascript:"}, company.websiteUrl)), 
          React.DOM.h6(null, company.city)
        ), 

        React.DOM.td(null, 
          (this.props.allProspected) ? 
          React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs disabled", 
            style: {fontWeight:'bold'}}, 
            "Prospected"
          ) : React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", 
                  onClick: this.turnCompanySignalToProspect, 
            style: {fontWeight:'bold'}}, 
            "Prospect"
          )
        )

      )
    )
  },
  turnCompanySignalToProspect: function() {
    var thiss = this;
    $.ajax({
      //url: 'https://nameless-retreat-',
      //url: 'http://127.0.0.1:5000/signal_to_prospect',
      url: 'https://nameless-retreat-3525.herokuapp.com/signal_to_prospect',
      data: {all_signals:false, signal_id: company.objectId,
             signal_type: 'CompanySignal'},
      success: function(res) { console.log(res)},
      error: function(err) { console.log(err.responseText)},
    })
  }
})

var PeopleSignalRow = React.createClass({displayName: 'PeopleSignalRow',
  turnSignalIntoProspect: function() {
    var thiss = this;
    console.log(this.props.signal)
    $.ajax({
      //url:'http://127.0.0.1:5000/signal_to_prospect',
      url:'http://nameless-retreat-3525.herokuapp.com/signal_to_prospect',
      data: {signal_id: thiss.props.signal.objectId, signal_type:'PeopleSignal',
             all_signals:false},
      success: function(res) { console.log(res) },
      error: function(err) { console.log(err.responseText) } 
    })
  },

  render: function() {
    //console.log(company)
    people = (this.props.signal) ? this.props.signal : {}
    company = (people.company_signal) ? people.company_signal : {}
    name = people.link_text.split('|')[0]
    //city = people.split('-')[0]
    city = ""
    //console.log(people)
    return (
      React.DOM.tr({style: {}}, 
        React.DOM.td({style: {textAlign:'center',width:120}}, 
          React.DOM.h6(null, 
            moment(this.props.signal.createdAt).fromNow()
          )
        ), 

        React.DOM.td(null, 
          React.DOM.h6({style: {fontSize:13, fontWeight:'bold'}}, name), 
          React.DOM.h6({style: {fontStyle:'italic'}}, " ", people.title)
        ), 

        React.DOM.td(null, 
          React.DOM.h6({style: {fontSize:13, fontWeight:'bold'}}, people.prospect_company, " "), 
          React.DOM.h6({style: {fontStyle:'italic'}}, people.industry), 
          React.DOM.h6(null, people.company_size, " ", React.DOM.span({style: {fontStyle:'italic'}}
          ), React.DOM.a({href: people.website}, people.website))
          
        ), 

        React.DOM.td(null, 
          (this.props.allProspected) ? 
          React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs disabled", 
            style: {fontWeight:'bold'}}, 
            "Prospected"
            ) : React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", 
                      onClick: this.turnSignalIntoProspect, 
            style: {fontWeight:'bold'}}, 
            "Prospect"
          )
          
        )
      )
    )
  }
})

},{}],39:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // SignalLoading
  getInitialState: function() {
    return {
      count: '~',
      prospectName : '~',
      prospectTitle : '~',
      companyName : '~',
    }
  },

  initialize: function() {
    var thiss = this;
    var pusher = new Pusher('1a68a96c8fde938fa75a');
    objectId = this.props.currentProfile.objectId
    var channel = pusher.subscribe(objectId);
    channel.bind("my-event", function(data) {
      console.log(data)
      thiss.setState({
        count: data.count,
        prospectName: data.name,
        prospectTitle: data.title,
        companyName: data.company
      })
    });

    // Get Signal Report Count
    // Get Last PeopleSignal Found
    qry = { profile: appConfig.pointer('ProspectProfile',objectId) }
    $.ajax({
      url:'https://api.parse.com/1/classes/SignalReport',
      headers:appConfig.headers,
      data: {'where':JSON.stringify(qry),order:'-createdAt'},
      success: function(res) {
        //console.log(res)
        count = (res.results[0]) ? res.results[0].people_count : 0
        
        thiss.setState({count: count })
      },
    });
    $.ajax({
      url:'https://api.parse.com/1/classes/PeopleSignal',
      headers:appConfig.headers,
      data: {'where':JSON.stringify(qry),order:'-createdAt'},
      success: function(res) {
        //console.log(res)
        thiss.setState({
          prospectName: (res.results[0]) ? res.results[0].link_text : "",
          prospectTitle: (res.results[0]) ? res.results[0].title : "",
          companyName: (res.results[0]) ? res.results[0].company : ""
        })
      },
    });
  },

  componentDidMount: function() {
    Pusher.log = function(message) {
      if (window.console && window.console.log) {
        //window.console.log(message);
      }
    };

    this.initialize()
  },

  componentDidUpdate: function() {
  },

  componentWillReceiveProps: function() {
    this.setState({
      count: '~',
      prospectName : '~',
      prospectTitle : '~',
      companyName : '~',
    })
    this.initialize()
  },

  render: function() {
    // Show companies for hiring signals
    return (
      React.DOM.div({style: {background:'linear-gradient(#dae8ff,#dae8ff)', backgroundImage: 'radial-gradient(circle at center center,#fff,#dff1fd 900px)',height:'100%',paddingTop:10}}, 
        React.DOM.div({className: "signal-card", style: {
            width:500,textAlign:'center',display:'block',marginRight:'auto',
            marginLeft:'auto',marginTop:100,height:200
          }}, 

        React.DOM.div({className: "loading-two-balls", style: {height:20,width:20}}, 
          React.DOM.div({className: "dot1", style: {color:'red'}}), 
          React.DOM.div({className: "dot2", style: {color:'red'}})
        ), 
        React.DOM.div({id: "", style: {color:'#1ca3fd', fontWeight:'bold',marginTop:-25,
                          marginLeft:0, fontSize:32, fontFamily:'Proxima-Nova'}}, 
            this.state.count + " people found."
          ), 
          React.DOM.div({style: {float:'right',marginTop:55,marginRight:55}}, 
            React.DOM.h6({style: {marginBottom:3, fontWeight:'bold'}}, this.state.prospectName.split('|')[0].split('-')[0].split(',')[0], " -  ", 
              React.DOM.span({style: {fontWeight:500, fontStyle:'italic'}}, 
                this.state.prospectTitle)), 
            React.DOM.h6({style: {marginTop:0,textAlign:'left'}}, 
              this.state.companyName.name
            )
          )
        )
      )
    )
  },
});

},{}],40:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Panel Footing
  paginatePrevious: function() {
    var _this = this;

    qry = {
      where: JSON.stringify({archived:{$in: [false, null]}}),
      order: '-createdAt', count: 1,
      skip: (this.props.currentPage-2)*this.props.prospectsPerPage,
      limit: this.props.prospectsPerPage,
      include: 'company'
    }
    $.ajax({
      url: 'https://api.parse.com/1/classes/'+_this.props.prospectType,
      type:'GET',
      beforeSend: function() {
        console.log('before Send')
        _this.props.setPaginate(true)
      },
      headers: appConfig.parseHeaders,
      data: qry,
      success: function(res){
        console.log(res)
        _this.props.paginate(res.results, _this.props.currentPage - 1)
        _this.props.setPaginate(false)
      },
      error: function(res){ console.log(res) }
    });
  },

  paginate: function(direction) {
    var _this=this;
    prospectsPerPage = this.props.prospectsPerPage
    qry = {count: true}
    if(direction=='previous')
      qry.skip = (this.props.currentPage - 2)*prospectsPerPage
    else if(direction=="forward")
      qry.skip = this.props.currentPage*prospectsPerPage

    Parse.get(this.props.prospectType, qry).done(function(res) {
       console.log(res)
       this.props.paginate(res.results, _this.props.currentPage + 1)
    })
  },

  paginateForward: function() {
    var _this = this;
    qry = {
      where: JSON.stringify({ archived: {$in:[false, null] }}),
      order: '-createdAt', count: 1,
      skip: this.props.currentPage*this.props.prospectsPerPage,
      limit: this.props.prospectsPerPage,
      include: 'company',
    }

    $.ajax({
      url: 'https://api.parse.com/1/classes/'+_this.props.prospectType,
      type:'GET',
      headers: appConfig.parseHeaders,
      data: qry,
      beforeSend: function() {
        _this.props.setPaginate(true)
      },
      success: function(res){
        console.log(res)
        _this.props.paginate(res.results, _this.props.currentPage + 1)
        _this.props.setPaginate(false)
      },
      error: function(res){ console.log(res); }
    });
  },

  componentDidMount: function() {
    paginateForward = this.paginateForward
    paginatePrevious = this.paginatePrevious

    Mousetrap.bind('l', function() { 
      console.log('new forward')
      paginateForward()
    });

    Mousetrap.bind('h', function() { 
      console.log('new back')
      paginatePrevious()
    });
  },

  render: function() {
    // Add Support For Current List
    // Current List
    //console.log('current page')
    //console.log(this.props.currentPage)
    //console.log(this.props.count)

    previous = (this.props.currentPage - 1) ? '' : 'disabled'

    lowerLimit = (this.props.currentPage-1)*this.props.prospectsPerPage
    upperLimit = this.props.currentPage*this.props.prospectsPerPage

    lowerLimit = (lowerLimit) ? lowerLimit : 1
    upperLimit = (upperLimit > this.props.count) ? this.props.count : upperLimit

    lastPage = this.props.currentPage == this.props.pages
    lessThanOnePage = upperLimit - lowerLimit<= this.props.prospectsPerPage - 2
    console.log(this.props.prospectsPerPage)
    forward = (lastPage || lessThanOnePage) ? 'disabled' : ''

    return (
      React.DOM.div({className: "panel-footing", 
           id: "navbar", 
           style: {height:'35px',padding:'0px', paddingTop:'7px'}}, 
          React.DOM.span({style: {float:'right',marginRight:5}}, 
            React.DOM.a({href: "javascript:", 
               style: {marginRight:'5px'}, 
               onClick: this.fastPrevious, 
               className: "blue-gradient btn btn-primary btn-xs "+previous}, 
            React.DOM.i({className: "fa fa-fast-backward"})
          ), 
          React.DOM.a({href: "javascript:", 
             onClick: this.paginatePrevious, 
             className: "paginate-back-btn blue-gradient btn btn-primary btn-xs "+previous}, 
            React.DOM.i({className: "fa fa-chevron-left"})
          ), 
          React.DOM.span({style: {marginLeft:5, marginRight:5,display:'inline',width:'100%', textAlign:'center'}}, 
            React.DOM.span({style: (this.props.count) ? {}:{display:'none'}}, 
              lowerLimit+' - ', " "), " ", upperLimit+' of '+this.props.count
          ), 
          React.DOM.a({href: "javascript:", 
             onClick: this.paginateForward, 
             className: "paginate-forward-btn blue-gradient btn btn-primary btn-xs "+forward}, 
            React.DOM.i({className: "fa fa-chevron-right"})
          ), 
          React.DOM.a({href: "javascript:", 
             style: {marginLeft:'5px'}, 
             onClick: this.fastForward, 
             className: "blue-gradient btn btn-primary btn-xs "+forward}, 
            React.DOM.i({className: "fa fa-fast-forward"}))
          )
        )
    );
  }, 

  fastPrevious: function() {
    var thiss = this;
    qry = {
      where: JSON.stringify({ user_company: Parse.user_company, 
                              archived:{$in: [null, false]}}),
      order: '-createdAt',
      count: 1,
      limit: thiss.props.prospectsPerPage,
      include: 'company'
    }
    $.ajax({
      url:'https://api.parse.com/1/classes/'+thiss.props.prospectType,
      data: qry,
      beforeSend: function() {
        console.log('before Send')
        thiss.props.setPaginate(true)
      },
      headers: appConfig.headers,
      success: function(res){ console.log(res.results) 
        thiss.props.paginate(res.results, 1)
        thiss.props.setPaginate(false)
      },
      error: function(err) { console.log(err.responseText) }
    })
  },

  fastForward: function() {
    var thiss = this;
    console.log('fast forward')
    console.log(thiss.props.count - thiss.props.prospectsPerPage)
    _prosp = this.props.prospectsPerPage
    qry = {
      where: JSON.stringify({ user_company: Parse.user_company, 
                              archived:{$in: [null, false]}}),
      order: '-createdAt',
      count: 1,
      skip: Math.floor(thiss.props.count / _prosp)*_prosp,
      limit: thiss.props.count - thiss.props.prospectsPerPage,
      include: 'company'
    }
    $.ajax({
      url:'https://api.parse.com/1/classes/'+thiss.props.prospectType,
      data: qry,
      beforeSend: function() {
        console.log('before Send')
        thiss.props.setPaginate(true)
      },
      headers: appConfig.headers,
      success: function(res){ console.log(res.results) 
        page = Math.ceil(thiss.props.count / 50)
        thiss.props.paginate(res.results, page)
        thiss.props.setPaginate(false)
      },
      error: function(err) { console.log(err.responseText) }
    })
  }
});

},{}],41:[function(require,module,exports){
/** @jsx React.DOM */


module.exports = React.createClass({displayName: 'exports',
  // SignalCard
  prospectPerson: function() {
    // Add To Signal List
    // Add Company
    // Add Prospect
    person = this.props.person
    personId = person.objectId
    company = this.props.person.company
    companyId = company.objectId
    person.signalId = person.signalId
    company.signalId = company.objectId
    p = person; c = company;
    delete p.objectId; delete c.objectId;
    delete p.className; delete c.className;
    delete p.__type; delete c.__type;
    delete p.createdAt; delete c.createdAt;
    delete p.updatedAt; delete c.updatedAt;
    p.companySignal = p.company
    delete p.company

    p.linkedin_url = p.url
    p.company = JSON.parse(localStorage.currentUser).company
    p.archived = true
    p.loading = true
    p.city = p.title.split('-')[0]
    p.pos = p.title.split('-').slice(-1)[0].split(' at ')[0]
    p.company_name = p.title.split('-').slice(-1)[0].split(' at ').slice(-1)[0] 
    name = p.link_text.split('|')[0]
    name = name.split('-')[0]
    p.name = name
    p.websiteUrl = company.websiteUrl
    // Automatically Add To The Signal List It Belongs To
    
    console.log(this.props.profile)
    p.lists = [{'__type':'Pointer','className':'ProspectList','objectId':this.props.profile.prospect_list.objectId}] 

    $.ajax({
      url:'https://api.parse.com/1/classes/Prospects',
      type:'POST',
      headers:appConfig.headers,
      data:JSON.stringify(p),
      success: function(res) {
        console.log(res)
         $.ajax({
          url:'https://api.parse.com/1/classes/PeopleSignal/'+personId,
          type:'PUT',
          headers:appConfig.headers,
          data: JSON.stringify({prospectId: res.objectId, prospected_on: Date.now()/1000}),
          success:function(res) { console.log(res) },
          error: function() { }
         })
      },
      error: function(err) { }
    })

    //Create Company Prospect with Pointer to CompanySignal
    $.ajax({
      url:'https://api.parse.com/1/classes/CompanyProspects',
      type:'POST',
      headers:appConfig.headers,
      data:JSON.stringify(c),
      success: function(res) {
        //Update Company Signal With Pointer to Company Prospect and date prospected
        console.log(res)
         $.ajax({
           url:'https://api.parse.com/1/classes/CompanySignal/'+companyId,
          type:'PUT',
          headers:appConfig.headers,
          data: JSON.stringify({prospectId: res.objectId, prospected_on: Date.now()/1000}),
          success:function(res) { console.log(res) },
          error: function(err) { }
         })
      },
      error: function(err) { }
    })
  },

  render: function() {
    person = this.props.person
    signal = (person.signals) ? person.signals[0] : {}
    
    return (
      React.DOM.div({className: "panel panel-default signal-card"}, 
        React.DOM.div({className: "panel-body", style: {paddingLeft:25, paddingRight:25}}, 
          React.DOM.h4(null, 
            person.title
          ), 
          React.DOM.h6({style: {display:'inline-block',width:'100%'}}, 
            React.DOM.span({style: { float:'left',maxWidth: '60%', whiteSpace: 'nowrap',
                overflow: 'hidden', textOverflow: 'ellipsis'}}, 
              person.link_text)
          ), 
        React.DOM.div({id: "signal-stuff", 
            style: (_.isEqual(signal, {})) ? {display:'none'} : {display:'block'}}, 
          React.DOM.h6(null, " ", React.DOM.i({className: "fa fa-building"}), 
            "  ", signal.company), 
          React.DOM.h6(null, " ", React.DOM.i({className: "fa fa-map-marker"}), 
            "  ", signal.location), 
          React.DOM.h6(null, " ", React.DOM.i({className: "fa fa-suitcase"}), 
            " ", signal.job_title, " ")
        ), 

          React.DOM.a({href: "javascript:", className: "btn btn-success", 
            onClick: this.prospectPerson, 
            style: {float:'right',marginTop:15, fontWeight:'bold',width:'100%'}}, 
            "Prospect This Person")
        )
      )
    );
  }
});

},{}],42:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  render: function() {
    //$('body').css({overflow:'hidden'})
    return (
      React.DOM.div(null, 
        React.DOM.div({className: "pricing-background-image"}), 
          Header(null), 
          PricingTables(null), 
        React.DOM.div({className: "the-gradient-1", style: {height:'100%'}}, " ")
      )
    )
    /*
              <a href="#signup" className="btn btn-success btn-lg" style={{display:'block',backgroundColor:'#1ca3fd',float:'right',marginTop:'13px' }}>Log In</a>
    */
  }
});

var PricingTables = React.createClass({displayName: 'PricingTables',
  render: function() {
    return (
      React.DOM.div(null, 
        React.DOM.div({className: "container"}, 
        React.DOM.div({className: "row flat"}, 
          React.DOM.div({className: "col-lg-3 col-md-3 col-xs-6"}, 
                React.DOM.ul({className: "signal-card plan plan2"}, 
                    React.DOM.li({className: "plan-name"}, " Individual "), 
                    React.DOM.li({className: "plan-price"}, 
                      React.DOM.h1({style: {fontWeight:'bold',color:'#0294f5'}}, "$99 ", React.DOM.small(null, "/ month"))
                    ), 

                  React.DOM.li(null, " ", React.DOM.strong(null, "Up to 200 Email Credits"), " "), 
                  React.DOM.li(null, " ", React.DOM.strong(null, "Up to 1 Team Members")), 
                  React.DOM.li({style: {padding:0}}, " ", React.DOM.strong(null), " Includes: "), 
                  React.DOM.li(null, " ", React.DOM.strong(null, 'Emails & Phone Numbers')), 
                  React.DOM.li(null, " "), 
                  React.DOM.li(null, " "), 
                  React.DOM.li(null, " "), 
                  React.DOM.li(null, " "), 
                  React.DOM.li({className: "", style: {paddingBottom:0}}, 
                    React.DOM.a({href: "#signup", className: "btn btn-primary btn-md cool-btn"}, "Sign Up")
                  )
             )
         ), 

            React.DOM.div({className: "col-lg-3 col-md-3 col-xs-6"}, 
                React.DOM.ul({className: "signal-card plan plan2"}, 
                    React.DOM.li({className: "plan-name"}, " Startup "), 
                    React.DOM.li({className: "plan-price"}, 
                      React.DOM.h1({style: {fontWeight:'bold',color:'#0294f5'}}, "$499 ", React.DOM.small(null, "/ month"))
                    ), 

                  React.DOM.li(null, " ", React.DOM.strong(null, "Up to 1000 Email Credits"), " "), 
                  React.DOM.li(null, " ", React.DOM.strong(null, "Up to 10 Team Members")), 
                  React.DOM.li({style: {padding:0}}, " ", React.DOM.strong(null), " Includes: "), 
                  React.DOM.li(null, " ", React.DOM.strong(null, 'Emails & Phone Numbers')), 
                  React.DOM.li(null, " ", React.DOM.strong(null, "Quick Start Package")), 
                  React.DOM.li(null, " ", React.DOM.strong(null, "Signals")), 
                  React.DOM.li({className: "", style: {paddingBottom:0}}, 
                    React.DOM.a({href: "#signup", className: "btn btn-primary btn-md cool-btn"}, "Sign Up")
                  )
             )
         ), 

         React.DOM.div({className: "col-lg-3 col-md-3 col-xs-6"}, 
            React.DOM.ul({className: "signal-card plan plan3 featured"}, 
                React.DOM.li({className: "plan-name"}, " Growth "), 
                React.DOM.li({className: "plan-price"}, 
                  React.DOM.h1({style: {fontWeight:'bold',color:'#0294f5'}}, "$1299 ", React.DOM.small(null, "/ month"))
                ), 

            React.DOM.li(null, " ", React.DOM.strong(null, "Up to 2500 Email Credits"), " "), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Up to 25 Team Members")), 
            React.DOM.li({style: {padding:0}}, " ", React.DOM.strong(null), " Includes: "), 
            React.DOM.li(null, " ", React.DOM.strong(null, "All Startup Features ")), 
            React.DOM.li({style: {padding:0}}, " ", React.DOM.i({className: "fa fa-plus"})), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Bulk CRM Integration")), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Mining Jobs")), 
            React.DOM.li({className: "", style: {paddingBottom:0}}, 
              React.DOM.a({href: "#signup", className: "btn btn-primary btn-md cool-btn"}, "Sign Up")
            )
         )
     ), 

     React.DOM.div({className: "col-lg-3 col-md-3 col-xs-6"}, 
        React.DOM.ul({className: "signal-card plan plan4"}, 
            React.DOM.li({className: "plan-name"}, " Premium "), 
            React.DOM.li({className: "plan-price"}, 
              React.DOM.h1({style: {fontWeight:'bold',color:'#0294f5'}}, "$2999 ", React.DOM.small(null, "/ month"))
            ), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Up to 7500 Email Credits"), " "), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Up to 50 Team Members")), 
            React.DOM.li({style: {padding:0}}, " ", React.DOM.strong(null), " Includes: "), 
            React.DOM.li(null, " ", React.DOM.strong(null, "All Growth Features ")), 
            React.DOM.li({style: {padding:0}}, " ", React.DOM.i({className: "fa fa-plus"})), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Dedicated Happiness Officer")), 
            React.DOM.li(null, " ", React.DOM.strong(null, "Improved territory planning")), 
            React.DOM.li({className: "", style: {paddingBottom:0}}, 
              React.DOM.a({href: "#signup", className: "btn btn-primary btn-md cool-btn"}, "Sign Up")
            )
         )
       )

)

)
      )
    );
  },
});

var Header = React.createClass({displayName: 'Header',
  render: function() {
    return (
        React.DOM.nav({className: "thenavbar navbar navbar-default", role: "navigation", style: {padding:70}}, 
          React.DOM.div({className: "container-fluid", style: {fontFamily:'proxima-nova', fontSize:12}}, 
            React.DOM.a({href: "#"}, 
            React.DOM.img({className: "", src: "build/img/full-logo-5.png", style: {width:220}})
          ), 
              React.DOM.ul({className: "nav nav-pills landing-page-nav", role: "tablist", style: {marginRight:0,fontSize:11,marginTop:-70}}, 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", style: {display:'block'}, href: "#login"}, "LOGIN")), 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", style: {display:'block'}, href: "http://resources.customerohq.com/v1.0/blog"}, "BLOG")), 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", href: "http://resources.customerohq.com"}, "RESOURCES")), 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", href: "http://resources.customerohq.com/v1.0/discuss"}, "KNOWLEDGE BASE")), 
                React.DOM.li(null, React.DOM.a({className: "landing-page-nav-tab", href: "#"}, "+1905-616-7602 ", React.DOM.i({className: "fa fa-phone"})))
              )
          ), 
          React.DOM.a({href: "#signup", className: "btn-lg btn login-btn", style: {fontFamily:'proxima-nova'}}, "TRY IT"), 
              React.DOM.ul({className: "nav nav-pills landing-page-nav", role: "tablist", style: {width:600,fontSize:13,marginRight:100,marginTop:-45}}, 
                React.DOM.li({style: {width:'24%',textAlign:'center',display:'block'}}, " "), 
                React.DOM.li({style: {width:'24%',textAlign:'center',display:'none'}}, 
                  React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#"}, "PRODUCT")), 
                React.DOM.li({style: {width:'24%',textAlign:'center',display:'none'}}, 
                  React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#"}, "DATA")), 
                React.DOM.li({style: {width:'24%',textAlign:'center'}}, React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#product/features"}, "FEATURES")), 
                React.DOM.li({style: {width:'24%',textAlign:'center',display:'none'}}, 
                  React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#"}, "INTEGRATIONS")), 
                React.DOM.li({style: {width:'24%',textAlign:'center'}}, React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#pricing"}, "PRICING")), 
                React.DOM.li({style: {width:'24%',textAlign:'center'}}, React.DOM.a({className: "landing-page-nav-tab lp-bottom-nav", style: {display:'block'}, href: "#services"}, "SERVICES"))
              )
        )
    )
  }
})

},{}],43:[function(require,module,exports){
/** @jsx React.DOM */

//TODO - abstract lists
//TODO - rename this
var Lists = require('./side_menu_user_prospects.js.min.js'); 

var UserProspectHeader = require('./user_prospect_header.js.min.js');
var UserProspectRow = require('./user_prospect.js.min.js');

//var CompanyProspectHeader
var CompanyProspectRow = require('./data_row.js.min.js');
var LoadingSpinner = require('./loading_spinner.js.min.js')
var Spinner = require('./spinner.js.min.js')
var Messenger = require('./messenger.js.min.js')
var PanelFooting = require('./panel_footing.js.min.js')

//var CreateProspectListFromCompanyListModal = require('./create_prospect_list_from_company_list.js.min.js')
//var CreateProspectProfileModal = require('./create_title_mining_job.js.min.js')
/*
      <CreateProspectListFromCompanyListModal 
        currentList={this.state.currentList} 
        currentListObjectId={this.state.currentListObjectId}/>
      <CreateProspectProfileModal 
        currentList={this.state.currentList} 
        currentListObjectId={this.state.currentListObjectId}/>
      <RenameListModal renameList={this.props.renameList}/>
      <DeleteListModal deleteList={this.props.deleteList}/>
*/

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {  prospects   : [],
              currentPage : 1,
              className: this.props.className,
              listClassName: this.props.listClassName,
              pages       : 1,
              currentList : 'All',
              currentListObjectId : '',
              loading: true,
              paginating: false,
              prospectsPerPage: 50,
              downloading: false,
              lists : [],
              masterCheckboxChecked: false,
              keyboardActiveProspect: 0, //first
              //selectedProspects: [],
              totalCount  : "~", 
              detailMode: false,
              detailCompany: {},
              count       : "~", }
  },

  setPaginate: function(value) { this.setState({paginating: value}) },
  setDownloading: function(value) { this.setState({downloading: value}) },
  removeProspects: function(objArray) {
    _prospects = _.map(this.state.prospects, function(prospect) {
      console.log(objArray.indexOf(prospect.objectId) == -1)
      if(objArray.indexOf(prospect.objectId) == -1){
          return prospect
      }
    })
    this.setState({prospects: _.compact(_prospects)})
  },

  archiveProspects: function(objects) {
    console.log('ARCHIVE')
    objects = (objects) ? objects : []
    selectedProspects = JSON.parse(localStorage.selectedProspects)
    selectedProspects = selectedProspects.concat(objects)
    qry = {'archived':true}
    console.log('starting parse archive')
    Parse.batchUpdate(this.state.className, selectedProspects, qry).done(function(res) {
      console.log(res)
    })
    this.removeProspects(selectedProspects)
    totalCount = this.state.totalCount
    this.setState({totalCount : totalCount - 1})

    selected = _.map(this.state.prospects, function(prospect) {
      if(selectedProspects.indexOf(prospect.objectId) != -1)
        return prospect
    })

    selected = _.compact(selected)
    selected = _.pluck(selected, 'lists')
    selected = _.flatten(selected)
    selected = _.pluck(selected, 'objectId')
    selected = _.compact(selected)

    _.map(selected, function(list_id) {
      decrement = {count: {__op: 'Increment', amount: -1}}
      Parse.put('ProspectList/'+list_id, decrement, function(res) {
        console.log(res)
      })
    })
  },

  changeList: function(newListName, objectId) {
    localStorage.selectedProspects = JSON.stringify([])
    this.setState({
      currentList : newListName,
      currentListObjectId : objectId,
      prospects  : [],    
      count      : '~',
      pages      : 1,
      loading    : true,
      currentPage: 1,
      keyboardActiveProspect: 0
    })

    qry = {include: 'company', limit: this.state.prospectsPerPage, count: true}
    qry.where = {}
    qry.where.archived = {$in:[null, false]}
    if (newListName == 'Archived')
      qry.where.archived = true
    else if(newListName != "All")
      qry.where.lists = Parse._pointer(this.state.listClassName, objectId)
    qry.where = JSON.stringify(qry.where)
    console.log(qry)

    var _this = this;
    Parse.get(this.state.className, qry).done(function(res) {
      console.log(res)
      _this.setState({
        prospects: res.results,
        count: res.count,
        pages: Math.ceil(res.count/_this.props.prospectsPerPage),
        loading: false,
      })
    })
  },

  checkboxAction: function(checkedState, obj) {
    selectedProspects = JSON.parse(localStorage.selectedProspects)
    if(checkedState)
      selectedProspects.push(obj)
    else
      selectedProspects = _.reject(selectedProspects,function(id){return id == obj})

    selectedProspects = _.uniq(selectedProspects)
    console.log(selectedProspects)
    localStorage.selectedProspects = JSON.stringify(selectedProspects)
    //this.setState({selectedProspects: selectedProspects})
  },

  masterCheckboxChanged: function(masterCheckboxValue) {
    this.setState({masterCheckboxChecked: masterCheckboxValue})
  },

  render: function() {
    this.startKeyboardShortcuts()
    $('body').css({overflow:'auto'})

    prospects = []
    for(i=0;i< this.state.prospects.length;i++) {
      url = this.state.prospects[i].url
      prospect = this.state.prospects[i]

      keyboardSelected = (i == this.state.keyboardActiveProspect)

      selectedProspects = JSON.parse(localStorage.selectedProspects)
      alreadyChecked=false
      for(ii=0;ii< selectedProspects.length;ii++)
        if(prospect.objectId == selectedProspects[ii])
          alreadyChecked = true

      //console.log(alreadyChecked)

      if(this.state.className == "Prospect") { 
      prospects.push(
        UserProspectRow({deleteProspect: this.deleteProspect, 
                      prospect: this.state.prospects[i], 
                      masterCheckboxChecked: this.state.masterCheckboxChecked, 
                      key: this.generate_id(), 
                      link: "", 
                      archiveProspects: this.archiveProspects, 
                      keyboardSelected: keyboardSelected, 
                      alreadyChecked: alreadyChecked, 
                      checkboxAction: this.checkboxAction}
                    )
      )
      } else { 
        prospects.push(
          CompanyProspectRow({deleteProspect: this.deleteProspect, 
                            prospect: this.state.prospects[i], 
                            masterCheckboxChecked: this.state.masterCheckboxChecked, 
                            key: this.generate_id(), 
                            link: "", 
                            keyboardSelected: keyboardSelected, 
                            alreadyChecked: alreadyChecked, 
                            checkboxAction: this.checkboxAction})
        )
      }

      $('#prospectDetailButtons').click(function(e) {
        //e.stopPropagation()
        //setTimeout(function(){ $('.dropdown').show() }, 30);
      })
    }

    if(this.state.currentList == "All"){
      listType = {display:'none'}
      listNameStyle = {display:'none'}
      listBtn = {display:'none'}
      listOptions = {display:'none'}
      copyDropdownStyle = {width:114, right:4}
    } else {
      listType = {float:'left'}
      listNameStyle = {float:'left',display:'inline-block', fontWeight: 200, marginTop: 1, paddingRight: 10, marginLeft: -10}
      listBtn = {float:'left',marginLeft:5}
      listOptions = {float:'right'}
      copyDropdownStyle = {width:114, right:36}
    }

    currentList     = this.state.currentList
    paginateOverlay = (this.state.paginating) ? PaginateOverlay(null) : ""
    downloadIcon    = (!this.state.downloading) ? React.DOM.i({className: "fa fa-download"}) : Spinner({circleStyle: {backgroundColor:'white',height:4,width:4}, spinnerStyle: {height:13, width:13,margin:0,display:'inline-block',paddingTop:2}})
    prospectTableStyle = (this.state.count == 0) ? {display:'none'} :{height:'400px',overflow:'auto'}

    header = (this.props.className == "Prospect") ? UserProspectHeader({masterCheckboxChanged: this.masterCheckboxChanged}) : CompanyProspectHeader({masterCheckboxChanged: this.masterCheckboxChanged})

    return (
        React.DOM.div(null, 
      React.DOM.div({className: "container prospects-container"}, 
        Lists({currentList: this.state.currentList, 
               count: this.state.count, 
               listClassName: this.state.listClassName, 
               currentListObjectId: this.state.currentListObjectId, 
               totalCount: this.state.totalCount, 
               removeProspects: this.removeProspects, 
               changeList: this.changeList, 
               createList: this.createList, 
               lists: this.state.lists}), 

      React.DOM.div({className: "col-lg-10 col-md-10 col-sm-10 col-xs-10", style: {padding:'0'}}, 
              paginateOverlay, 
              React.DOM.div({id: "prospectDetailButtons"}, 
                ListDetailButtons({
                  renameList: this.renameList, 
                  deleteList: this.deleteList, 
                  currentListName: this.state.currentList, 
                  currentList: this.state.currentListObjectId}), 

                React.DOM.div({className: "dropdown"}, 
                  React.DOM.a({href: "javascript:", 
                     className: "btn btn-primary btn-xs list-options", 
                     id: "", 
                     style: listOptions}, 
                    React.DOM.i({className: "fa fa-bars"})
                  )
                ), 

                React.DOM.div({className: "dropdown1 copyList", style: {display:'inline-block',float:'right'}}, 
                  React.DOM.a({'data-toggle': "dropdown", 
                     id: "copyToList", 
                     href: "javascript:", 
                     className: "drop-target btn btn-primary btn-xs list-options"}, 
                     React.DOM.i({className: "fa fa-copy"}), "  Copy To List ", 
                     React.DOM.i({className: "fa fa-caret-down"})), 
                  CurrentListsTwo({lists: this.state.lists, 
                                   copyDropdownStyle: copyDropdownStyle, 
                               copySelectedProspects: this.copySelectedProspects})
                ), 
  
                React.DOM.div({className: "dropdown1 moveList", style: {display:'inline-block',float:'right'}}, 
                  React.DOM.a({'data-toggle': "dropdown", 
                     href: "javascript:", 
                     id: "moveToList", 
                     className: "btn btn-primary btn-xs list-options"}, 
                     React.DOM.i({className: "fa fa-share"}), "  Move To List ", 
                     React.DOM.i({className: "fa fa-caret-down"})), 
                CurrentLists({lists: this.state.lists, 
                              moveSelectedProspects: this.moveSelectedProspects})
                ), 

                React.DOM.a({onClick: this.downloadFile, 
                   href: "javascript:", 
                   id: "downloadProspects", 
                   className: "drop-target btn btn-primary btn-xs list-options"}, 
                   downloadIcon, 
                   "  Download CSV  " 
                ), 

                React.DOM.a({href: "javascript:", 
                   onClick: this.archiveProspects, 
                   id: "downloadProspects", 
                   className: "drop-target btn btn-primary btn-xs list-options"}, 
                   React.DOM.i({className: "fa fa-archive"}), 
                   "  Archive  " 
                ), 

                React.DOM.a({href: "javascript:", 
                   onClick: this.launchProspectProfileModal, 
                   style: {display:'none'}, 
                   id: "downloadProspects", 
                   className: "drop-target btn btn-primary btn-xs list-options"}, 
                   React.DOM.i({className: "fa fa-cloud-download"}), 
                   "  Find Prospects By Title  " 
                )
              ), 
          (this.state.count == 0) ? EmptyPeopleProspectsPanel({className: this.props.className})  : "", 
          React.DOM.div({id: "autoscroll", style: prospectTableStyle}, 
            React.DOM.table({className: "prospects-table table table-striped", 
                style: {marginBottom:'0px'}}, 
              React.DOM.thead({style: {backgroundColor:'white'}}, 
                header
              ), 
              React.DOM.tbody(null, 
                prospects
              )
            ), " ", (this.state.loading) ? LoadingSpinner(null) : ""
          )
        )
      ), 
      PanelFooting({currentPage: this.state.currentPage, 
                    count: this.state.count, 
                    totalCount: this.state.totalCount, 
                    paginate: this.paginate, 
                    prospectType: 'Prospect', 
                    prospectsPerPage: this.state.prospectsPerPage, 
                    setPaginate: this.setPaginate, 
                    pages: this.state.pages}), 
      Messenger(null)
    )
    );
  },

  launchProspectProfileModal: function(){ $('#createProspectProfileModal').modal() },

  paginate: function(newProspects, newPage) {
    this.setState({
      prospects: newProspects,
      currentPage: newPage,
      keyboardActiveProspect: 0
    })
    this.startKeyboardShortcuts()
    document.getElementById('autoscroll').scrollTop = 0
  },

  _make_email: function(name, pattern) {
    name = name.trim()
    vars = {
      first_name: _.first(name.split(' ')),
      last_name: _.last(name.split(' ')),
      first_initial: _.first(name.split(' '))[0],
      last_initial: _.last(name.split(' '))[0],
      domain: prospect.company.domain
    }
    pattern = (pattern[0]) ? pattern[0].pattern : ""
    prospect_email = Mustache.render(pattern, vars).toLowerCase()
    //console.debug('PROSPECT EMAIL')
    //console.debug(prospect_email)
    return prospect_email
  },

  downloadFile: function() {
    if(this.state.className == "Prospect")
      this.downloadProspects()
    else
      this.downloadCompanies()
  },

  downloadCompanies: function() {
    console.log('download file')
    _list = Parse._pointer('CompanyProspectList', this.state.currentListObjectId)

    var _this = this;
    results = _.map([0,1,2,3,4,5,6,7,8,9], function(num) {
      qry = { count: 1, archived: {$in:[null, false]}, limit: 1000, skip: num*1000}
      qry.include = 'company,company.email_guess'
      if(_this.state.currentList != "All")
        qry.where = JSON.stringify({lists: _list})
      return Parse.get(_this.state.className, qry)
    })

    $.when.apply(this, results).then(function (res) {
      prospects = _.flatten(_.map(arguments, function(arg) { return arg[0].results}))
      prospects = _.map(prospects, function(prospect) {
        // TODO - add email
        if(prospect.company) {
          company = prospect.company
          delete company.name
          _keys = _.keys(prospect).concat(_.keys(company))
          _values = _.values(prospect).concat(_.values(company))
          obj = _.object(_keys, _values)
          obj.address = obj.normalizedLocation

          console.log(obj)
          delete obj.company; delete obj.createdAt; delete obj.updatedAt; delete obj.objectId;
          delete obj.lists; delete obj.loading; delete obj.user; delete obj.user_company;
          delete obj.api_key; delete obj.className;
          return obj;
        } else {
          //console.log(prospect)
          return prospect
        }
      })
      prospects = [Papa.unparse(prospects)]
      var blob = new Blob(prospects, {type: "text/plain;charset=utf-8"});
      console.log(blob)
      saveAs(blob, _this.state.className+".csv");
      _this.setState({downloading: false})
    })
  },

  downloadProspects: function() {
    console.log('download file')
    _list = Parse._pointer('ProspectList', this.state.currentListObjectId)

    var _this = this;
    results = _.map([0,1,2,3,4,5,6,7,8,9], function(num) {
      qry = { count: 1, archived: {$in:[null, false]}, limit: 1000, skip: num*1000}
      qry.include = 'company,company.email_guess'
      if(_this.state.currentList != "All")
        qry.where = JSON.stringify({lists: _list})
      return Parse.get(_this.state.className, qry)
    })

    $.when.apply(this, results).then(function (res) {
      prospects = _.flatten(_.map(arguments, function(arg) { return arg[0].results}))
      prospects = _.map(prospects, function(prospect) {
        // TODO - add email
        if(prospect.company) {
          company = prospect.company
          delete company.name
          _keys = _.keys(prospect).concat(_.keys(company))
          _values = _.values(prospect).concat(_.values(company))
          obj = _.object(_keys, _values)
          obj.address = obj.normalizedLocation
          if(obj.email_pattern && !_.isEqual(obj.email_pattern, []))
            obj.email = _this._make_email(prospect.name, prospect.company.email_pattern)
          else
            obj.email = ""

          console.log(obj)
          delete obj.company; delete obj.createdAt; delete obj.updatedAt; delete obj.objectId;
          delete obj.lists; delete obj.loading; delete obj.user; delete obj.user_company;
          delete obj.api_key; delete obj.className;
          return obj;
        } else {
          //console.log(prospect)
          return prospect
        }
      })
      prospects = [Papa.unparse(prospects)]
      var blob = new Blob(prospects, {type: "text/plain;charset=utf-8"});
      console.log(blob)
      saveAs(blob, _this.state.className+".csv");
      _this.setState({downloading: false})
    })
  },


  hideAlert: function() { $('.alert').hide() },
  startKeyboardShortcuts: function() { /*KeyboardShortcuts.initialize()*/ },
  componentDidUpdate: function() { $('.dropdown').show() },

  componentDidMount: function() {
    $('.dropdown').show(); 
    localStorage.selectedProspects = JSON.stringify([]);

    qry = { lists: currentList }
    if(this.state.currentList == 'All'){
      qry = {
        count: true, order: '-createdAt',
        limit: this.state.prospectsPerPage,
        include: 'email_guesses,email_guesses.pattern,company'
      }
      qry.where = JSON.stringify({ archived: {'$in':[false, null]}, })
    }

    var _this = this;
    Parse.get(_this.state.className, {count: true,limit:0}).done(function(res) {
      console.log(res)
    })
    Parse.get(_this.state.className, qry).done(function(res) {
      console.log(res)
      res.prospects = res.results
      res.loading = false; 
      res.pages = Math.ceil(res.count/_this.props.prospectsPerPage);
      res.totalCount = res.count
      _this.setState(res)
    })

    Parse.get(this.props.listClassName, { order: '-createdAt'}).done(function(res) {
      _this.setState({lists: res.results})
    })
  },

  generate_id : function () {
    return '_' + Math.random().toString(36).substr(2,9); 
  },
});

/*  Dropdown Menus */
var ListsMenu = React.createClass({displayName: 'ListsMenu',
  render: function() {
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: {
            minWidth:'inherit',
            top: '20px',
            width: '125px',
            right: '154px',
            left:'auto'
          }}, 
        React.DOM.li(null, React.DOM.a({href: "#books"}, 
          React.DOM.i({className: "fa fa-times"}), "  " + ' ' +
          "Delete List"
        )), 
        React.DOM.li(null, React.DOM.a({href: "#podcasts"}, 
          "Rename Lists"
        ))
      )
    );
  }
});

var ListDetailButtons = React.createClass({displayName: 'ListDetailButtons',
  // Rename List
  getInitialState: function() {
    return {
      editMode: false
    }
  },
  render: function() {
    //console.log(this.props.currentListObjectId)
    if(!this.state.editMode) {
      stuff = React.DOM.span({className: "", style: listNameStyle}, 
            (this.props.currentListName == "All") ? '' : React.DOM.i({className: "fa fa-bars", style: {fontSize:16, marginTop:-5}}), 
            (this.props.currentListName == "All") ? '' : "   " +this.props.currentListName
              )
    } else {
      stuff = React.DOM.input({className: "form-control", style: {width: 100, float: 'left', height: 24, marginTop: -1}})
    }
    return (

          React.DOM.div(null, 
            React.DOM.h4({style: {margin:0}}, " ", stuff, 
              React.DOM.a({href: "javascript:", 
                style: listBtn, 
                'data-toggle': "modal", 
                id: "renameListBtn", 
                'data-target': ".bs-renameList-modal-sm", 
                style: {display:'none'}, 
                className: "btn btn-xs btn-default"}, 
                React.DOM.i({className: "fa fa-pencil"})
              ), 
              React.DOM.a({href: "javascript:", 
                onClick: this.deleteList, 
                style: listBtn, 
                style: {display:'none'}, 
                className: "btn btn-xs btn-default"}, 
                React.DOM.i({className: "fa fa-trash-o"})
              )
            )

          )
      );
  },

  renameList: function(newListName) { this.props.renameList(newListName) },

  deleteList: function(){
    thiss = this;
    swal({   
      title: "Are you sure?",   
      text: "Your will not be able to recover this prospect list!",   
      type: "warning",   
      showCancelButton: true,   
      confirmButtonColor: "#DD6B55",   
      confirmButtonText: "Yes, delete it!",   
      closeOnConfirm: false }, 
      function(){   swal("Deleted!", "Your prospect list has been deleted.", "success"); 
        console.log('deleted')
        thiss.props.deleteList()
      });
  },

  toggleEdit: function() { this.setState({editMode: !this.state.editMode }) }
});

var PaginateOverlay = React.createClass({displayName: 'PaginateOverlay',
  render: function() {
    return (
        React.DOM.div({id: "paginate-overlay", style: {paddingTop:70}}, 
          Spinner({circleStyle: {backgroundColor:'white'}})
        )
    )
  }
})

var EmptyPeopleProspectsPanel = React.createClass({displayName: 'EmptyPeopleProspectsPanel',
  openLinkedinWindow: function() {
    if(this.props.className == "Prospect")
      window.open('https://www.linkedin.com/vsearch/p?type=people')
    else
      window.open('https://www.linkedin.com/vsearch/c')
  },

  render: function() {

    name = (this.props.className == "Prospect") ? "Prospects" : "Companies"
    return (
      React.DOM.div({className: "col-md-offset-3 col-md-6", style: {height:400}}, 
      React.DOM.div({className: "panel panel-default", style: {marginTop:100,height:200}}, 
        React.DOM.div({className: "panel-body"}, 
          React.DOM.h1({className: "lead", style: {textAlign:'center'}}, "Start Prospecting On Linkedin"), 
          React.DOM.a({href: "javascript:", onClick: this.openLinkedinWindow, className: "btn btn-primary", style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%) !important',display:'block',marginRight:'auto',marginLeft:'auto',width:200, marginTop:50}}, 
            React.DOM.i({className: "fa fa-search"}), "  ", 
            "Search for "+name+"!")
        )
      )
    )
    );
  }
});

var CompanyProspectHeader = React.createClass({displayName: 'CompanyProspectHeader',
  render: function() {
    return (
      React.DOM.tr(null, 
        React.DOM.th(null), 
        React.DOM.th(null), 
        React.DOM.th({style: {width:400}}, "Name"), 
        React.DOM.th({style: {width:500}}, "Industry"), 
        React.DOM.th({style: {width:137,display:'none'}}, "# of Prospects"), 
        React.DOM.th(null, "  "), 
        React.DOM.th({style: {display:'none'}}, "Signals"), 
        React.DOM.th({style: {width:100}}, "Added"), 
        React.DOM.th(null, " "), 
        React.DOM.th(null, " ")
      )
    );
  }
});

var CurrentLists = React.createClass({displayName: 'CurrentLists',
  listAction: function(e) {
    var listSelect = _.filter(this.props.lists, function(item) {
       return item.name == $(e.target).text()
    });

    this.props.moveSelectedProspects(listSelect[0].objectId)
  },

  componentDidMount: function() {
    //$(this.getDOMNode().data()
  },

  render: function() {
    lists = [] 
    for(i=0;i< this.props.lists.length;i++) {
      console.log(this.props.lists[i].objectId)
      lists.push(
        React.DOM.li(null, React.DOM.a({style: {fontWeight:'bold',fontSize:'10px'}, 
            className: "dropdown-move-list-name dropdown-list-name", 
            href: "javascript:", 
            'data-move-objectId': "this.props.lists[i].objectId"}, 
           this.props.lists[i].name))
      )
    }
    //console.log(this.props.copyDropdownStyle)
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: {right:123,top:27}}, 
        lists
      )
    );
  }
});

var CurrentListsTwo = React.createClass({displayName: 'CurrentListsTwo',
  listAction: function(e) {
    listName = $(e.target).text()
    
    var listSelect = _.filter(this.props.lists, function(item) {
       return item.name == listName
    });

    this.props.copySelectedProspects(listSelect[0].objectId)
  },

  render: function() {
    lists = [] 
    for(i=0;i< this.props.lists.length;i++) {
      lists.push(
        React.DOM.li(null, React.DOM.a({style: {fontWeight:'bold',fontSize:'10px'}, 
               className: "dropdown-copy-list-name dropdown-list-name", 
               href: "javascript:", 
               'data-objectId': this.props.lists[i].objectId}, 
               
          this.props.lists[i].name))
      )
    }
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: {width:114,right:6,top:27}}, 
        lists
      )
    );
  }
});

},{"./data_row.js.min.js":20,"./loading_spinner.js.min.js":32,"./messenger.js.min.js":35,"./panel_footing.js.min.js":40,"./side_menu_user_prospects.js.min.js":48,"./spinner.js.min.js":57,"./user_prospect.js.min.js":64,"./user_prospect_header.js.min.js":65}],44:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createListModal
  createList: function() {
    console.log($('#listTitle').val())

    data =  {
      'name'        : $('#listTitle').val().trim(),   //Waiting , Running
      'user'        : { '__type':'Pointer',
                      'className':'_User',
                      'objectId':'xWESiw5Smd' },
    }

    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectList',
      type:'POST',
      headers: appConfig.parseHeaders,
      data: JSON.stringify(data),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });

    data.count = 0

    this.props.createList(data)
    
    $('#createListModal').modal('hide')
    $('body').removeClass('modal-open');
    $('.modal-backdrop').remove();
    //$('button.close').click()
  },

  renameList: function(e) {
    e.preventDefault()
    //console.log($('#newListName').val())
    newListName = $('#newListName').val()
    if(newListName.trim() != "")
      this.props.renameList(newListName)
    // Disable Modal
  },

  render: function() {
    return (
          React.DOM.div({className: "modal fade bs-renameList-modal-sm", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "createListModal", style: {top:'200px'}}, 
            React.DOM.div({className: "modal-dialog modal-sm"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-list"}), "  Rename List")
                ), 
                React.DOM.div({className: "modal-body"}, 
                  React.DOM.form({onSubmit: this.renameList}, 
                    React.DOM.input({id: "newListName", type: "text", placeholder: "Enter list title...", className: "form-control"}), 
                    React.DOM.br(null), 
                    React.DOM.a({href: "javascript:", 
                      onClick: this.renameList, 
                      className: "btn btn-success", 
                      style: {display:'block', width:'100%'}}, 
                      "Create List"
                    )
                  )
                )
              )
            )
          )
    );
  }
});


},{}],45:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  render: function() {
    return (
      React.DOM.div(null, 
        "Scheduls"
      )
    );
  }
});

},{}],46:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {
      currentProspect: 0,
    }
  },

  sendEmails: function() {
    selectedCampaign = this.props.selectedCampaign
    campaign_id = selectedCampaign.objectId
    prospectlist_id = selectedCampaign.prospect_list.objectId
    template_id = this.props.currentTemplate.objectId
    
    $.ajax({
      //url:'https://nameless-retreat-3525.herokuapp.com/send_email',
      url:'http://127.0.0.1:5000/v1/campaign/email',
      data: {
        template : template_id,
        campaign : campaign_id,
        //batch: batch_id
      },
      success: function(res) { console.log(res.results) },
      error: function(err) { console.log(err) }
    })

    /* */
    // Update Followup
    // Persist Followup
    // close modal
  },

  render: function() {
    prospect = this.props.prospects[this.state.currentProspect]
    prospect = (prospect) ? prospect : {'name':'','email':''}

    var thiss = this;
    console.debug('SEND EMAIL BATCH')
    console.debug(this.props.currentBatch)
    newBatch = _.isEqual(this.props.currentBatch, {})
    prospects = (newBatch) ? this.props.newProspects : this.props.prospects
    if(newBatch){
      prospects = _.map(this.props.newProspects, function(prospect) {
          return UserPlaceHolder({prospect: prospect})
      })
    } else {
      prospects = _.map(this.props.prospects, function(prospect) {
        if(_.findWhere(prospect.batches, {objectId: thiss.props.currentBatch}))
          return UserPlaceHolder({prospect: prospect})
      })
    }
    prospects = _.compact(prospects)
    console.debug(prospects)
    console.debug(prospects.length)
    prospectCount = prospects.length
    email = (prospect.email) ? prospect.email : ""
    if(email == "no_email" || email == "") {
      console.log('GUESSING')
      if(prospect.email_guesses) {
        console.log('GUESSING EMAIL')
        guess = _.findWhere(prospect.email_guesses, {tried: false})
        name = _.title(prospect.name.trim())

        vars = {
          first: _.first(name.split(' ')).replace(/\W/g, ''),
          last: _.last(name.split(' ')).replace(/\W/g, ''),
          fi: _.first(name.split(' '))[0].replace(/\W/g, ''),
          li: _.last(name.split(' '))[0].replace(/\W/g, '')
        }
        if(guess){
          console.log(guess.pattern.pattern)
          email = Mustache.render(guess.pattern.pattern, vars)
          email = email+"@"+prospect.domain
        }
      } else {
        console.log('NO GUESSES FOUND')
      }
    }
    email = email.toLowerCase()
    email = email
    return (
      React.DOM.div({className: "modal fade bs-sendEmail-modal-lg", tabIndex: "-1", 
           role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", 
           id: "sendEmailModal", style: {top:'10px'}}, 
            React.DOM.div({className: "modal-dialog modal-lg"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
        React.DOM.button({type: "button", 
                onClick: this.sendEmails, 
                style: {float:'right'}, 
                className: "btn btn-primary btn-sm"}, 
                React.DOM.i({className: "fa fa-paper-plane"}), "  Send Email"), 
        React.DOM.button({type: "button", style: {marginRight:10, float:'right'}, 
                className: "btn btn-default btn-sm", 'data-dismiss': "modal"}, "Close"), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-envelope"}), "  Send Email" + ' ' +
                    "  ", 
                    React.DOM.small(null, "("+prospectCount+")")
                  )
                ), 
                React.DOM.div({className: "modal-body", style: {paddingTop:5}}, 
                  React.DOM.h4(null, "People"), 
                  
                  React.DOM.div({className: "prospect-container"}, 
                    prospects
                  ), 
                  React.DOM.br(null), 
                  React.DOM.h4({style: {display:'inline-block'}}, "Emails    ", 
                  React.DOM.a({href: "javascript:", 
              className: (this.state.currentProspect == 0 ) ? "badge btn disabled" : "badge btn", 
                    onClick: this.previousProspect}, React.DOM.i({className: "fa fa-arrow-left"})), "  ", 
                    React.DOM.small(null, (this.state.currentProspect+1)+' of '+prospectCount
                  )), 
                  "   ", 
                  React.DOM.a({href: "javascript:", 
            className: (this.state.currentProspect ==  this.props.prospects.length-1) ? "btn disabled badge" : "btn badge", 
                    onClick: this.nextProspect}, React.DOM.i({className: "fa fa-arrow-right"})), 

                  React.DOM.div(null, 

React.DOM.ul({className: "list-group email-holder", style: {borderTop:'solid 1px #eee'}}, 
  React.DOM.li({className: "list-group-item"}, 
    React.DOM.h5({style: {display:'inline-block',marginTop:0,marginBottom:0}}, "To:  "), 
    
    React.DOM.span({className: "label label-primary"}, email)
  ), 
  React.DOM.li({className: "list-group-item"}, 
    React.DOM.h5({style: {display:'inline-block',marginTop:0,marginBottom:0}}, "Subject:  "), " ", React.DOM.span({className: "label label-primary"}, this.props.currentTemplate.subject)
  ), 
  React.DOM.li({className: "list-group-item body"})
)
  
                  )

                ), 

      React.DOM.div({className: "modal-footer", style: {display:'none'}}, 
        React.DOM.button({type: "button", 
                className: "btn btn-default", 'data-dismiss': "modal"}, "Close"), 
        React.DOM.button({type: "button", 
                className: "btn btn-primary"}, "Send Email")
      )
              )
            )
          )
    );
  },

  previousProspect: function() {
    this.setState({currentProspect: this.state.currentProspect-1 })
  },

  nextProspect: function() {
    this.setState({currentProspect: this.state.currentProspect+1 })
  },

  parseTemplate: function(templateBody) {
    first_name = prospect.name.split(' ')[0]
    //hiring_signal = prospect.signals

    signals = (prospect.signals) ? prospect.signals[0] : ""
    templateBody = Mustache.render(templateBody, {
      hiring_signal: signals,
      first_name: _.title(prospect.name.split(' ')[0])
    })

    //console.log(templateBody)
      
    return templateBody
  },

  componentDidUpdate: function() {
    //console.log(this.props.currentTemplate)
    parsedTemplate = this.parseTemplate(this.props.currentTemplate.body)
    
    //$('.body').html(this.props.currentTemplate.body)
    $('.body').html(parsedTemplate)
  }
});

var UserPlaceHolder = React.createClass({displayName: 'UserPlaceHolder',
  render: function() {
    return (
        React.DOM.div({className: "btn-group", style: {marginRight:5,marginBottom:5}}, 
          React.DOM.div({className: "btn-group"}, 
            React.DOM.button({type: "button", 
                    className: "btn btn-success btn-sm"}, 
              React.DOM.i({className: "fa fa-user"}), "  ", 
              (this.props.prospect) ? _.title(this.props.prospect.name) : ""
            )
          ), 
          React.DOM.button({type: "button", className: "btn btn-success btn-sm"}, 
            React.DOM.i({className: "fa fa-trash-o"})
          )
        )
    )
  }
});

},{}],47:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Sent Mail
  getInitialState: function() {
    return {
      sentEmails: []
    }
  },

  componentDidMount: function() {
    thiss = this;
    $.ajax({
      url: 'https://api.parse.com/1/classes/SentEmail',
      data:{include: 'campaign,prospect,prospect.email_guesses.pattern'},
      headers: appConfig.headers,
      success: function(res) { thiss.setState({sentEmails: res.results}) },
      error: function() {}
    })
  },

  render: function() {
    sentEmails = []
    for(i=0;i< this.state.sentEmails.length; i++) 
      sentEmails.push(SentEmailRow({sentEmail: this.state.sentEmails[i]}))

    return (
      React.DOM.div({style: {overflow:'auto',height:550}}, 
        React.DOM.table({className: "table table-striped", style: {marginBottom:0}}, 
          React.DOM.thead(null, 
            React.DOM.th(null), 
            React.DOM.th(null, "Prospect Name"), 
            React.DOM.th(null, "Prospect Email"), 
            React.DOM.th({style: {width:290}}, "Status"), 
            React.DOM.th(null, "Campaign"), 
            React.DOM.th(null, "Template")
          ), 
          React.DOM.tbody(null, 
            sentEmails
          )
        )
      )
    );
  }
});

var SentEmailRow = React.createClass({displayName: 'SentEmailRow',
  render: function() {
    sentEmail = this.props.sentEmail
    //console.log(sentEmail)

    email = sentEmail.email
    if(email == "no_email"){
      first = sentEmail.prospect.name.split(' ')[0]
      last = _.last(sentEmail.prospect.name.split(' '))

      pattern = _.findWhere(sentEmail.prospect.email_guesses, {'tried':false})
      data = {first: first, last: last, fi: first[0], li: last[0]}
      email = Mustache.render(pattern.pattern.pattern, data).toLowerCase()
    }

    return (
      React.DOM.tr(null, 
        React.DOM.td(null, React.DOM.h6(null, 
            React.DOM.i({className: "fa fa-clock"}), 
            moment(sentEmail.createdAt).fromNow())), 
        React.DOM.td(null, 
          React.DOM.h6({style: {fontSize:14,fontWeight:'bold',marginBottom:0}}, sentEmail.prospect.name), 
          React.DOM.h6({style: {marginTop:4,marginBottom:0}}, sentEmail.prospect.pos.trim()), 
          React.DOM.h6({style: {marginTop:4}}, sentEmail.prospect.company_name)
        ), 
        React.DOM.td(null, React.DOM.h6(null, email)), 
        React.DOM.td({style: {paddingTop:13}}, 
          React.DOM.span({className: "label label-default"}, "Queued"), 
          React.DOM.i({className: "fa fa-chevron-circle-right text-muted", 
             style: {paddingLeft:5,paddingRight:5}}), 
          React.DOM.span({className: "label label-success"}, "Opened"), 
          React.DOM.i({className: "fa fa-chevron-circle-right text-muted", 
             style: {paddingLeft:5,paddingRight:5}}), 
          React.DOM.span({className: "label label-default"}, "Delivered"), 
          React.DOM.i({className: "fa fa-chevron-circle-right text-muted", 
             style: {paddingLeft:5,paddingRight:5}}), 
          React.DOM.span({className: "label label-default"}, "Replied")
        ), 
        React.DOM.td(null, 
          React.DOM.h6({style: {cursor:'pointer'}}, 
          React.DOM.i({className: "fa fa-list-alt"}), "  " + ' ' +
          "Boston VP Sales - Retail"
          )
        ), 
        React.DOM.td(null, 
          React.DOM.h6({style: {cursor:'pointer'}}, 
          React.DOM.i({className: "fa fa-file-text-o"}), "  " + ' ' +
          "Followup #2 - Provide Value ", React.DOM.br(null), 
          React.DOM.span({className: "text-muted"}, " Subject: Just wanted to followup on the last email "), React.DOM.br(null), 
          React.DOM.span({className: "text-muted"}, " Body: Just wanted to followup on the last email ")

          )
        )
      )
    )
  }
})

},{}],48:[function(require,module,exports){
/** @jsx React.DOM */

var SideMenuListOption = require('./user_side_menu_list.js.min.js');
var CreateListModal = require('./create_list_modal.js.min.js')
var Messenger = require('./messenger.js.min.js')

var DeleteListModal = require('./delete_list_modal.js.min.js')
var RenameListModal = require('./rename_list_modal.js.min.js')
var SideMenuListOption = require('./user_side_menu_list.js.min.js');

module.exports = React.createClass({displayName: 'exports',
  //SideMenuProspects - SideList
  getInitialState: function() {
    return {
      /*
      createList: 
      renameList:
      deleteList:
      changeList:
      currentList:
      totalCount:
      lists:

      */
     lists: [],
    }
  },

  createList: function (data) {
    this.props.createList(data)
  },

  componentDidUpdate: function() {
    $('.dropdown-copy-list-name').on('click', function(e) {
      console.log(e.target)
      console.log($(e.target).data('objectId'))
      //this.props.copySelectedProspects(listSelect[0].objectId)
    })

    $('.dropdown-move-list-name').on('click', function(e) {
      console.log(e.target)
      console.log($(e.target).data('move-objectId'))
      //this.props.moveSelectedProspects(listSelect[0].objectId)
    })
  },

  componentDidMount: function() {
    var _this = this;
    Parse.get(this.props.listClassName, { order: '-createdAt'}).done(function(res) {
      _this.setState({lists: res.results})
    })

    $('.dropdown-copy-list-name').on('click', function(e) {
      console.log(e.target)
      console.log($(e.target).data('objectId'))
      //this.props.copySelectedProspects(listSelect[0].objectId)
    })

    $('.dropdown-move-list-name').on('click', function(e) {
      console.log(e.target)
      console.log($(e.target).data('objectId'))
      //this.props.moveSelectedProspects(listSelect[0].objectId)
    })
  },
  
  removeSelectedProspects: function() {
    // remove selected from list
    selectedProspects = JSON.parse(localStorage.selectedProspects)
    _list = Parse._pointer(this.props.listClassName, this.state.currentListObjectId)
    body = { lists: { '__op' : 'Remove', "objects" : [_list] } }
    if(this.state.currentList == 'All'){ body = { archived: true } }
    Parse.batchUpdate('Prospect', selectedProspects, body)
    // Update List Counts
    //
  },

  moveSelectedProspects: function(_list) {
    // move to list
    // only if the current list is not all
    // remove prospects from currentList
    if(!this.props.currentListObjectId){ console.log('not supported'); return 0}
    selectedProspects = JSON.parse(localStorage.selectedProspects)
    old_list = Parse._pointer(this.props.listClassName, this.props.currentListObjectId)
    new_list = Parse._pointer(this.props.listClassName, _list)
    this.props.removeProspects(selectedProspects)

    var _this = this;
    console.log(_list)
    console.log(this.props.currentListObjectId)
    body = { lists: { '__op' : 'Remove', "objects" : [old_list] } }
    Parse.batchUpdate('Prospect', selectedProspects, body).done(function() {
      increment = {count: {__op: 'Increment', amount: -1*selectedProspects.length}}
      Parse.put(_this.props.listClassName+'/'+_list, increment, function(res) {
        console.log(res)
      })

      amount = selectedProspects.length
      var lists = _.map(_this.state.lists, function(item) {
        if(item.objectId == _this.props.currentListObjectId)
          item.count = item.count - amount
        return item
      })
      console.log(lists)
      _this.setState({lists: lists})
    })

    body = { lists: { '__op' : 'AddUnique', "objects" : [new_list] } }
    Parse.batchUpdate('Prospect', selectedProspects, body).done(function() {
      increment = {count: {__op: 'Increment', amount: selectedProspects.length}}
      Parse.put(_this.props.listClassName+'/'+_list, increment, function(res) {
        console.log(res)
      })

      amount = selectedProspects.length
      var lists = _.map(_this.state.lists, function(item) {
        if(item.objectId == _list)
          item.count = (item.count) ? item.count + amount : amount
        return item
      })
      //console.log(lists)
      _this.setState({lists: lists})
    })
    // Update List Counts
  },

  copySelectedProspects: function(_list) {
    // TODO - check to see if prospect exists in the other list
    // TODO - Remove from selected prospects If prospects already exist in list do not increment
    console.log('update')
    selectedProspects = JSON.parse(localStorage.selectedProspects)
    new_list = Parse._pointer(this.props.listClassName, _list)
    body = { lists: { '__op' : 'AddUnique', "objects" : [new_list] } }
    console.log(body)

    //

    var _this = this;
    Parse.batchUpdate('Prospect', selectedProspects, body).done(function(res) {
      console.log(res)
      // if success
      increment = {count: {__op: 'Increment', amount: selectedProspects.length}}
      Parse.put(_this.props.listClassName+'/'+_list, increment, function(res) {
        console.log(res)
      })

      amount = selectedProspects.length
      var lists = _.map(_this.state.lists, function(item) {
        if(item.objectId == _list)
            item.count = (item.count) ? item.count + amount : amount
        return item
      })
      console.log(lists)
      _this.setState({lists: lists})
    })
  },

  changeList: function(e) {
    /*
    currentList = $(e.target).parent()//.data('list')
    console.log(currentList)
    this.props.changeList(currentList.name, currentList.objectId)
    */
  },

  render: function() {
    if(this.props.currentList == "All")
      styles = {'backgroundColor':'rgb(0, 122, 255)', 'color':'white'} 
    else
      styles =  {}

    lists = [SideMenuListOption({list: {name: 'All', count: this.props.totalCount}, 
                                 iconType: 'users', 
                                 changeList: this.props.changeList}), 
             SideMenuListOption({list: {name: 'Archived', count: '~'}, 
                                 iconType: 'archive', 
                                 changeList: this.props.changeList, 
                                 hideCount: true})]

    for(i=0;i< this.state.lists.length;i++){
      list = this.state.lists[i]
      if(list.list_type == "signal_list")
        iconType = "wifi"
      else if (list.list_type == "mining_job")
        iconType = "cloudDownload"
      if(list.list_type)
        lists.push(SideMenuListOption({list: list, 
                                       iconType: iconType, 
                                       changeList: this.props.changeList}))
      else 
        lists.push(SideMenuListOption({list: list, 
                                       changeList: this.props.changeList}))
    }

    return (
      React.DOM.div({className: "col-lg-2 col-md-2 col-sm-2 col-xs-2", 
           style: {padding:'0',height:'438px',backgroundColor:'#e0e9ee',
                   borderRight:'1px solid #b0b8bf',textAlign:'center'}}, 
                   React.DOM.div({className: "prospect-list-header", style: {paddingLeft:10, textAlign:'center'}}, 
                     "Lists"

                   ), 
        React.DOM.div({className: "btn-group-vertical", 
             style: {width:'100%', height: '320px', overflow: 'auto'}}, 
          lists
        ), 
        React.DOM.br(null), React.DOM.br(null), 
        React.DOM.a({href: "javascript:", className: "btn btn-primary new-list-btn", 
              'data-toggle': "modal", 'data-target': ".bs-example-modal-sm", 
              style: { backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
          React.DOM.i({className: "fa fa-plus-circle"}), "  New List"
        ), 
        CreateListModal({createList: this.createList, 
                         updateList: this.updateList, 
                         listClassName: this.props.listClassName}), " ", React.DOM.br(null)
      )
    );
  },

  createList: function(data) { 
    this.setState({ lists: [data].concat(this.state.lists) }) 
  },

  updateList: function(_id, objId) {
    updated = _.map(this.state.lists, function(list) {
      if(list.tmp == _id)
          list.objectId = objId
      return list
    })
    console.log("update broski")
    this.setState({lists: updated})
  },

  renameList: function(newListName) {
    thiss = this;
    var filtered = _.filter(this.state.lists, function(item) {
      if(item.name == thiss.state.currentList) {
        item.name = newListName
        return item
      }
      return item
    });

    this.setState({lists : filtered, currentList: newListName})

    $('.modal').click()
    $('#newListName').val('')
    $('.modal-backdrop').click()

    Parse.update(this.props.listClassName, {'name':newListName})
  },

  deleteList: function() {
    var filtered = _.filter(this.state.lists, function(item) {
      if(item.objectId == thiss.state.currentListObjectId)
        return false
      return true
    });

    this.setState({lists: filtered, currentList: 'All'})
    this.changeList('All', '')

    appConfig.closeModal(); 
    $('#newListName').val('');
    Parse.delete(this.props.listClassName+'/'+this.state.currentListObjectId);
  },
});

var CurrentLists = React.createClass({displayName: 'CurrentLists',
  listAction: function(e) {
    var listSelect = _.filter(this.props.lists, function(item) {
       return item.name == $(e.target).text()
    });

    this.props.moveSelectedProspects(listSelect[0].objectId)
  },

  render: function() {
    lists = [] 
    for(i=0;i< this.props.lists.length;i++) {
      lists.push(
        React.DOM.li(null, React.DOM.a({style: {fontWeight:'bold',fontSize:'10px'}, 
            className: "dropdown-list-name", 
            href: "javascript:", 
            onClick: this.listAction}, this.props.lists[i].name))
      )
    }
    //console.log(this.props.copyDropdownStyle)
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: {right:-23,top:27}}, 
        lists
      )
    );
  }
});

var CurrentListsTwo = React.createClass({displayName: 'CurrentListsTwo',
  listAction: function(e) {
    listName = $(e.target).text()
    
    var listSelect = _.filter(this.props.lists, function(item) {
       return item.name == listName
    });

    this.props.copySelectedProspects(listSelect[0].objectId)
  },

  render: function() {
    lists = [] 
    for(i=0;i< this.props.lists.length;i++) {
      lists.push(
        React.DOM.li(null, React.DOM.a({style: {fontWeight:'bold',fontSize:'10px'}, 
               className: "dropdown-list-name", 
               href: "javascript:", 
               onClick: this.listAction}, 
          this.props.lists[i].name))
      )
    }
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: {width:114,right:-71,top:27}}, 
        lists
      )
    );
  }
});

},{"./create_list_modal.js.min.js":15,"./delete_list_modal.js.min.js":21,"./messenger.js.min.js":35,"./rename_list_modal.js.min.js":44,"./user_side_menu_list.js.min.js":66}],49:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // SignalAnalytics
  getInitialState: function() {
    return {
      reports : []
    }
  },

  componentDidMount: function() {


var margin = {top: 1, right: 1, bottom: 6, left: 1},
    width = 850 - margin.left - margin.right,
    height = 350 - margin.top - margin.bottom;

var formatNumber = d3.format(",.0f"),
    format = function(d) { return formatNumber(d) + " TWh"; },
    color = d3.scale.category20();

var svg = d3.select("#chart").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var sankey = d3.sankey()
    .nodeWidth(15)
    .nodePadding(10)
    .size([width, height]);

var path = sankey.link();

//d3.json("https://gist.githubusercontent.com/rsimba/33fbc755fa71e6aea446/raw/880345a16dbae39753682bb659249404a3820146/gistfile1.json", function(energy) {
//d3.json("https://gist.githubusercontent.com/rsimba/70d4d3393d33777f4c11/raw/228e30d788591b15d85f20f8baf2ccd50b79298c/gistfile1.json", function(energy) {
/*
url = "http://127.0.0.1:5000/v1/report/profile"
  */
url = "https://api.parse.com/1/classes/ProspectProfile/TjCZRfHB7N"
d3.json(url)
  .header("X-Parse-Application-Id", "N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ")
  .header("X-Parse-REST-API-Key", "VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb")
  .header("Content-Type", "application/json")
  .get(function(error, energy) {
    console.log(error)
    console.log(energy)
    energy = energy.sankey
  sankey
      .nodes(energy.nodes)
      .links(energy.links)
      .layout(32);

  var link = svg.append("g").selectAll(".link")
      .data(energy.links)
    .enter().append("path")
      .attr("class", "link")
      .attr("d", path)
      .style("stroke-width", function(d) { return Math.max(1, d.dy); })
      .sort(function(a, b) { return b.dy - a.dy; });

  link.append("title")
      .text(function(d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

  var node = svg.append("g").selectAll(".node")
      .data(energy.nodes)
    .enter().append("g")
      .attr("class", "node")
      .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; })
    .call(d3.behavior.drag()
      .origin(function(d) { return d; })
      .on("dragstart", function() { this.parentNode.appendChild(this); })
      .on("drag", dragmove));

  node.append("rect")
      .attr("height", function(d) { return d.dy; })
      .attr("width", sankey.nodeWidth())
      //.style("fill", function(d) { return d.color = color(d.name.replace(/ .*/, "")); })
      .style("stroke", function(d) { return d3.rgb(d.color).darker(2); })
    .append("title")
      .text(function(d) { return d.node + "\n" + d.value; });

  node.append("text")
      .attr("x", -6)
      .attr("y", function(d) { return d.dy / 2; })
      .attr("dy", ".35em")
      .attr("text-anchor", "end")
      .attr("transform", null)
      //.text(function(d) { return d.name; })
      .text(function(d) { return d.name + "\n" + d.value; })
    .filter(function(d) { return d.x < width / 2; })
      .attr("x", 6 + sankey.nodeWidth())
      .attr("text-anchor", "start");

  function dragmove(d) {
    d3.select(this).attr("transform", "translate(" + d.x + "," + (d.y = Math.max(0, Math.min(height - d.dy, d3.event.y))) + ")");
    sankey.relayout();
    link.attr("d", path);
  }
});


  },
  
  render: function() {
    //TODO - add 2 pie charts for clearspark analysis
    return (
      React.DOM.div(null, 
        React.DOM.div({style: {height:44,borderBottom:'solid 1px rgb(221, 221, 221)'}}, 
          React.DOM.h4({onClick: this.returnToCalendarView, 
              style: {fontWeight:200, float:'left',cursor:'pointer',marginTop:7,
                      paddingLeft:20,paddingTop:5, display:'inline-block'}}, 
                React.DOM.i({className: "fa fa-pie-chart", style: {marginRight:5}}), 
                "Analytics -",  
                this.props.currentProfile.name
          )
        ), 
        React.DOM.div({id: "chart"})
      )
    )
  }
})

},{}],50:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  render: function() {
    return (
      React.DOM.div({className: "signal-gradient-bg col-md-12", style: {textAlign:'center'}}, 
          React.DOM.h3({style: {fontWeight:'bold',color:'white'}}, "Create Signal Strategy"), 
            React.DOM.div({className: "strategy-app"}, " "), 
            React.DOM.div({className: "strategy-app"}, " "), 
            React.DOM.div({className: "strategy-app"}, " "), 
            React.DOM.div({className: "strategy-app"}, " ")
      )
    )
  }
});
/*
 
        <table>
          <tr>
            <td> <div className="strategy-app"> </div> </td>
            <td> <div className="strategy-app"> </div> </td>
            <td> <div className="strategy-app"> </div> </td>
            <td> <div className="strategy-app"> </div> </td>
          </tr>
        </table>
*/

},{}],51:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // SignalCalendar
  getInitialState: function() {
    return {
      reports : []
    }
  },

  getSignalReport: function() {
    var _this = this;
    qry = {
      where : JSON.stringify({profile:{
          __type:'Pointer',
          className:'ProspectProfile',
          objectId:this.props.currentProfile.objectId
      }}),
      order:'-createdAt',
      limit:10
    }

    Parse.get('SignalReport', qry).done(function(res) {
      console.log(res)
      _this.setState({reports: res.results})
    })
  },

  componentDidMount: function() {
    this.getSignalReport()
  },

  componentDidUpdate: function() {
    //this.getSignalReport()
  },

  render: function() {
    reports = []
    for(i=0;i< this.props.reports.length; i++) {
      if(this.props.reports[i]) {
          reports.push(SignalReportRow({setCurrentReport: this.setCurrentReport, 
                                    prospectSignalReport: this.prospectSignalReport, 
                                        setCurrentView: this.setCurrentView, 
                                        report: this.props.reports[i]}))
      }
    }

    return (
      React.DOM.div({className: "container", style: {paddingLeft:0,
                                         paddingRight:0,width:'100%'}}, 
        React.DOM.div({style: {height:44,borderBottom:'solid 1px rgb(221, 221, 221)'}}, 
          React.DOM.h4({onClick: this.returnToCalendarView, 
              style: {fontWeight:200, float:'left',cursor:'pointer',marginTop:7,
                      paddingLeft:20,paddingTop:5, display:'inline-block'}}, 
                React.DOM.i({className: "fa fa-calendar", style: {marginRight:5}}), 
                this.props.currentProfile.name
          )
        ), 
        React.DOM.div({className: "col-md-12", style: {paddingLeft:0,paddingRight:0,
                                           height:456,overflow:'auto'}}, 
          React.DOM.div({style: {overflow:'auto'}}, 
            React.DOM.table({className: "table table-striped", style: {marginBottom:0}}, 
              React.DOM.thead(null, 
                React.DOM.th(null), 
                React.DOM.th({style: {textAlign:'center'}}, 
                  React.DOM.i({className: "fa fa-clock-o"}), " Last Ran"
                ), 
                React.DOM.th({style: {textAlign:'center', display:'none'}}, "Posted Job Listing"), 
                React.DOM.th(null, "Company Signals"), 
                React.DOM.th({style: {display:'block'}}, "Prospect Signals"), 
                React.DOM.th({style: {width:150,textAlign:'center'}})
              ), 
              React.DOM.tbody({className: "reports"}, 
                reports
              )
            )
          )
        )
      )
    );
  },

  setCurrentReport: function(newReport) {
    this.props.setCurrentReport(newReport)
  },

  prospectSignalReport: function(signalReport) {
    this.props.prospectSignalReport(this.props.currentProfile, signalReport)
  },
});

var SignalReportRow = React.createClass({displayName: 'SignalReportRow',
  getInitialState: function() {
    return {
      companyCount: '~',
      peopleCount: '~'
    }
  },

  rowClick: function() {
    if(this.props.report.done)
      this.props.setCurrentReport(this.props.report)
    else
      alertify.log("This mining job is still in progress. You'll be notified when it's completed")
  },

  prospectSignalReport: function(e) {
    this.props.prospectSignalReport(this.props.report)
    e.stopPropagation()
  },

  componentDidMount: function() { 
    console.log('calendar')
    report = appConfig.pointer('SignalReport', this.props.report.objectId)
    qry = {
      where:JSON.stringify({ report: report }),
      count: 1
    }
    var thiss = this;
    /*
    $.ajax({
      url:'https://api.parse.com/1/classes/PeopleSignal',
      data: qry,
      headers: appConfig.headers,
      success: function(res) { thiss.setState({peopleCount: res.count})},
      error: function(err) { console.log(err.responseText) },
    })

    $.ajax({
      url:'https://api.parse.com/1/classes/CompanySignal',
      data: qry,
      headers: appConfig.headers,
      success: function(res) { thiss.setState({companyCount: res.count})},
      error: function(err) { console.log(err.responseText) },
    })
    */
  },

  render: function() {
    prospected = this.props.report.prospected
    if(!this.props.report.mining_job)
      icon = React.DOM.i({className: "fa fa-wifi"})
    else
      icon = React.DOM.i({className: "fa fa-cloud-download", style: {color:'#555'}})

    loading = (!this.props.report.done) ? React.DOM.div({className: "profile-loading", style: {marginLeft:30}}, 
          React.DOM.div({className: "double-bounce1", style: {backgroundColor:'#5cb85c'}}), 
          React.DOM.div({className: "double-bounce2", style: {backgroundColor:'#5cb85c'}})
          ) : React.DOM.a({href: "javascript:", 
                    onClick: this.prospectSignalReport, 
             style: {fontWeight:'bold',marginTop:5}, 
     className: (prospected) ? "btn btn-xs btn-success disabled green-gradient" : "btn btn-xs btn-success green-gradient"}, 
             (prospected) ? 'Prospected' : 'Prospect All'
          )
    // Make an Alert when somebody clicks on in progress signal report
    return (
      React.DOM.tr({onClick: this.rowClick, style: {cursor:'pointer'}}, 
        React.DOM.td({style: {textAlign:'right',paddingTop:15}}, 
          icon
        ), 
        React.DOM.td({style: {textAlign:'center'}}, 
          React.DOM.h6(null, 
            moment(this.props.report.createdAt).fromNow()
          )
        ), 
        React.DOM.td({style: {textAlign:'center',display:'none'}}, 
          React.DOM.h6(null, 
          'lol'
          )
        ), 
        React.DOM.td(null, 
          React.DOM.span({className: "label label-success"}, 
            this.props.report.company_count
          ), 
          React.DOM.h6({style: {display:'inline-block'}}, 
            "  Companies found."
          )
        ), 
        React.DOM.td({style: {display:'block'}}, 
          React.DOM.span({className: "label label-success"}, 
            this.props.report.people_count
          ), 
          React.DOM.h6({style: {display:'inline-block'}}, 
            "  People found."
          )
        ), 
        React.DOM.td({style: (this.props.report.done) ? {} : {paddingTop:17}}, 
          loading
        )
      )
    )
  }
});

},{}],52:[function(require,module,exports){
/** @jsx React.DOM */

var CompanyDetail = require('./company_detail.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  // SignalDetail
  getInitialState: function() {
    return {
      currentSignal: 'CompanySignal',
      signals: [],
      //allProspected: this.props.currentProfileReport.prospected,
      companyCount: '~',
      peopleCount: '~',
      detailMode: false,
      detailCompany: {},
    }
  },

  getSignals: function(currentSignal) {
    var thissss = this;
    currentReport = this.props.currentProfileReport.objectId
    currentProfileReport = appConfig.pointer('SignalReport', currentReport)

    qry = {
      where:JSON.stringify({ report: currentProfileReport }),
      include:'company,signal.signal,signal',
      order:'-createdAt',
      limit:100
    }

    $.ajax({
      url: 'https://api.parse.com/1/classes/'+currentSignal,
      data: qry,
      type:'GET',
      headers:appConfig.parseHeaders,
      success: function(res) {
        console.log('SIGNAL DETAIL')
        console.log(res.results)
        console.log('PROFILE REPORT')
        console.log(thissss.props.currentProfileReport.objectId)
        thissss.setState({signals: res.results})
      },
      error: function(err) { console.log(err.responseText) }
    });
  },

  setCompanyState: function() { this.setState({currentSignal: 'CompanySignal'}) }, 
  setPersonState: function() { this.setState({currentSignal: 'PeopleSignal'}) }, 

  componentDidMount: function() {
    console.log('detail')
    console.log(this.props.currentProfileReport.objectId)
    this.getSignals(this.state.currentSignal)
    qry = {
      where:JSON.stringify({ report: currentProfileReport }),
      count: 1,
      limit:100,
      order:'createdAt'
    }
    var thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/classes/PeopleSignal',
      data: qry,
      headers: appConfig.headers,
      success: function(res) { thiss.setState({peopleCount: res.count})},
      error: function(err) { console.log(err.responseText) },
    })

    $.ajax({
      url:'https://api.parse.com/1/classes/CompanySignal',
      data: qry,
      headers: appConfig.headers,
      success: function(res) { thiss.setState({companyCount: res.count})},
      error: function(err) { console.log(err.responseText) },
    })
  },

  componentWillUpdate: function(nextProps, nextState) {
    if(this.state.currentSignal != nextState.currentSignal)
      this.getSignals(nextState.currentSignal)
  },

  returnToCalendarView: function() {
    console.log('return to calendar view')
  },

  render: function() {
    console.log('ALL PROSPECTED')
    console.log(this.state.allProspected)
    console.log('CURRENT SIGNAL')
    console.log(this.state.currentSignal)
    console.log('SIGNAL')
    console.log(this.state.signals)
    signals = []
    for(i=0;i< this.state.signals.length; i++) {
      if(this.state.currentSignal == 'CompanySignal')
        signals.push(CompanyHiringSignalRow({signal: this.state.signals[i], 
                                       toggleDetailMode: this.toggleDetailMode, 
                                       allProspected: this.state.allProspected}))
      else
        signals.push(PeopleSignalRow({signal: this.state.signals[i], 
                                       allProspected: this.state.allProspected}))
    }

    currentProfileReport = this.props.currentProfileReport
    companyBtn = (this.state.currentSignal == "CompanySignal") ? "btn btn-xs btn-default active" : "btn btn-xs btn-default"
    peopleBtn = (this.state.currentSignal == "PeopleSignal") ? "btn btn-xs btn-default active" : "btn btn-xs btn-default"
    score_column=(this.state.currentSignal == "PeopleSignal") ? React.DOM.th(null, "Score") : ""
    logo_column=(this.state.currentSignal == "CompanySignal") ? React.DOM.th(null) : ""
    return (
      React.DOM.div({className: "container", style: {height:456,paddingLeft:0,
                                         paddingRight:0,width:'100%'}}, 
        React.DOM.div({style: {height:44,borderBottom:'solid 1px rgb(221, 221, 221)'}}, 
          React.DOM.h4({onClick: this.returnToCalendarView, 
              style: {float:'left',cursor:'pointer',marginTop:7,fontWeight:200,
                      paddingLeft:20,paddingTop:5,display:'inline-block'}}, 
              
                React.DOM.i({className: "fa fa-calendar", style: {marginRight:5}}), 
                this.props.currentProfile.name
          ), 
          React.DOM.h6({style: {fontSize:13,paddingLeft:5,paddingTop:5,display:'inline-block'}}, 
            React.DOM.i({className: "fa fa-chevron-right", style: {fontSize:9}}), "  ", 
            React.DOM.i({className: "fa fa-clock-o"}), "  ", 
            moment(currentProfileReport.createdAt).fromNow(), "  "
          ), 

          (this.state.allProspected) ?
          React.DOM.a({href: "javascript:", style: {fontWeight:'bold',float:'right',
                                        marginRight:10,marginTop:10}, 
             className: "btn btn-success btn-xs disabled"}, 
            "Prospected"
          ) :
          React.DOM.a({href: "javascript:", style: {fontWeight:'bold',float:'right',
                                        marginRight:10,marginTop:10}, 
             onClick: this.prospectAll, 
             className: "btn btn-success btn-xs green-gradient"}, 
            "Prospect All"
          ), 
          

          React.DOM.div({className: "btn-group", 
               style: {float:'right',marginTop:10,marginRight:10}, 
               'data-toggle': "buttons"}, 
            React.DOM.label({className: peopleBtn, style: {width:50}, 
                 onClick: this.setPersonState}, 
              React.DOM.input({type: "checkbox"}), 
              React.DOM.i({className: "fa fa-user"}), "  ", 
              this.state.peopleCount
            ), 
            React.DOM.label({className: companyBtn, style: {width:50}, 
              onClick: this.setCompanyState}, 
              React.DOM.input({type: "checkbox"}), 
              React.DOM.i({className: "fa fa-building"}), "  ", 
              this.state.companyCount
            )
          )
        ), 

        React.DOM.div({className: "col-md-12", style: {paddingLeft:0,paddingRight:0}}, 
          (this.state.detailMode) ? CompanyDetail({toggleDetailMode: this.toggleDetailMode, detailCompany: this.state.detailCompany}) : "", 
          React.DOM.div({style: {overflow:'auto',height:456}}, 
            React.DOM.table({className: "table table-striped"}, 
              React.DOM.thead(null, 
                React.DOM.th({style: {textAlign:'center',width:90}}, 
                  React.DOM.i({className: "fa fa-clock-o"})
                ), 

                logo_column, 
                React.DOM.th({style: {width:200}}, 
                  (this.state.currentSignal == 'CompanySignal') ?  
                    "Companies" : "People"
                ), 

                React.DOM.th({style: {width:200}}, "Signal"), 
                React.DOM.th(null, "Source "), 
                score_column, 

                React.DOM.th({style: {width:90,textAlign:'center'}}, " ")

              ), 
              React.DOM.tbody({className: "reports"}, 
                signals
              )
            )
          )
        )
      )
    );
  },

  prospectAll: function() {
    console.log(this.state.currentSignal)
    console.log(this.props.currentProfileReport.objectId)
    report_id = this.props.currentProfileReport.objectId
    var thiss = this;
    $.ajax({
      //url: 'http://127.0.0.1:5000/signal_to_prospect',
      url: 'https://nameless-retreat-3525.herokuapp.com/signal_to_prospect',
      data: {all_signals:true, report_id: report_id, 
             signal_type: thiss.state.currentSignal},
      success: function(res) { console.log(res)},
      error: function(err) { console.log(err.responseText)},
    })
  },
  toggleDetailMode: function(company) {
    this.setState({detailMode: !this.state.detailMode})
    this.setState({detailCompany: company})
  }
});

var CompanyHiringSignalRow = React.createClass({displayName: 'CompanyHiringSignalRow',
  toggleDetailMode: function() {
    this.props.toggleDetailMode(this.props.signal.company)
  },

  render: function() {
    company = this.props.signal.company
    signal = this.props.signal.signal[0]
    return (
      React.DOM.tr({style: {}}, 
        React.DOM.td({style: {textAlign:'center',width:120}}, 
          React.DOM.h6(null, 
            moment(this.props.signal.createdAt).fromNow()
          )
        ), 

        React.DOM.td(null, 
          React.DOM.div({style: {backgroundImage: "url("+company.logo+")",height:60,width:60}, 
          className: "company-img-thumbnail"})
        ), 
        React.DOM.td({style: {width:200}}, 
          React.DOM.a({href: "javascript:", onClick: this.toggleDetailMode}, company.name), 
          React.DOM.h6(null, company.industry), 
          React.DOM.h6(null, (company.address) ? company.address.normalizedLocation : ""), 
          React.DOM.h6(null, company.revenue), 
          React.DOM.h6(null, company.headcount), 
          React.DOM.h6(null, React.DOM.a({href: "javascript:"}, company.website)), 
          React.DOM.h6(null, company.city)
        ), 

        React.DOM.td({style: {width:200}}, 
          React.DOM.h6(null, signal.job_title), 
          React.DOM.h6(null, signal.company_name), 
          React.DOM.h6(null, signal.location), 
          React.DOM.h6(null, signal.summary)
        ), 
        React.DOM.td(null, 
          signal.source, 
          React.DOM.h6(null, moment(signal.timestamp*1000).fromNow())
        ), 
        React.DOM.td(null, 
          (this.props.allProspected) ? 
            React.DOM.a({href: "javascript:", 
               className: "btn btn-success btn-xs disabled green-gradient", 
            style: {fontWeight:'bold'}}, 
            "Prospected"
            ) : React.DOM.a({href: "javascript:", 
                      className: "btn btn-success btn-xs green-gradient", 
                  onClick: this.turnCompanySignalToProspect, 
            style: {fontWeight:'bold'}}, 
            "Prospect"
          )
        )
      )
    )
  },
  turnCompanySignalToProspect: function() {
    var thiss = this;
    $.ajax({
      //url: 'https://nameless-retreat-',
      //url: 'http://127.0.0.1:5000/signal_to_prospect',
      url: 'https://nameless-retreat-3525.herokuapp.com/signal_to_prospect',
      data: {all_signals:false, signal_id: company.objectId,
             signal_type: 'CompanySignal'},
      success: function(res) { console.log(res)},
      error: function(err) { console.log(err.responseText)},
    })
  }
})

var PeopleSignalRow = React.createClass({displayName: 'PeopleSignalRow',
  turnSignalIntoProspect: function() {
    var thiss = this;
    console.log(this.props.signal)
    $.ajax({
      //url:'http://127.0.0.1:5000/signal_to_prospect',
      url:'http://nameless-retreat-3525.herokuapp.com/signal_to_prospect',
      data: {signal_id: thiss.props.signal.objectId, signal_type:'PeopleSignal',
             all_signals:false},
      success: function(res) { console.log(res) },
      error: function(err) { console.log(err.responseText) } 
    })
  },

  render: function() {
    //console.log(company)
    people = (this.props.signal) ? this.props.signal : {}
    company = people.company
    signal = people.signal.signal[0]
    console.log(people)
    return (
      React.DOM.tr({style: {}}, 
        React.DOM.td({style: {textAlign:'center',width:120}}, 
          React.DOM.h6(null, 
            moment(this.props.signal.createdAt).fromNow()
          )
        ), 

        React.DOM.td(null, 
          people.title_score
        ), 
        React.DOM.td(null, 
          React.DOM.h6(null, people.name + " - ", " ", React.DOM.span({style: {fontStyle:'italic'}}, 
              people.title)), 
          React.DOM.h6(null, React.DOM.a({href: "javascript:"}, company.website)), 
          React.DOM.h6(null, company.name), 
          React.DOM.h6(null, company.city)
        ), 

        React.DOM.td(null, 
          React.DOM.h6(null, signal.job_title), 
          React.DOM.h6(null, signal.company_name), 
          React.DOM.h6(null, signal.location), 
          React.DOM.h6(null, signal.summary)
        ), 
        React.DOM.td(null, 
          signal.source, 
          React.DOM.h6(null, moment(signal.timestamp*1000).fromNow())
        ), 

        React.DOM.td(null, 
          (this.props.allProspected) ? 
          React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs green-gradient disabled", 
            style: {fontWeight:'bold'}}, 
            "Prospected"
            ) : React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs green-gradient", 
                      onClick: this.turnSignalIntoProspect, 
            style: {fontWeight:'bold'}}, 
            "Prospect"
          )
          
        )
      )
    )
  }
})

},{"./company_detail.js.min.js":9}],53:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // SignalLoading
  getInitialState: function() {
    return {
      count: '~',
      prospectName : '~',
      prospectTitle : '~',
      companyName : '~',
    }
  },

  initialize: function() {
    var thiss = this;
    var pusher = new Pusher('1a68a96c8fde938fa75a');
    objectId = this.props.currentProfile.objectId
    var channel = pusher.subscribe(objectId);
    channel.bind("my-event", function(data) {
      console.log(data)
      thiss.setState({
        count: data.count,
        prospectName: data.name,
        prospectTitle: data.title,
        companyName: data.company
      })
    });

    // Get Signal Report Count
    // Get Last PeopleSignal Found
    qry = { profile: appConfig.pointer('ProspectProfile',objectId) }
    $.ajax({
      url:'https://api.parse.com/1/classes/SignalReport',
      headers:appConfig.headers,
      data: {'where':JSON.stringify(qry),order:'-createdAt'},
      success: function(res) {
        //console.log(res)
        count = (res.results[0]) ? res.results[0].people_count : 0
        
        thiss.setState({count: count })
      },
    });
    $.ajax({
      url:'https://api.parse.com/1/classes/PeopleSignal',
      headers:appConfig.headers,
      data: {'where':JSON.stringify(qry),order:'-createdAt'},
      success: function(res) {
        //console.log(res)
        thiss.setState({
          prospectName: (res.results[0]) ? res.results[0].link_text : "",
          prospectTitle: (res.results[0]) ? res.results[0].title : "",
          companyName: (res.results[0]) ? res.results[0].company : ""
        })
      },
    });
  },

  componentDidMount: function() {
    Pusher.log = function(message) {
      if (window.console && window.console.log) {
        //window.console.log(message);
      }
    };

    this.initialize()
  },

  componentDidUpdate: function() {
  },

  componentWillReceiveProps: function() {
    this.setState({
      count: '~',
      prospectName : '~',
      prospectTitle : '~',
      companyName : '~',
    })
    this.initialize()
  },

  render: function() {
    // Show companies for hiring signals
    return (
      React.DOM.div({style: {background:'linear-gradient(#dae8ff,#dae8ff)', backgroundImage: 'radial-gradient(circle at center center,#fff,#dff1fd 900px)',height:'100%',paddingTop:10}}, 
        React.DOM.div({className: "signal-card", 
            style: { width:500,textAlign:'center',display:'block',marginRight:'auto', marginLeft:'auto',marginTop:100,height:200,paddingTop:30,paddingLeft:30}}, 

        React.DOM.div({className: "loading-two-balls", style: {height:20,width:20}}, 
          React.DOM.div({className: "dot1", style: {color:'black'}}), 
          React.DOM.div({className: "dot2", style: {color:'black'}})
        ), 
        React.DOM.div({id: "", style: {color:'#1ca3fd', fontWeight:'bold',marginTop:-30,
                          marginLeft:0, fontSize:32, fontFamily:'Proxima-Nova'}}, 
              "lol", 
            this.state.count + " people found."
          ), 
          React.DOM.div({style: {float:'right',marginTop:55,marginRight:55}}, 
            React.DOM.h6({style: {marginBottom:3, fontWeight:'bold'}}, 
              this.state.prospectName.split('|')[0], " -  ", 
              React.DOM.span({style: {fontWeight:500, fontStyle:'italic'}}, 
                this.state.prospectTitle)), 
            React.DOM.h6({style: {marginTop:0,textAlign:'left'}}, 
              this.state.companyName
            )
          )
        )
      )
    )
  },
});

},{}],54:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {
      reportCount:'~',
      companyCount: '~',
      peopleCount: '~'
    }
  },
  // SignalProfile
  setCurrentView: function(e) {
    if(!this.props.profile.mining_job)
      this.props.setCurrentView('Calendar')
    else
      this.props.setCurrentView('MiningJobCalendar')
    //e.stopPropagation()
  },

  calendarClick:function(e) {
    this.props.setCurrentProfile(this.props.profile)
    if(!this.props.profile.mining_job)
      this.props.setCurrentView('Calendar')
    else
      this.props.setCurrentView('MiningJobCalendar')
    e.stopPropagation()
  },

  analyticsClick:function(e) {
    this.props.setCurrentProfile(this.props.profile)
    this.props.setCurrentView('Analytics')
    e.stopPropagation()
  },

  setCurrentProfile: function() {
    this.props.setCurrentProfile(this.props.profile)
    if(this.props.profile.type == "prospect_profile") {
      this.props.setCurrentView('MiningJobCalendar')
    } else {
      if(this.props.profile.list_type == "territory")
        this.props.setCurrentView('TerritoryCalendar')
      else if(this.props.profile.list_type == "territory")
        this.props.setCurrentView('TerritoryCalendar')
      else
        this.props.setCurrentView('Calendar')
    }
  },

  removeTheProfile: function() {
    this.props.removeProfile(this.props.profile)
  },

  removeProfile: function() {
    thissss = this;
    console.log(thiss.removeTheProfile)

    swal({   
      title: "Are you sure?",   
      text: "Your will not be able to recover this prospect list!",   
      type: "warning",   
      showCancelButton: true,   
      confirmButtonColor: "#DD6B55",   
      confirmButtonText: "Yes, delete it!",   
      closeOnConfirm: false }, 
      function(){   
        swal("Deleted!", "Your prospect list has been deleted.", "success"); 
        thissss.removeTheProfile()
        console.log('deleted')
      });
  },

  //componentDidUpdate: function(prevProps, prevState) { },
  componentWillReceiveProps: function(nextProps) {
  //componentWillUpdate: function(nextProps) {
    if(typeof(this.props.profile.objectId) == "undefined") {
      console.log('RECEIVE PROPS')

      var pusher = new Pusher('1a68a96c8fde938fa75a');
      var thiss = this;
      console.log(nextProps)
      console.log(nextProps.profile)
      console.log(_.keys(nextProps.profile))
      console.log(nextProps.profile.objectId)
      objectId = nextProps.profile.objectId
      console.log('new pusher channel -> '+ objectId)

      var channel = pusher.subscribe(objectId);
      channel.bind("done", function(data) {
        console.log(data)
        console.log(thiss.props)
        //thiss.setState({ done: data.done_timestamp })
        thiss.props.updateMiningJobDone(thiss.props.profile)
        alertify.success("Success notification");
      });
    }
  },

  componentDidMount: function() {
    var pusher = new Pusher('1a68a96c8fde938fa75a');
    objectId = this.props.profile.objectId
    console.log('new pusher channel ->', objectId)
    var channel = pusher.subscribe(objectId);
    var thiss = this;
    channel.bind("done", function(data) {
      console.log(data)
      console.log(thiss.props)
      //thiss.setState({ done: data.done_timestamp })
      thiss.props.updateMiningJobDone(thiss.props.profile)
      alertify.success("Success notification");
    });

    var thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/classes/PeopleSignal',
      headers: appConfig.headers,
      data: {where: JSON.stringify( {profile: appConfig.pointer('ProspectProfile',this.props.profile.objectId)}),
             count: true},
      success: function(res) { thiss.setState({peopleCount: res.count})},
      error: function(err) { }
    })
    $.ajax({
      url:'https://api.parse.com/1/classes/CompanySignal',
      headers: appConfig.headers,
      data: {where: JSON.stringify({profile:
             appConfig.pointer('ProspectProfile',this.props.profile.objectId)}),
             count: true},
      success: function(res) { thiss.setState({companyCount: res.count})},
      error: function(err) { }
    })
    $.ajax({
      url:'https://api.parse.com/1/classes/SignalReport',
      headers: appConfig.headers,
      data: {where: JSON.stringify({profile:
             appConfig.pointer('ProspectProfile',this.props.profile.objectId)}),
             count: true},
      success: function(res) { thiss.setState({reportCount: res.count})},
      error: function(err) { }
    })
  },

  render: function() {
    signalDetails = []
    for(i=0;i< this.props.profile.profiles.length; i++) {
      signalDetails.push(ProfileType({profile: this.props.profile.profiles[i]}))
    }
    //console.log(this.props.profile.list_type)
    //console.log(this.props.profile.list_type == "territory")
    if(this.props.profile.list_type == "signal") 
      icon = React.DOM.i({className: "fa fa-wifi", style: {marginRight:5}})
    else if(this.props.profile.list_type == "territory") 
      icon = React.DOM.i({className: "fa fa-globe", style: {marginRight:5}})
    else
      icon = React.DOM.i({className: "fa fa-cloud-download", style: {marginRight:5}})

    loading = (!this.props.profile.done) ? React.DOM.div({className: "profile-loading"}, 
            React.DOM.div({className: "double-bounce1"}), 
            React.DOM.div({className: "double-bounce2"})
          ) : ""
    
    if(this.props.profile.mining_job && this.props.profile.done)
      mining_job_done = React.DOM.i({className: "fa fa-check-circle", style: {color:'#0096ff',marginLeft:5,fontSize:15}})
    else
      mining_job_done = ""

    selectedStyle = {paddingTop:5,borderLeft:0,paddingLeft:10, borderRight:'1px solid #ddd', borderLeft: '5px solid #0096ff !important'}
    regularStyle = {paddingTop:5,borderLeft:0,paddingLeft:10, borderRight:'1px solid #ddd', borderLeft: '5px solid red !important'}
    regularStyle = {paddingTop:5,borderLeft:0,paddingLeft:10, borderRight:'1px solid #ddd', borderLeft:'5px solid rgba(0,0,0,0)'}
    selected= this.props.profile.objectId == this.props.currentProfile.objectId
    itemStyle = (selected) ? selectedStyle : regularStyle
    itemClass = (selected) ? "list-group-item ideal-company-profile list-group-selected" : "list-group-item ideal-company-profile"


    signal_type = this.props.profile.signal_type
    return (
      React.DOM.div({className: itemClass, 
           onClick: this.setCurrentProfile, 
           style: regularStyle}, 
        React.DOM.span({className: "profile-title"}, 
          React.DOM.h6({className: "label label-primary profile-name", 
              style: {backgroundColor:'rgb(0, 122, 265)'}}, 
            icon, " ", this.props.profile.name
          ), 
          React.DOM.h6({className: "profile-name"}, 
            React.DOM.span({className: "label label-default"}, 
              React.DOM.i({className: "fa fa-calendar"}), " ", this.state.reportCount
            ), "  ", 
            React.DOM.span({className: "label label-default"}, 
              React.DOM.i({className: "fa fa-building"}), " ", this.state.companyCount, "  ", 
              React.DOM.i({className: "fa fa-user"}), " ", this.state.peopleCount
            )
          ), 
          loading, mining_job_done, 
          React.DOM.a({href: "javascript:", 
             className: "btn btn-primary btn-xs signal-detail-btn", 
             onClick: this.removeProfile}, 
            React.DOM.i({className: "fa fa-archive"})), 
          React.DOM.a({href: "javascript:", 
            style: {display:'block'}, 
            className: "btn btn-primary btn-xs signal-detail-btn", 
             onClick: this.analyticsClick}, 
            React.DOM.i({className: "fa fa-pie-chart"})), 
          React.DOM.a({href: "javascript:", 
            style: {display:'block'}, 
            className: "btn btn-primary btn-xs signal-detail-btn", 
             onClick: this.settingsClick}, 
            React.DOM.i({className: "fa fa-wrench"})), 
          React.DOM.a({href: "javascript:", className: "btn btn-primary btn-xs signal-detail-btn", 
             style: {display:'none'}, 
             onClick: this.calendarClick}, 
            React.DOM.i({className: "fa fa-calendar"})), 
          React.DOM.a({href: "javascript:", 
             onClick: this.launchModal, 
             style: (signal_type != "signal") ? {display:'block'}:{display:'none'}, 
             className: "btn btn-primary btn-xs signal-detail-btn"}, 
            React.DOM.i({className: "fa fa-cloud-download"}))
        ), 

        React.DOM.div({className: "profile-body", style: {marginTop:5}}, 
          signalDetails
        )
      )
    );
  },

  launchModal: function(e) {
    $('#createMiningJobModal').modal()
    this.props.setCurrentProfile(this.props.profile)
    if(this.props.currentView == 'Calendar')
      this.props.setCurrentView('Calendar')
    else if(this.props.currentView == 'Feed')
      this.props.setCurrentView('Feed')
    e.stopPropagation()
  }
});

var ProfileType = React.createClass({displayName: 'ProfileType',
  render: function() {

  if(this.props.profile){
    if(this.props.profile.className == "HiringProfile") {
      signalIcon = React.DOM.i({className: "fa fa-suitcase"})
      signalName = "Hiring"
      signalValue = _.reduce(this.props.profile.roles, function(result, role) {
        return role + ", "+ result
      }, "");
      //console.log('wtf')
      //console.log(signalValue)
    } else if (this.props.profile.className  == "EmployeeProfile") {
      signalIcon = React.DOM.i({className: "fa fa-users"})
      signalName = "Company Size"
      signalValue = _.reduce(this.props.profile.employees, function(result, role) {
        return role + ", "+ result
      }, "");
    } else if (this.props.profile.className  == "FundingProfile") {
      signalIcon = React.DOM.i({className: "fa fa-institution"})
      signalName = "Funding"
      signalValue = _.reduce(this.props.profile.revenues, function(result, role) {
        return role + ", "+ result
      }, "");
    } else if (this.props.profile.className  == "RevenueProfile") {
      signalIcon = React.DOM.i({className: "fa fa-money"})
      signalName = "Revenue"
      signalValue = _.reduce(this.props.profile.revenues, function(result, role) {
        return role + ", "+ result
      }, "");
    } else if (this.props.profile.className  == "TechnologyProfile") {
      signalIcon = React.DOM.i({className: "fa fa-wrench"})
      signalName = "Technology"
    } else if (this.props.profile.className  == "LocationProfile") {
      signalIcon = React.DOM.i({className: "fa fa-map-marker"})
      signalName = "Locale"
      signalValue = _.reduce(this.props.profile.locale, function(result, role) {
        return role + ", "+ result
      }, "");
    } else if (this.props.profile.className  == "IndustryProfile") {
      signalIcon = React.DOM.i({className: "fa fa-building"})
      signalName = "Industries"
      signalValue = _.reduce(this.props.profile.industries, function(result, role) {
        return role + ", "+ result
      }, "");
    } else if (this.props.profile.className  == "TerritoryProfile") {
      console.log()
      signalIcon = React.DOM.i({className: "fa fa-globe"})
      signalName = (this.props.profile.territories.length == 1) ? "Territory" : "Territories"
      signalValue = _.reduce(this.props.profile.territories, function(result, role) {
        return role + ", "+ result
      }, "");
    } else if (this.props.profile.className  == "CompanySizeProfile") {
      signalIcon = React.DOM.i({className: "fa fa-wrench"})
      signalName = "Technology"
    } else if (this.props.profile.className  == "ListProfile") {
      signalIcon = React.DOM.i({className: "fa fa-list-alt"})
      signalName = "Company List"
      signalValue = this.props.profile.listName
    } else if (this.props.profile.className  == "ProspectTitleProfile") {
      signalIcon = React.DOM.i({className: "fa fa-user"})
      signalName = "Titles"
      signalValue = _.reduce(this.props.profile.title_keywords, 
     function(result, role) {
        return role + ", "+ result
      }, "");
    } else {
      signalIcon = "not found"
      signalName = "Not found"
      signalValue= "Not found"
    }
  } else {
      signalIcon = "not found"
      signalName = "Not found"
      signalValue= "Not found"

  }

    return (
      React.DOM.span({className: "ideal-profile"}, " ", signalIcon, 
        React.DOM.h6({className: "profile-signal-name"}, signalName, " - "), 
        React.DOM.span({className: "profile-signal-value"}, " "+signalValue)
      )
    );
  }
});

/*
  Funding Profile
  - Amount Raised - btn group
  - Stage - btn group

  People Profile
  - Locale - tags w/ typahead
  - Title - tags w/ typahead

  Company Profile
  - Industries - tags with typahead
  - Revenue - btn group
  - # of Employees - btn group
  - Locale - tags with typahead
*/


},{}],55:[function(require,module,exports){
/** @jsx React.DOM */

var PanelFooting = require('./panel_footing.js.min.js')
var SignalProfile = require('./signal_profile.js.min.js')
var SignalLoading = require('./signal_loading.js.min.js')
var MiningJobLoading = require('./mining_job_loading.js.min.js')
var CompanySignalCard = require('./company_signal_card.js.min.js')
var PeopleSignalCard = require('./people_signal_card.js.min.js')
var SignalCalendar = require('./signal_calendar.js.min.js')
var MiningJobCalendar = require('./mining_job_calendar.js.min.js')
var SignalsDetail = require('./signal_detail.js.min.js')
var TerritoryOverview = require('./territory_overview.js.min.js')
var TerritoryDetail = require('./territory_detail.js.min.js')
var MiningJobDetail = require('./mining_job_detail.js.min.js')
var SignalAnalytics = require('./signal_analytics.js.min.js')
var SignalApps = require('./signal_apps.js.min.js')

var CreateHiringSignalModal = require('./create_hiring_signal_modal.js.min.js')
var CreateFundingSignalModal = require('./create_funding_signal_modal.js.min.js')
var CreateProspectProfileModal = require('./create_prospect_profile_modal.js.min.js')
var CreateCompanyProfileModal = require('./create_company_profile_modal.js.min.js')
var CreateTerritoryStrategyModal = require('./create_territory_strategy_modal.js.min.js')
var CreateMiningJobModal = require('./create_mining_job_modal.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {
      signalType: 'CompanySignal',
      currentProfile: {name:'All'},
      currentProfileObjectId: {},
      currentProfileReport: {},
      signals: [],
      currentView: 'Apps',
      profiles: [],
    }
  },

  setCurrentReport: function(newProfileReport) {
    console.log('NEW REPORT')
    console.log(newProfileReport)

    this.setState({ 
      currentView:'Detail',
      currentProfileReport: newProfileReport 
    })
  },

  setReport: function(view, report) {
    console.log('setReport')
    this.setState({currentView:view, currentProfileReport: report}) 
  },

  prospectSignalReport: function(profile, report) {
    profiles = _.map(this.state.profiles, function(_profile) {
                  if(_profile.objectId == profile.objectId){
                    reports = _.map(_profile.reports, function(_report) {
                                if(_report.objectId == report.objectId){
                                  _report.prospected = true
                                  return _report
                                }
                                return _report
                              })
                    _profile.reports = reports
                    return _profile
                  }
                  return _profile
                })
                //console.log(profiles)
    this.setState({profiles: profiles})
    $.ajax({
      url:'https://api.parse.com/1/classes/SignalReport/'+report.objectId,
      type:'PUT',
      headers:appConfig.headers,
      data:JSON.stringify({prospected:moment().valueOf()/1000}),
      success: function(res) {},
      error: function(err) {}
    })
  },

  setCurrentView: function(newSignalView) {
    this.setState({currentView: newSignalView})
  },

  render: function() {
    currentProfile = this.state.currentProfile
    reports = this.state.currentProfile.reports
    reports = (reports) ? reports : []
    //reports = _.sortBy(reports, function(o){ return o.createdAt }).reverse()
    //console.log(currentProfile)
    console.log('CURRENT VIEW')
    console.log(this.state.currentView)
    if(currentProfile.name == "All" || currentProfile.done){
      if(this.state.currentView == "Apps") {
        signalView = SignalApps(null)
      } else if(this.state.currentView == "Feed") {
        signalView = React.DOM.div(null, 
            SignalDetailButtons({signalType: this.state.signalType, 
                                 currentProfile: this.state.currentProfile, 
                                 setSignalType: this.setSignalType}), 
            SignalsFeed({setCurrentView: this.setCurrentView, 
                         signalType: this.state.signalType, 
                         profile: this.state.currentProfile, 
                         signals: this.state.signals})
            )
      } else if(this.state.currentView == "Calendar"){
        signalView = SignalCalendar({currentProfile: this.state.currentProfile, 
                                    prospectSignalReport: this.prospectSignalReport, 
                                     reports: reports, 
                                     setCurrentReport: this.setCurrentReport, 
                                     setCurrentView: this.setCurrentView})
      } else if(this.state.currentView == "Analytics"){
        signalView = SignalAnalytics({currentProfile: this.state.currentProfile, 
                                    prospectSignalReport: this.prospectSignalReport, 
                                     reports: reports, 
                                     setCurrentReport: this.setCurrentReport, 
                                     setCurrentView: this.setCurrentView})
      } else if(this.state.currentView == "Detail"){
        signalView = SignalsDetail({currentProfile: this.state.currentProfile, 
                                    currentProfileReport: this.state.currentProfileReport, 
                                    setCurrentView: this.setCurrentView})
      } else if(this.state.currentView == "MiningJobDetail"){
        signalView = MiningJobDetail({currentProfile: this.state.currentProfile, 
                                    currentProfileReport: this.state.currentProfileReport, 
                                    setCurrentView: this.setCurrentView})
      } else if(this.state.currentView == "MiningJobOverview"){
        signalView = MiningJobDetail({currentProfile: this.state.currentProfile, 
                                    currentProfileReport: this.state.currentProfileReport, 
                                    setCurrentView: this.setCurrentView})
      } else if(this.state.currentView == "MiningJobCalendar"){
        signalView = MiningJobCalendar({currentProfile: this.state.currentProfile, 
                                        setCurrentReport: this.setCurrentReport, 
                                        setReport: this.setReport, 
                                        setCurrentView: this.setCurrentView})
      } else if(this.state.currentView == "TerritoryCalendar"){
        console.log('TERRITORY OVERVIEW IS CHOSEN')
        signalView = TerritoryOverview({currentProfile: this.state.currentProfile, 
                                        setCurrentReport: this.setCurrentReport, 
                                        setReport: this.setReport, 
                                        setCurrentView: this.setCurrentView})
      } else if(this.state.currentView == "TerritoryDetail"){
        console.log('TERRITORY DETAIL IS CHOSEN')
        signalView = TerritoryDetail({currentProfile: this.state.currentProfile, 
                                      currentProfileReport: this.state.currentProfileReport, 
                                      setCurrentReport: this.setCurrentReport, 
                                      setReport: this.setReport, 
                                      setCurrentView: this.setCurrentView})
      }
    } else {
      // Show Calendar Even When Signal Is Loading
      if(this.state.currentView == "Calendar"){
        signalView = SignalCalendar({currentProfile: this.state.currentProfile, 
                                     setCurrentReport: this.setCurrentReport, 
                                     reports: reports, 
                                     setCurrentView: this.setCurrentView})
      } else {
        console.log(this.state.currentProfile)
        if(this.state.currentProfile.type == "prospect_profile")
          signalView =MiningJobLoading({currentProfile: this.state.currentProfile})
        else
          signalView = SignalLoading({currentProfile: this.state.currentProfile})
      }
    }

   return (
     React.DOM.div(null, 
      React.DOM.div({style: {height:500}}, 
        React.DOM.div({className: "container", style: {padding:0, width:'100%', height:'100%'}}, 
          React.DOM.div({className: "col-md-3 signal-list", 
               style: { height:'102.8%', padding:0}}, 
              SignalsOptions({profiles: this.state.profiles, 
                              addProfile: this.addProfile, 
                              updateMiningJobDone: this.updateMiningJobDone, 
                              removeProfile: this.removeProfile, 
                              setCurrentView: this.setCurrentView, 
                              currentProfile: this.state.currentProfile, 
                              setCurrentProfile: this.setCurrentProfile})
          ), 
          React.DOM.div({className: "col-md-9", style: {height:'100%',padding:0}}, 
            signalView
          )

        ), 

        CreateMiningJobModal({createMiningJob: this.createMiningJob, 
                              currentProfile: this.state.currentProfile}), 
        CreateHiringSignalModal({addProfile: this.addProfile}), 
        CreateFundingSignalModal({addProfile: this.addProfile}), 
        CreateCompanyProfileModal({addProfile: this.addProfile}), 
        CreateProspectProfileModal({addProfile: this.addProfile, 
                      updateProfileWithObjectId: this.updateProfileWithObjectId}), 
        CreateTerritoryStrategyModal({addProfile: this.addProfile, 
                      updateProfileWithObjectId: this.updateProfileWithObjectId})
      )
      )

    )
  },
  /*
      <PanelFooting currentPage={this.state.currentPage}
                    count={this.state.count}
                    paginate={this.paginate}
                    prospectType={'Prospect'}
                    prospectsPerPage={this.state.prospectsPerPage}
                    setPaginate={this.setPaginate}
                    pages={this.state.pages}/>
  */

  createMiningJob: function(theProfile, date) {
    console.log('create mining job')
    var thiss = this;
    report = {
      //createdAt: moment().valueOf(),
      company_count: 0,
      people_count: 0,
      list_type:'mining_job',
      done: 0,
      mining_job: true,
    }

    profiles=_.map(this.state.profiles, function(profile) {
      if(_.isEqual(theProfile, profile)){
        if(profile.mining_days){
          profile.mining_days.push(date)
        }else{
          profile.mining_days = [date]
        }

        if(profile.reports){
          profile.reports = [report].concat(profile.reports)
        }else{
          profile.reports = [report]
        }
        
        thiss.setState({currentProfile: profile})
        thiss.persistMiningJob(date, report)
        return profile
      }
      return profile
    })
    thiss.setState({profiles: profiles})
  },

  persistMiningJob: function(date, report) {
    console.log(this.state)
    objectId = this.state.currentProfile.objectId
  },

  addProfile: function(newProfile) {
    profiles = this.state.profiles
    console.debug(newProfile)
    this.setState({profiles: [newProfile].concat(profiles)})
    this.setCurrentProfile(newProfile)
  },

  removeProfile: function(oldProfile) {
    this.setState({profiles: _.reject(this.state.profiles, function(profile) {
      return _.isEqual(oldProfile, profile)
    })})

    if(oldProfile.objectId){
      $.ajax({
        url:'https://api.parse.com/1/classes/ProspectProfile/'+oldProfile.objectId,
        headers:appConfig.headers,
        type:'DELETE',
      })
    }
  },

  updateMiningJobDone: function(profile) {
    profiles = _.map(this.state.profiles, function(_profile) {
                  if(_profile.objectId == profile.objectId) {
                    _profile.done = true
                    return _profile
                  }
                  return _profile
                })
    this.setState({profiles: profiles})
  },

  updateProfileWithObjectId: function(timestamp, objectId) {
    console.log('UPDATE PROFILES')
    newProfiles = _.map(this.state.profiles, function(profile) {
        if(profile.timestamp == timestamp) {
          profile.objectId = objectId
          return profile
        }
      return profile
    })
    
    console.log(newProfiles)
    this.setState({profiles: newProfiles})
    console.log(objectId)

    var pusher = new Pusher('1a68a96c8fde938fa75a');
    console.log('new pusher channel ->', objectId)
    var channel = pusher.subscribe(objectId);
    var thiss = this;
    channel.bind("done", function(data) {
      thiss.updateMiningJobDone(_.findWhere(thiss.state.profiles, {timestamp: timestamp}))
      alertify.success("New Success notification");
    });
  },

  setCurrentProfile: function(newProfile) {
    if(newProfile.only_people) {
      this.getSignals('PeopleSignal', 
                      JSON.stringify({
                         __type: 'Pointer',
                         className: 'ProspectProfile', 
                         objectId: newProfile.objectId}))
      this.setState({
        signalType: 'PeopleSignal',
        currentProfile: newProfile 
      })
    } else {
      this.setState({currentProfile: newProfile })
    }

    this.getSignals('PeopleSignal', newProfile)
  },

  componentDidMount: function() {
    this.getSignals(this.state.signalType)
    qry = {'include':'profiles,reports,prospect_list&order=-createdAt'}

    var _this = this;
    Parse.get('ProspectProfile', qry).done(function(res) {
      console.log(res)
      _this.setState({profiles: res.results})
    })
  },

  setSignalType: function(labelText) {
    if(labelText == "People")
      currentSignal = "PeopleSignal"
    else if(labelText == "Companies")
      currentSignal = "CompanySignal"
    this.getSignals(currentSignal)
    this.setState({signalType: currentSignal})
  },

  componentDidUpdate: function(nextProps, nextState) {
  },

  getSignals: function(signalType, currentProfile) {
    currentUser = JSON.parse(localStorage.currentUser)
    user = {
      '__type'    : 'Pointer',
      'className' : '_User',
      'objectId'  : currentUser.objectId
    }

    user = JSON.stringify(user)
    company = JSON.stringify(currentUser.company)
    profiles = this.state.currentProfile.profiles

    if(profiles){
      //qry = 'where={"company":'+company+',"user":'+user+',"profile":'+currentProfile+'}'
      profile = JSON.stringify({
        __type:'Pointer',
        className:'ProspectProfile',
        objectId:currentProfile.objectId
      })
      qry = 'where={"profile":'+profile+'}'
      //qry = qry + ',"profiles":{"$all":'+JSON.stringify(profiles)+'}}'
      if(signalType == 'PeopleSignal')
        qry = qry + '&include=signals'
      else
        qry = qry + '&include=signals,company'

    } else {
      qry = {'include':['signals','company']}
    }
  
    thiss = this
    $.ajax({
      url: 'https://api.parse.com/1/classes/'+signalType,
      //url: 'https://api.parse.com/1/classes/CompanySignal',
      type:'GET',
      data: qry,
      headers:appConfig.parseHeaders,
      success: function(res) {
        //console.log(res.results)
        thiss.setState({signals: res.results})
      },
      error: function(err) { console.log(err) }
    });
  },
});

var SignalDetailButtons = React.createClass({displayName: 'SignalDetailButtons',
  setSignalType: function(e) {
    this.props.setSignalType($(e.target).text().trim())
  },

  render: function() {
    ppl = (this.props.signalType == "PeopleSignal") ? "choose btn btn-primary app-active" : "choose btn btn-primary"
    cmp = (this.props.signalType == "CompanySignal") ? "choose btn btn-primary app-active" : "choose btn btn-primary"

    cmp = (this.props.currentProfile.only_people)  ? cmp + " disabled" : cmp

    return (
      React.DOM.div(null, 
        React.DOM.div({id: "signalDetailButtons", style: {height:44}}, 
          React.DOM.h4({style: {display:'inline-block',float:'left',width:300,
                      fontWeight:200,marginTop:4,paddingLeft:20}}, 
            React.DOM.i({className: "fa fa-newspaper-o"}), " ",  
            this.props.currentProfile.name
          ), 
          React.DOM.div({className: "btn-group", style: {marginLeft:'0%'}}, 
            React.DOM.a({className: ppl, 
               style: {padding:2}, 
               onClick: this.setSignalType}, 
                React.DOM.i({className: "fa fa-user"}), " People"
            ), 
            React.DOM.a({className: cmp, 
               style: {padding:2}, 
               onClick: this.setSignalType}, 
                React.DOM.i({className: "fa fa-building"}), " Companies"
            )
          )
        )
      )
    );
  }
});

var SignalsOptions = React.createClass({displayName: 'SignalsOptions',
  addProfile: function(newProfile) {
    this.props.addProfile(newProfile)
  },

  setCurrentProfile: function(currentProfile) {
    this.props.setCurrentProfile(currentProfile)
  },

  removeProfile: function(oldProfile) {
    this.props.removeProfile(oldProfile)
  },

  componentDidMount: function() {
  },

  setCurrentView: function(newView) {
    console.log(newView)
    this.props.setCurrentView(newView)
  },

  render: function() {
    profs = []
    //console.log('signals render')
    console.debug(this.props.profiles)
    for(i=0; i< this.props.profiles.length;i++) {
      select= this.props.profiles[i].objectId == this.props.currentProfile.objectId
      profs.push(SignalProfile({setCurrentProfile: this.setCurrentProfile, 
                                updateMiningJobDone: this.props.updateMiningJobDone, 
                                setCurrentView: this.setCurrentView, 
                                currentProfile: this.props.currentProfile, 
                                selected: select, 
                                removeProfile: this.removeProfile, 
                                profile: this.props.profiles[i]}))
    }

    profiles_num = (this.props.profiles.length) ? this.props.profiles.length : "~"
    return (
      React.DOM.div(null, 
      React.DOM.div({className: "list-group"}, 
        React.DOM.li({className: "list-group-item", 
            style: {borderTop:0,borderLeft:0,height:44,paddingRight:5,paddingLeft:10,
                    backgroundColor:'#e0e6ea',
                    backgroundImage:'linear-gradient(#f5f7f8,#e0e6ea);'}}, 
            React.DOM.h4({style: {margin:0,textAlign:'center',fontWeight:200,
                        float:'left',marginTop:2}}, "Profiles (", profiles_num, ")"), 
          React.DOM.a({href: "javascript:", 
             className: "btn btn-xs btn-primary create-profile-dropdown", 
             'data-toggle': "dropdown", 
             onClick: this.launchDropdown, 
             style: {float:'right',
              backgroundImage:'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
            React.DOM.i({className: "fa fa-plus"}), "  Create Profile"
          ), 

          React.DOM.ul({className: "dropdown-menu", 
              style: {marginLeft:175,marginTop:-10}, 
              role: "menu", 'aria-labelledby': "dropdownMenu1"}, 
            React.DOM.li({role: "presentation"}, 
              React.DOM.a({href: "javascript:", 
                 onClick: this.launchModal, 
                 style: {paddingLeft:5}}, 
                 React.DOM.h6({style: {margin:2}}, 
                   React.DOM.i({className: "fa fa-suitcase", style: {width:10}}), 
                  "  Create Hiring Signal"
                )
              )
            ), 
            React.DOM.li({role: "presentation", style: {display:'block'}}, 
              React.DOM.a({href: "javascript:", 
                 onClick: this.launchModal, 
                 style: {paddingLeft:5}}, 
                React.DOM.h6({style: {margin:2}}, React.DOM.i({className: "fa fa-institution", style: {width:10}}), 
                  "  Create Funding Signal"
                )
              )
            ), 
            React.DOM.li({role: "presentation", style: {display:'block'}}, 
              React.DOM.a({href: "javascript:", 
                 onClick: this.launchModal, 
                 style: {paddingLeft:5}}, 
                React.DOM.h6({style: {margin:2}}, React.DOM.i({className: "fa fa-globe", style: {width:10}}), 
                  "  Create Territory Strategy"
                )
              )
            ), 
            React.DOM.li({role: "presentation"}, 
              React.DOM.a({onClick: this.launchModal, 
                 style: {paddingLeft:5,paddingRight:2}, 
                 href: "javascript"}, 
                React.DOM.h6({style: {margin:2}}, 
                  React.DOM.i({className: "fa fa-user", style: {width:10}}), 
                  "  Create Prospect Profile"
                )
              )
            ), 
            React.DOM.li({role: "presentation", style: {display:'none'}}, 
              React.DOM.a({role: "menuitem", tabindex: "-1", 
                 onClick: this.launchModal, 
                 style: {paddingLeft:5,paddingRight:2}, href: "#"}, 
                 React.DOM.h6({style: {margin:2}}, 
                   React.DOM.i({className: "fa fa-building", style: {width:10}}), 
                   "  Create Company Profile"
                 )
              )
            )
          )
        ), 
        React.DOM.div({id: "profiles-menu", style: {height:456, overflow:'auto',marginTop:1}}, 
          profs
        )
      )
    )
    );
  },

  launchModal: function(e) {
    e.preventDefault()
    console.log($(e.target).text().trim())
    if($(e.target).text().trim() == 'Create Hiring Signal')
      $('#createHiringSignalModal').modal()
    else if($(e.target).text().trim() == 'Create Funding Signal')
      $('#createFundingSignalModal').modal()
    else if($(e.target).text().trim() == 'Create Prospect Profile')
      $('#createProspectProfileModal').modal()
    else if($(e.target).text().trim() == 'Create Territory Strategy')
      $('#createTerritoryStrategyModal').modal()
    else if($(e.target).text().trim() == 'Create Company Profile')
      $('#createCompanyProfileModal').modal()
  },

  launchDropdown: function(e) {
    e.preventDefault()
    $('.create-profile-dropdown').dropdown()
  }
});

var SignalsFeed = React.createClass({displayName: 'SignalsFeed',
  render: function() {
    //this.getSignals()
    signalCards = []
    for(i=0;i< this.props.signals.length;i++) {
      if(this.props.signalType == "CompanySignal")
        signalCards.push(CompanySignalCard({company: this.props.signals[i]}))
      else if(this.props.signalType == "PeopleSignal")
        signalCards.push(PeopleSignalCard({profile: this.props.profile, person: this.props.signals[i]}))
    }
    
    content = (this.props.signals.length) ? signalCards : React.DOM.div({className: "signal-card"}, "LOL")
    content = signalCards

    return (
      React.DOM.div({className: "container signal-card-background", style: {height:456, overflow:'auto'}}, 
        React.DOM.div({className: "col-md-8 col-md-offset-2"}, 
          content
        )
      )
    );
  }
});

},{"./company_signal_card.js.min.js":10,"./create_company_profile_modal.js.min.js":12,"./create_funding_signal_modal.js.min.js":13,"./create_hiring_signal_modal.js.min.js":14,"./create_mining_job_modal.js.min.js":16,"./create_prospect_profile_modal.js.min.js":17,"./create_territory_strategy_modal.js.min.js":19,"./mining_job_calendar.js.min.js":37,"./mining_job_detail.js.min.js":38,"./mining_job_loading.js.min.js":39,"./panel_footing.js.min.js":40,"./people_signal_card.js.min.js":41,"./signal_analytics.js.min.js":49,"./signal_apps.js.min.js":50,"./signal_calendar.js.min.js":51,"./signal_detail.js.min.js":52,"./signal_loading.js.min.js":53,"./signal_profile.js.min.js":54,"./territory_detail.js.min.js":60,"./territory_overview.js.min.js":61}],56:[function(require,module,exports){
/** @jsx React.DOM */

theData = require('../lib/data.min.js') 

module.exports = React.createClass({displayName: 'exports',
  // SignUp
  componentDidMount: function() {
    //$('body').css({overflow:'hidden'})
    //$('body').css({overflow:'hidden'})
    var thiss = this;
    $("input").keypress(function(event) {
        if (event.which == 13) {
          event.preventDefault();
          thiss.signup()
        }
    });
  },

  retrieveUser: function(objectId) {
    headers = {
      "X-Parse-Application-Id": "N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ",
      "X-Parse-REST-API-Key": "VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb"
    }
    $.ajax({
      url:'https://api.parse.com/1/users/'+objectId,
      headers: headers,
      type:'GET',
      success:function(res) {
        localStorage.setItem('currentUser', JSON.stringify(res))
        location.href = "#"
      },
      error: function(res) {
        console.log(res)
      }
    });
  },

  signup: function() {
    console.log('signup')
    email = $('#email').val().trim()
    password = $('#password').val().trim()
    thiss = this;
    if($('#company').val().trim() == "" || email == "" || password == ""){
      alertify.error('There was an error with your registration request. Please try again')
      return 0
      
    }

    $.ajax({
      url:'https://api.parse.com/1/classes/Company',
      type:'POST',
      headers: appConfig.headers,
      data: JSON.stringify({ 'name': $('#company').val(), }),
      success:function(res) {
        $.ajax({
          url:'https://api.parse.com/1/users',
          type:'POST',
          headers: appConfig.headers,
          data: JSON.stringify({
            'username':email,
            'password': password,
            'accountType':'trial',
            'user_company':{
              '__type'    : 'Pointer',
              'className' : 'UserCompany',
              'objectId'  : res.objectId,
            }
            // people_archive_list
            // company_archive_list
            // ClearSpark - api_key
          }),
          success:function(res) {
            // Do another request to get current user
            localStorage.setItem('currentUser', JSON.stringify(res))
            thiss.retrieveUser(res.objectId)
          },
          error: function(res) {
            console.log(res)
            alertify.error('There was an error with your registration request. Please try again')
          }
        });
      },
      error: function(res) {
        console.log(res)
        alertify.error('There was an error with your registration request. Please try again')
      }
    });
  },

  render: function() { 
    data = theData()
    imgs_1 = []
    imgs_2 = []
    for(i=0;i < 120; i++) {
      imgs_1.push(React.DOM.img({src: data[i], className: "prospect-img"}))
    }
    for(i=15;i < 30; i++) {
      imgs_2.push(React.DOM.img({src: data[i], className: "prospect-img"}))
    }

  console.log(data)
    return (
      React.DOM.div({id: "signup", style: {marginTop:0}}, 

      React.DOM.div({style: {paddingTop:100}}, 
        React.DOM.h1({className: "title"}, "Customero."), 
        React.DOM.h5({className: "tagline"}, "Generate high quality prospect lists. Accelerate Sales."), 
          React.DOM.div({className: "panel panel-default login-info", style: {display:'block',marginTop:50}}, 
            React.DOM.div({className: "panel-body", style: {fontFamily:'proxima-nova',fontWeight:'bold'}}, 
              React.DOM.form({onSubmit: this.login}, 
              React.DOM.input({placeholder: "Email", id: "email", type: "text", className: "form-control input-lg"}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Company", type: "text", id: "company", className: "form-control input-lg"}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Password", type: "password", id: "password", className: "form-control input-lg"}), 
              React.DOM.br(null), 
              React.DOM.input({placeholder: "Repeat Password", type: "password", id: "repeat_password", className: "form-control input-lg"}), 
              React.DOM.br(null), 
              React.DOM.a({href: "javascript:", onClick: this.signup, className: "btn btn-primary btn-lg", style: {display:'block',backgroundColor:'#1ca3fd', backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)',borderRadius:3,fontFamily:'proxima-nova',fontWeight:'bold'}}, "Sign Up")
              )
            )
          )
      ), 

      React.DOM.div({id: "", style: {position:'absolute',zIndex:'-2',top:0,left:0}}, 
        React.DOM.div({className: "", style: {marginLeft:0,width:'120%',display:'none'}}, 
        imgs_1, 
        imgs_2
        )
      )
      )
    )
  }
});

},{"../lib/data.min.js":67}],57:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Spinner
  render: function() {
    circleStyle=(this.props.circleStyle) ? this.props.circleStyle : {}
    spinnerStyle=this.props.spinnerStyle ? this.props.spinnerStyle : {}
    return (
      React.DOM.div({className: "spinner", style: spinnerStyle}, 
        React.DOM.div({className: "spinner-container container1"}, 
          React.DOM.div({className: "circle1", style: circleStyle}), 
          React.DOM.div({className: "circle2", style: circleStyle}), 
          React.DOM.div({className: "circle3", style: circleStyle}), 
          React.DOM.div({className: "circle4", style: circleStyle})
        ), 
        React.DOM.div({className: "spinner-container container2"}, 
          React.DOM.div({className: "circle1", style: circleStyle}), 
          React.DOM.div({className: "circle2", style: circleStyle}), 
          React.DOM.div({className: "circle3", style: circleStyle}), 
          React.DOM.div({className: "circle4", style: circleStyle})
        ), 
        React.DOM.div({className: "spinner-container container3"}, 
          React.DOM.div({className: "circle1", style: circleStyle}), 
          React.DOM.div({className: "circle2", style: circleStyle}), 
          React.DOM.div({className: "circle3", style: circleStyle}), 
          React.DOM.div({className: "circle4", style: circleStyle})
        )
      )

    )
  },
})

},{}],58:[function(require,module,exports){
/** @jsx React.DOM */

var EditTemplateView = require('./edit_template.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  //Templates
  getInitialState: function() {
    return {
      selectedTemplate: 0,
      editMode: false
    }
  },

  changeMode: function() {
    this.setState({editMode: !this.state.editeMode})
  },

  render: function() {
    templateView = (!this.state.editMode) ? TemplateView({changeMode: this.changeMode}) : EditTemplateView(null)
    return (
      React.DOM.div(null, 
        React.DOM.div({style: {height:'100%'}}, 
          TemplateSideMenu(null), 
          React.DOM.div({className: "col-md-9", style: {padding:0,height:'100%'}}, 
              templateView
          )
        )
      )
    );
  }
});


var TemplateView = React.createClass({displayName: 'TemplateView',
  changeMode: function() {
    this.props.changeMode()
  },
  render: function() {
    return (
      React.DOM.div({className: "panel panel-info", style: {width:'100%',height:'100%',border:0}}, 
        React.DOM.div({className: "panel-heading"}, 
          "Template Name",  
          React.DOM.a({href: "javascript:", 
             onClick: this.changeMode, 
             className: "btn btn-primary btn-xs", 
             style: {display:'block',float:'right',marginTop:'0px'}}, 
            React.DOM.i({className: "fa fa-pencil-square"}), "   Edit Template")
        ), 
        React.DOM.div({className: "panel-body"}, 
        React.DOM.h4(null, "Followup - Prospecting SAAS Outreach"), 
        React.DOM.h6({style: {marginBottom:'0'}, className: "text-muted"}, "Created by Mark on Jul. 21, 2014"), 
        React.DOM.h6({style: {marginTop:'0'}, className: "text-muted"}, "last updated 7 days ago"), 
        React.DOM.br(null), 
        React.DOM.br(null), 

        React.DOM.div({className: "panel panel-default"}, 

          React.DOM.div({className: "panel-body"}, 
          "15 minutes to get company_name more customers" + ' ' +
          "Hey first_name," + ' ' +

          "Would you like to hear an idea for a 15 minute hack that could significantly increase the number of prospects your sales people have access to ?" + ' ' +
           
          "Recently one of our B2B clients saw a huge increase in trial sign ups after working with us. first_name, lets schedule a 15 minute call this week to see if this would be a good fit for both of us." + ' ' +
           
          "What the best time for you this week ?" + ' ' +
           
          "--" + ' ' +
          "Mark" + ' ' + 
          "Customero" + ' ' +
          "mark@customerohq.com"
          
          )
        )
      )
    )
    );
  },
});

var TemplateSideMenu = React.createClass({displayName: 'TemplateSideMenu',
  getInitialState: function() {
    return {
      templates: [],
    }
  },

  componentDidMount: function() {
    //Ajax Request For Templates
    /*
     $.ajax({
      url:'',
      headers: "",
      data: "",
      success: function() {
      },
      error: function() {
      }
     });
    */
  },

  render: function() {
    templates = []
    for(i=0;i< this.state.templates.length; i++)
      templates.push(React.DOM.a({href: "javascript:", className: "list-group-item"}, "templates[i].name"))
    return (
      React.DOM.div({className: "col-md-3", style: {padding:'0', borderRight:'1px solid #ddd',height:'100%',textAlign:'center'}}, 
        React.DOM.div({className: "panel panel-default", style: {border:0}}, 
          React.DOM.div({className: "panel-heading", style: {height:60}}, 
            React.DOM.span({style: {float:'left',fontSize:20,fontWeight:'bold'}}, 
              "Templates"
            ), 
            React.DOM.a({href: "javascript:", className: "btn btn-success ", 
                style: {float:'right'}}, 
              React.DOM.i({className: "fa fa-plus"})
            )
          ), 
          React.DOM.ul({className: "list-group", style: {textAlign:'left'}}, 
            templates
          )
        )
      )
    )
  }
});

},{"./edit_template.js.min.js":22}],59:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  //TemplatesMenu
  toggleTemplateEditMenu: function(currentTemplate) {
    this.props.toggleTemplateEditMenu(currentTemplate)
  },

  createTemplate: function() {
    this.props.toggleTemplateEditMenu({
      name: '',
      body:'',
      subject:'',
      editMode:true,
      newTemplate: true
    }, true)
  },

  render: function() {
    //console.log(this.props.templates)
    templates = []
    for(i=0;i< this.props.templates.length; i++) {
      templates.push(
        TemplateListItem({
          toggleTemplateEditMenu: this.toggleTemplateEditMenu, 
          template: this.props.templates[i]})
      )
    }

    return (
      React.DOM.div({className: "", style: {padding:'0', height:'100%',textAlign:'center'}}, 
        React.DOM.div({className: "panel panel-default", 
             style: {borderRight:0,borderRadius:0,height:'100%', overflow:'auto'}}, 
          React.DOM.div({className: "panel-heading", style: {height:40}}, 
            React.DOM.span({style: {float:'left',fontSize:14,fontWeight:'bold'}}, 
              React.DOM.i({className: "fa fa-file-text-o"}), 
              React.DOM.span({style: {marginLeft:5}}, "Templates")
            ), 
            React.DOM.a({href: "javascript:", 
              className: "btn btn-success btn-xs", 
              onClick: this.createTemplate, 
                style: {float:'right'}}, 
              React.DOM.i({className: "fa fa-plus"}), 
              React.DOM.span({style: {marginLeft:5}}, "Create Template")
            )
          ), 
          React.DOM.ul({className: "list-group", 
              style: {textAlign:'left'}}, 
            templates
          )
        )
      )
    )
  }
});

var TemplateListItem = React.createClass({displayName: 'TemplateListItem',
  toggleTemplateEditMenu: function() {
    console.log(this.props.template)
    template = this.props.template
    template.editMode = false
    this.props.toggleTemplateEditMenu(template)
  },

  render: function() {
    return (
      React.DOM.div(null, 
        React.DOM.a({href: "javascript:", 
          style: {borderBottom: '1px solid rgb(221, 221, 221)',paddingTop:5,paddingBottom:0}, 
           onClick: this.toggleTemplateEditMenu, 
           className: "list-group-item"}, 
           React.DOM.span({className: "label label-default"}, 
             this.props.template.name
           ), 
           React.DOM.h6(null, "Subject:", React.DOM.span({className: "text text-muted"}, 
             " " + this.props.template.subject
           ))
         )
      )
    );
  }
});

},{}],60:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // SignalDetail
  getInitialState: function() {
    return {
      currentSignal: 'CompanySignal',
      signals: [],
      //allProspected: this.props.currentProfileReport.prospected,
      companyCount: '~',
      peopleCount: '~'
    }
  },

  getSignals: function(currentSignal) {
    var thissss = this;
    currentReport = this.props.currentProfileReport.objectId
    currentProfileReport = appConfig.pointer('SignalReport', currentReport)

    qry = {
      where:JSON.stringify({ report: currentProfileReport }),
      include:'company_signal,company_signal.signals,signals',
      order:'-createdAt',
      limit:100
    }

    $.ajax({
      url: 'https://api.parse.com/1/classes/'+currentSignal,
      data: qry,
      type:'GET',
      headers:appConfig.parseHeaders,
      success: function(res) {
        console.log('SIGNAL DETAIL')
        console.log(res.results)
        console.log('PROFILE REPORT')
        console.log(thissss.props.currentProfileReport.objectId)
        thissss.setState({signals: res.results})
      },
      error: function(err) { console.log(err.responseText) }
    });
  },

  setCompanyState: function() { this.setState({currentSignal: 'CompanySignal'}) }, 
  setPersonState: function() { this.setState({currentSignal: 'PeopleSignal'}) }, 

  componentDidMount: function() {
    console.log(this.props.currentProfileReport.objectId)
    this.getSignals(this.state.currentSignal)
    qry = {
      where:JSON.stringify({ report: currentProfileReport }),
      count: 1
    }
    var thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/classes/PeopleSignal',
      data: qry,
      headers: appConfig.headers,
      success: function(res) { thiss.setState({peopleCount: res.count})},
      error: function(err) { console.log(err.responseText) },
    })

    $.ajax({
      url:'https://api.parse.com/1/classes/CompanySignal',
      data: qry,
      headers: appConfig.headers,
      success: function(res) { thiss.setState({companyCount: res.count})},
      error: function(err) { console.log(err.responseText) },
    })
  },

  componentWillUpdate: function(nextProps, nextState) {
    if(this.state.currentSignal != nextState.currentSignal)
      this.getSignals(nextState.currentSignal)
  },

  returnToCalendarView: function() {
    console.log('return to calendar view')
  },

  render: function() {
    console.log('ALL PROSPECTED')
    console.log(this.state.allProspected)
    console.log('CURRENT SIGNAL')
    console.log(this.state.currentSignal)
    console.log('SIGNAL')
    console.log(this.state.signals)
    signals = []
    for(i=0;i< this.state.signals.length; i++) {
      if(this.state.currentSignal == 'CompanySignal')
        signals.push(CompanyHiringSignalRow({signal: this.state.signals[i], 
                                       allProspected: this.state.allProspected}))
      else
        signals.push(PeopleSignalRow({signal: this.state.signals[i], 
                                       allProspected: this.state.allProspected}))
    }

    currentProfileReport = this.props.currentProfileReport
    companyBtn = (this.state.currentSignal == "CompanySignal") ? "btn btn-xs btn-default active" : "btn btn-xs btn-default"
    peopleBtn = (this.state.currentSignal == "PeopleSignal") ? "btn btn-xs btn-default active" : "btn btn-xs btn-default"
    return (
      React.DOM.div({className: "container", style: {height:356,paddingLeft:0,
                                         paddingRight:0,width:'100%'}}, 
        React.DOM.div({style: {height:44,borderBottom:'solid 1px rgb(221, 221, 221)'}}, 
          React.DOM.h4({onClick: this.returnToCalendarView, 
              style: {float:'left',cursor:'pointer',marginTop:7,fontWeight:200,
                      paddingLeft:20,paddingTop:5,display:'inline-block'}}, 
              
                React.DOM.i({className: "fa fa-calendar", style: {marginRight:5}}), 
                this.props.currentProfile.name
          ), 
          React.DOM.h6({style: {fontSize:13,paddingLeft:5,paddingTop:5,display:'inline-block'}}, 
            React.DOM.i({className: "fa fa-chevron-right", style: {fontSize:9}}), "  ", 
            React.DOM.i({className: "fa fa-clock-o"}), "  ", 
            moment(currentProfileReport.createdAt).fromNow(), "  "
          ), 

          (this.state.allProspected) ?
          React.DOM.a({href: "javascript:", style: {fontWeight:'bold',float:'right',
                                        marginRight:10,marginTop:10}, 
             className: "btn btn-success btn-xs disabled"}, 
            "Prospected"
          ) :
          React.DOM.a({href: "javascript:", style: {fontWeight:'bold',float:'right',
                                        marginRight:10,marginTop:10}, 
             onClick: this.prospectAll, 
             className: "btn btn-success btn-xs"}, 
            "Prospect All"
          ), 
          

          React.DOM.div({className: "btn-group", 
               style: {float:'right',marginTop:10,marginRight:10}, 
               'data-toggle': "buttons"}, 
            React.DOM.label({className: peopleBtn, style: {width:50}, 
                 onClick: this.setPersonState}, 
              React.DOM.input({type: "checkbox"}), 
              React.DOM.i({className: "fa fa-user"}), "  ", 
              this.state.peopleCount
            ), 
            React.DOM.label({className: companyBtn, style: {width:50}, 
              onClick: this.setCompanyState}, 
              React.DOM.input({type: "checkbox"}), 
              React.DOM.i({className: "fa fa-building"}), "  ", 
              this.state.companyCount
            )
          )
        ), 

        React.DOM.div({className: "col-md-12", style: {paddingLeft:0,paddingRight:0}}, 
          React.DOM.div({style: {overflow:'auto',height:356}}, 
            React.DOM.table({className: "table table-striped"}, 
              React.DOM.thead(null, 
                React.DOM.th({style: {textAlign:'center',width:90}}, 
                  React.DOM.i({className: "fa fa-clock-o"})
                ), 

                React.DOM.th({style: {width:200}}, 
                  (this.state.currentSignal == 'CompanySignal') ?  
                    "Companies" : "People"
                ), 


                React.DOM.th(null, "Source "), 

                React.DOM.th({style: {width:90,textAlign:'center'}}, " ")

              ), 
              React.DOM.tbody({className: "reports"}, 
                signals
              )
            )
          )
        )
      )
    );
  },
  prospectAll: function() {
    console.log(this.state.currentSignal)
    console.log(this.props.currentProfileReport.objectId)
    report_id = this.props.currentProfileReport.objectId
    var thiss = this;
    $.ajax({
      //url: 'http://127.0.0.1:5000/signal_to_prospect',
      url: 'https://nameless-retreat-3525.herokuapp.com/signal_to_prospect',
      data: {all_signals:true, report_id: report_id, 
             signal_type: thiss.state.currentSignal},
      success: function(res) { console.log(res)},
      error: function(err) { console.log(err.responseText)},
    })
  }
});

var CompanyHiringSignalRow = React.createClass({displayName: 'CompanyHiringSignalRow',
  render: function() {
    //console.log(company)
    company = (this.props.signal) ? this.props.signal : {}
    return (
      React.DOM.tr({style: {}}, 
        React.DOM.td({style: {textAlign:'center',width:120}}, 
          React.DOM.h6(null, 
            moment(this.props.signal.createdAt).fromNow()
          )
        ), 

        React.DOM.td(null, 
          React.DOM.h6(null, company.name), 
          React.DOM.h6(null, company.revenue), 
          React.DOM.h6(null, React.DOM.a({href: "javascript:"}, company.websiteUrl)), 
          React.DOM.h6(null, company.city)
        ), 

        React.DOM.td(null, 
          moment(company.timestamp).format('ll')
        ), 

        React.DOM.td(null, 
          (this.props.allProspected) ? 
          React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs disabled", 
            style: {fontWeight:'bold'}}, 
            "Prospected"
          ) : React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", 
                  onClick: this.turnCompanySignalToProspect, 
            style: {fontWeight:'bold'}}, 
            "Prospect"
          )
        )
      )
    )
  },
  turnCompanySignalToProspect: function() {
    var thiss = this;
    $.ajax({
      //url: 'https://nameless-retreat-',
      //url: 'http://127.0.0.1:5000/signal_to_prospect',
      url: 'https://nameless-retreat-3525.herokuapp.com/signal_to_prospect',
      data: {all_signals:false, signal_id: company.objectId,
             signal_type: 'CompanySignal'},
      success: function(res) { console.log(res)},
      error: function(err) { console.log(err.responseText)},
    })
  }
})

var PeopleSignalRow = React.createClass({displayName: 'PeopleSignalRow',
  turnSignalIntoProspect: function() {
    var thiss = this;
    console.log(this.props.signal)
    $.ajax({
      //url:'http://127.0.0.1:5000/signal_to_prospect',
      url:'http://nameless-retreat-3525.herokuapp.com/signal_to_prospect',
      data: {signal_id: thiss.props.signal.objectId, signal_type:'PeopleSignal',
             all_signals:false},
      success: function(res) { console.log(res) },
      error: function(err) { console.log(err.responseText) } 
    })
  },

  render: function() {
    //console.log(company)
    people = (this.props.signal) ? this.props.signal : {}
    company = people.company_signal
    title = (people.title) ? people.title.split('-')[1] : ""
    title = title.split(' at')[0]
    //city = people.split('-')[0]
    city = ""
    console.log(people)
    return (
      React.DOM.tr({style: {}}, 
        React.DOM.td({style: {textAlign:'center',width:120}}, 
          React.DOM.h6(null, 
            moment(this.props.signal.createdAt).fromNow()
          )
        ), 

        React.DOM.td(null, 
          React.DOM.h6(null, people.link_text + " - ", " ", React.DOM.span({style: {fontStyle:'italic'}}, 
              title)), 
          React.DOM.h6(null, React.DOM.a({href: "javascript:"}, company.websiteUrl)), 
          React.DOM.h6(null, company.name), 
          React.DOM.h6(null, company.city)
        ), 

        React.DOM.td(null, 
          React.DOM.h6(null, company.signals[0].className), 
          React.DOM.h6(null, company.signals[0].job_title), 
          React.DOM.h6(null, company.signals[0].summary)
        ), 
        React.DOM.td(null, 
          company.timestamp, 
          moment(company.timestamp).format('ll')
        ), 

        React.DOM.td(null, 
          (this.props.allProspected) ? 
          React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs disabled", 
            style: {fontWeight:'bold'}}, 
            "Prospected"
            ) : React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", 
                      onClick: this.turnSignalIntoProspect, 
            style: {fontWeight:'bold'}}, 
            "Prospect"
          )
          
        )
      )
    )
  }
})

},{}],61:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // SignalCalendar
  getInitialState: function() {
    return {
      reports : [],
      currentTerritory:'all',
    }
  },

  getSignalReport: function(currentTerritory) {
    thissss = this;
    if(currentTerritory == "all"){
      qry = {'where' : JSON.stringify({profile:{
        __type:'Pointer',
        className:'ProspectProfile',
        objectId:this.props.currentProfile.objectId
      }, is_parent: true }), order:'-createdAt'}
    } else {
      qry = {'where' : JSON.stringify({parent:
            appConfig.pointer('SignalReport', currentTerritory.objectId), 
            }), order:'-createdAt'}
    }
    console.log(qry)

    // Get Signal Reports Of Current Profile
    $.ajax({
      url: 'https://api.parse.com/1/classes/SignalReport',
      type:'GET',
      data: qry,
      headers:appConfig.parseHeaders,
      success: function(res) {
        console.log(res.results)
        thissss.setState({reports: res.results})
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  componentDidMount: function() {
    this.getSignalReport(this.state.currentTerritory)
  },

  componentWillUpdate: function(nextProps, nextState) {
    console.log('UPDATED')
    console.log(this.state.currentTerritory)
    console.log(nextState.currentTerritory)
    //if(this.state.currentTerritory != nextState.currentTerritory)
    if(!_.isEqual(this.state.currentTerritory, nextState.currentTerritory))
      this.getSignalReport(nextState.currentTerritory)
  },

  allTerritories: function() {
    this.setState({currentTerritory: 'all'})
  },

  render: function() {
    reports = (this.props.reports) ? this.props.reports : []

    for(i=0;i< this.state.reports.length; i++) {
      reports.push(SignalReportRow({setCurrentReport: this.setCurrentReport, 
                                    prospectSignalReport: this.prospectSignalReport, 
                                    setCurrentView: this.setCurrentView, 
                                    rowClick: this.rowClick, 
                                    report: this.state.reports[i]}))
    }

    territory = (this.state.currentTerritory == 'all') ? '' : ' - '+this.state.currentTerritory.territory
    return (
      React.DOM.div({className: "container", style: {paddingLeft:0,
                                         paddingRight:0,width:'100%'}}, 
        React.DOM.div({style: {height:44,borderBottom:'solid 1px rgb(221, 221, 221)'}}, 
          React.DOM.h4({onClick: this.allTerritories, 
              style: {fontWeight:200, float:'left',cursor:'pointer',marginTop:7,
                      paddingLeft:20,paddingTop:5, display:'inline-block'}}, 
                React.DOM.i({className: "fa fa-globe", style: {marginRight:5}}), 
                this.props.currentProfile.name, 
                territory
          )
        ), 
        React.DOM.div({className: "col-md-12", style: {paddingLeft:0,paddingRight:0,
                                           height:356,overflow:'auto'}}, 
          React.DOM.div({style: {overflow:'auto'}}, 
            React.DOM.table({className: "table table-striped", style: {marginBottom:0}}, 
              React.DOM.thead(null, 
                React.DOM.th(null), 
                React.DOM.th({style: {textAlign:'center'}}, 
                  React.DOM.i({className: "fa fa-clock-o"}), " Last Ran"
                ), 
                React.DOM.th({style: {textAlign:'',paddingLeft:50}}, 
                  "Territory Name"
                ), 
                React.DOM.th(null, "Company Signals"), 
                React.DOM.th({style: {display:'block'}}, "Prospect Companies"), 
                React.DOM.th({style: {width:150,textAlign:'center',display:'none'}})
              ), 
              React.DOM.tbody({className: "reports"}, 
                reports
              )
            )
          )
        )
      )
    );
  },

  setCurrentReport: function(newReport) {
    this.props.setCurrentReport(newReport)
  },

  prospectSignalReport: function(signalReport) {
    this.props.prospectSignalReport(this.props.currentProfile, signalReport)
  },

  setTerritory: function(territory) {
    //
    this.setState({currentTerritory: territory})
  },

  rowClick: function(report) {
    console.log(report)
    if(report.prospected)
      this.props.setReport('TerritoryDetail', report)
    else
      this.setTerritory(report)
    /*
    if(this.state.selectedTerritory != 'all')
      this.setCurrentReport(report) // 
    else
      this.setTerritory(report)
    */
  }
});

var SignalReportRow = React.createClass({displayName: 'SignalReportRow',
  getInitialState: function() {
    return {
      companyCount: '~',
      peopleCount: '~',
      loading: this.props.report.done,
    }
  },

  setTerritory: function() {
    this.props.setTerritory('')
  },

  rowClick: function() {
    this.props.rowClick(this.props.report)
  },

  prospectSignalReport: function(e) {
    this.props.prospectSignalReport(this.props.report)
    e.stopPropagation()
  },

  componentDidMount: function() { 
  },

  render: function() {
    prospected = this.props.report.prospected
    icon = React.DOM.i({className: "fa fa-globe"})
    icon = ""
    //
    loading = (this.state.loading) ? React.DOM.div({className: "profile-loading", style: {marginLeft:30}}, 
          React.DOM.div({className: "double-bounce1", style: {backgroundColor:'#5cb85c'}}), 
          React.DOM.div({className: "double-bounce2", style: {backgroundColor:'#5cb85c'}})
          ) : React.DOM.a({href: "javascript:", onClick: this.prospectSignalReport, 
             style: {fontWeight:'bold',marginTop:5}, 
     className: (prospected) ? "btn btn-xs btn-primary disabled" : "btn btn-xs btn-primary"}, 
             (prospected) ? 'Prospected' : 'Prospect All'
          )
    // if done  - loading
    loading = (this.props.report.prospected) ? React.DOM.span({className: "label label-success"}, " Prospected")  : loading
    loading  = React.DOM.span({className: "label label-success"}, " Prospected")

    return (
      React.DOM.tr({onClick: this.rowClick, style: {cursor:'pointer'}}, 
        React.DOM.td({style: {textAlign:'right',paddingTop:15}}, 
          icon
        ), 
        React.DOM.td({style: {textAlign:'center'}}, 
          React.DOM.h6(null, 
            moment(this.props.report.createdAt).fromNow()
          )
        ), 
        React.DOM.td({style: {textAlign:'',paddingLeft:50}}, 
          React.DOM.h6(null, 
            React.DOM.i({className: "fa fa-globe"}), " ", 
            React.DOM.span(null, 
            this.props.report.territory
            )
          )
        ), 
        React.DOM.td(null, 
          React.DOM.span({className: "label label-success"}, 
            this.props.report.company_count
          ), 
          React.DOM.h6({style: {display:'inline-block'}}, 
            "  Companies found."
          )
        ), 
        React.DOM.td({style: {display:'block'}}, 
          React.DOM.span({className: "label label-success"}, 
            this.props.report.people_count
          ), 

          (this.props.report.prospected) ? React.DOM.div({style: {marginTop:6,padding:6, display:'block',width:146}, className: "label label-primary"}, React.DOM.i({className: "fa fa-check-circle"}), "   Prospected") : React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", 
            style: {backgroundImage: 'linear-gradient(#8add6d, #60b044)',marginTop:4}, 
            style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)',marginTop:4}}, 
            React.DOM.i({className: "fa fa-cloud-download"}), "  " + ' ' +
            "Download Prospects"
          ), 
          React.DOM.h6({style: {display:'none'}}, 
            "  People found."
          )
        ), 
        React.DOM.td({style: (this.props.report.done) ? {display:'none'} : {display:'none',paddingTop:17}}, 
          loading
        )
      )
    )
  }
});

},{}],62:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // TimelineDayElement
  // TODO
  // - add prospect list progression
  // - add scheduled followup
  //
  getInitialState: function() {
    // 
    return {
      followupCompleted: 0,
    }
  },

  addFollowup: function() {
    this.props.addFollowup(this.props.dayCount)
  },

  render: function() {
    if(this.props.addTemplateMode) {
      mode = EditTemplate({addFollowup: this.props.addFollowup, 
                           saveFollowup: this.props.saveFollowup, 
                           removeFollowup: this.props.removeFollowup, 
                           dayCount: this.props.dayCount, 
                           templates: this.props.templates})
    } else {
      mode = TemplateFollowup({currentTemplate: this.props.currentTemplate, 
                               editFollowup: this.props.editFollowup, 
                               dayCount: this.props.dayCount, 
                               currentBatch: this.props.currentBatch, 
                               hasBatch: typeof(this.props.batchCount) != "undefined" && this.props.batchCount > 0, 
                               setCurrentBatch: this.props.setCurrentBatch, 
                               dayCount: this.props.dayCount, 
                               removeFollowup: this.props.removeFollowup, 
                               setCurrentTemplate: this.props.setCurrentTemplate})
    }
    if(this.props.alreadySent) {
      mode = FollowupCompleted({currentTemplate: this.props.currentTemplate})
    }

    mode = (this.props.elementType) ? "" : mode
    addFollowup = (this.props.elementType) ? this.addFollowup : ""
    if(typeof(this.props.batchCount) != "undefined")
      batchStage = BatchStage({currentBatch: this.props.currentBatch, 
                               newProspects: this.props.newProspects, 
                               prospectListCount: this.props.prospectListCount, 
                               batchCount: this.props.batchCount, 
                               hasScheduledEmail: mode != "", 
                               dayCount: this.props.dayCount})
    else
      batchStage = ""

    dayCount = (this.props.dayCount != 0.5) ? "D"+this.props.dayCount : ""

    return (
      React.DOM.div(null, 
        React.DOM.div({onClick: addFollowup, className: "day", 'data-trigger': "manual"}, 
          dayCount
        ), 
        mode, batchStage
      )
    )
  },

  setCurrentTemplate: function(template) {
    this.props.setCurrentTemplate(template)
  }
});

var FollowupCompleted = React.createClass({displayName: 'FollowupCompleted',
  render: function() {
    return (
      React.DOM.div({className: "followup-placement arrow_box_1 tmp_2"}, 
        React.DOM.h6({style: {width:130,display:'inline-block'}}, 
          React.DOM.i({className: "fa fa-file-text-o"}), "  ", 
          (this.props.currentTemplate) ? this.props.currentTemplate.name : ""
        ), 
        React.DOM.button({className: "win-btn btn btn-success btn-xs disabled", 
                'data-target': ".bs-sendEmail-modal-lg", 
                onClick: this.setCurrentTemplate, 
                'data-toggle': "modal"}, 
          React.DOM.i({className: "fa fa-check"}), " Sent"), " ", 
        React.DOM.button({onClick: this.editFollowup, 
                className: "win-btn btn btn-default btn-xs disabled"}, 
          React.DOM.i({className: "fa fa-pencil"})), " ", 
        React.DOM.button({onClick: this.removeFollowup, 
                className: "win-btn btn btn-default btn-xs disabled"}, 
          React.DOM.i({className: "fa fa-trash-o"}))
      )
                                         )
  }
})

var TemplateFollowup = React.createClass({displayName: 'TemplateFollowup',
  // EditMode False

  setCurrentTemplate: function() {
    this.props.setCurrentTemplate(this.props.currentTemplate)
    // setCurrentBatch
    this.props.setCurrentBatch(this.props.currentBatch)
    $('.bs-sendEmail-modal-lg').modal()
  },

  waitForBatch: function() {
    alertify.log("You must wait for a batch!");
  },

  render: function() {
    trash = (this.props.dayCount == 0) ?  React.DOM.button({onClick: this.removeFollowup, 
                className: "win-btn btn btn-default btn-xs disabled"}, 
          React.DOM.i({className: "fa fa-trash-o"})) : React.DOM.button({onClick: this.removeFollowup, className: "win-btn btn btn-default btn-xs"}, 
          React.DOM.i({className: "fa fa-trash-o"})) 
    return (
      React.DOM.div({className: "followup-placement arrow_box_1 tmp_2"}, 
        React.DOM.h6({style: {width:130,display:'inline-block'}}, 
          React.DOM.i({className: "fa fa-file-text-o"}), "  ", 
          (this.props.currentTemplate) ? this.props.currentTemplate.name : ""
        ), 
        React.DOM.button({className: "win-btn btn btn-success btn-xs", 
          onClick: (this.props.hasBatch) ? this.setCurrentTemplate : this.waitForBatch, 
                'data-toggle': "modal"}, 
          React.DOM.i({className: "fa fa-paper-plane"}), " Send"), " ", 
        React.DOM.button({onClick: this.editFollowup, 
                className: "win-btn btn btn-default btn-xs"}, 
          React.DOM.i({className: "fa fa-pencil"})), " ", 
        trash
      )
    );
  },

  editFollowup: function(e) { 
    e.preventDefault()
    console.log(this.props.dayCount)
    this.props.editFollowup(this.props.dayCount)
  },

  removeFollowup: function() {
    console.log('remove')
    this.props.removeFollowup(this.props.dayCount)
  }
});

var BatchStage = React.createClass({displayName: 'BatchStage',
  // Different Stages of People Added to Prospect List
  getInitialState: function() {
    return {
      initialBatchCount: this.props.batchCount
    }
  },

  componentDidMount: function() {
    // state
    //console.debug('INSIDE BATCH '+this.props.dayCount)
    console.debug(this.props.currentBatch)
    _batches = appConfig.pointer('ProspectBatch', this.props.currentBatch)
    if(this.props.batchCount == "~") {
      // Why doesnt this work 
      var thissss = this;
      console.debug('INSIDE BATCH '+thiss.props.dayCount)
      console.debug(_batches)
      $.ajax({
        url:'https://api.parse.com/1/classes/Prospect',
        batches: _batches,
        data: {
          where: JSON.stringify({
            batches: _batches
          }),
          count: true,
          limit:1000,
        },
        headers: appConfig.headers,
        success: function(res) { 
          //console.debug('SUCCESS GET COUNT ' + res.count)
          //console.debug(res.results) 
          thissss.setState({initialBatchCount: res.count})
        },
        error: function(err) { 
          thissss.setState({initialBatchCount: 0 })
        }
      })
    }
  },

  componentWillReceiveProps: function(nextProps) {
    if(this.props.dayCount == 0)
      this.setState({ initialBatchCount: nextProps.batchCount })
  },


  render: function() {
    if(this.props.hasScheduledEmail)
      batchStageStyle = {top:-42, left:6}
    else
      batchStageStyle = {}

    if(this.props.dayCount == 0.5)
      batchStageStyle.left = 7

    //console.log('BATCH STAGE')
    //console.log(this.props)
    //console.debug(this.props.currentBatch)                                                           

    return (
      React.DOM.div({className: "followup-placement arrow_box tmp", style: batchStageStyle}, 
        React.DOM.span({className: "label label-primary"}, 
          React.DOM.i({className: "fa fa-user"}), " ", 
          this.state.initialBatchCount
        ), " ", 
        React.DOM.h6({style: {display:'inline-block'}}, 
          "prospects in the sales cycle.")
      )
    );
  }
});

var EditTemplate = React.createClass({displayName: 'EditTemplate',
  // Edit Mode - True
  render: function() {
    options = []
    for(i=0;i< this.props.templates.length; i++) {
      options.push( React.DOM.option(null, this.props.templates[i].name))
    }
    trash = (this.props.dayCount == 0) ?  React.DOM.button({onClick: this.removeFollowup, 
                className: "win-btn btn btn-default btn-xs disabled"}, 
          React.DOM.i({className: "fa fa-trash-o"})) : React.DOM.button({onClick: this.removeFollowup, className: "win-btn btn btn-default btn-xs"}, " ", React.DOM.i({className: "fa fa-trash-o"})) 
    return (
      React.DOM.div({className: "followup-placement arrow_box_1 tmp_2"}, 
        React.DOM.h6({style: {width:55,display:'inline-block'}, 
            className: "text-muted"}, 
          "Choose :"
        ), 
        React.DOM.select({className: "form-control input-sm", 
                id: "chooseTemplateForFollowup", 
                style: {display:'inline-block',width:127,marginRight:5}}, 
          options
        ), 

        React.DOM.button({className: "win-btn btn btn-success btn-xs", 
                onClick: this.saveFollowup, 
                style: {marginRight:5}}, 
          React.DOM.i({className: "fa fa-check"})), 
        trash
      )
    )
  },

  saveFollowup: function(e) {
    //get template from currentTemplate
    e.preventDefault()
    chosenTemplate = $('#chooseTemplateForFollowup').val()
    console.log(chosenTemplate)
    for(i=0;i< this.props.templates.length; i++){
      if(this.props.templates[i].name == chosenTemplate){
        chosenTemplate = this.props.templates[i]
        break
      }
    }
    console.log(chosenTemplate)
    
    this.props.saveFollowup(this.props.dayCount, chosenTemplate)
  },

  removeFollowup: function(day) {
    this.props.removeFollowup(this.props.dayCount)
  },
});


},{}],63:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',

  render: function() {
    return (
        React.DOM.div({className: "modal bs-example-modal-lg", 
             style: {marginTop:50}, 
             id: "upgradePlanModal"}, 
          React.DOM.div({className: "modal-dialog modal-lg"}, 
            React.DOM.div({className: "modal-content"}, 
              React.DOM.div({className: "modal-body"}, 
                React.DOM.h4({className: "modal-title"}, "Choose A New Plan:"), 
                React.DOM.br(null), 
        
                React.DOM.div({className: "row"}, 
                React.DOM.div({className: "col-md-3", style: {padding:5}}, 
                React.DOM.div({className: "panel panel-default"}, 
                  React.DOM.div({className: "panel-heading", style: {textAlign:'center',fontWeight:'bold'}}, " Individual "), 
                  React.DOM.div({className: "panel-body"}, 
                  React.DOM.h1({style: {textAlign:'center'}}, "$99", React.DOM.small(null, "/month"))

                  ), 
                  React.DOM.ul({className: "list-group"}, 
                    React.DOM.li({className: "list-group-item"}, " "), 
                    React.DOM.li({className: "list-group-item"}, "Up to 300 emails"), 
                    React.DOM.li({className: "list-group-item"}, "Max 1 User"), 
                    React.DOM.li({className: "list-group-item"}, "Includes Email"), 
                    React.DOM.li({className: "list-group-item"}, 
                      React.DOM.a({href: "javascript:", 
                         className: "btn-gradient btn btn-primary", 
                         style: {display:'block'}, 
                         onClick: this.launchCheckout}, "Upgrade")
                    )
                  )
                )
                ), 
                React.DOM.div({className: "col-md-3", style: {padding:5}}, 
                React.DOM.div({className: "panel panel-default"}, 
                  React.DOM.div({className: "panel-heading", style: {textAlign:'center',fontWeight:'bold'}}, " Startup "), 
                  React.DOM.div({className: "panel-body"}, 
                  
                  React.DOM.h1({style: {textAlign:'center'}}, "$499", React.DOM.small(null, "/month"))
                  ), 
                  React.DOM.ul({className: "list-group"}, 
                    React.DOM.li({className: "list-group-item"}, " "), 
                    React.DOM.li({className: "list-group-item"}, "Up to 1000 emails"), 
                    React.DOM.li({className: "list-group-item"}, "Max 10 Users"), 
                    React.DOM.li({className: "list-group-item"}, "Includes Quick Start Package"), 
                  React.DOM.li({className: "list-group-item"}, "Includes Signals"), 
                    React.DOM.li({className: "list-group-item"}, 
                      React.DOM.a({href: "javascript:", 
                         className: "btn-gradient btn btn-primary", 
                         style: {display:'block'}, 
                         onClick: this.launchCheckout}, "Upgrade")
                    )
                  )
                )
                ), 
                React.DOM.div({className: "col-md-3", style: {padding:5}}, 
                React.DOM.div({className: "panel panel-default"}, 
                  React.DOM.div({className: "panel-heading", style: {textAlign:'center',fontWeight:'bold'}}, " Growth "), 
                  React.DOM.div({className: "panel-body"}, 
                  
                  React.DOM.h1({style: {textAlign:'center'}}, "$1299", React.DOM.small(null, "/month"))
                  ), 
                  React.DOM.ul({className: "list-group"}, 
                    React.DOM.li({className: "list-group-item"}, " "), 
                    React.DOM.li({className: "list-group-item"}, "Up to 2500 emails"), 
                    React.DOM.li({className: "list-group-item"}, "Up to 25 Users"), 
                    React.DOM.li({className: "list-group-item"}, "Bulk CRM Integration"), 
                    React.DOM.li({className: "list-group-item"}, "Mining Jobs"), 
                    React.DOM.li({className: "list-group-item"}, 
                      React.DOM.a({href: "javascript:", 
                         className: "btn-gradient btn btn-primary", 
                         style: {display:'block'}, 
                         onClick: this.launchCheckout}, "Upgrade")
                    )
                  )
                )
                ), 
                React.DOM.div({className: "col-md-3", style: {padding:5}}, 
                React.DOM.div({className: "panel panel-default"}, 
                  React.DOM.div({className: "panel-heading", style: {textAlign:'center',fontWeight:'bold'}}, " Enterprise "), 
                  React.DOM.div({className: "panel-body"}, 
                  React.DOM.h1({style: {textAlign:'center'}}, "$2999", React.DOM.small(null, "/month"))
                  ), 
                  React.DOM.ul({className: "list-group"}, 
                    React.DOM.li({className: "list-group-item"}, " "), 
                    React.DOM.li({className: "list-group-item"}, "Up to 10000 emails"), 
                    React.DOM.li({className: "list-group-item"}, "Up to 100 Users"), 
                    React.DOM.li({className: "list-group-item"}, "Dedicated Happinness Officer"), 
                    React.DOM.li({className: "list-group-item"}, "Improved Territory Planning"), 
                    React.DOM.li({className: "list-group-item"}, 
                      React.DOM.a({href: "javascript:", 
                         className: "btn-gradient btn btn-primary", 
                         style: {display:'block'}, 
                         onClick: this.launchCheckout}, "Upgrade")
                    )
                  )
                )
                )
                )
              )
            )
          )
        )
    )
  },

  launchCheckout: function(e) {
    plan = $(e.target).parent().parent().parent().find('.panel-heading').text()
    user = JSON.parse(localStorage.currentUser)
    user.plan = plan
    localStorage.currentUser = JSON.stringify(user)
    console.log('log checkout')
    handler.open({
      name: 'Customero',
      email:JSON.parse(localStorage.currentUser).username,
      allowRememberMe:false,
      description: 'Upgrade Today!',
      amount: 0,
      panelLabel: "Upgrade To "+plan+" Plan",
      opened: function() { },
      closed: function() { console.log("closed") }
    });
  }
})

},{}],64:[function(require,module,exports){
/** @jsx React.DOM */
var HorizantalSpinner = require('./horizantal_spinner.js.min.js')
var LoadingSpinner = require('./loading_spinner.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    loading  = true
    if(this.props.prospect.company)
      if(this.props.prospect.company.email_pattern)
        loading  = false
    if(!this.props.prospect.company_name.length)
      loading = false
    return { 
      prospect: this.props.prospect,
      checked: false,
      initialLoading: loading,
      loading: loading,
      editMode: false,
      mouseOver: false
    }
  },

  mouseEnter: function() {
    this.setState({mouseOver: true})
  },

  mouseLeave: function() {
    this.setState({mouseOver: false})
  },

  clickCheck: function(e) {
    e.stopPropagation()
    domNode = this.getDOMNode()
    //isChecked = $($(domNode).find('input[type="checkbox"]')[0]).prop('checked')
    isChecked = $($(domNode).find('input[type="checkbox"]')[0]).prop('checked')
    $($(this.getDOMNode()).find('input[type="checkbox"]')[0]).click()
    //console.log(isChecked)
    this.setState({checked: isChecked})
    this.props.checkboxAction(isChecked, this.state.prospect.objectId)
  },

  rowClick: function() {
    $($(this.getDOMNode()).find('input[type="checkbox"]')[0]).click()
  },

  keyboardClick: function() {
    $($('.keySelect').find('input[type="checkbox"]')[0]).click()
  },

  componentDidUpdate: function() {
    //
  },

  _make_email: function(name, pattern) {
    name = name.trim()
    vars = {
      first_name: _.first(name.split(' ')),
      last_name: _.last(name.split(' ')),
      first_initial: _.first(name.split(' '))[0],
      last_initial: _.last(name.split(' '))[0],
      domain: prospect.company.domain
    }
    pattern = (pattern[0]) ? pattern[0].pattern : ""
    prospect_email = Mustache.render(pattern, vars).toLowerCase()
    //console.debug('PROSPECT EMAIL')
    //console.debug(prospect_email)
    return ReadOnlyForm({icon: "envelope", value: prospect_email})
  },

  realtimeCompanyInfo: function() {
    var _this = this;
    channel.bind(this.state.prospect.company_name.replace(' ','-'), function(data) {
      _prospect = _this.state.prospect; _prospect.company = data.company;
      _this.setState({prospect: _prospect})
      console.log(data.company)
      console.log('no listening for email')
      if(_prospect.company.email_pattern){
         _this.setState({loading: false}) 
      } else {
        console.log('binding for email pattern')
        console.log(data.company.domain)
        _this.realtimeEmailPattern(data.company.domain)
      }
    });
  },

  realtimeEmailPattern: function(domain) {
    var _this = this;
    channel.bind(domain, function(data) {
      // add email pattern
      console.log('got email pattern')
      console.log(data)
      console.log(_this.state.prospect)
      _prospect = _this.state.prospect
      if(_prospect.company)
        _prospect.company.email_pattern = data.email_pattern
      else
        _prospect.company= {'email_pattern': data.email_pattern}

      _this.setState({prospect: prospect})
      _this.setState({loading: false})
    })
  },

  componentDidMount: function() { 
    //TODO - start if loading is true 
    //if(this.state.loading){
      if(this.state.prospect.company)
        this.realtimeEmailPattern(this.state.prospect.company.domain)
      else
        this.realtimeCompanyInfo(this.state.prospect.company_name)
    //}
  },

  _keyboardShortcuts: function() {
    keyboardSelected = {borderLeft:'7px solid rgba(0,0,0,0)'}
    thissss = this
    if(this.props.keyboardSelected) {
      keyboardSelected = {borderLeft:'7px solid #0096ff !important'}
      Mousetrap.unbind('x')
      Mousetrap.bind('x', function() { 
        thissss.keyboardClick()
        if(thissss.state.checked)
          console.log("lmao")
      });
    }
  },

  render: function() {
    prospect = this.state.prospect
    if(this.props.masterCheckboxChecked && this.state.checked)
      checked = true
    else if(this.props.alreadyChecked)
      checked = true
    else if(this.state.checked)
      checked = true
    else if(this.props.masterCheckboxChecked || this.state.checked)
      checked = true
    else
      checked = false

    checked        = this.state.checked || this.props.alreadyChecked
    color = (checked) ? {backgroundColor: '#eef8ff'} : {}
    infoColor = (checked) ? {backgroundColor: '#eef8ff',paddingBottom:2} : {paddingBottom:2}
    checkboxColor = (checked) ? {backgroundColor: '#eef8ff',verticalAlign:'middle'} : {verticalAlign:'middle'}
    company = (prospect.company) ? prospect.company : {}
    prospect_email = ReadOnlyForm({disabled: true, icon: "envelope", value: "No Email Found"})
    if(company.email_pattern)
      if(company.email_pattern.length)
        prospect_email = this._make_email(prospect.name, company.email_pattern)

    //console.log(prospect.name)
    if(prospect.name == "LinkedIn Member" || _.last(prospect.name) == ".")
      prospect_email = ReadOnlyForm({disabled: true, icon: "envelope", 
                                     value: "Ambiguous Name"})
    prospect_email = (this.state.loading) ? LoadingLabel(null) : prospect_email
    if(!this.props.prospect.company_name.length)
        prospect_email = ""

    if(company.phone && company.phone != "null")
      phone = React.DOM.div({style: {display:'block',paddingTop:2}}, ReadOnlyForm({icon: "phone", value: company.phone})) 
    else 
      phone = ""

    company_size   = (this.state.loading) ? LoadingLabel(null) : ""
    if(company.headcount){ 
      company_size = prospect.company.headcount+" employees" 
    }

    if(company.address)
      city = (company.address) ? company.address.normalizedLocation : prospect.locale
    else if(prospect.locale != "" && prospect.locale)
      city = prospect.locale
    else if(_.isEqual(company, {}))
      city = LoadingLabel(null)
    else
      city = ""

    company_url = (company.domain) ? ShinyButton({icon: "globe", link: "http://"+company.domain}) : ""
    position    = (prospect.title) ? prospect.title.trim() : ""

    prospect_company_name = prospect.company_name
    prospect_name = prospect.name
    if(!this.state.prospect.loading){
      if(typeof(prospect.company_name) == "undefined" || prospect.company_name == "" || prospect.company_name == "not_found")
        prospect_company_name = UserUpdateForm({updateProspect: this.updateProspect, var: "company_name", prospect: this.state.prospect, formText: "Enter Company Name."}) 
      if(typeof(prospect.name) == "undefined" || prospect.name == "LinkedIn Member")
        prospect_name = UserUpdateForm({updateProspect: this.updateProspect, var: "name", formText: "Enter Full Name."}) 
      if(typeof(position) == "undefined" || position == "")
        position = UserUpdateForm({updateProspect: this.updateProspect, var: "pos", prospect: this.state.prospect, formText: "Enter Title."}) 
    }
    if(this.state.editMode){
        pcn = prospect_company_name; pn = prospect_name; pos = position;
        pcn = (pcn != "" && pcn) ? pcn : "Enter Company Name."
        pn  = (pn != "" && pn) ? pn : "Enter Full Name."
        pos = (pos != "" && pos) ? pos : "Enter Title."
        prospect_company_name = UserUpdateForm({updateProspect: this.updateProspect, var: "company_name", prospect: this.state.prospect, value: pcn, single: 1}) 
        prospect_name = UserUpdateForm({updateProspect: this.updateProspect, var: "name", value: pn, single: 1}) 
        position = UserUpdateForm({updateProspect: this.updateProspect, var: "pos", prospect: this.state.prospect, value: pos, single: 1}) 
    }
    if(!this.props.prospect.company_name.length)
        prospect_company_name = UserUpdateForm({updateProspect: this.updateProspect, var: "company_name", prospect: this.state.prospect, formText: "Enter Company Name"}) 

    liProfileSimilars = (prospect.linkedin_url) ? React.DOM.a({onClick: this.openSimilars, style: {marginLeft:5, float:'right'}, href: "javascript:", className: "btn btn-xs btn-primary btn-gradient similar_link"}, " ", React.DOM.i({className: "fa fa-copy", style: {fontWeight:'bold'}})) : ""
    
    if(typeof(prospect_name) == "string")
      if(prospect_name.indexOf(".") != -1 || prospect_name == "LinkedIn Member")
        prospect_name = React.DOM.span(null, prospect_name, React.DOM.button({className: "btn btn-xs btn-default", style: {marginLeft:5,marginTop:-4,width:25,fontSize:11,lineHeight:1}, onClick: this.searchProspect}, " ", React.DOM.i({className: "fa fa-search"})))

    optionsMenu = React.DOM.div({style: {fontSize:10, cursor:'pointer',height:20,marginTop:-20}}, 
            React.DOM.a({className: "text-muted", onClick: this.toggleEditMode}, 
              React.DOM.i({className: (this.state.editMode) ? "fa fa-check" : "fa fa-pencil"})
            ), 
            React.DOM.a({className: "text-muted", onClick: this.searchProspect, style: {marginTop:5}}, 
              React.DOM.i({className: "fa fa-search"})
            ), 
            React.DOM.a({className: "text-muted", onClick: this.archiveProspects, 
              style: {marginTop:5}}, 
              React.DOM.i({className: "fa fa-archive"})
            )
            )
          
    keyboardSelected = {borderLeft:'7px solid rgba(0,0,0,0)'}
            //keyboardSelected = {}
    //
    if(this.props.keyboardSelected) {
      keyboardSelected = {borderLeft:'7px solid #0096ff !important'}
    }
    

    return (
      React.DOM.tr({className: "prospects-tr", 
          onClick: this.rowClick, 
          onMouseEnter: this.mouseEnter, 
          onMouseLeave: this.mouseLeave, 
          style: keyboardSelected}, 
          React.DOM.td({style: checkboxColor}, 
              React.DOM.input({type: "checkbox", 
                     onChange: this.clickCheck, 
                     style: {lineHeight:'normal',marginTop:-8,height:17}, 
                     checked: checked})
          ), 
          React.DOM.td({style: checkboxColor}, 
            (this.state.mouseOver) ? optionsMenu : React.DOM.div({style: {height:20}}, "   ")
          ), 
          React.DOM.td({style: checkboxColor}, 
           (this.state.loading) ? LoadingPulse(null) : "", 
           (!this.state.loading && this.state.initialLoading) ? React.DOM.i({className: "fa fa-check-circle ", style: {color:'rgb(0, 122, 265)',paddingLeft:6,}}) : ""
          ), 
          React.DOM.td({style: color, className: "fixed-data-column"}, 
            React.DOM.span({style: {fontWeight:'bold'}}, prospect_name), 
            React.DOM.h6({style: {fontWeight:'400',margin:'0px'}}, " ", position, " ")
          ), 
          React.DOM.td({style: color, className: "fixed-data-column"}, 
            React.DOM.span({style: {fontWeight:'bold'}}, " ", prospect_company_name, " "), 
            React.DOM.h6({style: {fontWeight:'400',margin:'0px'}, className: "company-size"}, 
            company_size
            ), 
            React.DOM.h6({style: {fontWeight:'400',margin:'0px',display:'none',fontStyle:'italic'}, 
                className: "company-size"}, 
              (prospect.industry) ? prospect.industry : ""
            )
          ), 

          React.DOM.td({style: color}, 
            React.DOM.h6({style: {margin:'0px'}}, city)), 
          React.DOM.td({style: infoColor}, " ", prospect_email, " ", phone, " "), 
          React.DOM.td({style: color}, 
            React.DOM.div({style: {width:92,paddingTop:5,height:5}}, 
              React.DOM.a({href: "javascript:", 
                onClick: this.openLinkedinProfile, 
                className: "btn btn-xs btn-primary btn-gradient linkedin_link", 
                style: {float:'right',marginLeft:5}}, 
                React.DOM.i({className: "fa fa-linkedin-square"})), 
              "   ", 
              liProfileSimilars, 
              company_url
            )
          )
        )
    );
  },

  searchProspect: function(e) {
    e.preventDefault()
    e.stopPropagation()
    url = "http://www.google.com/#q="
    prospect = this.state.prospect
    name = (prospect.name != "LinkedIn Member") ? prospect.name : ""
    args = '-inurl:"/dir/" -inurl:"/find/" -inurl:"/updates"'
    if(name == "" && prospect.company_name != "not_found")
      linkedin = '"at '+prospect.company_name+'" site:linkedin.com '+args
    else
      linkedin = " site:linkedin.com/in/ OR site:linkedin.com/pub/ -site:linkedin.com/pub/dir/"
    window.open(url+name+" "+prospect.company_name+" "+prospect.title+linkedin)
  },

  archiveProspects: function() {
    console.log(this.getDOMNode())
    //$(this.getDOMNode()).click()
    this.props.archiveProspects([this.state.prospect.objectId])
  },

  toggleEditMode: function(e) {
    e.stopPropagation()
    this.setState({editMode: !this.state.editMode})
  },

  openTest: function() {
    e.stopPropagation()
  },

  openLinkedinProfile: function(e) {
    window.open(this.state.prospect.linkedin_url)
    e.stopPropagation()
  },

  emailInputClick: function(e) {e.stopPropagation() },

  openSimilars: function(e) {
    // TODO - move to backend
    console.log('similars')
    if(this.state.prospect.linkedin_url.indexOf('profile') != -1){
      urlargs = this.state.prospect.linkedin_url.split('?')[1].split('&')
      args = []
      for(i=0;i< urlargs.length; i++)
        args.push(urlargs[i].split('='))
      args = _.object(args)
    }
    window.open("https://www.linkedin.com/vsearch/p?pivotType=sim&pid="+args.id)
    e.stopPropagation()
  },

  deleteProspect: function() {
    this.props.deleteProspect(this.state.prospect.objectId, 'Prospect')
  },
  
  updateProspect: function(prop, value) {
    prospect = this.state.prospect
    prospect[prop] = value
    this.setState({prospect: prospect})
  },
  
  refresh: function(e) {
    e.preventDefault()
    e.stopPropagation()
    prospect = this.state.prospect
    console.log(prospect)

    $.ajax({
      //url:'https://nameless-retreat-3525.herokuapp.com/profile_detail',
      url:'http://127.0.0.1:5000/profile_detail',
      type:'GET',
      dataType:'json',
      data: prospect,
      //headers:appConfig.headers,
      success: function(res) { console.log(res)},
      error: function(err) { console.log(err.responseText) }
    })
  },
});

var UserUpdateForm = React.createClass({displayName: 'UserUpdateForm',
  getInitialState: function() {
    return {
      submitted: false,
      value: this.props.value
    }
  },

  formClick: function(e) { e.stopPropagation() },

  submitForm: function(e) {
    e.preventDefault()
    e.stopPropagation()
    this.props.updateProspect(this.props.var, $(e.target).find('input').val())
    this.setState({submitted: true})
    prospect = this.props.prospect
    prospect[this.props.var] = $(e.target).find('input').val()

    // persist
    data = {}
    varr = this.props.var
    val = $(e.target).find('input').val()
    data[varr] = val
    objectId = this.state.prospect.objectId

    $.ajax({
      //url:'https://nameless-retreat-3525.herokuapp.com/profile_detail',
      url:'http://127.0.0.1:5000/profile_detail',
      data: prospect,
      //headers:appConfig.headers,
      success: function(res) { console.log(res)},
      error: function(err) { console.log(err.responseText) }
    })

    /*
    $.ajax({
      url:'https://api.parse.com/1/classes/Prospect/'+objectId,
      type: 'PUT',
      data: JSON.stringify(data),
      headers: appConfig.headers,
      success: function(res) { console.log(res) 
        // sent current prospect state as data to 
        $.ajax({
          url:'https://nameless-retreat-3525.herokuapp.com/profile_detail',
          data: prospect,
          headers:appConfig.headers,
          success: function(res) { console.log(res)},
          error: function(err) { console.log(err.responseText) }
        })
      },
      error: function(err) { console.log(err.responseText) }
    })
    */
  },

  handleChange: function(event) {
    console.log(event.target.value)
    this.setState({value: event.target.value});
  },

  render: function() {
    //"Enter Website."
    btn = (this.state.submitted) ? "btn btn-xs btn-success" : "btn btn-xs btn-default"
    single = {display:'inline', width:22, marginLeft:5}
    single.display = (this.props.single) ? 'none' : 'inline'
    input = {width:'100%', display:'inline', height:24, marginBottom:6}
    input.width = (this.props.single) ? '100%' : '70%'
    return (
      React.DOM.form({onClick: this.formClick, onSubmit: this.submitForm}, 
        React.DOM.input({style: input, 
          type: "text", className: "form-control input-sm", 
          disabled: this.state.submitted, 
          onChange: this.handleChange, 
          value: this.state.value, 
          placeholder: this.props.formText}), 
        React.DOM.button({type: "submit", className: btn, 
          style: single}, 
          React.DOM.i({className: "fa fa-check"}))
      )
    )
  },

  profileSearch: function(e) {
    e.preventDefault()
    url = "http://www.google.com/#q="
    prospect = this.state.prospect
    name = (prospect.name != "LinkedIn Member") ? prospect.name : ""
    args = '-inurl:"/dir/" -inurl:"/find/" -inurl:"/updates"'
    if(name == "" && prospect.company_name != "not_found")
      linkedin = '"at '+prospect.company_name+'" site:linkedin.com '+args
    else
      linkedin = " site:linkedin.com/in/ OR site:linkedin.com/pub/ -site:linkedin.com/pub/dir/"
    window.open(url+name+" "+prospect.company_name+" "+prospect.pos+linkedin)
  },

  websiteSearch: function(e) {
    e.preventDefault()
    url = "http://www.google.com/#q="
    window.open(url+this.state.prospect.company_name+" site:linkedin.com/company")
  },

  _make_email: function(name, pattern) {
    name = name.trim()
    vars = {
      first_name: _.first(name.split(' ')),
      last_name: _.last(name.split(' ')),
      first_initial: _.first(name.split(' '))[0],
      last_initial: _.last(name.split(' '))[0],
      domain: prospect.company.domain
    }
    pattern = (pattern) ? pattern[0].pattern : ""
    prospect_email = Mustache.render(pattern, vars).toLowerCase()
    //console.debug('PROSPECT EMAIL')
    //console.debug(prospect_email)
    return ReadOnlyForm({icon: "envelope", value: prospect_email})

    if(prospect_email) {
        prospect_email = (prospect_email) ? prospect_email.toLowerCase() : ""
        prospect_email = React.DOM.input({onClick: this.emailInputClick, type: "text", value: prospect_email, className: "form-control form-sm", style: {fontSize:12, width:160, height:22, marginTop: 0}})
        prospect_email = React.DOM.div({className: "input-group input-group-xs"}, 
          React.DOM.span({className: "input-group-addon", id: "sizing-addon3", style: {paddingTop:2,paddingBottom:2}}, 
            React.DOM.i({className: "fa fa-envelope"})
          ), 
          prospect_email
        )
    }
    return email
  },
})

var ReadOnlyForm = React.createClass({displayName: 'ReadOnlyForm',
  render: function() {
    style = {fontSize:12, width:'70%', height:22, marginTop: 0, zIndex:1,cursor:'default'}

    style.fontStyle = (this.props.disabled) ? 'italic' : ''
    return (
      React.DOM.div({className: "input-group input-group-xs", style: {display:'inline-block'}}, 
        React.DOM.span({className: "input-group-addon", id: "sizing-addon3", 
          style: {paddingTop:2,paddingBottom:2,display:'inline-block',
                  height:22,width:37,float:'left',marginTop:0}}, 
          React.DOM.i({className: "fa fa-"+this.props.icon})
        ), 
          React.DOM.input({disabled: this.props.disabled, onClick: this.emailInputClick, type: "text", value: this.props.value, className: "form-control form-sm", style: style})
      )
    )
  },
  emailInputClick: function(e) {
    e.stopPropagation()
  }
})

var LoadingLabel = React.createClass({displayName: 'LoadingLabel',
  render: function() {
    return (
        React.DOM.label({className: "label label-primary", style: {backgroundColor: 'rgb(0, 122, 265)'}}, "Loading...")
    )
  }   
})

var WarningLabel = React.createClass({displayName: 'WarningLabel',
  render: function() {
    return (
        React.DOM.label({className: "label label-warning", style: {display:'block',width:'90%'}}, "Warning...")
    )
  }   
})

var ShinyButton = React.createClass({displayName: 'ShinyButton',
  openLink: function(e) {
    e.stopPropagation()
    window.open(this.props.link)
  },

  render: function() {
    return (
      React.DOM.a({href: "javascript:", 
         onClick: this.openLink, 
         className: "btn btn-xs btn-primary btn-gradient", 
         style: {marginLeft:-5, float:'right'}}, 
       React.DOM.i({className: "fa fa-globe"})
      )
    )
  }
})

var LoadingPulse = React.createClass({displayName: 'LoadingPulse',
  render: function() {
    return (
      React.DOM.div({className: "profile-loading", style: {marginTop:0}}, 
        React.DOM.div({className: "double-bounce1", style: {backgroundColor:'rgb(0, 122, 265)'}}), 
        React.DOM.div({className: "double-bounce2", style: {backgroundColor:'rgb(0, 122, 265)'}})
      )
    )
  }
})

},{"./horizantal_spinner.js.min.js":27,"./loading_spinner.js.min.js":32}],65:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  checkboxAction: function(e) {
    checkboxVal = $(e.target).is(':checked')
    checkboxes = _.rest($('body').find('input[type="checkbox"]'))
    console.log(checkboxes)
    if(checkboxVal){
      _.map(checkboxes, function(checkbox){
        if(!$(checkbox).prop('checked'))
          $(checkbox).click()
      })
      
    } else {
      _.map(checkboxes, function(checkbox){
        if($(checkbox).prop('checked'))
          $(checkbox).click()
      })
    }
  },

  componentDidMount: function() {

  },

  render: function() {
    return (
            React.DOM.tr(null, 
              React.DOM.th({style: {paddingLeft:11}}, 
                React.DOM.input({type: "checkbox", onChange: this.checkboxAction})
              ), 
              React.DOM.th({style: {width:20}}), 
              React.DOM.th(null), 
              React.DOM.th(null, "Name"), 
              React.DOM.th(null, "Company"), 
              React.DOM.th({style: {width:'170px'}}, "City"), 
              React.DOM.th({style: {width:300}}, "Email"), 
              React.DOM.th(null, " ")
            )
    );
  }
});

},{}],66:[function(require,module,exports){
/** @jsx React.DOM */
//TODO - move list
//TODO - copy list
//TODO - create new list

module.exports = React.createClass({displayName: 'exports',
  //SideMenuListOption
  getInitialState: function() {
    return {
      count: '~',
    }
  },


  componentDidMount: function() {
  },

  changeList: function() {
    this.props.changeList(this.props.list.name, this.props.list.objectId)
  },

  getIconType: function(iconType) {
    icon = ""
    if(iconType == "archive"){
      icon = React.DOM.i({className: "fa fa-archive", style: {float:'left',lineHeight:1.5,marginRight:5}})
    } else if(iconType == "users"){
      icon = React.DOM.i({className: "fa fa-user", style: {float:'left',lineHeight:1.5,marginRight:5}})
    } else if(iconType == "wifi"){
      icon = React.DOM.i({className: "fa fa-wifi", style: {float:'left',lineHeight:1.5,marginRight:5}})
    } else if(iconType == "cloudDownload"){
      icon = React.DOM.i({className: "fa fa-cloud-download", style: {float:'left',lineHeight:1.5,marginRight:5}})
    }
    return icon
  },

  render: function() {
    listName = this.props.list.name
    propsCount = this.props.count
    count = (typeof(propsCount)== "undefined") ? this.state.count : propsCount

    icon = ""
    listStyle=(icon == "") ? "list-name" : "icon-list-name"
    if(this.props.iconType == "users")
      listStyle = "all-list-name" 
    count = React.DOM.div({className: "badge badge-default cnt-bg"}, this.props.list.count)
    count = (this.props.hideCount) ? "" : count
    return (
      React.DOM.button({type: "button", 
              onClick: this.changeList, 
              className: "list-names btn btn-default"}, 
              icon, "   ", React.DOM.span({className: listStyle}, listName), " ", count
      )
    );
  }
});


},{}],67:[function(require,module,exports){
module.exports = function () {
  return {"0":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/8353a3fc05724cbe45e8c23b347a39e7_0994d458faff1d0b71f0f8e534299335a5765ba4a672ed817669729f6a0a1e9d","1":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/107fc2691bb8b3333ba78a18600fa561_9a832b2e27c2aa8ce6ed12c62fb665939e4de38f30ec9bebd92f813ea677f8c3","2":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/4432a5df98c5ead32ca3ec898e175c90_f93ef0a7ddba9ac960c6a15941a69a124a5d5961fde34455cb7cee6c97f712ba","3":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/229580b716606a4eb2142b1eaaca10e7_2398d5050e191d15ff5cf9eb68cc683690c06d3949345dbf790394437a465c08","4":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/499d8a863d7872d6e239512124af9ddc_771182dc7b6c0801de6e571deed89b437ab122372b547e1f7d8dacae9cb17275","5":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/a9e97a6445a8ac187561310b16b4bbd8_96ce9289fd8e6f2a6bf262b4baf548367ad7f53aac9a9ec1157020465de07e67","6":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/35af508daa4a580806961236bfb743a1_1a4afe2656f8d95e3717751f96a0c6ce6c5b1d25920f4d45e5cfe9bba05de0c8","7":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/a1003503ef5e2254e6694eebbd2b4499_a8cd2caefe691476e3f02351369dc2c07c1a3d6ce0f87b187f58fdf4b20292c5","8":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/01dcb5278f55225b7e9c0cff6aa3d6e6_b40f92b9c5ef3b8c81d478bb70b7a094f076ed59b7d36d7a6401f0fd9d95eacf","9":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/61d79e3c25105099f73668c625ea361c_1d7c1255968258c03d0564e141284b4bddbd2db52091cf8d75cb384b23949390","10":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/ca808450a6222c9b09d5b86924a08fbb_f90e02c1e981e5f6caf8af76fefef7653d0a451da51ba5a22ac0f265874bc6cb","11":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/97de93a99b8a9159dede2b9ff17c7887_3e90df8e7894c0c12963abf2fadb205e44365f58b537f15b677a4a7e9c557bcd","12":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/9bf8404d673c9d6178f23548caa4c9a4_46606dba9df4d10cf282fa7add23e8a87b7f976d0e3a153fad0ff181e1be4e17","13":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/7f3a4754a634fc1e39090c5dd6c46808_42d3294b34c4ac9c6f99f66bc3ad9a195d20e98b09c7579fe341d0cf42f9c93f","14":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/b4bebbfbfbe47e50f435b4c2efe0db0f_181a3119f12fd03b6bb517352c636508497bec61f9078b0e281515efd192b345","15":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/ec1f6190e2b9a80a3f7cf101649ccc63_0026017f4380585a2e540f05936a6f58fe725fe7e8e0378aae98039628c4bdf2","16":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/9dd921f41fa8d4ab29bcc1c45348b5a2_158df8a22c1f1570e8a2c17ab5e30169248030593665fbd8792f5f2f01516290","17":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/b9786c9b56c94caa13e74d59b9a9da48_1f195fbcdf95c0d2618d571e0192ff1be2e4921d88aed8b7b9fd9e1444749271","18":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/aa8577f878858f318858aced5abd037f_cb926a07d0e468660e3569279cc1354aa7243cdc951f970325273993c89e9ee7","19":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c11b322d8a8007037ee3e3242b260930_2a63c13b315a38b069f38da657b189aad6c7af5941a19859111dfb3c70c94b41","20":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/19b6c3989a808be845718d8af24352ff_a8e72abb2b5772706ac1c79e5cbaf59b3c2f20efb0aca9b93d04ae8a24920967","21":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/f4120970a686a56b4759585808177cc7_8e175e495b1de922ccd9a92a5de97b95433444aca422b3e632c2ea4ed48d3bc9","22":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/aee7e40b2dd4c4c9961323d98249c826_c1c387c714e89d5dfccf06d3fe0fed332992eff877cdbd60bc4e94e7a2ed38ff","23":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/66d18bafff4f9b8d077c107bb73b2912_f8055289eae58fad00cc0f6727b2b5cf0f72b837963351b7ca6250ba4e2632a1","24":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/2da8546c3b6a99b191249ae69207e31a_db86681331d0d2b9850e5596ce7711ac386f4e1469c526934267978af3498338","25":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/5617f7787cdf0176e54c4f13e9ccc54e_da7cc169f46585de72acf5f705cd34a52c688a40dc8aa72ea720d556a7022f72","26":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/f7e2712aa8cfab88c55d1f6c78ef2e45_5c895ca06f40e30369e07b19c64b7bf1fe5be0977e5bbfc0c2212b73ea6e6512","27":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/29ab72c2b97b25c4e3e1c280e3264f80_069b94caad3b14e2bb3b2012a51d94ed8e476f0a3d9a368aac36db9d716a12af","28":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/ee17a7d90c8065a3abcd0a6720b52e66_3b9938c2693e142ba37065de24dabec556a192add4b84b4f29785cea3b74853f","29":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/16f61ebf1810ac333f7c936ce711b28a_35d43f3d1c762b21d629634b4584d0cd95aecdfd9a3087f24a9eb729d134b769","30":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/e318ccc5121cfeb3b99c21d055e6ece9_edc606d4bcd3d76f8e45da96d9dbd651bf0c067a7ca159e1073e3b44b03530c9","31":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/df9c90f2b93a9e488d94fe52725bd798_3b0e3396d9dea866960d8ce6f67af10c8809f154b6831fc278b8ed34390a9f27","32":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/6eee357d121c814a97b6362c4e55526a_cbff4ac439c2054813dea8da8b8f1ec3b5e0c644acf0dc2ae625741e97f0bea0","33":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/560aed1bee8e220f0980190dedb7add6_9ad2de7c6ebfdd724f2a17c85efd5192f8393a477dddf0a0c8c9260e17d5a515","34":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/850f1242ddd6539ad8b27f69908c7f9e_08ffecd2b6d184e7d70ab70abbbbabe7132269250c93dbbdcba7f22e86f0692e","35":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/075c06c481eea429f6cc816697fcbbf8_c55b99be050bdcb1f32c9578cb8e17f6f4d6f200c1f37f528c24fee65a26182a","36":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/028b3110aa60554e7434f1a2473229cf_d15e1c7f00c82755e144773d46bb4e0e964fcfa425a254ca05ac1313fcea3bae","37":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c3719f85d24bafef64eada64e735ca73_025880c51ff42bd3ff79ba35d456d8cb14b6fbc7ee17ba3b98612e71aa1d74b9","38":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/22356ab6ae4467c44a074a4134bad937_a9909c37e6e23b4343ce19582c9118cfb3748b8977f1db8230aa992d640f1217","39":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/2132e5a2fcd89a54e7c42c5fa0b8ef77_ff0dc46511b150a4b0af9cdf866af2e06ce898d7119b7ab21350e0b3304d8065","40":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/45aaa73b693aeec414b34fd44262ef8f_51c22532abe0b615f0e6e3c0e91cb1a9bca41a6f6c0ec6f33c3693d128fd1755","41":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/57bc2d1a2ab692e38284f3550f58b381_03bd441172001e3c2e5084f3390ee0ca0327b502b0c1dc794c8c8ac2b3d2130e","42":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/4745ad07807ccad97e0726fc7ba18170_48911a727474c0398c3fc701880d623faedc592f16677310f8e8111a25e2be37","43":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/cd1594c62a31c831d124e286b6909700_0cd9d060392c5f5d575f29a8930c55c69a54501c1d7636929682c38e4e069d5e","44":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/1f3db7712313a3bcfe5ff4a99b67fcdf_a66bec0a43179531bce8020aaade3d85967b7c9df54ab2bdf41f12f6cd60d3ef","45":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/2643e008752dbffd17cd7e4cea30bb08_867fd9b76c5342b914bd9b285756ac10cf04e1b3ad8cb6524a2c96d7ab75c07a","46":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/d89fd2959f9efdcf70778801253a4920_97a906684f843e8ea3f3237797adc601c4d20dfcc79e7b6e756630206312fe89","47":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/d0b7922821c73bb34357b9a7bbf2267c_d63a4e4655665268ea92da08063c95f309646f9698125b318b0621487b906ca4","48":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/b76f8da9538eea9eb4d897656f4aed8b_f49ffb97513493d056f42fe316650f1fb507fc1ebe7a04ad8454fd2b58c50ea7","49":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/190285c653fe1d18db3257eeaf4be43b_60aac5615b8c09ff3cfc840eafbb0208a8dc4824d942df10637ed1dc43198896","50":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/bdee1144909768544fb2165d5e053e65_01eeb0b68fbe038b33bd0d952ce60590b2ff52c32da32bceee518652a89e8140","51":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/67f3816ffae3f72be42a7853607ff545_9b77f7ee9ed399fe77664a0c6cded309a14187ed325b7dace9b74f58d384fa70","52":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/4314b6591ccecaa3eb265e4e890021f5_135f42ac525c7160c6680d99d08463cca4f4f86b4a0a11252b26c57f7f6552e2","53":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/dc2498a2210f5c8dfc938909670ba68f_bb4edb324aeb76f4809d2f2ffef036815497400fd276f836d923e7e0999c3552","54":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/8ea2f8aecb65bcc3cec691be061822a6_c9e8cc4ff670def26a2014b4658f561bb39af755727ab31a04b66c703faa6bfc","55":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/cc6220508d6b50993e8cb49e6c072a3a_266d57d40828595dcf9964076955242cbc6d9cdc78bbc323ba39f0883c05fda8","56":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/6d200ee39f4096f49b523d98d8536b03_0e0d1927f658b14ff35a24c9d8fc693190c9f739a6d14b3638a69e901b1a494c","57":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/deaf0d4d4431d6bb2dcc6bda12575dc8_786be7e8e3573170e142d1c3974f18d6d69d4c4dd3ca06593467f2f53f831895","58":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/ebf339b29639355c01a7e1d0c9055ba3_0c2c6354af58c71eee179f772b8f9c9556111c042eddec488642205fce901f6a","59":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/adf758a8dc032239d05c2bf30a4a0edf_1de695275aaf84c5d9624872efacc21f2bb35d76907c032789f0a8a91007a751","60":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/fcfd73b6e3eb5a9e249b379a6f559fc7_7f12feeefb777c52da2c175bfc33dd19db40749b388af435f4a68c0f06b4f9ad","61":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/3c82d08bca770099bb1fcdbda21484ea_4b1b1a31571711440446327a37327cf86685307f7dd58ad26a5b564b384d54c9","62":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/da085ddf61fabfc523a6d5bc22ea305b_f198dc476413ae524e230ebcd428f4649509a64794bb12dfde0d8fc2d9cf8782","63":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/510c57ac818d053701321d16cfed8b3e_74210d99aa6597b227fe521b0c7e128b66510da6b2cfbd67f4d0d0f8be7a1c12","64":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/40122334960a5954255cca87d01ba5ae_1d6fa7ab07a15df79e4c61cec5a369e6e7dcc7e57ebfd52fd937630e056dbf32","65":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/281bc010da64604545531ca4074eda2e_91c47782e1e7e19e58d3d5da9e43c1c53505a145de4adcd22931721f951edced","66":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/1f0306ac15f2a11707fb6637b64ab5bc_bbf75d7a31aff638916b154d263b2fa1af9f3f53ef3124e5d470289b1b4dc5c4","67":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/99147b426f02ea63f52d7b9096bfba95_2af91854e89a8214667222ea871d98eb8c1ccaf4969ec129356be0fce2eeca51","68":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/ecebb17e5ca23da7f420fa357472bf3e_9dcc92e6966d688c956e1e6a0abf42499687f9e82b82a2499d56bb93a59b2bd8","69":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/aa968d512815321b5c74af48f3d53c3d_74f7b92a66f45f8e050a46f94cb675db7fc257acefed7ced6fe85a82caa93139","70":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/2451efa39cb6ee7576b41e14b907925a_f48ec903ab22812a385743625e972e76773bdbd3e323c73689f27eccaa9d90bc","71":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/6eca5c460748018fe91f919d35f1de02_2116d7e9c833021c7fb58237db1e8abd3e37a32f652e5449feb94cd287ca63cd","72":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/d233d65df2a27b4e6c177ab37f726c33_cea7dbcb7770a9798a49fce3a8d55689c6b79ad710e8f3aa0121bcabd9b0176b","73":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/0632159435e67bdd2a5ffd68471361f0_b7711b96d49bfe07ba4c6a9700618c69425c667999209ccbd7575925805b0b5b","74":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/1f6edebd5597bae7da63e7ad86214ccd_0bcc5ee18a9539043524fdad5d9cbdb527514143e755a1a05169e05e06c37941","75":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/31874c12d9df2dfd89cb6a446bdc4042_611644e0e6bd66f29270be999af5d4aee37a5898d93dd41c46dee111f4e63fa3","76":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/95bad31c8127deef8aef7a8c0d96285f_05b558b86db9ed61bdb134e7e32e56ddea960d18067c4d44cb7b207ceb592e5b","77":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/e1a21b6a465ba8c05aec97fa7568efb5_888ab8ab424a32a58b00808ca2f716b903993a7d076b4925c52117a2467ff04b","78":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/d8c25b3ed91a8fc91f93ac56377c9dcc_72afd96cb39f5d07ea286361edb264627d1f234e871ce48371dca57bc44c7a82","79":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/95b193e0db0f8965de5c70a5b96bb071_4b587a38a5b3b5f2eb6ad37d745531e723edc07e38eb6d4cfec3a9386f65b1e8","80":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/90b3da7e62bbd996b722975a3230f0f3_b3e89ebe3a0f9d1a6508771e1108627885b5df79377b291413a35284cc506f5e","81":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/3242156353c906577e9ea40f92139719_76cb67bcb821ef4a83b4796832b15d3ab4402627534de36c3ff592ba0e0cacb0","82":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/a4beb634fb972ef9caefecf47527e345_a18d6851882d03d4370fa12c866fcd91caa907b0cd2263a722378c399fb592b5","83":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/0447cd25e4515569c3b613bc4bd88a05_c3656ddbbf5dfc84e44c3616cfad41267c8d730e00db5918ccc77573fac07d49","84":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/1e01a4ecbeb9ca46a63b745c6a2e462d_3ebbbab14df0e2db43a2948c0298ad67ded53029efe9aba6bd40b3fd99d5aa18","85":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/559c502aea7aab4a11e121743c9d7c43_69caccfee49f747e72a4768ad4274c8b6875848e9ab7b2c8517e209d36bdfb32","86":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/b27a3afa95d849b7375a304769bd3bf3_acada7bbca2083ce55ab119e88666ca0ae10a4aac448ad5d7f45edf0077897a1","87":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/de24ae6e6b531bad57c37bffcac1954d_2c15f3da3593c9526078bb80bc7faa66ec081b1ccaea231b5c259bdb827f6fd8","88":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/7375a308c764e405f92ab9d943942949_6b7b392f5694abcfbb70daf458c22369db2f9b890583e3e2d713b046cd84ec89","89":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/a1fc8b4cb5e89f1dc3ed74ec8bafc3a5_4d0efc716f3f2cb7bda689e5daa7ba5d954ee54a8f94f7755b303043970b1d99","90":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c4f7d2b628c661d1baad6ff1f4722da8_149e2b6f3ad488d10fce67144ccee6b66519d9d7f8482a1ff0c9ae627f1ddbca","91":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/09459647f3928e77752449f418a85c27_7a704f8cfaea62a1953dfd1e345eb6e3aee02114189f186f0181bff3a7e77fe6","92":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/655a7db862ccdfa162b6ea0dffa3ef1e_6eb133e705878e640a427b664656189f1ea9330285133e4a73a943a097606da6","93":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/434d82b430279d26bcdd9bd13ddec76f_5cbad7d7eb6740debc9e2e3c1b7197f861b705e6e74379307a5bc900d75250f5","94":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/142e64b0535a2b0c3bb5253c0d2266a9_6c7403cda6f8dc61eb9d2b32d37f608c34c641101d6a2f35c073907898a7e4ae","95":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/3f8790f1134f0514af3d2bbc05209060_6377e5dcdf0d232f1aa8139022b8c9280f8b4297f70efff3e0f7d52417c1eb23","96":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/220a705290eb7adbcdf052ddb2d11c99_06374d8546d5c745671d98686f1b4b0dd31d777b1c7bcdd0e6dfe63d0a23e719","97":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/51249bb6f506e42e17bf9241ef88b6b2_c1221205f854390df1d21aa05e5d0de264b1b953c659a10c18478cfd7f755efd","98":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/284c00b5ff1189d2bddf67df408edc4e_01c1917a244fcadf0bfd3933af21c684dd90ca274111248212025361d855ab39","99":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/37483ffe36725e05af0954a5d9a55a26_daf0a2f0e10c98c2b72be9c0da24b38322f0f956733a42565365ee615568ba07","100":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c6b03531fed44f96acecab26828fbe37_30393b6fa3096a74bfa51cad1cb58f7660848263f01f2f7d2e12dae3a5b1c3ed","101":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/5dc9345ee6092ca006f777b42b34e853_df13ad7c61407d1a00e261fcd5fcd93c16e1a0c1be13d0903d76a21a89cd3459","102":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/1dbef9840938d5e30563c3f844b9ebac_12fe10df66a6ee48bffe72578a6f42d340ff0b4f75d4fe65f6bed2b75841e978","103":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c3af292a916339e6c57ba0d03712a445_273c38be422269a46466d48494c513daf53b3a66440b6401c94c37f1e55070c2","104":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/b44ded0b090097528af2c4ad694c2a40_3f5ed56c662da89e1e0f3ae62a67f9e14ea2384f2985277b1cdfa6ebfe1d18c9","105":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/df8ea86906de307c52cb9cf3b2228043_312bdbd9536ec36e42d8328def8af1afcaaf3f705917a628ea4add00ba77b8b5","106":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/6846f61d6bfcf77aecd7206c6adb5be9_64e149247e52e86b671fdd2b71ac27852d54ae6eb6f4059458bdb1161f300dac","107":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/ef4a1765911453dcae8e4bdd5d3203a1_321cf3bc8710a6a19576dfe93677def4666da0b4744489c26aa44f75a753333e","108":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/dc381f9e0b6193e8be5d94595ed1c4b7_d612afde7baf43ac5daeae9e0efe42781867bc3451e3e8814253cbfc4410bb4a","109":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/9579d5dd8523c493e0590e3881e25041_106c39b7e97fdd57abb992ec7ff7c0f0b15f0f83a348e3a3698e3fcbdcdf2836","110":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/95cfda0cb7bfaac0fc789cf05c7e513e_a509049aea02886eb409c53a15e03a6cf5eb6583120267bbca75c2206027c0b1","111":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/6e05daaab9a81a2ea5348b70833bdfb6_023eb1e947686aef7764a3ce4c9683b47d2235c51a031e36b947e4398ef6906d","112":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/d29d4fcb1b25a9d424a12800869a3b65_991d563880a3345073ebb4cc3cd57778ef5cfbc3ae625cefec2ffc3b690a5aa5","113":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/983764cb5075eedbd96ec034df1374a1_a94f5a1f0c9b45b9082044ebe72774b0313a58e5a2f58d00a63827ad7d48bb62","114":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/9abafed7a919fe54046abe458a6b3140_4003c5226083b7beb7b5901c79027e3833be0aec78da9aa3fc05f0293f5bb43e","115":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/4268a231e34c78a807bd51c7d5e1064e_a9049cfd9cbbb250474c1364710dcd276e1896297b2dee37b6ffad96a882bda9","116":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/b80be54bf0fbb43ebd8a20dca4d8f6f0_544d5a34e1d959e4e7794c58503b3478de33eb4ef21e8b74839b950adda7dedd","117":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/4ce28371de65a22a241dee28128dda4d_0daec6dffe6bd726f3031d51a39728c4f88f48482ebbae6c05f758ca24dd0890","118":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c55284b8098cbaa9a1db08cbdf46bae8_6baa7acefb038acbb2fedbfdce556766c48349c5d13374347a26bd83e2acf283","119":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/dd77cf42f690e808bb9d8131b7cec48b_0b3713716d1127b36eb335737778cca3d4b7b476a99a571a11dc118e71463d2b","120":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/c657e3f25ab9ae85a99e421231a6c6a8_06deb81cfec70dbd14da6bb6471b8ee4bcc142ee08b60714af9f91683b461e6a","121":"https:\/\/d2ojpxxtu63wzl.cloudfront.net\/static\/cd4fc426707d63e4d9b8bc9205dea3fc_cb648ffe70ec0942be80f294a1a07c5e64958570265b70cfd84da78072877fe7"}
}

},{}],68:[function(require,module,exports){
(function(window, document, undefined) {

    'use strict';

    //= helpers.js

    /**
     * Constructor
     */
    var Headhesive = function (elem, options) {

        // Return if feature test fails
        if (! ('querySelector' in document && 'addEventListener' in window) ) {
            return;
        }

        // Initial state
        this.visible = false;

        // Options
        this.options = {
            offset: 300,
            classes: {
                clone:    'headhesive',
                stick:   'headhesive--stick',
                unstick: 'headhesive--unstick'
            },
            throttle: 250,
            onInit: function() {},
            onStick: function() {},
            onUnstick: function() {},
            onDestroy: function() {},
        };

        // Get elem, check if string, if not assume object passed in
        this.elem = (typeof elem === 'string') ? document.querySelector(elem) : elem;

        // Merge user options with default options
        this.options = _mergeObj(this.options, options);

        // Self init
        this.init();
    };


    /**
     * Headhesive prototype methods
     */
    Headhesive.prototype = {

        constructor: Headhesive,

        /**
         * Initialise Headhesive
         */
        init: function() {

            // Clone element
            this.clonedElem = this.elem.cloneNode(true);
            this.clonedElem.className += ' ' + this.options.classes.clone;
            document.body.insertBefore(this.clonedElem, document.body.firstChild);

            // Determin offset value
            if (typeof this.options.offset === 'number') {
                this.scrollOffset = this.options.offset;

            } else if (typeof this.options.offset === 'string') {
                this.scrollOffset = _getElemY(document.querySelector(this.options.offset));

            } else {
                throw new Error('Invalid offset: ' + this.options.offset);
            }

            // Throttled scroll
            this._throttleUpdate = _throttle(this.update.bind(this), this.options.throttle);

            window.addEventListener('scroll', this._throttleUpdate, false);
            this.options.onInit.call(this);
        },

        /**
         * Clean up DOM and remove events
         */
        destroy: function() {
            document.body.removeChild(this.clonedElem);
            window.removeEventListener('scroll', this._throttleUpdate);
            this.options.onDestroy.call(this);
        },

        /**
         * Logic for sticking element
         */
        stick: function() {
            if (!this.visible) {
                this.clonedElem.className = this.clonedElem.className.replace(new RegExp('(^|\\s)*' + this.options.classes.unstick + '(\\s|$)*', 'g'), '');
                this.clonedElem.className += ' ' + this.options.classes.stick;
                this.visible = true;
                this.options.onStick.call(this);
            }
        },

        /**
         * Logic for unsticking element
         */
        unstick: function() {
            if (this.visible) {
                this.clonedElem.className = this.clonedElem.className.replace(new RegExp('(^|\\s)*' + this.options.classes.stick + '(\\s|$)*', 'g'), '');
                this.clonedElem.className += ' ' + this.options.classes.unstick;
                this.visible = false;
                this.options.onUnstick.call(this);
            }
        },

        /**
         * Update status of elem
         */
        update: function() {
            if (_getScrollY() > this.scrollOffset) {
                this.stick();
            } else {
                this.unstick();
            }
        },

    };

    window.Headhesive = Headhesive;

}(window, document));

},{}],69:[function(require,module,exports){
/* mousetrap v1.4.6 craig.is/killing/mice */
(function(J,r,f){function s(a,b,d){a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent("on"+b,d)}function A(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);a.shiftKey||(b=b.toLowerCase());return b}return h[a.which]?h[a.which]:B[a.which]?B[a.which]:String.fromCharCode(a.which).toLowerCase()}function t(a){a=a||{};var b=!1,d;for(d in n)a[d]?b=!0:n[d]=0;b||(u=!1)}function C(a,b,d,c,e,v){var g,k,f=[],h=d.type;if(!l[a])return[];"keyup"==h&&w(a)&&(b=[a]);for(g=0;g<l[a].length;++g)if(k=
l[a][g],!(!c&&k.seq&&n[k.seq]!=k.level||h!=k.action||("keypress"!=h||d.metaKey||d.ctrlKey)&&b.sort().join(",")!==k.modifiers.sort().join(","))){var m=c&&k.seq==c&&k.level==v;(!c&&k.combo==e||m)&&l[a].splice(g,1);f.push(k)}return f}function K(a){var b=[];a.shiftKey&&b.push("shift");a.altKey&&b.push("alt");a.ctrlKey&&b.push("ctrl");a.metaKey&&b.push("meta");return b}function x(a,b,d,c){m.stopCallback(b,b.target||b.srcElement,d,c)||!1!==a(b,d)||(b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation?
b.stopPropagation():b.cancelBubble=!0)}function y(a){"number"!==typeof a.which&&(a.which=a.keyCode);var b=A(a);b&&("keyup"==a.type&&z===b?z=!1:m.handleKey(b,K(a),a))}function w(a){return"shift"==a||"ctrl"==a||"alt"==a||"meta"==a}function L(a,b,d,c){function e(b){return function(){u=b;++n[a];clearTimeout(D);D=setTimeout(t,1E3)}}function v(b){x(d,b,a);"keyup"!==c&&(z=A(b));setTimeout(t,10)}for(var g=n[a]=0;g<b.length;++g){var f=g+1===b.length?v:e(c||E(b[g+1]).action);F(b[g],f,c,a,g)}}function E(a,b){var d,
c,e,f=[];d="+"===a?["+"]:a.split("+");for(e=0;e<d.length;++e)c=d[e],G[c]&&(c=G[c]),b&&"keypress"!=b&&H[c]&&(c=H[c],f.push("shift")),w(c)&&f.push(c);d=c;e=b;if(!e){if(!p){p={};for(var g in h)95<g&&112>g||h.hasOwnProperty(g)&&(p[h[g]]=g)}e=p[d]?"keydown":"keypress"}"keypress"==e&&f.length&&(e="keydown");return{key:c,modifiers:f,action:e}}function F(a,b,d,c,e){q[a+":"+d]=b;a=a.replace(/\s+/g," ");var f=a.split(" ");1<f.length?L(a,f,b,d):(d=E(a,d),l[d.key]=l[d.key]||[],C(d.key,d.modifiers,{type:d.action},
c,a,e),l[d.key][c?"unshift":"push"]({callback:b,modifiers:d.modifiers,action:d.action,seq:c,level:e,combo:a}))}var h={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},B={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},H={"~":"`","!":"1",
"@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},G={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},p,l={},q={},n={},D,z=!1,I=!1,u=!1;for(f=1;20>f;++f)h[111+f]="f"+f;for(f=0;9>=f;++f)h[f+96]=f;s(r,"keypress",y);s(r,"keydown",y);s(r,"keyup",y);var m={bind:function(a,b,d){a=a instanceof Array?a:[a];for(var c=0;c<a.length;++c)F(a[c],b,d);return this},
unbind:function(a,b){return m.bind(a,function(){},b)},trigger:function(a,b){if(q[a+":"+b])q[a+":"+b]({},a);return this},reset:function(){l={};q={};return this},stopCallback:function(a,b){return-1<(" "+b.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.isContentEditable},handleKey:function(a,b,d){var c=C(a,b,d),e;b={};var f=0,g=!1;for(e=0;e<c.length;++e)c[e].seq&&(f=Math.max(f,c[e].level));for(e=0;e<c.length;++e)c[e].seq?c[e].level==f&&(g=!0,
b[c[e].seq]=1,x(c[e].callback,d,c[e].combo,c[e].seq)):g||x(c[e].callback,d,c[e].combo);c="keypress"==d.type&&I;d.type!=u||w(a)||c||t(b);I=g&&"keydown"==d.type}};J.Mousetrap=m;"function"===typeof define&&define.amd&&define(m)})(window,document);

},{}]},{},[2])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvYXBwLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY2FtcGFpZ25fYWN0aXZpdHlfdmlldy5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL2NhbXBhaWduX2RldGFpbC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL2NhbXBhaWduX2ZvbGxvd3VwX2ZlZWQuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9jYW1wYWlnbl9yZXBvcnQuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9jYW1wYWlnbl9zZW50X2VtYWlsLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY2FtcGFpZ25zLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY29tcGFueV9kZXRhaWwuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9jb21wYW55X3NpZ25hbF9jYXJkLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY3JlYXRlX2NhbXBhaWduLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY3JlYXRlX2NvbXBhbnlfcHJvZmlsZV9tb2RhbC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL2NyZWF0ZV9mdW5kaW5nX3NpZ25hbF9tb2RhbC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL2NyZWF0ZV9oaXJpbmdfc2lnbmFsX21vZGFsLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY3JlYXRlX2xpc3RfbW9kYWwuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9jcmVhdGVfbWluaW5nX2pvYl9tb2RhbC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL2NyZWF0ZV9wcm9zcGVjdF9wcm9maWxlX21vZGFsLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY3JlYXRlX3RlbXBsYXRlLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY3JlYXRlX3RlcnJpdG9yeV9zdHJhdGVneV9tb2RhbC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL2RhdGFfcm93LmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvZGVsZXRlX2xpc3RfbW9kYWwuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9lZGl0X3RlbXBsYXRlLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvZW1haWwuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9mb2xsb3d1cF9mZWVkLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvZm9sbG93dXBfdGltZWxpbmUuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9mcmVlX3RyaWFsLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvaG9yaXphbnRhbF9zcGlubmVyLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvbGFuZGluZ19wYWdlLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvbGFuZGluZ19wYWdlX2NvbmNlcHQuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9sYW5kaW5nX3BhZ2VfZmVhdHVyZXMuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9sYW5kaW5nX3BhZ2Vfc2VydmljZXMuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9sb2FkaW5nX3NwaW5uZXIuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9sb2dpbi5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL21hcmtldGluZ19mb290ZXIuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9tZXNzZW5nZXIuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9taW5pbmdfam9iLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvbWluaW5nX2pvYl9jYWxlbmRhci5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL21pbmluZ19qb2JfZGV0YWlsLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvbWluaW5nX2pvYl9sb2FkaW5nLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvcGFuZWxfZm9vdGluZy5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3Blb3BsZV9zaWduYWxfY2FyZC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3ByaWNpbmcuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9wcm9zcGVjdHMuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9yZW5hbWVfbGlzdF9tb2RhbC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NjaGVkdWxlLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvc2VuZF9lbWFpbF9tb2RhbC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NlbnRfbWFpbC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NpZGVfbWVudV91c2VyX3Byb3NwZWN0cy5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NpZ25hbF9hbmFseXRpY3MuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9zaWduYWxfYXBwcy5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NpZ25hbF9jYWxlbmRhci5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NpZ25hbF9kZXRhaWwuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy9zaWduYWxfbG9hZGluZy5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NpZ25hbF9wcm9maWxlLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvc2lnbmFscy5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NpZ251cC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3NwaW5uZXIuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy90ZW1wbGF0ZXMuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy90ZW1wbGF0ZXNfbWVudS5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3RlcnJpdG9yeV9kZXRhaWwuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy90ZXJyaXRvcnlfb3ZlcnZpZXcuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy90aW1lbGluZV9kYXlfZWxlbWVudC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3VwZ3JhZGVfcGxhbl9tb2RhbC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3VzZXJfcHJvc3BlY3QuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvY29tcG9uZW50cy91c2VyX3Byb3NwZWN0X2hlYWRlci5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3VzZXJfc2lkZV9tZW51X2xpc3QuanMubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvbGliL2RhdGEubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvbGliL2hlYWRoZXNpdmUubWluLmpzIiwiL1VzZXJzL3JvYmluL1Byb2plY3RzL3Byb3NwZWN0ZXIvcHJvc3BlY3Rlci1wYXJzZS9kZXYvYnVpbGQvanMvbGliL21vdXNldHJhcC5taW4ubWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3ZEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNySEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2paQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDak5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2UEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5UEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9PQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6UkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3U0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6TUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdFVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNrQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcFRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1UUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN2lCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hEQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKX12YXIgZj1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwoZi5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxmLGYuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbi8qIFRPRE9cbiAqIFxuICogLSBBbGwgY291bnQgY2hhbmdlLCB3aGVuIHByb3NwZWN0IGlzIGFyY2hpdmVkXG4gKiAtIFdoZW4gaXMgbGlzdCBpcyBjaGFhbmdlZCBmcm9tIGFsbCBhbmQgdGhlbiByZXR1cm5lZCB0byBBbGwgcHJvc3BlY3RzIHRha2UgYSBsb25nICAgICB0aW1lIHRvIGxvYWRcbiAqIC0gRml4IHBhZ2luYXRpb24gaXNzdWVzXG4gKlxuICogLSBQYXJhbGxlbGl6ZSBXb3JrZXJzXG4gKiAtIFNjYWxlIHVwIGdvb2dsZSBzY3JhcGUgdG8gaHVuZHJlZHMgb2Ygd29ya2VycyAoaGVyb2t1KVxuICpcbiAqIC0gQ29tcGFueSBTaG9ydGN1dHMgXG4gKiAtIEFkZCBhYmlsaXR5IHRvIHN3aXRjaCBhY2NvdW50cyBmb3IgYWRtaW5zXG4gKiAtIEFkZCBlbWFpbCB1bmVkaXRhYmxlIGVtYWlsIGZpZWxkc1xuICovXG5cbnZhciBQcm9zcGVjdHMgPSByZXF1aXJlKCcuL3Byb3NwZWN0cy5qcy5taW4uanMnKTtcbnZhciBEYXRhVGFibGUgPSByZXF1aXJlKCcuL3Byb3NwZWN0cy5qcy5taW4uanMnKTtcbnZhciBNaW5pbmdKb2IgPSByZXF1aXJlKCcuL21pbmluZ19qb2IuanMubWluLmpzJyk7XG52YXIgQ2FtcGFpZ25zID0gcmVxdWlyZSgnLi9lbWFpbC5qcy5taW4uanMnKTtcbnZhciBBbmFseXRpY3MgPSByZXF1aXJlKCcuL2FuYWx5dGljcy5qcy5taW4uanMnKTtcbnZhciBTaWduVXAgPSByZXF1aXJlKCcuL3NpZ251cC5qcy5taW4uanMnKTtcbnZhciBMb2dpbiA9IHJlcXVpcmUoJy4vbG9naW4uanMubWluLmpzJyk7XG52YXIgTGFuZGluZ1BhZ2UgPSByZXF1aXJlKCcuL2xhbmRpbmdfcGFnZS5qcy5taW4uanMnKTtcbnZhciBMYW5kaW5nUGFnZSA9IHJlcXVpcmUoJy4vbGFuZGluZ19wYWdlX2NvbmNlcHQuanMubWluLmpzJyk7XG52YXIgRnJlZVRyaWFsID0gcmVxdWlyZSgnLi9mcmVlX3RyaWFsLmpzLm1pbi5qcycpO1xudmFyIFByaWNpbmcgPSByZXF1aXJlKCcuL3ByaWNpbmcuanMubWluLmpzJyk7XG52YXIgU2lnbmFscyA9IHJlcXVpcmUoJy4vc2lnbmFscy5qcy5taW4uanMnKTtcbnZhciBNb3VzZVRyYXAgPSByZXF1aXJlKCcuLi9saWIvbW91c2V0cmFwLm1pbi5taW4uanMnKVxudmFyIEhlYWRoZXNpdmUgPSByZXF1aXJlKCcuLi9saWIvaGVhZGhlc2l2ZS5taW4uanMnKVxudmFyIFVwZ3JhZGVQbGFuTW9kYWwgPSByZXF1aXJlKCcuL3VwZ3JhZGVfcGxhbl9tb2RhbC5qcy5taW4uanMnKVxudmFyIExhbmRpbmdQYWdlRmVhdHVyZXMgPSByZXF1aXJlKCcuL2xhbmRpbmdfcGFnZV9mZWF0dXJlcy5qcy5taW4uanMnKVxudmFyIExhbmRpbmdQYWdlU2VydmljZXMgPSByZXF1aXJlKCcuL2xhbmRpbmdfcGFnZV9zZXJ2aWNlcy5qcy5taW4uanMnKVxuLy92YXIgY2hlY2tBdXRoID0gcmVxdWlyZSgnLi9hdXRoLm1pbi5qcycpXG5cbnZhciBIb21lID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnSG9tZScsXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgLy8gbnVtX29mX3BhZ2VzXG4gICAgY29uc29sZS5sb2codGhpcy5wcm9wcylcbiAgICByZXR1cm4ge3Byb3NwZWN0czogW10gLCBcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiAxLCBcbiAgICAgICAgICAgIHBhZ2VzOiAxLCBcbiAgICAgICAgICAgIGNvdW50OlwiflwiLCBcbiAgICAgICAgICAgIHByb3NwZWN0VHlwZTonUHJvc3BlY3QnLCBcbiAgICAgICAgICAgIC8vc2VsZWN0ZWRTY3JlZW46J1Byb3NwZWN0cyd9XG4gICAgICAgICAgICBjdXJyZW50VXNlcjogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLFxuICAgICAgICAgICAgc2VsZWN0ZWRTY3JlZW46IHRoaXMucHJvcHMuc2VsZWN0ZWRTY3JlZW59XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgICBjdXJyZW50VXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKVxuICAgIGRheXMgPSBtb21lbnQoKS5kaWZmKG1vbWVudChjdXJyZW50VXNlci5jcmVhdGVkQXQpLCdkYXlzJylcbiAgICBpZihkYXlzID4gMTQgJiYgY3VycmVudFVzZXIuYWNjb3VudFR5cGUgPT0gJ3RyaWFsJykge1xuICAgICAgJCgnI3VwZ3JhZGVQbGFuTW9kYWwnKS5tb2RhbCgge1xuICAgICAgICBiYWNrZHJvcDogJ3N0YXRpYycsXG4gICAgICAgIGtleWJvYXJkOiBmYWxzZVxuICAgICAgfSlcbiAgICB9XG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbigpe1xuICAgIC8vY29uc29sZS5kZWJ1ZygnV0lMTCBNT1VOVCcpXG4gICAgY2hlY2tBdXRoKClcbiAgICB2YXIgdGhpc3MgPSB0aGlzO1xuICAgIC8vY29uc29sZS5kZWJ1Zyh0aGlzLnN0YXRlLmN1cnJlbnRVc2VyKVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvX1VzZXIvJyt0aGlzcy5zdGF0ZS5jdXJyZW50VXNlci5vYmplY3RJZCxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIC8vY29uc29sZS5kZWJ1ZygnTE9MJylcbiAgICAgICAgLy8gTnVtYmVyIG9mIFByb3NwZWN0cyBmb3IgdXNlclxuICAgICAgICAvLyBOdW1iZXIgb2YgTGlzdHNcbiAgICAgICAgLy8gTnVtYmVyIG9mIEVtYWlscyBmb3VuZFxuICAgICAgICBsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIgPSBKU09OLnN0cmluZ2lmeShyZXMpXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgSW50ZXJjb20oJ2Jvb3QnLCB7XG4gICAgICAgICAgYXBwX2lkOiAnZDM3YzJkZTVmZmUyN2Q2OWI4Nzc2NDUzNTE0OTA1MTczMzM0MzdiZicsXG4gICAgICAgICAgZW1haWw6IHJlcy5lbWFpbCxcbiAgICAgICAgICBjcmVhdGVkX2F0OiAxMjM0NTY3ODkwLFxuICAgICAgICAgIG5hbWU6ICdKb2huIERvZScsXG4gICAgICAgICAgdXNlcl9pZDogJ2xvbCdcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKCdlcnJvcicpXG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gSW50ZXJjb21cbiAgICAvLyBNaXhwYW5lbFxuICB9LFxuXG5cbiAgdG9nZ2xlU2NyZWVuOiBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRTY3JlZW4gOiAkKGUudGFyZ2V0KS50ZXh0KCkudHJpbSgpfSlcbiAgfSxcblxuICBsb2dvdXQ6IGZ1bmN0aW9uKCkge1xuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpXG4gICAgbG9jYXRpb24uaHJlZiA9IFwiI2dldF9zdGFydGVkXCJcbiAgfSxcblxuICBsaXN0RHJvcGRvd246IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdkcm9wZG93bicpXG4gICAgLy8kKCcuZHJvcGRvd24tbWVudScpLmRyb3Bkb3duKClcbiAgICAkKCcucHJvc3BlY3QtbGlzdC1zZWxlY3QnKS5jc3MoJ2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzJywnMHB4JylcbiAgICAkKCcucHJvc3BlY3QtbGlzdC1zZWxlY3QnKS5jc3MoJ2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXMnLCcwcHgnKVxuICAgICAgXG4gICAgJCgnLmxpc3Qtc2VsZWN0LWRyb3Bkb3duJykuY3NzKCdib3JkZXItdG9wLWxlZnQtcmFkaXVzJywnMHB4JylcbiAgICAkKCcubGlzdC1zZWxlY3QtZHJvcGRvd24nKS5jc3MoJ2JvcmRlci10b3AtcmlnaHQtcmFkaXVzJywnMHB4JylcbiAgfSxcblxuICBzZWxlY3RDaGFuZ2UgOiBmdW5jdGlvbigpIHtcblxuICB9LFxuXG4gIHN0cmlwZUNoZWNrb3V0OiBmdW5jdGlvbigpIHtcbiAgICAvKlxuICAgIGhhbmRsZXIub3Blbih7XG4gICAgICBuYW1lOiAnQ3VzdG9tZXJvJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnR2V0IDkwMCBmcmVlIGVtYWlsIGNyZWRpdHMhJyxcbiAgICAgIGFtb3VudDogMCxcbiAgICAgIHBhbmVsTGFiZWw6IFwiU3RhcnQgWW91ciBGcmVlIFRyaWFsIVwiLFxuICAgICAgb3BlbmVkOiBmdW5jdGlvbigpIHtcblxuICAgICAgfSxcbiAgICAgIGNsb3NlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY2xvc2VkXCIpXG4gICAgICAgIC8vbG9jYXRpb24ucmVsb2FkKClcbiAgICAgIH1cbiAgICB9KTtcbiAgICAqL1xuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAvLyBDcmVkaXQgQ2FyZCBWZXJpZmllZCBDaGVja1xuICAgIGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cyA9IFwiW11cIlxuICAgIGN1cnJlbnRVc2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpXG4gICAgaWYoIWN1cnJlbnRVc2VyLmNyZWRpdENhcmRWZXJpZmllZClcbiAgICAgIHRoaXMuc3RyaXBlQ2hlY2tvdXQoKVxuICAgIC8vY29uc29sZS5kZWJ1ZygnRElEIE1PVU5UJylcbiAgICBjdXJyZW50VXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKVxuICAgIGRheXMgPSBtb21lbnQoKS5kaWZmKG1vbWVudChjdXJyZW50VXNlci5jcmVhdGVkQXQpLCdkYXlzJylcbiAgICBpZihkYXlzID4gMTQgJiYgY3VycmVudFVzZXIuYWNjb3VudFR5cGUgPT0gJ3RyaWFsJykge1xuICAgICAgJCgnI3VwZ3JhZGVQbGFuTW9kYWwnKS5tb2RhbCgge1xuICAgICAgICBiYWNrZHJvcDogJ3N0YXRpYycsXG4gICAgICAgIGtleWJvYXJkOiBmYWxzZVxuICAgICAgfSlcbiAgICB9XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAvL2NvbnNvbGUuZGVidWcoJ0FQUCBSRU5ERVInKVxuICAgIHByb3NwZWN0cyA9IFwiY2hvb3NlIGJ0biBidG4tcHJpbWFyeSBcIlxuICAgIGNvbXBhbnlQcm9zcGVjdHMgPSBcImNob29zZSBidG4gYnRuLXByaW1hcnkgXCJcbiAgICBjYW1wYWlnbnMgPSBcImNob29zZSBidG4gYnRuLXByaW1hcnkgXCJcbiAgICBzaWduYWxzID0gXCJjaG9vc2UgYnRuIGJ0bi1wcmltYXJ5IFwiXG5cbiAgICBzd2l0Y2ggKHRoaXMuc3RhdGUuc2VsZWN0ZWRTY3JlZW4pIHtcbiAgICAgIGNhc2UgJ1Byb3NwZWN0cyc6XG4gICAgICAgIGN1cnJlbnRTY3JlZW4gPSBQcm9zcGVjdHMoe2xpc3RDbGFzc05hbWU6ICdQcm9zcGVjdExpc3QnLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnUHJvc3BlY3QnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgIC8vY3VycmVudFNjcmVlbiA9IDxQcm9zcGVjdHM+PFByb3NwZWN0Um93IC8+PC9Qcm9zcGVjdHM+XG4gICAgICAgIHByb3NwZWN0cyA9IFwiY2hvb3NlIGJ0biBidG4tcHJpbWFyeSBhcHAtYWN0aXZlXCJcbiAgICAgICAgbG9jYXRpb24uaHJlZj0gXCIjcHJvc3BlY3RzXCJcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdDb21wYW5pZXMnOlxuICAgICAgICBjdXJyZW50U2NyZWVuID0gUHJvc3BlY3RzKHtsaXN0Q2xhc3NOYW1lOiAnQ29tcGFueVByb3NwZWN0TGlzdCcsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdDb21wYW55UHJvc3BlY3QnfVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGFnaW5hdGlvbkxpbWl0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgTGlzdHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZGluZyBDdXN0b21pemFibGUgUm93c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBFZGl0YWJsZSBGb3IgTm9TUUwgRGF0YUJhc2VzXG4gICAgICAgIGxvY2F0aW9uLmhyZWY9IFwiI2NvbXBhbmllc1wiXG4gICAgICAgIGNvbXBhbnlQcm9zcGVjdHMgPSBcImNob29zZSBidG4gYnRuLXByaW1hcnkgYXBwLWFjdGl2ZVwiXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnTWluaW5nIEpvYnMnOlxuICAgICAgICBjdXJyZW50U2NyZWVuID0gTWluaW5nSm9iKG51bGwpXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnQW5hbHl0aWNzJzpcbiAgICAgICAgY3VycmVudFNjcmVlbiA9IEFuYWx5dGljcyhudWxsKVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0NhbXBhaWducyc6XG4gICAgICAgIGN1cnJlbnRTY3JlZW4gPSBDYW1wYWlnbnMobnVsbClcbiAgICAgICAgY2FtcGFpZ25zID0gXCJjaG9vc2UgYnRuIGJ0bi1wcmltYXJ5IGFwcC1hY3RpdmVcIlxuICAgICAgICBsb2NhdGlvbi5ocmVmPSBcIiNjYW1wYWlnbnNcIlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ1NpZ25hbHMnOlxuICAgICAgICBjdXJyZW50U2NyZWVuID0gU2lnbmFscyhudWxsKVxuICAgICAgICBzaWduYWxzID0gXCJjaG9vc2UgYnRuIGJ0bi1wcmltYXJ5IGFwcC1hY3RpdmVcIlxuICAgICAgICBsb2NhdGlvbi5ocmVmPSBcIiNzaWduYWxzXCJcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdTdHJhdGVnaWVzJzpcbiAgICAgICAgY3VycmVudFNjcmVlbiA9IFNpZ25hbHMobnVsbClcbiAgICAgICAgc2lnbmFscyA9IFwiY2hvb3NlIGJ0biBidG4tcHJpbWFyeSBhcHAtYWN0aXZlXCJcbiAgICAgICAgbG9jYXRpb24uaHJlZj0gXCIjc3RyYXRlZ2llc1wiXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnU2V0dGluZ3MnOlxuICAgICAgICBjdXJyZW50U2NyZWVuID0gU2V0dGluZ3MobnVsbClcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50VXNlci5hY2NvdW50VHlwZSAhPSBcIlN0YWZmXCIpe1xuICAgICAgc2lnbmFscyA9IFwiZGlzc2FwcGVhclwiXG4gICAgICBjYW1wYWlnbnMgPSBcImRpc3NhcHBlYXJcIlxuICAgICAgaWYoY29tcGFueVByb3NwZWN0cyA9PSBcImNob29zZSBidG4gYnRuLXByaW1hcnkgYXBwLWFjdGl2ZVwiKSB7XG4gICAgICAgIGNvbXBhbnlQcm9zcGVjdHMgPSBcImNob29zZSBidG4gYnRuLXByaW1hcnkgYXBwLWFjdGl2ZSByaWdodC1idG4tcm91bmRlZFwiXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb21wYW55UHJvc3BlY3RzID0gXCJjaG9vc2UgYnRuIGJ0bi1wcmltYXJ5IHJpZ2h0LWJ0bi1yb3VuZGVkXCJcbiAgICAgIH1cbiAgICAgIGlmKHByb3NwZWN0cyA9PSBcImNob29zZSBidG4gYnRuLXByaW1hcnkgYXBwLWFjdGl2ZVwiKSB7XG4gICAgICAgIHByb3NwZWN0cyA9IFwiY2hvb3NlIGJ0biBidG4tcHJpbWFyeSBhcHAtYWN0aXZlIGxlZnQtYnRuLXJvdW5kZWRcIlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvc3BlY3RzID0gXCJjaG9vc2UgYnRuIGJ0bi1wcmltYXJ5IGxlZnQtYnRuLXJvdW5kZWRcIlxuICAgICAgfVxuICAgIH1cbiAgICAgIFxuICAgIGN1cnJlbnRVc2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpXG4gICAgZGF5c0xlZnQgPSBtb21lbnQoKS5kaWZmKG1vbWVudChjdXJyZW50VXNlci5jcmVhdGVkQXQpLCdkYXlzJylcbiAgICBkYXlzTGVmdCA9IChkYXlzTGVmdCA+IDE0KSA/IFwiXCIgOiAoMTQgLSBkYXlzTGVmdCkrXCIgZGF5cyBsZWZ0LiBcIlxuXG4gICAgaWYoY3VycmVudFVzZXIuYWNjb3VudFR5cGUgIT0gXCJ0cmlhbFwiKVxuICAgICAgdXBncmFkZUJ0biA9IFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgc3R5bGU6IHttYXJnaW5Ub3A6MCwgbWFyZ2luUmlnaHQ6MTAsXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZTogJ2xpbmVhci1ncmFkaWVudCgxODBkZWcsICMwMDk2ZmYgMCUsICMwMDVkZmYgMTAwJSknICwgYmFja2dyb3VuZEltYWdlOiAnbGluZWFyLWdyYWRpZW50KCM4YWRkNmQsICM2MGIwNDQpJ30sIFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHNcIiwgXG4gICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnVwZ3JhZGVQbGFuTW9kYWx9LCBcbiAgICAgICAgICAgIGRheXNMZWZ0K1wiVXBncmFkZSBUb2RheSFcIlxuICAgICAgICAgIClcbiAgICBlbHNlXG4gICAgICB1cGdyYWRlQnRuID0gXCJcIlxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmgxKHtzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLGRpc3BsYXk6J2lubGluZScsZm9udFdlaWdodDonMTAwJyxjb2xvcjonIzFjYTNmZCd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmltZyh7c3JjOiBcImJ1aWxkL2ltZy9uZXR3b3JrLnBuZ1wiLCBcbiAgICAgICAgICAgIHN0eWxlOiB7IGhlaWdodDozMixcbiAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6NSwgfX1cbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJyxmb250U2l6ZTozMixmb250RmFtaWx5OidQcm94aW1hLU5vdmEnfX0sIFwiQ3VzdG9tZXJvXCIsICBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7Y2xhc3NOYW1lOiBcImJldGEtbGFiZWxcIn0sIFwiQkVUQVwiKVxuICAgICAgICAgICksIFxuXG4gICAgICAgICAgdXBncmFkZUJ0blxuICAgICAgICApLCBcbiAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2Zsb2F0OidyaWdodCcsZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5pbWcoe3NyYzogXCJidWlsZC9pbWcvdXNlci5wbmdcIiwgc3R5bGU6IHtoZWlnaHQ6JzQwcHgnLHdpZHRoOic0MHB4JyxwYWRkaW5nOicycHgnLG1hcmdpblRvcDonNXB4Jyxib3JkZXJSYWRpdXM6JzIzcHgnLGRpc3BsYXk6J2lubGluZSd9LCBjbGFzc05hbWU6IFwidGh1bWJuYWlsXCJ9KSwgXCLCoMKgwqBcIiwgIFxuICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luVG9wOicyMHB4JyxmbG9hdDoncmlnaHQnLGRpc3BsYXk6J2lubGluZSd9fSwgXCJXZWxjb21lIFwiKVxuICAgICAgKSwgXG4gICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtmbG9hdDoncmlnaHQnLCBtYXJnaW5SaWdodDonMHB4J319LCBcbiAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpblRvcDonMjBweCcsZmxvYXQ6J3JpZ2h0JyxkaXNwbGF5Oidub25lJyxtYXJnaW5SaWdodDonMTBweCd9fSwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiI3ByaWNpbmdcIiwgc3R5bGU6IHtjb2xvcjonIzFjYTNmZCd9fSwgXCJQcmljaW5nXCIpKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICBzdHlsZToge21hcmdpblRvcDoxNSwgZmxvYXQ6J3JpZ2h0JyxtYXJnaW5SaWdodDoxMCxcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiAnbGluZWFyLWdyYWRpZW50KDE4MGRlZywgIzAwOTZmZiAwJSwgIzAwNWRmZiAxMDAlKScgLCBiYWNrZ3JvdW5kSW1hZ2U6ICdsaW5lYXItZ3JhZGllbnQoIzhhZGQ2ZCwgIzYwYjA0NCknfSwgXG4gICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14c1wiLCBcbiAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuZG93bmxvYWRTb2NpYWxQcm9zcGVjdGVyfSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWRvd25sb2FkXCJ9KSwgXCIgwqBcIiArICcgJyArXG4gICAgICAgICAgICBcIkRvd25sb2FkIENocm9tZSBTb2NpYWwgUHJvc3BlY3RlclwiXG4gICAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5Ub3A6JzIwcHgnLGZsb2F0OidyaWdodCcsZGlzcGxheTonaW5saW5lJywgbWFyZ2luUmlnaHQ6MTB9fSwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgb25DbGljazogdGhpcy5sb2dvdXQsIHN0eWxlOiB7Y29sb3I6JyMxY2EzZmQnfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1zaWduLW91dFwifSksIFxuICAgICAgICAgICAgXCJMb2dvdXRcIikpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luVG9wOicyMHB4JyxmbG9hdDoncmlnaHQnLGRpc3BsYXk6J2lubGluZScsIG1hcmdpblJpZ2h0OicxMHB4J319LCBcIiBcIiwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiaHR0cDovL3Jlc291cmNlcy5jdXN0b21lcm9ocS5jb20vdjEuMC9kaXNjdXNzXCIsIHN0eWxlOiB7Y29sb3I6JyMxY2EzZmQnfX0sIFxuXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcXVlc3Rpb24tY2lyY2xlXCJ9KSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge3BhZGRpbmdMZWZ0OjJ9fSwgJ1N1cHBvcnQnKVxuICAgICAgICApLCBcIiBcIiksIFxuICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luVG9wOicyMHB4JyxmbG9hdDoncmlnaHQnLGRpc3BsYXk6J2lubGluZScsIG1hcmdpblJpZ2h0OicxMHB4J319LCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJodHRwOi8vcmVzb3VyY2VzLmN1c3RvbWVyb2hxLmNvbS92MS4wL2RvY3NcIiwgc3R5bGU6IHtjb2xvcjonIzFjYTNmZCd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYm9va1wifSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtwYWRkaW5nTGVmdDoyfX0sIFwiUmVzb3VyY2VzXCIpXG4gICAgICAgICAgKSwgXCIgXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luVG9wOicyMHB4JyxmbG9hdDoncmlnaHQnLGRpc3BsYXk6J2lubGluZScsIG1hcmdpblJpZ2h0OicyMHB4JyxkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIHN0eWxlOiB7Y29sb3I6JyMxY2EzZmQnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWJlbGxcIn0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7cGFkZGluZ0xlZnQ6Mn19LCBcIk5vdGlmaWNhdGlvbnMgXCIpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImxhYmVsIG5vdGlmaWNhdGlvbi1iYWRnZVwifSwgXCIwXCIpXG4gICAgICAgICAgKSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5Ub3A6JzIwcHgnLGZsb2F0OidyaWdodCcsZGlzcGxheTonaW5saW5lJywgbWFyZ2luUmlnaHQ6JzIwcHgnLGRpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgc3R5bGU6IHtjb2xvcjonIzFjYTNmZCd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvdWQtZG93bmxvYWRcIn0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7cGFkZGluZ0xlZnQ6Mn19LCBcIk1pbmluZyBKb2JzIFwiKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJsYWJlbCBub3RpZmljYXRpb24tYmFkZ2VcIn0sIFwiMFwiKVxuICAgICAgICAgICkpXG5cbiAgICAgICksIFxuICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0XCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7aWQ6IFwibmF2YmFyXCIsIGNsYXNzTmFtZTogXCJwYW5lbC1oZWFkaW5nXCJ9LCBcblxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXAgY29sLW1kLW9mZnNldC00XCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogc2lnbmFscywgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9LCBvbkNsaWNrOiB0aGlzLnRvZ2dsZVNjcmVlbn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbGluZS1jaGFydFwifSksIFwiwqBTdHJhdGVnaWVzXCJcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBwcm9zcGVjdHMsIG9uQ2xpY2s6IHRoaXMudG9nZ2xlU2NyZWVufSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS11c2VyXCJ9KSwgXCLCoFByb3NwZWN0c1wiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJjaG9vc2UgYnRuIGJ0bi1wcmltYXJ5XCIsIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9LCBvbkNsaWNrOiB0aGlzLnRvZ2dsZVNjcmVlbn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYmFyLWNoYXJ0LW9cIn0pLCBcIiBBbmFseXRpY3NcIlxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiY2hvb3NlIGJ0biBidG4tcHJpbWFyeVwiLCBcbiAgICAgICAgICAgICAgICAgIHN0eWxlOiB7d2lkdGg6MTYyLGRpc3BsYXk6J25vbmUnfSwgXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZVNjcmVlbn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdGFza3NcIn0pLCBcIiBNaW5pbmcgSm9icyDCoFwiLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLWRlZmF1bHRcIn0sIFwiQkVUQVwiKVxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IGNvbXBhbnlQcm9zcGVjdHMsIG9uQ2xpY2s6IHRoaXMudG9nZ2xlU2NyZWVufSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1idWlsZGluZ1wifSksIFwiIENvbXBhbmllc1wiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogY2FtcGFpZ25zLCBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJ30sIG9uQ2xpY2s6IHRoaXMudG9nZ2xlU2NyZWVufSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1lbnZlbG9wZVwifSksIFwiwqBDYW1wYWlnbnNcIlxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG5cbiAgICAgICAgICBjdXJyZW50U2NyZWVuXG5cbiAgICAgICAgKVxuICAgICAgKSwgXG4gICAgICBVcGdyYWRlUGxhbk1vZGFsKG51bGwpXG4gICAgICApXG4gICAgKTtcbiAgfSxcblxuICB1cGdyYWRlUGxhbk1vZGFsOiBmdW5jdGlvbigpIHtcbiAgICAkKCcjdXBncmFkZVBsYW5Nb2RhbCcpLm1vZGFsKClcbiAgfSxcbiAgXG4gIGRvd25sb2FkU29jaWFsUHJvc3BlY3RlcjogZnVuY3Rpb24oKSB7XG4gICAgd2luZG93Lm9wZW4oJ2h0dHBzOi8vY2hyb21lLmdvb2dsZS5jb20vd2Vic3RvcmUvZGV0YWlsL2N1c3RvbWVyby1wcm9zcGVjdGVyL29mY2Fsa2pib2dhaWlwZWtjb2NkZWZqZW5jbGlvZWNpJylcbiAgfSxcblxuICBkZWxldGVQcm9zcGVjdDogZnVuY3Rpb24ob2JqZWN0SWQsIGVuZHBvaW50KSB7XG4gICAgdmFyIGZpbHRlcmVkID0gXy5maWx0ZXIodGhpcy5zdGF0ZS5wcm9zcGVjdHMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICByZXR1cm4gaXRlbS5vYmplY3RJZCAhPSBvYmplY3RJZFxuICAgIH0pO1xuICAgIHRoaXMuc2V0U3RhdGUoe3Byb3NwZWN0czogZmlsdGVyZWR9KVxuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK2VuZHBvaW50KycvJytvYmplY3RJZCxcbiAgICAgIHR5cGU6J0RFTEVURScsXG4gICAgICBoZWFkZXJzOiBwYXJzZV9oZWFkZXJzLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pO1xuXG52YXIgV29ya3NwYWNlID0gQmFja2JvbmUuUm91dGVyLmV4dGVuZCh7XG4gIHJvdXRlczoge1xuICAgIC8vbGFuZGluZ19wYWdlXG4gICAgXCJwcm9kdWN0L2ZlYXR1cmVzXCIgICAgOiBcImZlYXR1cmVzXCIsXG4gICAgXCJzZXJ2aWNlc1wiICAgICAgICAgICAgOiBcInNlcnZpY2VzXCIsXG4gICAgXG4gICAgLy8gQXBwXG4gICAgXCJcIiAgICAgICAgICAgIDogXCJwcm9zcGVjdHNcIixcbiAgICBcImdldF9zdGFydGVkXCIgOiBcImxhbmRpbmdfcGFnZVwiLFxuICAgIFwiZnJlZV90cmlhbFwiICA6IFwiZnJlZV90cmlhbFwiLFxuICAgIFwic2lnbnVwXCIgICAgICA6IFwic2lnbnVwXCIsXG4gICAgXCJsb2dpblwiICAgICAgIDogXCJsb2dpblwiLFxuICAgIFwicHJpY2luZ1wiICAgICA6IFwicHJpY2luZ1wiLFxuICAgIFxuICAgIFwic2lnbmFsc1wiICAgICA6IFwic2lnbmFsc1wiLFxuICAgIFwic3RyYXRlZ2llc1wiICA6IFwic3RyYXRlZ2llc1wiLFxuICAgIFwicHJvc3BlY3RzXCIgICA6IFwicHJvc3BlY3RzXCIsXG4gICAgXCJjb21wYW5pZXNcIiAgIDogXCJjb21wYW5pZXNcIixcbiAgICBcImNhbXBhaWduc1wiICAgOiBcImNhbXBhaWduc1wiLFxuXG4gICAgXCJwcm9zcGVjdHMvcDpwYWdlXCIgICAgICAgOiBcInByb3NwZWN0c1wiLFxuICAgIFwicHJvc3BlY3RzL2xpc3QvOmxpc3RcIiAgIDogXCJwcm9zcGVjdHNfbGlzdFwiLFxuXG4gICAgXCJjb21wYW5pZXMvcDpwYWdlXCIgICAgICAgOiBcImNvbXBhbmllc1wiLFxuICAgIFwiY29tcGFuaWVzL2xpc3QvOmxpc3RcIiAgIDogXCJjb21wYW5pZXNfbGlzdFwiLFxuXG4gICAgXCJzaWduYWxzL3Byb2ZpbGUvOnByb2ZpbGVcIiAgOiBcInNpZ25hbHNfcHJvZmlsZVwiLFxuICAgIFwic2lnbmFscy9jYWxlbmRhci86cHJvZmlsZVwiIDogXCJzaWduYWxzX2NhbGVuZGFyXCIsXG5cbiAgICBcImNhbXBhaWducy9mb2xsb3d1cF9mZWVkXCIgICAgICA6IFwiY2FtcGFpZ25zXCIsXG4gICAgXCJjYW1wYWlnbnMvc2VudF9lbWFpbHNcIiAgICAgICAgIDogXCJjYW1wYWlnbnNcIixcbiAgICBcImNhbXBhaWducy90ZW1wbGF0ZS86dGVtcGxhdGVcIiA6IFwiY2FtcGFpZ25zXCIsXG4gIH0sXG5cbiAgbWFpblJvdXRlOiBmdW5jdGlvbihyb3V0ZSkge1xuICAgIGNvbnNvbGUubG9nKHJvdXRlKVxuICAgIGN1cnJlbnRVc2VyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRVc2VyJylcbiAgICAkKCcjY29udGVudCcpLmh0bWwoJycpXG4gICAgaWYgKGN1cnJlbnRVc2VyKSBcbiAgICAgIFJlYWN0LnJlbmRlckNvbXBvbmVudChIb21lKHtzZWxlY3RlZFNjcmVlbjogcm91dGV9KSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKSk7XG4gICAgZWxzZVxuICAgICAgbG9jYXRpb24uaHJlZiA9IFwiI2dldF9zdGFydGVkXCJcbiAgfSxcblxuICBzaWduYWxzICA6IGZ1bmN0aW9uKCkgeyB0aGlzLm1haW5Sb3V0ZSgnU2lnbmFscycpIH0sXG4gIHN0cmF0ZWdpZXMgIDogZnVuY3Rpb24oKSB7IHRoaXMubWFpblJvdXRlKCdTdHJhdGVnaWVzJykgfSxcbiAgcHJvc3BlY3RzOiBmdW5jdGlvbigpIHsgdGhpcy5tYWluUm91dGUoJ1Byb3NwZWN0cycpIH0sXG4gIGNvbXBhbmllczogZnVuY3Rpb24oKSB7IHRoaXMubWFpblJvdXRlKCdDb21wYW5pZXMnKSB9LFxuICBjYW1wYWlnbnM6IGZ1bmN0aW9uKCkgeyB0aGlzLm1haW5Sb3V0ZSgnQ2FtcGFpZ25zJykgfSxcblxuICBob21lOiBmdW5jdGlvbigpIHtcbiAgICBjdXJyZW50VXNlciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW50VXNlcicpXG4gICAgaWYgKGN1cnJlbnRVc2VyKSBcbiAgICAgIFJlYWN0LnJlbmRlckNvbXBvbmVudChIb21lKHtzZWxlY3RlZFNjcmVlbjogXCJQcm9zcGVjdHNcIn0pLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpKTtcbiAgICBlbHNlXG4gICAgICBsb2NhdGlvbi5ocmVmID0gXCIjZ2V0X3N0YXJ0ZWRcIlxuICB9LFxuICBsYW5kaW5nX3BhZ2U6IGZ1bmN0aW9uKCkge1xuICAgIFJlYWN0LnJlbmRlckNvbXBvbmVudChMYW5kaW5nUGFnZSgpLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpKTtcbiAgfSxcbiAgZmVhdHVyZXM6IGZ1bmN0aW9uKCkge1xuICAgIFJlYWN0LnJlbmRlckNvbXBvbmVudChMYW5kaW5nUGFnZUZlYXR1cmVzKCksIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50JykpO1xuICB9LFxuICBzZXJ2aWNlczogZnVuY3Rpb24oKSB7XG4gICAgUmVhY3QucmVuZGVyQ29tcG9uZW50KExhbmRpbmdQYWdlU2VydmljZXMoKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKSk7XG4gIH0sXG4gIGZyZWVfdHJpYWw6IGZ1bmN0aW9uKCkge1xuICAgIFJlYWN0LnJlbmRlckNvbXBvbmVudChGcmVlVHJpYWwoKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKSk7XG4gIH0sXG4gIHNpZ251cDogZnVuY3Rpb24oKSB7XG4gICAgUmVhY3QucmVuZGVyQ29tcG9uZW50KFNpZ25VcCgpLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpKTtcbiAgfSxcbiAgbG9naW46IGZ1bmN0aW9uKCkge1xuICAgIFJlYWN0LnJlbmRlckNvbXBvbmVudChMb2dpbigpLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpKTtcbiAgfSxcbiAgcHJpY2luZzogZnVuY3Rpb24oKSB7XG4gICAgUmVhY3QucmVuZGVyQ29tcG9uZW50KFByaWNpbmcoKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKSk7XG4gIH1cbn0pO1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuICBjaGVja0F1dGgoKVxuICB2YXIgd29ya3NwYWNlID0gbmV3IFdvcmtzcGFjZTtcbiAgQmFja2JvbmUuaGlzdG9yeS5zdGFydCgpO1xuICAvLyBBZGQgdG8gbGlua2VkaW5cbiAgLy8gQWRkIFRvIEJhc2Vcbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIEZvbGxvd3VwRmVlZFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhY3Rpdml0aWVzOiBbXVxuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9FbWFpbEV2ZW50JyxcbiAgICAgIGRhdGE6IHtpbmNsdWRlOiAncHJvc3BlY3Qsc2VudF9lbWFpbCcsIG9yZGVyOictY3JlYXRlZEF0JywgbGltaXQ6MTAwMH0sXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyBcbiAgICAgICAgY29uc29sZS5sb2cocmVzLnJlc3VsdHMpXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHthY3Rpdml0aWVzOiByZXMucmVzdWx0c30pIFxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbigpIHt9XG4gICAgfSlcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIGFjdGl2aXRpZXMgPSBfLm1hcCh0aGlzLnN0YXRlLmFjdGl2aXRpZXMsIGZ1bmN0aW9uKGFjdGl2aXR5KSB7XG4gICAgICByZXR1cm4gRW1haWxBY3Rpdml0aWVzKHthY3Rpdml0eTogYWN0aXZpdHl9KVxuICAgIH0pXG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtvdmVyZmxvdzonYXV0bycsaGVpZ2h0OjQxN319LCBcbiAgICAgICAgUmVhY3QuRE9NLnRhYmxlKHtjbGFzc05hbWU6IFwidGFibGVcIiwgc3R5bGU6IHttYXJnaW5Cb3R0b206MH19LCBcbiAgICAgICAgICBSZWFjdC5ET00udGhlYWQobnVsbCwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiU2VudCBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiUHJvc3BlY3QgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIkVtYWlsIFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJFdmVudHMgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9fSwgXCJBY3Rpb24gQnV0dG9uc1wiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJTb2NpYWxcIilcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udGJvZHkobnVsbCwgXG4gICAgICAgICAgICBhY3Rpdml0aWVzXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KVxuXG52YXIgRXZlbnQgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdFdmVudCcsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgZXZlbnQgPSB0aGlzLnByb3BzLmV2ZW50XG4gICAgaWYoZXZlbnQgPT0gXCJkZWxpdmVyZWRcIil7XG4gICAgICBpY29uVHlwZSA9IFwiZmEgZmEtcGFwZXItcGxhbmVcIjsgZXZlbnROYW1lID0gXCJEZWxpdmVyZWRcIjtcbiAgICB9ZWxzZSBpZihldmVudCA9PSBcImZhaWxlZFwiKSB7XG4gICAgICBpY29uVHlwZSA9IFwiZmEgZmEtZXhjbGFtYXRpb24tY2lyY2xlXCI7IGV2ZW50TmFtZT1cIkZhaWxlZFwiXG4gICAgfWVsc2UgaWYoZXZlbnQgPT0gXCJvcGVuZWRcIil7XG4gICAgICBpY29uVHlwZSA9IFwiZmEgZmEtZXllXCI7IGV2ZW50TmFtZT1cIk9wZW5lZFwiXG4gICAgfWVsc2UgaWYoZXZlbnQgPT0gXCJyZXBsaWVkXCIpe1xuICAgICAgaWNvblR5cGUgPSBcImZhIGZhLW1haWwtcmVwbHlcIjsgIGV2ZW50TmFtZSA9IFwiUmVwbGllZFwiXG4gICAgfWVsc2UgaWYoZXZlbnQgPT0gXCJ2aXNpdGVkXCIpe1xuICAgICAgaWNvblR5cGUgPSBcImZhIGZhLWhvbWVcIjsgIGV2ZW50TmFtZT1cIlZpc2l0ZWRcIlxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJsaXN0LWdyb3VwIGVtYWlsLWV2ZW50c1wiLCBzdHlsZToge21hcmdpbkJvdHRvbTowfX0sIFxuICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJsaXN0LWdyb3VwLWl0ZW0gbGlzdC1ncm91cC1pdGVtLWluZm9cIiwgc3R5bGU6IHtwYWRkaW5nVG9wOjE2LCBoZWlnaHQ6NDksdGV4dEFsaWduOidjZW50ZXInfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IGljb25UeXBlfSksIFwiwqBcIiwgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7Zm9udFdlaWdodDonYm9sZCd9fSwgZXZlbnROYW1lKSwgXCLCoFwiXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJsaXN0LWdyb3VwLWl0ZW0gbGlzdC1ncm91cC1pdGVtLWluZm9cIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWhvbWVcIn0pLCBcIsKgXCIsIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnfX0sIFwiVmlzaXRlZFwiKSwgXCLCoFwiLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwifSwgXCJjdXN0b21lcm9ocS5jb20vcmVzb3VyY2VzXCIpLCBcIiDCoFwiXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJsaXN0LWdyb3VwLWl0ZW0gbGlzdC1ncm91cC1pdGVtLWluZm9cIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWV4dGVybmFsLWxpbmstc3F1YXJlXCJ9KSwgXCLCoFwiLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcIjI6MTkgcG1cIiksIFwiwqBcIiwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7Zm9udFdlaWdodDonYm9sZCd9fSwgXCJjbGlja2VkIFwiKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIn0sIFwiY3VzdG9tZXJvaHEuY29tXCIpXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH1cbn0pXG5cbnZhciBFbWFpbEFjdGl2aXRpZXMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdFbWFpbEFjdGl2aXRpZXMnLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIGFjdGl2aXR5ID0gdGhpcy5wcm9wcy5hY3Rpdml0eVxuICAgIHByb3NwZWN0ID0gKGFjdGl2aXR5LnByb3NwZWN0KSA/IGFjdGl2aXR5LnByb3NwZWN0IDoge31cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnRyKG51bGwsIFxuICAgICAgICAgIFJlYWN0LkRPTS50ZChudWxsKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNsb2NrXCJ9KSwgXCLCoFwiLCBcbiAgICAgICAgICAgICAgbW9tZW50KGFjdGl2aXR5LmNyZWF0ZWRBdCkuZnJvbU5vdygpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFJlYWN0LkRPTS5oNihudWxsLCBwcm9zcGVjdC5uYW1lKSksIFxuICAgICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBSZWFjdC5ET00uaDYobnVsbCwgYWN0aXZpdHkuc2VudF9lbWFpbC5zdWJqZWN0KSksIFxuICAgICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHtwYWRkaW5nOjAsIGZvbnRTaXplOjEyfX0sIFxuICAgICAgICAgICAgRXZlbnQoe2V2ZW50OiBhY3Rpdml0eS5ldmVudF90eXBlfSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzXCIsIHN0eWxlOiB7d2lkdGg6NzAsZm9udFdlaWdodDonYm9sZCcsbWFyZ2luQm90dG9tOjJ9fSwgXCJFbWFpbFwiKSwgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzXCIsIHN0eWxlOiB7d2lkdGg6NzAsZm9udFdlaWdodDonYm9sZCcsbWFyZ2luQm90dG9tOjJ9fSwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG91ZC11cGxvYWRcIn0pLCBcIsKgQ1JNXCIpLCBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHNcIiwgc3R5bGU6IHt3aWR0aDo3MCxmb250V2VpZ2h0Oidib2xkJyxtYXJnaW5Cb3R0b206Mn19LCBcIkNhbGxcIilcbiAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgICAgXCJsb2xcIlxuICAgICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH1cbn0pXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cbnZhciBUZW1wbGF0ZXNNZW51ID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXNfbWVudS5qcy5taW4uanMnKTtcbnZhciBFZGl0VGVtcGxhdGVWaWV3ID0gcmVxdWlyZSgnLi9lZGl0X3RlbXBsYXRlLmpzLm1pbi5qcycpO1xudmFyIENyZWF0ZVRlbXBsYXRlVmlldyA9IHJlcXVpcmUoJy4vY3JlYXRlX3RlbXBsYXRlLmpzLm1pbi5qcycpO1xudmFyIFRpbWVsaW5lID0gcmVxdWlyZSgnLi9mb2xsb3d1cF90aW1lbGluZS5qcy5taW4uanMnKTtcbnZhciBDYW1wYWlnbkFjdGl2aXR5VmlldyA9IHJlcXVpcmUoJy4vY2FtcGFpZ25fYWN0aXZpdHlfdmlldy5qcy5taW4uanMnKVxudmFyIENhbXBhaWduRm9sbG93dXBGZWVkID0gcmVxdWlyZSgnLi9jYW1wYWlnbl9mb2xsb3d1cF9mZWVkLmpzLm1pbi5qcycpXG52YXIgQ2FtcGFpZ25TZW50RW1haWwgPSByZXF1aXJlKCcuL2NhbXBhaWduX3NlbnRfZW1haWwuanMubWluLmpzJylcbnZhciBDYW1wYWlnblJlcG9ydCA9IHJlcXVpcmUoJy4vY2FtcGFpZ25fcmVwb3J0LmpzLm1pbi5qcycpXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIENhbXBhaWduIERldGFpbFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzZWxlY3RlZFRlbXBsYXRlOiAwLFxuICAgICAgdGVtcGxhdGVEZXRhaWxNb2RlOiBmYWxzZSxcbiAgICAgIGVkaXRNb2RlOiBmYWxzZSxcbiAgICAgIGZvbGxvd3VwRGF5OiAwLFxuICAgICAgdGVtcGxhdGVzOltdLFxuICAgICAgY3VycmVudFRlbXBsYXRlOicnLFxuICAgICAgcHJvc3BlY3RMaXN0Q291bnQ6J34nLFxuICAgICAgcHJvc3BlY3RzOltdLFxuICAgICAgY3VycmVudFNjcmVlbjogJ3RpbWVsaW5lJyxcbiAgICAgIG5ld1Byb3NwZWN0czogW10sXG4gICAgICBib3VuY2VkOiAnficsXG4gICAgICBkZWxpdmVyZWQ6ICd+JyxcbiAgICAgIG9wZW5lZDogJ34nLFxuICAgIH1cbiAgfSxcblxuICBjaGFuZ2VTY3JlZW46IGZ1bmN0aW9uKGUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50U2NyZWVuOiAkKGUudGFyZ2V0KS50ZXh0KCkudG9Mb3dlckNhc2UoKX0pXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXNzc3MgPSB0aGlzO1xuICAgIGNvbXBhbnkgPSBKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikuY29tcGFueSlcbiAgICBxcnkgPSAnd2hlcmU9e1wiY29tcGFueVwiOicrY29tcGFueSsnfSdcblxuXG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1RlbXBsYXRlJyxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IHRoaXNzc3Muc2V0U3RhdGUoe3RlbXBsYXRlczogcmVzLnJlc3VsdHN9KSB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZygnZXJyb3InKSB9XG4gICAgfSk7XG5cbiAgICBjdXJyZW50TGlzdCA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICdfX3R5cGUnICAgIDogJ1BvaW50ZXInLCBcbiAgICAgICdjbGFzc05hbWUnIDogJ1Byb3NwZWN0TGlzdCcsXG4gICAgICAnb2JqZWN0SWQnICA6IHRoaXMucHJvcHMuc2VsZWN0ZWRDYW1wYWlnbi5wcm9zcGVjdF9saXN0Lm9iamVjdElkLCBcbiAgICB9KVxuXG4gICAgcXJ5ID0gJ3doZXJlPXtcImxpc3RzXCI6JytjdXJyZW50TGlzdCsnfSZsaW1pdD0xMDAwJmNvdW50PTEmaW5jbHVkZT1lbWFpbF9ndWVzc2VzLGVtYWlsX2d1ZXNzZXMucGF0dGVybidcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdCcsXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgIGRhdGE6IHFyeSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgLy8gVE9ETyAtIHdoeSBpcyB0aGlzIGJlaW5nIGRvbmVcbiAgICAgICAgY29uc29sZS5sb2coJ1JFU1VMVFMnKVxuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcy5yZXN1bHRzKVxuICAgICAgICB0aGlzc3NzLnNldFN0YXRlKHtcbiAgICAgICAgICBwcm9zcGVjdHM6IHJlcy5yZXN1bHRzLFxuICAgICAgICAgIHByb3NwZWN0TGlzdENvdW50OiByZXMuY291bnQgXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYocmVzLmNvdW50ID4gMTAwMCl7XG4gICAgICAgICAgZm9yKGk9MDtpPCBNYXRoLmNlaWwocmVzLmNvdW50LzEwMDApOyBpKyspIHtcbiAgICAgICAgICAgIHFyeSA9ICd3aGVyZT17XCJsaXN0c1wiOicrY3VycmVudExpc3QrJ30mbGltaXQ9MTAwMCZjb3VudD0xJ1xuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdCcsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgICAgICBkYXRhOiBxcnksXG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICBwcm9zcGVjdHMgPSB0aGlzc3NzLnN0YXRlLnByb3NwZWN0c1xuICAgICAgICAgICAgICAgIHRoaXNzc3Muc2V0U3RhdGUoe3Byb3NwZWN0czogIHByb3NwZWN0cy5jb25jYXQocmVzLnJlc3VsdHMpfSlcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge31cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyB9XG4gICAgfSlcblxuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgc2VsZWN0ZWRDYW1wYWlnbiA9IHRoaXMucHJvcHMuc2VsZWN0ZWRDYW1wYWlnblxuICAgIGNvbnNvbGUuZGVidWcodGhpcy5wcm9wcy5zZWxlY3RlZENhbXBhaWduKVxuICAgIGNvbnNvbGUuZGVidWcoJ1NlbGVjdGVkIENhbXBhaWduIEJhdGNoZXMnKVxuICAgIGNvbnNvbGUuZGVidWcodGhpcy5wcm9wcy5zZWxlY3RlZENhbXBhaWduLmJhdGNoZXMpXG4gICAgYmF0Y2hlcyA9IHRoaXMucHJvcHMuc2VsZWN0ZWRDYW1wYWlnbi5iYXRjaGVzXG4gICAgaWYoXy5pc0VxdWFsKGJhdGNoZXMsIFtdKSl7IFxuICAgICAgYmF0Y2hfcXVlcnkgPSB7ICRpbjogW2ZhbHNlLCBudWxsXSB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHFyeSA9IF8ubWFwKGJhdGNoZXMsIGZ1bmN0aW9uKGJhdGNoKSB7XG4gICAgICAgIHJldHVybiBhcHBDb25maWcucG9pbnRlcignUHJvc3BlY3RCYXRjaCcsIGJhdGNoLm9iamVjdElkKVxuICAgICAgfSlcbiAgICAgIGJhdGNoX3F1ZXJ5ID0geyAkbmluOiBxcnkgfVxuICAgIH1cbiAgICBwcm9zcGVjdF9saXN0ID0gdGhpc3MucHJvcHMuc2VsZWN0ZWRDYW1wYWlnbi5wcm9zcGVjdF9saXN0Lm9iamVjdElkXG4gICAgLy8gVE9ETyAtIGFkZCBzdXBwb3J0IGZvciBtb3JlIHRoYW4gMTAwMFxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3QnLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBzZWxlY3RlZENhbXBhaWduOiB0aGlzcy5wcm9wcy5zZWxlY3RlZENhbXBhaWduLFxuICAgICAgZGF0YToge1xuICAgICAgICB3aGVyZTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgYmF0Y2hlczogYmF0Y2hfcXVlcnksXG4gICAgICAgICAgICBsaXN0czogYXBwQ29uZmlnLnBvaW50ZXIoJ1Byb3NwZWN0TGlzdCcsIHByb3NwZWN0X2xpc3QpLFxuICAgICAgICB9KSwgbGltaXQ6MTAwMFxuICAgICAgfSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyB0aGlzcy5zZXRTdGF0ZSh7bmV3UHJvc3BlY3RzOiByZXMucmVzdWx0c30pIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUuZGVidWcoZXJyLnJlc3BvbnNlVGV4dCkgfVxuICAgIH0pXG4gICAgY2FtcGFpZ25JZCA9IHRoaXNzLnByb3BzLnNlbGVjdGVkQ2FtcGFpZ24ub2JqZWN0SWRcbiAgICBxcnkgPSB7XG4gICAgICB3aGVyZTogSlNPTi5zdHJpbmdpZnkoe2NhbXBhaWduOiBhcHBDb25maWcucG9pbnRlcignQ2FtcGFpZ24nLCBjYW1wYWlnbklkKX0pLFxuICAgICAgbGltaXQ6IDEwMDAsXG4gICAgICBjb3VudDogdHJ1ZVxuICAgIH1cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1NlbnRFbWFpbCcsXG4gICAgICBkYXRhOiBxcnksXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyB0aGlzcy5zZXRTdGF0ZSh7ZGVsaXZlcmVkOiByZXMuY291bnR9KX0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUubG9nKGVyci5yZXNwb25zZVRleHQpIH1cbiAgICB9KVxuICAgIHFyeV8xID0ge1xuICAgICAgd2hlcmU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgY2FtcGFpZ246IGFwcENvbmZpZy5wb2ludGVyKCdDYW1wYWlnbicsIGNhbXBhaWduSWQpLFxuICAgICAgICBvcGVuZWQ6IHtcIiRndGVcIjogMH0gXG4gICAgICB9KSxcbiAgICAgIGNvdW50OiB0cnVlXG4gICAgfVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvU2VudEVtYWlsJyxcbiAgICAgIGRhdGE6IHFyeV8xLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgdGhpc3Muc2V0U3RhdGUoe29wZW5lZCA6IHJlcy5jb3VudH0pIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUubG9nKGVyci5yZXNwb25zZVRleHQpIH1cbiAgICB9KVxuICAgIHFyeV8yID0ge1xuICAgICAgd2hlcmU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgY2FtcGFpZ246IGFwcENvbmZpZy5wb2ludGVyKCdDYW1wYWlnbicsIGNhbXBhaWduSWQpLFxuICAgICAgICBmYWlsZWQ6IHtcIiRndGVcIjogMH0gXG4gICAgICB9KSxcbiAgICAgIGNvdW50OiB0cnVlXG4gICAgfVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvU2VudEVtYWlsJyxcbiAgICAgIGRhdGE6IHFyeV8yLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgdGhpc3Muc2V0U3RhdGUoe2JvdW5jZWQgOiByZXMuY291bnR9KSB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2VUZXh0KSB9XG4gICAgfSlcbiAgfSxcblxuICByZXR1cm5Ub092ZXJ2aWV3OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnByb3BzLnRvZ2dsZVNjcmVlbignQ2FtcGFpZ25zJylcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIC8vY29uc29sZS5sb2coJ2NhbXBhaWduIGRldGFpbCcpXG4gICAgY29uc29sZS5sb2codGhpcy5zdGF0ZS5jdXJyZW50U2NyZWVuKVxuICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUuY3VycmVudFNjcmVlbi5pbmRleE9mKFwic2VudCBlbWFpbFwiKSlcbiAgICB0YWJfMSA9IFwiY2FtcGFpZ24tdGFiLWxpbmtcIlxuICAgIHRhYl8yID0gXCJjYW1wYWlnbi10YWItbGlua1wiXG4gICAgdGFiXzMgPSBcImNhbXBhaWduLXRhYi1saW5rXCJcbiAgICB0YWJfNCA9IFwiY2FtcGFpZ24tdGFiLWxpbmtcIlxuICAgIHRhYl81ID0gXCJjYW1wYWlnbi10YWItbGlua1wiXG4gICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50U2NyZWVuID09IFwidGltZWxpbmVcIil7XG4gICAgICAvL2NvbnNvbGUuZGVidWcoJ1NFTEVDVEVEIENBTVBBSUdOJylcbiAgICAgIC8vY29uc29sZS5kZWJ1Zyh0aGlzLnByb3BzLnNlbGVjdGVkQ2FtcGFpZ24pXG4gICAgICBsb2xzY3JlZW4gPSBGb2xsb3d1cFRpbWVsaW5lKHtcbiAgICAgICAgICAgICAgICAgIHRlbXBsYXRlczogdGhpcy5zdGF0ZS50ZW1wbGF0ZXMsIFxuICAgICAgICAgICAgICAgICAgcHJvc3BlY3RzOiB0aGlzLnN0YXRlLnByb3NwZWN0cywgXG4gICAgICAgICAgICAgICAgICBzZWxlY3RlZENhbXBhaWduOiB0aGlzLnByb3BzLnNlbGVjdGVkQ2FtcGFpZ24sIFxuICAgICAgICAgICAgICAgICAgcHJvc3BlY3RMaXN0Q291bnQ6IHRoaXMuc3RhdGUucHJvc3BlY3RMaXN0Q291bnQsIFxuICAgICAgICAgICAgICAgICAgbmV3UHJvc3BlY3RzOiB0aGlzLnN0YXRlLm5ld1Byb3NwZWN0cywgXG4gICAgICAgICAgICAgICAgICB0b2dnbGVUZW1wbGF0ZUVkaXRNZW51OiB0aGlzLnRvZ2dsZVRlbXBsYXRlRWRpdE1lbnUsIFxuICAgICAgICAgICAgICAgICAgaW5pdGlhbEZvbGxvd3VwczogdGhpcy5wcm9wcy5zZWxlY3RlZENhbXBhaWduLmZvbGxvd3Vwc30pXG4gICAgICB0YWJfMSA9IFwiYWN0aXZlLWNhbXBhaWduLXRhYiBjYW1wYWlnbiB0YWItbGlua1wiXG4gICAgfSBlbHNlIGlmKHRoaXMuc3RhdGUuY3VycmVudFNjcmVlbiA9PSBcInJlY2VudCBhY3Rpdml0eVwiKSB7XG4gICAgICBsb2xzY3JlZW4gPSBDYW1wYWlnbkFjdGl2aXR5VmlldyhudWxsKVxuICAgICAgdGFiXzIgPSBcImFjdGl2ZS1jYW1wYWlnbi10YWIgY2FtcGFpZ24gdGFiLWxpbmtcIlxuICAgIH0gZWxzZSBpZih0aGlzLnN0YXRlLmN1cnJlbnRTY3JlZW4gPT0gXCJzY2hlZHVsZWQgZm9sbG93dXBzXCIpIHtcbiAgICAgIGxvbHNjcmVlbiA9IENhbXBhaWduRm9sbG93dXBGZWVkKHtcbiAgICAgICAgICAgICAgICAgICAgYmF0Y2hlczogdGhpcy5wcm9wcy5zZWxlY3RlZENhbXBhaWduLmJhdGNoZXMsIFxuICAgICAgICAgICAgICAgICAgICBmb2xsb3d1cHM6IHRoaXMucHJvcHMuc2VsZWN0ZWRDYW1wYWlnbi5mb2xsb3d1cHN9KVxuICAgICAgdGFiXzMgPSBcImFjdGl2ZS1jYW1wYWlnbi10YWIgY2FtcGFpZ24gdGFiLWxpbmtcIlxuICAgIH0gZWxzZSBpZih0aGlzLnN0YXRlLmN1cnJlbnRTY3JlZW4gPT0gXCJzZW50IG1haWxcIikge1xuICAgICAgbG9sc2NyZWVuID0gQ2FtcGFpZ25TZW50RW1haWwoe1xuICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2FtcGFpZ246IHRoaXMucHJvcHMuc2VsZWN0ZWRDYW1wYWlnbn0pXG4gICAgICB0YWJfNCA9IFwiYWN0aXZlLWNhbXBhaWduLXRhYiBjYW1wYWlnbiB0YWItbGlua1wiXG4gICAgfSBlbHNlIGlmKHRoaXMuc3RhdGUuY3VycmVudFNjcmVlbiA9PSBcImFuYWx5dGljc1wiKSB7XG4gICAgICBsb2xzY3JlZW4gPSBDYW1wYWlnblJlcG9ydChudWxsKVxuICAgICAgdGFiXzUgPSBcImFjdGl2ZS1jYW1wYWlnbi10YWIgY2FtcGFpZ24gdGFiLWxpbmtcIlxuICAgIH0gZWxzZXtcbiAgICAgIGNvbnNvbGUubG9nKCdMT0wnKVxuICAgICAgbG9sc2NyZWVuID0gRm9sbG93dXBUaW1lbGluZSh7XG4gICAgICAgICAgICAgICAgICB0ZW1wbGF0ZXM6IHRoaXMuc3RhdGUudGVtcGxhdGVzLCBcbiAgICAgICAgICAgICAgICAgIHByb3NwZWN0czogdGhpcy5zdGF0ZS5wcm9zcGVjdHMsIFxuICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDYW1wYWlnbjogdGhpcy5wcm9wcy5zZWxlY3RlZENhbXBhaWduLCBcbiAgICAgICAgICAgICAgICAgIHByb3NwZWN0TGlzdENvdW50OiB0aGlzLnN0YXRlLnByb3NwZWN0TGlzdENvdW50LCBcbiAgICAgICAgICAgICAgICAgIG5ld1Byb3NwZWN0czogdGhpcy5zdGF0ZS5uZXdQcm9zcGVjdHMsIFxuICAgICAgICAgICAgICAgICAgdG9nZ2xlVGVtcGxhdGVFZGl0TWVudTogdGhpcy50b2dnbGVUZW1wbGF0ZUVkaXRNZW51LCBcbiAgICAgICAgICAgICAgICAgIHRlbXBsYXRlczogdGhpcy5zdGF0ZS50ZW1wbGF0ZXMsIFxuICAgICAgICAgICAgICAgICAgaW5pdGlhbEZvbGxvd3VwczogdGhpcy5wcm9wcy5zZWxlY3RlZENhbXBhaWduLmZvbGxvd3Vwc30pXG4gICAgfVxuICAgIC8vYWN0aXZlVGFiID0gXCJhY3RpdmUtY2FtcGFpZ24tdGFiIGNhbXBhaWduIHRhYi1saW5rXCJcbiAgICAgIFxuXG4gICAgLy9saXN0X3R5cGUgPSB0aGlzLnByb3BzLnNlbGVjdGVkQ2FtcGFpZ24ucHJvc3BlY3RfbGlzdC5saXN0X3R5cGVcbiAgICBsaXN0X3R5cGUgPSBcIlwiXG4gICAgaWYobGlzdF90eXBlID09IFwibWluaW5nX2pvYlwiKVxuICAgICAgbGlzdF90eXBlID0gUmVhY3QuRE9NLnNwYW4obnVsbCwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG91ZC1kb3dubG9hZFwifSksIFwiwqBcIilcbiAgICBlbHNlIGlmKGxpc3RfdHlwZSA9PSBcInNpZ25hbF9saXN0XCIpXG4gICAgICBsaXN0X3R5cGUgPSBSZWFjdC5ET00uc3BhbihudWxsLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXdpZmlcIn0pLCBcIsKgXCIpXG4gICAgZWxzZVxuICAgICAgbGlzdF90eXBlID0gUmVhY3QuRE9NLnNwYW4obnVsbCwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1saXN0LWFsdFwifSksIFwiwqBcIilcblxuICAgIGJhdGNoZXMgPSB0aGlzLnByb3BzLnNlbGVjdGVkQ2FtcGFpZ24uYmF0Y2hlc1xuICAgIGJhdGNoZXMgPSAoYmF0Y2hlcykgPyBiYXRjaGVzIDogW11cbiAgICBjb25zb2xlLmxvZygnQkFUQ0hFUycpXG4gICAgY29uc29sZS5sb2coYmF0Y2hlcylcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lclwiLCBcbiAgICAgICAgICAgc3R5bGU6IHt3aWR0aDonMTAwJScsaGVpZ2h0OicxMDAlJyxwYWRkaW5nTGVmdDowLHBhZGRpbmdSaWdodDowfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge21hcmdpbkJvdHRvbToxNX0sIGlkOiBcImNhbXBhaWduLXRvcC1kZXRhaWxcIn0sIFxuICAgICAgICBSZWFjdC5ET00uaDUoe3N0eWxlOiB7bWFyZ2luVG9wOjIwLG1hcmdpbkxlZnQ6MjB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgb25DbGljazogdGhpcy5yZXR1cm5Ub092ZXJ2aWV3fSwgXCJDYW1wYWlnbnMgXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uc21hbGwobnVsbCwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7c3R5bGU6IHttYXJnaW5MZWZ0OjEwLCBtYXJnaW5SaWdodDoxMH0sIFxuICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZhIGZhLWNoZXZyb24tcmlnaHRcIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgdGhpcy5wcm9wcy5zZWxlY3RlZENhbXBhaWduLm5hbWVcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5MZWZ0OjIwLGRpc3BsYXk6J2lubGluZS1ibG9jaycsbWFyZ2luUmlnaHQ6MTUsbWFyZ2luQm90dG9tOjAsZm9udFdlaWdodDonYm9sZCcsZm9udFNpemU6MTB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJ0ZXh0LW11dGVkXCJ9LCBcIlBST1NQRUNUIExJU1Q6XCIpLCBcIiDCoFwiXG4gICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwibGFiZWwgbGFiZWwtc3VjY2Vzc1wifSwgXG4gICAgICAgICAgbGlzdF90eXBlLCBcbiAgICAgICAgICB0aGlzLnByb3BzLnNlbGVjdGVkQ2FtcGFpZ24ucHJvc3BlY3RfbGlzdC5uYW1lLCBcbiAgICAgICAgICBcIsKgIMKgIMKgXCIsIFxuICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXVzZXJcIn0pLCBcIsKgXCIsIHRoaXMuc3RhdGUucHJvc3BlY3RMaXN0Q291bnRcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5MZWZ0OjIwLGRpc3BsYXk6J2lubGluZS1ibG9jaycsbWFyZ2luUmlnaHQ6NTAsbWFyZ2luVG9wOjAsZm9udFdlaWdodDonYm9sZCcsZm9udFNpemU6MTB9LCBcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJ0ZXh0LW11dGVkXCJ9LCBcbiAgICAgICAgICBcIkJBVENIRVM6XCJcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwibGFiZWwgbGFiZWwtcHJpbWFyeVwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1zaXRlbWFwXCJ9KSwgXCLCoFwiLCBcbiAgICAgICAgICAoXy5pc0VxdWFsKGJhdGNoZXMsIFtdKSkgPyAxIDogYmF0Y2hlcy5sZW5ndGhcbiAgICAgICAgKSwgXG4gICAgICAgIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2JvcmRlcjonMXB4IHNvbGlkICNkZGQnLGJvcmRlclJhZGl1czo1LGZsb2F0OidyaWdodCcsbWFyZ2luVG9wOi00NSxtYXJnaW5SaWdodDoxMDB9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYmctd2FybmluZ1wiLCBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycscGFkZGluZzoxMCxmb250V2VpZ2h0Oidib2xkJyxjdXJzb3I6J3BvaW50ZXInLHdpZHRoOjcwLHRleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJ0ZXh0LXdhcm5pbmdcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGFwZXItcGxhbmVcIn0pLCBcIiBcIiwgdGhpcy5zdGF0ZS5kZWxpdmVyZWRcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYmctc3VjY2Vzc1wiLCBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycscGFkZGluZzoxMCxmb250V2VpZ2h0Oidib2xkJyxjdXJzb3I6J3BvaW50ZXInLHdpZHRoOjcwLHRleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJ0ZXh0LXN1Y2Nlc3NcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZXllXCJ9KSwgXCIgXCIsIHRoaXMuc3RhdGUub3BlbmVkXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJnLWRhbmdlclwiLCBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycscGFkZGluZzoxMCxmb250V2VpZ2h0Oidib2xkJyxjdXJzb3I6J3BvaW50ZXInLHdpZHRoOjcwLHRleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJ0ZXh0LWRhbmdlclwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1leGNsYW1hdGlvbi1jaXJjbGVcIn0pLCBcIiBcIiwgdGhpcy5zdGF0ZS5ib3VuY2VkXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFxuICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgc3R5bGU6IHtmbG9hdDogJ3JpZ2h0JywgbWFyZ2luVG9wOiAtMzUsIG1hcmdpblJpZ2h0OiAzMCwgZGlzcGxheTonbm9uZSd9LCBcbiAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4tc21cIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZW52ZWxvcGVcIn0pLCBcIiBTZW5kIVwiXG4gICAgICAgIClcbiAgICAgICAgXG4gICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJuYXYgbmF2LXRhYnMgY2FtcGFpZ24tdGFic1wiLCByb2xlOiBcInRhYmxpc3RcIiwgc3R5bGU6IHtwYWRkaW5nUmlnaHQ6MH19LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJjYW1wYWlnbi10YWJcIn0sIFwiIFwiLCBSZWFjdC5ET00uYSh7b25DbGljazogdGhpcy5jaGFuZ2VTY3JlZW4sIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiB0YWJfMX0sIFwiVElNRUxJTkVcIikpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJjYW1wYWlnbi10YWJcIn0sIFJlYWN0LkRPTS5hKHtvbkNsaWNrOiB0aGlzLmNoYW5nZVNjcmVlbiwgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IHRhYl8yfSwgXCJSRUNFTlQgQUNUSVZJVFlcIikpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJjYW1wYWlnbi10YWJcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe29uQ2xpY2s6IHRoaXMuY2hhbmdlU2NyZWVuLCBocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogdGFiXzMsIHN0eWxlOiB7Zm9udFNpemU6MTJ9fSwgXG4gICAgICAgICAgICAgICAgICAgIFwiU0NIRURVTEVEIEZPTExPV1VQU1wiKSksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcImNhbXBhaWduLXRhYlwifSwgUmVhY3QuRE9NLmEoe29uQ2xpY2s6IHRoaXMuY2hhbmdlU2NyZWVuLCBocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogdGFiXzR9LCBcIlNFTlQgTUFJTFwiKSksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcImNhbXBhaWduLXRhYlwifSwgUmVhY3QuRE9NLmEoe29uQ2xpY2s6IHRoaXMuY2hhbmdlU2NyZWVuLCBocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogdGFiXzV9LCBcIkFOQUxZVElDU1wiKSlcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBsb2xzY3JlZW4sIFxuXG4gICAgICAgICAgKHRoaXMuc3RhdGUudGVtcGxhdGVEZXRhaWxNb2RlKSA/IEVkaXRUZW1wbGF0ZVZpZXcoe1xuICAgICAgICAgICAgZWRpdE1vZGU6IHRoaXMuc3RhdGUuZWRpdE1vZGUsIFxuICAgICAgICAgICAgaW5pdGlhbFRlbXBsYXRlVmFsdWVzOiB0aGlzLnN0YXRlLmN1cnJlbnRUZW1wbGF0ZSwgXG4gICAgICAgICAgICBzYXZlVGVtcGxhdGU6IHRoaXMuc2F2ZVRlbXBsYXRlLCBcbiAgICAgICAgICAgIHByb3NwZWN0OiB0aGlzLnN0YXRlLnByb3NwZWN0c1swXSwgXG4gICAgICAgICAgICB0b2dnbGVUZW1wbGF0ZUVkaXRNZW51OiB0aGlzLnRvZ2dsZVRlbXBsYXRlRWRpdE1lbnUsIFxuICAgICAgICAgICAgZm9sbG93dXBEYXk6IHRoaXMuc3RhdGUuZm9sbG93dXBEYXl9KSA6IFwiXCJcbiAgICAgIClcbiAgICApO1xuICB9LFxuXG4gIHNhdmVUZW1wbGF0ZTogZnVuY3Rpb24odGVtcGxhdGUsIG5ld1RlbXBsYXRlKSB7XG4gICAgdGVtcGxhdGVzID0gdGhpcy5zdGF0ZS50ZW1wbGF0ZXNcbiAgICBmb3IoaT0wO2k8IHRoaXMuc3RhdGUudGVtcGxhdGVzLmxlbmd0aDsgaSsrKVxuICAgICAgaWYodGhpcy5zdGF0ZS50ZW1wbGF0ZXNbaV0ubmFtZSA9PSB0ZW1wbGF0ZS5uYW1lKVxuICAgICAgICBicmVha1xuICAgIFxuICAgIGNvbnNvbGUubG9nKHRlbXBsYXRlKVxuICAgIGlmKG5ld1RlbXBsYXRlKXtcbiAgICAgIHRlbXBsYXRlLnN1YmplY3QgPSB0ZW1wbGF0ZS5zdWJqZWN0XG4gICAgICB0ZW1wbGF0ZS5uYW1lID0gdGVtcGxhdGUubmFtZVxuICAgICAgdGVtcGxhdGUuYm9keSA9IHRlbXBsYXRlLmJvZHlcbiAgICAgIHRlbXBsYXRlcy5wdXNoKHRlbXBsYXRlKVxuXG4gICAgICAkLmFqYXgoe1xuICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvVGVtcGxhdGUnLFxuICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICB0eXBlOidQT1NUJyxcbiAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbmFtZSA6IHRlbXBsYXRlLm5hbWUsXG4gICAgICAgICAgc3ViamVjdDogdGVtcGxhdGUuc3ViamVjdCxcbiAgICAgICAgICBib2R5OiB0ZW1wbGF0ZS5ib2R5LFxuICAgICAgICAgIHVzZXI6e1xuICAgICAgICAgICAgX190eXBlOiAnUG9pbnRlcicsXG4gICAgICAgICAgICBjbGFzc05hbWU6J19Vc2VyJyxcbiAgICAgICAgICAgIG9iamVjdElkOkpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5vYmplY3RJZCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbXBhbnk6SlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLmNvbXBhbnksXG4gICAgICAgIH0pLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbigpIHtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGVtcGxhdGVzW2ldLnN1YmplY3QgPSB0ZW1wbGF0ZS5zdWJqZWN0XG4gICAgICB0ZW1wbGF0ZXNbaV0uYm9keSA9IHRlbXBsYXRlLmJvZHlcblxuICAgICAgJC5hamF4KHtcbiAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1RlbXBsYXRlLycrdGVtcGxhdGVzW2ldLm9iamVjdElkLFxuICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBuYW1lIDogdGVtcGxhdGUubmFtZSxcbiAgICAgICAgICBzdWJqZWN0OiB0ZW1wbGF0ZS5zdWJqZWN0LFxuICAgICAgICAgIGJvZHk6IHRlbXBsYXRlLmJvZHksXG4gICAgICAgIH0pLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbigpIHtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlKHt0ZW1wbGF0ZXM6IHRlbXBsYXRlcyB9KVxuXG4gIH0sXG5cbiAgdG9nZ2xlVGVtcGxhdGVFZGl0TWVudTogZnVuY3Rpb24oY3VycmVudFRlbXBsYXRlLCBlZGl0TW9kZSkge1xuICAgIGVkaXRNb2RlID0gKGVkaXRNb2RlKSA/IHRydWUgOiBmYWxzZVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgY3VycmVudFRlbXBsYXRlOiBjdXJyZW50VGVtcGxhdGUsXG4gICAgICB0ZW1wbGF0ZURldGFpbE1vZGU6ICF0aGlzLnN0YXRlLnRlbXBsYXRlRGV0YWlsTW9kZSxcbiAgICB9KVxuICB9XG59KTtcblxudmFyIEZvbGxvd3VwVGltZWxpbmUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdGb2xsb3d1cFRpbWVsaW5lJyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtOCBwYW5lbCBwYW5lbC1kZWZhdWx0XCIsIFxuICAgICAgICAgICAgICAgc3R5bGU6IHtoZWlnaHQ6NDM2LHBhZGRpbmdMZWZ0OjMwNSxwYWRkaW5nVG9wOjUwLG92ZXJmbG93OidhdXRvJyxib3JkZXJSaWdodDowLGJvcmRlclJhZGl1czowLCBib3JkZXJUb3A6MH19LCBcbiAgICAgICAgICAgICAgICBUaW1lbGluZSh7XG4gICAgICAgICAgICAgICAgICB0ZW1wbGF0ZXM6IHRoaXMucHJvcHMudGVtcGxhdGVzLCBcbiAgICAgICAgICAgICAgICAgIHByb3NwZWN0czogdGhpcy5wcm9wcy5wcm9zcGVjdHMsIFxuICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDYW1wYWlnbjogdGhpcy5wcm9wcy5zZWxlY3RlZENhbXBhaWduLCBcbiAgICAgICAgICAgICAgICAgIHByb3NwZWN0TGlzdENvdW50OiB0aGlzLnByb3BzLnByb3NwZWN0TGlzdENvdW50LCBcbiAgICAgICAgICAgICAgICAgIG5ld1Byb3NwZWN0czogdGhpcy5wcm9wcy5uZXdQcm9zcGVjdHMsIFxuICAgICAgICAgICAgICAgICAgdG9nZ2xlVGVtcGxhdGVFZGl0TWVudTogdGhpcy5wcm9wcy50b2dnbGVUZW1wbGF0ZUVkaXRNZW51LCBcbiAgICAgICAgICAgICAgICAgIGluaXRpYWxGb2xsb3d1cHM6IHRoaXMucHJvcHMuaW5pdGlhbEZvbGxvd3Vwc30pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC00XCIsIFxuICAgICAgICAgICAgICAgc3R5bGU6IHtwYWRkaW5nTGVmdDowLHBhZGRpbmdSaWdodDowLGhlaWdodDo0MzZ9fSwgXG4gICAgICAgICAgICBUZW1wbGF0ZXNNZW51KHtcbiAgICAgICAgICAgICAgdGVtcGxhdGVzOiB0aGlzLnByb3BzLnRlbXBsYXRlcywgXG4gICAgICAgICAgICAgIHRvZ2dsZVRlbXBsYXRlRWRpdE1lbnU6IHRoaXMucHJvcHMudG9nZ2xlVGVtcGxhdGVFZGl0TWVudX0pXG4gICAgICAgICAgKVxuICAgICAgICApXG5cbiAgICApXG4gIH1cbn0pXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gRm9sbG93dXBGZWVkXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGZvbGxvd3VwczogW11cbiAgICB9XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBmb3IgZWFjaCBiYXRjaCBmaW5kIGZvbGxvd3VwcyByZW1haW5pbmdcbiAgICAgICAgLy8gc29ydCBmb2xsb3d1cHMgYnkgYXNjZW5kaW5nIGZvbGxvd3VwIGRheVxuICAgICAgICAvL1xuICAgIC8vIEJhdGNoIFN0YXJ0IERhdGVcbiAgICAvLyBDdXJyZW50IEJhdGNoIERhdGVcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgZm9sbG93dXBzID0gXy5tYXAodGhpcy5wcm9wcy5iYXRjaGVzLCBmdW5jdGlvbihiYXRjaCkge1xuICAgICAgbm93ID0gbW9tZW50KCkuc3RhcnRPZignZGF5JykudmFsdWVPZigpLzEwMDBcbiAgICAgIGJhdGNoLmN1cnJlbnREYXkgPSBtb21lbnQoYmF0Y2guc3RhcnRlZCkuZGlmZihtb21lbnQobm93KSwgICdkYXlzJykgKiAtMVxuICAgICAgcmV0dXJuIF8ubWFwKHRoaXNzLnByb3BzLmZvbGxvd3VwcywgZnVuY3Rpb24oZm9sbG93dXApIHtcbiAgICAgICAgZm9sbG93dXAuYmF0Y2ggPSBiYXRjaFxuICAgICAgICBpZihmb2xsb3d1cC5kYXkgPj0gYmF0Y2guY3VycmVudERheSlcbiAgICAgICAgICByZXR1cm4gZm9sbG93dXBcbiAgICAgIH0pXG4gICAgfSlcbiAgICBmb2xsb3d1cHMgPSBfLnNvcnRCeShmb2xsb3d1cHMsIGZ1bmN0aW9uKGZvbGxvd3VwKXsgcmV0dXJuIGZvbGxvd3VwLmRheSB9KVxuXG4gICAgY29uc29sZS5kZWJ1Zyhmb2xsb3d1cHMpXG5cbiAgICBhY3Rpdml0aWVzID0gXy5tYXAoZm9sbG93dXBzWzBdLCBmdW5jdGlvbihmb2xsb3d1cCkge1xuICAgICAgcmV0dXJuIEZvbGxvd3Vwcyh7Zm9sbG93dXA6IGZvbGxvd3VwLCBiYXRjaDogZm9sbG93dXAuYmF0Y2h9KVxuICAgIH0pXG4gICAgY29uc29sZS5kZWJ1ZyhhY3Rpdml0aWVzKVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7b3ZlcmZsb3c6J2F1dG8nLGhlaWdodDo0MzZ9fSwgXG4gICAgICAgIFJlYWN0LkRPTS50YWJsZSh7Y2xhc3NOYW1lOiBcInRhYmxlXCIsIHN0eWxlOiB7bWFyZ2luQm90dG9tOjB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRoZWFkKG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIlNjaGVkdWxlZCBmb3IgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIk91dHJlYWNoIFN0YWdlIFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJQcm9zcGVjdCBMaXN0XCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIlRlbXBsYXRlIFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInfX0sIFwiQWN0aW9uIEJ1dHRvbnNcIilcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udGJvZHkobnVsbCwgXG4gICAgICAgICAgICBhY3Rpdml0aWVzXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KVxuXG52YXIgRm9sbG93dXBzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnRm9sbG93dXBzJyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAvLyB0aGlzLnByb3BzLmJhdGNoXG4gICAgLy8gdGhpcy5wcm9wcy5mb2xsb3d1cFxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udHIobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvY2tcIn0pLCBcIsKgXCIgKyAnICcgK1xuICAgICAgICAgICAgICBcIjI5IG1pbnV0ZXMgYWdvXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgICBcInNlY29uZFwiXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2N1cnNvcjoncG9pbnRlcid9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWxpc3QtYWx0XCJ9KSwgXCIgwqBcIiArICcgJyArXG4gICAgICAgICAgICBcIkJvc3RvbiBWUCBTYWxlcyAtIFJldGFpbFwiXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2N1cnNvcjoncG9pbnRlcid9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWZpbGUtdGV4dC1vXCJ9KSwgXCIgwqBcIiArICcgJyArXG4gICAgICAgICAgICBcIkZvbGxvd3VwICMyIC0gUHJvdmlkZSBWYWx1ZSBcIiwgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwidGV4dC1tdXRlZFwifSwgXCIgU3ViamVjdDogSnVzdCB3YW50ZWQgdG8gZm9sbG93dXAgb24gdGhlIGxhc3QgZW1haWwgXCIpLCBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJ0ZXh0LW11dGVkXCJ9LCBcIiBCb2R5OiBKdXN0IHdhbnRlZCB0byBmb2xsb3d1cCBvbiB0aGUgbGFzdCBlbWFpbCBcIilcblxuICAgICAgICAgICAgKVxuICAgICAgICAgICksIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzXCIsIHN0eWxlOiB7d2lkdGg6MTcwLGZvbnRXZWlnaHQ6J2JvbGQnLG1hcmdpbkJvdHRvbToyfX0sIFwiU2VuZCBOb3dcIiksIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14c1wiLCBzdHlsZToge3dpZHRoOjE3MCxmb250V2VpZ2h0Oidib2xkJyxtYXJnaW5Cb3R0b206Mn19LCBcIlJlbWluZCBtZSBpbiAxIGhvdXJcIiksIFJlYWN0LkRPTS5icihudWxsKVxuICAgICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH1cbn0pXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubG9sID0gXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIENhbXBhaWduIFJlcG9ydFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgfVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHsgXG4gICAgdGVzdERhdGEgPSB0aGlzLnRlc3REYXRhKClcbiAgICB2YXIgaW5kdXN0cnlDaGFydCAgID0gZGMucGllQ2hhcnQoXCIjaW5kdXN0cnktY2hhcnRcIiksXG4gICAgICAgIHNwZW5kSGlzdENoYXJ0ICA9IGRjLmJhckNoYXJ0KFwiI2NoYXJ0LWhpc3Qtc3BlbmRcIiksXG4gICAgICAgIHNwZW5kZXJSb3dDaGFydCA9IGRjLnJvd0NoYXJ0KFwiI2NoYXJ0LXJvdy1zcGVuZGVyc1wiKTtcblxuICAgIC8vIHNldCBjcm9zc2ZpbHRlclxuICAgIHZhciBuZHggPSBjcm9zc2ZpbHRlcihzcGVuZERhdGEpLFxuICAgICAgICB5ZWFyRGltICA9IG5keC5kaW1lbnNpb24oZnVuY3Rpb24oZCkge3JldHVybiArZC5ZZWFyO30pLFxuICAgICAgICBzcGVuZERpbSA9IG5keC5kaW1lbnNpb24oZnVuY3Rpb24oZCkge3JldHVybiBNYXRoLmZsb29yKGQuU3BlbnQvMTApO30pLFxuICAgICAgICBuYW1lRGltICA9IG5keC5kaW1lbnNpb24oZnVuY3Rpb24oZCkge3JldHVybiBkLk5hbWU7fSksXG4gICAgICAgIHNwZW5kUGVyWWVhciA9IHllYXJEaW0uZ3JvdXAoKS5yZWR1Y2VTdW0oZnVuY3Rpb24oZCkge3JldHVybiArZC5TcGVudDt9KSxcbiAgICAgICAgc3BlbmRQZXJOYW1lID0gbmFtZURpbS5ncm91cCgpLnJlZHVjZVN1bShmdW5jdGlvbihkKSB7cmV0dXJuICtkLlNwZW50O30pLFxuICAgICAgICBzcGVuZEhpc3QgICAgPSBzcGVuZERpbS5ncm91cCgpLnJlZHVjZUNvdW50KCk7XG5cbiAgICBpbmR1c3RyeUNoYXJ0XG4gICAgICAgIC53aWR0aCgyMDApLmhlaWdodCgyMDApXG4gICAgICAgIC5kaW1lbnNpb24oeWVhckRpbSlcbiAgICAgICAgLmdyb3VwKHNwZW5kUGVyWWVhcilcbiAgICAgICAgLmlubmVyUmFkaXVzKDUwKTtcblxuICAgIC8vXG4gICAgLy8gQmF0Y2ggQW5hbHl0aWNzIC0gQnViYmxlIENoYXJ0XG4gICAgLy8gQmF0Y2ggQmxvY2sgQ2hhcnRzXG4gICAgLy8gUGllIENoYXJ0IC0gSW5kdXN0cnlcbiAgICAvLyBSZXZlbnVlIC0gUENcbiAgICAvLyBDb21wYW55IFNpemUgLSBQQ1xuICAgIC8vIE9wZW5zIC8gUmVwbGllcyAvIExpbmsgQ2xpY2tzIC8gQm91bmNlcyAtIEJhciBDaGFydFxuICAgIC8vIFRpdGxlcyAtIFBDXG4gICAgLy8gVGltZSAvIERhdGUgRW1haWwgU2VudCAtIExpbmUgQ2hhcnRcbiAgICAvLyBEYXRlIFByb3NwZWN0ZWQgLSBCQ1xuICAgIC8vXG4gIH0sXG4gIFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICBcIlJlcG9ydCBWaWV3XCIsIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJpbmR1c3RyeS1jaGFydFwifSlcbiAgICAgIClcbiAgICApXG4gIH0sXG5cbiAgdGVzdERhdGE6IGZ1bmN0aW9uKCkgeyBcbiAgICByZXR1cm4gW3tcIndlYnNpdGVcIjogXCJodHRwOi8vd3d3LnRlbmNhdGUuY29tXCIsIFwiY2FtcGFpZ25cIjoge1wiY2xhc3NOYW1lXCI6IFwiQ2FtcGFpZ25cIiwgXCJfX3R5cGVcIjogXCJQb2ludGVyXCIsIFwib2JqZWN0SWRcIjogXCJubUVsVTd6Y0JmXCJ9LCBcInBvc1wiOiBcIlxcXFx1MDBhMERpcmVjdG9yIFNhbGVzICYgTWFya2V0aW5nIEFlcm9zcGFjZVwiLCBcIl9fdHlwZVwiOiBcIk9iamVjdFwiLCBcInVwZGF0ZWRBdFwiOiBcIjIwMTQtMTAtMTBUMTM6Mjk6MjIuNTE2WlwiLCBcImNyZWF0ZWRBdFwiOiBcIjIwMTQtMTAtMDdUMTU6MjA6MTguNDgxWlwiLCBcImNpdHlcIjogXCJDb3ZlbnRyeSwgVW5pdGVkIEtpbmdkb21cXFxcdTAwYTBcIiwgXCJhcmNoaXZlZFwiOiB0cnVlLCBcImxvYWRpbmdcIjogZmFsc2UsIFwib2JqZWN0SWRcIjogXCJmdHlLQ0dtUjlIXCIsIFwiY29tcGFueV9uYW1lXCI6IFwiVGVuY2F0ZVwiLCBcIm1haWxndW5faWRcIjogXCI8MjAxNDEwMTAxNDAyMTguNTg4ODMuNzUwNDBAY3VzdG9tZXJvaHEuY29tPlwiLCBcImVtYWlsX2d1ZXNzZXNcIjogW3tcImNsYXNzTmFtZVwiOiBcIkVtYWlsR3Vlc3NcIiwgXCJfX3R5cGVcIjogXCJQb2ludGVyXCIsIFwib2JqZWN0SWRcIjogXCJ1OFNldENRT0pQXCJ9LCB7XCJjbGFzc05hbWVcIjogXCJFbWFpbEd1ZXNzXCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwiUDBLbUZHOTJkS1wifV0sIFwiZW1haWxcIjogXCJuLnRpZmZpbkB0ZW5jYXRlLmNvbVwiLCBcInByb3NwZWN0X2NyZWF0ZWRfYXRcIjogXCIyMDE0LTEwLTA3VDE1OjIwOjE4LjQ4MVpcIiwgXCJjb21wYW55XCI6IHtcImNsYXNzTmFtZVwiOiBcIkNvbXBhbnlcIiwgXCJfX3R5cGVcIjogXCJQb2ludGVyXCIsIFwib2JqZWN0SWRcIjogXCJmcUhXcDVOc0Z4XCJ9LCBcImxpc3RzXCI6IFt7XCJjbGFzc05hbWVcIjogXCJQcm9zcGVjdExpc3RcIiwgXCJfX3R5cGVcIjogXCJQb2ludGVyXCIsIFwib2JqZWN0SWRcIjogXCJpekxiVnVseXI2XCJ9XSwgXCJ1c2VyXCI6IHtcImNsYXNzTmFtZVwiOiBcIlVzZXJcIiwgXCJfX3R5cGVcIjogXCJQb2ludGVyXCIsIFwib2JqZWN0SWRcIjogXCJ4V0VTaXc1U21kXCJ9LCBcImNvbXBhbnlfc2l6ZVwiOiBcIjEwMDEtNTAwMCBlbXBsb3llZXNcIiwgXCJuYW1lXCI6IFwiTmljayBUaWZmaW5cIiwgXCJpbmR1c3RyeVwiOiBcIlRleHRpbGVzXCIsIFwibGlua2VkaW5fdXJsXCI6IFwidWsubGlua2VkaW4uY29tL3B1Yi9uaWNrLXRpZmZpbi81LzQzNC8yNTZcIiwgXCJiYXRjaFwiOiB7XCJjbGFzc05hbWVcIjogXCJQcm9zcGVjdEJhdGNoXCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwiWVBhVEdiRDU2YVwifSwgXCJjbGFzc05hbWVcIjogXCJQcm9zcGVjdFwiLCBcInF1ZXVlZFwiOiB0cnVlfSwge1wid2Vic2l0ZVwiOiBcImh0dHA6Ly93d3cucGVhcnNvbi5jb21cIiwgXCJjYW1wYWlnblwiOiB7XCJjbGFzc05hbWVcIjogXCJDYW1wYWlnblwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcIm5tRWxVN3pjQmZcIn0sIFwicG9zXCI6IFwiXFxcXHUwMGEwRGlyZWN0b3IsIFNhbGVzIFBlcmZvcm1hbmNlIE1hbmFnZW1lbnRcIiwgXCJfX3R5cGVcIjogXCJPYmplY3RcIiwgXCJ1cGRhdGVkQXRcIjogXCIyMDE0LTEwLTEwVDEzOjI5OjIyLjc4MFpcIiwgXCJjcmVhdGVkQXRcIjogXCIyMDE0LTEwLTA3VDE1OjIwOjE3Ljg3M1pcIiwgXCJjaXR5XCI6IFwiUGhvZW5peCwgQXJpem9uYSBBcmVhXFxcXHUwMGEwXCIsIFwiYXJjaGl2ZWRcIjogdHJ1ZSwgXCJsb2FkaW5nXCI6IGZhbHNlLCBcIm9iamVjdElkXCI6IFwiTFBpRTBDY0VzUlwiLCBcImNvbXBhbnlfbmFtZVwiOiBcIlBlYXJzb24gcGxjXCIsIFwibWFpbGd1bl9pZFwiOiBcIjwyMDE0MTAxMDE0MDIxOS41MDAxNS4yMDU3MUBjdXN0b21lcm9ocS5jb20+XCIsIFwiZW1haWxfZ3Vlc3Nlc1wiOiBbe1wiY2xhc3NOYW1lXCI6IFwiRW1haWxHdWVzc1wiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcIlE1N2t3TjFMUVRcIn0sIHtcImNsYXNzTmFtZVwiOiBcIkVtYWlsR3Vlc3NcIiwgXCJfX3R5cGVcIjogXCJQb2ludGVyXCIsIFwib2JqZWN0SWRcIjogXCI1M0swbFdZN2h2XCJ9XSwgXCJlbWFpbFwiOiBcImphc29uLmxpbmtlZGluQHBlYXJzb24uY29tXCIsIFwicHJvc3BlY3RfY3JlYXRlZF9hdFwiOiBcIjIwMTQtMTAtMDdUMTU6MjA6MTcuODczWlwiLCBcImNvbXBhbnlcIjoge1wiY2xhc3NOYW1lXCI6IFwiQ29tcGFueVwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcImZxSFdwNU5zRnhcIn0sIFwibGlzdHNcIjogW3tcImNsYXNzTmFtZVwiOiBcIlByb3NwZWN0TGlzdFwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcIml6TGJWdWx5cjZcIn1dLCBcInVzZXJcIjoge1wiY2xhc3NOYW1lXCI6IFwiVXNlclwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcInhXRVNpdzVTbWRcIn0sIFwiY29tcGFueV9zaXplXCI6IFwiMTAsMDAxKyBlbXBsb3llZXNcIiwgXCJuYW1lXCI6IFwiSmFzb24gVXBhaFwiLCBcImluZHVzdHJ5XCI6IFwiRWR1Y2F0aW9uIE1hbmFnZW1lbnRcIiwgXCJsaW5rZWRpbl91cmxcIjogXCJ3d3cubGlua2VkaW4uY29tL3B1Yi9qYXNvbi11cGFoLzcvMjMzLzk0MFwiLCBcImJhdGNoXCI6IHtcImNsYXNzTmFtZVwiOiBcIlByb3NwZWN0QmF0Y2hcIiwgXCJfX3R5cGVcIjogXCJQb2ludGVyXCIsIFwib2JqZWN0SWRcIjogXCJZUGFUR2JENTZhXCJ9LCBcImNsYXNzTmFtZVwiOiBcIlByb3NwZWN0XCIsIFwicXVldWVkXCI6IHRydWV9LCB7XCJ3ZWJzaXRlXCI6IFwiaHR0cDovL3d3dy5ybXdtdXNpYy5jb21cIiwgXCJjYW1wYWlnblwiOiB7XCJjbGFzc05hbWVcIjogXCJDYW1wYWlnblwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcIm5tRWxVN3pjQmZcIn0sIFwicG9zXCI6IFwiXFxcXHUwMGEwRGlyZWN0b3Igb2YgU2FsZXMgYW5kIE1hcmtldGluZ1wiLCBcIl9fdHlwZVwiOiBcIk9iamVjdFwiLCBcInVwZGF0ZWRBdFwiOiBcIjIwMTQtMTAtMTBUMTM6Mjk6MjMuMDQ5WlwiLCBcImNyZWF0ZWRBdFwiOiBcIjIwMTQtMTAtMDdUMTU6MjA6MTYuNzM1WlwiLCBcImNpdHlcIjogXCJUb3JvbnRvLCBPbnRhcmlvLCBDYW5hZGFcXFxcdTAwYTBcIiwgXCJhcmNoaXZlZFwiOiB0cnVlLCBcImxvYWRpbmdcIjogZmFsc2UsIFwib3BlbmVkXCI6IHRydWUsIFwib2JqZWN0SWRcIjogXCJDT1NweVhnc0QyXCIsIFwiY29tcGFueV9uYW1lXCI6IFwiUk1XIE11c2ljXCIsIFwibWFpbGd1bl9pZFwiOiBcIjwyMDE0MTAxMDE0MDIxOS41MDAxOS42NzQxOEBjdXN0b21lcm9ocS5jb20+XCIsIFwiZW1haWxfZ3Vlc3Nlc1wiOiBbe1wiY2xhc3NOYW1lXCI6IFwiRW1haWxHdWVzc1wiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcIjNPRUt0SXhJQXBcIn0sIHtcImNsYXNzTmFtZVwiOiBcIkVtYWlsR3Vlc3NcIiwgXCJfX3R5cGVcIjogXCJQb2ludGVyXCIsIFwib2JqZWN0SWRcIjogXCJ4dkdiVVlwbzQzXCJ9XSwgXCJlbWFpbFwiOiBcIm5vX2VtYWlsXCIsIFwicHJvc3BlY3RfY3JlYXRlZF9hdFwiOiBcIjIwMTQtMTAtMDdUMTU6MjA6MTYuNzM1WlwiLCBcImNvbXBhbnlcIjoge1wiY2xhc3NOYW1lXCI6IFwiQ29tcGFueVwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcImZxSFdwNU5zRnhcIn0sIFwibGlzdHNcIjogW3tcImNsYXNzTmFtZVwiOiBcIlByb3NwZWN0TGlzdFwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcIml6TGJWdWx5cjZcIn1dLCBcInVzZXJcIjoge1wiY2xhc3NOYW1lXCI6IFwiVXNlclwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcInhXRVNpdzVTbWRcIn0sIFwiY29tcGFueV9zaXplXCI6IFwiMTEtNTAgZW1wbG95ZWVzXCIsIFwibmFtZVwiOiBcIkxhdXJhIE5pa29saWNcIiwgXCJpbmR1c3RyeVwiOiBcIk11c2ljXCIsIFwibGlua2VkaW5fdXJsXCI6IFwiY2EubGlua2VkaW4uY29tL3B1Yi9sYXVyYS1uaWtvbGljLzUwLzQ1MC83NzFcIiwgXCJiYXRjaFwiOiB7XCJjbGFzc05hbWVcIjogXCJQcm9zcGVjdEJhdGNoXCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwiWVBhVEdiRDU2YVwifSwgXCJjbGFzc05hbWVcIjogXCJQcm9zcGVjdFwiLCBcInF1ZXVlZFwiOiB0cnVlfSwge1wid2Vic2l0ZVwiOiBcImh0dHA6Ly93d3cuc2F1ZGlhY2FyZ28uY29tXCIsIFwiY2FtcGFpZ25cIjoge1wiY2xhc3NOYW1lXCI6IFwiQ2FtcGFpZ25cIiwgXCJfX3R5cGVcIjogXCJQb2ludGVyXCIsIFwib2JqZWN0SWRcIjogXCJubUVsVTd6Y0JmXCJ9LCBcInBvc1wiOiBcIlxcXFx1MDBhMERpcmVjdG9yIEdsb2JhbCBTYWxlcyBTdXBwb3J0XCIsIFwiX190eXBlXCI6IFwiT2JqZWN0XCIsIFwidXBkYXRlZEF0XCI6IFwiMjAxNC0xMC0xMFQxMzoyOToyMy4zMjdaXCIsIFwiY3JlYXRlZEF0XCI6IFwiMjAxNC0xMC0wN1QxNToyMDoxNi4xMjdaXCIsIFwiY2l0eVwiOiBcIlNhdWRpIEFyYWJpYVxcXFx1MDBhMFwiLCBcImFyY2hpdmVkXCI6IHRydWUsIFwibG9hZGluZ1wiOiBmYWxzZSwgXCJvcGVuZWRcIjogdHJ1ZSwgXCJvYmplY3RJZFwiOiBcIktlMDZnNmtTazVcIiwgXCJjb21wYW55X25hbWVcIjogXCJTYXVkaSBBaXJsaW5lcyBDYXJnbyBDb21wYW55XCIsIFwibWFpbGd1bl9pZFwiOiBcIjwyMDE0MTAxMDE0MDIyMC41ODg4Ny41MjQ4NEBjdXN0b21lcm9ocS5jb20+XCIsIFwiZW1haWxfZ3Vlc3Nlc1wiOiBbe1wiY2xhc3NOYW1lXCI6IFwiRW1haWxHdWVzc1wiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcIm8zM0phdmhTcHlcIn0sIHtcImNsYXNzTmFtZVwiOiBcIkVtYWlsR3Vlc3NcIiwgXCJfX3R5cGVcIjogXCJQb2ludGVyXCIsIFwib2JqZWN0SWRcIjogXCJsM3Z5MlR4RjczXCJ9XSwgXCJlbWFpbFwiOiBcIm5vX2VtYWlsXCIsIFwicHJvc3BlY3RfY3JlYXRlZF9hdFwiOiBcIjIwMTQtMTAtMDdUMTU6MjA6MTYuMTI3WlwiLCBcImNvbXBhbnlcIjoge1wiY2xhc3NOYW1lXCI6IFwiQ29tcGFueVwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcImZxSFdwNU5zRnhcIn0sIFwibGlzdHNcIjogW3tcImNsYXNzTmFtZVwiOiBcIlByb3NwZWN0TGlzdFwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcIml6TGJWdWx5cjZcIn1dLCBcInVzZXJcIjoge1wiY2xhc3NOYW1lXCI6IFwiVXNlclwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcInhXRVNpdzVTbWRcIn0sIFwiY29tcGFueV9zaXplXCI6IFwiMTAwMS01MDAwIGVtcGxveWVlc1wiLCBcIm5hbWVcIjogXCJSYWluZXIgTXVlbGxlclwiLCBcImluZHVzdHJ5XCI6IFwiQWlybGluZXMvQXZpYXRpb25cIiwgXCJsaW5rZWRpbl91cmxcIjogXCJzYS5saW5rZWRpbi5jb20vcHViL3JhaW5lci1tdWVsbGVyLzUvYTQ4LzQyOFwiLCBcImJhdGNoXCI6IHtcImNsYXNzTmFtZVwiOiBcIlByb3NwZWN0QmF0Y2hcIiwgXCJfX3R5cGVcIjogXCJQb2ludGVyXCIsIFwib2JqZWN0SWRcIjogXCJZUGFUR2JENTZhXCJ9LCBcImNsYXNzTmFtZVwiOiBcIlByb3NwZWN0XCIsIFwicXVldWVkXCI6IHRydWV9LCB7XCJ3ZWJzaXRlXCI6IFwiaHR0cDovL3d3dy5zaGFkb3d6cHJvdGVjdGlvbi5jb21cIiwgXCJjYW1wYWlnblwiOiB7XCJjbGFzc05hbWVcIjogXCJDYW1wYWlnblwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcIm5tRWxVN3pjQmZcIn0sIFwicG9zXCI6IFwiXFxcXHUwMGEwRGlyZWN0b3JcIiwgXCJfX3R5cGVcIjogXCJPYmplY3RcIiwgXCJ1cGRhdGVkQXRcIjogXCIyMDE0LTEwLTEwVDEzOjI5OjIzLjU5OFpcIiwgXCJjcmVhdGVkQXRcIjogXCIyMDE0LTEwLTA3VDE1OjIwOjE1LjE0N1pcIiwgXCJjaXR5XCI6IFwiTmV3IERlbGhpIEFyZWEsIEluZGlhXFxcXHUwMGEwXCIsIFwiYXJjaGl2ZWRcIjogdHJ1ZSwgXCJsb2FkaW5nXCI6IGZhbHNlLCBcIm9wZW5lZFwiOiB0cnVlLCBcIm9iamVjdElkXCI6IFwiZjQ0WVUyWXJtN1wiLCBcImNvbXBhbnlfbmFtZVwiOiBcIk0vUyBHb2xkZW4gQnJpY2tzIENvbnN0cnVjdGlvbnMgUHZ0LiBMdGQuXCIsIFwibWFpbGd1bl9pZFwiOiBcIjwyMDE0MTAxMDE0MDIyMC4xOTk2MC4zMTU3QGN1c3RvbWVyb2hxLmNvbT5cIiwgXCJlbWFpbF9ndWVzc2VzXCI6IFt7XCJjbGFzc05hbWVcIjogXCJFbWFpbEd1ZXNzXCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwiNkI0TURxV3F0d1wifSwge1wiY2xhc3NOYW1lXCI6IFwiRW1haWxHdWVzc1wiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcImU5c01GTDFRV3hcIn1dLCBcImVtYWlsXCI6IFwibm9fZW1haWxcIiwgXCJwcm9zcGVjdF9jcmVhdGVkX2F0XCI6IFwiMjAxNC0xMC0wN1QxNToyMDoxNS4xNDdaXCIsIFwiY29tcGFueVwiOiB7XCJjbGFzc05hbWVcIjogXCJDb21wYW55XCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwiZnFIV3A1TnNGeFwifSwgXCJsaXN0c1wiOiBbe1wiY2xhc3NOYW1lXCI6IFwiUHJvc3BlY3RMaXN0XCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwiaXpMYlZ1bHlyNlwifV0sIFwidXNlclwiOiB7XCJjbGFzc05hbWVcIjogXCJVc2VyXCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwieFdFU2l3NVNtZFwifSwgXCJjb21wYW55X3NpemVcIjogXCIyMDEtNTAwIGVtcGxveWVlc1wiLCBcIm5hbWVcIjogXCJWaXZlayBOYXJhbmdcIiwgXCJpbmR1c3RyeVwiOiBcIlNlY3VyaXR5IGFuZCBJbnZlc3RpZ2F0aW9uc1wiLCBcImxpbmtlZGluX3VybFwiOiBcImluLmxpbmtlZGluLmNvbS9wdWIvdml2ZWstbmFyYW5nLzIwL2I2Ny8zOVwiLCBcImJhdGNoXCI6IHtcImNsYXNzTmFtZVwiOiBcIlByb3NwZWN0QmF0Y2hcIiwgXCJfX3R5cGVcIjogXCJQb2ludGVyXCIsIFwib2JqZWN0SWRcIjogXCJZUGFUR2JENTZhXCJ9LCBcImNsYXNzTmFtZVwiOiBcIlByb3NwZWN0XCIsIFwicXVldWVkXCI6IHRydWV9LCB7XCJ3ZWJzaXRlXCI6IFwiaHR0cDovL3d3dy5zaGFuZ3JpLWxhLmNvbVwiLCBcImNhbXBhaWduXCI6IHtcImNsYXNzTmFtZVwiOiBcIkNhbXBhaWduXCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwibm1FbFU3emNCZlwifSwgXCJwb3NcIjogXCJcXFxcdTAwYTBEaXJlY3RvciBvZiBTYWxlcyBhbmQgTWFya2V0aW5nXCIsIFwiX190eXBlXCI6IFwiT2JqZWN0XCIsIFwidXBkYXRlZEF0XCI6IFwiMjAxNC0xMC0xMFQxMzoyOToyMy44ODBaXCIsIFwiY3JlYXRlZEF0XCI6IFwiMjAxNC0xMC0wN1QxNToyMDoxMy4xOTdaXCIsIFwiY2l0eVwiOiBcIkJyaXNiYW5lLCBBdXN0cmFsaWFcXFxcdTAwYTBcIiwgXCJhcmNoaXZlZFwiOiB0cnVlLCBcImxvYWRpbmdcIjogZmFsc2UsIFwib2JqZWN0SWRcIjogXCJUU1NERVozbFVBXCIsIFwiY29tcGFueV9uYW1lXCI6IFwiU2hhbmdyaS1MYSBIb3RlbHMgYW5kIFJlc29ydHNcIiwgXCJtYWlsZ3VuX2lkXCI6IFwiPDIwMTQxMDEwMTQwMjIxLjM5NTQ4LjI5NjI3QGN1c3RvbWVyb2hxLmNvbT5cIiwgXCJlbWFpbF9ndWVzc2VzXCI6IFt7XCJjbGFzc05hbWVcIjogXCJFbWFpbEd1ZXNzXCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwiUElER0pQcXJhSVwifSwge1wiY2xhc3NOYW1lXCI6IFwiRW1haWxHdWVzc1wiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcIm1HNFU2OXhEY2dcIn1dLCBcImVtYWlsXCI6IFwiYW5keS5tY2N1dGNoZW9uQHNoYW5ncmktbGEuY29tXCIsIFwicHJvc3BlY3RfY3JlYXRlZF9hdFwiOiBcIjIwMTQtMTAtMDdUMTU6MjA6MTMuMTk3WlwiLCBcImNvbXBhbnlcIjoge1wiY2xhc3NOYW1lXCI6IFwiQ29tcGFueVwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcImZxSFdwNU5zRnhcIn0sIFwibGlzdHNcIjogW3tcImNsYXNzTmFtZVwiOiBcIlByb3NwZWN0TGlzdFwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcIml6TGJWdWx5cjZcIn1dLCBcInVzZXJcIjoge1wiY2xhc3NOYW1lXCI6IFwiVXNlclwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcInhXRVNpdzVTbWRcIn0sIFwiY29tcGFueV9zaXplXCI6IFwiMTAsMDAxKyBlbXBsb3llZXNcIiwgXCJuYW1lXCI6IFwiQW5keSBNY0N1dGNoZW9uXCIsIFwiaW5kdXN0cnlcIjogXCJIb3NwaXRhbGl0eVwiLCBcImxpbmtlZGluX3VybFwiOiBcImF1LmxpbmtlZGluLmNvbS9wdWIvYW5keS1tY2N1dGNoZW9uLzFhLzY2NS82NTBcIiwgXCJiYXRjaFwiOiB7XCJjbGFzc05hbWVcIjogXCJQcm9zcGVjdEJhdGNoXCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwiWVBhVEdiRDU2YVwifSwgXCJjbGFzc05hbWVcIjogXCJQcm9zcGVjdFwiLCBcInF1ZXVlZFwiOiB0cnVlfSwge1wid2Vic2l0ZVwiOiBcImh0dHA6Ly93d3cudGVuY2F0ZS5jb21cIiwgXCJjYW1wYWlnblwiOiB7XCJjbGFzc05hbWVcIjogXCJDYW1wYWlnblwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcIm5tRWxVN3pjQmZcIn0sIFwicG9zXCI6IFwiXFxcXHUwMGEwRGlyZWN0b3IgU2FsZXMgJiBNYXJrZXRpbmcgQWVyb3NwYWNlXCIsIFwiX190eXBlXCI6IFwiT2JqZWN0XCIsIFwidXBkYXRlZEF0XCI6IFwiMjAxNC0xMC0xMFQxMzoyOToyMi41MTZaXCIsIFwiY3JlYXRlZEF0XCI6IFwiMjAxNC0xMC0wN1QxNToyMDoxOC40ODFaXCIsIFwiY2l0eVwiOiBcIkNvdmVudHJ5LCBVbml0ZWQgS2luZ2RvbVxcXFx1MDBhMFwiLCBcImFyY2hpdmVkXCI6IHRydWUsIFwibG9hZGluZ1wiOiBmYWxzZSwgXCJvYmplY3RJZFwiOiBcImZ0eUtDR21SOUhcIiwgXCJjb21wYW55X25hbWVcIjogXCJUZW5jYXRlXCIsIFwibWFpbGd1bl9pZFwiOiBcIjwyMDE0MTAxMDE0MDgxMy4xOTk1Ni4yMDQ1NEBjdXN0b21lcm9ocS5jb20+XCIsIFwiZW1haWxfZ3Vlc3Nlc1wiOiBbe1wiY2xhc3NOYW1lXCI6IFwiRW1haWxHdWVzc1wiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcInU4U2V0Q1FPSlBcIn0sIHtcImNsYXNzTmFtZVwiOiBcIkVtYWlsR3Vlc3NcIiwgXCJfX3R5cGVcIjogXCJQb2ludGVyXCIsIFwib2JqZWN0SWRcIjogXCJQMEttRkc5MmRLXCJ9XSwgXCJlbWFpbFwiOiBcIm4udGlmZmluQHRlbmNhdGUuY29tXCIsIFwicHJvc3BlY3RfY3JlYXRlZF9hdFwiOiBcIjIwMTQtMTAtMDdUMTU6MjA6MTguNDgxWlwiLCBcImNvbXBhbnlcIjoge1wiY2xhc3NOYW1lXCI6IFwiQ29tcGFueVwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcImZxSFdwNU5zRnhcIn0sIFwibGlzdHNcIjogW3tcImNsYXNzTmFtZVwiOiBcIlByb3NwZWN0TGlzdFwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcIml6TGJWdWx5cjZcIn1dLCBcInVzZXJcIjoge1wiY2xhc3NOYW1lXCI6IFwiVXNlclwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcInhXRVNpdzVTbWRcIn0sIFwiY29tcGFueV9zaXplXCI6IFwiMTAwMS01MDAwIGVtcGxveWVlc1wiLCBcIm5hbWVcIjogXCJOaWNrIFRpZmZpblwiLCBcImluZHVzdHJ5XCI6IFwiVGV4dGlsZXNcIiwgXCJsaW5rZWRpbl91cmxcIjogXCJ1ay5saW5rZWRpbi5jb20vcHViL25pY2stdGlmZmluLzUvNDM0LzI1NlwiLCBcImJhdGNoXCI6IHtcImNsYXNzTmFtZVwiOiBcIlByb3NwZWN0QmF0Y2hcIiwgXCJfX3R5cGVcIjogXCJQb2ludGVyXCIsIFwib2JqZWN0SWRcIjogXCJZUGFUR2JENTZhXCJ9LCBcImNsYXNzTmFtZVwiOiBcIlByb3NwZWN0XCIsIFwicXVldWVkXCI6IHRydWV9LCB7XCJ3ZWJzaXRlXCI6IFwiaHR0cDovL3d3dy5wZWFyc29uLmNvbVwiLCBcImNhbXBhaWduXCI6IHtcImNsYXNzTmFtZVwiOiBcIkNhbXBhaWduXCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwibm1FbFU3emNCZlwifSwgXCJwb3NcIjogXCJcXFxcdTAwYTBEaXJlY3RvciwgU2FsZXMgUGVyZm9ybWFuY2UgTWFuYWdlbWVudFwiLCBcIl9fdHlwZVwiOiBcIk9iamVjdFwiLCBcInVwZGF0ZWRBdFwiOiBcIjIwMTQtMTAtMTBUMTM6Mjk6MjIuNzgwWlwiLCBcImNyZWF0ZWRBdFwiOiBcIjIwMTQtMTAtMDdUMTU6MjA6MTcuODczWlwiLCBcImNpdHlcIjogXCJQaG9lbml4LCBBcml6b25hIEFyZWFcXFxcdTAwYTBcIiwgXCJhcmNoaXZlZFwiOiB0cnVlLCBcImxvYWRpbmdcIjogZmFsc2UsIFwib2JqZWN0SWRcIjogXCJMUGlFMENjRXNSXCIsIFwiY29tcGFueV9uYW1lXCI6IFwiUGVhcnNvbiBwbGNcIiwgXCJtYWlsZ3VuX2lkXCI6IFwiPDIwMTQxMDEwMTQwODEzLjU4ODgxLjg1NzMzQGN1c3RvbWVyb2hxLmNvbT5cIiwgXCJlbWFpbF9ndWVzc2VzXCI6IFt7XCJjbGFzc05hbWVcIjogXCJFbWFpbEd1ZXNzXCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwiUTU3a3dOMUxRVFwifSwge1wiY2xhc3NOYW1lXCI6IFwiRW1haWxHdWVzc1wiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcIjUzSzBsV1k3aHZcIn1dLCBcImVtYWlsXCI6IFwiamFzb24ubGlua2VkaW5AcGVhcnNvbi5jb21cIiwgXCJwcm9zcGVjdF9jcmVhdGVkX2F0XCI6IFwiMjAxNC0xMC0wN1QxNToyMDoxNy44NzNaXCIsIFwiY29tcGFueVwiOiB7XCJjbGFzc05hbWVcIjogXCJDb21wYW55XCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwiZnFIV3A1TnNGeFwifSwgXCJsaXN0c1wiOiBbe1wiY2xhc3NOYW1lXCI6IFwiUHJvc3BlY3RMaXN0XCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwiaXpMYlZ1bHlyNlwifV0sIFwidXNlclwiOiB7XCJjbGFzc05hbWVcIjogXCJVc2VyXCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwieFdFU2l3NVNtZFwifSwgXCJjb21wYW55X3NpemVcIjogXCIxMCwwMDErIGVtcGxveWVlc1wiLCBcIm5hbWVcIjogXCJKYXNvbiBVcGFoXCIsIFwiaW5kdXN0cnlcIjogXCJFZHVjYXRpb24gTWFuYWdlbWVudFwiLCBcImxpbmtlZGluX3VybFwiOiBcInd3dy5saW5rZWRpbi5jb20vcHViL2phc29uLXVwYWgvNy8yMzMvOTQwXCIsIFwiYmF0Y2hcIjoge1wiY2xhc3NOYW1lXCI6IFwiUHJvc3BlY3RCYXRjaFwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcIllQYVRHYkQ1NmFcIn0sIFwiY2xhc3NOYW1lXCI6IFwiUHJvc3BlY3RcIiwgXCJxdWV1ZWRcIjogdHJ1ZX0sIHtcIndlYnNpdGVcIjogXCJodHRwOi8vd3d3LnJtd211c2ljLmNvbVwiLCBcImNhbXBhaWduXCI6IHtcImNsYXNzTmFtZVwiOiBcIkNhbXBhaWduXCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwibm1FbFU3emNCZlwifSwgXCJwb3NcIjogXCJcXFxcdTAwYTBEaXJlY3RvciBvZiBTYWxlcyBhbmQgTWFya2V0aW5nXCIsIFwiX190eXBlXCI6IFwiT2JqZWN0XCIsIFwidXBkYXRlZEF0XCI6IFwiMjAxNC0xMC0xMFQxMzoyOToyMy4wNDlaXCIsIFwiY3JlYXRlZEF0XCI6IFwiMjAxNC0xMC0wN1QxNToyMDoxNi43MzVaXCIsIFwiY2l0eVwiOiBcIlRvcm9udG8sIE9udGFyaW8sIENhbmFkYVxcXFx1MDBhMFwiLCBcImFyY2hpdmVkXCI6IHRydWUsIFwibG9hZGluZ1wiOiBmYWxzZSwgXCJvcGVuZWRcIjogdHJ1ZSwgXCJvYmplY3RJZFwiOiBcIkNPU3B5WGdzRDJcIiwgXCJjb21wYW55X25hbWVcIjogXCJSTVcgTXVzaWNcIiwgXCJtYWlsZ3VuX2lkXCI6IFwiPDIwMTQxMDEwMTQwODE0LjE5OTM4LjkwMTY5QGN1c3RvbWVyb2hxLmNvbT5cIiwgXCJlbWFpbF9ndWVzc2VzXCI6IFt7XCJjbGFzc05hbWVcIjogXCJFbWFpbEd1ZXNzXCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwiM09FS3RJeElBcFwifSwge1wiY2xhc3NOYW1lXCI6IFwiRW1haWxHdWVzc1wiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcInh2R2JVWXBvNDNcIn1dLCBcImVtYWlsXCI6IFwibm9fZW1haWxcIiwgXCJwcm9zcGVjdF9jcmVhdGVkX2F0XCI6IFwiMjAxNC0xMC0wN1QxNToyMDoxNi43MzVaXCIsIFwiY29tcGFueVwiOiB7XCJjbGFzc05hbWVcIjogXCJDb21wYW55XCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwiZnFIV3A1TnNGeFwifSwgXCJsaXN0c1wiOiBbe1wiY2xhc3NOYW1lXCI6IFwiUHJvc3BlY3RMaXN0XCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwiaXpMYlZ1bHlyNlwifV0sIFwidXNlclwiOiB7XCJjbGFzc05hbWVcIjogXCJVc2VyXCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwieFdFU2l3NVNtZFwifSwgXCJjb21wYW55X3NpemVcIjogXCIxMS01MCBlbXBsb3llZXNcIiwgXCJuYW1lXCI6IFwiTGF1cmEgTmlrb2xpY1wiLCBcImluZHVzdHJ5XCI6IFwiTXVzaWNcIiwgXCJsaW5rZWRpbl91cmxcIjogXCJjYS5saW5rZWRpbi5jb20vcHViL2xhdXJhLW5pa29saWMvNTAvNDUwLzc3MVwiLCBcImJhdGNoXCI6IHtcImNsYXNzTmFtZVwiOiBcIlByb3NwZWN0QmF0Y2hcIiwgXCJfX3R5cGVcIjogXCJQb2ludGVyXCIsIFwib2JqZWN0SWRcIjogXCJZUGFUR2JENTZhXCJ9LCBcImNsYXNzTmFtZVwiOiBcIlByb3NwZWN0XCIsIFwicXVldWVkXCI6IHRydWV9LCB7XCJ3ZWJzaXRlXCI6IFwiaHR0cDovL3d3dy5zYXVkaWFjYXJnby5jb21cIiwgXCJjYW1wYWlnblwiOiB7XCJjbGFzc05hbWVcIjogXCJDYW1wYWlnblwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcIm5tRWxVN3pjQmZcIn0sIFwicG9zXCI6IFwiXFxcXHUwMGEwRGlyZWN0b3IgR2xvYmFsIFNhbGVzIFN1cHBvcnRcIiwgXCJfX3R5cGVcIjogXCJPYmplY3RcIiwgXCJ1cGRhdGVkQXRcIjogXCIyMDE0LTEwLTEwVDEzOjI5OjIzLjMyN1pcIiwgXCJjcmVhdGVkQXRcIjogXCIyMDE0LTEwLTA3VDE1OjIwOjE2LjEyN1pcIiwgXCJjaXR5XCI6IFwiU2F1ZGkgQXJhYmlhXFxcXHUwMGEwXCIsIFwiYXJjaGl2ZWRcIjogdHJ1ZSwgXCJsb2FkaW5nXCI6IGZhbHNlLCBcIm9wZW5lZFwiOiB0cnVlLCBcIm9iamVjdElkXCI6IFwiS2UwNmc2a1NrNVwiLCBcImNvbXBhbnlfbmFtZVwiOiBcIlNhdWRpIEFpcmxpbmVzIENhcmdvIENvbXBhbnlcIiwgXCJtYWlsZ3VuX2lkXCI6IFwiPDIwMTQxMDEwMTQwODE0Ljc3Mzg2Ljc0OTQzQGN1c3RvbWVyb2hxLmNvbT5cIiwgXCJlbWFpbF9ndWVzc2VzXCI6IFt7XCJjbGFzc05hbWVcIjogXCJFbWFpbEd1ZXNzXCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwibzMzSmF2aFNweVwifSwge1wiY2xhc3NOYW1lXCI6IFwiRW1haWxHdWVzc1wiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcImwzdnkyVHhGNzNcIn1dLCBcImVtYWlsXCI6IFwibm9fZW1haWxcIiwgXCJwcm9zcGVjdF9jcmVhdGVkX2F0XCI6IFwiMjAxNC0xMC0wN1QxNToyMDoxNi4xMjdaXCIsIFwiY29tcGFueVwiOiB7XCJjbGFzc05hbWVcIjogXCJDb21wYW55XCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwiZnFIV3A1TnNGeFwifSwgXCJsaXN0c1wiOiBbe1wiY2xhc3NOYW1lXCI6IFwiUHJvc3BlY3RMaXN0XCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwiaXpMYlZ1bHlyNlwifV0sIFwidXNlclwiOiB7XCJjbGFzc05hbWVcIjogXCJVc2VyXCIsIFwiX190eXBlXCI6IFwiUG9pbnRlclwiLCBcIm9iamVjdElkXCI6IFwieFdFU2l3NVNtZFwifSwgXCJjb21wYW55X3NpemVcIjogXCIxMDAxLTUwMDAgZW1wbG95ZWVzXCIsIFwibmFtZVwiOiBcIlJhaW5lciBNdWVsbGVyXCIsIFwiaW5kdXN0cnlcIjogXCJBaXJsaW5lcy9BdmlhdGlvblwiLCBcImxpbmtlZGluX3VybFwiOiBcInNhLmxpbmtlZGluLmNvbS9wdWIvcmFpbmVyLW11ZWxsZXIvNS9hNDgvNDI4XCIsIFwiYmF0Y2hcIjoge1wiY2xhc3NOYW1lXCI6IFwiUHJvc3BlY3RCYXRjaFwiLCBcIl9fdHlwZVwiOiBcIlBvaW50ZXJcIiwgXCJvYmplY3RJZFwiOiBcIllQYVRHYkQ1NmFcIn0sIFwiY2xhc3NOYW1lXCI6IFwiUHJvc3BlY3RcIiwgXCJxdWV1ZWRcIjogdHJ1ZX1dXG4gIH0sXG5cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIFNlbnQgTWFpbFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzZW50RW1haWxzOiBbXVxuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgdGhpc3MgPSB0aGlzO1xuICAgIHFyeSA9IHtcbiAgICAgIGluY2x1ZGU6ICdjYW1wYWlnbixwcm9zcGVjdCxwcm9zcGVjdC5lbWFpbF9ndWVzc2VzLnBhdHRlcm4nLFxuICAgICAgb3JkZXI6Jy1jcmVhdGVkQXQnLFxuICAgICAgY2FtcGFpZ246IHtcbiAgICAgICAgX190eXBlOiAnUG9pbnRlcicsXG4gICAgICAgIGNsYXNzTmFtZTonQ2FtcGFpZ24nLFxuICAgICAgICBvYmplY3RJZDogdGhpcy5wcm9wcy5zZWxlY3RlZENhbXBhaWduLm9iamVjdElkLFxuICAgICAgfVxuICAgIH1cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9TZW50RW1haWwnLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgdGhpc3Muc2V0U3RhdGUoe3NlbnRFbWFpbHM6IHJlcy5yZXN1bHRzfSkgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbigpIHt9XG4gICAgfSlcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHNlbnRFbWFpbHMgPSBbXVxuICAgIGZvcihpPTA7aTwgdGhpcy5zdGF0ZS5zZW50RW1haWxzLmxlbmd0aDsgaSsrKSBcbiAgICAgIHNlbnRFbWFpbHMucHVzaChTZW50RW1haWxSb3coe3NlbnRFbWFpbDogdGhpcy5zdGF0ZS5zZW50RW1haWxzW2ldfSkpXG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtvdmVyZmxvdzonYXV0bycsaGVpZ2h0OjQxN319LCBcbiAgICAgICAgUmVhY3QuRE9NLnRhYmxlKHtjbGFzc05hbWU6IFwidGFibGUgdGFibGUtc3RyaXBlZFwiLCBzdHlsZToge21hcmdpbkJvdHRvbTowfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS50aGVhZChudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJQcm9zcGVjdCBOYW1lXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIlByb3NwZWN0IEVtYWlsXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIlRlbXBsYXRlXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt3aWR0aDoyOTB9fSwgXCJTdGF0dXNcIilcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udGJvZHkobnVsbCwgXG4gICAgICAgICAgICBzZW50RW1haWxzXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbnZhciBTZW50RW1haWxSb3cgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdTZW50RW1haWxSb3cnLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHNlbnRFbWFpbCA9IHRoaXMucHJvcHMuc2VudEVtYWlsXG4gICAgLy9jb25zb2xlLmxvZyhzZW50RW1haWwpXG5cbiAgICBlbWFpbCA9IHNlbnRFbWFpbC5lbWFpbFxuICAgIC8qXG4gICAgaWYoZW1haWwgPT0gXCJub19lbWFpbFwiKXtcbiAgICAgIGZpcnN0ID0gc2VudEVtYWlsLnByb3NwZWN0Lm5hbWUuc3BsaXQoJyAnKVswXVxuICAgICAgbGFzdCA9IF8ubGFzdChzZW50RW1haWwucHJvc3BlY3QubmFtZS5zcGxpdCgnICcpKVxuXG4gICAgICBwYXR0ZXJuID0gXy5maW5kV2hlcmUoc2VudEVtYWlsLnByb3NwZWN0LmVtYWlsX2d1ZXNzZXMsIHsndHJpZWQnOmZhbHNlfSlcbiAgICAgIGRhdGEgPSB7Zmlyc3Q6IGZpcnN0LCBsYXN0OiBsYXN0LCBmaTogZmlyc3RbMF0sIGxpOiBsYXN0WzBdfVxuICAgICAgZW1haWwgPSBNdXN0YWNoZS5yZW5kZXIocGF0dGVybi5wYXR0ZXJuLnBhdHRlcm4sIGRhdGEpLnRvTG93ZXJDYXNlKClcbiAgICB9XG4gICAgKi9cblxuICAgIHJlcGxpZWQgPSBcImxhYmVsIGxhYmVsLWRlZmF1bHRcIlxuICAgIG9wZW5lZCA9IFwibGFiZWwgbGFiZWwtZGVmYXVsdFwiXG4gICAgZGVsaXZlcmVkID0gXCJsYWJlbCBsYWJlbC1kZWZhdWx0XCJcbiAgICBxdWV1ZWQgPSBcImxhYmVsIGxhYmVsLWRlZmF1bHRcIlxuXG4gICAgaWYoc2VudEVtYWlsLnJlcGxpZWQpIFxuICAgICAgcmVwbGllZCA9IFwibGFiZWwgbGFiZWwtc3VjY2Vzc1wiXG4gICAgaWYoc2VudEVtYWlsLm9wZW5lZCkgXG4gICAgICBvcGVuZWQgPSBcImxhYmVsIGxhYmVsLXN1Y2Nlc3NcIlxuICAgIGlmKHNlbnRFbWFpbC5kZWxpdmVyZWQpIFxuICAgICAgZGVsaXZlcmVkID0gXCJsYWJlbCBsYWJlbC1zdWNjZXNzXCJcbiAgICBpZihzZW50RW1haWwucXVldWVkKSBcbiAgICAgIHF1ZXVlZCA9IFwibGFiZWwgbGFiZWwtc3VjY2Vzc1wiXG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnRyKG51bGwsIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7d2lkdGg6MTAwfX0sIFJlYWN0LkRPTS5oNihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvY2tcIn0pLCBcbiAgICAgICAgICAgIG1vbWVudChzZW50RW1haWwuY3JlYXRlZEF0KS5mcm9tTm93KCkpKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt3aWR0aDoyMDB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2ZvbnRTaXplOjE0LGZvbnRXZWlnaHQ6J2JvbGQnLG1hcmdpbkJvdHRvbTowfX0sIFxuICAgICAgICAgICAgc2VudEVtYWlsLnByb3NwZWN0Lm5hbWUpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7Zm9udFN0eWxlOidpdGFsaWMnLG1hcmdpblRvcDo0LG1hcmdpbkJvdHRvbTowfX0sIFxuICAgICAgICAgICAgc2VudEVtYWlsLnByb3NwZWN0LnBvcy50cmltKCkpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luVG9wOjQsZm9udFdlaWdodDonYm9sZCd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWJ1aWxkaW5nXCJ9KSwgXCLCoFwiLCBcbiAgICAgICAgICAgIHNlbnRFbWFpbC5wcm9zcGVjdC5jb21wYW55X25hbWUpXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7d2lkdGg6MjAwfX0sIFJlYWN0LkRPTS5oNihudWxsLCBlbWFpbCkpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZmlsZS10ZXh0LW9cIn0pLCBcIsKgXCIgKyAnICcgK1xuICAgICAgICAgICAgXCJUZW1wbGF0ZVwiXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3BhZGRpbmdUb3A6MTN9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogcXVldWVkfSwgXCJRdWV1ZWRcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2hldnJvbi1jaXJjbGUtcmlnaHQgdGV4dC1tdXRlZFwiLCBcbiAgICAgICAgICAgICBzdHlsZToge3BhZGRpbmdMZWZ0OjUscGFkZGluZ1JpZ2h0OjV9fSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IGRlbGl2ZXJlZH0sIFwiRGVsaXZlcmVkXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZXZyb24tY2lyY2xlLXJpZ2h0IHRleHQtbXV0ZWRcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHtwYWRkaW5nTGVmdDo1LHBhZGRpbmdSaWdodDo1fX0pLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBvcGVuZWR9LCBcIk9wZW5lZFwiKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jaGV2cm9uLWNpcmNsZS1yaWdodCB0ZXh0LW11dGVkXCIsIFxuICAgICAgICAgICAgIHN0eWxlOiB7cGFkZGluZ0xlZnQ6NSxwYWRkaW5nUmlnaHQ6NX19KSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogcmVwbGllZH0sIFwiUmVwbGllZFwiKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KVxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIENhbXBhaWduc1xuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzZWxlY3RlZFNjcmVlbjogJ092ZXJ2aWV3JyxcbiAgICB9XG4gIH0sXG5cbiAgY2hhbmdlU2VsZWN0ZWRDYW1wYWlnbjogZnVuY3Rpb24oY2FtcGFpZ24pIHtcbiAgICAvL3RoaXMucHJvcHMudG9nZ2xlU2NyZWVuKCdDYW1wYWlnbkRldGFpbCcpXG4gICAgdGhpcy5wcm9wcy5jaGFuZ2VTZWxlY3RlZENhbXBhaWduKCdDYW1wYWlnbkRldGFpbCcsIGNhbXBhaWduKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgY2FtcGFpZ25zID0gW11cbiAgICBjb25zb2xlLmxvZyh0aGlzLnByb3BzKVxuICAgIGZvcihpPTA7aTwgdGhpcy5wcm9wcy5jYW1wYWlnbnMubGVuZ3RoOyBpKyspeyBcbiAgICAgIGNhbXBhaWducy5wdXNoKENhbXBhaWduUm93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZVNjcmVlbjogdGhpcy50b2dnbGVTY3JlZW4sIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlQ2FtcGFpZ246IHRoaXMucHJvcHMuZGVsZXRlQ2FtcGFpZ24sIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlU2VsZWN0ZWRDYW1wYWlnbjogdGhpcy5jaGFuZ2VTZWxlY3RlZENhbXBhaWduLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbXBhaWduOiB0aGlzLnByb3BzLmNhbXBhaWduc1tpXX0pIClcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7b3ZlcmZsb3c6J2F1dG8nLGhlaWdodDo1NTB9fSwgXG4gICAgICAgIFJlYWN0LkRPTS50YWJsZSh7Y2xhc3NOYW1lOiBcInRhYmxlIHRhYmxlLXN0cmlwZWRcIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS50aGVhZChudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJDYW1wYWlnbiBOYW1lXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIlByb3NwZWN0IExpc3RcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiU2l6ZVwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInfX0sIFwiRGVsaXZlcmVkXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9fSwgXCJPcGVuZWRcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyxkaXNwbGF5Oidub25lJ319LCBcIlJlcGxpZWRcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyxkaXNwbGF5Oidub25lJ319LCBcIkxpbmsgQ2xpY2tzXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9fSwgXCJCb3VuY2VkXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt3aWR0aDoxNTAsdGV4dEFsaWduOidjZW50ZXInfX0sIFwiIFwiKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS50Ym9keShudWxsLCBcbiAgICAgICAgICAgIGNhbXBhaWduc1xuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH0sXG59KTtcblxudmFyIENhbXBhaWduUm93ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ2FtcGFpZ25Sb3cnLFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBkZWxpdmVyZWQ6ICd+JyxcbiAgICAgIG9wZW5lZDogJ34nLFxuICAgICAgYm91bmNlZDogJ34nLFxuICAgICAgcHJvc3BlY3RMaXN0Q291bnQ6ICd+J1xuICAgIH1cbiAgfSxcblxuICBEZWxldGVDYW1wYWlnbjogZnVuY3Rpb24oZSkge1xuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgY29uc29sZS5sb2coJ0RFTEVURSBDQU1QQUlHTicpXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIHN3YWwoeyAgIFxuICAgICAgdGl0bGU6IFwiQXJlIHlvdSBzdXJlP1wiLCAgIFxuICAgICAgdGV4dDogXCJZb3Ugd2lsbCBub3QgYmUgYWJsZSB0byByZWNvdmVyIHRoaXMgQ2FtcGFpZ24hXCIsXG4gICAgICB0eXBlOiBcIndhcm5pbmdcIiwgICBcbiAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsICAgXG4gICAgICBjb25maXJtQnV0dG9uQ29sb3I6IFwiI0RENkI1NVwiLCAgIFxuICAgICAgY29uZmlybUJ1dHRvblRleHQ6IFwiWWVzLCBkZWxldGUgaXQhXCIsICAgXG4gICAgICBjbG9zZU9uQ29uZmlybTogZmFsc2UgfSwgXG4gICAgICBmdW5jdGlvbigpeyAgIFxuICAgICAgICBzd2FsKFwiRGVsZXRlZCFcIiwgXCJZb3VyIGNhbXBhaWduIGhhcyBiZWVuIGRlbGV0ZWQuXCIsIFwic3VjY2Vzc1wiKTsgXG4gICAgICAgIGNvbnNvbGUubG9nKCdkZWxldGVkJylcbiAgICAgICAgdGhpc3MucHJvcHMuZGVsZXRlQ2FtcGFpZ24odGhpc3MucHJvcHMuY2FtcGFpZ24ub2JqZWN0SWQpXG4gICAgICB9KTtcbiAgfSxcblxuICB0b2dnbGVTY3JlZW46IGZ1bmN0aW9uKCkge1xuICAgIC8vdGhpcy5wcm9wcy50b2dnbGVTY3JlZW4oKVxuICAgIHRoaXMucHJvcHMuY2hhbmdlU2VsZWN0ZWRDYW1wYWlnbih0aGlzLnByb3BzLmNhbXBhaWduKVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGhpc3MgPSB0aGlzO1xuICAgIGxpc3QgPSB0aGlzLnByb3BzLmNhbXBhaWduLnByb3NwZWN0X2xpc3RcbiAgICBsaXN0ID0gKGxpc3QpID8gbGlzdC5vYmplY3RJZCA6IFwiXCJcbiAgICBxcnkgPSB7XG4gICAgICB3aGVyZTogSlNPTi5zdHJpbmdpZnkoe2xpc3RzOiBhcHBDb25maWcucG9pbnRlcignUHJvc3BlY3RMaXN0JyxsaXN0KX0pLFxuICAgICAgY291bnQ6IHRydWVcbiAgICB9XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3QnLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBkYXRhOiBxcnksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgdGhpc3Muc2V0U3RhdGUoe3Byb3NwZWN0TGlzdENvdW50OiByZXMuY291bnR9KX0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUubG9nKGVyci5yZXNwb25zZVRleHQpIH1cbiAgICB9KVxuICAgIGNhbXBhaWduSWQgPSB0aGlzLnByb3BzLmNhbXBhaWduLm9iamVjdElkXG4gICAgcXJ5ID0ge1xuICAgICAgd2hlcmU6IEpTT04uc3RyaW5naWZ5KHtjYW1wYWlnbjogYXBwQ29uZmlnLnBvaW50ZXIoJ0NhbXBhaWduJywgY2FtcGFpZ25JZCl9KSxcbiAgICAgIGxpbWl0OiAxMDAwLFxuICAgICAgY291bnQ6IHRydWVcbiAgICB9XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9TZW50RW1haWwnLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgdGhpc3Muc2V0U3RhdGUoe2RlbGl2ZXJlZDogcmVzLmNvdW50fSl9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2VUZXh0KSB9XG4gICAgfSlcbiAgICBxcnlfMSA9IHtcbiAgICAgIHdoZXJlOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGNhbXBhaWduOiBhcHBDb25maWcucG9pbnRlcignQ2FtcGFpZ24nLCBjYW1wYWlnbklkKSxcbiAgICAgICAgb3BlbmVkOiB7XCIkZ3RlXCI6IDB9IFxuICAgICAgfSksXG4gICAgICBjb3VudDogdHJ1ZVxuICAgIH1cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1NlbnRFbWFpbCcsXG4gICAgICBkYXRhOiBxcnlfMSxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IHRoaXNzLnNldFN0YXRlKHtvcGVuZWQgOiByZXMuY291bnR9KSB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2VUZXh0KSB9XG4gICAgfSlcbiAgICBxcnlfMiA9IHtcbiAgICAgIHdoZXJlOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGNhbXBhaWduOiBhcHBDb25maWcucG9pbnRlcignQ2FtcGFpZ24nLCBjYW1wYWlnbklkKSxcbiAgICAgICAgZmFpbGVkOiB7XCIkZ3RlXCI6IDB9IFxuICAgICAgfSksXG4gICAgICBjb3VudDogdHJ1ZVxuICAgIH1cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1NlbnRFbWFpbCcsXG4gICAgICBkYXRhOiBxcnlfMixcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IHRoaXNzLnNldFN0YXRlKHtib3VuY2VkIDogcmVzLmNvdW50fSkgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlVGV4dCkgfVxuICAgIH0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBwcm9zcGVjdF9saXN0ID0gKHRoaXMucHJvcHMuY2FtcGFpZ24ucHJvc3BlY3RfbGlzdCkgPyB0aGlzLnByb3BzLmNhbXBhaWduLnByb3NwZWN0X2xpc3QgOiB7bGlzdF90eXBlOlwiXCIsIG5hbWU6XCJcIn1cbiAgICBpZihwcm9zcGVjdF9saXN0Lmxpc3RfdHlwZSA9PSBcInNpZ25hbF9saXN0XCIpXG4gICAgICAgIGljb25UeXBlID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS13aWZpXCIsIHN0eWxlOiB7bWFyZ2luUmlnaHQ6NX19KVxuICAgIGVsc2UgaWYocHJvc3BlY3RfbGlzdC5saXN0X3R5cGUgPT0gXCJtaW5pbmdfam9iXCIpXG4gICAgICAgIGljb25UeXBlID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG91ZC1kb3dubG9hZFwiLCBzdHlsZToge21hcmdpblJpZ2h0OjV9fSlcbiAgICBlbHNlIFxuICAgICAgICBpY29uVHlwZSA9XCJcIlxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udHIoe3N0eWxlOiB7Y3Vyc29yOidwb2ludGVyJ30sIG9uQ2xpY2s6IHRoaXMudG9nZ2xlU2NyZWVufSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBcIiBcIiwgUmVhY3QuRE9NLmg2KG51bGwsIFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5jYW1wYWlnbi5uYW1lXG4gICAgICAgICksIFwiIFwiKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBcIiBcIiwgUmVhY3QuRE9NLmg2KG51bGwsIFxuICAgICAgICAgICAgaWNvblR5cGUsIFxuICAgICAgICAgICAgcHJvc3BlY3RfbGlzdC5uYW1lXG4gICAgICAgICksIFwiIFwiKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibGFiZWwgbGFiZWwtcHJpbWFyeVwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXVzZXJcIn0pLCBcIsKgwqBcIiwgXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnByb3NwZWN0TGlzdENvdW50XG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyxwYWRkaW5nOjEyfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwiYmFkZ2VcIiwgc3R5bGU6IHtiYWNrZ3JvdW5kQ29sb3I6JyNmMGFkNGUnLHdpZHRoOjUwfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wYXBlci1wbGFuZVwiLCBzdHlsZToge2Zsb2F0OidsZWZ0J319KSwgXCIgwqBcIiwgXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmRlbGl2ZXJlZFxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcicscGFkZGluZzoxMn19LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLXN1Y2Nlc3NcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1leWVcIn0pLCBcIiDCoCBcIiwgdGhpcy5zdGF0ZS5vcGVuZWQsIFwiIFwiKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyxwYWRkaW5nOjEyLGRpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwibGFiZWwgbGFiZWwtcHJpbWFyeVwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLW1haWwtcmVwbHlcIn0pLCBcIiDCoFwiLCBcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYm91bmNlZClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcicscGFkZGluZzoxMixkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLWluZm9cIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1leHRlcm5hbC1saW5rLXNxdWFyZVwifSksIFwiIMKgXCIgKyAnICcgK1xuICAgICAgICAgICAgXCIxOCVcIilcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcicscGFkZGluZzoxMn19LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1leGNsYW1hdGlvbi1jaXJjbGVcIn0pLCBcIiDCoFwiLCBcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYm91bmNlZClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcicscGFkZGluZ1RvcDoxMn19LCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi14c1wiLCBcbiAgICAgICAgICAgIHN0eWxlOiB7YmFja2dyb3VuZEltYWdlOiAnbGluZWFyLWdyYWRpZW50KDE4MGRlZywgIzAwOTZmZiAwJSwgIzAwNWRmZiAxMDAlKSAhaW1wb3J0YW50OycsZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNvcHlcIiwgc3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJ319KSwgXCLCoCBDbG9uZVwiKSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuLWRlZmF1bHRcIiwgXG4gICAgICAgICAgICAgb25DbGljazogdGhpcy5EZWxldGVDYW1wYWlnbiwgXG4gICAgICAgICAgICAgc3R5bGU6IHttYXJnaW5MZWZ0OjV9fSwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdHJhc2gtb1wifSkpXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInLHBhZGRpbmc6MTIsZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg0KHtzdHlsZToge21hcmdpbjowfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1zdWNjZXNzXCJ9LCBcIlJlYWR5XCIpXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvL0NvbXBhbnlEZXRhaWxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY3VycmVudFNjcmVlbjpcInByZXNzXCIsXG4gICAgfVxuICB9LFxuXG4gIGNoYW5nZVNjcmVlbjogZnVuY3Rpb24oKSB7XG4gIH0sXG5cbiAgdG9nZ2xlRGV0YWlsTW9kZTogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coXCJkZXRhaWwgbW9kZVwiKVxuICAgIHRoaXMucHJvcHMudG9nZ2xlRGV0YWlsTW9kZSgpXG4gIH0sXG5cbiAgZ2V0RGF0YTogZnVuY3Rpb24oKSB7XG4gICAgY29tcGFueSA9IHRoaXMucHJvcHMuZGV0YWlsQ29tcGFueVxuICAgIHFyeSA9IHtjb21wYW55X25hbWU6IGNvbXBhbnkuY29tcGFueV9uYW1lfVxuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgUGFyc2UuX2dldCgnQ29tcGFueUJsb2dQb3N0JywgcXJ5KS5kb25lKGZ1bmN0aW9uKHJlcykge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe2Jsb2dfcG9zdHM6IHJlcy5yZXN1bHRzfSlcbiAgICB9KVxuICAgIFBhcnNlLl9nZXQoJ0NvbXBhbnlUZWNobm9sb2d5JywgcXJ5KS5kb25lKGZ1bmN0aW9uKHJlcykge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe3RlY2hub2xvZ2llczogcmVzLnJlc3VsdHN9KVxuICAgIH0pXG4gICAgUGFyc2UuX2dldCgnQ29tcGFueVByZXNzUmVsZWFzZScsIHFyeSkuZG9uZShmdW5jdGlvbihyZXMpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtwcmVzc19yZWxlYXNlczogcmVzLnJlc3VsdHN9KVxuICAgIH0pXG4gICAgUGFyc2UuX2dldCgnQ29tcGFueUdsYXNzZG9vclJldmlldycsIHFyeSkuZG9uZShmdW5jdGlvbihyZXMpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtyZXZpZXdzOiByZXMucmVzdWx0c30pXG4gICAgfSlcbiAgICBQYXJzZS5fZ2V0KCdDb21wYW55RW1wbG95ZWUnLCBxcnkpLmRvbmUoZnVuY3Rpb24ocmVzKSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7ZW1wbG95ZWVzOiByZXMucmVzdWx0c30pXG4gICAgfSlcbiAgICBQYXJzZS5fZ2V0KCdDb21wYW55U2ltaWxhcicsIHFyeSkuZG9uZShmdW5jdGlvbihyZXMpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtzaW1pbGFyOiByZXMucmVzdWx0c30pXG4gICAgfSlcbiAgICBQYXJzZS5fZ2V0KCdDb21wYW55SGlyaW5nJywgcXJ5KS5kb25lKGZ1bmN0aW9uKHJlcykge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe2hpcmluZzogcmVzLnJlc3VsdHN9KVxuICAgIH0pXG4gICAgUGFyc2UuX2dldCgnQ29tcGFueU5ld3MnLCBxcnkpLmRvbmUoZnVuY3Rpb24ocmVzKSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7bmV3czogcmVzLnJlc3VsdHN9KVxuICAgIH0pXG4gIH0sXG5cbiAgY2hhbmdlU2NyZWVuOiBmdW5jdGlvbihlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudFNjcmVlbjogJChlLnRhcmdldCkudGV4dCgpLnRvTG93ZXJDYXNlKCl9KVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2codGhpcy5wcm9wcy5kZXRhaWxDb21wYW55KVxuICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUuY3VycmVudFNjcmVlbilcbiAgICB0aGlzLmdldERhdGEoKVxuXG4gICAgdGFiXzEgPSBcImNhbXBhaWduLXRhYi1saW5rXCJcbiAgICB0YWJfMiA9IFwiY2FtcGFpZ24tdGFiLWxpbmtcIlxuICAgIHRhYl8zID0gXCJjYW1wYWlnbi10YWItbGlua1wiXG4gICAgdGFiXzQgPSBcImNhbXBhaWduLXRhYi1saW5rXCJcbiAgICB0YWJfNSA9IFwiY2FtcGFpZ24tdGFiLWxpbmtcIlxuICAgIGlmKHRoaXMuc3RhdGUuY3VycmVudFNjcmVlbiA9PSBcInByZXNzXCIpXG4gICAgICBzY3JlZW4gPSBDb21wYW55UHJlc3MobnVsbClcbiAgICBlbHNlIGlmKHRoaXMuc3RhdGUuY3VycmVudFNjcmVlbiA9PSBcIm5ld3NcIilcbiAgICAgIHNjcmVlbiA9IENvbXBhbnlOZXdzKG51bGwpXG4gICAgZWxzZSBpZih0aGlzLnN0YXRlLmN1cnJlbnRTY3JlZW4gPT0gXCJibG9nIHBvc3RzXCIpXG4gICAgICBzY3JlZW4gPSBDb21wYW55QmxvZ1Bvc3RzKG51bGwpXG4gICAgZWxzZSBpZih0aGlzLnN0YXRlLmN1cnJlbnRTY3JlZW4gPT0gXCJoaXJpbmdcIilcbiAgICAgIHNjcmVlbiA9IENvbXBhbnlIaXJpbmcobnVsbClcbiAgICBlbHNlIGlmKHRoaXMuc3RhdGUuY3VycmVudFNjcmVlbiA9PSBcImVtcGxveWVlc1wiKVxuICAgICAgc2NyZWVuID0gQ29tcGFueUVtcGxveWVlcyhudWxsKVxuICAgIGVsc2UgaWYodGhpcy5zdGF0ZS5jdXJyZW50U2NyZWVuID09IFwic2ltaWxhclwiKVxuICAgICAgc2NyZWVuID0gQ29tcGFueVNpbWlsYXIobnVsbClcbiAgICBlbHNlIGlmKHRoaXMuc3RhdGUuY3VycmVudFNjcmVlbiA9PSBcInRlY2hub2xvZ2llc1wiKVxuICAgICAgc2NyZWVuID0gQ29tcGFueVRlY2hub2xvZ3kobnVsbClcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbXBhbnlfZGV0YWlsX292ZXJsYXlcIiwgb25DbGljazogdGhpcy50b2dnbGVEZXRhaWxNb2RlfSwgXCIgXCIpLCBcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb21wYW55X2RldGFpbF9tb2RlXCJ9LCBcbiAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicm93XCJ9LCBcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtMlwifSwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2JhY2tncm91bmRJbWFnZTogXCJ1cmwoXCIrY29tcGFueS5sb2dvK1wiKVwiLGhlaWdodDoxMDAsd2lkdGg6MTAwLG1hcmdpbkxlZnQ6MTAsbWFyZ2luVG9wOjEwfSwgXG4gICAgICAgICAgY2xhc3NOYW1lOiBcImNvbXBhbnktaW1nLXRodW1ibmFpbFwifSlcbiAgICAgICksIFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0zXCIsIHN0eWxlOiB7cGFkZGluZ1JpZ2h0OjAscGFkZGluZ0xlZnQ6MjgscGFkZGluZ1RvcDo4fX0sIFxuICAgICAgICBSZWFjdC5ET00uaDQoe3N0eWxlOiB7Zm9udFdlaWdodDpcImJvbGRcIixmb250U2l6ZToxNH19LCBjb21wYW55Lm5hbWUpLCBcbiAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2ZvbnRXZWlnaHQ6XCJib2xkXCJ9fSwgY29tcGFueS5pbmR1c3RyeSksIFxuICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7Zm9udFdlaWdodDpcImJvbGRcIn19LCBjb21wYW55LmhlYWRjb3VudCksIFxuICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7Zm9udFdlaWdodDpcImJvbGRcIn19LCBjb21wYW55LmNpdHkpXG4gICAgICApLCBcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtN1wifSwgXG4gICAgICAgIFJlYWN0LkRPTS5wKHtjbGFzc05hbWU6IFwibGVhZFwiLCBzdHlsZToge21hcmdpblRvcDoxMCxmb250U2l6ZToxMixoZWlnaHQ6MTAwLG92ZXJmbG93OidhdXRvJ319LCBjb21wYW55LmRlc2NyaXB0aW9uKVxuICAgICAgKVxuICAgICksIFxuXG5cbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwibmF2IG5hdi10YWJzIGNhbXBhaWduLXRhYnMgZGV0YWlsLXRhYlwiLCByb2xlOiBcInRhYmxpc3RcIiwgc3R5bGU6IHtwYWRkaW5nUmlnaHQ6MH19LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJjYW1wYWlnbi10YWJcIn0sIFwiIFwiLCBSZWFjdC5ET00uYSh7b25DbGljazogdGhpcy5jaGFuZ2VTY3JlZW4sIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiB0YWJfMX0sIFwiUHJlc3NcIikpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJjYW1wYWlnbi10YWJcIn0sIFJlYWN0LkRPTS5hKHtvbkNsaWNrOiB0aGlzLmNoYW5nZVNjcmVlbiwgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IHRhYl8yfSwgXCJOZXdzXCIpKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwiY2FtcGFpZ24tdGFiXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtvbkNsaWNrOiB0aGlzLmNoYW5nZVNjcmVlbiwgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IHRhYl8zLCBzdHlsZToge2ZvbnRTaXplOjEyfX0sIFxuICAgICAgICAgICAgICAgICAgICBcIkJsb2dzXCIpKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwiY2FtcGFpZ24tdGFiXCJ9LCBSZWFjdC5ET00uYSh7b25DbGljazogdGhpcy5jaGFuZ2VTY3JlZW4sIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiB0YWJfNH0sIFwiSGlyaW5nXCIpKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwiY2FtcGFpZ24tdGFiXCJ9LCBSZWFjdC5ET00uYSh7b25DbGljazogdGhpcy5jaGFuZ2VTY3JlZW4sIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiB0YWJfNX0sIFwiRW1wbG95ZWVzXCIpKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwiY2FtcGFpZ24tdGFiXCJ9LCBSZWFjdC5ET00uYSh7b25DbGljazogdGhpcy5jaGFuZ2VTY3JlZW4sIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiB0YWJfNX0sIFwiU2ltaWxhclwiKSksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcImNhbXBhaWduLXRhYlwifSwgUmVhY3QuRE9NLmEoe29uQ2xpY2s6IHRoaXMuY2hhbmdlU2NyZWVuLCBocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogdGFiXzV9LCBcIlRlY2hub2xvZ2llc1wiKSlcbiAgICAgICAgICAgICAgKSwgXG4gICAgICBzY3JlZW5cbiAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH1cbn0pO1xuXG52YXIgQ29tcGFueVByZXNzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ29tcGFueVByZXNzJyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgXCJQcmVzc1wiXG4gICAgICApXG4gICAgKVxuICB9XG59KVxuXG52YXIgQ29tcGFueU5ld3MgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdDb21wYW55TmV3cycsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICAgIFwiUHJlc3NcIlxuICAgICAgKVxuICAgIClcbiAgfVxufSlcblxudmFyIENvbXBhbnlCbG9nUG9zdHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdDb21wYW55QmxvZ1Bvc3RzJyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgXCJQcmVzc1wiXG4gICAgICApXG4gICAgKVxuICB9XG59KVxudmFyIENvbXBhbnlIaXJpbmcgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdDb21wYW55SGlyaW5nJyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgXCJQcmVzc1wiXG4gICAgICApXG4gICAgKVxuICB9XG59KVxudmFyIENvbXBhbnlFbXBsb3llZXMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdDb21wYW55RW1wbG95ZWVzJyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgXCJQcmVzc1wiXG4gICAgICApXG4gICAgKVxuICB9XG59KVxudmFyIENvbXBhbnlTaW1pbGFyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ29tcGFueVNpbWlsYXInLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICBcIlByZXNzXCJcbiAgICAgIClcbiAgICApXG4gIH1cbn0pXG52YXIgQ29tcGFueVRlY2hub2xvZ3kgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdDb21wYW55VGVjaG5vbG9neScsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICAgIFwiUHJlc3NcIlxuICAgICAgKVxuICAgIClcbiAgfVxufSlcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIFNpZ25hbENhcmRcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBjb21wYW55ID0gdGhpcy5wcm9wcy5jb21wYW55XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0IHNpZ25hbC1jYXJkXCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWJvZHlcIiwgc3R5bGU6IHtwYWRkaW5nTGVmdDoyNSwgcGFkZGluZ1JpZ2h0OjI1fX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNCh7c3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOicxMDAlJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZTogeyBmbG9hdDonbGVmdCcsbWF4V2lkdGg6ICc2MCUnLCB3aGl0ZVNwYWNlOiAnbm93cmFwJyxcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsIHRleHRPdmVyZmxvdzogJ2VsbGlwc2lzJ319LCBcbiAgICAgICAgICAgICAgY29tcGFueS5uYW1lKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLXN1Y2Nlc3NcIiwgXG4gICAgICAgICAgICAgIHN0eWxlOiB7bWFyZ2luTGVmdDo3LCBmbG9hdDoncmlnaHQnLGZvbnRTaXplOjEyLFxuICAgICAgICAgICAgICAgIG1heFdpZHRoOiAnNDAlJywgd2hpdGVTcGFjZTogJ25vd3JhcCcsXG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLCB0ZXh0T3ZlcmZsb3c6ICdlbGxpcHNpcyd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc3VpdGNhc2VcIn0pLCBcIiDCoFwiLCBcbiAgICAgICAgICAgICAgKGNvbXBhbnkuc2lnbmFscykgPyBjb21wYW55LnNpZ25hbHNbMF0uam9iX3RpdGxlIDogXCJcIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3NcIiwgXG4gICAgICAgICAgICBzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luVG9wOjE1LCBmb250V2VpZ2h0Oidib2xkJ319LCBcbiAgICAgICAgICAgIFwiUHJvc3BlY3QgVGhpcyBDb21wYW55XCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00ucCh7c3R5bGU6IHtmb250U2l6ZToxMix3aWR0aDonNzUlJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKG51bGwsIFxuICAgICAgICAgICAgKGNvbXBhbnkuc2lnbmFscykgPyBjb21wYW55LnNpZ25hbHNbMF0uc3VtbWFyeSA6IFwiXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbWFwLW1hcmtlclwifSksIFxuICAgICAgICAgICAgIFwiwqBcIiwgKGNvbXBhbnkuc2lnbmFscykgPyBjb21wYW55LnNpZ25hbHNbMF0ubG9jYXRpb24gOiBcIlwiXG4gICAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBjcmVhdGVMaXN0TW9kYWxcbiAgY3JlYXRlQ2FtcGFpZ246IGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAvL2NvbnNvbGUubG9nKCQoJyNuZXdMaXN0TmFtZScpLnZhbCgpKVxuICAgIG5ld0NhbXBhaWduTmFtZSA9ICQoJyNuZXdDYW1wYWlnbk5hbWUnKS52YWwoKVxuICAgIHByb3NwZWN0TGlzdE5hbWUgPSAkKCcjcHJvc3BlY3RfbGlzdHMnKS52YWwoKVxuICAgIHRoaXNzID0gdGhpc1xuICAgIGZvcihpPTA7aTwgdGhpcy5wcm9wcy5wcm9zcGVjdExpc3RzLmxlbmd0aDsgaSsrKXtcbiAgICAgIGlmKHRoaXMucHJvcHMucHJvc3BlY3RMaXN0c1tpXS5uYW1lID09IHByb3NwZWN0TGlzdE5hbWUpe1xuICAgICAgICBwcm9zcGVjdF9saXN0ID0gdGhpcy5wcm9wcy5wcm9zcGVjdExpc3RzW2ldOyBcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmKG5ld0NhbXBhaWduTmFtZS50cmltKCkgIT0gXCJcIilcbiAgICAgIHRoaXMucHJvcHMuY3JlYXRlQ2FtcGFpZ24oe1xuICAgICAgICBuYW1lOiBuZXdDYW1wYWlnbk5hbWUsXG4gICAgICAgIHByb3NwZWN0X2xpc3Q6IHByb3NwZWN0X2xpc3RcbiAgICAgIH0pXG4gICAgLy8gRGlzYWJsZSBNb2RhbFxuICAgICQoJy5tb2RhbC1iYWNrZHJvcCcpLmNsaWNrKClcbiAgICAkKCcuZmFkZScpLmNsaWNrKClcbiAgICAkKCcjbmV3Q2FtcGFpZ25OYW1lJykudmFsKCcnKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcHJvc3BlY3RfbGlzdHMgPSBbXVxuICAgIGZvcihpPTA7aTwgdGhpcy5wcm9wcy5wcm9zcGVjdExpc3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwcm9zcGVjdF9saXN0cy5wdXNoKCBSZWFjdC5ET00ub3B0aW9uKG51bGwsIHRoaXMucHJvcHMucHJvc3BlY3RMaXN0c1tpXS5uYW1lKSlcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsIGZhZGUgYnMtY3JlYXRlQ2FtcGFpZ24tbW9kYWwtc21cIiwgXG4gICAgICAgICAgIHRhYkluZGV4OiBcIi0xXCIsIHJvbGU6IFwiZGlhbG9nXCIsICdhcmlhLWxhYmVsbGVkYnknOiBcIm15U21hbGxNb2RhbExhYmVsXCIsIFxuICAgICAgICAgICAnYXJpYS1oaWRkZW4nOiBcInRydWVcIiwgaWQ6IFwiY3JlYXRlTGlzdE1vZGFsXCIsIHN0eWxlOiB7dG9wOicyMDBweCd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtZGlhbG9nIG1vZGFsLXNtXCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWNvbnRlbnRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1oZWFkZXJcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgY2xhc3NOYW1lOiBcImNsb3NlXCIsICdkYXRhLWRpc21pc3MnOiBcIm1vZGFsXCJ9LCBSZWFjdC5ET00uc3Bhbih7J2FyaWEtaGlkZGVuJzogXCJ0cnVlXCJ9LCBcIsOXXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJzci1vbmx5XCJ9LCBcIkNsb3NlXCIpKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDQoe2NsYXNzTmFtZTogXCJtb2RhbC10aXRsZVwiLCBpZDogXCJteU1vZGFsTGFiZWxcIn0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWVudmVsb3BlXCJ9KSwgXCIgwqBDcmVhdGUgQ2FtcGFpZ25cIilcbiAgICAgICAgICAgICAgICApLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1ib2R5XCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5mb3JtKHtvblN1Ym1pdDogdGhpcy5jcmVhdGVDYW1wYWlnbn0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe2lkOiBcIm5ld0NhbXBhaWduTmFtZVwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIkVudGVyIENhbXBhaWduIE5hbWUuLi5cIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sXCJ9KSwgXG5cbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLnNlbGVjdCh7Y2xhc3NOYW1lOiBcImZvcm0tY29udHJvbFwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJwcm9zcGVjdF9saXN0c1wiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZToge21hcmdpblRvcDoyMCxtYXJnaW5Cb3R0b206MjB9fSwgXG4gICAgICAgICAgICAgICAgICAgICAgcHJvc3BlY3RfbGlzdHNcbiAgICAgICAgICAgICAgICAgICAgKSwgXG5cbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5jcmVhdGVDYW1wYWlnbiwgXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2Vzc1wiLCBcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJywgd2lkdGg6JzEwMCUnfX0sIFxuICAgICAgICAgICAgICAgICAgICAgIFwiQ3JlYXRlIENhbXBhaWduXCJcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIGNyZWF0ZUNvbXBhbnlQcm9maWxlTW9kYWxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsIGZhZGUgYnMtY3JlYXRlU2lnbmFsLW1vZGFsLW1kXCIsIHRhYkluZGV4OiBcIi0xXCIsIHJvbGU6IFwiZGlhbG9nXCIsICdhcmlhLWxhYmVsbGVkYnknOiBcIm15U21hbGxNb2RhbExhYmVsXCIsICdhcmlhLWhpZGRlbic6IFwidHJ1ZVwiLCBcbiAgICAgICAgICAgaWQ6IFwiY3JlYXRlQ29tcGFueVByb2ZpbGVNb2RhbFwiLCBcbiAgICAgICAgICAgc3R5bGU6IHt0b3A6JzUwcHgnLG92ZXJmbG93OidoaWRkZW4nfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1zbVwiLCBzdHlsZToge3dpZHRoOjY1MH19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWNvbnRlbnRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1oZWFkZXJcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgXCJDcmVhdGUgQ29tcGFueSBQcm9maWxlXCJcbiAgICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4tc21cIiwgXG4gICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmNyZWF0ZUNvbXBhbnlQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6LTI4LG1hcmdpblJpZ2h0Oi01fX0sIFxuICAgICAgICAgICAgICAgICAgICBcIkNyZWF0ZSBQcm9maWxlXCJcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtYm9keVwifSwgXG4gICAgICAgICAgICAgICAgICBDcmVhdGVIaXJpbmdTaWduYWwobnVsbClcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWZvb3RlclwiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgICAgXCJDbG9zZVwiXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeVwifSwgXG4gICAgICAgICAgICAgICAgICBcIlNlbmQgRW1haWxcIlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgY3JlYXRlQ29tcGFueVByb2ZpbGU6IGZ1bmN0aW9uKCkge1xuICAgIHByb2ZpbGVOYW1lID0gJChcIi5jb21wYW55LXByb2ZpbGUtbmFtZVwiKS52YWwoKVxuICAgIGluZHVzdHJ5UHJvZmlsZSA9IHtcbiAgICAgICdjbGFzc05hbWUnOiAnSW5kdXN0cnlQcm9maWxlJyxcbiAgICAgICdpbmR1c3RyaWVzJyA6ICQoJy5jb21wYW55LXByb2ZpbGUtaW5kdXN0cmllcycpLnRhZ3NpbnB1dCgnaXRlbXMnKS5yZXZlcnNlKClcbiAgICB9XG5cbiAgICBsb2NhdGlvblByb2ZpbGUgPSB7XG4gICAgICAnY2xhc3NOYW1lJzogJ0xvY2F0aW9uUHJvZmlsZScsXG4gICAgICAnbG9jYWxlJyAgICA6ICQoJy5jb21wYW55LXByb2ZpbGUtbG9jYXRpb24nKS50YWdzaW5wdXQoJ2l0ZW1zJykucmV2ZXJzZSgpXG4gICAgfVxuXG4gICAgZW1wbG95ZWVQcm9maWxlID0ge1xuICAgICAgJ2NsYXNzTmFtZSc6J0VtcGxveWVlUHJvZmlsZScsIFxuICAgICAgJ2VtcGxveWVlcyc6IF8ubWFwKCQoJyNjb21wYW55LXByb2ZpbGUtZW1wbG95ZWVCdG5zJykuZmluZCgnLmFjdGl2ZScpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJldkJ0bil7IHJldHVybiAkKHJldkJ0bikudGV4dCgpLnRyaW0oKSB9KS5yZXZlcnNlKClcbiAgICB9XG5cbiAgICByZXZlbnVlUHJvZmlsZSA9IHtcbiAgICAgICdjbGFzc05hbWUnOidSZXZlbnVlUHJvZmlsZScsIFxuICAgICAgJ3JldmVudWVzJzogXy5tYXAoJCgnI2NvbXBhbnktcHJvZmlsZS1jb21wYW55UmV2ZW51ZUJ0bnMnKS5maW5kKCcuYWN0aXZlJyksIFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmV2QnRuKXsgcmV0dXJuICQocmV2QnRuKS50ZXh0KCkudHJpbSgpIH0pLnJldmVyc2UoKVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGxvY2F0aW9uUHJvZmlsZSlcbiAgICBcbiAgICBwcm9maWxlcyA9IFtpbmR1c3RyeVByb2ZpbGUsIGxvY2F0aW9uUHJvZmlsZSxcbiAgICAgICAgICAgICAgICBlbXBsb3llZVByb2ZpbGUsIHJldmVudWVQcm9maWxlXVxuXG4gICAgbm9uZW1wdHlQcm9maWxlcyA9IF8uZmlsdGVyKHByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICBpZihfLnZhbHVlcyhwcm9maWxlKVsxXSl7IHJldHVybiBfLnZhbHVlcyhwcm9maWxlKVsxXS5sZW5ndGggfVxuICAgIH0pO1xuXG4gICAgbmV3UHJvZmlsZSA9IHtcbiAgICAgIG5hbWU6IHByb2ZpbGVOYW1lLFxuICAgICAgcHJvZmlsZXM6IG5vbmVtcHR5UHJvZmlsZXMsXG4gICAgICBtaW5pbmdfam9iOnRydWUsXG4gICAgICB1c2VyOntcbiAgICAgICAgX190eXBlOidQb2ludGVyJyxcbiAgICAgICAgY2xhc3NOYW1lOidfVXNlcicsXG4gICAgICAgIG9iamVjdElkOkpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5vYmplY3RJZFxuICAgICAgfSxcbiAgICAgIGNvbXBhbnk6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55XG4gICAgfVxuXG4gICAgaWYobm9uZW1wdHlQcm9maWxlcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMucGVyc2lzdFNpZ25hbChub25lbXB0eVByb2ZpbGVzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICBfLm9taXQobmV3UHJvZmlsZSwncHJvZmlsZXMnKSlcbiAgICAgIHRoaXMucHJvcHMuYWRkUHJvZmlsZShuZXdQcm9maWxlKVxuICAgICAgJCgnLm1vZGFsJykuY2xpY2soKVxuICAgIH1cbiAgfSxcblxuICBwZXJzaXN0U2lnbmFsOiBmdW5jdGlvbihub25lbXB0eVByb2ZpbGVzLCBuZXdQcm9maWxlKSB7XG4gICAgY29uc29sZS5sb2coJ05FVyBQUk9GSUxFJylcbiAgICBjb25zb2xlLmxvZyhuZXdQcm9maWxlKVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RQcm9maWxlJyxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkobmV3UHJvZmlsZSksXG4gICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlc3MpIHtcbiAgICAgICAgLy8gQWRkIFNpZ25hbCBMaXN0XG4gICAgICAgIF8ubWFwKG5vbmVtcHR5UHJvZmlsZXMsIGZ1bmN0aW9uKHByb2ZpbGUpIHtcbiAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzLycrXy52YWx1ZXMocHJvZmlsZSlbMF0sXG4gICAgICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgICAgdHlwZTonUE9TVCcsXG4gICAgICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KCBfLnBpY2socHJvZmlsZSwgXy5rZXlzKHByb2ZpbGUpWzFdKSApLFxuICAgICAgICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RQcm9maWxlLycrcmVzcy5vYmplY3RJZCxcbiAgICAgICAgICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSh7cHJvZmlsZXM6e1xuICAgICAgICAgICAgICAgICAgX19vcDogJ0FkZFVuaXF1ZScsXG4gICAgICAgICAgICAgICAgICBvYmplY3RzOlt7XG4gICAgICAgICAgICAgICAgICAgIF9fdHlwZTonUG9pbnRlcicsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXy52YWx1ZXMocHJvZmlsZSlbMF0sXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdElkOnJlcy5vYmplY3RJZFxuICAgICAgICAgICAgICAgICAgfV19XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuXG4gICAgICB9LFxuICAgIH0pXG4gIH0sXG5cbn0pO1xuXG52YXIgQ3JlYXRlSGlyaW5nU2lnbmFsID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ3JlYXRlSGlyaW5nU2lnbmFsJyxcbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIF8ubWFwKCQoJy5oaXJpbmctcm9sZScpLGZ1bmN0aW9uKGlucHV0KXskKGlucHV0KS50YWdzaW5wdXQoKX0pXG4gICAgJCh0aGlzLmdldERPTU5vZGUoKSkuZmluZCgnLmhpcmluZy1yb2xlJykudGFnc2lucHV0KClcbiAgICAkKCcuYm9vdHN0cmFwLXRhZ3NpbnB1dCcpLndpZHRoKDQwMClcblxuICAgICQodGhpcy5nZXRET01Ob2RlKCkpLmZpbmQoJy5idG4tZGVmYXVsdCcpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcblxuICAgICAgaWYoJChlLnRhcmdldCkucGFyZW50KCdsYWJlbCcpLmhhc0NsYXNzKCdhY3RpdmUnKSlcbiAgICAgICAgJChlLnRhcmdldCkucGFyZW50KCdsYWJlbCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxuICAgICAgZWxzZVxuICAgICAgICAkKGUudGFyZ2V0KS5wYXJlbnQoJ2xhYmVsJykuYWRkQ2xhc3MoJ2FjdGl2ZScpXG5cbiAgICAgIGNvbnNvbGUubG9nKCQoZS50YXJnZXQpLnBhcmVudCgnbGFiZWwnKSlcbiAgICB9KTtcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICAgIFJlYWN0LkRPTS5mb3JtKHtjbGFzc05hbWU6IFwiY3JlYXRlU2lnbmFsXCIsIG9uU3VibWl0OiB0aGlzLmNyZWF0ZVNpZ25hbH0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge3dpZHRoOjE0MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snLG1hcmdpbkJvdHRvbToyMH19LCBcbiAgICAgICAgICAgICAgXCJDb21wYW55IFByb2ZpbGUgTmFtZTogwqBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOic3My4xJSd9LCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGNvbXBhbnktcHJvZmlsZS1uYW1lXCIsIFxuICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIkNvbXBhbnkgUHJvZmlsZSBOYW1lIC4uLlwifSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJyxtYXJnaW5Cb3R0b206LTEwfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge3dpZHRoOjE0MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFxuICAgICAgICAgICAgICBcIkluZHVzdHJpZXM6IMKgXCJcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOic3My4xJScsbWFyZ2luUmlnaHQ6MTB9LCBcbiAgICAgICAgICAgICAgICAgICAnZGF0YS1yb2xlJzogXCJ0YWdzaW5wdXRcIiwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBoaXJpbmctcm9sZSBjb21wYW55LXByb2ZpbGUtaW5kdXN0cmllc1wifSksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLXN1Y2Nlc3NcIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtkaXNwbGF5OidibG9jaycsbWFyZ2luQm90dG9tOi0xMH19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgICAgXCJMb2NhdGlvbjogwqBcIlxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwidGV4dFwiLCBcbiAgICAgICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6JzczLjElJyxtYXJnaW5SaWdodDoxMH0sIFxuICAgICAgICAgICAgICAgICAgICdkYXRhLXJvbGUnOiBcInRhZ3NpbnB1dFwiLCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGhpcmluZy1yb2xlIGNvbXBhbnktcHJvZmlsZS1sb2NhdGlvblwifSksIFxuXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXhzIGJ0bi1zdWNjZXNzXCIsIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyxtYXJnaW46MCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOjE0MCxtYXJnaW5Cb3R0b206MjB9fSwgXCJDb21wYW55IFNpemUgXCIpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cFwiLCAnZGF0YS10b2dnbGUnOiBcImJ1dHRvbnNcIiwgXG4gICAgICAgICAgICAgICAgc3R5bGU6IHt3aWR0aDonNzMuNSUnfSwgXG4gICAgICAgICAgICAgICAgaWQ6IFwiY29tcGFueS1wcm9maWxlLWVtcGxveWVlQnRuc1wifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBlbXBsb3llZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAxIC0gNTBcIlxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgZW1wbG95ZWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgNTAgLSAyNTBcIlxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgZW1wbG95ZWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgMjUwIC0gMTAwMFwiXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBlbXBsb3llZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAxMDAwICtcIlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKSwgXG5cbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcIiBcIiwgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J25vbmUnLG1hcmdpbjowLHdpZHRoOjE0MH19LCBcbiAgICAgICAgICAgICAgICBcIkFwcHJveC4gUmV2ZW51ZSAgXCIpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cFwiLCAnZGF0YS10b2dnbGUnOiBcImJ1dHRvbnNcIiwgXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5Oidub25lJ30sIFxuICAgICAgICAgICAgICAgIGlkOiBcImNvbXBhbnktcHJvZmlsZS1jb21wYW55UmV2ZW51ZUJ0bnNcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgcmV2ZW51ZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiBcIiwgJzwgJDFNJ1xuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgcmV2ZW51ZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkMU0gLSAkNU1cIlxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgcmV2ZW51ZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkNU0gLSAkMjVNXCJcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IHJldmVudWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgJDI1TSArXCJcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgKSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge21hcmdpblRvcDoxMH19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcIkF1dG8gUHJvc3BlY3Q6IMKgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXAgYXV0b3Byb3NwZWN0XCIsICdkYXRhLXRvZ2dsZSc6IFwiYnV0dG9uc1wifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgYWN0aXZlXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwicmFkaW9cIn0pLCBcIiBZZXNcIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInJhZGlvXCJ9KSwgXCIgTm9cIlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9LFxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gY3JlYXRlQ29tcGFueVByb2ZpbGVNb2RhbFxuICBjcmVhdGVQcm9maWxlOiBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgcHJvZmlsZU5hbWUgPSAkKCcuZnVuZGluZy1wcm9maWxlLW5hbWUnKS52YWwoKVxuICAgIFxuICAgIC8vU3RhZ2VcbiAgICAvL0Ftb3VudCBSYWlzZWRcbiAgICAvL0NvbXBhbnkgU2l6ZVxuICAgIC8vQXBwcm94IFJldmVudWVcblxuICAgIGFtb3VudFJhaXNlZFByb2ZpbGUgPSB7XG4gICAgICAnY2xhc3NOYW1lJzonRnVuZGluZ1Byb2ZpbGUnLCBcbiAgICAgICdyZXZlbnVlcyc6IF8ubWFwKCQoJyNhbW91bnRSYWlzZWRCdG5zJykuZmluZCgnLmFjdGl2ZScpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJldkJ0bil7IHJldHVybiAkKHJldkJ0bikudGV4dCgpLnRyaW0oKSB9KS5yZXZlcnNlKClcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhhbW91bnRSYWlzZWRQcm9maWxlKVxuICAgIHByb2ZpbGVzID0gW2Ftb3VudFJhaXNlZFByb2ZpbGVdXG5cbiAgICBub25lbXB0eVByb2ZpbGVzID0gXy5maWx0ZXIocHJvZmlsZXMsIGZ1bmN0aW9uKHByb2ZpbGUpIHtcbiAgICAgIGlmKF8udmFsdWVzKHByb2ZpbGUpWzFdKXsgcmV0dXJuIF8udmFsdWVzKHByb2ZpbGUpWzFdLmxlbmd0aCB9XG4gICAgfSk7XG5cbiAgICBuZXdQcm9maWxlID0ge1xuICAgICAgbmFtZTogcHJvZmlsZU5hbWUsXG4gICAgICBwcm9maWxlczogbm9uZW1wdHlQcm9maWxlcyxcbiAgICAgIHVzZXI6e1xuICAgICAgICBfX3R5cGU6J1BvaW50ZXInLFxuICAgICAgICBjbGFzc05hbWU6J19Vc2VyJyxcbiAgICAgICAgb2JqZWN0SWQ6SlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLm9iamVjdElkXG4gICAgICB9LFxuICAgICAgY29tcGFueTogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLmNvbXBhbnlcbiAgICB9XG5cbiAgICBpZihub25lbXB0eVByb2ZpbGVzLmxlbmd0aCkge1xuICAgICAgdGhpcy5wZXJzaXN0U2lnbmFsKG5vbmVtcHR5UHJvZmlsZXMucmV2ZXJzZSgpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICBfLm9taXQobmV3UHJvZmlsZSwncHJvZmlsZXMnKSlcblxuICAgICAgdGhpcy5wcm9wcy5hZGRQcm9maWxlKG5ld1Byb2ZpbGUpXG4gICAgICAkKCcubW9kYWwnKS5jbGljaygpXG4gICAgfVxuICB9LFxuXG4gIHBlcnNpc3RTaWduYWw6IGZ1bmN0aW9uKG5vbmVtcHR5UHJvZmlsZXMsIG5ld1Byb2ZpbGUpIHtcbiAgICBjb25zb2xlLmxvZygnTkVXIFBST0ZJTEUnKVxuICAgIGNvbnNvbGUubG9nKG5ld1Byb2ZpbGUpXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdFByb2ZpbGUnLFxuICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeShuZXdQcm9maWxlKSxcbiAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzcykge1xuICAgICAgICAvLyBBZGQgU2lnbmFsIExpc3RcbiAgICAgICAgXy5tYXAobm9uZW1wdHlQcm9maWxlcywgZnVuY3Rpb24ocHJvZmlsZSkge1xuICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvJytfLnZhbHVlcyhwcm9maWxlKVswXSxcbiAgICAgICAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgICB0eXBlOidQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoIF8ucGljayhwcm9maWxlLCBfLmtleXMocHJvZmlsZSlbMV0pICksXG4gICAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdFByb2ZpbGUvJytyZXNzLm9iamVjdElkLFxuICAgICAgICAgICAgICAgIHR5cGU6J1BVVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KHtwcm9maWxlczp7XG4gICAgICAgICAgICAgICAgICBfX29wOiAnQWRkVW5pcXVlJyxcbiAgICAgICAgICAgICAgICAgIG9iamVjdHM6W3tcbiAgICAgICAgICAgICAgICAgICAgX190eXBlOidQb2ludGVyJyxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBfLnZhbHVlcyhwcm9maWxlKVswXSxcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0SWQ6cmVzLm9iamVjdElkXG4gICAgICAgICAgICAgICAgICB9XX1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSlcbiAgICAgICAgfSk7XG5cbiAgICAgIH0sXG4gICAgfSlcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwgZmFkZSBcIiwgdGFiSW5kZXg6IFwiLTFcIiwgcm9sZTogXCJkaWFsb2dcIiwgXG4gICAgICAgICAgICdhcmlhLWxhYmVsbGVkYnknOiBcIm15U21hbGxNb2RhbExhYmVsXCIsICdhcmlhLWhpZGRlbic6IFwidHJ1ZVwiLCBcbiAgICAgICAgICAgaWQ6IFwiY3JlYXRlRnVuZGluZ1NpZ25hbE1vZGFsXCIsIFxuICAgICAgICAgICBzdHlsZToge3RvcDonNTBweCcsb3ZlcmZsb3c6J2hpZGRlbid9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtZGlhbG9nIG1vZGFsLXNtXCIsIHN0eWxlOiB7d2lkdGg6NjUwfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtY29udGVudFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWhlYWRlclwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDQoe2NsYXNzTmFtZTogXCJtb2RhbC10aXRsZVwiLCBpZDogXCJteU1vZGFsTGFiZWxcIn0sIFxuICAgICAgICAgICAgICAgICAgICBcIkNyZWF0ZSBGdW5kaW5nIFNpZ25hbFwiXG4gICAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXNtXCIsIFxuICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5jcmVhdGVQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6LTI4LG1hcmdpblJpZ2h0Oi01fX0sIFxuICAgICAgICAgICAgICAgICAgICBcIkNyZWF0ZSBQcm9maWxlXCJcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtYm9keVwifSwgXG5cbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5mb3JtKHtjbGFzc05hbWU6IFwiY3JlYXRlU2lnbmFsXCIsIG9uU3VibWl0OiB0aGlzLmNyZWF0ZVByb2ZpbGV9LCBcbiAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbToyMH19LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJGdW5kaW5nIFByb2ZpbGUgTmFtZTogwqBcIiksIFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOic3My4xJSd9LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGZ1bmRpbmctcHJvZmlsZS1uYW1lXCIsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIkZ1bmRpbmcgUHJvZmlsZSBOYW1lIC4uLlwifSlcbiAgICAgICAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICAgICAgICBDb21wYW55UHJvZmlsZShudWxsKSwgXG5cbiAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge21hcmdpblRvcDoxMCxkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJBdXRvIFByb3NwZWN0OiDCoFwiKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwIGF1dG9wcm9zcGVjdFwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhLXRvZ2dsZSc6IFwiYnV0dG9uc1wifSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgYWN0aXZlXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwicmFkaW9cIn0pLCBcIiBZZXNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInJhZGlvXCJ9KSwgXCIgTm9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgKTtcbiAgfSxcblxuICBjcmVhdGVGdW5kaW5nUHJvZmlsZTogZnVuY3Rpb24oKSB7XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIF8ubWFwKCQoJy5oaXJpbmctcm9sZScpLGZ1bmN0aW9uKGlucHV0KXskKGlucHV0KS50YWdzaW5wdXQoKX0pXG4gICAgJCh0aGlzLmdldERPTU5vZGUoKSkuZmluZCgnLmhpcmluZy1yb2xlJykudGFnc2lucHV0KClcbiAgICAkKCcuYm9vdHN0cmFwLXRhZ3NpbnB1dCcpLndpZHRoKCc1OS4xJScpXG4gIH0sXG5cbn0pO1xuXG52YXIgQ29tcGFueVByb2ZpbGUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdDb21wYW55UHJvZmlsZScsXG4gIGNvbXBhbnlGb3JtU3VibWl0OiBmdW5jdGlvbihlKSB7IGUucHJldmVudERlZmF1bHQoKSB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMuZ2V0RE9NTm9kZSgpKS5maW5kKCcuYnRuLWRlZmF1bHQnKS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICBsYWJlbCA9ICQoZS50YXJnZXQpLnBhcmVudCgnbGFiZWwnKVxuICAgICAgaWYobGFiZWwuaGFzQ2xhc3MoJ2FjdGl2ZScpKVxuICAgICAgICBsYWJlbC5yZW1vdmVDbGFzcygnYWN0aXZlJylcbiAgICAgIGVsc2VcbiAgICAgICAgbGFiZWwuYWRkQ2xhc3MoJ2FjdGl2ZScpXG4gICAgfSk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonbm9uZScsbWFyZ2luOjAsXG4gICAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTQwLG1hcmdpbkJvdHRvbToyMH19LCBcIlN0YWdlIFwiKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cFwiLCAnZGF0YS10b2dnbGUnOiBcImJ1dHRvbnNcIiwgaWQ6IFwiZW1wbG95ZWVCdG5zXCIsIFxuICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCIsIHN0eWxlOiB7d2lkdGg6JzIwJSd9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgU2VlZFwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IFwiLCBzdHlsZToge3dpZHRoOicyMCUnfX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIFNlcmllcyBBXCJcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIiwgc3R5bGU6IHt3aWR0aDonMjAlJ319LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiBTZXJpZXMgQlwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCIsIHN0eWxlOiB7d2lkdGg6JzIwJSd9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgU2VyaWVzIENcIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFwiLCBzdHlsZToge3dpZHRoOicyMCUnfX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIFNlcmllcyBEK1wiXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLG1hcmdpbjowLHdpZHRoOjE0MCxtYXJnaW5Cb3R0b206MjB9fSwgXG4gICAgICAgICAgICAgIFwiQW1vdW50IFJhaXNlZCAgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXAgcHJvZmlsZS1idG5zXCIsICdkYXRhLXRvZ2dsZSc6IFwiYnV0dG9uc1wiLCBcbiAgICAgICAgICAgICAgaWQ6IFwiYW1vdW50UmFpc2VkQnRuc1wiLCBzdHlsZToge3dpZHRoOic3NCUnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGFtb3VudFJhaXNlZEJ0blwiLCBzdHlsZToge3dpZHRoOicyNSUnfX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIFwiLCAnPCAkMU0nXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGFtb3VudFJhaXNlZEJ0blwiLCBzdHlsZToge3dpZHRoOicyNSUnfX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiICQxTSAtICQ1TVwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGFtb3VudFJhaXNlZEJ0blwiLCBzdHlsZToge3dpZHRoOicyNSUnfX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiICQ1TSAtICQyNU1cIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBhbW91bnRSYWlzZWRCdG5cIiwgc3R5bGU6IHt3aWR0aDonMjUlJ319LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkMjVNICtcIlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLCBcblxuICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG5cblxuICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtkaXNwbGF5Oidub25lJyxtYXJnaW46MCxcbiAgICAgICAgICAgICAgICAgICAgICB3aWR0aDoxNDAsbWFyZ2luQm90dG9tOjIwfX0sIFwiQ29tcGFueSBTaXplIFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwXCIsICdkYXRhLXRvZ2dsZSc6IFwiYnV0dG9uc1wiLCBpZDogXCJlbXBsb3llZUJ0bnNcIiwgXG4gICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgZW1wbG95ZWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDEgLSA1MFwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGVtcGxveWVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiA1MCAtIDI1MFwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGVtcGxveWVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAyNTAgLSAxMDAwXCJcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgZW1wbG95ZWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDEwMDAgK1wiXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFwiIFwiLCBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonbm9uZScsbWFyZ2luOjAsd2lkdGg6MTQwfX0sIFxuICAgICAgICAgICAgICBcIkFwcHJveC4gUmV2ZW51ZSAgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXBcIiwgJ2RhdGEtdG9nZ2xlJzogXCJidXR0b25zXCIsIGlkOiBcInJldmVudWVCdG5zXCIsIFxuICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IHJldmVudWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIFwiLCAnPCAkMU0nXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IHJldmVudWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiICQxTSAtICQ1TVwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IHJldmVudWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiICQ1TSAtICQyNU1cIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCByZXZlbnVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkMjVNICtcIlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBDcmVhdGVIaXJpbmdTaWduYWxNb2RhbFxuICBjcmVhdGVTaWduYWw6IGZ1bmN0aW9uKCkge1xuICAgIHByb2ZpbGVOYW1lID0gJCgnLmhpcmluZy1wcm9maWxlLW5hbWUnKS52YWwoKVxuICAgIGF1dG9Qcm9zcGVjdCA9ICQoJy5hdXRvcHJvc3BlY3QgPiAuYWN0aXZlJykudGV4dCgpID09ICBcIiBZZXNcIlxuXG4gICAgaGlyaW5nUHJvZmlsZSA9IHtcbiAgICAgICdjbGFzc05hbWUnOiAnSGlyaW5nUHJvZmlsZScsXG4gICAgICAncm9sZXMnICAgIDogJCgnLmhpcmluZy1yb2xlcycpLnRhZ3NpbnB1dCgnaXRlbXMnKVxuICAgIH1cblxuICAgIHJldmVudWVQcm9maWxlID0ge1xuICAgICAgJ2NsYXNzTmFtZSc6J1JldmVudWVQcm9maWxlJywgXG4gICAgICAncmV2ZW51ZXMnOiBfLm1hcCgkKCcjaGlyaW5nLXJldmVudWVCdG5zJykuZmluZCgnLmFjdGl2ZScpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJldkJ0bil7IHJldHVybiAkKHJldkJ0bikudGV4dCgpLnRyaW0oKSB9KVxuICAgIH1cblxuICAgIGVtcGxveWVlUHJvZmlsZSA9IHtcbiAgICAgICdjbGFzc05hbWUnOidFbXBsb3llZVByb2ZpbGUnLCBcbiAgICAgICdlbXBsb3llZXMnOiBfLm1hcCgkKCcjaGlyaW5nLWVtcGxveWVlQnRucycpLmZpbmQoJy5hY3RpdmUnKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZW1wQnRuKXsgcmV0dXJuICQoZW1wQnRuKS50ZXh0KCkudHJpbSgpIH0pXG4gICAgfVxuXG4gICAgcHJvc3BlY3RQcm9maWxlID0ge1xuICAgICAgJ2NsYXNzTmFtZSc6J1Byb3NwZWN0VGl0bGVQcm9maWxlJyxcbiAgICAgICd0aXRsZV9rZXl3b3JkcycgOiAkKCcucHJvc3BlY3RSb2xlS2V5d29yZHMnKS50YWdzaW5wdXQoJ2l0ZW1zJylcbiAgICB9XG5cbiAgICBwcm9maWxlcyA9IFtoaXJpbmdQcm9maWxlLCByZXZlbnVlUHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgZW1wbG95ZWVQcm9maWxlLCBwcm9zcGVjdFByb2ZpbGVdXG5cbiAgICBub25lbXB0eVByb2ZpbGVzID0gXy5maWx0ZXIocHJvZmlsZXMsIGZ1bmN0aW9uKHByb2ZpbGUpIHtcbiAgICAgIGlmKF8udmFsdWVzKHByb2ZpbGUpWzFdKXsgcmV0dXJuIF8udmFsdWVzKHByb2ZpbGUpWzFdLmxlbmd0aCB9XG4gICAgfSk7XG5cblxuICAgIG5ld1Byb2ZpbGUgPSB7XG4gICAgICBuYW1lOiBwcm9maWxlTmFtZSxcbiAgICAgIGF1dG9Qcm9zcGVjdDogYXV0b1Byb3NwZWN0LFxuICAgICAgcHJvZmlsZXM6IG5vbmVtcHR5UHJvZmlsZXMsXG4gICAgICB1c2VyOntcbiAgICAgICAgX190eXBlOidQb2ludGVyJyxcbiAgICAgICAgY2xhc3NOYW1lOidfVXNlcicsXG4gICAgICAgIG9iamVjdElkOkpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5vYmplY3RJZFxuICAgICAgfSxcbiAgICAgIHVzZXJfY29tcGFueTogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLnVzZXJfY29tcGFueVxuICAgIH1cblxuICAgIGlmKG5vbmVtcHR5UHJvZmlsZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnBlcnNpc3RTaWduYWwobm9uZW1wdHlQcm9maWxlcywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgXy5vbWl0KG5ld1Byb2ZpbGUsJ3Byb2ZpbGVzJykpXG4gICAgICB0aGlzLnByb3BzLmFkZFByb2ZpbGUobmV3UHJvZmlsZSlcbiAgICAgICQoJy5tb2RhbCcpLmNsaWNrKClcbiAgICB9XG4gIH0sXG5cbiAgcGVyc2lzdFNpZ25hbDogZnVuY3Rpb24obm9uZW1wdHlQcm9maWxlcywgbmV3UHJvZmlsZSkge1xuICAgIGNvbnNvbGUubG9nKCdORVcgUFJPRklMRScpXG4gICAgY29uc29sZS5sb2cobmV3UHJvZmlsZSlcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0UHJvZmlsZScsXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgdHlwZTonUE9TVCcsXG4gICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KG5ld1Byb2ZpbGUpLFxuICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXNzKSB7XG5cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL0NvbXBhbnlQcm9zcGVjdExpc3QnLFxuICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KF8ucGljayhuZXdQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbmFtZScsJ3VzZXInLCdsaXN0X3R5cGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvcGVuX3Blb3BsZScsICdjb21wYW55JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWluaW5nX2pvYl9saXN0JykpLFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICAgICAgcHJvc3BlY3RMaXN0ID0gYXBwQ29uZmlnLnBvaW50ZXIoJ0NvbXBhbnlQcm9zcGVjdExpc3QnLHJlcy5vYmplY3RJZClcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdFByb2ZpbGUvJytyZXNzLm9iamVjdElkLFxuICAgICAgICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICAgICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoeydjb21wYW55X3Byb3NwZWN0X2xpc3QnOnByb3NwZWN0TGlzdH0pLFxuICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpeyBjb25zb2xlLmxvZyhyZXMpIH0sXG4gICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpeyBjb25zb2xlLmxvZyhlcnIpIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oKSB7IH1cbiAgICAgICAgfSlcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RMaXN0JyxcbiAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeShfLnBpY2sobmV3UHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25hbWUnLCd1c2VyJywnbGlzdF90eXBlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3Blbl9wZW9wbGUnLCAnY29tcGFueScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21pbmluZ19qb2JfbGlzdCcpKSxcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgICAgIHByb3NwZWN0TGlzdCA9IGFwcENvbmZpZy5wb2ludGVyKCdQcm9zcGVjdExpc3QnLHJlcy5vYmplY3RJZClcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdFByb2ZpbGUvJytyZXNzLm9iamVjdElkLFxuICAgICAgICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICAgICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoeydwcm9zcGVjdF9saXN0Jzpwcm9zcGVjdExpc3R9KSxcbiAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKXsgY29uc29sZS5sb2cocmVzKSB9LFxuICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKXsgY29uc29sZS5sb2coZXJyKSB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkgeyB9XG4gICAgICAgIH0pXG4gICAgICAgIFxuXG4gICAgICAgIC8vIEFkZCBTaWduYWwgTGlzdFxuICAgICAgICBfLm1hcChub25lbXB0eVByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK18udmFsdWVzKHByb2ZpbGUpWzBdLFxuICAgICAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSggXy5waWNrKHByb2ZpbGUsIF8ua2V5cyhwcm9maWxlKVsxXSkgKSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0UHJvZmlsZS8nK3Jlc3Mub2JqZWN0SWQsXG4gICAgICAgICAgICAgICAgdHlwZTonUFVUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoe3Byb2ZpbGVzOntcbiAgICAgICAgICAgICAgICAgIF9fb3A6ICdBZGRVbmlxdWUnLFxuICAgICAgICAgICAgICAgICAgb2JqZWN0czpbe1xuICAgICAgICAgICAgICAgICAgICBfX3R5cGU6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IF8udmFsdWVzKHByb2ZpbGUpWzBdLFxuICAgICAgICAgICAgICAgICAgICBvYmplY3RJZDpyZXMub2JqZWN0SWRcbiAgICAgICAgICAgICAgICAgIH1dfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTdGFydCBNaW5pbmcgSm9iXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgLy91cmw6J2h0dHBzOi8vbmFtZWxlc3MtcmV0cmVhdC0zNTI1Lmhlcm9rdWFwcC5jb20vbWluaW5nX2pvYi90aXRsZScsXG4gICAgICAgICAgLy8vdXJsOidodHRwczovL25hbWVsZXNzLXJldHJlYXQtMzUyNS5oZXJva3VhcHAuY29tL3RpdGxlX21pbmluZ19qb2InLFxuICAgICAgICAgIC8vdXJsOidodHRwOi8vMTI3LjAuMC4xOjUwMDAvc2lnbmFsL2hpcmluZycsXG4gICAgICAgICAgdXJsOidodHRwczovL25hbWVsZXNzLXJldHJlYXQtMzUyNS5oZXJva3VhcHAuY29tL3YxL3NpZ25hbC9oaXJpbmcnLFxuICAgICAgICAgIHR5cGU6J0dFVCcsXG4gICAgICAgICAgZGF0YToge3Byb2ZpbGU6IHJlc3Mub2JqZWN0SWQsIHR5cGU6IFwic2lnbmFsXCJ9LFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyBjb25zb2xlLmxvZyhyZXMpIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIpIH1cbiAgICAgICAgfSlcbiAgICAgIFxuXG4gICAgICB9LFxuICAgIH0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsIGZhZGUgYnMtY3JlYXRlU2lnbmFsLW1vZGFsLW1kXCIsIHRhYkluZGV4OiBcIi0xXCIsIHJvbGU6IFwiZGlhbG9nXCIsICdhcmlhLWxhYmVsbGVkYnknOiBcIm15U21hbGxNb2RhbExhYmVsXCIsICdhcmlhLWhpZGRlbic6IFwidHJ1ZVwiLCBpZDogXCJjcmVhdGVIaXJpbmdTaWduYWxNb2RhbFwiLCBcbiAgICAgICAgICAgc3R5bGU6IHt0b3A6JzUwcHgnLG92ZXJmbG93OidoaWRkZW4nfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1zbVwiLCBzdHlsZToge3dpZHRoOjY1MH19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWNvbnRlbnRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1oZWFkZXJcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgXCJDcmVhdGUgSGlyaW5nIFNpZ25hbFwiXG4gICAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXNtXCIsIFxuICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5jcmVhdGVTaWduYWwsIFxuICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDotMjgsbWFyZ2luUmlnaHQ6LTV9fSwgXG4gICAgICAgICAgICAgICAgICAgIFwiQ3JlYXRlIFNpZ25hbFwiXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICAgICAgQ3JlYXRlSGlyaW5nU2lnbmFsKG51bGwpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgQ3JlYXRlSGlyaW5nU2lnbmFsID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ3JlYXRlSGlyaW5nU2lnbmFsJyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYWRkQ29tcGFueTogZmFsc2UsXG4gICAgICBhZGRQcm9zcGVjdDogZmFsc2UsXG4gICAgICBoaWRlQ29tcGFueURldGFpbHM6IGZhbHNlLFxuICAgICAgaGlkZVByb3NwZWN0RGV0YWlsczogZmFsc2UsXG4gICAgfVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcblxuICB9LFxuICBcbiAgdG9nZ2xlQ29tcGFueSA6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2FkZENvbXBhbnk6ICF0aGlzLnN0YXRlLmFkZENvbXBhbnl9KVxuICB9LFxuXG4gIHRvZ2dsZVByb3NwZWN0IDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7YWRkUHJvc3BlY3Q6ICF0aGlzLnN0YXRlLmFkZFByb3NwZWN0fSlcbiAgfSxcblxuICB0b2dnbGVDb21wYW55RGV0YWlsczogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7aGlkZUNvbXBhbnlEZXRhaWxzOiAhdGhpcy5zdGF0ZS5oaWRlQ29tcGFueURldGFpbHN9KVxuICB9LFxuXG4gIHRvZ2dsZVByb3NwZWN0RGV0YWlsczogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7aGlkZVByb3NwZWN0RGV0YWlsczogIXRoaXMuc3RhdGUuaGlkZVByb3NwZWN0RGV0YWlsc30pXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICQodGhpcy5nZXRET01Ob2RlKCkpLmZpbmQoJy5oaXJpbmctcm9sZScpLnRhZ3NpbnB1dCgpXG4gICAgJCgnLmJvb3RzdHJhcC10YWdzaW5wdXQnKS53aWR0aCg0MDApXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpe1xuICAgIGFkZENvbXBhbnkgPSAoIXRoaXMuc3RhdGUuYWRkQ29tcGFueSkgPyBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZUNvbXBhbnksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSksIFwiwqBcIiArICcgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkFkZCBDb21wYW55IERldGFpbHNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBDb21wYW55UHJvZmlsZSh7aGlkZUNvbXBhbnlEZXRhaWxzOiB0aGlzLnN0YXRlLmhpZGVDb21wYW55RGV0YWlsc30pXG5cbiAgICBhZGRQcm9zcGVjdCA9ICghdGhpcy5zdGF0ZS5hZGRQcm9zcGVjdCkgPyBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZVByb3NwZWN0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pLCBcIsKgXCIgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJBZGQgUHJvc3BlY3QgRGV0YWlsc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IFByb3NwZWN0UHJvZmlsZSh7aGlkZVByb3NwZWN0RGV0YWlsczogdGhpcy5zdGF0ZS5oaWRlUHJvc3BlY3REZXRhaWxzfSlcbiAgICBhZGRDb21wYW55U3R5bGUgPSAoIXRoaXMuc3RhdGUuYWRkQ29tcGFueSkgPyB7ZGlzcGxheTonYmxvY2snLHRleHRBbGlnbjonY2VudGVyJ30gOiB7fVxuICAgIGFkZFByb3NwZWN0U3R5bGUgPSAoIXRoaXMuc3RhdGUuYWRkUHJvc3BlY3QpID8ge2Rpc3BsYXk6J2Jsb2NrJyx0ZXh0QWxpZ246J2NlbnRlcid9IDoge31cblxuICAgIGNsb3NlQ29tcGFueUJ0bnMgPSAoIXRoaXMuc3RhdGUuYWRkQ29tcGFueSkgPyBcIlwiIDogUmVhY3QuRE9NLnNwYW4obnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLWRlZmF1bHRcIiwgXG4gICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZUNvbXBhbnksIFxuICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDotNX19LCBcbiAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdGltZXNcIn0pKSwgXG4gICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwiLCBcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMudG9nZ2xlQ29tcGFueURldGFpbHMsIFxuICAgICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDotNSxtYXJnaW5SaWdodDo1fX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiAodGhpcy5zdGF0ZS5oaWRlQ29tcGFueURldGFpbHMpID8gXCJmYSBmYS1wbHVzXCIgOlwiZmEgZmEtbWludXNcIn0pXG4gICAgICAgICAgKSlcblxuICAgIGNsb3NlUHJvc3BlY3RCdG5zID0gKCF0aGlzLnN0YXRlLmFkZFByb3NwZWN0KSA/IFwiXCIgOiBSZWFjdC5ET00uc3BhbihudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwiLCBcbiAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMudG9nZ2xlUHJvc3BlY3QsIFxuICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDotNX19LCBcbiAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdGltZXNcIn0pKSwgXG4gICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwiLCBcbiAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMudG9nZ2xlUHJvc3BlY3REZXRhaWxzLCBcbiAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6LTUsbWFyZ2luUmlnaHQ6NX19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogKHRoaXMuc3RhdGUuaGlkZVByb3NwZWN0RGV0YWlscykgPyBcImZhIGZhLXBsdXNcIiA6XCJmYSBmYS1taW51c1wifSlcbiAgICAgICAgICApKVxuXG4gICAgY29tcGFueUhlYWRpbmcgPSAoIXRoaXMuc3RhdGUuYWRkQ29tcGFueSkgPyBcIlwiIDogUmVhY3QuRE9NLmg1KG51bGwsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYnVpbGRpbmdcIn0pLCBcIsKgIENvbXBhbnkgRGV0YWlsc1wiKVxuICAgIHByb3NwZWN0SGVhZGluZyA9ICghdGhpcy5zdGF0ZS5hZGRQcm9zcGVjdCkgPyBcIlwiIDogUmVhY3QuRE9NLmg1KG51bGwsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdXNlclwifSksIFwiwqAgUHJvc3BlY3QgRGV0YWlsc1wiKVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICBSZWFjdC5ET00uZm9ybSh7Y2xhc3NOYW1lOiBcImNyZWF0ZVNpZ25hbFwiLCBvblN1Ym1pdDogdGhpcy5jcmVhdGVTaWduYWx9LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJyxtYXJnaW5Cb3R0b206MjB9fSwgXG4gICAgICAgICAgICAgIFwiSGlyaW5nIFByb2ZpbGUgTmFtZTogwqBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOic0MTNweCd9LCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGhpcmluZy1wcm9maWxlLW5hbWVcIiwgXG4gICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiSGlyaW5nIFByb2ZpbGUgTmFtZSAuLi5cIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgICAgXCJIaXJpbmcgUm9sZSBOYW1lOiDCoFwiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonNTAlJyxtYXJnaW5SaWdodDoxMH0sIFxuICAgICAgICAgICAgICAgICAgICdkYXRhLXJvbGUnOiBcInRhZ3NpbnB1dFwiLCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGhpcmluZy1yb2xlIGhpcmluZy1yb2xlc1wifSksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLXN1Y2Nlc3NcIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHttYXJnaW5Ub3A6MTB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge3dpZHRoOjE0MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFwiQXV0byBQcm9zcGVjdDogwqBcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXAgYXV0b3Byb3NwZWN0XCIsICdkYXRhLXRvZ2dsZSc6IFwiYnV0dG9uc1wifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGFjdGl2ZVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJyYWRpb1wifSksIFwiIFllc1wiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwicmFkaW9cIn0pLCBcIiBOb1wiXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaHIobnVsbCksIFwiIFwiLCBjbG9zZUNvbXBhbnlCdG5zLCBcIiBcIiwgY29tcGFueUhlYWRpbmcsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IGFkZENvbXBhbnlTdHlsZX0sIFwiIFwiLCBhZGRDb21wYW55LCBcIiBcIiksIFxuXG4gICAgICAgICAgICBSZWFjdC5ET00uaHIobnVsbCksIFwiIFwiLCBjbG9zZVByb3NwZWN0QnRucywgXCIgXCIsIHByb3NwZWN0SGVhZGluZywgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZTogYWRkUHJvc3BlY3RTdHlsZX0sIFwiIFwiLCBhZGRQcm9zcGVjdCwgXCIgXCIpXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9LFxuICBjcmVhdGVTaWduYWw6IGZ1bmN0aW9uKGUpIHsgZS5wcmV2ZW50RGVmYXVsdCgpIH1cbn0pO1xuXG52YXIgQ29tcGFueVByb2ZpbGUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdDb21wYW55UHJvZmlsZScsXG4gIGNvbXBhbnlGb3JtU3VibWl0OiBmdW5jdGlvbihlKSB7IGUucHJldmVudERlZmF1bHQoKSB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMuZ2V0RE9NTm9kZSgpKS5maW5kKCcuYnRuLWRlZmF1bHQnKS5jbGljayhmdW5jdGlvbihlKSB7XG5cbiAgICAgIGlmKCQoZS50YXJnZXQpLnBhcmVudCgnbGFiZWwnKS5oYXNDbGFzcygnYWN0aXZlJykpXG4gICAgICAgICQoZS50YXJnZXQpLnBhcmVudCgnbGFiZWwnKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcbiAgICAgIGVsc2VcbiAgICAgICAgJChlLnRhcmdldCkucGFyZW50KCdsYWJlbCcpLmFkZENsYXNzKCdhY3RpdmUnKVxuXG4gICAgICBjb25zb2xlLmxvZygkKGUudGFyZ2V0KS5wYXJlbnQoJ2xhYmVsJykpXG4gICAgfSk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBzaG93RGV0YWlscyA9ICh0aGlzLnByb3BzLmhpZGVDb21wYW55RGV0YWlscykgPyB7ZGlzcGxheTogJ25vbmUnfSA6IHtkaXNwbGF5OidibG9jayd9XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiBzaG93RGV0YWlsc30sIFxuICAgICAgICBSZWFjdC5ET00uZm9ybSh7Y2xhc3NOYW1lOiBcImNyZWF0ZVNpZ25hbFwiLCBvblN1Ym1pdDogdGhpcy5jb21wYW55Rm9ybVN1Ym1pdH0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsbWFyZ2luOjAsXG4gICAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTQwLG1hcmdpbkJvdHRvbToyMH19LCBcIkNvbXBhbnkgU2l6ZSBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cFwiLCAnZGF0YS10b2dnbGUnOiBcImJ1dHRvbnNcIiwgaWQ6IFwiaGlyaW5nLWVtcGxveWVlQnRuc1wifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDEgLSA1MFwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiA1MCAtIDI1MFwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAyNTAgLSAxMDAwXCJcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDEwMDAgK1wiXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFwiIFwiLCBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyxtYXJnaW46MCx3aWR0aDoxNDB9fSwgXG4gICAgICAgICAgICAgIFwiUmV2ZW51ZSBBbW91bnQgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXBcIiwgJ2RhdGEtdG9nZ2xlJzogXCJidXR0b25zXCIsIGlkOiBcImhpcmluZy1yZXZlbnVlQnRuc1wifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIFwiLCAnPCAkMU0nXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkMU0gLSAkNU1cIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgJDVNIC0gJDI1TVwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkMjVNICtcIlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH1cbn0pO1xuXG52YXIgUHJvc3BlY3RQcm9maWxlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnUHJvc3BlY3RQcm9maWxlJyxcbiAgcHJvc3BlY3RGb3JtU3VibWl0OiBmdW5jdGlvbihlKSB7IGUucHJldmVudERlZmF1bHQoKSB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAkKCcucHJvc3BlY3RSb2xlS2V5d29yZHMnKS50YWdzaW5wdXQoe1xuICAgICAgbWF4VGFnczogNSxcbiAgICB9KVxuXG4gICAgJCgnLmJvb3RzdHJhcC10YWdzaW5wdXQnKS53aWR0aCg0MDApXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBzaG93RGV0YWlscyA9ICh0aGlzLnByb3BzLmhpZGVQcm9zcGVjdERldGFpbHMpID8ge2Rpc3BsYXk6ICdub25lJ30gOiB7ZGlzcGxheTonYmxvY2snfVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZTogc2hvd0RldGFpbHN9LCBcbiAgICAgICAgUmVhY3QuRE9NLmZvcm0oe2NsYXNzTmFtZTogXCJjcmVhdGVTaWduYWxcIiwgb25TdWJtaXQ6IHRoaXMucHJvc3BlY3RGb3JtU3VibWl0fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4obnVsbCwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIFwiSm9iIFRpdGxlIEtleXdvcmQ6IMKgXCIpXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgICdkYXRhLXJvbGUnOiBcInRhZ3NpbnB1dFwiLCBcbiAgICAgICAgICAgICAgICAgICBzdHlsZToge3dpZHRoOic0MDBweCAhaW1wb3J0YW50J30sIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgcHJvc3BlY3RSb2xlS2V5d29yZHNcIiwgXG4gICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiXCJ9KVxuICAgICAgICAgIClcblxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KVxuXG4vKlxuICBGdW5kaW5nIFByb2ZpbGVcbiAgLSBBbW91bnQgUmFpc2VkXG4gIC0gU3RhZ2VcblxuICBQZW9wbGUgUHJvZmlsZVxuICAtIExvY2FsZVxuICAtIFRpdGxlXG5cbiAgQ29tcGFueSBQcm9maWxlXG4gIC0gSW5kdXN0cmllc1xuICAtIFJldmVudWVcbiAgLSBMb2NhbGVcbiAgLSAjIG9mIEVtcGxveWVlc1xuKi9cblxudmFyIEdlbmVyYWxGb3JtID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnR2VuZXJhbEZvcm0nLFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgUmVhY3QuRE9NLmZvcm0oe2NsYXNzTmFtZTogXCJjcmVhdGVTaWduYWxcIiwgb25TdWJtaXQ6IHRoaXMuY3JlYXRlU2lnbmFsfSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4obnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc3VpdGNhc2VcIn0pLCBcIiDCoFwiLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonOTAlJ30sIFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbFwiLCBwbGFjZWhvbGRlcjogXCJGaW5kIENvbXBhbmllcyBIaXJpbmcgRm9yIC4uLlwifSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFwiIFwiLCBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXVzZXJzXCJ9KSwgXCIgwqBcIiwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwidGV4dFwiLCBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6JzkwJSd9LCBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIiwgcGxhY2Vob2xkZXI6IFwiTnVtYmVyIG9mIEVtcGxveWVlcyAuLi5cIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcIiBcIiwgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcIiBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1pbnN0aXR1dGlvblwifSksIFwiIMKgXCIsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgc3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOic5MCUnfSwgXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sXCIsIHBsYWNlaG9sZGVyOiBcIkFtb3VudCBvZiBGdW5kaW5nIC4uLlwifSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFwiIFwiLCBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLW1vbmV5XCJ9KSwgXCIgwqBcIiwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwidGV4dFwiLCBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6JzkwJSd9LCBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIiwgcGxhY2Vob2xkZXI6IFwiUmV2ZW51ZSBBbW91bnQgLi4uXCJ9KVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXCIgXCIsIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4obnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtd3JlbmNoXCJ9KSwgXCIgwqBcIiwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwidGV4dFwiLCBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6JzkwJSd9LCBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIiwgcGxhY2Vob2xkZXI6IFwiVXNpbmcgVGVjaG5vbG9naWVzIFN1Y2ggQXMuLi5cIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcIiBcIiwgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY3JlYXRlU2lnbmFsLCBcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLWRlZmF1bHQgYnRuLXN1Y2Nlc3NcIiwgXG4gICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJywgd2lkdGg6JzEwMCUnfX0sIFxuICAgICAgICAgICAgXCJDcmVhdGUgU2lnbmFsXCJcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICApXG4gIH1cbn0pXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gY3JlYXRlTGlzdE1vZGFsXG4gIGNyZWF0ZUxpc3Q6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCQoJyNsaXN0VGl0bGUnKS52YWwoKSlcblxuICAgIGN1cnJlbnRVc2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpXG4gICAgX2lkID0gRGF0ZS5ub3coKVxuICAgIGRhdGEgPSAge1xuICAgICAgbmFtZSA6ICQoJyNsaXN0VGl0bGUnKS52YWwoKS50cmltKCksXG4gICAgICB1c2VyIDogYXBwQ29uZmlnLnBvaW50ZXIoJ19Vc2VyJywgY3VycmVudFVzZXIub2JqZWN0SWQpLFxuICAgICAgdXNlcl9jb21wYW55OiBQYXJzZS5fdXNlcl9jb21wYW55LFxuICAgICAgY291bnQ6IDAsXG4gICAgICB0bXA6IF9pZFxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhkYXRhKVxuXG4gICAgdGhpc3MgPSB0aGlzO1xuICAgIGxpc3RDbGFzc05hbWUgPSAodGhpcy5wcm9wcy5saXN0Q2xhc3NOYW1lKSA/IHRoaXMucHJvcHMubGlzdENsYXNzTmFtZSA6ICdQcm9zcGVjdExpc3QnXG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzLycrbGlzdENsYXNzTmFtZSxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IFxuICAgICAgICBjb25zb2xlLmxvZyhyZXMpIFxuICAgICAgICBjb25zb2xlLmxvZyhcInNob3VsZCBiZSB1cGRhdGluZ1wiKVxuICAgICAgICBfdGhpcy5wcm9wcy51cGRhdGVMaXN0KF9pZCwgcmVzLm9iamVjdElkKVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyKSB9XG4gICAgfSk7XG5cbiAgICBkYXRhLmNvdW50ID0gMFxuXG4gICAgdGhpcy5wcm9wcy5jcmVhdGVMaXN0KGRhdGEpXG4gICAgXG4gICAgJCgnI2NyZWF0ZUxpc3RNb2RhbCcpLm1vZGFsKCdoaWRlJylcbiAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ21vZGFsLW9wZW4nKTtcbiAgICAkKCcubW9kYWwtYmFja2Ryb3AnKS5yZW1vdmUoKTtcbiAgfSxcblxuICBjcmVhdGVMaXN0QnV0dG9uQ2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgIGlmKCQoJyNsaXN0VGl0bGUnKS52YWwoKS50cmltKCkgIT0gXCJcIilcbiAgICAgIHRoaXMuY3JlYXRlTGlzdCgpXG4gIH0sXG5cbiAgY3JlYXRlTWluaW5nSm9iOiBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc29sZS5sb2coJ2xtYW8nKVxuICAgIGlmKCQoJyNsaXN0VGl0bGUnKS52YWwoKS50cmltKCkgIT0gXCJcIilcbiAgICAgIHRoaXMuY3JlYXRlTGlzdCgpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbCBmYWRlIGJzLWV4YW1wbGUtbW9kYWwtc21cIiwgdGFiSW5kZXg6IFwiLTFcIiwgcm9sZTogXCJkaWFsb2dcIiwgJ2FyaWEtbGFiZWxsZWRieSc6IFwibXlTbWFsbE1vZGFsTGFiZWxcIiwgJ2FyaWEtaGlkZGVuJzogXCJ0cnVlXCIsIGlkOiBcImNyZWF0ZUxpc3RNb2RhbFwiLCBzdHlsZToge3RvcDonMjAwcHgnfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1zbVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1jb250ZW50XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtaGVhZGVyXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJjbG9zZVwiLCAnZGF0YS1kaXNtaXNzJzogXCJtb2RhbFwifSwgUmVhY3QuRE9NLnNwYW4oeydhcmlhLWhpZGRlbic6IFwidHJ1ZVwifSwgXCLDl1wiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwic3Itb25seVwifSwgXCJDbG9zZVwiKSksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1saXN0XCJ9KSwgXCIgwqBDcmVhdGUgTGlzdFwiKVxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1ib2R5XCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5mb3JtKHtvblN1Ym1pdDogdGhpcy5jcmVhdGVNaW5pbmdKb2J9LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHtpZDogXCJsaXN0VGl0bGVcIiwgdHlwZTogXCJ0ZXh0XCIsIHBsYWNlaG9sZGVyOiBcIkVudGVyIGxpc3QgdGl0bGUuLi5cIiwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbFwifSksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLmNyZWF0ZUxpc3RCdXR0b25DbGljaywgcGxhY2Vob2xkZXI6IFwiRW50ZXIgQ2l0eSBBcmVhLi4uXCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3NcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsIHdpZHRoOicxMDAlJ319LCBcIkNyZWF0ZSBMaXN0XCIpXG4gICAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBjcmVhdGVTaWduYWxNb2RhbFxuICBjcmVhdGVNaW5pbmdKb2I6IGZ1bmN0aW9uKGRhdGUpIHtcbiAgICB2YXIgdGhpc3MgPSB0aGlzO1xuICAgICQuYWpheCh7XG4gICAgICAvL3VybDonaHR0cDovLzEyNy4wLjAuMTo1MDAwL21pbmluZ19qb2IvaGlyaW5nJyxcbiAgICAgIHVybDonaHR0cHM6Ly9uYW1lbGVzcy1yZXRyZWF0LTM1MjUuaGVyb2t1YXBwLmNvbS9taW5pbmdfam9iL2hpcmluZycsXG4gICAgICBkYXRhOiB7cHJvZmlsZV9pZDogdGhpc3MucHJvcHMuY3VycmVudFByb2ZpbGUub2JqZWN0SWQsIHRpbWVzdGFtcDogZGF0ZX0sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgY29uc29sZS5sb2cocmVzKSB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge2NvbnNvbGUubG9nKGVyci5yZXNwb25zZVRleHQpIH1cbiAgICB9KVxuICAgIHRoaXMucHJvcHMuY3JlYXRlTWluaW5nSm9iKHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGUsIGRhdGUpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAvLyBtb21lbnQudXRjKG1vbWVudCgpLnN0YXJ0T2YoJ2RheScpKS52YWx1ZU9mKCkvMTAwMFxuICAgIC8vIHJlY2lldmUgY29tcGxldGVkIGRheXMgYXMgcHJvcHNcbiAgICAvL2NvbnNvbGUubG9nKHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGUpXG4gICAgbWluaW5nX2RheXMgPSB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm1pbmluZ19kYXlzXG4gICAgZGF0ZXMgPSBbXVxuICAgIGZvcihpPTA7aTwgMzA7IGkrKykgeyAgXG4gICAgICBkYXRlID0gbW9tZW50KCkuc3VidHJhY3QoKGkrMSksICdkYXlzJykuc3RhcnRPZignZGF5JylcbiAgICAgIG1pbmluZ19kYXkgPSBfLmluZGV4T2YobWluaW5nX2RheXMsIGRhdGUudmFsdWVPZigpLzEwMDApICE9IC0xXG4gICAgICBkYXRlcy5wdXNoKERvd25sb2FkRGF0ZVJvdyh7dXBkYXRlRGF0ZTogdGhpcy51cGRhdGVEYXRlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVNaW5pbmdKb2I6IHRoaXMuY3JlYXRlTWluaW5nSm9iLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbmdfZGF5OiBtaW5pbmdfZGF5LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRlfSkpXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbCBmYWRlIGJzLWNyZWF0ZU1pbmluZ0pvYi1tb2RhbC1tZFwiLCBcbiAgICAgICAgICAgdGFiSW5kZXg6IFwiLTFcIiwgcm9sZTogXCJkaWFsb2dcIiwgXG4gICAgICAgICAgICdhcmlhLWxhYmVsbGVkYnknOiBcIm15U21hbGxNb2RhbExhYmVsXCIsICdhcmlhLWhpZGRlbic6IFwidHJ1ZVwiLCBcbiAgICAgICAgICAgaWQ6IFwiY3JlYXRlTWluaW5nSm9iTW9kYWxcIiwgXG4gICAgICAgICAgIHN0eWxlOiB7dG9wOic1MHB4JyxvdmVyZmxvdzonaGlkZGVuJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1zbVwiLCBzdHlsZToge3dpZHRoOjM1MH19LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtY29udGVudFwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtaGVhZGVyXCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNsb3VkLWRvd25sb2FkXCJ9KSwgXCLCoFwiICsgJyAnICtcbiAgICAgICAgICAgICAgICBcIkRvd25sb2FkIFByb3NwZWN0c1wiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1zbVwiLCBcbiAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5jcmVhdGVNaW5pbmdKb2IsIFxuICAgICAgICAgICAgICAgICBzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luVG9wOi0yOCxcbiAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDotNSxkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgICAgXCJEb3dubG9hZFwiXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWJvZHlcIn0sIFxuXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcImxpc3QtZ3JvdXAgZGF0ZS1kb3dubG9hZC1wcm9zcGVjdHNcIiwgXG4gICAgICAgICAgICAgICAgICBzdHlsZToge2hlaWdodDo0MDAsb3ZlcmZsb3c6J2F1dG8nLFxuICAgICAgICAgICAgICAgICAgYm9yZGVyQm90dG9tOidzb2xpZCAxcHggI2RkZCcsXG4gICAgICAgICAgICAgICAgICBjdXJzb3I6J3BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgYm9yZGVyVG9wOidzb2xpZCAxcHggI2RkZCd9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbjowfX0sIGRhdGVzKVxuICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9LFxufSk7XG5cbnZhciBEb3dubG9hZERhdGVSb3cgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdEb3dubG9hZERhdGVSb3cnLFxuICB1cGRhdGVEYXRlOiBmdW5jdGlvbigpIHtcbiAgICAvL3RoaXMuY3JlYXRlTWluaW5nSm9iKClcbiAgICBkYXRlID0gdGhpcy5wcm9wcy5kYXRlLnN0YXJ0T2YoJ2RheScpLnZhbHVlT2YoKS8xMDAwXG4gICAgLy9kYXRlID0gbW9tZW50KCkuc3VidHJhY3QoKGkrMSksICdkYXlzJykuc3RhcnRPZignZGF5JylcbiAgICB0aGlzLnByb3BzLmNyZWF0ZU1pbmluZ0pvYihkYXRlKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgbG9hZGluZyA9ICh0aGlzLnByb3BzLm1pbmluZ19kYXkpID8gIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwcm9maWxlLWxvYWRpbmdcIiwgc3R5bGU6IHtmbG9hdDoncmlnaHQnLGhlaWdodDoyMCx3aWR0aDoyMH19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJkb3VibGUtYm91bmNlMVwiLCBzdHlsZToge2JhY2tncm91bmRDb2xvcjonIzVjYjg1Yyd9fSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRvdWJsZS1ib3VuY2UyXCIsIHN0eWxlOiB7YmFja2dyb3VuZENvbG9yOicjNWNiODVjJ319KVxuICAgICAgICAgICkgOiBcIlwiXG4gICAgbG9hZGluZyA9IFwiXCJcbiAgICByZXR1cm4gKFxuICAgICAgICBSZWFjdC5ET00ubGkoe29uQ2xpY2s6IHRoaXMudXBkYXRlRGF0ZSwgc3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9LCBcbiAgICAgICAgICBjbGFzc05hbWU6IFwibGlzdC1ncm91cC1pdGVtIGRvd25sb2FkLWRhdGUgYmctc3VjY2Vzc1wiLCBcbiAgICAgICAgICBzdHlsZTogKHRoaXMucHJvcHMubWluaW5nX2RheSkgPyB7YmFja2dyb3VuZENvbG9yOicjZGZmMGQ4Jyx0ZXh0QWxpZ246J2NlbnRlcid9IDoge3RleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHt3aWR0aDo4NX19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2FsZW5kYXJcIn0pLCBcIsKgXCIsIFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5kYXRlLmZvcm1hdCgnbGwnKSwgXCIgwqAgwqAgwqBcIlxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIHN0eWxlOiB7d2lkdGg6ODl9LCBcbiAgICAgIGNsYXNzTmFtZTogKHRoaXMucHJvcHMubWluaW5nX2RheSkgPyBcImJ0biBidG4tc3VjY2VzcyBidG4teHMgZGlzYWJsZWRcIiA6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14c1wifSwgXG4gICAgICAgICAgICAodGhpcy5wcm9wcy5taW5pbmdfZGF5KSA/IFwiRG93bmxvYWRpbmdcIiA6IFwiRG93bmxvYWRcIiksIFxuICAgICAgICAgIGxvYWRpbmdcbiAgICAgICAgKVxuICAgIClcbiAgfVxufSlcblxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIGNyZWF0ZUNvbXBhbnlQcm9maWxlTW9kYWxcbiAgY3JlYXRlUHJvZmlsZTogZnVuY3Rpb24oKSB7XG4gICAgcHJvZmlsZU5hbWUgPSAkKFwiLnByb2ZpbGVOYW1lXCIpLnZhbCgpXG5cbiAgICB0aXRsZVByb2ZpbGUgPSB7XG4gICAgICAnY2xhc3NOYW1lJzogJ1Byb3NwZWN0VGl0bGVQcm9maWxlJyxcbiAgICAgICd0aXRsZV9rZXl3b3JkcycgICAgOiAkKCcucHJvc3BlY3QtcHJvZmlsZS10aXRsZScpLnRhZ3NpbnB1dCgnaXRlbXMnKS5yZXZlcnNlKClcbiAgICB9XG5cbiAgICAvKiAqL1xuICAgIFxuICAgIHByb2ZpbGVzID0gW3RpdGxlUHJvZmlsZV1cblxuICAgIG5vbmVtcHR5UHJvZmlsZXMgPSBfLmZpbHRlcihwcm9maWxlcywgZnVuY3Rpb24ocHJvZmlsZSkge1xuICAgICAgaWYoXy52YWx1ZXMocHJvZmlsZSlbMV0peyByZXR1cm4gXy52YWx1ZXMocHJvZmlsZSlbMV0ubGVuZ3RoIH1cbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZyhub25lbXB0eVByb2ZpbGVzKVxuXG4gICAgbmV3UHJvZmlsZSA9IHtcbiAgICAgIG5hbWU6IHByb2ZpbGVOYW1lLFxuICAgICAgcHJvZmlsZXM6IG5vbmVtcHR5UHJvZmlsZXMsXG4gICAgICB0eXBlOiAncHJvc3BlY3RfcHJvZmlsZScsXG4gICAgICBtaW5pbmdfam9iOnRydWUsXG4gICAgICBsaXN0X3R5cGU6XCJtaW5pbmdfam9iXCIsXG4gICAgICBvbmx5X3Blb3BsZTp0cnVlLFxuICAgICAgdGltZXN0YW1wOiBtb21lbnQoKS52YWx1ZU9mKCksXG4gICAgICBkb25lOiAwLFxuICAgICAgdXNlcjp7XG4gICAgICAgIF9fdHlwZTonUG9pbnRlcicsXG4gICAgICAgIGNsYXNzTmFtZTonX1VzZXInLFxuICAgICAgICBvYmplY3RJZDpKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikub2JqZWN0SWRcbiAgICAgIH0sXG4gICAgICBjb21wYW55OiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikuY29tcGFueVxuICAgIH1cblxuICAgIGlmKG5vbmVtcHR5UHJvZmlsZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnByb3BzLmFkZFByb2ZpbGUobmV3UHJvZmlsZSlcbiAgICAgIHRoaXMucGVyc2lzdFNpZ25hbChub25lbXB0eVByb2ZpbGVzLCBuZXdQcm9maWxlKVxuICAgICAgJCgnLm1vZGFsJykuY2xpY2soKVxuICAgICAgJCgnLnByb3NwZWN0LXByb2ZpbGUtdGl0bGUnKS52YWwoJycpXG4gICAgfVxuICB9LFxuXG4gIHBlcnNpc3RTaWduYWw6IGZ1bmN0aW9uKG5vbmVtcHR5UHJvZmlsZXMsIG5ld1Byb2ZpbGUpIHtcbiAgICBjb25zb2xlLmxvZygnTkVXIFBST0ZJTEUnKVxuICAgIGNvbnNvbGUubG9nKG5ld1Byb2ZpbGUpXG5cbiAgICB2YXIgdGhpc3NzcyA9IHRoaXM7XG4gICAgdmFyIHRoaXNzID0gdGhpcztcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RQcm9maWxlJyxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoXy5vbWl0KG5ld1Byb2ZpbGUsICdwcm9maWxlcycpKSxcbiAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzcykge1xuICAgICAgICBcbiAgICAgICAgdXNlcl9pZCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5vYmplY3RJZFxuICAgICAgICBuZXdQcm9maWxlLnVzZXIgPSBhcHBDb25maWcucG9pbnRlcignX1VzZXInLCB1c2VyX2lkKSBcbiAgICAgICAgbmV3UHJvZmlsZS5fdXNlcl9jb21wYW55ID0gUGFyc2UuX3VzZXJfY29tcGFueVxuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgdXJsOiAgICAgJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RMaXN0JyxcbiAgICAgICAgICB0eXBlOiAgICAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgZGF0YTogICAgSlNPTi5zdHJpbmdpZnkoXy5waWNrKG5ld1Byb2ZpbGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICduYW1lJywndXNlcicsJ2xpc3RfdHlwZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29wZW5fcGVvcGxlJywgJ2NvbXBhbnknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtaW5pbmdfam9iX2xpc3QnKSksXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgICAgICBwcm9zcGVjdExpc3QgPSBhcHBDb25maWcucG9pbnRlcignUHJvc3BlY3RMaXN0JyxyZXMub2JqZWN0SWQpXG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RQcm9maWxlLycrcmVzcy5vYmplY3RJZCxcbiAgICAgICAgICAgICAgdHlwZTonUFVUJyxcbiAgICAgICAgICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHsncHJvc3BlY3RfbGlzdCc6cHJvc3BlY3RMaXN0fSksXG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7IGNvbnNvbGUubG9nKHJlcykgfSxcbiAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycil7IGNvbnNvbGUubG9nKGVycikgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbigpIHsgfVxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIFN0YXJ0IE1pbmluZyBKb2JcbiAgICAgICAgaWYobmV3UHJvZmlsZS50eXBlID09ICdwcm9zcGVjdF9wcm9maWxlJykge1xuICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6ICdodHRwczovL25hbWVsZXNzLXJldHJlYXQtMzUyNS5oZXJva3VhcHAuY29tL3RpdGxlX21pbmluZ19qb2InLFxuICAgICAgICAgICAgLy91cmw6J2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC90aXRsZV9taW5pbmdfam9iJyxcbiAgICAgICAgICAgIHR5cGU6J0dFVCcsXG4gICAgICAgICAgICBkYXRhOiB7cHJvc3BlY3RfcHJvZmlsZTogcmVzcy5vYmplY3RJZH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgY29uc29sZS5sb2cocmVzKSB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIpIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlIFByb2ZpbGVzXG4gICAgICAgIF8ubWFwKG5vbmVtcHR5UHJvZmlsZXMsIGZ1bmN0aW9uKHByb2ZpbGUpIHtcbiAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzLycrXy52YWx1ZXMocHJvZmlsZSlbMF0sXG4gICAgICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgICAgdHlwZTonUE9TVCcsXG4gICAgICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KCBfLnBpY2socHJvZmlsZSwgXy5rZXlzKHByb2ZpbGUpWzFdKSApLFxuICAgICAgICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RQcm9maWxlLycrcmVzcy5vYmplY3RJZCxcbiAgICAgICAgICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSh7cHJvZmlsZXM6e1xuICAgICAgICAgICAgICAgICAgX19vcDogJ0FkZFVuaXF1ZScsXG4gICAgICAgICAgICAgICAgICBvYmplY3RzOlt7XG4gICAgICAgICAgICAgICAgICAgIF9fdHlwZTonUG9pbnRlcicsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXy52YWx1ZXMocHJvZmlsZSlbMF0sXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdElkOnJlcy5vYmplY3RJZFxuICAgICAgICAgICAgICAgICAgfV19XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpc3MucHJvcHMudXBkYXRlUHJvZmlsZVdpdGhPYmplY3RJZChuZXdQcm9maWxlLnRpbWVzdGFtcCwgcmVzcy5vYmplY3RJZClcbiAgICAgIH1cbiAgICB9KVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbCBmYWRlIFwiLCB0YWJJbmRleDogXCItMVwiLCByb2xlOiBcImRpYWxvZ1wiLCBcbiAgICAgICAgICAgJ2FyaWEtbGFiZWxsZWRieSc6IFwibXlTbWFsbE1vZGFsTGFiZWxcIiwgJ2FyaWEtaGlkZGVuJzogXCJ0cnVlXCIsIFxuICAgICAgICAgICBpZDogXCJjcmVhdGVQcm9zcGVjdFByb2ZpbGVNb2RhbFwiLCBcbiAgICAgICAgICAgc3R5bGU6IHt0b3A6JzUwcHgnLG92ZXJmbG93OidoaWRkZW4nfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1zbVwiLCBzdHlsZToge3dpZHRoOjY1MH19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWNvbnRlbnRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1oZWFkZXJcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgXCJDcmVhdGUgUHJvc3BlY3QgUHJvZmlsZVwiXG4gICAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXNtXCIsIFxuICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5jcmVhdGVQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6LTI4LG1hcmdpblJpZ2h0Oi01fX0sIFxuICAgICAgICAgICAgICAgICAgICBcIkNyZWF0ZSBQcm9maWxlXCJcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtYm9keVwifSwgXG4gICAgICAgICAgICAgICAgICBDcmVhdGVIaXJpbmdTaWduYWwobnVsbClcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWZvb3RlclwiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgICAgXCJDbG9zZVwiXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeVwifSwgXG4gICAgICAgICAgICAgICAgICBcIlNlbmQgRW1haWxcIlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICk7XG4gIH0sXG4gIGNyZWF0ZUNvbXBhbnlQcm9maWxlOiBmdW5jdGlvbigpIHtcbiAgfSxcbn0pO1xuXG52YXIgQ3JlYXRlSGlyaW5nU2lnbmFsID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ3JlYXRlSGlyaW5nU2lnbmFsJyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYWRkQ29tcGFueTogZmFsc2UsXG4gICAgICBhZGRQcm9zcGVjdDogZmFsc2UsXG4gICAgICBoaWRlQ29tcGFueURldGFpbHM6IGZhbHNlLFxuICAgICAgaGlkZVByb3NwZWN0RGV0YWlsczogZmFsc2UsXG4gICAgfVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcblxuICB9LFxuICBcbiAgdG9nZ2xlQ29tcGFueSA6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2FkZENvbXBhbnk6ICF0aGlzLnN0YXRlLmFkZENvbXBhbnl9KVxuICB9LFxuXG4gIHRvZ2dsZVByb3NwZWN0IDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7YWRkUHJvc3BlY3Q6ICF0aGlzLnN0YXRlLmFkZFByb3NwZWN0fSlcbiAgfSxcblxuICB0b2dnbGVDb21wYW55RGV0YWlsczogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7aGlkZUNvbXBhbnlEZXRhaWxzOiAhdGhpcy5zdGF0ZS5oaWRlQ29tcGFueURldGFpbHN9KVxuICB9LFxuXG4gIHRvZ2dsZVByb3NwZWN0RGV0YWlsczogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7aGlkZVByb3NwZWN0RGV0YWlsczogIXRoaXMuc3RhdGUuaGlkZVByb3NwZWN0RGV0YWlsc30pXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIF8ubWFwKCQoJy5oaXJpbmctcm9sZScpLGZ1bmN0aW9uKGlucHV0KXskKGlucHV0KS50YWdzaW5wdXQoKX0pXG4gICAgJCh0aGlzLmdldERPTU5vZGUoKSkuZmluZCgnLmhpcmluZy1yb2xlJykudGFnc2lucHV0KClcbiAgICAkKCcuYm9vdHN0cmFwLXRhZ3NpbnB1dCcpLndpZHRoKCc1OS4xJScpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpe1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICBSZWFjdC5ET00uZm9ybSh7Y2xhc3NOYW1lOiBcImNyZWF0ZVNpZ25hbFwiLCBvblN1Ym1pdDogdGhpcy5jcmVhdGVQcm9maWxlfSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4obnVsbCwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7d2lkdGg6MTQwLGRpc3BsYXk6J2lubGluZS1ibG9jaycsbWFyZ2luQm90dG9tOjIwfX0sIFxuICAgICAgICAgICAgICBcIlByb3NwZWN0IFByb2ZpbGUgTmFtZTogwqBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOic3My4xJSd9LCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGhpcmluZy1wcm9maWxlLW5hbWUgcHJvZmlsZU5hbWVcIiwgXG4gICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiUHJvc3BlY3QgUHJvZmlsZSBOYW1lIC4uLlwifSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJyxtYXJnaW5Cb3R0b206LTEwfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge3dpZHRoOjE0MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFxuICAgICAgICAgICAgICBcIlRpdGxlOiDCoFwiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonNzMuMSUnLG1hcmdpblJpZ2h0OjEwfSwgXG4gICAgICAgICAgICAgICAgICAgJ2RhdGEtcm9sZSc6IFwidGFnc2lucHV0XCIsIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgaGlyaW5nLXJvbGUgcHJvc3BlY3QtcHJvZmlsZS10aXRsZVwifSksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLXN1Y2Nlc3NcIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtkaXNwbGF5OidibG9jaycsbWFyZ2luQm90dG9tOi0xMH19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgIFwiTG9jYXRpb246IMKgXCJcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5Oidub25lJyx3aWR0aDonNzMuMSUnLG1hcmdpblJpZ2h0OjEwfSwgXG4gICAgICAgICAgICAgICAgICAgJ2RhdGEtcm9sZSc6IFwidGFnc2lucHV0XCIsIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgcHJvc3BlY3QtbG9jYXRpb24tcHJvZmlsZS10bXBcIn0pLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXhzIGJ0bi1zdWNjZXNzXCIsIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2Rpc3BsYXk6J25vbmUnLG1hcmdpbkJvdHRvbTotMTB9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7d2lkdGg6MTQwLGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICAgIFwiSW5kdXN0cmllczogwqBcIlxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwidGV4dFwiLCBcbiAgICAgICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6JzczLjElJyxtYXJnaW5SaWdodDoxMH0sIFxuICAgICAgICAgICAgICAgICAgICdkYXRhLXJvbGUnOiBcInRhZ3NpbnB1dFwiLCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIFwifSksIFxuXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXhzIGJ0bi1zdWNjZXNzXCIsIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLCBcbiAgICAgICAgICBDb21wYW55UHJvZmlsZShudWxsKSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7bWFyZ2luVG9wOjEwfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge3dpZHRoOjE0MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFwiQXV0byBQcm9zcGVjdDogwqBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cCBhdXRvcHJvc3BlY3RcIiwgJ2RhdGEtdG9nZ2xlJzogXCJidXR0b25zXCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBhY3RpdmVcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJyYWRpb1wifSksIFwiIFllc1wiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwicmFkaW9cIn0pLCBcIiBOb1wiXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfSxcbiAgY3JlYXRlU2lnbmFsOiBmdW5jdGlvbihlKSB7IGUucHJldmVudERlZmF1bHQoKSB9XG59KTtcblxudmFyIENvbXBhbnlQcm9maWxlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ29tcGFueVByb2ZpbGUnLFxuICBjb21wYW55Rm9ybVN1Ym1pdDogZnVuY3Rpb24oZSkgeyBlLnByZXZlbnREZWZhdWx0KCkgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgJCh0aGlzLmdldERPTU5vZGUoKSkuZmluZCgnLmJ0bi1kZWZhdWx0JykuY2xpY2soZnVuY3Rpb24oZSkge1xuXG4gICAgICBpZigkKGUudGFyZ2V0KS5wYXJlbnQoJ2xhYmVsJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKVxuICAgICAgICAkKGUudGFyZ2V0KS5wYXJlbnQoJ2xhYmVsJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG4gICAgICBlbHNlXG4gICAgICAgICQoZS50YXJnZXQpLnBhcmVudCgnbGFiZWwnKS5hZGRDbGFzcygnYWN0aXZlJylcblxuICAgICAgY29uc29sZS5sb2coJChlLnRhcmdldCkucGFyZW50KCdsYWJlbCcpKVxuICAgIH0pO1xuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLG1hcmdpbjowLFxuICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOjE0MCxtYXJnaW5Cb3R0b206MjB9fSwgXCJDb21wYW55IFNpemUgXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cFwiLCAnZGF0YS10b2dnbGUnOiBcImJ1dHRvbnNcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHt3aWR0aDonNzMuNSUnfSwgaWQ6IFwicHJvc3BlY3QtcHJvZmlsZS1jb21wYW55U2l6ZUJ0bnNcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGVtcGxveWVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAxIC0gNTBcIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBlbXBsb3llZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgNTAgLSAyNTBcIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBlbXBsb3llZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgMjUwIC0gMTAwMFwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGVtcGxveWVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAxMDAwICtcIlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcIiBcIiwgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsbWFyZ2luOjAsd2lkdGg6MTQwfX0sIFxuICAgICAgICAgICAgICBcIkFwcHJveC4gUmV2ZW51ZSAgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXBcIiwgJ2RhdGEtdG9nZ2xlJzogXCJidXR0b25zXCIsIFxuICAgICAgICAgICAgICBzdHlsZToge3dpZHRoOic3My41JSd9LCBpZDogXCJwcm9zcGVjdC1wcm9maWxlLWNvbXBhbnlSZXZlbnVlQnRuc1wifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgcmV2ZW51ZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgXCIsICc8ICQxTSdcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgcmV2ZW51ZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgJDFNIC0gJDVNXCJcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgcmV2ZW51ZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgJDVNIC0gJDI1TVwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IHJldmVudWVCdG5cIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiICQyNU0gK1wiXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KTtcblxudmFyIFByb3NwZWN0UHJvZmlsZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1Byb3NwZWN0UHJvZmlsZScsXG4gIHByb3NwZWN0Rm9ybVN1Ym1pdDogZnVuY3Rpb24oZSkgeyBlLnByZXZlbnREZWZhdWx0KCkgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgJCgnLnByb3NwZWN0Um9sZUtleXdvcmRzJykudGFnc2lucHV0KHtcbiAgICAgIG1heFRhZ3M6IDUsXG4gICAgfSlcbiAgICAkKCcuYm9vdHN0cmFwLXRhZ3NpbnB1dCcpLndpZHRoKDQwMClcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHNob3dEZXRhaWxzID0gKHRoaXMucHJvcHMuaGlkZVByb3NwZWN0RGV0YWlscykgPyB7ZGlzcGxheTogJ25vbmUnfSA6IHtkaXNwbGF5OidibG9jayd9XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiBzaG93RGV0YWlsc30sIFxuICAgICAgICBSZWFjdC5ET00uZm9ybSh7Y2xhc3NOYW1lOiBcImNyZWF0ZVNpZ25hbFwiLCBvblN1Ym1pdDogdGhpcy5wcm9zcGVjdEZvcm1TdWJtaXR9LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge3dpZHRoOjE0MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgXCJKb2IgVGl0bGUgS2V5d29yZDogwqBcIilcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgJ2RhdGEtcm9sZSc6IFwidGFnc2lucHV0XCIsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7d2lkdGg6JzQwMHB4ICFpbXBvcnRhbnQnfSwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBwcm9zcGVjdFJvbGVLZXl3b3Jkc1wiLCBcbiAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJcIn0pXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KVxuIiwiLyoqIEBqc3ggcmVhY3QuZG9tICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIFxuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgJCgnLnRlbXBsYXRlLWJvZHknKS5odG1sKHRoaXMuc3RhdGUudGVtcGxhdGVCb2R5KVxuICB9LFxuXG4gIGNsaWNrZWRPdmVybGF5OiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnY2xpY2tlZCBvdmVybGF5JylcbiAgICB0aGlzLnByb3BzLnRvZ2dsZVRlbXBsYXRlRWRpdE1lbnUoKVxuICB9LFxuXG4gIGNoYW5nZU1vZGU6IGZ1bmN0aW9uKCkge1xuICAgIC8vIFVwZGF0ZSB0ZW1wbGF0ZSBodG1sIG9uIHRvZ2dsZVxuICAgIGNvbnNvbGUubG9nKCdFRElUIE1PREUnKVxuICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUuZWRpdE1vZGUpXG4gICAgcGFyc2VfaGVhZGVycyA9IGFwcENvbmZpZy5wYXJzZUhlYWRlcnNcbiAgICBpZih0aGlzLnN0YXRlLmVkaXRNb2RlKXtcbiAgICAgICQoJy5zdW1tZXInKS5kZXN0cm95KCk7XG4gICAgICB0aGlzLnByb3BzLnNhdmVUZW1wbGF0ZSh7XG4gICAgICAgIG5hbWU6IHRoaXMuc3RhdGUubmFtZSxcbiAgICAgICAgdGVtcGxhdGVCb2R5OiAkKCcuc3VtbWVyJykuY29kZSgpLFxuICAgICAgICB0ZW1wbGF0ZVN1YmplY3Q6ICQoJy5zdWJqZWN0JykudmFsKCksXG4gICAgICB9KVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHRlbXBsYXRlQm9keTogJCgnLnN1bW1lcicpLmNvZGUoKSxcbiAgICAgICAgdGVtcGxhdGVTdWJqZWN0OiAkKCcuc3ViamVjdCcpLnZhbCgpLFxuICAgICAgICBlZGl0TW9kZTogIXRoaXMuc3RhdGUuZWRpdE1vZGUsXG4gICAgICB9KVxuICAgICAgJC5hamF4KHtcbiAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1RlbXBsYXRlcy8nK3RoaXMucHJvcHMuaW5pdGlhbFRlbXBsYXRlVmFsdWVzLm9iamVjdElkLFxuICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICBoZWFkZXJzOnBhcnNlX2hlYWRlcnMsXG4gICAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoe2JvZHk6ICQoJy5zdW1tZXInKS5jb2RlKCksc3ViamVjdDogJCgnLnN1YmplY3QnKS52YWwoKX0pLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgZWRpdE1vZGU6ICF0aGlzLnN0YXRlLmVkaXRNb2RlIH0pXG4gICAgfVxuICB9LFxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgLyogdGhpc3MgPSB0aGlzOyAqL1xuXG4gICAgY29uc29sZS5sb2coJ09USEVSJylcbiAgICBpZih0aGlzLnN0YXRlLmVkaXRNb2RlKXtcbiAgICAgIGNvbnNvbGUubG9nKCdDQUxMRUQnKVxuICAgICAgLy8gUmVwbGFjZSBTdWJqZWN0IFxuICAgICAgJCgnLnN1YmplY3QnKS52YWwodGhpcy5zdGF0ZS50ZW1wbGF0ZVN1YmplY3QpXG5cbiAgICAgICQoJy5zdW1tZXInKS5zdW1tZXJub3RlKHtcbiAgICAgICAgaGVpZ2h0OiAyMDAsXG4gICAgICAgIHRvb2xiYXI6IFtcbiAgICAgICAgICBbJ3N0eWxlJywgWydib2xkJywgJ2l0YWxpYycsICd1bmRlcmxpbmUnLCAnY2xlYXInXV0sXG4gICAgICAgICAgWydmb250JywgWydzdHJpa2V0aHJvdWdoJ11dLFxuICAgICAgICAgIFsnZm9udHNpemUnLCBbJ2ZvbnRzaXplJ11dLFxuICAgICAgICAgIFsnY29sb3InLCBbJ2NvbG9yJ11dLFxuICAgICAgICAgIFsncGFyYScsIFsndWwnLCAnb2wnLCAncGFyYWdyYXBoJ11dLFxuICAgICAgICAgIFsnaGVpZ2h0JywgWydoZWlnaHQnXV0sXG4gICAgICAgIF1cbiAgICAgIH0pXG5cbiAgICAgIC8vIEluaXRpYWxpemUgRWRpdG9yIHdpdGggaHRtbFxuICAgICAgJCgnLnN1bW1lcicpLmNvZGUodGhpcy5zdGF0ZS50ZW1wbGF0ZUJvZHkpXG4gICAgfVxuICB9LFxuXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBzdWJqZWN0UGxhY2UgPSAodGhpcy5zdGF0ZS5lZGl0TW9kZSkgPyByZWFjdC5kb20uaW5wdXQoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lJyx3aWR0aDo0ODB9LCBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIHN1YmplY3RcIn0pIDogdGhpcy5zdGF0ZS50ZW1wbGF0ZVN1YmplY3RcblxuICAgIGlmKHRoaXMuc3RhdGUuZWRpdE1vZGUpe1xuICAgICAgIHRvZ2dsZUJ1dHRvbiA9IHJlYWN0LmRvbS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY2hhbmdlTW9kZSwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHNcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6NX19LCBcbiAgICAgICAgICAgIHJlYWN0LmRvbS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc2F2ZVwifSksIFwiIMKgIFNhdmUgVGVtcGxhdGVcIilcbiAgICB9IGVsc2Uge1xuICAgICAgIHRvZ2dsZUJ1dHRvbiA9IHJlYWN0LmRvbS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY2hhbmdlTW9kZSwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4teHNcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6NX19LCBcbiAgICAgICAgICAgIHJlYWN0LmRvbS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGVuY2lsLXNxdWFyZVwifSksIFwiIMKgIEVkaXQgVGVtcGxhdGVcIilcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgcmVhY3QuZG9tLmRpdihudWxsLCBcbiAgICAgIHJlYWN0LmRvbS5kaXYoe29uQ2xpY2s6IHRoaXMuY2xpY2tlZE92ZXJsYXksIGlkOiBcImVkaXRUZW1wbGF0ZU92ZXJsYXlcIn0pLCBcbiAgICAgIHJlYWN0LmRvbS5kaXYoe2lkOiBcImVkaXRUZW1wbGF0ZVZpZXdcIiwgXG4gICAgICAgICAgIGNsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1pbmZvXCIsIFxuICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJ319LCBcbiAgICAgICAgICAgcmVhY3QuZG9tLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWhlYWRpbmdcIiwgc3R5bGU6IHtoZWlnaHQ6NTB9fSwgXG4gICAgICAgICAgICAgcmVhY3QuZG9tLmg2KHtzdHlsZToge2Zsb2F0OidsZWZ0J319LCBcbiAgICAgICAgICAgICAgIHJlYWN0LmRvbS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZmlsZS10ZXh0LW9cIn0pLCBcbiAgICAgICAgICAgICAgIFwiICBcIiArIHRoaXMucHJvcHMuaW5pdGlhbFRlbXBsYXRlVmFsdWVzLm5hbWVcbiAgICAgICAgICAgICApLCBcbiAgICAgICAgICB0b2dnbGVCdXR0b25cbiAgICAgICAgKSwgXG4gICAgICAgIHJlYWN0LmRvbS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1ib2R5XCJ9LCBcbiAgICAgICAgICByZWFjdC5kb20uZGl2KHtjbGFzc05hbWU6IFwiZWRpdFRlbXBsYXRlVGl0bGVcIn0sIFxuICAgICAgICAgICAgcmVhY3QuZG9tLnNwYW4obnVsbCwgXCJTdWJqZWN0OiBcIiksIFxuICAgICAgICAgICAgc3ViamVjdFBsYWNlXG4gICAgICAgICAgKSwgXG4gICAgICAgICByZWFjdC5kb20uYnIobnVsbCksIFxuICAgICAgICAgcmVhY3QuZG9tLmRpdih7Y2xhc3NOYW1lOiBcInRlbXBsYXRlRGV0YWlsc1wifSwgXG4gICAgICAgICAgIHJlYWN0LmRvbS5oNih7c3R5bGU6IHttYXJnaW5Cb3R0b206JzAnfSwgY2xhc3NOYW1lOiBcInRleHQtbXV0ZWRcIn0sIFxuICAgICAgICAgICAgIFwiQ3JlYXRlZCBieSBNYXJrIG9uIEp1bC4gMjEsIDIwMTRcIlxuICAgICAgICAgICApLCBcbiAgICAgICAgICAgcmVhY3QuZG9tLmg2KHtzdHlsZToge21hcmdpblRvcDonMCd9LCBjbGFzc05hbWU6IFwidGV4dC1tdXRlZFwifSwgXG4gICAgICAgICAgICAgXCJsYXN0IHVwZGF0ZWQgNyBkYXlzIGFnb1wiXG4gICAgICAgICAgIClcbiAgICAgICAgICksIFxuICAgICAgICByZWFjdC5kb20uYnIobnVsbCksIFxuICAgICAgICByZWFjdC5kb20uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwgcGFuZWwtZGVmYXVsdFwifSwgXG4gICAgICAgICAgcmVhY3QuZG9tLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWJvZHkgc3VtbWVyIHRlbXBsYXRlLWJvZHlcIn1cbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICApXG4pXG4pXG4gICAgKTtcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gY3JlYXRlQ29tcGFueVByb2ZpbGVNb2RhbFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwgZmFkZSBicy1jcmVhdGVTaWduYWwtbW9kYWwtbWRcIiwgdGFiSW5kZXg6IFwiLTFcIiwgcm9sZTogXCJkaWFsb2dcIiwgJ2FyaWEtbGFiZWxsZWRieSc6IFwibXlTbWFsbE1vZGFsTGFiZWxcIiwgJ2FyaWEtaGlkZGVuJzogXCJ0cnVlXCIsIFxuICAgICAgICAgICBpZDogXCJjcmVhdGVUZXJyaXRvcnlTdHJhdGVneU1vZGFsXCIsIFxuICAgICAgICAgICBzdHlsZToge3RvcDonNTBweCcsb3ZlcmZsb3c6J2hpZGRlbid9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtZGlhbG9nIG1vZGFsLXNtXCIsIHN0eWxlOiB7d2lkdGg6NjUwfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtY29udGVudFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWhlYWRlclwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDQoe2NsYXNzTmFtZTogXCJtb2RhbC10aXRsZVwiLCBpZDogXCJteU1vZGFsTGFiZWxcIn0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWdsb2JlXCJ9KSwgXCIgwqBcIiArICcgJyArXG4gICAgICAgICAgICAgICAgICAgIFwiQ3JlYXRlIFRlcnJpdG9yeSBTdGF0ZWd5XCJcbiAgICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4tc21cIiwgXG4gICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmNyZWF0ZUNvbXBhbnlQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6LTI4LG1hcmdpblJpZ2h0Oi01fX0sIFxuICAgICAgICAgICAgICAgICAgICBcIkNyZWF0ZSBQcm9maWxlXCJcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtYm9keVwifSwgXG4gICAgICAgICAgICAgICAgICBDcmVhdGVIaXJpbmdTaWduYWwobnVsbClcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWZvb3RlclwiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgICAgXCJDbG9zZVwiXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeVwifSwgXG4gICAgICAgICAgICAgICAgICBcIlNlbmQgRW1haWxcIlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgY3JlYXRlQ29tcGFueVByb2ZpbGU6IGZ1bmN0aW9uKCkge1xuICAgIHByb2ZpbGVOYW1lID0gJChcIi5jb21wYW55LXByb2ZpbGUtbmFtZVwiKS52YWwoKVxuICAgIGluZHVzdHJ5UHJvZmlsZSA9IHtcbiAgICAgICdjbGFzc05hbWUnOiAnSW5kdXN0cnlQcm9maWxlJyxcbiAgICAgICdpbmR1c3RyaWVzJyA6ICQoJy5jb21wYW55LXByb2ZpbGUtaW5kdXN0cmllcycpLnRhZ3NpbnB1dCgnaXRlbXMnKS5yZXZlcnNlKClcbiAgICB9XG5cbiAgICBsb2NhdGlvblByb2ZpbGUgPSB7XG4gICAgICAnY2xhc3NOYW1lJzogJ0xvY2F0aW9uUHJvZmlsZScsXG4gICAgICAnbG9jYWxlJyAgICA6ICQoJy5jb21wYW55LXByb2ZpbGUtbG9jYXRpb24nKS50YWdzaW5wdXQoJ2l0ZW1zJykucmV2ZXJzZSgpXG4gICAgfVxuXG4gICAgZW1wbG95ZWVQcm9maWxlID0ge1xuICAgICAgJ2NsYXNzTmFtZSc6J0VtcGxveWVlUHJvZmlsZScsIFxuICAgICAgJ2VtcGxveWVlcyc6IF8ubWFwKCQoJyNjb21wYW55LXByb2ZpbGUtZW1wbG95ZWVCdG5zJykuZmluZCgnLmFjdGl2ZScpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJldkJ0bil7IHJldHVybiAkKHJldkJ0bikudGV4dCgpLnRyaW0oKSB9KS5yZXZlcnNlKClcbiAgICB9XG5cbiAgICByZXZlbnVlUHJvZmlsZSA9IHtcbiAgICAgICdjbGFzc05hbWUnOidSZXZlbnVlUHJvZmlsZScsIFxuICAgICAgJ3JldmVudWVzJzogXy5tYXAoJCgnI2NvbXBhbnktcHJvZmlsZS1jb21wYW55UmV2ZW51ZUJ0bnMnKS5maW5kKCcuYWN0aXZlJyksIFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmV2QnRuKXsgcmV0dXJuICQocmV2QnRuKS50ZXh0KCkudHJpbSgpIH0pLnJldmVyc2UoKVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGxvY2F0aW9uUHJvZmlsZSlcbiAgICBcbiAgICBwcm9maWxlcyA9IFtpbmR1c3RyeVByb2ZpbGUsIGxvY2F0aW9uUHJvZmlsZSxcbiAgICAgICAgICAgICAgICBlbXBsb3llZVByb2ZpbGUsIHJldmVudWVQcm9maWxlXVxuXG4gICAgbm9uZW1wdHlQcm9maWxlcyA9IF8uZmlsdGVyKHByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICBpZihfLnZhbHVlcyhwcm9maWxlKVsxXSl7IHJldHVybiBfLnZhbHVlcyhwcm9maWxlKVsxXS5sZW5ndGggfVxuICAgIH0pO1xuXG4gICAgbmV3UHJvZmlsZSA9IHtcbiAgICAgIG5hbWU6IHByb2ZpbGVOYW1lLFxuICAgICAgcHJvZmlsZXM6IG5vbmVtcHR5UHJvZmlsZXMsXG4gICAgICBtaW5pbmdfam9iOnRydWUsXG4gICAgICBsaXN0X3R5cGU6J3RlcnJpdG9yeScsXG4gICAgICB1c2VyOntcbiAgICAgICAgX190eXBlOidQb2ludGVyJyxcbiAgICAgICAgY2xhc3NOYW1lOidfVXNlcicsXG4gICAgICAgIG9iamVjdElkOkpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5vYmplY3RJZFxuICAgICAgfSxcbiAgICAgIGNvbXBhbnk6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55XG4gICAgfVxuXG4gICAgaWYobm9uZW1wdHlQcm9maWxlcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMucGVyc2lzdFNpZ25hbChub25lbXB0eVByb2ZpbGVzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICBfLm9taXQobmV3UHJvZmlsZSwncHJvZmlsZXMnKSlcbiAgICAgIHRoaXMucHJvcHMuYWRkUHJvZmlsZShuZXdQcm9maWxlKVxuICAgICAgJCgnLm1vZGFsJykuY2xpY2soKVxuICAgIH1cbiAgfSxcblxuICBwZXJzaXN0U2lnbmFsOiBmdW5jdGlvbihub25lbXB0eVByb2ZpbGVzLCBuZXdQcm9maWxlKSB7XG4gICAgY29uc29sZS5sb2coJ05FVyBQUk9GSUxFJylcbiAgICBjb25zb2xlLmxvZyhuZXdQcm9maWxlKVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RQcm9maWxlJyxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkobmV3UHJvZmlsZSksXG4gICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlc3MpIHtcbiAgICAgICAgLy8gQWRkIFNpZ25hbCBMaXN0XG4gICAgICAgIF8ubWFwKG5vbmVtcHR5UHJvZmlsZXMsIGZ1bmN0aW9uKHByb2ZpbGUpIHtcbiAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzLycrXy52YWx1ZXMocHJvZmlsZSlbMF0sXG4gICAgICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgICAgdHlwZTonUE9TVCcsXG4gICAgICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KCBfLnBpY2socHJvZmlsZSwgXy5rZXlzKHByb2ZpbGUpWzFdKSApLFxuICAgICAgICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RQcm9maWxlLycrcmVzcy5vYmplY3RJZCxcbiAgICAgICAgICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSh7cHJvZmlsZXM6e1xuICAgICAgICAgICAgICAgICAgX19vcDogJ0FkZFVuaXF1ZScsXG4gICAgICAgICAgICAgICAgICBvYmplY3RzOlt7XG4gICAgICAgICAgICAgICAgICAgIF9fdHlwZTonUG9pbnRlcicsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXy52YWx1ZXMocHJvZmlsZSlbMF0sXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdElkOnJlcy5vYmplY3RJZFxuICAgICAgICAgICAgICAgICAgfV19XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuXG4gICAgICB9LFxuICAgIH0pXG4gIH0sXG5cbn0pO1xuXG52YXIgQ3JlYXRlSGlyaW5nU2lnbmFsID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ3JlYXRlSGlyaW5nU2lnbmFsJyxcbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIF8ubWFwKCQoJy5oaXJpbmctcm9sZScpLGZ1bmN0aW9uKGlucHV0KXskKGlucHV0KS50YWdzaW5wdXQoKX0pXG4gICAgJCh0aGlzLmdldERPTU5vZGUoKSkuZmluZCgnLmhpcmluZy1yb2xlJykudGFnc2lucHV0KClcbiAgICAkKCcuYm9vdHN0cmFwLXRhZ3NpbnB1dCcpLndpZHRoKDQwMClcblxuICAgICQodGhpcy5nZXRET01Ob2RlKCkpLmZpbmQoJy5idG4tZGVmYXVsdCcpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcblxuICAgICAgaWYoJChlLnRhcmdldCkucGFyZW50KCdsYWJlbCcpLmhhc0NsYXNzKCdhY3RpdmUnKSlcbiAgICAgICAgJChlLnRhcmdldCkucGFyZW50KCdsYWJlbCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxuICAgICAgZWxzZVxuICAgICAgICAkKGUudGFyZ2V0KS5wYXJlbnQoJ2xhYmVsJykuYWRkQ2xhc3MoJ2FjdGl2ZScpXG5cbiAgICAgIGNvbnNvbGUubG9nKCQoZS50YXJnZXQpLnBhcmVudCgnbGFiZWwnKSlcbiAgICB9KTtcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICAgIFJlYWN0LkRPTS5mb3JtKHtjbGFzc05hbWU6IFwiY3JlYXRlU2lnbmFsXCIsIG9uU3VibWl0OiB0aGlzLmNyZWF0ZVNpZ25hbH0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge3dpZHRoOjE0MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snLG1hcmdpbkJvdHRvbToyMH19LCBcbiAgICAgICAgICAgICAgXCJDb21wYW55IFByb2ZpbGUgTmFtZTogwqBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOic3My4xJSd9LCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGNvbXBhbnktcHJvZmlsZS1uYW1lXCIsIFxuICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIkNvbXBhbnkgUHJvZmlsZSBOYW1lIC4uLlwifSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJyxtYXJnaW5Cb3R0b206LTEwfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge3dpZHRoOjE0MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFxuICAgICAgICAgICAgICBcIkluZHVzdHJpZXM6IMKgXCJcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOic3My4xJScsbWFyZ2luUmlnaHQ6MTB9LCBcbiAgICAgICAgICAgICAgICAgICAnZGF0YS1yb2xlJzogXCJ0YWdzaW5wdXRcIiwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBoaXJpbmctcm9sZSBjb21wYW55LXByb2ZpbGUtaW5kdXN0cmllc1wifSksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLXN1Y2Nlc3NcIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7ZGlzcGxheTonYmxvY2snLG1hcmdpbkJvdHRvbTotMTAsIGRpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge3dpZHRoOjE0MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFxuICAgICAgICAgICAgICBcIkxvY2F0aW9uOiDCoFwiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonNzMuMSUnLG1hcmdpblJpZ2h0OjEwfSwgXG4gICAgICAgICAgICAgICAgICAgJ2RhdGEtcm9sZSc6IFwidGFnc2lucHV0XCIsIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgaGlyaW5nLXJvbGUgY29tcGFueS1wcm9maWxlLWxvY2F0aW9uXCJ9KSwgXG5cbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLXN1Y2Nlc3NcIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wbHVzXCJ9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLG1hcmdpbjowLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTQwLG1hcmdpbkJvdHRvbToyMH19LCBcIkNvbXBhbnkgU2l6ZSBcIiksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwXCIsICdkYXRhLXRvZ2dsZSc6IFwiYnV0dG9uc1wiLCBcbiAgICAgICAgICAgICAgICBzdHlsZToge3dpZHRoOic3NS41JSd9LCBcbiAgICAgICAgICAgICAgICBpZDogXCJjb21wYW55LXByb2ZpbGUtZW1wbG95ZWVCdG5zXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGVtcGxveWVlQnRuXCIsIHN0eWxlOiB7d2lkdGg6JzE2JSd9fSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAxIC0gMjBcIlxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgZW1wbG95ZWVCdG5cIiwgc3R5bGU6IHt3aWR0aDonMTYlJ319LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDIwIC0gNTBcIlxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgZW1wbG95ZWVCdG5cIiwgc3R5bGU6IHt3aWR0aDonMTYlJ319LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDUwIC0gMTAwXCJcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGVtcGxveWVlQnRuXCIsIHN0eWxlOiB7d2lkdGg6JzE2JSd9fSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAxMDAgLSAyNTBcIlxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgZW1wbG95ZWVCdG5cIiwgc3R5bGU6IHt3aWR0aDonMTYlJ319LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDI1MCAtIDEwMDBcIlxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgZW1wbG95ZWVCdG5cIiwgc3R5bGU6IHt3aWR0aDonMTYlJ319LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDEwMDAgK1wiXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApLCBcblxuICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFwiIFwiLCBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonbm9uZScsbWFyZ2luOjAsd2lkdGg6MTQwfX0sIFxuICAgICAgICAgICAgICAgIFwiQXBwcm94LiBSZXZlbnVlICBcIiksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwXCIsICdkYXRhLXRvZ2dsZSc6IFwiYnV0dG9uc1wiLCBcbiAgICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J25vbmUnfSwgXG4gICAgICAgICAgICAgICAgaWQ6IFwiY29tcGFueS1wcm9maWxlLWNvbXBhbnlSZXZlbnVlQnRuc1wifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCByZXZlbnVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIFwiLCAnPCAkMU0nXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCByZXZlbnVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiICQxTSAtICQ1TVwiXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCByZXZlbnVlQnRuXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiICQ1TSAtICQyNU1cIlxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHQgcmV2ZW51ZUJ0blwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkMjVNICtcIlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICApLCBcblxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7bWFyZ2luVG9wOjEwfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge3dpZHRoOjE0MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFwiQXV0byBQcm9zcGVjdDogwqBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cCBhdXRvcHJvc3BlY3RcIiwgJ2RhdGEtdG9nZ2xlJzogXCJidXR0b25zXCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdCBhY3RpdmVcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJyYWRpb1wifSksIFwiIFllc1wiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwicmFkaW9cIn0pLCBcIiBOb1wiXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH0sXG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBEYXRhUm93XG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHsgfVxuICB9LFxuXG4gIGNsaWNrQ2hlY2s6IGZ1bmN0aW9uKCkge1xuICAgIGRvbU5vZGUgPSB0aGlzLmdldERPTU5vZGUoKVxuICAgIGlzQ2hlY2tlZCA9ICQoJChkb21Ob2RlKS5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKVswXSkucHJvcCgnY2hlY2tlZCcpXG4gICAgLy9jb25zb2xlLmxvZyhpc0NoZWNrZWQpXG4gICAgdGhpcy5zZXRTdGF0ZSh7Y2hlY2tlZDogaXNDaGVja2VkfSlcbiAgICB0aGlzLnByb3BzLmNoZWNrYm94QWN0aW9uKGlzQ2hlY2tlZCwgdGhpcy5wcm9wcy5wcm9zcGVjdC5vYmplY3RJZClcbiAgfSxcblxuICByb3dDbGljazogZnVuY3Rpb24oKSB7XG4gICAgJCgkKHRoaXMuZ2V0RE9NTm9kZSgpKS5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKVswXSkuY2xpY2soKVxuICB9LFxuXG4gIGtleWJvYXJkQ2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgICQoJCgnLmtleVNlbGVjdCcpLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpWzBdKS5jbGljaygpXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkgeyB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAga2V5Ym9hcmRTZWxlY3RlZCA9IHtib3JkZXJMZWZ0Oic3cHggc29saWQgcmdiYSgwLDAsMCwwKSd9XG4gICAgdGhpc3NzcyA9IHRoaXNcbiAgICBpZih0aGlzLnByb3BzLmtleWJvYXJkU2VsZWN0ZWQpIHtcbiAgICAgIC8vIEFkanVzdCBTY3JvbGwgZGVwZW5kaW5nIG9uIHdoZXJlIHRoZSBwcm9zcGVjdCBpc1xuICAgICAga2V5Ym9hcmRTZWxlY3RlZCA9IHtib3JkZXJMZWZ0Oic3cHggc29saWQgIzAwOTZmZiAhaW1wb3J0YW50J31cbiAgICAgIE1vdXNldHJhcC51bmJpbmQoJ3gnKVxuICAgICAgTW91c2V0cmFwLmJpbmQoJ3gnLCBmdW5jdGlvbigpIHsgXG4gICAgICAgIHRoaXNzc3Mua2V5Ym9hcmRDbGljaygpXG4gICAgICAgIGlmKHRoaXNzc3Muc3RhdGUuY2hlY2tlZClcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImxtYW9cIilcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHByb3NwZWN0ID0gdGhpcy5wcm9wcy5wcm9zcGVjdFxuICAgIGNvbXBhbnkgPSAocHJvc3BlY3QuY29tcGFueSkgPyBwcm9zcGVjdC5jb21wYW55IDogcHJvc3BlY3QuY29tcGFueV9pbmZvXG4gICAgY29tcGFueSA9IChjb21wYW55KSA/IGNvbXBhbnkgOiB7fVxuICAgIGNvbnNvbGUubG9nKHByb3NwZWN0KVxuXG4gICAgaWYodGhpcy5wcm9wcy5tYXN0ZXJDaGVja2JveENoZWNrZWQgJiYgdGhpcy5zdGF0ZS5jaGVja2VkKVxuICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICBlbHNlIGlmKHRoaXMucHJvcHMuYWxyZWFkeUNoZWNrZWQpXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgIGVsc2UgaWYodGhpcy5zdGF0ZS5jaGVja2VkKVxuICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICBlbHNlIGlmKHRoaXMucHJvcHMubWFzdGVyQ2hlY2tib3hDaGVja2VkIHx8IHRoaXMuc3RhdGUuY2hlY2tlZClcbiAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgZWxzZVxuICAgICAgY2hlY2tlZCA9IGZhbHNlXG5cbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLmNoZWNrZWQpXG4gICAgLy8gY29uc29sZS5sb2coY2hlY2tlZClcbiAgICAvLyB7cHJvc3BlY3QuZW1wbG95ZWVDb3VudFJhbmdlLm5hbWUgKyBcIiBlbXBsb3llZXNcIiB9XG4gICAgLy8gVG9kYXlcbiAgICBcbiAgICBjb2xvciA9IHt9XG4gICAgaWYodGhpcy5zdGF0ZS5jaGVja2VkIHx8IHRoaXMucHJvcHMuYWxyZWFkeUNoZWNrZWQpXG4gICAgICBjb2xvciA9IHtiYWNrZ3JvdW5kQ29sb3I6ICcjZWVmOGZmJ31cbiAgICAgIFxuICAgIHJvd0NsID0gKHRoaXMucHJvcHMua2V5Ym9hcmRTZWxlY3RlZCkgPyBcInByb3NwZWN0cy10ciBrZXlTZWxlY3RcIiA6IFwicHJvc3BlY3RzLXRyXCJcbiAgICB3ZWJzaXRlQnRuID0gKHByb3NwZWN0LndlYnNpdGUpID8gIFJlYWN0LkRPTS5hKHtocmVmOiBcImh0dHA6Ly9cIitwcm9zcGVjdC53ZWJzaXRlLnJlcGxhY2UoJ2h0dHA6Ly8nLCcnKSwgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLXByaW1hcnkgYnRuLWdyYWRpZW50XCIsIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxtYXJnaW5MZWZ0OjV9fSwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZ2xvYmVcIn0pLCBcIiBcIikgOiBcIlwiXG4gICAgLy9pZihwYXJzZUludChwcm9zcGVjdC5saW5rZWRpbl91cmwuc3BsaXQoJy8nKS5wb3AoKSkpe1xuICAgIGlmKGNvbXBhbnkubGlua2VkaW5fdXJsKXtcbiAgICAgIGJ0bkNsYXNzID0gXCJidG4gYnRuLXByaW1hcnkgYnRuLXhzIGJ0bi1ncmFkaWVudFwiXG4gICAgfSBlbHNlIHtcbiAgICAgIGJ0bkNsYXNzID0gXCJidG4gYnRuLXByaW1hcnkgYnRuLXhzIGJ0bi1ncmFkaWVudCBkaXNhYmxlZFwiXG4gICAgfVxuICAgIGlmKGNvbXBhbnkubG9nbylcbiAgICAgIGxvZ28gPSBjb21wYW55LmxvZ29cblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udHIoe2NsYXNzTmFtZTogcm93Q2wsIFxuICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucm93Q2xpY2ssIFxuICAgICAgICAgIHN0eWxlOiBrZXlib2FyZFNlbGVjdGVkfSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3J9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCIsIFxuICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuY2xpY2tDaGVjaywgXG4gICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBjaGVja2VkfSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiBjb2xvcn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2JhY2tncm91bmRJbWFnZTogXCJ1cmwoXCIrY29tcGFueS5sb2dvK1wiKVwifSwgXG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjb21wYW55LWltZy10aHVtYm5haWxcIn0pXG4gICAgICAgICAgKSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiBjb2xvciwgXG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmaXhlZC1kYXRhLWNvbHVtblwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJyxmb250U2l6ZToxNX19LCBjb21wYW55LmNvbXBhbnlfbmFtZSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2ZvbnRXZWlnaHQ6JzQwMCcsbWFyZ2luOicwcHgnLGZvbnRTaXplOjExfX0sIFxuICAgICAgICAgICAgICBjb21wYW55LmhlYWRjb3VudClcbiAgICAgICAgICApLCBcblxuXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3IsIFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZml4ZWQtZGF0YS1jb2x1bW5cIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbjonMHB4Jyxmb250U2l6ZToxM319LCBjb21wYW55LmluZHVzdHJ5KSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luOicwcHgnLGZvbnRTdHlsZTonaXRhbGljJyxtYXJnaW5Ub3A6NSxmb250U2l6ZToxMX19LCBcbiAgICAgICAgICAgICAgY29tcGFueS5jaXR5KVxuICAgICAgICAgICksIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3J9LCBcbiAgICAgICAgICAgIFwiwqAgwqBcIiwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge3dpZHRoOjI5MCxtYXJnaW5Ub3A6LTE1fX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBidG5DbGFzcywgXG4gICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMub3BlbkxpbmtlZGluQ29tcGFueVByb2ZpbGV9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1zZWFyY2hcIn0pLCBcIiDCoFwiICsgJyAnICtcbiAgICAgICAgICAgICAgXCJTZWFyY2ggUHJvZmlsZXNcIlxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBcIsKgIMKgXCIsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBidG5DbGFzcywgXG4gICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMub3BlblNpbWlsYXJDb21wYW5pZXN9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jb3B5XCJ9KSwgXCIgwqBcIiArICcgJyArXG4gICAgICAgICAgICAgIFwiRmluZCBTaW1pbGFyIENvbXBhbmllc1wiXG4gICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3IsIFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZml4ZWQtZGF0YS1jb2x1bW5cIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbjonMHB4Jyxmb250U2l6ZToxMSxwYWRkaW5nVG9wOjV9fSwgbW9tZW50KGNvbXBhbnkuY3JlYXRlZEF0KS5mcm9tTm93KCkpXG4gICAgICAgICAgKSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiBjb2xvcn0sIFwiIFwiLCBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luOicwcHgnfX0sIFwiXCIpLCBcIiBcIiksIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3J9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7d2lkdGg6OTIsIHBhZGRpbmdUb3A6NX19LCBcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5saSwgXCLCoFwiLCBcbiAgICAgICAgICAgICAgd2Vic2l0ZUJ0blxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgb3BlbkxpbmtlZGluQ29tcGFueVByb2ZpbGU6IGZ1bmN0aW9uKGUpIHtcbiAgICBjb25zb2xlLmxvZyh0aGlzLnByb3BzLnByb3NwZWN0LmxpbmtlZGluX3VybClcbiAgICBjaWQgPSB0aGlzLnByb3BzLnByb3NwZWN0LmNvbXBhbnlfaW5mby5saW5rZWRpbl91cmwuc3BsaXQoJz8nKVswXS5zcGxpdCgnL2NvbXBhbnkvJylbMV1cbiAgICBjb25zb2xlLmxvZyhjaWQpXG4gICAgd2luZG93Lm9wZW4oXCJodHRwczovL3d3dy5saW5rZWRpbi5jb20vdnNlYXJjaC9wP2ZfQ0M9XCIrY2lkKVxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgfSxcblxuICBvcGVuU2ltaWxhckNvbXBhbmllczogZnVuY3Rpb24oZSkge1xuICAgIGNpZCA9IHRoaXMucHJvcHMucHJvc3BlY3QuY29tcGFueV9pbmZvLmxpbmtlZGluX3VybC5zcGxpdCgnPycpWzBdLnNwbGl0KCcvY29tcGFueS8nKVsxXVxuICAgIC8vd2luZG93Lm9wZW4oXCJodHRwczovL3d3dy5saW5rZWRpbi5jb20vdnNlYXJjaC9jP3JzaWQ9NTI2NDQwMzcxNDA5MTg0NzY4MTc1JnBpdm90VHlwZT1zaW0mcGlkPVwiK2NpZCtcIiZ0cms9c2ltX2NvbXBhbmllc19yZXNfc2ltJnRya0luZm89VlNSUHNlYXJjaElkJTNBNTI2NDQwMzcxNDA5MTg0NzY4MTc1JTJDVlNSUHRhcmdldElkJTNBMTAyNSUyQ1ZTUlBjbXB0JTNBcHJpbWFyeVwiKVxuICAgIHdpbmRvdy5vcGVuKFwiaHR0cHM6Ly93d3cubGlua2VkaW4uY29tL3ZzZWFyY2gvYz9yc2lkPTUyNjQ0MDM3MTQwOTE4NDc2ODE3NSZwaXZvdFR5cGU9c2ltJnBpZD1cIitjaWQrXCImdHJrPXNpbV9jb21wYW5pZXNfcmVzX3NpbSZ0cmtJbmZvPVZTUlBzZWFyY2hJZCUzQTUyNjQ0MDM3MTQwOTE4NDc2ODE3NSUyQ1ZTUlB0YXJnZXRJZCUzQTEwMjUlMkNWU1JQY21wdCUzQXByaW1hcnlcIilcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gIH0sXG5cbiAgZGVsZXRlUHJvc3BlY3Q6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucHJvcHMuZGVsZXRlUHJvc3BlY3QodGhpcy5wcm9wcy5wcm9zcGVjdC5vYmplY3RJZCwgJ1Byb3NwZWN0JylcbiAgfVxufSk7XG5cbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBjcmVhdGVMaXN0TW9kYWxcbiAgY3JlYXRlTGlzdDogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJCgnI2xpc3RUaXRsZScpLnZhbCgpKVxuXG4gICAgZGF0YSA9ICB7XG4gICAgICAnbmFtZScgICAgICAgIDogJCgnI2xpc3RUaXRsZScpLnZhbCgpLnRyaW0oKSwgICAvL1dhaXRpbmcgLCBSdW5uaW5nXG4gICAgICAndXNlcicgICAgICAgIDogeyAnX190eXBlJzonUG9pbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzTmFtZSc6J19Vc2VyJyxcbiAgICAgICAgICAgICAgICAgICAgICAnb2JqZWN0SWQnOid4V0VTaXc1U21kJyB9LFxuICAgIH1cblxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RMaXN0JyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpXG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGRhdGEuY291bnQgPSAwXG5cbiAgICB0aGlzLnByb3BzLmNyZWF0ZUxpc3QoZGF0YSlcbiAgICBcbiAgICAkKCcjY3JlYXRlTGlzdE1vZGFsJykubW9kYWwoJ2hpZGUnKVxuICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnbW9kYWwtb3BlbicpO1xuICAgICQoJy5tb2RhbC1iYWNrZHJvcCcpLnJlbW92ZSgpO1xuICAgIC8vJCgnYnV0dG9uLmNsb3NlJykuY2xpY2soKVxuICB9LFxuXG4gIGNyZWF0ZUxpc3RCdXR0b25DbGljazogZnVuY3Rpb24oKSB7XG4gICAgaWYoJCgnI2xpc3RUaXRsZScpLnZhbCgpLnRyaW0oKSAhPSBcIlwiKVxuICAgICAgdGhpcy5jcmVhdGVMaXN0KClcbiAgfSxcblxuICBjcmVhdGVNaW5pbmdKb2I6IGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zb2xlLmxvZygnbG1hbycpXG4gICAgaWYoJCgnI2xpc3RUaXRsZScpLnZhbCgpLnRyaW0oKSAhPSBcIlwiKVxuICAgICAgdGhpcy5jcmVhdGVMaXN0KClcbiAgfSxcblxuICBkZWxldGVMaXN0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnByb3BzLmRlbGV0ZUxpc3QoKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwgZmFkZSBicy1kZWxldGVMaXN0LW1vZGFsLXNtXCIsIHRhYkluZGV4OiBcIi0xXCIsIHJvbGU6IFwiZGlhbG9nXCIsICdhcmlhLWxhYmVsbGVkYnknOiBcIm15U21hbGxNb2RhbExhYmVsXCIsICdhcmlhLWhpZGRlbic6IFwidHJ1ZVwiLCBpZDogXCJjcmVhdGVMaXN0TW9kYWxcIiwgc3R5bGU6IHt0b3A6JzIwMHB4J319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1kaWFsb2cgbW9kYWwtc21cIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtY29udGVudFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWhlYWRlclwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBjbGFzc05hbWU6IFwiY2xvc2VcIiwgJ2RhdGEtZGlzbWlzcyc6IFwibW9kYWxcIn0sIFJlYWN0LkRPTS5zcGFuKHsnYXJpYS1oaWRkZW4nOiBcInRydWVcIn0sIFwiw5dcIiksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcInNyLW9ubHlcIn0sIFwiQ2xvc2VcIikpLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNCh7Y2xhc3NOYW1lOiBcIm1vZGFsLXRpdGxlXCIsIGlkOiBcIm15TW9kYWxMYWJlbFwifSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdHJhc2gtb1wifSksIFwiIMKgRGVsZXRlIExpc3Q/XCIpXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmZvcm0oe2NsYXNzTmFtZTogXCJkZWxldGVGb3JtXCIsIG9uU3VibWl0OiB0aGlzLmRlbGV0ZUxpc3R9LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5kZWxldGVMaXN0LCBcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1kYW5nZXJcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsIHdpZHRoOicxMDAlJ319LCBcbiAgICAgICAgICAgICAgICAgICAgICBcIkRlbGV0ZVwiXG4gICAgICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmRlbGV0ZUxpc3QsIFxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLWRlZmF1bHRcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsIHdpZHRoOicxMDAlJ319LCBcbiAgICAgICAgICAgICAgICAgICAgICBcIkNhbmNlbFwiXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMucHJvcHMuaW5pdGlhbFRlbXBsYXRlVmFsdWVzLm5hbWUsXG4gICAgICBib2R5OiB0aGlzLnByb3BzLmluaXRpYWxUZW1wbGF0ZVZhbHVlcy5ib2R5LFxuICAgICAgc3ViamVjdDogdGhpcy5wcm9wcy5pbml0aWFsVGVtcGxhdGVWYWx1ZXMuc3ViamVjdCxcbiAgICAgIGVkaXRNb2RlOiB0aGlzLnByb3BzLmluaXRpYWxUZW1wbGF0ZVZhbHVlcy5lZGl0TW9kZVxuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2RpZCBtb3VudCcpXG4gICAgJCgnLnRlbXBsYXRlLWJvZHknKS5odG1sKHRoaXMuc3RhdGUuYm9keSlcbiAgICBpZih0aGlzLnN0YXRlLmVkaXRNb2RlKSB7XG4gICAgICAkKCcuc3VtbWVyJykuc3VtbWVybm90ZSh7XG4gICAgICAgIGhlaWdodDogMjAwLFxuICAgICAgICB0b29sYmFyOiBbXG4gICAgICAgICAgWydzdHlsZScsIFsnYm9sZCcsICdpdGFsaWMnLCAndW5kZXJsaW5lJywgJ2NsZWFyJ11dLFxuICAgICAgICAgIFsnZm9udCcsIFsnc3RyaWtldGhyb3VnaCddXSxcbiAgICAgICAgICBbJ2ZvbnRzaXplJywgWydmb250c2l6ZSddXSxcbiAgICAgICAgICBbJ2NvbG9yJywgWydjb2xvciddXSxcbiAgICAgICAgICBbJ3BhcmEnLCBbJ3VsJywgJ29sJywgJ3BhcmFncmFwaCddXSxcbiAgICAgICAgICBbJ2hlaWdodCcsIFsnaGVpZ2h0J11dLFxuICAgICAgICBdXG4gICAgICB9KVxuICAgIH1cblxuICAgIHJlbmRlcmpzb24uc2V0X3Nob3dfdG9fbGV2ZWwoJ2FsbCcpXG4gICAgcHJvc3BlY3QgPSBfLnBpY2sodGhpcy5wcm9wcy5wcm9zcGVjdCwgXG4gICAgICAnY29tcGFueV9uYW1lJywgJ25hbWUnLCAncG9zJ1xuICAgIClcbiAgICBwcm9zcGVjdC5maXJzdF9uYW1lID0gcHJvc3BlY3QubmFtZS5zcGxpdCgnICcpWzBdXG4gICAgcHJvc3BlY3QubGFzdF9uYW1lID0gXy5sYXN0KHByb3NwZWN0Lm5hbWUuc3BsaXQoJyAnKSlcbiAgICBwcm9zcGVjdCA9IF8ub21pdChwcm9zcGVjdCwgJ25hbWUnKVxuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0VGVtcGxhdGVcIikuYXBwZW5kQ2hpbGQocmVuZGVyanNvbihwcm9zcGVjdCkpO1xuICAgICQoJyNlZGl0VGVtcGxhdGVPdmVybGF5JykuaHRtbCgpXG4gICAgdGhpc3MgPSB0aGlzO1xuICAgICQoJy5yZW5kZXJqc29uJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzcy5wcm9wcy50b2dnbGVUZW1wbGF0ZUVkaXRNZW51KClcbiAgICB9KVxuXG4gICAgJCgnLnJlbmRlcmpzb24nKS5jc3Moe1xuICAgICAgJ3Bvc2l0aW9uJzogJ2Fic29sdXRlJyxcbiAgICAgICd6LWluZGV4JzogJzEwMDAwMDAwMDAnLFxuICAgICAgJ2JhY2tncm91bmQtY29sb3InOidyZ2JhKDAsMCwwLDApJyxcbiAgICAgICdib3JkZXInOicwJyxcbiAgICAgICdjb2xvcic6J3doaXRlJyxcbiAgICAgICdtYXJnaW4tdG9wJzonMHB4JyxcbiAgICAgICdoZWlnaHQnOiAnNTQycHgnLFxuICAgICAgJ292ZXJmbG93JzonYXV0bycsXG4gICAgICAnd2lkdGgnOiczODBweCdcbiAgICB9KVxuXG4gICAgJCgnLmtleScpLmNzcyh7XG4gICAgICAnY3Vyc29yJzoncG9pbnRlcidcbiAgICB9KVxuXG4gICAgJCgnLnRpbWVsaW5lJykuY3NzKHtcbiAgICAgICctd2Via2l0LWZpbHRlcic6ICdibHVyKDEwcHgpJyxcbiAgICB9KVxuICAgICQoJyNjYW1wYWlnbi10b3AtZGV0YWlsJykuY3NzKHtcbiAgICAgICctd2Via2l0LWZpbHRlcic6ICdibHVyKDEwcHgpJyxcbiAgICB9KVxuICB9LFxuICBjb21wb25lbnRXaWxsVW5tb3VudDpmdW5jdGlvbigpIHtcbiAgICAkKCcudGltZWxpbmUnKS5jc3Moe1xuICAgICAgJy13ZWJraXQtZmlsdGVyJzogJycsXG4gICAgfSlcbiAgICAkKCcjY2FtcGFpZ24tdG9wLWRldGFpbCcpLmNzcyh7XG4gICAgICAnLXdlYmtpdC1maWx0ZXInOiAnJyxcbiAgICB9KVxuICB9LFxuXG4gIGNsaWNrZWRPdmVybGF5OiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnY2xpY2tlZCBvdmVybGF5JylcbiAgICB0aGlzLnByb3BzLnRvZ2dsZVRlbXBsYXRlRWRpdE1lbnUoKVxuICB9LFxuXG4gIGNoYW5nZU1vZGU6IGZ1bmN0aW9uKCkge1xuICAgIC8vIFVwZGF0ZSB0ZW1wbGF0ZSBodG1sIG9uIHRvZ2dsZVxuICAgIHBhcnNlX2hlYWRlcnMgPSBhcHBDb25maWcucGFyc2VIZWFkZXJzXG4gICAgaWYodGhpcy5zdGF0ZS5lZGl0TW9kZSl7XG4gICAgICAkKCcuc3VtbWVyJykuZGVzdHJveSgpO1xuICAgICAgJCgnLnRpbWVsaW5lJykuY3NzKHtcbiAgICAgICAgJy13ZWJraXQtZmlsdGVyJzogJ2JsdXIoMjBweCknLFxuICAgICAgfSlcblxuICAgICAgY29uc29sZS5sb2coJ2xvb2sgYXQgdGhpcycpXG4gICAgICBjb25zb2xlLmxvZyhuYW1lKVxuICAgICAgbmFtZSA9ICh0aGlzLnByb3BzLmluaXRpYWxUZW1wbGF0ZVZhbHVlcy5uZXdUZW1wbGF0ZSkgPyAkKCcjdGVtcGxhdGUtbmFtZScpLnZhbCgpIDogdGhpcy5zdGF0ZS5uYW1lXG4gICAgICB0aGlzLnByb3BzLnNhdmVUZW1wbGF0ZSh7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGJvZHk6ICQoJy5zdW1tZXInKS5jb2RlKCksXG4gICAgICAgIHN1YmplY3Q6ICQoJy5zdWJqZWN0JykudmFsKCksXG4gICAgICB9LCB0aGlzLnByb3BzLmluaXRpYWxUZW1wbGF0ZVZhbHVlcy5uZXdUZW1wbGF0ZSlcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIG5hbWU6ICQoJyN0ZW1wbGF0ZS1uYW1lJykudmFsKCksXG4gICAgICAgIGJvZHk6ICQoJy5zdW1tZXInKS5jb2RlKCksXG4gICAgICAgIHN1YmplY3Q6ICQoJy5zdWJqZWN0JykudmFsKCksXG4gICAgICAgIGVkaXRNb2RlOiAhdGhpcy5zdGF0ZS5lZGl0TW9kZSxcbiAgICAgIH0pXG5cbiAgICAgIG9iaklkID0gdGhpcy5wcm9wcy5pbml0aWFsVGVtcGxhdGVWYWx1ZXMub2JqZWN0SWRcbiAgICAgICQuYWpheCh7XG4gICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9UZW1wbGF0ZXMvJytvYmpJZCxcbiAgICAgICAgdHlwZTonUFVUJyxcbiAgICAgICAgaGVhZGVyczpwYXJzZV9oZWFkZXJzLFxuICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KHtib2R5OiAkKCcuc3VtbWVyJykuY29kZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0OiAkKCcuc3ViamVjdCcpLnZhbCgpfSksXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBlZGl0TW9kZTogIXRoaXMuc3RhdGUuZWRpdE1vZGUgfSlcbiAgICAgICQoJy50aW1lbGluZScpLmNzcyh7XG4gICAgICAgICctd2Via2l0LWZpbHRlcic6ICdibHVyKDIwcHgpJyxcbiAgICAgIH0pXG4gICAgfVxuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxVcGRhdGU6IGZ1bmN0aW9uKG5ld1Byb3BzKSB7XG4gICAgY29uc29sZS5sb2coJ1RIRSBORVcgUFJPUFMnKVxuICAgIGNvbnNvbGUubG9nKG5ld1Byb3BzKVxuICB9LFxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgLyogdGhpc3MgPSB0aGlzOyAqL1xuICAgIGNvbnNvbGUubG9nKCdPVEhFUicpXG4gICAgaWYodGhpcy5zdGF0ZS5lZGl0TW9kZSl7XG4gICAgICBjb25zb2xlLmxvZygnQ0FMTEVEJylcbiAgICAgIC8vIFJlcGxhY2UgU3ViamVjdCBcbiAgICAgICQoJy5zdWJqZWN0JykudmFsKHRoaXMuc3RhdGUuc3ViamVjdClcbiAgICAgICQoJyN0ZW1wbGF0ZS1uYW1lJykudmFsKHRoaXMuc3RhdGUubmFtZSlcblxuICAgICAgJCgnLnN1bW1lcicpLnN1bW1lcm5vdGUoe1xuICAgICAgICBoZWlnaHQ6IDIwMCxcbiAgICAgICAgdG9vbGJhcjogW1xuICAgICAgICAgIFsnc3R5bGUnLCBbJ2JvbGQnLCAnaXRhbGljJywgJ3VuZGVybGluZScsICdjbGVhciddXSxcbiAgICAgICAgICBbJ2ZvbnQnLCBbJ3N0cmlrZXRocm91Z2gnXV0sXG4gICAgICAgICAgWydmb250c2l6ZScsIFsnZm9udHNpemUnXV0sXG4gICAgICAgICAgWydjb2xvcicsIFsnY29sb3InXV0sXG4gICAgICAgICAgWydwYXJhJywgWyd1bCcsICdvbCcsICdwYXJhZ3JhcGgnXV0sXG4gICAgICAgICAgWydoZWlnaHQnLCBbJ2hlaWdodCddXSxcbiAgICAgICAgXVxuICAgICAgfSlcblxuICAgICAgLy8gSW5pdGlhbGl6ZSBFZGl0b3Igd2l0aCBodG1sXG4gICAgICAkKCcuc3VtbWVyJykuY29kZSh0aGlzLnN0YXRlLmJvZHkpXG4gICAgfVxuICB9LFxuXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBzdWJqZWN0UGxhY2UgPSAodGhpcy5zdGF0ZS5lZGl0TW9kZSkgPyBSZWFjdC5ET00uaW5wdXQoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lJyx3aWR0aDo0ODB9LCBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIHN1YmplY3RcIn0pIDogdGhpcy5zdGF0ZS5zdWJqZWN0XG5cbiAgICBpZih0aGlzLnN0YXRlLmVkaXRNb2RlKXtcbiAgICAgICB0b2dnbGVCdXR0b24gPSBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmNoYW5nZU1vZGUsIFxuICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzXCIsIFxuICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snLGZsb2F0OidyaWdodCcsbWFyZ2luVG9wOjV9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXNhdmVcIn0pLCBcIiDCoCBTYXZlIFRlbXBsYXRlXCIpXG5cbiAgICAgICBpZih0aGlzLnByb3BzLmluaXRpYWxUZW1wbGF0ZVZhbHVlcy5uZXdUZW1wbGF0ZSl7XG4gICAgICAgICB0aGVfbmFtZSA9IFJlYWN0LkRPTS5pbnB1dCh7Y2xhc3NOYW1lOiBcImZvcm0tY29udHJvbFwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcInRlbXBsYXRlLW5hbWVcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZToge2Zsb2F0OidsZWZ0Jyx3aWR0aDoyMDB9fSlcbiAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICB0b2dnbGVCdXR0b24gPSBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmNoYW5nZU1vZGUsIFxuICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgYnRuLXhzXCIsIFxuICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snLGZsb2F0OidyaWdodCcsbWFyZ2luVG9wOjV9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBlbmNpbC1zcXVhcmVcIn0pLCBcIiDCoCBFZGl0IFRlbXBsYXRlXCIpXG5cbiAgICAgICB0aGVfbmFtZSA9IFJlYWN0LkRPTS5oNih7c3R5bGU6IHtmbG9hdDonbGVmdCd9fSwgXG4gICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1maWxlLXRleHQtb1wifSksIFwiwqBcIiwgXG4gICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5uYW1lXG4gICAgICAgICAgICAgICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcImVkaXRUZW1wbGF0ZVwifSwgXG4gICAgICAgIFJlYWN0LkRPTS5oNSh7Y2xhc3NOYW1lOiBcImV4YW1wbGUtdGVtcGxhdGUtdGl0bGVcIn0sIFwiRXhhbXBsZSBUZW1wbGF0ZSBWYWx1ZXNcIiksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZXhhbXBsZS10ZW1wbGF0ZS10aXRsZVwiLCBcbiAgICAgICAgICAgICBzdHlsZToge21hcmdpbkxlZnQ6MjE1LCBtYXJnaW5Ub3A6OH19LCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLWRlZmF1bHQgYnRuLXhzXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2hldnJvbi1sZWZ0XCJ9KSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgc3R5bGU6IHttYXJnaW5MZWZ0OjV9LCBcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLWRlZmF1bHQgYnRuLXhzXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2hldnJvbi1yaWdodFwifSkpXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtvbkNsaWNrOiB0aGlzLmNsaWNrZWRPdmVybGF5LCBpZDogXCJlZGl0VGVtcGxhdGVPdmVybGF5XCJ9KSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7aWQ6IFwiZWRpdFRlbXBsYXRlVmlld1wiLCBcbiAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0XCIsIFxuICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9fSwgXG4gICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtaGVhZGluZ1wiLCBzdHlsZToge2hlaWdodDo1MH19LCBcbiAgICAgICAgICAgICAgICAgdGhlX25hbWUsIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi14c1wiLCBcbiAgICAgICAgICAgICAgICBzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luTGVmdDo1LG1hcmdpblRvcDo1fX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdHJhc2hcIn0pXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICB0b2dnbGVCdXR0b25cbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZWRpdFRlbXBsYXRlVGl0bGVcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKG51bGwsIFwiU3ViamVjdDogXCIpLCBcbiAgICAgICAgICAgICAgICBzdWJqZWN0UGxhY2VcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwidGVtcGxhdGVEZXRhaWxzXCJ9LCBcbiAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5Cb3R0b206JzAnfSwgY2xhc3NOYW1lOiBcInRleHQtbXV0ZWRcIn0sIFxuICAgICAgICAgICAgICAgICBcIkNyZWF0ZWQgYnkgTWFyayBvbiBKdWwuIDIxLCAyMDE0XCJcbiAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpblRvcDonMCd9LCBjbGFzc05hbWU6IFwidGV4dC1tdXRlZFwifSwgXG4gICAgICAgICAgICAgICAgIFwibGFzdCB1cGRhdGVkIDcgZGF5cyBhZ29cIlxuICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWJvZHkgc3VtbWVyIHRlbXBsYXRlLWJvZHlcIn1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbnZhciBUZW1wbGF0ZXMgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy5qcy5taW4uanMnKTtcbnZhciBTY2hlZHVsZXMgPSByZXF1aXJlKCcuL3NjaGVkdWxlLmpzLm1pbi5qcycpO1xudmFyIENhbXBhaWducyA9IHJlcXVpcmUoJy4vY2FtcGFpZ25zLmpzLm1pbi5qcycpO1xudmFyIFNlbnRNYWlsID0gcmVxdWlyZSgnLi9zZW50X21haWwuanMubWluLmpzJyk7XG52YXIgRm9sbG93dXBGZWVkID0gcmVxdWlyZSgnLi9mb2xsb3d1cF9mZWVkLmpzLm1pbi5qcycpO1xudmFyIENhbXBhaWduRGV0YWlsID0gcmVxdWlyZSgnLi9jYW1wYWlnbl9kZXRhaWwuanMubWluLmpzJyk7XG52YXIgQ3JlYXRlQ2FtcGFpZ25Nb2RhbCA9IHJlcXVpcmUoJy4vY3JlYXRlX2NhbXBhaWduLmpzLm1pbi5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzZWxlY3RlZFNjcmVlbjogJ0NhbXBhaWducycsXG4gICAgICBzZWxlY3RlZENhbXBhaWduOicnLFxuICAgICAgcHJvc3BlY3RMaXN0czogW10sXG4gICAgICBjYW1wYWlnbnM6IFtdXG4gICAgfVxuICB9LFxuXG4gIGRlbGV0ZUNhbXBhaWduOiBmdW5jdGlvbihvYmplY3RJZCkge1xuICAgIC8vIHN3ZWV0QWxlcnRcbiAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLmNhbXBhaWducylcbiAgICBjYW1wYWlnbnMgPSBfLmZpbHRlcih0aGlzLnN0YXRlLmNhbXBhaWducywgZnVuY3Rpb24oY2FtcGFpZ24pIHtcbiAgICAgIHJldHVybiBjYW1wYWlnbi5vYmplY3RJZCAhPSBvYmplY3RJZFxuICAgIH0pXG4gICAgY29uc29sZS5sb2coY2FtcGFpZ25zKVxuICAgIHRoaXMuc2V0U3RhdGUoe2NhbXBhaWduczogY2FtcGFpZ25zfSlcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL0NhbXBhaWduLycrb2JqZWN0SWQsXG4gICAgICB0eXBlOidERUxFVEUnLFxuICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyBjb25zb2xlLmxvZyhyZXMpIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUubG9nKGVycikgfVxuICAgIH0pXG4gICAgLy8gcGVyc2lzdFxuICAgIC8vIGVycm9yIGxvZ1xuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzcyA9IHRoaXM7XG4gICAgIGNvbXBhbnkgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikuY29tcGFueVxuICAgICB1c2VyID0gYXBwQ29uZmlnLnBvaW50ZXIoJ19Vc2VyJywgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLm9iamVjdElkKVxuICAgICBxcnkgPSB7XG4gICAgICAgd2hlcmUgOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICB1c2VyOiB1c2VyLFxuICAgICAgICAgY29tcGFueTogY29tcGFueVxuICAgICAgIH0pLFxuICAgICAgIGluY2x1ZGU6ICdwcm9zcGVjdF9saXN0LGZvbGxvd3Vwcyxmb2xsb3d1cHMudGVtcGxhdGUsYmF0Y2hlcycsXG4gICAgICAgb3JkZXI6ICctY3JlYXRlZEF0J1xuICAgICB9XG4gICAgICQuYWpheCh7XG4gICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL0NhbXBhaWduJyxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcy5yZXN1bHRzKVxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7Y2FtcGFpZ25zOiByZXMucmVzdWx0c30pXG4gICAgICAgIC8vIEZpbmQgQWxsIFByb3NwZWN0cyBJbiBQcm9zcGVjdExpc3QgdGhhdCBhcmUgbm90IGluIGFueSBiYXRjaGVzXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InKVxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgIH0pO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0TGlzdCcsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIG9yZGVyOiAnLWNyZWF0ZWRBdCcsXG4gICAgICAgIHdoZXJlIDogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHVzZXI6IGFwcENvbmZpZy51c2VyLFxuICAgICAgICAgIGNvbXBhbnk6IGFwcENvbmZpZy5jb21wYW55LFxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdQUk9TUEVDVCBMSVNUUycpXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcy5yZXN1bHRzKVxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7cHJvc3BlY3RMaXN0czogcmVzLnJlc3VsdHN9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcblxuICAgICAgfVxuICAgIH0pXG5cblxuICB9LFxuICBcbiAgdG9nZ2xlU2NyZWVuOiBmdW5jdGlvbihzY3JlZW4pIHtcbiAgICB0aGlzLnNldFN0YXRlKHtzZWxlY3RlZFNjcmVlbiA6IHNjcmVlbn0pXG4gIH0sXG5cbiAgY2hhbmdlU2VsZWN0ZWRDYW1wYWlnbjogZnVuY3Rpb24oc2NyZWVuLCBzZWxlY3RlZENhbXBhaWduKSB7XG4gICAgY29uc29sZS5sb2coc2VsZWN0ZWRDYW1wYWlnbilcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHNlbGVjdGVkQ2FtcGFpZ24gOiBzZWxlY3RlZENhbXBhaWduLFxuICAgICAgc2VsZWN0ZWRTY3JlZW46IHNjcmVlbixcbiAgICB9KVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgdGhpc3MgPSB0aGlzXG4gICAgY29uc29sZS5sb2codGhpcy5zdGF0ZS5zZWxlY3RlZENhbXBhaWduKVxuICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUuc2VsZWN0ZWRTY3JlZW4pXG4gICAgY29uc29sZS5sb2codGhpcy5zdGF0ZS5jYW1wYWlnbnMpXG4gICAgc3dpdGNoICh0aGlzLnN0YXRlLnNlbGVjdGVkU2NyZWVuKXtcbiAgICAgIGNhc2UgJ0NhbXBhaWducyc6XG4gICAgICAgIEN1cnJlbnRTY3JlZW4gPSBDYW1wYWlnbnMoe2NhbXBhaWduczogdGhpc3Muc3RhdGUuY2FtcGFpZ25zLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VTZWxlY3RlZENhbXBhaWduOiB0aGlzcy5jaGFuZ2VTZWxlY3RlZENhbXBhaWduLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVDYW1wYWlnbjogdGhpcy5kZWxldGVDYW1wYWlnbiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlU2NyZWVuOiB0aGlzcy50b2dnbGVTY3JlZW59KVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0NhbXBhaWduRGV0YWlsJzpcbiAgICAgICAgQ3VycmVudFNjcmVlbiA9IENhbXBhaWduRGV0YWlsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2FtcGFpZ246IHRoaXNzLnN0YXRlLnNlbGVjdGVkQ2FtcGFpZ24sIFxuICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2FtcGFpZ25PYmplY3RJZDogdGhpc3Muc3RhdGUuc2VsZWN0ZWRDYW1wYWdpbk9iamVjdElkLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZVNjcmVlbjogdGhpc3MudG9nZ2xlU2NyZWVufSlcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdUZW1wbGF0ZXMnOlxuICAgICAgICBDdXJyZW50U2NyZWVuID0gVGVtcGxhdGVzKG51bGwpXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnT3ZlcnZpZXcnOlxuICAgICAgICBDdXJyZW50U2NyZWVuID0gQ2FtcGFpZ25zKHtjYW1wYWlnbnM6IHRoaXNzLnN0YXRlLmNhbXBhaWducywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlU2VsZWN0ZWRDYW1wYWlnbjogdGhpc3MuY2hhbmdlU2VsZWN0ZWRDYW1wYWlnbiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlU2NyZWVuOiB0aGlzcy50b2dnbGVTY3JlZW59KVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ1NlbnQgTWFpbCc6XG4gICAgICAgIEN1cnJlbnRTY3JlZW4gPSBTZW50TWFpbChudWxsKVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0ZvbGxvd3VwIEZlZWQnOlxuICAgICAgICBDdXJyZW50U2NyZWVuID0gRm9sbG93dXBGZWVkKG51bGwpXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnU2NoZWR1bGVzJzpcbiAgICAgICAgQ3VycmVudFNjcmVlbiA9IFNjaGVkdWxlcyhudWxsKVxuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIlwiLCBzdHlsZToge2hlaWdodDonNTUwcHgnfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCIsIHN0eWxlOiB7cGFkZGluZzonMCcsd2lkdGg6JzEwMCUnLGhlaWdodDonMTAwJSd9fSwgXG4gICAgICAgICAgU2lkZU1lbnUoe1xuICAgICAgICAgICAgICAgIGNyZWF0ZUNhbXBhaWduOiB0aGlzLmNyZWF0ZUNhbXBhaWduLCBcbiAgICAgICAgICAgICAgICBwcm9zcGVjdExpc3RzOiB0aGlzLnN0YXRlLnByb3NwZWN0TGlzdHMsIFxuICAgICAgICAgICAgICAgIHRvZ2dsZVNjcmVlbjogdGhpcy50b2dnbGVTY3JlZW59KSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtMTBcIiwgXG4gICAgICAgICAgICAgICAgICAgc3R5bGU6IHtwYWRkaW5nOicwJyxoZWlnaHQ6JzEwMCUnfX0sIFxuICAgICAgICAgICAgQ3VycmVudFNjcmVlblxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgcGVyc2lzdENhbXBhaWduOiBmdW5jdGlvbihuZXdDYW1wYWlnbikge1xuICAgIENhbXBhaWduID0ge31cbiAgICBDYW1wYWlnbi5uYW1lID0gbmV3Q2FtcGFpZ24ubmFtZVxuICAgIENhbXBhaWduLnVzZXIgPSBhcHBDb25maWcucG9pbnRlcignX1VzZXInLCBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikub2JqZWN0SWQpXG4gICAgQ2FtcGFpZ24uY29tcGFueSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55XG4gICAgdmFyIHRoaXNzID0gdGhpcztcblxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvQ2FtcGFpZ24nLFxuICAgICAgdHlwZTonUE9TVCcsXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeShDYW1wYWlnbiksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgdGhlX2NhbXBhaWduID0gXy5maW5kKHRoaXNzLnN0YXRlLmNhbXBhaWducywgZnVuY3Rpb24oY2FtcGFpZ24pe1xuICAgICAgICAgIGZpcnN0ID0gY2FtcGFpZ24ubmFtZSA9PSBuZXdDYW1wYWlnbi5uYW1lIFxuICAgICAgICAgIHNlY29uZCA9IGNhbXBhaWduLnByb3NwZWN0X2xpc3QgPT0gbmV3Q2FtcGFpZ24ucHJvc3BlY3RfbGlzdFxuICAgICAgICAgIHJldHVybiBmaXJzdCAmJiBzZWNvbmRcbiAgICAgICAgfSlcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICBjb25zb2xlLmxvZyhyZXMub2JqZWN0SWQpXG5cbiAgICAgICAgdGhlX2NhbXBhaWduLm9iamVjdElkID0gcmVzLm9iamVjdElkXG4gICAgICAgIGNhbXBhaWducyA9IF8uZmlsdGVyKHRoaXNzLnN0YXRlLmNhbXBhaWducywgZnVuY3Rpb24oY2FtcGFpZ24pe1xuICAgICAgICAgIGZpcnN0ID0gY2FtcGFpZ24ubmFtZSA9PSBuZXdDYW1wYWlnbi5uYW1lIFxuICAgICAgICAgIHNlY29uZCA9IGNhbXBhaWduLnByb3NwZWN0X2xpc3QgPT0gbmV3Q2FtcGFpZ24ucHJvc3BlY3RfbGlzdFxuICAgICAgICAgIHJldHVybiAhKGZpcnN0ICYmIHNlY29uZClcbiAgICAgICAgfSlcbiAgICAgICAgY2FtcGFpZ25zLnB1c2godGhlX2NhbXBhaWduKVxuICAgICAgICBjb25zb2xlLmxvZyhjYW1wYWlnbnMpXG5cbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2NhbXBhaWduczogIGNhbXBhaWduc30pXG5cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvQ2FtcGFpZ24vJytyZXMub2JqZWN0SWQsXG4gICAgICAgICAgdHlwZTonUFVUJyxcbiAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7cHJvc3BlY3RfbGlzdDp7XG4gICAgICAgICAgICAnX190eXBlJzonUG9pbnRlcicsXG4gICAgICAgICAgICAnY2xhc3NOYW1lJzonUHJvc3BlY3RMaXN0JyxcbiAgICAgICAgICAgICdvYmplY3RJZCc6bmV3Q2FtcGFpZ24ucHJvc3BlY3RfbGlzdC5vYmplY3RJZCxcbiAgICAgICAgICB9fSksXG4gICAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIGNyZWF0ZUNhbXBhaWduOiBmdW5jdGlvbihuZXdDYW1wYWlnbikge1xuICAgIGNhbXBhaWducyA9IHRoaXMuc3RhdGUuY2FtcGFpZ25zXG4gICAgY2FtcGFpZ25zLnB1c2gobmV3Q2FtcGFpZ24pXG4gICAgdGhpcy5zZXRTdGF0ZSh7Y2FtcGFpZ25zOiBjYW1wYWlnbnN9KVxuICAgIGNvbnNvbGUubG9nKG5ld0NhbXBhaWduKVxuXG4gICAgJCgnLm1vZGFsJykuY2xpY2soKVxuICAgICQoJy5tb2RhbC1iYWNrZHJvcCcpLmNsaWNrKClcblxuICAgIHRoaXMucGVyc2lzdENhbXBhaWduKG5ld0NhbXBhaWduKVxuICB9XG59KTtcblxudmFyIFNpZGVNZW51ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnU2lkZU1lbnUnLFxuICB0b2dnbGVTY3JlZW46IGZ1bmN0aW9uKGUpIHtcbiAgICB0aGlzLnByb3BzLnRvZ2dsZVNjcmVlbigkKGUudGFyZ2V0KS50ZXh0KCkudHJpbSgpKVxuICB9LFxuXG4gIC8qXG4gICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwic2hhcnAgYnRuIGJ0bi1kZWZhdWx0XCIgb25DbGljaz17dGhpcy50b2dnbGVTY3JlZW59PlxuICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtZmlsZS10ZXh0XCIgLz4gJm5ic3A7IFRlbXBsYXRlc1xuICAgIDwvYnV0dG9uPlxuICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT1cInNoYXJwIGJ0biBidG4tZGVmYXVsdFwiIG9uQ2xpY2s9e3RoaXMudG9nZ2xlU2NyZWVufT5cbiAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWNsb2NrLW9cIiAvPiAmbmJzcDsgU2NoZWR1bGVzXG4gICAgPC9idXR0b24+XG4gICovXG4gIGNyZWF0ZUNhbXBhaWduTW9kYWw6IGZ1bmN0aW9uKCkge1xuXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0yXCIsIFxuICAgICAgICBzdHlsZToge3BhZGRpbmc6JzAnLGhlaWdodDonMTAwJScsIGJhY2tncm91bmRDb2xvcjoncmdiKDkwLCAxMDcsIDExOSknLGJvcmRlckJvdHRvbUxlZnRSYWRpdXM6JzNweCd9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXAtdmVydGljYWxcIiwgc3R5bGU6IHt3aWR0aDonMTAwJSd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwic2hhcnAgYnRuIGJ0bi1kZWZhdWx0XCIsIFxuICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy50b2dnbGVTY3JlZW59LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge21hcmdpbkxlZnQ6JzI3cHgnfX0sIFwiT3ZlcnZpZXdcIilcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJzaGFycCBidG4gYnRuLWRlZmF1bHRcIiwgXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZVNjcmVlbn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1uZXdzcGFwZXItb1wifSksIFwiIMKgXCIsICBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge21hcmdpbkxlZnQ6JzRweCd9fSwgXCJGb2xsb3d1cCBGZWVkXCIpXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ30sIFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcInNoYXJwIGJ0biBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNvZGUtZm9ya1wifSksIFwiIMKgXCIsICBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge21hcmdpbkxlZnQ6JzRweCd9fSwgXCJSdWxlc1wiKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9LCBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJzaGFycCBidG4gYnRuLWRlZmF1bHRcIiwgb25DbGljazogdGhpcy50b2dnbGVTY3JlZW59LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGllLWNoYXJ0XCJ9KSwgXCIgwqAgQW5hbHl0aWNzXCJcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJzaGFycCBidG4gYnRuLWRlZmF1bHRcIiwgXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZVNjcmVlbn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wYXBlci1wbGFuZVwifSksIFwiIMKgIFNlbnQgTWFpbFwiXG4gICAgICAgICAgKVxuICAgICAgICApLCBcblxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiXCIsIHN0eWxlOiB7d2lkdGg6JzEwMCUnLHRleHRBbGlnbjonY2VudGVyJyxtYXJnaW5Ub3A6MTAwfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgbmV3LWxpc3QtYnRuXCIsIFxuICAgICAgICAgICAgICAgICdkYXRhLXRvZ2dsZSc6IFwibW9kYWxcIiwgJ2RhdGEtdGFyZ2V0JzogXCIuYnMtY3JlYXRlQ2FtcGFpZ24tbW9kYWwtc21cIiwgXG4gICAgICAgICAgICAgICAgc3R5bGU6IHsgYmFja2dyb3VuZEltYWdlOiAnbGluZWFyLWdyYWRpZW50KDE4MGRlZywgIzAwOTZmZiAwJSwgIzAwNWRmZiAxMDAlKSd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXMtY2lyY2xlXCJ9KSwgXCLCoMKgTmV3IENhbXBhaWduXCJcbiAgICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICBDcmVhdGVDYW1wYWlnbk1vZGFsKHtwcm9zcGVjdExpc3RzOiB0aGlzLnByb3BzLnByb3NwZWN0TGlzdHMsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVDYW1wYWlnbjogdGhpcy5jcmVhdGVDYW1wYWlnbn0pXG4gICAgICApXG4gICAgKTtcbiAgfSxcblxuICBjcmVhdGVDYW1wYWlnbjogZnVuY3Rpb24obmV3Q2FtcGFpZ24pIHtcbiAgICB0aGlzLnByb3BzLmNyZWF0ZUNhbXBhaWduKG5ld0NhbXBhaWduKVxuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBGb2xsb3d1cEZlZWRcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2NoZWR1bGVkRm9sbG93dXBzOiBbXVxuICAgIH1cbiAgfSxcblxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgc2NoZWR1bGVkRm9sbG93dXBzID0gW11cbiAgICBmb3IoaT0wO2k8IHRoaXMuc3RhdGUuc2NoZWR1bGVkRm9sbG93dXBzLmxlbmd0aDsgaSsrKXsgXG4gICAgICBzY2hlZHVsZWRGb2xsb3d1cHMucHVzaChTY2hlZHVsZWRGb2xsb3d1cFJvdyhudWxsKSlcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtvdmVyZmxvdzonYXV0bycsIGhlaWdodDo1NTB9fSwgXG4gICAgICAgIFJlYWN0LkRPTS50YWJsZSh7Y2xhc3NOYW1lOiBcInRhYmxlIHRhYmxlLXN0cmlwZWRcIiwgc3R5bGU6IHttYXJnaW5Cb3R0b206MH19LCBcbiAgICAgICAgICBSZWFjdC5ET00udGhlYWQobnVsbCwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiUHJvc3BlY3QgTmFtZVwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJQcm9zcGVjdCBFbWFpbFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInfX0sIFwiU3RhdHVzXCIpXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRib2R5KG51bGwsIFxuICAgICAgICAgICAgc2NoZWR1bGVkRm9sbG93dXBzXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbnZhciBTY2hlZHVsZWRGb2xsb3d1cFJvdyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1NjaGVkdWxlZEZvbGxvd3VwUm93JyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnRyKG51bGxcblxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cbnZhciBTZW5kRW1haWxNb2RhbCA9IHJlcXVpcmUoJy4vc2VuZF9lbWFpbF9tb2RhbC5qcy5taW4uanMnKVxudmFyIFRpbWVsaW5lRGF5RWxlbWVudCA9IHJlcXVpcmUoJy4vdGltZWxpbmVfZGF5X2VsZW1lbnQuanMubWluLmpzJylcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gRm9sbG93dXBUaW1lbGluZVxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIGluaXRpYWxGb2xsb3d1cHMgPSB0aGlzLnByb3BzLmluaXRpYWxGb2xsb3d1cHNcbiAgICBpbml0aWFsRm9sbG93dXBzID0gKGluaXRpYWxGb2xsb3d1cHMpID8gaW5pdGlhbEZvbGxvd3VwcyA6IFtdXG4gICAgYmF0Y2hlcyA9IHRoaXMucHJvcHMuc2VsZWN0ZWRDYW1wYWlnbi5iYXRjaGVzXG4gICAgYmF0Y2hlcyA9IChiYXRjaGVzKSA/IGJhdGNoZXMgOiBbXVxuICAgIHJldHVybiB7XG4gICAgICBmb2xsb3d1cHM6IF8uY29tcGFjdChpbml0aWFsRm9sbG93dXBzKSxcbiAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgY3VycmVudFRlbXBsYXRlOicnLFxuICAgICAgY3VycmVudEJhdGNoOiAnJyxcbiAgICAgIGJhdGNoZXMgOiBiYXRjaGVzXG4gICAgfVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzcyA9IHRoaXM7XG4gICAgJCgnLmRheScpLnRvb2x0aXAoe1xuICAgICAgcGxhY2VtZW50OiAncmlnaHQnLFxuICAgICAgdGl0bGU6JysgQWRkIGEgZm9sbG93LXVwJ1xuICAgIH0pXG5cbiAgICBjb25zb2xlLmxvZyh0aGlzLnByb3BzLnNlbGVjdGVkQ2FtcGFpZ24pXG4gICAgIGNvbXBhbnkgPSBKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikuY29tcGFueSlcbiAgICAgY3VycmVudENhbXBhaWduID0gYXBwQ29uZmlnLnBvaW50ZXIoJ0NhbXBhaWduJywgdGhpcy5wcm9wcy5zZWxlY3RlZENhbXBhaWduLm9iamVjdElkKVxuICAgICAkLmFqYXgoe1xuICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Gb2xsb3d1cCcsXG4gICAgICAgdHlwZTonR0VUJyxcbiAgICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgICBkYXRhOiB7XG4gICAgICAgICB3aGVyZTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICBjYW1wYWlnbjogY3VycmVudENhbXBhaWduLFxuICAgICAgICAgICBjb21wYW55OiBhcHBDb25maWcuY29tcGFueVxuICAgICAgICAgfSksXG4gICAgICAgICBpbmNsdWRlOid0ZW1wbGF0ZScsXG4gICAgICAgfSxcbiAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgIGNvbnNvbGUubG9nKCdmb2xsb3d1cCB0aW1lbGluZScpXG4gICAgICAgICBjb25zb2xlLmxvZyhyZXMucmVzdWx0cylcbiAgICAgICB9LFxuICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpXG4gICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgfVxuICAgICB9KVxuICB9LFxuXG4gIGFkZEZvbGxvd3VwU2VudFRvQmF0Y2g6IGZ1bmN0aW9uKGJhdGNoLCBmb2xsb3d1cCkge1xuICAgIGJhdGNoZXMgPSBfLm1hcCh0aGlzLnN0YXRlLmJhdGNoZXMsIGZ1bmN0aW9uKF9iYXRjaCkge1xuICAgICAgICAgICAgICAgICAgaWYoX2JhdGNoLm9iamVjdElkID09IGJhdGNoLm9iamVjdElkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKF9iYXRjaC5mb2xsb3d1cHMpXG4gICAgICAgICAgICAgICAgICAgICAgX2JhdGNoLmZvbGxvd3Vwcy5wdXNoKGZvbGxvd3VwKVxuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgX2JhdGNoLmZvbGxvd3VwcyA9IFtmb2xsb3d1cF1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHJldHVybiBfYmF0Y2hcbiAgICAgICAgICAgICAgfSlcbiAgICAvLyBQZXJzaXN0XG4gIH0sXG4gIFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHRpbWVsaW5lRWxlbWVudHMgPSBbXVxuICAgIGZvbGxvd3VwcyA9IHRoaXMuc3RhdGUuZm9sbG93dXBzXG5cbiAgICBiYXRjaGVzID0gXy5tYXAodGhpcy5zdGF0ZS5iYXRjaGVzLCBmdW5jdGlvbihiYXRjaCkge1xuICAgICAgaWYoYmF0Y2gpe1xuICAgICAgICBub3cgPSBtb21lbnQoKS5zdGFydE9mKCdkYXknKS52YWx1ZU9mKClcbiAgICAgICAgYmF0Y2guY3VycmVudERheSA9IG1vbWVudChiYXRjaC5zdGFydGVkKS5kaWZmKG1vbWVudChub3cpLCAgJ2RheXMnKSAqIC0xXG4gICAgICAgIHJldHVybiBiYXRjaFxuICAgICAgfVxuICAgIH0pXG4gICAgYmF0Y2hlcyA9IF8uY29tcGFjdChiYXRjaGVzKVxuXG4gICAgZm9yKGk9MDtpPCAzMTtpKyspe1xuICAgICAgZm9sbG93dXAgPSBfLmZpbmRXaGVyZSh0aGlzLnN0YXRlLmZvbGxvd3Vwcywge2RheTogaX0pXG4gICAgICB2YXIgZWxlbWVudFR5cGUgPSAoZm9sbG93dXApID8gdHJ1ZSA6IGZhbHNlXG4gICAgICB2YXIgY3VycmVudFRlbXBsYXRlID0gKGZvbGxvd3VwKSA/IGZvbGxvd3VwLnRlbXBsYXRlIDogZmFsc2VcbiAgICAgIHZhciBhZGRUZW1wbGF0ZU1vZGUgPSAoZm9sbG93dXApID8gZm9sbG93dXAuYWRkVGVtcGxhdGVNb2RlIDogdHJ1ZVxuICAgICAgY2FtcGFpZ24gPSB0aGlzLnByb3BzLnNlbGVjdGVkQ2FtcGFpZ25cblxuICAgICAgY3VycmVudEJhdGNoID0ge31cbiAgICAgIGJhdGNoX3N0YXJ0ZWRfdG9kYXkgPSBmYWxzZVxuICAgICAgYWxyZWFkeVNlbnQgPSBmYWxzZVxuICAgICAgYmF0Y2hDb3VudCA9IHVuZGVmaW5lZFxuICAgICAgaWYoaSA9PSAwKSB7XG4gICAgICAgIGJhdGNoQ291bnQgPSAoYmF0Y2hlcykgPyB0aGlzLnByb3BzLm5ld1Byb3NwZWN0cy5sZW5ndGggOiB0aGlzLnByb3BzLnByb3NwZWN0cy5sZW5ndGhcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJhdGNoID0gXy5maW5kV2hlcmUoYmF0Y2hlcywge2N1cnJlbnREYXk6IGl9KVxuICAgICAgICBpZihiYXRjaCkge1xuICAgICAgICAgIGN1cnJlbnRCYXRjaCA9IGJhdGNoLm9iamVjdElkXG4gICAgICAgICAgY29uc29sZS5kZWJ1ZyhiYXRjaC5vYmplY3RJZClcbiAgICAgICAgICBiYXRjaENvdW50ID0gXCJ+XCJcbiAgICAgICAgICBpZihmb2xsb3d1cCkge1xuICAgICAgICAgICAgX2JhdGNoZXMgPSBmb2xsb3d1cC5iYXRjaGVzXG4gICAgICAgICAgICBhbHJlYWR5U2VudCA9IF8uZmluZFdoZXJlKF9iYXRjaGVzLCBfLnBpY2soYmF0Y2gsJ29iamVjdElkJykpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRpbWVsaW5lRWxlbWVudHMucHVzaChSZWFjdC5ET00uZGl2KG51bGwsIFRpbWVsaW5lRGF5RWxlbWVudCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlDb3VudDogaSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50VHlwZTogIWVsZW1lbnRUeXBlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUZW1wbGF0ZTogY3VycmVudFRlbXBsYXRlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhdGNoQ291bnQ6IGJhdGNoQ291bnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJhdGNoOiBjdXJyZW50QmF0Y2gsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxyZWFkeVNlbnQ6IGFscmVhZHlTZW50LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFRlbXBsYXRlTW9kZTogYWRkVGVtcGxhdGVNb2RlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlczogdGhpcy5wcm9wcy50ZW1wbGF0ZXMsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3UHJvc3BlY3RzOiB0aGlzLnByb3BzLm5ld1Byb3NwZWN0cywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRGb2xsb3d1cDogdGhpcy5hZGRGb2xsb3d1cCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0Rm9sbG93dXA6IHRoaXMuZWRpdEZvbGxvd3VwLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVGb2xsb3d1cDogdGhpcy5zYXZlRm9sbG93dXAsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRm9sbG93dXA6IHRoaXMucmVtb3ZlRm9sbG93dXAsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9sbG93dXBTZW50VG9CYXRjaDogdGhpcy5hZGRGb2xsb3d1cFNlbnRUb0JhdGNoLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhdGNoZXM6IHRoaXMucHJvcHMuc2VsZWN0ZWRDYW1wYWlnbi5iYXRjaGVzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3NwZWN0TGlzdENvdW50OiB0aGlzLnByb3BzLnByb3NwZWN0TGlzdENvdW50LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRCYXRjaDogdGhpcy5zZXRDdXJyZW50QmF0Y2gsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFRlbXBsYXRlOiB0aGlzLnNldEN1cnJlbnRUZW1wbGF0ZX0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcblxuICAgICAgaWYoaSA9PSAwICYmIF8uZmluZFdoZXJlKGJhdGNoZXMsIHtjdXJyZW50RGF5OiAwfSkpe1xuICAgICAgICAgIGN1cnJlbnRCYXRjaCA9IF8uZmluZFdoZXJlKGJhdGNoZXMsIHtjdXJyZW50RGF5OiAwfSkub2JqZWN0SWRcbiAgICAgICAgICBjb25zb2xlLmRlYnVnKCcwLjUnKVxuICAgICAgICAgIGNvbnNvbGUuZGVidWcoY3VycmVudEJhdGNoKVxuICAgICAgICAgIGJhdGNoQ291bnQgPSBcIn5cIlxuICAgICAgICAgIHRpbWVsaW5lRWxlbWVudHMucHVzaChSZWFjdC5ET00uZGl2KG51bGwsIFRpbWVsaW5lRGF5RWxlbWVudCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5Q291bnQ6IDAuNSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmF0Y2hDb3VudDogYmF0Y2hDb3VudCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJhdGNoOiBjdXJyZW50QmF0Y2gsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Byb3NwZWN0czogdGhpcy5wcm9wcy5uZXdQcm9zcGVjdHMsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUeXBlOiB0cnVlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXRjaGVzOiB0aGlzLnByb3BzLnNlbGVjdGVkQ2FtcGFpZ24uYmF0Y2hlcywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvc3BlY3RMaXN0Q291bnQ6IHRoaXMucHJvcHMucHJvc3BlY3RMaXN0Q291bnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRCYXRjaDogdGhpcy5zZXRDdXJyZW50QmF0Y2h9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInRpbWVsaW5lXCIsIFxuICAgICAgICAgICAgIHN0eWxlOiB7aGVpZ2h0OicxMDAlJyxiYWNrZ3JvdW5kQ29sb3I6J3JnYig5MCwgMTA3LCAxMTkpJywgd2lkdGg6NSxtYXJnaW5Ub3A6LTM1fX0sIFxuICAgICAgICAgICAgIHRpbWVsaW5lRWxlbWVudHNcbiAgICAgICAgKSwgXG4gICAgICAgIFNlbmRFbWFpbE1vZGFsKHtwcm9zcGVjdHM6IHRoaXMucHJvcHMucHJvc3BlY3RzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2FtcGFpZ246IHRoaXMucHJvcHMuc2VsZWN0ZWRDYW1wYWlnbiwgXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdQcm9zcGVjdHM6IHRoaXMucHJvcHMubmV3UHJvc3BlY3RzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvbGxvd3VwU2VudFRvQmF0Y2g6IHRoaXMuYWRkRm9sbG93dXBTZW50VG9CYXRjaCwgXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50QmF0Y2g6IHRoaXMuc3RhdGUuY3VycmVudEJhdGNoLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUZW1wbGF0ZTogdGhpcy5zdGF0ZS5jdXJyZW50VGVtcGxhdGV9KVxuICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgY3JlYXRlRm9sbG93dXA6IGZ1bmN0aW9uKCkge1xuICAgIC8vXG4gIH0sICAgICAgICAgXG5cbiAgYWRkRm9sbG93dXA6IGZ1bmN0aW9uKGRheSkge1xuICAgIC8vY29uc29sZS5sb2coJ2NhbGxlZCB0ZW1wbGF0ZSBlZGl0IG1lbnUnKVxuICAgIGZvbGxvd3VwcyA9IHRoaXMuc3RhdGUuZm9sbG93dXBzXG4gICAgZm9sbG93dXBzLnB1c2goe2FkZFRlbXBsYXRlTW9kZTogdHJ1ZSwgZGF5OiBkYXl9KVxuICAgIHRoaXMuc2V0U3RhdGUoeyBmb2xsb3d1cHM6IGZvbGxvd3VwcyB9KVxuICB9LFxuXG4gIGVkaXRGb2xsb3d1cDogZnVuY3Rpb24oZGF5KSB7XG4gICAgLy8gZmluZCB0ZW1wbGF0ZSBzZXQgZWRpdG1vZGUgaXMgZmFsc2VcbiAgICBmb2xsb3d1cHMgPSBfLm1hcCh0aGlzLnN0YXRlLmZvbGxvd3VwcywgZnVuY3Rpb24oZm9sbG93dXApIHtcbiAgICAgIGlmKGZvbGxvd3VwLmRheSA9PSBkYXkpeyBmb2xsb3d1cC5hZGRUZW1wbGF0ZU1vZGUgPSB0cnVlIH1cbiAgICAgIHJldHVybiBmb2xsb3d1cFxuICAgIH0pXG4gICAgdGhpcy5zZXRTdGF0ZSh7Zm9sbG93dXBzOiBmb2xsb3d1cHN9KVxuICB9LFxuXG4gIHNhdmVGb2xsb3d1cDogZnVuY3Rpb24oZGF5LCBjaG9zZW5UZW1wbGF0ZSkge1xuICAgIG5ld19mb2xsb3d1cHMgPSBfLm1hcCh0aGlzLnN0YXRlLmZvbGxvd3VwcywgZnVuY3Rpb24oZm9sbG93dXApIHtcbiAgICAgIGlmKGZvbGxvd3VwLmRheSA9PSBkYXkpe1xuICAgICAgICBmb2xsb3d1cC5hZGRUZW1wbGF0ZU1vZGUgPSBmYWxzZVxuICAgICAgICBmb2xsb3d1cC50ZW1wbGF0ZSA9IGNob3NlblRlbXBsYXRlXG4gICAgICB9XG4gICAgICByZXR1cm4gZm9sbG93dXBcbiAgICB9KVxuICAgIHRoaXMuc2V0U3RhdGUoe2ZvbGxvd3VwczogbmV3X2ZvbGxvd3Vwc30pXG4gICAgZm9sbG93dXAgPSBfLmZpbmRXaGVyZShuZXdfZm9sbG93dXBzLCB7ZGF5OiBkYXl9KVxuXG4gICAgICBpZihmb2xsb3d1cC5vYmplY3RJZCl7XG4gICAgICAgIHVybCA9IFwiL1wiK2ZvbGxvd3VwLm9iamVjdElkOyB0eXBlPVwiUFVUXCJcbiAgICAgICAgZGF0YSA9IHt0ZW1wbGF0ZTogYXBwQ29uZmlnLnBvaW50ZXIoJ1RlbXBsYXRlJywgY2hvc2VuVGVtcGxhdGUub2JqZWN0SWQpfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXJsID0gXCJcIjsgdHlwZT1cIlBPU1RcIjtcblxuICAgICAgICAgIGRhdGEgPSB7XG4gICAgICAgICAgICBkYXk6IGRheSxcbiAgICAgICAgICAgIGNhbXBhaWduIDogYXBwQ29uZmlnLnBvaW50ZXIoJ0NhbXBhaWduJywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuc2VsZWN0ZWRDYW1wYWlnbi5vYmplY3RJZCksXG4gICAgICAgICAgICB0ZW1wbGF0ZTogYXBwQ29uZmlnLnBvaW50ZXIoJ1RlbXBsYXRlJywgY2hvc2VuVGVtcGxhdGUub2JqZWN0SWQpLFxuICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL0ZvbGxvd3VwJyt1cmwsXG4gICAgICB0eXBlOnR5cGUsXG4gICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBuZXdfZm9sbG93dXBzID0gXy5tYXAobmV3X2ZvbGxvd3VwcywgZnVuY3Rpb24oZm9sbG93dXApIHtcbiAgICAgICAgICBpZihmb2xsb3d1cC5kYXkgPT0gZGF5KSB7IGZvbGxvd3VwLm9iamVjdElkID0gZmFsc2UgfVxuICAgICAgICAgIHJldHVybiBmb2xsb3d1cFxuICAgICAgICB9KVxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7Zm9sbG93dXBzOiBuZXdfZm9sbG93dXBzfSlcblxuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL0NhbXBhaWduLycrdGhpc3MucHJvcHMuc2VsZWN0ZWRDYW1wYWlnbi5vYmplY3RJZCxcbiAgICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoe2ZvbGxvd3Vwczoge1xuICAgICAgICAgICAgX19vcDogJ0FkZFVuaXF1ZScsXG4gICAgICAgICAgICBvYmplY3RzOlthcHBDb25maWcucG9pbnRlcignRm9sbG93dXAnLCByZXMub2JqZWN0SWQpXVxuICAgICAgICAgIH19KSxcbiAgICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKCkgeyB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbigpIHsgfVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbigpIHsgfSxcbiAgICB9KVxuICB9LFxuXG4gIHJlbW92ZUZvbGxvd3VwOiBmdW5jdGlvbihkYXkpIHtcbiAgICBmb2xsb3d1cHMgPSBbXVxuICAgIGZvcihpPTA7aTwgdGhpcy5zdGF0ZS5mb2xsb3d1cHMubGVuZ3RoO2krKylcbiAgICAgIGlmKHRoaXMuc3RhdGUuZm9sbG93dXBzW2ldLmRheSAhPSBkYXkpXG4gICAgICAgIGZvbGxvd3Vwcy5wdXNoKHRoaXMuc3RhdGUuZm9sbG93dXBzW2ldKVxuICAgICAgXG4gICAgZm9yKGk9MDtpPCB0aGlzLnN0YXRlLmZvbGxvd3Vwcy5sZW5ndGg7aSsrKVxuICAgICAgaWYodGhpcy5zdGF0ZS5mb2xsb3d1cHNbaV0uZGF5ID09IGRheSlcbiAgICAgICAgYnJlYWtcbiAgICBcbiAgICB0aGlzLnNldFN0YXRlKHtmb2xsb3d1cHM6IGZvbGxvd3Vwc30pIFxuICAgIGlkID0gdGhpcy5zdGF0ZS5mb2xsb3d1cHNbaV1cblxuICAgIHRoaXNzID0gdGhpcztcbiAgICBpZihpZCkge1xuICAgICAgaWQgPSBpZC5vYmplY3RJZFxuICAgICAgJC5hamF4KHtcbiAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL0ZvbGxvd3VwLycraWQsXG4gICAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgIHR5cGU6J0RFTEVURScsXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyBjb25zb2xlLmxvZyhyZXMpIH1cbiAgICAgIH0pXG5cbiAgICAgY29uc29sZS5sb2coJ1JFTU9WRSBBUlJBWScpXG4gICAgICAkLmFqYXgoe1xuICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvQ2FtcGFpZ24vJyt0aGlzcy5wcm9wcy5zZWxlY3RlZENhbXBhaWduLm9iamVjdElkLFxuICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgZm9sbG93dXBzOiB7XG4gICAgICAgICAgICBfX29wIDogJ1JlbW92ZScsXG4gICAgICAgICAgICBvYmplY3RzOiBbYXBwQ29uZmlnLnBvaW50ZXIoJ0ZvbGxvd3VwJywgaWQpXVxuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7IGNvbnNvbGUubG9nKHJlcykgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkgeyB9XG4gICAgICB9KVxuICAgIH1cbiAgfSxcblxuICBzZXRDdXJyZW50QmF0Y2g6IGZ1bmN0aW9uKGN1cnJlbnRCYXRjaCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2N1cnJlbnRCYXRjaDogY3VycmVudEJhdGNofSlcbiAgfSxcblxuICBzZXRDdXJyZW50VGVtcGxhdGU6IGZ1bmN0aW9uKHRlbXBsYXRlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudFRlbXBsYXRlOiB0ZW1wbGF0ZSB9KVxuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5kYXRhID0gcmVxdWlyZSgnLi4vbGliL2RhdGEubWluLmpzJykgXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIGZyZWUgdHJpYWxcbiAgb3BlbjogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ29wZW4nKVxuICAgIGhhbmRsZXIub3Blbih7XG4gICAgICBuYW1lOiAnQ3VzdG9tZXJvJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnR2V0IDkwMCBmcmVlIGVtYWlsIGNyZWRpdHMhJyxcbiAgICAgIGFtb3VudDogMCxcbiAgICAgIHBhbmVsTGFiZWw6IFwiU3RhcnQgWW91ciBGcmVlIFRyaWFsIVwiLFxuICAgICAgb3BlbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCQoJy5jbG9zZScpKVxuICAgICAgICAkKCcuY2xvc2UnKS5oaWRlKClcbiAgICAgIH0sXG4gICAgICBjbG9zZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImNsb3NlZFwiKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAkKCdib2R5JykuY3NzKHtvdmVyZmxvdzonaGlkZGVuJ30pXG5cblxuICAgIC8vY29uc29sZS5sb2codGhpcy5nZXRET01Ob2RlKCkpXG4gICAgLypcbiAgICAkKHRoaXMuZ2V0RE9NTm9kZSgpKS5hcHBlbmQoJyA8Zm9ybSBhY3Rpb249XCJcIiBtZXRob2Q9XCJQT1NUXCI+IDxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9jaGVja291dC5zdHJpcGUuY29tL2NoZWNrb3V0LmpzXCIgY2xhc3M9XCJzdHJpcGUtYnV0dG9uXCIgZGF0YS1rZXk9XCJwa190ZXN0XzRUNVBmdGw0aG8wRWdGVm8xRzdPS1JkYVwiIGRhdGEtYW1vdW50PVwiMjAwMFwiIGRhdGEtbmFtZT1cIkRlbW8gU2l0ZVwiIGRhdGEtZGVzY3JpcHRpb249XCIyIHdpZGdldHMgKCQyMC4wMClcIiBkYXRhLWltYWdlPVwiXCI+IDwvc2NyaXB0PiA8L2Zvcm0+JylcblxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCQoJy5zdHJpcGUtYnV0dG9uLWVsJykuaHRtbCgpKVxuICAgICQoJy5zdHJpcGUtYnV0dG9uLWVsJykuY2xpY2soKVxuXG4gIH0sIDQwMClcbiovXG5cbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkgeyBcbiAgZGF0YSA9IGRhdGEoKVxuICAgIGltZ3NfMSA9IFtdXG4gICAgaW1nc18yID0gW11cbiAgICBmb3IoaT0wO2kgPCAxMjA7IGkrKykge1xuICAgICAgaW1nc18xLnB1c2goUmVhY3QuRE9NLmltZyh7c3JjOiBkYXRhW2ldLCBjbGFzc05hbWU6IFwicHJvc3BlY3QtaW1nXCJ9KSlcbiAgICB9XG4gICAgZm9yKGk9MTU7aSA8IDMwOyBpKyspIHtcbiAgICAgIGltZ3NfMi5wdXNoKFJlYWN0LkRPTS5pbWcoe3NyYzogZGF0YVtpXSwgY2xhc3NOYW1lOiBcInByb3NwZWN0LWltZ1wifSkpXG4gICAgfVxuXG4gIGNvbnNvbGUubG9nKGRhdGEpXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJzaWdudXBcIn0sIFwiIFwiKSwgXG5cbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICAgIFJlYWN0LkRPTS5oMSh7Y2xhc3NOYW1lOiBcInRpdGxlXCJ9LCBcIkN1c3RvbWVyby5cIiksIFxuICAgICAgICBSZWFjdC5ET00uaDUoe2NsYXNzTmFtZTogXCJ0YWdsaW5lXCJ9LCBcIkdldCA5MDAgZnJlZSBlbWFpbCBjcmVkaXRzLiAxMDAlIHJlZnVuZCBndWFyYW50ZWUuICBXZSB3aWxsIG9ubHkgc3RhcnQgY2hhcmdpbmcgeW91ciBjYXJkIGFmdGVyIDEgbW9udGguXCIpXG5cbiAgICAgICksIFxuXG4gICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJcIiwgc3R5bGU6IHtwb3NpdGlvbjonYWJzb2x1dGUnLHpJbmRleDonLTInLHRvcDowLGxlZnQ6MH19LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIlwiLCBzdHlsZToge21hcmdpbkxlZnQ6MzR9fSwgXG4gICAgICAgIGltZ3NfMSwgXG4gICAgICAgIGltZ3NfMlxuICAgICAgICApXG4gICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBTcGlubmVyXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJob3JpemFudGFsLXNwaW5uZXJcIn0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiaG96LWJvdW5jZTFcIn0pLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImhvei1ib3VuY2UyXCJ9KSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJob3otYm91bmNlM1wifSlcbiAgICAgIClcbiAgICApXG4gIH1cbn0pXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gTGFuZGluZyBQYWdlXG4gIGxvZ2luOiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnbG9naW4nKVxuICAgIGVtYWlsID0gJCgnI2VtYWlsJykudmFsKClcbiAgICBwYXNzd29yZCA9ICQoJyNwYXNzd29yZCcpLnZhbCgpXG4gICAgcCA9IHtcIlgtUGFyc2UtQXBwbGljYXRpb24tSWRcIjogXCJOODVRT2t0ZUVFUWt1WlZKS0F2dDhNVmVzMHNqRzZxTnBFR3FRRlZKXCIsXG4gICAgICAgICBcIlgtUGFyc2UtUkVTVC1BUEktS2V5XCI6IFwiVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYlwifVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2xvZ2luJyxcbiAgICAgIGhlYWRlcnM6IHAsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgZGF0YToge1xuICAgICAgICAndXNlcm5hbWUnOmVtYWlsLFxuICAgICAgICAncGFzc3dvcmQnOnBhc3N3b3JkXG4gICAgICB9LFxuICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1cnJlbnRVc2VyJywgSlNPTi5zdHJpbmdpZnkocmVzKSlcbiAgICAgICAgbG9jYXRpb24uaHJlZiA9IFwiI1wiXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAkKCdib2R5JykuY3NzKHtvdmVyZmxvdzonYXV0byd9KVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJcIn0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYmFja2dyb3VuZC1pbWFnZVwifSksIFxuICAgICAgICBSZWFjdC5ET00ubmF2KHtjbGFzc05hbWU6IFwidGhlbmF2YmFyIG5hdmJhciBuYXZiYXItZGVmYXVsdCBuYXZiYXItZml4ZWQtdG9wXCIsIHJvbGU6IFwibmF2aWdhdGlvblwiLCBzdHlsZToge3BhZGRpbmc6NzB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lci1mbHVpZFwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcInRoZS10aXRsZSB0ay1mb2NvIGJyYW5kIG5hdmJhci1icmFuZFwiLCBzdHlsZToge2ZvbnRXZWlnaHQ6JzEwMCd9LCBcbiAgICAgICAgICAgICAgICBocmVmOiBcIiNcIn0sIFxuICAgICAgICAgICAgICBcIkN1c3RvbWVyb1wiLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7Zm9udFNpemU6JzIycHgnLG1hcmdpbkxlZnQ6JzMwcHgnfX0sIFwiU3VwZXJjaGFyZ2UgeW91ciBzYWxlcyEgXCIpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiI2xvZ2luXCIsIGNsYXNzTmFtZTogXCJidG4tbGcgYnRuIGxvZ2luLWJ0blwifSwgXCJMb2cgSW5cIilcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtMTJcIiwgc3R5bGU6IHttYXJnaW5Ub3A6JzEwMHB4JyxwYWRkaW5nVG9wOicxMDBweCd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmgxKHtzdHlsZToge2NvbG9yOicjMWNhM2ZkJyxmb250V2VpZ2h0Oidib2xkJyx0ZXh0QWxpZ246J2NlbnRlcicsZm9udFNpemU6JzU2cHgnfX0sIFwiIEdlbmVyYXRlIEhpZ2ggUXVhbGl0eSBQcm9zcGVjdCBMaXN0cyBcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oMSh7c3R5bGU6IHtjb2xvcjonIzFjYTNmZCcsZm9udFdlaWdodDonMTAwJyx0ZXh0QWxpZ246J2NlbnRlcicsZm9udFNpemU6JzU2cHgnfX0sIFwiIEFjY2VsZXJhdGUgU2FsZXMgXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCIjc2lnbnVwXCIsIGNsYXNzTmFtZTogXCJidG4tbGcgYnRuLXN1Y2Nlc3MgYnRuIHN0YXJ0LXRyaWFsXCJ9LCBcIlN0YXJ0IFlvdXIgRnJlZSBUcmlhbCBUb2RheVwiKSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwgcGFuZWwtZGVmYXVsdFwiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1oZWFkaW5nXCJ9LCBcIsKgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1ib2R5XCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmZvcm0oe29uU3VibWl0OiB0aGlzLmxvZ2lufSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7cGxhY2Vob2xkZXI6IFwiRW1haWxcIiwgaWQ6IFwiZW1haWxcIiwgdHlwZTogXCJ0ZXh0XCIsIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgaW5wdXQtbGdcIiwgc3R5bGU6IHtmb250V2VpZ2h0OicxMDAnLGZvbnRTaXplOicyMnB4J319KSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7cGxhY2Vob2xkZXI6IFwiUGFzc3dvcmRcIiwgdHlwZTogXCJwYXNzd29yZFwiLCBpZDogXCJwYXNzd29yZFwiLCBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGlucHV0LWxnXCIsIHN0eWxlOiB7Zm9udFdlaWdodDonMTAwJyxmb250U2l6ZTonMjJweCd9fSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLmxvZ2luLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1sZ1wiLCBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJyxiYWNrZ3JvdW5kQ29sb3I6JyMxY2EzZmQnfX0sIFwiTG9nIEluXCIpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1mb290ZXJcIn0sIFwiwqBcIilcbiAgICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZ3JhZGllbnRcIn0sIFwiIFwiKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbnZhciBNYXJrZXRpbmdGb290ZXIgPSByZXF1aXJlKCcuL21hcmtldGluZ19mb290ZXIuanMubWluLmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIExhbmRpbmcgUGFnZVxuICBsb2dpbjogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2xvZ2luJylcbiAgICBlbWFpbCA9ICQoJyNlbWFpbCcpLnZhbCgpXG4gICAgcGFzc3dvcmQgPSAkKCcjcGFzc3dvcmQnKS52YWwoKVxuICAgIHAgPSB7XCJYLVBhcnNlLUFwcGxpY2F0aW9uLUlkXCI6IFwiTjg1UU9rdGVFRVFrdVpWSktBdnQ4TVZlczBzakc2cU5wRUdxUUZWSlwiLFxuICAgICAgICAgXCJYLVBhcnNlLVJFU1QtQVBJLUtleVwiOiBcIlZONkV3VnlCWndPMXVwaHNCUHNhdTh0N0pRUnAwMFVNM0tZc2lpUWJcIn1cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9sb2dpbicsXG4gICAgICBoZWFkZXJzOiBwLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgJ3VzZXJuYW1lJzplbWFpbCxcbiAgICAgICAgJ3Bhc3N3b3JkJzpwYXNzd29yZFxuICAgICAgfSxcbiAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50VXNlcicsIEpTT04uc3RyaW5naWZ5KHJlcykpXG4gICAgICAgIGxvY2F0aW9uLmhyZWYgPSBcIiNcIlxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgcGFydGljbGVzKClcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICQoJ2JvZHknKS5jc3Moe292ZXJmbG93OidhdXRvJ30pXG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhcnRpY2xlcy1qc1wiLCBpZDogXCJwYXJ0aWNsZXMtanNcIn0sIFxuICAgICAgICBSZWFjdC5ET00ubmF2KHtjbGFzc05hbWU6IFwidGhlbmF2YmFyIG5hdmJhciBuYXZiYXItZGVmYXVsdFwiLCByb2xlOiBcIm5hdmlnYXRpb25cIiwgc3R5bGU6IHtwYWRkaW5nOjcwfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb250YWluZXItZmx1aWRcIiwgc3R5bGU6IHtmb250RmFtaWx5Oidwcm94aW1hLW5vdmEnLCBmb250U2l6ZToxMn19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcIiNcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmltZyh7Y2xhc3NOYW1lOiBcIlwiLCBzcmM6IFwiYnVpbGQvaW1nL2Z1bGwtbG9nby01LnBuZ1wiLCBzdHlsZToge3dpZHRoOjIyMH19KVxuICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJuYXYgbmF2LXBpbGxzIGxhbmRpbmctcGFnZS1uYXZcIiwgcm9sZTogXCJ0YWJsaXN0XCIsIHN0eWxlOiB7bWFyZ2luUmlnaHQ6MCxmb250U2l6ZToxMSxtYXJnaW5Ub3A6LTcwfX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcImxhbmRpbmctcGFnZS1uYXYtdGFiXCIsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snfSwgaHJlZjogXCIjbG9naW5cIn0sIFwiTE9HSU5cIikpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJsYW5kaW5nLXBhZ2UtbmF2LXRhYlwiLCBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJ30sIGhyZWY6IFwiaHR0cDovL3Jlc291cmNlcy5jdXN0b21lcm9ocS5jb20vdjEuMC9ibG9nXCJ9LCBcIkJMT0dcIikpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJsYW5kaW5nLXBhZ2UtbmF2LXRhYlwiLCBocmVmOiBcImh0dHA6Ly9yZXNvdXJjZXMuY3VzdG9tZXJvaHEuY29tXCJ9LCBcIlJFU09VUkNFU1wiKSksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcImxhbmRpbmctcGFnZS1uYXYtdGFiXCIsIGhyZWY6IFwiaHR0cDovL3Jlc291cmNlcy5jdXN0b21lcm9ocS5jb20vdjEuMC9kaXNjdXNzXCJ9LCBcIktOT1dMRURHRSBCQVNFXCIpKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtjbGFzc05hbWU6IFwibGFuZGluZy1wYWdlLW5hdi10YWJcIiwgaHJlZjogXCIjXCJ9LCBcIisxOTA1LTYxNi03NjAyIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBob25lXCJ9KSkpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCIjc2lnbnVwXCIsIGNsYXNzTmFtZTogXCJidG4tbGcgYnRuIGxvZ2luLWJ0blwiLCBzdHlsZToge2ZvbnRGYW1pbHk6J3Byb3hpbWEtbm92YSd9fSwgXCJUUlkgSVRcIiksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJuYXYgbmF2LXBpbGxzIGxhbmRpbmctcGFnZS1uYXZcIiwgcm9sZTogXCJ0YWJsaXN0XCIsIHN0eWxlOiB7d2lkdGg6NjAwLGZvbnRTaXplOjEzLG1hcmdpblJpZ2h0OjEwMCxtYXJnaW5Ub3A6LTQ1fX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHt3aWR0aDonMjQlJyx0ZXh0QWxpZ246J2NlbnRlcicsZGlzcGxheTonYmxvY2snfX0sIFwiwqBcIiksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHt3aWR0aDonMjQlJyx0ZXh0QWxpZ246J2NlbnRlcicsZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcImxhbmRpbmctcGFnZS1uYXYtdGFiIGxwLWJvdHRvbS1uYXZcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9LCBocmVmOiBcIiNcIn0sIFwiUFJPRFVDVFwiKSksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHt3aWR0aDonMjQlJyx0ZXh0QWxpZ246J2NlbnRlcicsZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcImxhbmRpbmctcGFnZS1uYXYtdGFiIGxwLWJvdHRvbS1uYXZcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9LCBocmVmOiBcIiNcIn0sIFwiREFUQVwiKSksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHt3aWR0aDonMjQlJyx0ZXh0QWxpZ246J2NlbnRlcid9fSwgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJsYW5kaW5nLXBhZ2UtbmF2LXRhYiBscC1ib3R0b20tbmF2XCIsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snfSwgaHJlZjogXCIjcHJvZHVjdC9mZWF0dXJlc1wifSwgXCJGRUFUVVJFU1wiKSksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHt3aWR0aDonMjQlJyx0ZXh0QWxpZ246J2NlbnRlcicsZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcImxhbmRpbmctcGFnZS1uYXYtdGFiIGxwLWJvdHRvbS1uYXZcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9LCBocmVmOiBcIiNcIn0sIFwiSU5URUdSQVRJT05TXCIpKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtzdHlsZToge3dpZHRoOicyNCUnLHRleHRBbGlnbjonY2VudGVyJ319LCBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcImxhbmRpbmctcGFnZS1uYXYtdGFiIGxwLWJvdHRvbS1uYXZcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9LCBocmVmOiBcIiNwcmljaW5nXCJ9LCBcIlBSSUNJTkdcIikpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe3N0eWxlOiB7d2lkdGg6JzI0JScsdGV4dEFsaWduOidjZW50ZXInfX0sIFJlYWN0LkRPTS5hKHtjbGFzc05hbWU6IFwibGFuZGluZy1wYWdlLW5hdi10YWIgbHAtYm90dG9tLW5hdlwiLCBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJ30sIGhyZWY6IFwiI3NlcnZpY2VzXCJ9LCBcIlNFUlZJQ0VTXCIpKVxuICAgICAgICAgICAgICApXG4gICAgICAgICksIFxuXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJyb3dcIiwgc3R5bGU6IHttYXJnaW46MH19LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImdyYWRpZW50LTJcIn0pLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInRoZS1iYWNrZ3JvdW5kLWltYWdlXCJ9KSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtMTIgY29sLXNtLTEyXCIsIHN0eWxlOiB7cGFkZGluZ1RvcDonODBweCd9LCBpZDogXCJcIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oMSh7c3R5bGU6IHtjb2xvcjonIzFjYTNmZCcsZm9udFdlaWdodDonMTAwJyxjb2xvcjond2hpdGUnLHRleHRBbGlnbjonY2VudGVyJyxmb250U2l6ZTonMzhweCcsZm9udEZhbWlseTonT3BlbiBTYW5zJyxmb250U2l6ZTonNDBweCd9fSwgXG4gICAgICAgICAgICBcIkdlbmVyYXRlIEhpZ2ggUXVhbGl0eSBQcm9zcGVjdCBMaXN0c1wiIFxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oMSh7c3R5bGU6IHtjb2xvcjonIzFjYTNmZCcsZm9udFdlaWdodDonMTAwJyx0ZXh0QWxpZ246J2NlbnRlcicsY29sb3I6J3doaXRlJyxmb250U2l6ZTonNDZweCcsZm9udEZhbWlseTonT3BlbiBTYW5zJywgZm9udFN0eWxlOidpdGFsaWMnfX0sIFxuICAgICAgICAgICAgXCJGaW5kIE5ldyBDdXN0b21lcnMgRmFzdGVyXCJcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCIjc2lnbnVwXCIsIGNsYXNzTmFtZTogXCJidG4tbGcgYnRuLXN1Y2Nlc3MgYnRuIHN0YXJ0LXRyaWFsXCIsIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXCJTdGFydCBZb3VyIEZyZWUgVHJpYWwgVG9kYXlcIiksIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsIHBhbmVsLWRlZmF1bHRcIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtaGVhZGluZ1wifSwgXCLCoFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtYm9keVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5mb3JtKHtvblN1Ym1pdDogdGhpcy5sb2dpbn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3BsYWNlaG9sZGVyOiBcIkVtYWlsXCIsIGlkOiBcImVtYWlsXCIsIHR5cGU6IFwidGV4dFwiLCBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGlucHV0LWxnXCIsIHN0eWxlOiB7Zm9udFdlaWdodDonMTAwJyxmb250U2l6ZTonMjJweCd9fSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3BsYWNlaG9sZGVyOiBcIlBhc3N3b3JkXCIsIHR5cGU6IFwicGFzc3dvcmRcIiwgaWQ6IFwicGFzc3dvcmRcIiwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBpbnB1dC1sZ1wiLCBzdHlsZToge2ZvbnRXZWlnaHQ6JzEwMCcsZm9udFNpemU6JzIycHgnfX0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcblxuICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLmxvZ2luLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1sZ1wiLCBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJyxiYWNrZ3JvdW5kQ29sb3I6JyMxY2EzZmQnfX0sIFwiTG9nIEluXCIpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1mb290ZXJcIn0sIFwiwqBcIiksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwidGhlLWdyYWRpZW50LTFcIn0pXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApLCBcblxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyIHByb2R1Y3QtaGVhZGVyIGNocm9tZS1iYXJcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHtoZWlnaHQ6MTAwLHBhZGRpbmdUb3A6NDUsIG1hcmdpblRvcDoxMTN9fSwgXG4gICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC00XCIsIHN0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInLGZvbnRGYW1pbHk6J3Byb3hpbWEtbm92YScsIGZvbnRTaXplOjEyfX0sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbGluZS1jaGFydFwifSksIFwiwqBHUk9XIFBJUEVMSU5FIEZBU1RcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtNFwiLCBzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyxmb250RmFtaWx5Oidwcm94aW1hLW5vdmEnLCBmb250U2l6ZToxMn19LCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXNlYXJjaFwifSksIFwiwqBJREVOVElGWSBISUdILVZBTFVFIFBST1NQRUNUU1wiKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC00XCIsIHN0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInLGZvbnRGYW1pbHk6J3Byb3hpbWEtbm92YScsIGZvbnRTaXplOjEyfX0sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY29mZmVlXCJ9KSwgXCLCoENPTk5FQ1QgV0lUSCBERUNJU0lPTiBNQUtFUlMgIFwiKVxuICAgICAgICApLCBcblxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lclwiLCBzdHlsZToge2ZvbnRGYW1pbHk6J29wZW4tc2Fucyd9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJyb3dcIiwgc3R5bGU6IHtoZWlnaHQ6MzAwfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtb2Zmc2V0LTEgY29sLW1kLTZcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmgxKHtzdHlsZToge2NvbG9yOidyZ2IoMCwgMTMyLCAyNTUpJ319LCBcIiBHcm93IFBpcGVsaW5lIEZhc3RcIiksIFwiIFwiLCBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg1KHtzdHlsZToge2ZvbnRXZWlnaHQ6MTAwLGxpbmVIZWlnaHQ6MS43LCBmb250U3R5bGU6J2l0YWxpYyd9fSwgXG4gICAgICAgICAgICAgIFwiQXV0b21hdGUgbGlzdCBidWlsZGluZyB0aHJvdWdoIHRoZSBwb3dlciBvZiBzb2NpYWwgbmV0d29ya3MgYW5kIHN5bmMgY29udGFjdCBpbmZvcm1hdGlvbiBkaXJlY3RseSB0byB5b3VyIENSTVwiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNSh7Y2xhc3NOYW1lOiBcInRleHQtbXV0ZWRcIiwgc3R5bGU6IHtmb250V2VpZ2h0OjEwMCxsaW5lSGVpZ2h0OjEuN319LCBcbiAgICAgICAgICAgICAgXCIgQ3VzdG9tZXJvIHNlYXJjaGVzIHRocm91Z2ggc29jaWFsIHByb2ZpbGVzIG9uIHRoZSB3ZWIgdG8gZmluZCB5b3UgdGhlIGV4YWN0IHByb3NwZWN0cyB5b3UncmUgbG9va2luZyBmb3IuIEFkZCBwcm9zcGVjdHMgdG8gbGlzdHMgd2l0aCBvbmUgY2xpY2suIE9uY2UgeW91IGhhdmUgeW91ciBsaXN0IHlvdSBjYW4gc3RhcnQgcXVhbGlmeWluZyBsZWFkcyBhbmQgdHJhY2tpbmcgZG93biBuZXcgbGVhZHMuXCJcbiAgICAgICAgICAgIClcblxuICAgICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTRcIn0sIFwiIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWxpbmUtY2hhcnQgbHAtaWNvblwifSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0xXCJ9LCBcIsKgXCIpXG4gICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKSwgXG5cbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7Ym9yZGVyQm90dG9tOiAnMXB4IHNvbGlkICNlY2VkZWUnLCBib3JkZXJUb3A6ICcxcHggc29saWQgI2VjZWRlZScsIGJhY2tncm91bmRDb2xvcjonI2Y1ZjdmOScsZm9udEZhbWlseTonb3Blbi1zYW5zJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lclwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInJvd1wiLCBzdHlsZToge2hlaWdodDozMDB9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTQgY29sLW1kLW9mZnNldC0xXCJ9LCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXNlYXJjaCBscC1pY29uXCJ9KSwgXCIgIFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTZcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmgxKHtzdHlsZToge2NvbG9yOidyZ2IoMCwgMTMyLCAyNTUpJ319LCBcbiAgICAgICAgICAgICAgXCJJZGVudGlmeSBIaWdoLVZhbHVlIFByb3NwZWN0cyBJbiBSZWFsIFRpbWVcIlxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDUoe3N0eWxlOiB7Zm9udFdlaWdodDoxMDAsbGluZUhlaWdodDoxLjcsIGZvbnRTdHlsZTonaXRhbGljJ319LCBcIiBcIiwgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgICAgXCJDdXN0b21lcm8gdHJhY2tzIG92ZXIgMiBtaWxsaW9uIFVTLCBDYW5hZGlhbiBhbmQgSW50ZXJuYXRpb25hbCBjb21wYW5pZXMgYW5kIG91ciBkYXRhYmFzZSBpcyBncm93aW5nIGRhaWx5LlwiIFxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDUoe2NsYXNzTmFtZTogXCJ0ZXh0LW11dGVkXCIsIHN0eWxlOiB7Zm9udFdlaWdodDoxMDAsIGxpbmVIZWlnaHQ6MS43fX0sIFxuICAgICAgICAgIFwiQ3VzdG9tZXJvIHNpdHMgYXQgdGhlIHRvcCBvZiB5b3VyIHNhbGVzIGZ1bm5lbCwgcHJvYWN0aXZlbHkgaWRlbnRpZnlpbmcgYW5kIGRlbGl2ZXJpbmcgaGlnaCB2YWx1ZSBwcm9zcGVjdHMuIFRoaXMgZW5hYmxlcyB5b3UgdG8gYmUgZmlyc3QgdG8gY2FsbCBvbiBhIHByb3NwZWN0IHdpdGggYSBoaWdoIHF1YWxpdHkgc2lnbmFsIC0gc3VjaCBhcyBmdW5kaW5nLCBwcm9kdWN0IGxhdW5jaCwgaGlyaW5nLCBvciBqb2IgcG9zdGluZyBhbmQgbWFueSBvdGhlcnMuXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0xXCJ9LCBcIsKgXCIpXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApLCBcblxuICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtmb250RmFtaWx5OidvcGVuLXNhbnMnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb250YWluZXJcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInJvd1wiLCBzdHlsZToge2hlaWdodDozMDB9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtNiBjb2wtbWQtb2Zmc2V0LTFcIn0sIFwiIFwiLCBSZWFjdC5ET00uaDEoe3N0eWxlOiB7Y29sb3I6J3JnYigwLCAxMzIsIDI1NSknfX0sIFwiQ29ubmVjdCBXaXRoIERlY2lzaW9uIE1ha2VycyBcIiksIFwiIFwiLCBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNSh7c3R5bGU6IHtmb250V2VpZ2h0OjEwMCxsaW5lSGVpZ2h0OjEuNywgZm9udFN0eWxlOidpdGFsaWMnfX0sIFxuICAgICAgICAgICAgICAgICAgXCJDcmVhdGUgaHlwZXItdGFyZ2V0ZWQgZW1haWwgY2FtcGFpZ25zIHVzaW5nIG91ciBkYXRhLWRyaXZlbiBzYWxlcyBhdXRvbWF0aW9uIHBsYXRmb3JtLlwiXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg1KHtzdHlsZToge2ZvbnRXZWlnaHQ6MTAwLGxpbmVIZWlnaHQ6MS43fSwgY2xhc3NOYW1lOiBcInRleHQtbXV0ZWRcIn0sIFxuICAgICAgICAgICAgICAgICAgXCIgV2l0aCBDdXN0b21lcm8gU2FsZXMgVHJhY2tpbmcsIFRlbXBsYXRlcyBhbmQgQW5hbHl0aWNzLCBwdXQgdGhlIG1vc3QgcG93ZXJmdWwgc2FsZXMgYWNjZWxlcmF0aW9uIHBsYXRmb3JtIHRvIHdvcmsgZm9yIHlvdSBhbmQgeW91ciB0ZWFtLlwiXG4gICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTRcIn0sIFwiIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNvZmZlZSBscC1pY29uXCJ9KSwgXCIgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtMVwifSwgXCLCoFwiKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICksIFxuXG4gICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2JvcmRlckJvdHRvbTogJzFweCBzb2xpZCAjZWRlZWVmJywgYm9yZGVyVG9wOiAnMXB4IHNvbGlkICNlZGVlZWYnLCBcbiAgICAgICAgICAgICAgICAgICBwYWRkaW5nVG9wOjUwLCBiYWNrZ3JvdW5kQ29sb3I6JyNmNWY4ZmEnfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicm93XCIsIHN0eWxlOiB7aGVpZ2h0OjIwMCwgdGV4dEFsaWduOidjZW50ZXInfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmgyKG51bGwsIFwiR2l2ZSBDdXN0b21lcm8gYSB0cnkuIEZyZWUgMTQtZGF5IHRyaWFsIGF2YWlsYWJsZSBmb3IgYWxsIHBsYW5zLlwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiI3NpZ251cFwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1sZyBzdGFydC10cmlhbFwiLCBzdHlsZToge21hcmdpblRvcDoxMH19LCBcbiAgICAgICAgICAgICAgXCJTVEFSVCBBIE5PLVJJU0sgRlJFRSBUUklBTCDCoFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZXZyb24tcmlnaHRcIiwgc3R5bGU6IHtmb250U2l6ZToxOH19KVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKSwgXG5cbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzOiBcInRtcC1mb290ZXJcIn0pXG5cbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG52YXIgTWFya2V0aW5nRm9vdGVyID0gcmVxdWlyZSgnLi9tYXJrZXRpbmdfZm9vdGVyLmpzLm1pbi5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFydGljbGVzLWpzXCIsIGlkOiBcInBhcnRpY2xlcy1qc1wifSwgXG4gICAgICAgIFJlYWN0LkRPTS5uYXYoe2NsYXNzTmFtZTogXCJ0aGVuYXZiYXIgbmF2YmFyIG5hdmJhci1kZWZhdWx0XCIsIHJvbGU6IFwibmF2aWdhdGlvblwiLCBzdHlsZToge3BhZGRpbmc6NzB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lci1mbHVpZFwiLCBzdHlsZToge2ZvbnRGYW1pbHk6J3Byb3hpbWEtbm92YScsIGZvbnRTaXplOjEyfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiI1wifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaW1nKHtjbGFzc05hbWU6IFwiXCIsIHNyYzogXCJidWlsZC9pbWcvZnVsbC1sb2dvLTUucG5nXCIsIHN0eWxlOiB7d2lkdGg6MjIwfX0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcIm5hdiBuYXYtcGlsbHMgbGFuZGluZy1wYWdlLW5hdlwiLCByb2xlOiBcInRhYmxpc3RcIiwgc3R5bGU6IHttYXJnaW5SaWdodDowLGZvbnRTaXplOjExLG1hcmdpblRvcDotNzB9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtjbGFzc05hbWU6IFwibGFuZGluZy1wYWdlLW5hdi10YWJcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9LCBocmVmOiBcIiNcIn0sIFwiTE9HSU5cIikpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJsYW5kaW5nLXBhZ2UtbmF2LXRhYlwiLCBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJ30sIGhyZWY6IFwiI1wifSwgXCJCTE9HXCIpKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtjbGFzc05hbWU6IFwibGFuZGluZy1wYWdlLW5hdi10YWJcIiwgaHJlZjogXCIjcHJpY2luZ1wifSwgXCJSRVNPVVJDRVNcIikpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJsYW5kaW5nLXBhZ2UtbmF2LXRhYlwiLCBocmVmOiBcIiNwcmljaW5nXCJ9LCBcIktOT1dMRURHRSBCQVNFXCIpKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtjbGFzc05hbWU6IFwibGFuZGluZy1wYWdlLW5hdi10YWJcIiwgaHJlZjogXCIjcHJpY2luZ1wifSwgXCIrMTkwNS02MTYtNzYwMiBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1waG9uZVwifSkpKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiI3NpZ251cFwiLCBjbGFzc05hbWU6IFwiYnRuLWxnIGJ0biBsb2dpbi1idG5cIiwgc3R5bGU6IHtmb250RmFtaWx5Oidwcm94aW1hLW5vdmEnfX0sIFwiVFJZIElUXCIpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwibmF2IG5hdi1waWxscyBsYW5kaW5nLXBhZ2UtbmF2XCIsIHJvbGU6IFwidGFibGlzdFwiLCBzdHlsZToge3dpZHRoOjYwMCxmb250U2l6ZToxMyxtYXJnaW5SaWdodDoxMDAsbWFyZ2luVG9wOi00NX19LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe3N0eWxlOiB7d2lkdGg6JzI0JScsdGV4dEFsaWduOidjZW50ZXInLGRpc3BsYXk6J2Jsb2NrJ319LCBcIsKgXCIpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe3N0eWxlOiB7d2lkdGg6JzI0JScsdGV4dEFsaWduOidjZW50ZXInLGRpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJsYW5kaW5nLXBhZ2UtbmF2LXRhYiBscC1ib3R0b20tbmF2XCIsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snfSwgaHJlZjogXCIjXCJ9LCBcIlBST0RVQ1RcIikpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe3N0eWxlOiB7d2lkdGg6JzI0JScsdGV4dEFsaWduOidjZW50ZXInLGRpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJsYW5kaW5nLXBhZ2UtbmF2LXRhYiBscC1ib3R0b20tbmF2XCIsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snfSwgaHJlZjogXCIjXCJ9LCBcIkRBVEFcIikpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe3N0eWxlOiB7d2lkdGg6JzI0JScsdGV4dEFsaWduOidjZW50ZXInfX0sIFJlYWN0LkRPTS5hKHtjbGFzc05hbWU6IFwibGFuZGluZy1wYWdlLW5hdi10YWIgbHAtYm90dG9tLW5hdiBhY3RpdmVcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9LCBocmVmOiBcIiNwcm9kdWN0L2ZlYXR1cmVzXCJ9LCBcIkZFQVRVUkVTXCIpKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtzdHlsZToge3dpZHRoOicyNCUnLHRleHRBbGlnbjonY2VudGVyJyxkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtjbGFzc05hbWU6IFwibGFuZGluZy1wYWdlLW5hdi10YWIgbHAtYm90dG9tLW5hdlwiLCBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJ30sIGhyZWY6IFwiI1wifSwgXCJJTlRFR1JBVElPTlNcIikpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe3N0eWxlOiB7d2lkdGg6JzI0JScsdGV4dEFsaWduOidjZW50ZXInfX0sIFJlYWN0LkRPTS5hKHtjbGFzc05hbWU6IFwibGFuZGluZy1wYWdlLW5hdi10YWIgbHAtYm90dG9tLW5hdlwiLCBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJ30sIGhyZWY6IFwiI3ByaWNpbmdcIn0sIFwiUFJJQ0lOR1wiKSksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHt3aWR0aDonMjQlJyx0ZXh0QWxpZ246J2NlbnRlcid9fSwgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJsYW5kaW5nLXBhZ2UtbmF2LXRhYiBscC1ib3R0b20tbmF2XCIsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snfSwgaHJlZjogXCIjc2VydmljZXNcIn0sIFwiU0VSVklDRVNcIikpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJyb3dcIiwgc3R5bGU6IHttYXJnaW46MH19LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImdyYWRpZW50LTJcIn0pLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImZlYXR1cmVzLWJhY2tncm91bmQtaW1hZ2VcIn0pLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0xMiBjb2wtc20tMTJcIiwgc3R5bGU6IHtwYWRkaW5nVG9wOic4MHB4J319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDEoe3N0eWxlOiB7Y29sb3I6JyMxY2EzZmQnLGZvbnRXZWlnaHQ6JzEwMCcsY29sb3I6J3doaXRlJyx0ZXh0QWxpZ246J2NlbnRlcicsZm9udFNpemU6JzM4cHgnLGZvbnRGYW1pbHk6J09wZW4gU2FucycsZm9udFNpemU6JzQwcHgnfX0sIFxuICAgICAgICAgICAgXCJDbG9zZSBtb3JlIGRlYWxzIHdpdGggcG93ZXJmdWwgcHJvc3BlY3RpbmcgZmVhdHVyZXMuXCJcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDEoe3N0eWxlOiB7Y29sb3I6JyMxY2EzZmQnLGZvbnRXZWlnaHQ6JzEwMCcsdGV4dEFsaWduOidjZW50ZXInLGNvbG9yOid3aGl0ZScsZm9udFNpemU6JzQ2cHgnLGZvbnRGYW1pbHk6J09wZW4gU2FucycsIGZvbnRTdHlsZTonaXRhbGljJyxkaXNwbGF5Oidub25lJ319LCBcIiBBY2NlbGVyYXRlIFNhbGVzIFwiKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiI3NpZ251cFwiLCBjbGFzc05hbWU6IFwiYnRuLWxnIGJ0bi1zdWNjZXNzIGJ0biBzdGFydC10cmlhbFwiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFwiU3RhcnQgWW91ciBGcmVlIFRyaWFsIFRvZGF5XCIpLCBcblxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0XCIsIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWhlYWRpbmdcIn0sIFwiwqBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZm9ybSh7b25TdWJtaXQ6IHRoaXMubG9naW59LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHtwbGFjZWhvbGRlcjogXCJFbWFpbFwiLCBpZDogXCJlbWFpbFwiLCB0eXBlOiBcInRleHRcIiwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBpbnB1dC1sZ1wiLCBzdHlsZToge2ZvbnRXZWlnaHQ6JzEwMCcsZm9udFNpemU6JzIycHgnfX0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHtwbGFjZWhvbGRlcjogXCJQYXNzd29yZFwiLCB0eXBlOiBcInBhc3N3b3JkXCIsIGlkOiBcInBhc3N3b3JkXCIsIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgaW5wdXQtbGdcIiwgc3R5bGU6IHtmb250V2VpZ2h0OicxMDAnLGZvbnRTaXplOicyMnB4J319KSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG5cbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgb25DbGljazogdGhpcy5sb2dpbiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4tbGdcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsYmFja2dyb3VuZENvbG9yOicjMWNhM2ZkJ319LCBcIkxvZyBJblwiKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtZm9vdGVyXCJ9LCBcIsKgXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInRoZS1ncmFkaWVudC0xXCJ9KSwgXCIgXCIpXG4gICAgICAgIClcbiAgICAgICksIFxuICAgICAgTWFya2V0aW5nQm9keShudWxsKVxuICAgIClcbiAgICApXG4gIH0sXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnZmVhdHVyZXMnKVxucGFydGljbGVzSlMoJ3BhcnRpY2xlcy1qcycsIHtcbiAgICBwYXJ0aWNsZXM6IHtcbiAgICAgIGNvbG9yOiAnI2ZmZicsXG4gICAgICBzaGFwZTogJ2NpcmNsZScsXG4gICAgICBvcGFjaXR5OiAxLFxuICAgICAgc2l6ZTogMi41LFxuICAgICAgc2l6ZV9yYW5kb206IHRydWUsXG4gICAgICBuYjogMTAwLFxuICAgICAgbGluZV9saW5rZWQ6IHtcbiAgICAgICAgZW5hYmxlX2F1dG86IHRydWUsXG4gICAgICAgIGRpc3RhbmNlOiAyNTAsXG4gICAgICAgIGNvbG9yOiAnI2ZmZicsXG4gICAgICAgIG9wYWNpdHk6IDAuNSxcbiAgICAgICAgd2lkdGg6IDEsXG4gICAgICAgIGNvbmRlbnNlZF9tb2RlOiB7XG4gICAgICAgICAgZW5hYmxlOiBmYWxzZSxcbiAgICAgICAgICByb3RhdGVYOiA2MDAsXG4gICAgICAgICAgcm90YXRlWTogNjAwXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhbmltOiB7XG4gICAgICAgIGVuYWJsZTogdHJ1ZSxcbiAgICAgICAgc3BlZWQ6IDIuNVxuICAgICAgfVxuICAgIH0sXG4gICAgaW50ZXJhY3Rpdml0eToge1xuICAgICAgZW5hYmxlOiB0cnVlLFxuICAgICAgbW91c2U6IHtcbiAgICAgICAgZGlzdGFuY2U6IDI1MFxuICAgICAgfSxcbiAgICAgIGRldGVjdF9vbjogJ2NhbnZhcycsXG4gICAgICBtb2RlOiAnZ3JhYicsXG4gICAgICBsaW5lX2xpbmtlZDoge1xuICAgICAgICBvcGFjaXR5OiAwLjVcbiAgICAgIH0sXG4gICAgICBldmVudHM6IHtcbiAgICAgICAgb25jbGljazoge1xuICAgICAgICAgIHB1c2hfcGFydGljbGVzOiB7XG4gICAgICAgICAgICBlbmFibGU6IHRydWUsXG4gICAgICAgICAgICBuYjogNFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgcmV0aW5hX2RldGVjdDogdHJ1ZVxufSk7XG4kKCdjYW52YXMnKS5jc3Moe1xuICAnd2lkdGgnOiAnMTAwJScsXG4gICdoZWlnaHQnOiAnMzc2cHgnLFxuICAnYmFja2dyb3VuZC1jb2xvcic6ICdyZ2JhKDAsMCwwLDApJyxcbiAgJ3RvcCc6ICcxMjJweCcsXG4gICdwb3NpdGlvbic6ICdhYnNvbHV0ZScsXG59KVxuICAgIFxuICAgIC8qXG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHNjcm9sbCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcbiAgICAgICAgdmFyIHRvcCA9ICQoJy5wcm9kdWN0LWhlYWRlcicpLm9mZnNldCgpLnRvcFxuICAgICAgICBpZihzY3JvbGwgPiB0b3Ape1xuICAgICAgICAgIHBvcyA9ICQoJy5wcm9kdWN0LWhlYWRlcicpLmNzcygncG9zaXRpb24nKVxuICAgICAgICAgIGNvbnNvbGUubG9nKHBvcylcbiAgICAgICAgICBpZihwb3MgIT0gXCJzdGF0aWNcIiB8fCBwb3MgIT0gXCJmaXhlZFwiKXtcbiAgICAgICAgICAgICAgJCgnLnByb2R1Y3QtaGVhZGVyJykuY3NzKHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJmaXhlZFwiLFxuICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICBcInotaW5kZXhcIjogMTAwMDAwMDAwLFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICQoJy5wcm9kdWN0LWhlYWRlcicpLnJlbW92ZUF0dHIoICdzdHlsZScgKTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgKi9cbiAgfVxufSlcblxudmFyIE1hcmtldGluZ0JvZHkgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdNYXJrZXRpbmdCb2R5JyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHttYXJnaW5Ub3A6MTgwLCBmb250RmFtaWx5OidvcGVuLXNhbnMnfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyIHByb2R1Y3QtaGVhZGVyIGNocm9tZS1iYXJcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHtoZWlnaHQ6MTAwLHBhZGRpbmdUb3A6NDUsIGZvbnRGYW1pbHk6J3Byb3hpbWEtbm92YScsIGZvbnRTaXplOjEyLHRleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTJcIn0sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtd2lmaVwifSksIFwiwqBTSUdOQUxTXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTJcIn0sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvdWQtZG93bmxvYWRcIn0pLCBcIsKgTUlOSU5HIEpPQlNcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtMlwifSwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1nbG9iZVwifSksIFwiwqBURVJSSVRPUlkgTUFOQUdFTUVOVFwiKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0yXCJ9LCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXVzZXJzXCJ9KSwgXCLCoFNPQ0lBTCBQUk9TUEVDVCBEQVRBXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTJcIn0sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZW52ZWxvcGVcIn0pLCBcIsKgQ0FNUEFJR05TXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTJcIn0sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZGF0YWJhc2VcIn0pLCBcIsKgQ1JNIElOVEVHUkFUSU9OXCIpXG4gICAgICAgICksIFxuXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInJvd1wiLCBzdHlsZToge2hlaWdodDozMDB9LCBpZDogXCJzaWduYWxzXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTYgY29sLW1kLW9mZnNldC0xXCJ9LCBSZWFjdC5ET00uYnIobnVsbCksIFJlYWN0LkRPTS5icihudWxsKSwgXCIgXCIsIFJlYWN0LkRPTS5oMShudWxsLCBcIiBTaWduYWxzIFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg1KHtzdHlsZToge2ZvbnRXZWlnaHQ6MTAwLGxpbmVIZWlnaHQ6MS43fX0sIFxuICAgICAgICAgICAgXCJZb3VyIHBlcnNvbmFsIHJhZGFyIHN5c3RlbSBmb3Igc2FsZXMgcHJvc3BlY3RpbmcuIFRoZSBtb3JlIGNvbXBhbmllcyB5b3UgZm9sbG93LCB0aGUgbW9yZSB0cmlnZ2VyIGV2ZW50cyB5b3XigJlsbCBmaW5kLCBhbmQgdGhlIG1vcmUgcHJvc3BlY3RzIHlvdeKAmWxsIGhhdmUgaW4geW91ciBzYWxlcyBmdW5uZWwuIFN0YXJ0IHVzaW5nIHNpZ25hbC1iYXNlZCBzZWxsaW5nIHRvIGluY3JlYXNlIHNhbGVzIVwiXG4gICAgICAgICAgKVxuICAgICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTRcIiwgc3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcicscGFkZGluZ1RvcDo4MH19LCBcIiBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS13aWZpIGxwLWljb25cIn0pLCBcIiBcIiksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTFcIn0pXG4gICAgICAgIClcbiAgICAgICksIFxuXG4gICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2JvcmRlckJvdHRvbTogJzFweCBzb2xpZCAjZWNlZGVlJywgYm9yZGVyVG9wOiAnMXB4IHNvbGlkICNlY2VkZWUnLCBiYWNrZ3JvdW5kQ29sb3I6JyNmNWY3ZjknfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicm93XCIsIHN0eWxlOiB7aGVpZ2h0OjMwMH19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtNCBjb2wtbWQtb2Zmc2V0LTFcIiwgc3R5bGU6IHtwYWRkaW5nVG9wOjgwLHRleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG91ZC1kb3dubG9hZCBscC1pY29uXCJ9KSwgXCIgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtNlwifSwgXCIgXCIsIFJlYWN0LkRPTS5icihudWxsKSwgUmVhY3QuRE9NLmJyKG51bGwpLCBSZWFjdC5ET00uaDEobnVsbCwgXCIgTWluaW5nIEpvYnMgXCIpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmg1KHtzdHlsZToge2ZvbnRXZWlnaHQ6MTAwLGxpbmVIZWlnaHQ6MS43fX0sIFxuICAgICAgICAgICAgICBcIkdlbmVyYXRlIGhpZ2hseSBzcGVjaWZpYyBwcm9zcGVjdCBsaXN0cyBpbiBtaW51dGVzIGluc3RlYWQgb2YgZGF5cyB3aXRoIG9uIGRlbWFuZCBzY3JhcGluZyBqb2JzLlwiICsgJyAnICtcbiAgICAgICAgICAgICAgXCJBdXRvbWF0ZSBzZWFyY2ggcXVlcmllcyB0byBmaW5kIGNvbXBhbmllcyBhbmQgdGl0bGVzIHByb3NwZWN0cy5cIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTFcIn0pXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApLCBcblxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJyb3dcIiwgc3R5bGU6IHtoZWlnaHQ6MzAwfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTYgY29sLW1kLW9mZnNldC0xXCJ9LCBSZWFjdC5ET00uYnIobnVsbCksIFJlYWN0LkRPTS5icihudWxsKSwgXCIgXCIsIFJlYWN0LkRPTS5oMShudWxsLCBcIlRlcnJpdG9yeSBNYW5hZ2VtZW50IFwiKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmg1KHtzdHlsZToge2ZvbnRXZWlnaHQ6MTAwLGxpbmVIZWlnaHQ6MS43fX0sIFxuICAgICAgICAgICAgICAgIFwiT3JnYW5pemUgY29tcGFuaWVzIHRoYXQgbWF0Y2ggeW91ciBpZGVhbCBjdXN0b21lciBwcm9maWxlIGJ5IHRlcnJpdG9yeSBhbmRcIiArICcgJyArIFxuICAgICAgICAgICAgICAgIFwiYmUgY29uZmlkZW50IHRoYXQgeW91ciBzYWxlcyByZXBzIGFyZSBub3QgbWlzc2luZyBhIHNpbmdsZSBvcHBvcnR1bml0eS5cIlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC00XCIsIHN0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInLHBhZGRpbmdUb3A6ODB9fSwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZ2xvYmUgbHAtaWNvblwifSksIFwiIFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTFcIn0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgKSwgXG5cbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7Ym9yZGVyQm90dG9tOiAnMXB4IHNvbGlkICNlY2VkZWUnLCBib3JkZXJUb3A6ICcxcHggc29saWQgI2VjZWRlZScsIGJhY2tncm91bmRDb2xvcjonI2Y1ZjdmOSd9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb250YWluZXJcIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJyb3dcIiwgc3R5bGU6IHtoZWlnaHQ6MzAwfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC00IGNvbC1tZC1vZmZzZXQtMVwiLCBzdHlsZToge3BhZGRpbmdUb3A6ODAsdGV4dEFsaWduOidjZW50ZXInfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXVzZXJzIGxwLWljb25cIn0pLCBcIiBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC02XCJ9LCBcIiBcIiwgUmVhY3QuRE9NLmJyKG51bGwpLCBSZWFjdC5ET00uYnIobnVsbCksIFJlYWN0LkRPTS5oMShudWxsLCBcIlNvY2lhbCBQcm9zcGVjdCBEYXRhIFwiKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5oNSh7c3R5bGU6IHtmb250V2VpZ2h0OjEwMCxsaW5lSGVpZ2h0OjEuN319LCBcbiAgICAgICAgICAgICAgXCJZb3UgY2FuIHJ1biB5b3VyIHNlYXJjaCBmcm9tIGFueXdoZXJlIG9uIHRoZSB3ZWIgdXNpbmcgb3VyIENocm9tZSBicm93c2VyIGV4dGVuc2lvbi4gU2VhcmNoIGZvciB0aXRsZXMsIGluZHVzdHJ5LCBsb2NhdGlvbiwgc29jaWFsIG5ldHdvcmsgZ3JvdXBzLCBhbmQgbW9yZS4gQnVpbGQgaGlnaGx5IHNwZWNpZmljIGFuZCB0YXJnZXRlZCBzZWFyY2hlcy5cIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTFcIn0pXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApLCBcblxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJyb3dcIiwgc3R5bGU6IHtoZWlnaHQ6MzAwfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTYgY29sLW1kLW9mZnNldC0xXCJ9LCBcIiBcIiwgUmVhY3QuRE9NLmJyKG51bGwpLCBSZWFjdC5ET00uYnIobnVsbCksIFJlYWN0LkRPTS5oMShudWxsLCBcIiBDYW1wYWlnbnMgXCIpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaDUoe3N0eWxlOiB7Zm9udFdlaWdodDoxMDAsbGluZUhlaWdodDoxLjd9fSwgXG4gICAgICAgICAgICAgICAgXCJCdWlsZCB5b3VyIG93biB1bmlxdWUgcHJvY2VzcyBmb3Igc2FsZXMgZGV2ZWxvcG1lbnQgZW1haWxzLCBwaG9uZSBjYWxscywgYW5kIG90aGVyIGFjdGl2aXR5LiBDdXN0b21pemUgZWFjaCBlbWFpbCB3aXRoIHJlZmVyZW5jZXMgdG8gc29jaWFsIHByb2ZpbGVzLCBibG9ncywgb3Igc3BlY2lmaWMgaW50ZXJlc3RzLlwiXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTRcIiwgc3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcicscGFkZGluZ1RvcDo4MH19LCBcIiBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1lbnZlbG9wZSBscC1pY29uXCJ9KSwgXCIgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtMVwifSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICApLCBcblxuICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtib3JkZXJCb3R0b206ICcxcHggc29saWQgI2VjZWRlZScsIGJvcmRlclRvcDogJzFweCBzb2xpZCAjZWNlZGVlJywgYmFja2dyb3VuZENvbG9yOicjZjVmN2Y5J319LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lclwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInJvd1wiLCBzdHlsZToge2hlaWdodDozMDB9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTQgY29sLW1kLW9mZnNldC0xXCIsIHN0eWxlOiB7cGFkZGluZ1RvcDo4MCx0ZXh0QWxpZ246J2NlbnRlcid9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZGF0YWJhc2UgbHAtaWNvblwifSksIFwiIFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTZcIn0sIFwiIFwiLCBSZWFjdC5ET00uYnIobnVsbCksIFJlYWN0LkRPTS5icihudWxsKSwgUmVhY3QuRE9NLmgxKG51bGwsIFwiIENSTSBJbnRlZ3JhdGlvbiBcIiksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaDUoe3N0eWxlOiB7Zm9udFdlaWdodDoxMDAsbGluZUhlaWdodDoxLjd9fSwgXG4gICAgICAgICAgICAgIFwiRW5qb3kgTmF0aXZlIEludGVncmF0aW9uIHdpdGggYWxsIE1ham9yIENSTXNcIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTFcIn0pXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApLCBcblxuICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtib3JkZXJCb3R0b206ICcxcHggc29saWQgI2VkZWVlZicsIGJvcmRlclRvcDogJzFweCBzb2xpZCAjZWRlZWVmJywgXG4gICAgICAgICAgICAgICAgICAgcGFkZGluZ1RvcDo1MCwgYmFja2dyb3VuZENvbG9yOicjZjVmOGZhJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lclwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInJvd1wiLCBzdHlsZToge2hlaWdodDoyMDAsIHRleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oMihudWxsLCBcIkdpdmUgQ3VzdG9tZXJvIGEgdHJ5LiBGcmVlIDE0LWRheSB0cmlhbCBhdmFpbGFibGUgZm9yIGFsbCBwbGFucy5cIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcIiNzaWdudXBcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4tbGcgc3RhcnQtdHJpYWxcIiwgc3R5bGU6IHttYXJnaW5Ub3A6MTB9fSwgXG4gICAgICAgICAgICAgIFwiU1RBUlQgQSBOTy1SSVNLIEZSRUUgVFJJQUwgwqBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jaGV2cm9uLXJpZ2h0XCIsIHN0eWxlOiB7Zm9udFNpemU6MTh9fSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG5cbiAgICApXG4gIH1cbn0pXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cbnZhciBNYXJrZXRpbmdGb290ZXIgPSByZXF1aXJlKCcuL21hcmtldGluZ19mb290ZXIuanMubWluLmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYXJ0aWNsZXMtanNcIiwgaWQ6IFwicGFydGljbGVzLWpzXCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLm5hdih7Y2xhc3NOYW1lOiBcInRoZW5hdmJhciBuYXZiYXIgbmF2YmFyLWRlZmF1bHRcIiwgcm9sZTogXCJuYXZpZ2F0aW9uXCIsIHN0eWxlOiB7cGFkZGluZzo3MH19LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyLWZsdWlkXCIsIHN0eWxlOiB7Zm9udEZhbWlseToncHJveGltYS1ub3ZhJywgZm9udFNpemU6MTJ9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCIjXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbWcoe2NsYXNzTmFtZTogXCJcIiwgc3JjOiBcImJ1aWxkL2ltZy9mdWxsLWxvZ28tNS5wbmdcIiwgc3R5bGU6IHt3aWR0aDoyMjB9fSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwibmF2IG5hdi1waWxscyBsYW5kaW5nLXBhZ2UtbmF2XCIsIHJvbGU6IFwidGFibGlzdFwiLCBzdHlsZToge21hcmdpblJpZ2h0OjAsZm9udFNpemU6MTEsbWFyZ2luVG9wOi03MH19LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJsYW5kaW5nLXBhZ2UtbmF2LXRhYlwiLCBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJ30sIGhyZWY6IFwiI1wifSwgXCJMT0dJTlwiKSksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcImxhbmRpbmctcGFnZS1uYXYtdGFiXCIsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snfSwgaHJlZjogXCIjXCJ9LCBcIkJMT0dcIikpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJsYW5kaW5nLXBhZ2UtbmF2LXRhYlwiLCBocmVmOiBcIiNwcmljaW5nXCJ9LCBcIlJFU09VUkNFU1wiKSksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcImxhbmRpbmctcGFnZS1uYXYtdGFiXCIsIGhyZWY6IFwiI3ByaWNpbmdcIn0sIFwiS05PV0xFREdFIEJBU0VcIikpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJsYW5kaW5nLXBhZ2UtbmF2LXRhYlwiLCBocmVmOiBcIiNwcmljaW5nXCJ9LCBcIisxOTA1LTYxNi03NjAyIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBob25lXCJ9KSkpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCIjc2lnbnVwXCIsIGNsYXNzTmFtZTogXCJidG4tbGcgYnRuIGxvZ2luLWJ0blwiLCBzdHlsZToge2ZvbnRGYW1pbHk6J3Byb3hpbWEtbm92YSd9fSwgXCJUUlkgSVRcIiksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJuYXYgbmF2LXBpbGxzIGxhbmRpbmctcGFnZS1uYXZcIiwgcm9sZTogXCJ0YWJsaXN0XCIsIHN0eWxlOiB7d2lkdGg6NjAwLGZvbnRTaXplOjEzLG1hcmdpblJpZ2h0OjEwMCxtYXJnaW5Ub3A6LTQ1fX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHt3aWR0aDonMjQlJyx0ZXh0QWxpZ246J2NlbnRlcicsZGlzcGxheTonYmxvY2snfX0sIFwiwqBcIiksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHt3aWR0aDonMjQlJyx0ZXh0QWxpZ246J2NlbnRlcicsZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcImxhbmRpbmctcGFnZS1uYXYtdGFiIGxwLWJvdHRvbS1uYXZcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9LCBocmVmOiBcIiNcIn0sIFwiUFJPRFVDVFwiKSksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHt3aWR0aDonMjQlJyx0ZXh0QWxpZ246J2NlbnRlcicsZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcImxhbmRpbmctcGFnZS1uYXYtdGFiIGxwLWJvdHRvbS1uYXZcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9LCBocmVmOiBcIiNcIn0sIFwiREFUQVwiKSksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHt3aWR0aDonMjQlJyx0ZXh0QWxpZ246J2NlbnRlcid9fSwgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJsYW5kaW5nLXBhZ2UtbmF2LXRhYiBscC1ib3R0b20tbmF2IGFjdGl2ZVwiLCBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJ30sIGhyZWY6IFwiI3Byb2R1Y3QvZmVhdHVyZXNcIn0sIFwiRkVBVFVSRVNcIikpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe3N0eWxlOiB7d2lkdGg6JzI0JScsdGV4dEFsaWduOidjZW50ZXInLGRpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJsYW5kaW5nLXBhZ2UtbmF2LXRhYiBscC1ib3R0b20tbmF2XCIsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snfSwgaHJlZjogXCIjXCJ9LCBcIklOVEVHUkFUSU9OU1wiKSksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHt3aWR0aDonMjQlJyx0ZXh0QWxpZ246J2NlbnRlcid9fSwgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJsYW5kaW5nLXBhZ2UtbmF2LXRhYiBscC1ib3R0b20tbmF2XCIsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snfSwgaHJlZjogXCIjcHJpY2luZ1wifSwgXCJQUklDSU5HXCIpKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtzdHlsZToge3dpZHRoOicyNCUnLHRleHRBbGlnbjonY2VudGVyJ319LCBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcImxhbmRpbmctcGFnZS1uYXYtdGFiIGxwLWJvdHRvbS1uYXZcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9LCBocmVmOiBcIiNzZXJ2aWNlc1wifSwgXCJTRVJWSUNFU1wiKSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInJvd1wiLCBzdHlsZToge21hcmdpbjowfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZ3JhZGllbnQtMlwifSksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwic2VydmljZXMtYmFja2dyb3VuZC1pbWFnZVwifSksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTEyIGNvbC1zbS0xMlwiLCBzdHlsZToge3BhZGRpbmdUb3A6JzgwcHgnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oMSh7c3R5bGU6IHtjb2xvcjonIzFjYTNmZCcsZm9udFdlaWdodDonMTAwJyxjb2xvcjond2hpdGUnLHRleHRBbGlnbjonY2VudGVyJyxmb250U2l6ZTonMzhweCcsZm9udEZhbWlseTonT3BlbiBTYW5zJyxmb250U2l6ZTonNDBweCd9fSwgXG4gICAgICAgICAgICBcIllvdXIgT24tRGVtYW5kIFNhbGVzIERldmVsb3BtZW50IFRlYW1cIlxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oMSh7c3R5bGU6IHtjb2xvcjonIzFjYTNmZCcsZm9udFdlaWdodDonMTAwJyx0ZXh0QWxpZ246J2NlbnRlcicsY29sb3I6J3doaXRlJyxmb250U2l6ZTonNDZweCcsZm9udEZhbWlseTonT3BlbiBTYW5zJywgZm9udFN0eWxlOidpdGFsaWMnfX0sIFwiIMKgIFwiKSwgXG5cbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwgcGFuZWwtZGVmYXVsdFwiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1oZWFkaW5nXCJ9LCBcIsKgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1ib2R5XCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmZvcm0oe29uU3VibWl0OiB0aGlzLmxvZ2lufSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7cGxhY2Vob2xkZXI6IFwiRW1haWxcIiwgaWQ6IFwiZW1haWxcIiwgdHlwZTogXCJ0ZXh0XCIsIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgaW5wdXQtbGdcIiwgc3R5bGU6IHtmb250V2VpZ2h0OicxMDAnLGZvbnRTaXplOicyMnB4J319KSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7cGxhY2Vob2xkZXI6IFwiUGFzc3dvcmRcIiwgdHlwZTogXCJwYXNzd29yZFwiLCBpZDogXCJwYXNzd29yZFwiLCBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGlucHV0LWxnXCIsIHN0eWxlOiB7Zm9udFdlaWdodDonMTAwJyxmb250U2l6ZTonMjJweCd9fSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIG9uQ2xpY2s6IHRoaXMubG9naW4sIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLWxnXCIsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snLGJhY2tncm91bmRDb2xvcjonIzFjYTNmZCd9fSwgXCJMb2cgSW5cIilcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWZvb3RlclwifSwgXCLCoFwiKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJ0aGUtZ3JhZGllbnQtMVwifSksIFwiIFwiKVxuICAgICAgICApXG4gICAgICApLCBcbiAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgTWFya2V0aW5nQm9keShudWxsKSwgXG4gICAgICBNYXJrZXRpbmdGb290ZXIobnVsbClcbiAgICApXG4gICAgKVxuICB9XG59KVxuXG52YXIgTWFya2V0aW5nQm9keSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ01hcmtldGluZ0JvZHknLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge21hcmdpblRvcDo3MCxmb250RmFtaWx5OidvcGVuLXNhbnMnfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicm93XCIsIHN0eWxlOiB7aGVpZ2h0OjMwMCwgdGV4dEFsaWduOidjZW50ZXInfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcIiBcIiwgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtMTJcIn0sIFwiIFwiLCBSZWFjdC5ET00uaDEobnVsbCwgXG4gICAgICAgICAgICAgICAgXCJCdWlsZGluZyBhIENvbGQgQ2FsbGluZyAyLjAgdGVhbSBjYW4gdGFrZSAzIHRvIDYgbW9udGhzIGFuZCAkMTAwaysuXCJcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmgyKHtzdHlsZToge2ZvbnRTdHlsZTonaXRhbGljJ319LCBcbiAgICAgICAgICAgIFwiU3RhcnQgYSBQcmVkaWN0YWJsZSBSZXZlbnVlIG91dGJvdW5kIHNhbGVzIHByb2dyYW0gaW4gNDggaG91cnMuXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICBcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgICksIFxuXG4gICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2JvcmRlckJvdHRvbTogJzFweCBzb2xpZCAjZWNlZGVlJywgYm9yZGVyVG9wOiAnMXB4IHNvbGlkICNlY2VkZWUnLCBiYWNrZ3JvdW5kQ29sb3I6JyNmNWY3ZjknLCB0ZXh0QWxpZ246J2NlbnRlcid9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb250YWluZXJcIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJyb3dcIiwgc3R5bGU6IHtoZWlnaHQ6MzAwfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaDEobnVsbCwgXCJIb3cgSXQgV29ya3NcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0zXCJ9LCBcbiAgICAgICAgICAgICAgXCJXZSBoYXZlIGEgZGVkaWNhdGVkIGZ1bGx5LXRyYWluZWQgaW5zaWRlIHNhbGVzIHRlYW0gLlwiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtM1wifSwgXG4gICAgICAgICAgICAgIFwiV2UgdXNlIEN1c3RvbWVybyBhbmQgb3RoZXIgcHJvcHJpZXRhcnkgZGF0YWJhc2VzIHRvIGZpbmRcIiArICcgJyArXG4gICAgICAgICAgICAgIFwidGhlIGJlc3QgcHJvc3BlY3RzIGZvciB5b3VyIGJ1c2luZXNzXCJcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0zXCJ9LCBcbiAgICAgICAgICAgICAgXCJXZSByZWFjaCBvdXQgdG8gcG90ZW50aWFsIGN1c3RvbWVycyB3aXRoIHRhaWxvcmVkIG1lc3NhZ2VzXCJcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0zXCJ9LCBcbiAgICAgICAgICAgICAgXCJWaWV3IHlvdXIgbGVhZHMgaW4geW91ciBDUk0gb3IgYXMgYSAuY3N2XCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICksIFxuXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFwiIFwiLCBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJyb3dcIiwgc3R5bGU6IHtoZWlnaHQ6MzAwLCB0ZXh0QWxpZ246J2NlbnRlcid9fSwgXG5cbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmgxKG51bGwsIFwiV2h5IHdlJ3JlIGRpZmZlcmVudFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTNcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaDQobnVsbCwgXCJSZXNlYXJjaCBjdXN0b21pemVkIHRvIHlvdS5cIilcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0zXCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KG51bGwsIFwiRWZmZWN0aXZlLCB0YXJnZXRlZCBjYW1wYWlnbnMuXCIpXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtM1wifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5oNChudWxsLCBcIkJlc3QgaW4gY2xhc3MgdGVjaG5vbG9neS5cIilcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0zXCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KG51bGwsIFwiQSBzY2FsYWJsZSwgb24tZGVtYW5kIHRlYW0uXCIpXG4gICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXCIgXCIpLCBcblxuICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtib3JkZXJCb3R0b206ICcxcHggc29saWQgI2VkZWVlZicsIGJvcmRlclRvcDogJzFweCBzb2xpZCAjZWRlZWVmJywgXG4gICAgICAgICAgICAgICAgICAgcGFkZGluZ1RvcDo1MCwgYmFja2dyb3VuZENvbG9yOicjZjVmOGZhJywgdGV4dEFsaWduOidjZW50ZXInfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicm93XCIsIHN0eWxlOiB7aGVpZ2h0OjIwMCwgdGV4dEFsaWduOidjZW50ZXInfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmgyKG51bGwsIFxuICAgICAgICAgICAgICBcIlBsYW5zIHRoYXQgZ3JvdyB3aXRoIHlvdSwgYWRqdXN0IGF0IGFueSB0aW1lLlwiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1sZyBzdGFydC10cmlhbFwiLCBzdHlsZToge21hcmdpblRvcDoxMH19LCBcbiAgICAgICAgICAgICAgXCJTQ0hFRFVMRSBBIEZSRUUgREVNTyDCoFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZXZyb24tcmlnaHRcIiwgc3R5bGU6IHtmb250U2l6ZToxOH19KVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgICApXG4gIH0sXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnZmVhdHVyZXMnKVxucGFydGljbGVzSlMoJ3BhcnRpY2xlcy1qcycsIHtcbiAgICBwYXJ0aWNsZXM6IHtcbiAgICAgIGNvbG9yOiAnI2ZmZicsXG4gICAgICBzaGFwZTogJ2NpcmNsZScsXG4gICAgICBvcGFjaXR5OiAxLFxuICAgICAgc2l6ZTogMi41LFxuICAgICAgc2l6ZV9yYW5kb206IHRydWUsXG4gICAgICBuYjogMTAwLFxuICAgICAgbGluZV9saW5rZWQ6IHtcbiAgICAgICAgZW5hYmxlX2F1dG86IHRydWUsXG4gICAgICAgIGRpc3RhbmNlOiAyNTAsXG4gICAgICAgIGNvbG9yOiAnI2ZmZicsXG4gICAgICAgIG9wYWNpdHk6IDAuNSxcbiAgICAgICAgd2lkdGg6IDEsXG4gICAgICAgIGNvbmRlbnNlZF9tb2RlOiB7XG4gICAgICAgICAgZW5hYmxlOiBmYWxzZSxcbiAgICAgICAgICByb3RhdGVYOiA2MDAsXG4gICAgICAgICAgcm90YXRlWTogNjAwXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhbmltOiB7XG4gICAgICAgIGVuYWJsZTogdHJ1ZSxcbiAgICAgICAgc3BlZWQ6IDIuNVxuICAgICAgfVxuICAgIH0sXG4gICAgaW50ZXJhY3Rpdml0eToge1xuICAgICAgZW5hYmxlOiB0cnVlLFxuICAgICAgbW91c2U6IHtcbiAgICAgICAgZGlzdGFuY2U6IDI1MFxuICAgICAgfSxcbiAgICAgIGRldGVjdF9vbjogJ2NhbnZhcycsXG4gICAgICBtb2RlOiAnZ3JhYicsXG4gICAgICBsaW5lX2xpbmtlZDoge1xuICAgICAgICBvcGFjaXR5OiAwLjVcbiAgICAgIH0sXG4gICAgICBldmVudHM6IHtcbiAgICAgICAgb25jbGljazoge1xuICAgICAgICAgIHB1c2hfcGFydGljbGVzOiB7XG4gICAgICAgICAgICBlbmFibGU6IHRydWUsXG4gICAgICAgICAgICBuYjogNFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgcmV0aW5hX2RldGVjdDogdHJ1ZVxufSk7XG4kKCdjYW52YXMnKS5jc3Moe1xuICAnd2lkdGgnOiAnMTAwJScsXG4gICdoZWlnaHQnOiAnMzc2cHgnLFxuICAnYmFja2dyb3VuZC1jb2xvcic6ICdyZ2JhKDAsMCwwLDApJyxcbiAgJ3RvcCc6ICcxMjJweCcsXG4gICdwb3NpdGlvbic6ICdhYnNvbHV0ZScsXG59KVxuICAgIFxuICAgIC8qXG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHNjcm9sbCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcbiAgICAgICAgdmFyIHRvcCA9ICQoJy5wcm9kdWN0LWhlYWRlcicpLm9mZnNldCgpLnRvcFxuICAgICAgICBpZihzY3JvbGwgPiB0b3Ape1xuICAgICAgICAgIHBvcyA9ICQoJy5wcm9kdWN0LWhlYWRlcicpLmNzcygncG9zaXRpb24nKVxuICAgICAgICAgIGNvbnNvbGUubG9nKHBvcylcbiAgICAgICAgICBpZihwb3MgIT0gXCJzdGF0aWNcIiB8fCBwb3MgIT0gXCJmaXhlZFwiKXtcbiAgICAgICAgICAgICAgJCgnLnByb2R1Y3QtaGVhZGVyJykuY3NzKHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJmaXhlZFwiLFxuICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICBcInotaW5kZXhcIjogMTAwMDAwMDAwLFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICQoJy5wcm9kdWN0LWhlYWRlcicpLnJlbW92ZUF0dHIoICdzdHlsZScgKTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgKi9cbiAgfVxufSlcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBMb2FkaW5nU3Bpbm5lclxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInNwaW5uZXJcIiwgc3R5bGU6IHttYXJnaW5Ub3A6JzE4MHB4J319LCBcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJzcGlubmVyLWNvbnRhaW5lciBjb250YWluZXIxXCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZSBjaXJjbGUxXCJ9KSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUgY2lyY2xlMlwifSksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlIGNpcmNsZTNcIn0pLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZSBjaXJjbGU0XCJ9KVxuICAgICAgKSwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwic3Bpbm5lci1jb250YWluZXIgY29udGFpbmVyMlwifSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUgY2lyY2xlMVwifSksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlIGNpcmNsZTJcIn0pLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZSBjaXJjbGUzXCJ9KSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUgY2lyY2xlNFwifSlcbiAgICAgICksIFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInNwaW5uZXItY29udGFpbmVyIGNvbnRhaW5lcjNcIn0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlIGNpcmNsZTFcIn0pLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZSBjaXJjbGUyXCJ9KSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUgY2lyY2xlM1wifSksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlIGNpcmNsZTRcIn0pXG4gICAgICApXG4gICAgKVxuICAgIClcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxudGhlRGF0YSA9IHJlcXVpcmUoJy4uL2xpYi9kYXRhLm1pbi5qcycpIFxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBTaWduVXBcbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIC8vJCgnYm9keScpLmNzcyh7b3ZlcmZsb3c6J2hpZGRlbid9KVxuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgJChcImlucHV0XCIpLmtleXByZXNzKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC53aGljaCA9PSAxMykge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpc3MubG9naW4oKVxuICAgICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgbG9naW46IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdsb2dpbicpXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvbG9naW4nLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgZGF0YToge1xuICAgICAgICAndXNlcm5hbWUnOiQoJyNlbWFpbCcpLnZhbCgpLFxuICAgICAgICAncGFzc3dvcmQnOiQoJyNwYXNzd29yZCcpLnZhbCgpXG4gICAgICB9LFxuICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7IH0sXG4gICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlcykge1xuICAgICAgICAvL2FsZXJ0aWZ5LnN1Y2Nlc3MoJ0xvZ2dpbmcgaW4uLi4nKVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudFVzZXInLCBKU09OLnN0cmluZ2lmeShyZXMpKVxuICAgICAgICBsb2NhdGlvbi5ocmVmID0gXCIjXCJcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGFsZXJ0aWZ5LmVycm9yKCdUaGVyZSB3YXMgYW4gZXJyb3Igd2l0aCB5b3VyIGxvZ2luIHJlcXVlc3QuIFBsZWFzZSB0cnkgYWdhaW4nKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7IFxuICAgIGRhdGEgPSB0aGVEYXRhKClcbiAgICBpbWdzXzEgPSBbXVxuICAgIGltZ3NfMiA9IFtdXG4gICAgZm9yKGk9MDtpIDwgMTIwOyBpKyspIHtcbiAgICAgIGltZ3NfMS5wdXNoKFJlYWN0LkRPTS5pbWcoe3NyYzogZGF0YVtpXSwgY2xhc3NOYW1lOiBcInByb3NwZWN0LWltZ1wifSkpXG4gICAgfVxuICAgIGZvcihpPTE1O2kgPCAzMDsgaSsrKSB7XG4gICAgICBpbWdzXzIucHVzaChSZWFjdC5ET00uaW1nKHtzcmM6IGRhdGFbaV0sIGNsYXNzTmFtZTogXCJwcm9zcGVjdC1pbWdcIn0pKVxuICAgIH1cblxuICBjb25zb2xlLmxvZyhkYXRhKVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2hlaWdodDonMTAwJSd9fSwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJzaWdudXBcIiwgc3R5bGU6IHtwYWRkaW5nVG9wOjUwfX0sIFxuICAgICAgICBSZWFjdC5ET00uaDEoe2NsYXNzTmFtZTogXCJ0aXRsZVwifSwgXCJDdXN0b21lcm8uXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLmg1KHtjbGFzc05hbWU6IFwidGFnbGluZVwifSwgXCJHZW5lcmF0ZSBoaWdoIHF1YWxpdHkgcHJvc3BlY3QgbGlzdHMuIEFjY2VsZXJhdGUgU2FsZXMuXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwgcGFuZWwtZGVmYXVsdCBsb2dpbi1pbmZvXCIsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWJvZHlcIiwgc3R5bGU6IHtmb250RmFtaWx5Oidwcm94aW1hLW5vdmEnLGZvbnRXZWlnaHQ6J2JvbGQnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZm9ybSh7b25TdWJtaXQ6IHRoaXMubG9naW59LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHtwbGFjZWhvbGRlcjogXCJFbWFpbFwiLCBpZDogXCJlbWFpbFwiLCB0eXBlOiBcInRleHRcIiwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBpbnB1dC1sZ1wifSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3BsYWNlaG9sZGVyOiBcIlBhc3N3b3JkXCIsIHR5cGU6IFwicGFzc3dvcmRcIiwgaWQ6IFwicGFzc3dvcmRcIiwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBpbnB1dC1sZ1wifSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIG9uQ2xpY2s6IHRoaXMubG9naW4sIGNsYXNzTmFtZTogXCJidG4gYnRuLWdyYWRpZW50IGJ0bi1sZyBidG4tcHJpbWFyeVwiLCBzdHlsZToge2JvcmRlclJhZGl1czozLCBkaXNwbGF5OidibG9jaycsYmFja2dyb3VuZENvbG9yOicjMWNhM2ZkJyxmb250RmFtaWx5Oidwcm94aW1hLW5vdmEnLGZvbnRXZWlnaHQ6J2JvbGQnfX0sIFwiTE9HIElOXCIpXG5cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICksIFxuXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcIlwiLCBzdHlsZToge3Bvc2l0aW9uOidhYnNvbHV0ZScsekluZGV4OictMicsdG9wOjAsbGVmdDowfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJcIiwgc3R5bGU6IHttYXJnaW5MZWZ0OjM0LCBkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICBpbWdzXzEsIFxuICAgICAgICAgIGltZ3NfMlxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lciBmb290ZXJcIiwgc3R5bGU6IHttYXJnaW5Ub3A6NTB9fSwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicm93XCIsIHN0eWxlOiB7Zm9udEZhbWlseTpcInByb3hpbWEtbm92YVwifX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTIgY29sLXNtLTIgY29sLXhzLTJcIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNShudWxsLCBcIlBST0RVQ1RcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcImxpc3QtdW5zdHlsZWRcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCJ9LCBcIk92ZXJ2aWV3XCIpKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIn0sIFwiQ3VzdG9tZXJzXCIpKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIn0sIFwiUHJpY2luZ1wiKSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCJ9LCBcIlNlY3VyaXR5XCIpKVxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtMiBjb2wtc20tMiBjb2wteHMtMlwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg1KG51bGwsIFwiRkVBVFVSRVNcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcImxpc3QtdW5zdHlsZWRcIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwifSwgXCJTaWduYWxzXCIpKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCJ9LCBcIk1pbmluZyBKb2JzXCIpKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCJ9LCBcIlRlcnJpdG9yeSBNYW5hZ2VtZW50XCIpKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCJ9LCBcIlNvY2lhbCBQcm9zcGVjdCBEYXRhXCIpKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCJ9LCBcIkNhbXBhaWduc1wiKSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwifSwgXCJDUk0gSW50ZWdyYXRpb25cIikpXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0yIGNvbC1zbS0yIGNvbC14cy0yXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDUobnVsbCwgXCJST0xFU1wiKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwibGlzdC11bnN0eWxlZFwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIn0sIFwiU2FsZXMgTGVhZGVyc1wiKSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCJ9LCBcIlNhbGVzIFByb2Zlc3Npb25hbHNcIikpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwifSwgXCJDSU8gYW5kIElUXCIpKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIn0sIFwiU2FsZXMgT3BzXCIpKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg1KG51bGwsIFwiU09MVVRJT05TXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJsaXN0LXVuc3R5bGVkXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwifSwgXCJTbWFsbCBCdXNpbmVzc1wiKSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCJ9LCBcIk1pZC1NYXJrZXRcIikpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwifSwgXCJFbnRlcnByaXNlXCIpKVxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtMiBjb2wtc20tMiBjb2wteHMtMlwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg1KG51bGwsIFwiQ09NUEFOWVwiKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwibGlzdC11bnN0eWxlZFwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIn0sIFwiQWJvdXRcIikpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwifSwgXCJDYXJlZXJzXCIpKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIn0sIFwiUGFydG5lciBQcm9ncmFtXCIpKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIn0sIFwiUHJlc3NcIikpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwifSwgXCJCbG9nXCIpKVxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtMiBjb2wtc20tMiBjb2wteHMtMlwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg1KG51bGwsIFwiQ09NTVVOSVRZXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJsaXN0LXVuc3R5bGVkXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwifSwgXCJGYWNlYm9va1wiKSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCJ9LCBcIlR3aXR0ZXJcIikpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwifSwgXCJMaW5rZWRpblwiKSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCJ9LCBcIkZyZWUgUmVzb3VyY2VzXCIpKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIn0sIFwiU2FsZXMgQmxvZ1wiKSlcbiAgICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTIgY29sLXNtLTIgY29sLXhzLTJcIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNShudWxsLCBcIkhFTFAgQU5EIFNVUFBPUlRcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcImxpc3QtdW5zdHlsZWRcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCJ9LCBcIlN1cHBvcnQgQ2VudGVyXCIpKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIn0sIFwiRGV2ZWxvcGVyIFRvb2xzXCIpKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIn0sIFwiQ29udGFjdCBVc1wiKSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNSh7c3R5bGU6IHtjb2xvcjonIzAwODRmZicsZm9udFdlaWdodDonYm9sZCcsZm9udFNpemU6MTJ9fSwgXCJBQ0NPVU5UXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJsaXN0LXVuc3R5bGVkIHRleHQtbXV0ZWRcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJ0ZXh0LW11dGVkXCJ9LCBcIlNpZ24gVXBcIikpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwidGV4dC1tdXRlZFwifSwgXCJMb2dpblwiKSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJ0ZXh0LW11dGVkXCJ9LCBcIkZvcmdvdCBQYXNzd29yZFwiKSlcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICksIFxuICAgICAgUmVhY3QuRE9NLmhyKG51bGwpLCBcbiAgICAgIFJlYWN0LkRPTS5oNih7Y2xhc3NOYW1lOiBcInRleHQtbXV0ZWRcIiwgc3R5bGU6IHttYXJnaW5Ub3A6LTEwfX0sIFxuICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNvcHlyaWdodFwifSksIFwiwqBcIiArICcgJyArXG4gICAgICAgIFwiQ3VzdG9tZXJvIDIwMTRcIlxuICAgICAgKSwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwidGV4dC1tdXRlZFwiLCBzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luVG9wOi0zNX19LCBcbiAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIFxuICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwidGV4dC1tdXRlZFwifSwgXCJGYWNlYm9va1wiKSwgXCLCoMKgwqBcIiwgXG4gICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJ0ZXh0LW11dGVkXCJ9LCBcIlR3aXR0ZXJcIiksIFwiwqDCoMKgXCIsIFxuICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwidGV4dC1tdXRlZFwifSwgXCJMaW5rZWRpblwiKSwgXCLCoMKgwqBcIlxuICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgICApXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICQoJy5mb290ZXIgYScpLmFkZENsYXNzKCd0ZXh0LW11dGVkJylcbiAgICAkKCcuZm9vdGVyIGg1JykuY3NzKHtjb2xvcjonIzAwODRmZicsZm9udFdlaWdodDonYm9sZCcsZm9udFNpemU6MTJ9KVxuICB9XG59KVxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vTWVzc2VuZ2VyXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImFsZXJ0IGFsZXJ0LXN1Y2Nlc3NcIiwgXG4gICAgICAgICAgICAgJ2RhdGEtYWxlcnQnOiBcImFsZXJ0XCIsIFxuICAgICAgICAgICAgIHN0eWxlOiB7cG9zaXRpb246J2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgIHRvcDogMzEsIFxuICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6MzAsIFxuICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTonbm9uZScsXG4gICAgICAgICAgICAgICAgICAgICB3aWR0aDoyMDB9fSwgXG4gICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcImNsb3NlXCIsIFxuICAgICAgICAgICAgICAgICAgICAgICBocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmhpZGVBbGVydH0sIFwiw5dcIiksIFxuICAgICAgICAgICAgXCJUZXN0XCJcbiAgICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbnZhciBMb2FkaW5nU3Bpbm5lciA9IHJlcXVpcmUoJy4vbG9hZGluZ19zcGlubmVyLmpzLm1pbi5qcycpXG5cbnZhciBKb2IgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdKb2InLFxuICBzdGFydEpvYjogZnVuY3Rpb24oKSB7XG4gICAgLy8gQWRkIExpbmtlZGluIExvY2F0aW9uc1xuICAgIC8vIEVtYWlsIFdoZW4gQ29tcGxldGVkXG4gICAgLy8gSGF2ZSBSZXBvcnQgRm9yIE51bWJlciBvZiBQcm9maWxlcyBGb3VuZCAvIG51bWJlciBvZiBlbWFpbHMgZm91bmQgcGVyIG1pbmluZyBqb2JcbiAgICBcbiAgICBtaW5pbmdKb2IgPSB0aGlzLnByb3BzLm1pbmluZ0pvYlxuICAgIG1pbmluZ0pvYi5zdGF0dXMgPSBcIlJ1bm5pbmdcIlxuICAgIG1pbmluZ0pvYi5sYXN0X3JhbiA9IE1hdGgucm91bmQoK25ldyBEYXRlKCkvMTAwMClcblxuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL01pbmluZ0pvYi8nK21pbmluZ0pvYi5vYmplY3RJZCxcbiAgICAgIHR5cGU6J1BVVCcsXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgLy8gc3RhdHVzIHNob3VsZCBiZSB3YWl0aW5nXG4gICAgICBkYXRhIDogSlNPTi5zdHJpbmdpZnkoeydzdGF0dXMnOidSdW5uaW5nJywgJ2xhc3RfcmFuJzpNYXRoLnJvdW5kKCtuZXcgRGF0ZSgpLzEwMDApK1wiXCIgfSksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICAvLyBtYWtlIHJlcXVlc3QgdG8gaGVyb2t1IGFwaVxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgIC8vdXJsOiAnaHR0cHM6Ly8wLjAuMC4wOjUwMDAvbWluaW5nX2pvYicgLFxuICAgICAgICAgIHVybDogJ2h0dHA6Ly9hZ2lsZS1wbGFpbnMtMjQzMC5oZXJva3VhcHAuY29tL21pbmluZ19qb2InICxcbiAgICAgICAgICAvL3R5cGU6J1BPU1QnLFxuICAgICAgICAgIGNyb3NzRG9tYWluOiB0cnVlLFxuICAgICAgICAgIGRhdGE6eydsb2NhbGUnOm1pbmluZ0pvYi5sb2NhbGUsIFxuICAgICAgICAgICAgICAgICdjdXJyZW50X3RpdGxlJzptaW5pbmdKb2IucHJvc3BlY3RfdGl0bGUsXG4gICAgICAgICAgICAgICAgJ2N1cnJlbnRfdXNlcl9pZCc6SlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLm9iamVjdElkLFxuICAgICAgICAgICAgICAgICdjb21wYW55X2lkJzpKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikuY29tcGFueS5vYmplY3RJZCxcbiAgICAgICAgICAgICAgICAnbWluaW5nX2pvYl9pZCc6bWluaW5nSm9iLm9iamVjdElkfSxcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InKVxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHttaW5pbmdKb2I6IG1pbmluZ0pvYn0pXG4gIH0sXG5cbiAgZGVsZXRlSm9iOiBmdW5jdGlvbigpIHtcbiAgICAvL2NvbnNvbGUubG9nKHRoaXMuc3RhdGUubWluaW5nSm9iKVxuICAgIHRoaXMucHJvcHMuZGVsZXRlSm9iKHRoaXMuc3RhdGUubWluaW5nSm9iKVxuICAgICAgLypcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9NaW5pbmdKb2IvJyt0aGlzLnN0YXRlLm1pbmluZ0pvYi5vYmplY3RJZCxcbiAgICAgIHR5cGU6J0RFTEVURScsXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpXG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcbiAgICAgICovXG4gIH0sXG5cbiAgY2FuY2VsSm9iOiBmdW5jdGlvbigpIHtcbiAgICBtaW5pbmdKb2IgPSB0aGlzLnN0YXRlLm1pbmluZ0pvYlxuICAgIG1pbmluZ0pvYi5zdGF0dXMgPSBcIlwiXG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9NaW5pbmdKb2IvJyttaW5pbmdKb2Iub2JqZWN0SWQsXG4gICAgICB0eXBlOidQVVQnLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIGRhdGEgOiBKU09OLnN0cmluZ2lmeSh7J3N0YXR1cyc6Jyd9KSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InKVxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7bWluaW5nSm9iOiBtaW5pbmdKb2J9KVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKXtcbiAgICBtaW5pbmdKb2IgPSB0aGlzLnByb3BzLm1pbmluZ0pvYlxuICAgIGJ1dHRvbiA9IChtaW5pbmdKb2Iuc3RhdHVzID09IFwiXCIpID8gUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLXN1Y2Nlc3NcIiwgb25DbGljazogdGhpcy5zdGFydEpvYn0sIFwiIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZWNrXCJ9KSwgXCLCoFJ1biBcIikgOiBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tZGFuZ2VyXCIsIG9uQ2xpY2s6IHRoaXMuY2FuY2VsSm9ifSwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdGltZXNcIn0pLCBcIsKgQ2FuY2VsIFwiKVxuXG4gICAgZGlzYWJsZWQgPSBcIlwiXG4gICAgZGlzYWJsZWRfdHJhc2ggPSBcIlwiXG4gICAgLypcbiAgICBkaXNhYmxlZCA9IChtaW5pbmdKb2Iuc3RhdHVzID09IFwiXCIpID8gXCJidG4gYnRuLXhzIGJ0bi1zdWNjZXNzXCIgOiBcImJ0biBidG4teHMgYnRuLXN1Y2Nlc3MgZGlzYWJsZWRcIlxuICAgIGRpc2FibGVkX3RyYXNoID0gKG1pbmluZ0pvYi5zdGF0dXMgPT0gXCJcIikgPyBcImJ0biBidG4teHMgYnRuLWRlZmF1bHRcIiA6ICBcImJ0biBidG4teHMgYnRuLWRlZmF1bHQgZGlzYWJsZWRcIlxuICAgIGJ1dHRvbiA9IDxhIGhyZWY9XCJqYXZhc2NyaXB0OlwiIGNsYXNzTmFtZT17ZGlzYWJsZWR9IG9uQ2xpY2s9e3RoaXMuc3RhcnRKb2J9PiA8aSBjbGFzc05hbWU9XCJmYSBmYS1jaGVja1wiIC8+Jm5ic3A7UnVuIDwvYT4gXG4gICAgKi9cblxuICAgIC8vY29uc29sZS5sb2cobWluaW5nSm9iKVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udHIobnVsbCwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBSZWFjdC5ET00uaDYobnVsbCwgbWluaW5nSm9iLnByb3NwZWN0X3RpdGxlKSksIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgUmVhY3QuRE9NLmg2KG51bGwsIG1pbmluZ0pvYi5sb2NhbGUpKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBSZWFjdC5ET00uaDYobnVsbCwgKG1pbmluZ0pvYi5sYXN0X3JhbiA9PSBcIlwiICkgPyBcIi0tLS1cIiA6IG1vbWVudC51bml4KG1pbmluZ0pvYi5sYXN0X3JhbikuZnJvbU5vdygpKSksIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJiYWRnZVwifSwgXG4gICAgICAgICAgICAobWluaW5nSm9iLnJlc3VsdHMgPT0gXCJcIikgPyAwIDogbWluaW5nSm9iLnJlc3VsdHNcbiAgICAgICAgICApLCBcIsKgXCIsICBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcInByb2ZpbGVzIGZvdW5kXCIpXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7cGFkZGluZ1RvcDonMTJweCd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogKG1pbmluZ0pvYi5zdGF0dXMgPT0gXCJcIiApID8gXCJsYWJlbCBsYWJlbC1wcmltYXJ5XCIgOiBcImxhYmVsIGxhYmVsLXN1Y2Nlc3NcIn0sIFxuICAgICAgICAgICAgKG1pbmluZ0pvYi5zdGF0dXMgPT0gXCJcIikgPyBcIlJlYWR5XCIgOiBtaW5pbmdKb2Iuc3RhdHVzXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3BhZGRpbmdUb3A6JzEzcHgnLHdpZHRoOicxMDVweCd9fSwgXG4gICAgICAgICAgYnV0dG9uLCBcbiAgICAgICAgICBcIsKgXCIsIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogZGlzYWJsZWRfdHJhc2gsIFxuICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5kZWxldGVKb2J9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdHJhc2gtb1wifSlcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBNaW5pbmcgSm9ic1xuICAvL3socHJvc3BlY3RzLmxlbmd0aCA9PSAwICYmIHRoaXMuc3RhdGUubG9hZGluZyA9PSBmYWxzZSkgPyA8RW1wdHlDb21wYW55UHJvc3BlY3RzUGFuZWwgLz4gOiBcIlwifVxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7IFxuICAgICAgbWluaW5nSm9icyA6IFtdLFxuICAgICAgbG9hZGluZyAgICA6IHRydWVcbiAgICB9XG4gIH0sXG5cbiAgZGVsZXRlSm9iOiBmdW5jdGlvbihqb2IpIHtcbiAgICAvL2NvbnNvbGUubG9nKGpvYi5vYmplY3RJZClcbiAgICB2YXIgZmlsdGVyZWQgPSBfLmZpbHRlcih0aGlzLnN0YXRlLm1pbmluZ0pvYnMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICBjb25zb2xlLmxvZyhpdGVtLm9iamVjdElkICE9IGpvYi5vYmplY3RJZClcbiAgICAgICByZXR1cm4gaXRlbS5vYmplY3RJZCAhPSBqb2Iub2JqZWN0SWRcbiAgICB9KTtcbiAgICAvL2NvbnNvbGUubG9nKGZpbHRlcmVkKVxuICAgIHRoaXMuc2V0U3RhdGUoe21pbmluZ0pvYnM6IGZpbHRlcmVkfSlcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAvL2NvbnNvbGUubG9nKCdyZW5kZXInKVxuICAgIG1pbmluZ0pvYnMgPSBbXVxuICAgIGZvcihpPTA7aTx0aGlzLnN0YXRlLm1pbmluZ0pvYnMubGVuZ3RoO2krKyl7XG4gICAgICBtaW5pbmdKb2IgPSB0aGlzLnN0YXRlLm1pbmluZ0pvYnNbaV1cbiAgICAgIG1pbmluZ0pvYnMucHVzaChcbiAgICAgICAgSm9iKHtkZWxldGVKb2I6IHRoaXMuZGVsZXRlSm9iLCBtaW5pbmdKb2I6IG1pbmluZ0pvYn0pXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibWluaW5nLWpvYi10b29sYmFyIGNvbnRhaW5lclwiLCBzdHlsZToge3dpZHRoOicxMDAlJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHNcIiwgJ2RhdGEtdG9nZ2xlJzogXCJtb2RhbFwiLCAnZGF0YS10YXJnZXQnOiBcIi5icy1leGFtcGxlLW1vZGFsLXNtXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pLCBcIiDCoCBGaW5kIFByb3NwZWN0cyBCeSBUaXRsZSBhbmQgQXJlYVwiXG4gICAgICAgICksIFxuICAgICAgICBcIsKgIMKgXCIsIFxuICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14cyBkaXNhYmxlZFwiLCAnZGF0YS10b2dnbGUnOiBcIm1vZGFsXCIsICdkYXRhLXRhcmdldCc6IFwiLmJzLWV4YW1wbGUtbW9kYWwtc21cIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSksIFwiIMKgIEZpbmQgQ29tcGFuaWVzIEhpcmluZyBGb3IgUm9sZXNcIlxuICAgICAgICApLCBcbiAgICAgICAgXCLCoCDCoFwiLCBcbiAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHMgZGlzYWJsZWRcIiwgJ2RhdGEtdG9nZ2xlJzogXCJtb2RhbFwiLCAnZGF0YS10YXJnZXQnOiBcIi5icy1leGFtcGxlLW1vZGFsLXNtXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pLCBcIiDCoCBGaW5kIENvbXBhbmllcyBXaG8gSnVzdCBSYWlzZWQgRnVuZGluZ1wiXG4gICAgICAgICksIFxuICAgICAgICBcIsKgIMKgXCIsIFxuICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14cyBkaXNhYmxlZFwiLCAnZGF0YS10b2dnbGUnOiBcIm1vZGFsXCIsICdkYXRhLXRhcmdldCc6IFwiLmJzLWV4YW1wbGUtbW9kYWwtc21cIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSksIFwiIMKgIEZpbmQgQ29tcGFuaWVzIEJ5IEluZHVzdHkgQW5kIEFyZWFcIlxuICAgICAgICApLCBcbiAgICAgICAgXCLCoCDCoFwiLCBcbiAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHMgZGlzYWJsZWRcIiwgJ2RhdGEtdG9nZ2xlJzogXCJtb2RhbFwiLCAnZGF0YS10YXJnZXQnOiBcIi5icy1leGFtcGxlLW1vZGFsLXNtXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pLCBcIiDCoCBQcmVzcyBDb3ZlcmFnZVwiXG4gICAgICAgIClcbiAgICApLCBcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcImF1dG9zY3JvbGxcIiwgc3R5bGU6IHtoZWlnaHQ6JzQwMHB4JyxvdmVyZmxvdzonYXV0byd9fSwgXG4gICAgICAgIFJlYWN0LkRPTS50YWJsZSh7Y2xhc3NOYW1lOiBcInRhYmxlIHRhYmxlLXN0cmlwZWRcIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS50aGVhZChudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIkpvYiBUaXRsZVwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJDaXR5XCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIkxhc3QgUmFuXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIlJlc3VsdHNcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiU3RhdHVzXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIsKgXCIpXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRib2R5KG51bGwsIFxuICAgICAgICAgICAgbWluaW5nSm9ic1xuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgICAgKHRoaXMuc3RhdGUubG9hZGluZykgPyBMb2FkaW5nU3Bpbm5lcihudWxsKSA6IFwiXCIsIFxuICAgICAgICBjcmVhdGVKb2JNb2RhbCh7Y3JlYXRlSm9iOiB0aGlzLmNyZWF0ZUpvYn0pXG4gICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfSxcbiAgXG4gIHJ1bk1pbmluZ0pvYjogZnVuY3Rpb24oKSB7XG5cbiAgfSxcblxuICBjcmVhdGVKb2I6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICBtaW5pbmdKb2JzID0gdGhpcy5zdGF0ZS5taW5pbmdKb2JzXG4gICAgbWluaW5nSm9icy5wdXNoKGRhdGEpXG4gICAgdGhpcy5zZXRTdGF0ZSh7IG1pbmluZ0pvYnM6IG1pbmluZ0pvYnMgfSlcblxuICAgICQoJyNtaW5pbmdKb2JNb2RhbCcpLm1vZGFsKCdoaWRlJylcbiAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ21vZGFsLW9wZW4nKTtcbiAgICAkKCcubW9kYWwtYmFja2Ryb3AnKS5yZW1vdmUoKTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ3RoaXMgZGlkIG1vdW50JylcbiAgICB0aGlzcyA9IHRoaXM7XG4gICAgcXJ5ID0gJ3doZXJlPXtcImNvbXBhbnlcIjonK2NvbXBhbnkrJ30mY291bnQ9MSZvcmRlcj0tY3JlYXRlZEF0J1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvTWluaW5nSm9iJyxcbiAgICAgIHR5cGU6J0dFVCcsXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHttaW5pbmdKb2JzIDogcmVzLnJlc3VsdHN9KVxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7bG9hZGluZyAgICA6IGZhbHNlfSlcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbn0pO1xuXG52YXIgY3JlYXRlSm9iTW9kYWwgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdjcmVhdGVKb2JNb2RhbCcsXG4gIGNyZWF0ZU1pbmluZ0pvYjogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ21pbmluZyBqb2InKVxuICAgIGNvbnNvbGUubG9nKCQoJyNwcm9zcGVjdFRpdGxlJykudmFsKCkpXG4gICAgY29uc29sZS5sb2coJCgnI2xvY2FsZScpLnZhbCgpKVxuXG4gICAgZGF0YSA9ICB7XG4gICAgICAncHJvc3BlY3RfdGl0bGUnOiAkKCcjcHJvc3BlY3RUaXRsZScpLnZhbCgpLFxuICAgICAgJ2xvY2FsZScgICAgICAgIDogJCgnI2xvY2FsZScpLnZhbCgpLFxuICAgICAgJ2xhc3RfcmFuJyAgICAgIDogJycsXG4gICAgICAncmVzdWx0cycgICAgICAgOiAnJyxcbiAgICAgICdzdGF0dXMnICAgICAgICA6ICcnLCAgIC8vV2FpdGluZyAsIFJ1bm5pbmdcbiAgICB9XG4gICAgLy8gIHVwZGF0ZSBsb2NhbCBqb2JzIHN0YXRlXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9NaW5pbmdKb2InLFxuICAgICAgdHlwZTonUE9TVCcsXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJylcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5wcm9wcy5jcmVhdGVKb2IoZGF0YSlcbiAgICBcbiAgICAvLyQoJ2J1dHRvbi5jbG9zZScpLmNsaWNrKClcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsIGZhZGUgYnMtZXhhbXBsZS1tb2RhbC1zbVwiLCB0YWJJbmRleDogXCItMVwiLCByb2xlOiBcImRpYWxvZ1wiLCAnYXJpYS1sYWJlbGxlZGJ5JzogXCJteVNtYWxsTW9kYWxMYWJlbFwiLCAnYXJpYS1oaWRkZW4nOiBcInRydWVcIiwgaWQ6IFwibWluaW5nSm9iTW9kYWxcIiwgc3R5bGU6IHt0b3A6JzIwMHB4J319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1kaWFsb2cgbW9kYWwtc21cIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtY29udGVudFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWhlYWRlclwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBjbGFzc05hbWU6IFwiY2xvc2VcIiwgJ2RhdGEtZGlzbWlzcyc6IFwibW9kYWxcIn0sIFJlYWN0LkRPTS5zcGFuKHsnYXJpYS1oaWRkZW4nOiBcInRydWVcIn0sIFwiw5dcIiksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcInNyLW9ubHlcIn0sIFwiQ2xvc2VcIikpLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNCh7Y2xhc3NOYW1lOiBcIm1vZGFsLXRpdGxlXCIsIGlkOiBcIm15TW9kYWxMYWJlbFwifSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYm9sdFwifSksIFwiIMKgQ3JlYXRlIE1pbmluZyBKb2JcIilcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtYm9keVwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uZm9ybSh7b25TdWJtaXQ6IHRoaXMuY3JlYXRlTWluaW5nSm9ifSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7aWQ6IFwicHJvc3BlY3RUaXRsZVwiLCB0eXBlOiBcInRleHRcIiwgcGxhY2Vob2xkZXI6IFwiRW50ZXIgcHJvc3BlY3QgdGl0bGUuLi5cIiwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbFwifSksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe2lkOiBcImxvY2FsZVwiLCB0eXBlOiBcInRleHRcIiwgcGxhY2Vob2xkZXI6IFwiRW50ZXIgQ2l0eSBBcmVhLi4uXCIsIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIn0pLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgb25DbGljazogdGhpcy5jcmVhdGVNaW5pbmdKb2IsIHBsYWNlaG9sZGVyOiBcIkVudGVyIENpdHkgQXJlYS4uLlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzXCIsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snLCB3aWR0aDonMTAwJSd9fSwgXCJTdGFydCBNaW5pbmchXCIpXG4gICAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbnZhciBFbXB0eU1pbmluZ0pvYiA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0VtcHR5TWluaW5nSm9iJyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC1vZmZzZXQtMyBjb2wtbWQtNlwiLCBzdHlsZToge2hlaWdodDo0MDB9fSwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwgcGFuZWwtZGVmYXVsdFwiLCBzdHlsZToge21hcmdpblRvcDoxMDAsaGVpZ2h0OjIwMH19LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWJvZHlcIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oMSh7Y2xhc3NOYW1lOiBcImxlYWRcIiwgc3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9fSwgXCJTdGFydCBQcm9zcGVjdGluZyBPbiBMaW5rZWRpblwiKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgb25DbGljazogdGhpcy5vcGVuTGlua2VkaW5XaW5kb3csIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3NcIiwgc3R5bGU6IHtiYWNrZ3JvdW5kSW1hZ2U6ICdsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCAjMDA5NmZmIDAlLCAjMDA1ZGZmIDEwMCUpICFpbXBvcnRhbnQnLGRpc3BsYXk6J2Jsb2NrJyxtYXJnaW5SaWdodDonYXV0bycsbWFyZ2luTGVmdDonYXV0bycsd2lkdGg6MjAwLCBtYXJnaW5Ub3A6NTB9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXNlYXJjaFwifSksIFwiIMKgXCIgKyAnICcgK1xuICAgICAgICAgICAgXCJTZWFyY2ggZm9yIGNvbXBhbmllcyFcIilcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgICApO1xuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBNaW5pbmdKb2JDYWxlbmRhclxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXBvcnRzIDogW10sXG4gICAgICByZXBvcnRDb3VudDogJ34nLFxuICAgIH1cbiAgfSxcblxuICBnZXRTaWduYWxSZXBvcnQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXNzc3MgPSB0aGlzO1xuICAgIHByb2ZpbGUgPSBKU09OLnN0cmluZ2lmeSh7cHJvZmlsZTogYXBwQ29uZmlnLnBvaW50ZXIoJ1Byb3NwZWN0UHJvZmlsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm9iamVjdElkKX0pXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvU2lnbmFsUmVwb3J0P29yZGVyPS1jcmVhdGVkQXQnLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGRhdGE6IHt3aGVyZTogcHJvZmlsZSwgY291bnQ6IHRydWV9LFxuICAgICAgaGVhZGVyczphcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIHRoaXNzc3Muc2V0U3RhdGUoe3JlcG9ydHM6IHJlcy5yZXN1bHRzLH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgLy9yZXBvcnRDb3VudDogcmVzLmNvdW50fSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBnZXRSZXN1bHRzOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzc3NzID0gdGhpcztcbiAgICBwcm9maWxlID0gSlNPTi5zdHJpbmdpZnkoe3Byb2ZpbGU6IGFwcENvbmZpZy5wb2ludGVyKCdQcm9zcGVjdFByb2ZpbGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZS5vYmplY3RJZCl9KVxuICAgIGNvbnNvbGUubG9nKHRoaXMucHJvcHMpXG4gICAgdGhlUHJvZmlsZSA9IHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGVcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9QZW9wbGVTaWduYWwnLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGRhdGE6IHt3aGVyZTogcHJvZmlsZSwgb3JkZXI6ICctY3JlYXRlZEF0Jyxjb3VudDp0cnVlfSxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAvLyBkaXZpZGUgcmVzdWx0cyBpbnRvIGdyb3VwcyBvZiAxMDBcbiAgICAgICAgLy8gc2NoZWR1bGUgdGhlbSBmb3IgMSBpbnRlcnZhbHNcbiAgICAgICAgbnVtYmVyX29mX3JlcG9ydHMgPSBNYXRoLmNlaWwocmVzLmNvdW50LzEwMClcbiAgICAgICAgcmVwb3J0cyA9IFtdXG4gICAgICAgIGZvcihpPTA7aTwgbnVtYmVyX29mX3JlcG9ydHM7aSsrKXtcbiAgICAgICAgICBjb3VudCA9IChpID09IG51bWJlcl9vZl9yZXBvcnRzLTEpID8gcmVzLmNvdW50ICUgMTAwIDogMTAwXG4gICAgICAgICAgY29uc29sZS5sb2codGhlUHJvZmlsZS5kb25lKVxuICAgICAgICAgIHJlcG9ydHMucHVzaCh7XG4gICAgICAgICAgc2NoZWR1bGVkQXQ6IG1vbWVudC51bml4KHRoZVByb2ZpbGUuZG9uZSkuYWRkKGksJ2RheScpLmZyb21Ob3coKSxcbiAgICAgICAgICBwZW9wbGVfY291bnQ6IGNvdW50LFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgdGhpc3Nzcy5zZXRTdGF0ZSh7cmVwb3J0czogcmVwb3J0c30pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIC8vdGhpcy5nZXRSZXN1bHRzKClcbiAgICB0aGlzLmdldFNpZ25hbFJlcG9ydCgpXG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbFJlY2lldmVQcm9wczogZnVuY3Rpb24oKSB7XG4gICAgLy90aGlzLmdldFJlc3VsdHMoKVxuICB9LFxuXG4gIHNldEN1cnJlbnRSZXBvcnQ6IGZ1bmN0aW9uKG5ld1JlcG9ydCkge1xuICAgIGNvbnNvbGUubG9nKCdDVVJSRU5UIFJFUE9SVCcpXG4gICAgY29uc29sZS5sb2cobmV3UmVwb3J0KVxuICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFJlcG9ydChuZXdSZXBvcnQpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXBvcnRzID0gW11cbiAgICBmb3IoaT0wO2k8IHRoaXMuc3RhdGUucmVwb3J0cy5sZW5ndGg7IGkrKylcbiAgICAgIHJlcG9ydHMucHVzaChTaWduYWxSZXBvcnRSb3coe3NldEN1cnJlbnRSZXBvcnQ6IHRoaXMuc2V0Q3VycmVudFJlcG9ydCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXBvcnQ6IHRoaXMucHJvcHMuc2V0UmVwb3J0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRWaWV3OiB0aGlzLnNldEN1cnJlbnRWaWV3LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcG9ydDogdGhpcy5zdGF0ZS5yZXBvcnRzW2ldfSkpXG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lclwiLCBzdHlsZToge2hlaWdodDo0MDAsIG92ZXJmbG93OidhdXRvJyxwYWRkaW5nTGVmdDowLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6MCx3aWR0aDonMTAwJSd9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7aGVpZ2h0OjQ0LGJvcmRlckJvdHRvbTonc29saWQgMXB4IHJnYigyMjEsIDIyMSwgMjIxKSd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg0KHtvbkNsaWNrOiB0aGlzLnJldHVyblRvQ2FsZW5kYXJWaWV3LCBcbiAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDonbGVmdCcsY3Vyc29yOidwb2ludGVyJyxtYXJnaW5Ub3A6Nyxmb250V2VpZ2h0OjIwMCxcbiAgICAgICAgICAgICAgICBwYWRkaW5nTGVmdDoyMCxwYWRkaW5nVG9wOjUsIGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jYWxlbmRhclwiLCBzdHlsZToge21hcmdpblJpZ2h0OjV9fSksIFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGUubmFtZSArIFwiIC0gXCIgKyB0aGlzLnN0YXRlLnJlcG9ydENvdW50XG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0xMlwiLCBzdHlsZToge3BhZGRpbmdMZWZ0OjAscGFkZGluZ1JpZ2h0OjAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6J2F1dG8nLGhlaWdodDozNTZ9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtvdmVyZmxvdzonYXV0byd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGFibGUoe2NsYXNzTmFtZTogXCJ0YWJsZSB0YWJsZS1zdHJpcGVkXCIsIHN0eWxlOiB7bWFyZ2luQm90dG9tOjB9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50aGVhZChudWxsLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG9jay1vXCJ9KSwgXCLCoFwiICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgXCJTY2hlZHVsZWRcIlxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9fSwgXCJQcm9zcGVjdHNcIiksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt3aWR0aDoxNTAsdGV4dEFsaWduOidjZW50ZXInfX0pXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGJvZHkoe2NsYXNzTmFtZTogXCJyZXBvcnRzXCJ9LCBcbiAgICAgICAgICAgICAgICByZXBvcnRzXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxudmFyIFNpZ25hbFJlcG9ydFJvdyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1NpZ25hbFJlcG9ydFJvdycsXG4gIHJvd0NsaWNrOiBmdW5jdGlvbigpIHtcbiAgICAvL3RoaXMucHJvcHMuc2V0Q3VycmVudFJlcG9ydCh0aGlzLnByb3BzLnJlcG9ydClcbiAgICB0aGlzLnByb3BzLnNldFJlcG9ydCgnTWluaW5nSm9iRGV0YWlsJywgdGhpcy5wcm9wcy5yZXBvcnQpXG4gIH0sXG5cbiAgcHJvc3BlY3RBbGxTaWduYWxSZXBvcnRQcm9zcGVjdHM6IGZ1bmN0aW9uKGUpIHtcbiAgICAvKlxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAvLyBVcGRhdGUgVUlcbiAgICBjb25zb2xlLmxvZyh0aGlzLnByb3BzLnJlcG9ydC5vYmplY3RJZClcbiAgICB0aGlzcyA9IHRoaXNcbiAgICAkLmFqYXgoe1xuICAgICAgLy91cmw6J2h0dHA6Ly9uYW1lbGVzcy1yZXRyZWF0LTM1MjUuaGVyb2t1YXBwLmNvbS9wcm9zcGVjdF9zaWduYWxfcmVwb3J0JyxcbiAgICAgIHVybDonaHR0cDovLzEyNy4wLjAuMTo1MDAwL3Byb3NwZWN0X3NpZ25hbF9yZXBvcnQnLFxuICAgICAgZGF0YToge3NpZ25hbF9yZXBvcnRfaWQ6IHRoaXNzLnByb3BzLnJlcG9ydC5vYmplY3RJZCB9LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IGNvbnNvbGUubG9nKHJlcykgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyKSB9XG4gICAgfSlcbiAgICAqL1xuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS50cih7b25DbGljazogdGhpcy5yb3dDbGljaywgc3R5bGU6IHtjdXJzb3I6J3BvaW50ZXInfX0sIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCksIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidyaWdodCcscGFkZGluZ1RvcDoxNX19LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNsb3VkLWRvd25sb2FkXCIsIHN0eWxlOiB7Y29sb3I6JyM1NTUnfX0pXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBcbiAgICAgICAgICAgIHRoaXMucHJvcHMucmVwb3J0LnNjaGVkdWxlZEF0XG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLXN1Y2Nlc3NcIn0sIFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5yZXBvcnQucGVvcGxlX2NvdW50XG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICBcIsKgIFBlb3BsZSBmb3VuZC5cIlxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucHJvc3BlY3RBbGxTaWduYWxSZXBvcnRQcm9zcGVjdHMsIFxuICAgICAgICAgICAgIHN0eWxlOiB7Zm9udFdlaWdodDonYm9sZCcsbWFyZ2luVG9wOjV9LCBcbiAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tc3VjY2Vzc1wifSwgXG4gICAgICAgICAgICBcIlByb3NwZWN0IEFsbFwiXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBTaWduYWxEZXRhaWxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY3VycmVudFNpZ25hbDogJ1Blb3BsZVNpZ25hbCcsXG4gICAgICBzaWduYWxzOiBbXSxcbiAgICAgIC8vYWxsUHJvc3BlY3RlZDogdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZVJlcG9ydC5wcm9zcGVjdGVkLFxuICAgICAgY29tcGFueUNvdW50OiAnficsXG4gICAgICBwZW9wbGVDb3VudDogJ34nXG4gICAgfVxuICB9LFxuXG4gIGdldFNpZ25hbHM6IGZ1bmN0aW9uKGN1cnJlbnRTaWduYWwpIHtcbiAgICB2YXIgdGhpc3NzcyA9IHRoaXM7XG4gICAgY3VycmVudFJlcG9ydCA9IHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGVSZXBvcnQub2JqZWN0SWRcbiAgICBjdXJyZW50UHJvZmlsZVJlcG9ydCA9IGFwcENvbmZpZy5wb2ludGVyKCdTaWduYWxSZXBvcnQnLCBjdXJyZW50UmVwb3J0KVxuICAgIGN1cnJlbnRQcm9maWxlID0gYXBwQ29uZmlnLnBvaW50ZXIoJ1Byb3NwZWN0UHJvZmlsZScsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm9iamVjdElkKVxuXG4gICAgcXJ5ID0ge1xuICAgICAgLy93aGVyZTpKU09OLnN0cmluZ2lmeSh7IHByb2ZpbGU6IGN1cnJlbnRQcm9maWxlIH0pLFxuICAgICAgd2hlcmU6SlNPTi5zdHJpbmdpZnkoeyByZXBvcnQ6IGN1cnJlbnRQcm9maWxlUmVwb3J0fSksXG4gICAgICBpbmNsdWRlOidjb21wYW55X3NpZ25hbCxjb21wYW55X3NpZ25hbC5zaWduYWxzLHNpZ25hbHMnLFxuICAgICAgb3JkZXI6J2NyZWF0ZWRBdCcsXG4gICAgICBsaW1pdDoxMDBcbiAgICB9XG5cbiAgICQuYWpheCh7XG4gICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzLycrY3VycmVudFNpZ25hbCxcbiAgICAgIGRhdGE6IHFyeSxcbiAgICAgIHR5cGU6J0dFVCcsXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5wYXJzZUhlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1NJR05BTCBERVRBSUwnKVxuICAgICAgICBjb25zb2xlLmxvZyhyZXMucmVzdWx0cylcbiAgICAgICAgY29uc29sZS5sb2coJ1BST0ZJTEUgUkVQT1JUJylcbiAgICAgICAgY29uc29sZS5sb2codGhpc3Nzcy5wcm9wcy5jdXJyZW50UHJvZmlsZVJlcG9ydC5vYmplY3RJZClcbiAgICAgICAgdGhpc3Nzcy5zZXRTdGF0ZSh7c2lnbmFsczogcmVzLnJlc3VsdHN9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlVGV4dCkgfVxuICAgIH0pO1xuICB9LFxuXG4gIHNldENvbXBhbnlTdGF0ZTogZnVuY3Rpb24oKSB7IHRoaXMuc2V0U3RhdGUoe2N1cnJlbnRTaWduYWw6ICdDb21wYW55U2lnbmFsJ30pIH0sIFxuICBzZXRQZXJzb25TdGF0ZTogZnVuY3Rpb24oKSB7IHRoaXMuc2V0U3RhdGUoe2N1cnJlbnRTaWduYWw6ICdQZW9wbGVTaWduYWwnfSkgfSwgXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGVSZXBvcnQub2JqZWN0SWQpXG4gICAgdGhpcy5nZXRTaWduYWxzKHRoaXMuc3RhdGUuY3VycmVudFNpZ25hbClcbiAgICBjdXJyZW50UHJvZmlsZSA9IGFwcENvbmZpZy5wb2ludGVyKCdQcm9zcGVjdFByb2ZpbGUnLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZS5vYmplY3RJZClcbiAgICBxcnkgPSB7XG4gICAgICB3aGVyZTpKU09OLnN0cmluZ2lmeSh7IHByb2ZpbGU6IGN1cnJlbnRQcm9maWxlIH0pLFxuICAgICAgY291bnQ6IDEsXG4gICAgICBsaW1pdDoxMDBcbiAgICB9XG4gICAgdmFyIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Blb3BsZVNpZ25hbCcsXG4gICAgICBkYXRhOiBxcnksXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyB0aGlzcy5zZXRTdGF0ZSh7cGVvcGxlQ291bnQ6IHJlcy5jb3VudH0pfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlVGV4dCkgfSxcbiAgICB9KVxuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Db21wYW55U2lnbmFsJyxcbiAgICAgIGRhdGE6IHFyeSxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IHRoaXNzLnNldFN0YXRlKHtjb21wYW55Q291bnQ6IHJlcy5jb3VudH0pfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlVGV4dCkgfSxcbiAgICB9KVxuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxVcGRhdGU6IGZ1bmN0aW9uKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG4gICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50U2lnbmFsICE9IG5leHRTdGF0ZS5jdXJyZW50U2lnbmFsKVxuICAgICAgdGhpcy5nZXRTaWduYWxzKG5leHRTdGF0ZS5jdXJyZW50U2lnbmFsKVxuICB9LFxuXG4gIHJldHVyblRvQ2FsZW5kYXJWaWV3OiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygncmV0dXJuIHRvIGNhbGVuZGFyIHZpZXcnKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgc2lnbmFscyA9IFtdXG4gICAgZm9yKGk9MDtpPCB0aGlzLnN0YXRlLnNpZ25hbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmKHRoaXMuc3RhdGUuY3VycmVudFNpZ25hbCA9PSAnQ29tcGFueVNpZ25hbCcpXG4gICAgICAgIHNpZ25hbHMucHVzaChDb21wYW55SGlyaW5nU2lnbmFsUm93KHtzaWduYWw6IHRoaXMuc3RhdGUuc2lnbmFsc1tpXSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxQcm9zcGVjdGVkOiB0aGlzLnN0YXRlLmFsbFByb3NwZWN0ZWR9KSlcbiAgICAgIGVsc2VcbiAgICAgICAgc2lnbmFscy5wdXNoKFBlb3BsZVNpZ25hbFJvdyh7c2lnbmFsOiB0aGlzLnN0YXRlLnNpZ25hbHNbaV0sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsUHJvc3BlY3RlZDogdGhpcy5zdGF0ZS5hbGxQcm9zcGVjdGVkfSkpXG4gICAgfVxuXG4gICAgY3VycmVudFByb2ZpbGVSZXBvcnQgPSB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlUmVwb3J0XG4gICAgY29tcGFueUJ0biA9ICh0aGlzLnN0YXRlLmN1cnJlbnRTaWduYWwgPT0gXCJDb21wYW55U2lnbmFsXCIpID8gXCJidG4gYnRuLXhzIGJ0bi1kZWZhdWx0IGFjdGl2ZVwiIDogXCJidG4gYnRuLXhzIGJ0bi1kZWZhdWx0XCJcbiAgICBwZW9wbGVCdG4gPSAodGhpcy5zdGF0ZS5jdXJyZW50U2lnbmFsID09IFwiUGVvcGxlU2lnbmFsXCIpID8gXCJidG4gYnRuLXhzIGJ0bi1kZWZhdWx0IGFjdGl2ZVwiIDogXCJidG4gYnRuLXhzIGJ0bi1kZWZhdWx0XCJcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lclwiLCBzdHlsZToge2hlaWdodDozNTYscGFkZGluZ0xlZnQ6MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OjAsd2lkdGg6JzEwMCUnfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2hlaWdodDo0NCxib3JkZXJCb3R0b206J3NvbGlkIDFweCByZ2IoMjIxLCAyMjEsIDIyMSknfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNCh7b25DbGljazogdGhpcy5yZXR1cm5Ub0NhbGVuZGFyVmlldywgXG4gICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J2xlZnQnLGN1cnNvcjoncG9pbnRlcicsbWFyZ2luVG9wOjcsZm9udFdlaWdodDoyMDAsXG4gICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0xlZnQ6MjAscGFkZGluZ1RvcDo1LGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2FsZW5kYXJcIiwgc3R5bGU6IHttYXJnaW5SaWdodDo1fX0pLCBcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm5hbWVcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7Zm9udFNpemU6MTMscGFkZGluZ0xlZnQ6NSxwYWRkaW5nVG9wOjUsZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2hldnJvbi1yaWdodFwiLCBzdHlsZToge2ZvbnRTaXplOjl9fSksIFwiIMKgXCIsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG9jay1vXCJ9KSwgXCIgwqBcIiwgXG4gICAgICAgICAgICBtb21lbnQoY3VycmVudFByb2ZpbGVSZXBvcnQuY3JlYXRlZEF0KS5mcm9tTm93KCksIFwiIMKgXCJcbiAgICAgICAgICApLCBcblxuICAgICAgICAgICh0aGlzLnN0YXRlLmFsbFByb3NwZWN0ZWQpID9cbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLGZsb2F0OidyaWdodCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6MTAsbWFyZ2luVG9wOjEwfSwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHMgZGlzYWJsZWRcIn0sIFxuICAgICAgICAgICAgXCJQcm9zcGVjdGVkXCJcbiAgICAgICAgICApIDpcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLGZsb2F0OidyaWdodCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6MTAsbWFyZ2luVG9wOjEwfSwgXG4gICAgICAgICAgICAgb25DbGljazogdGhpcy5wcm9zcGVjdEFsbCwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHNcIn0sIFxuICAgICAgICAgICAgXCJQcm9zcGVjdFwiXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgXG5cbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwXCIsIFxuICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDoxMCxtYXJnaW5SaWdodDoxMH0sIFxuICAgICAgICAgICAgICAgJ2RhdGEtdG9nZ2xlJzogXCJidXR0b25zXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBwZW9wbGVCdG4sIHN0eWxlOiB7fSwgXG4gICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuc2V0UGVyc29uU3RhdGV9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdXNlclwifSksIFwiIMKgXCIsIFxuICAgICAgICAgICAgICB0aGlzLnN0YXRlLnBlb3BsZUNvdW50XG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBjb21wYW55QnRuLCBzdHlsZToge30sIFxuICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnNldENvbXBhbnlTdGF0ZX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1idWlsZGluZ1wifSksIFwiIMKgXCIsIFxuICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNvbXBhbnlDb3VudFxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG5cbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0xMlwiLCBzdHlsZToge3BhZGRpbmdMZWZ0OjAscGFkZGluZ1JpZ2h0OjB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtvdmVyZmxvdzonYXV0bycsaGVpZ2h0OjM1Nn19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50YWJsZSh7Y2xhc3NOYW1lOiBcInRhYmxlIHRhYmxlLXN0cmlwZWRcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGhlYWQobnVsbCwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyx3aWR0aDo5MH19LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvY2stb1wifSlcbiAgICAgICAgICAgICAgICApLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt3aWR0aDozMDB9fSwgXG4gICAgICAgICAgICAgICAgICAodGhpcy5zdGF0ZS5jdXJyZW50U2lnbmFsID09ICdDb21wYW55U2lnbmFsJykgPyAgXG4gICAgICAgICAgICAgICAgICAgIFwiQ29tcGFuaWVzXCIgOiBcIlBlb3BsZVwiXG4gICAgICAgICAgICAgICAgKSwgXG5cbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJDb21wYW55XCIpLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt3aWR0aDo5MCx0ZXh0QWxpZ246J2NlbnRlcid9fSwgXCIgXCIpXG5cbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50Ym9keSh7Y2xhc3NOYW1lOiBcInJlcG9ydHNcIn0sIFxuICAgICAgICAgICAgICAgIHNpZ25hbHNcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgcHJvc3BlY3RBbGw6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdQUk9TUEVDVCcpXG4gICAgY29uc29sZS5sb2codGhpcy5zdGF0ZS5jdXJyZW50U2lnbmFsKVxuICAgIGNvbnNvbGUubG9nKHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGVSZXBvcnQub2JqZWN0SWQpXG4gICAgcmVwb3J0X2lkID0gdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZVJlcG9ydC5vYmplY3RJZFxuICAgIHZhciB0aGlzcyA9IHRoaXM7XG5cbiAgICAkLmFqYXgoe1xuICAgICAgLy91cmw6ICdodHRwOi8vMTI3LjAuMC4xOjUwMDAvc2lnbmFsX3RvX3Byb3NwZWN0JyxcbiAgICAgIHVybDogJ2h0dHBzOi8vbmFtZWxlc3MtcmV0cmVhdC0zNTI1Lmhlcm9rdWFwcC5jb20vc2lnbmFsX3RvX3Byb3NwZWN0JyxcbiAgICAgIGRhdGE6IHthbGxfc2lnbmFsczp0cnVlLCByZXBvcnRfaWQ6IHJlcG9ydF9pZCwgXG4gICAgICAgICAgICAgc2lnbmFsX3R5cGU6IHRoaXNzLnN0YXRlLmN1cnJlbnRTaWduYWx9LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IGNvbnNvbGUubG9nKHJlcyl9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2VUZXh0KX0sXG4gICAgfSlcbiAgfVxufSk7XG5cbnZhciBDb21wYW55SGlyaW5nU2lnbmFsUm93ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ29tcGFueUhpcmluZ1NpZ25hbFJvdycsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgLy9jb25zb2xlLmxvZyhjb21wYW55KVxuICAgIGNvbXBhbnkgPSAodGhpcy5wcm9wcy5zaWduYWwpID8gdGhpcy5wcm9wcy5zaWduYWwgOiB7fVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udHIoe3N0eWxlOiB7fX0sIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInLHdpZHRoOjEyMH19LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgXG4gICAgICAgICAgICBtb21lbnQodGhpcy5wcm9wcy5zaWduYWwuY3JlYXRlZEF0KS5mcm9tTm93KClcbiAgICAgICAgICApXG4gICAgICAgICksIFxuXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgY29tcGFueS5uYW1lKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIGNvbXBhbnkucmV2ZW51ZSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwifSwgY29tcGFueS53ZWJzaXRlVXJsKSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBjb21wYW55LmNpdHkpXG4gICAgICAgICksIFxuXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBcbiAgICAgICAgICAodGhpcy5wcm9wcy5hbGxQcm9zcGVjdGVkKSA/IFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzIGRpc2FibGVkXCIsIFxuICAgICAgICAgICAgc3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJ319LCBcbiAgICAgICAgICAgIFwiUHJvc3BlY3RlZFwiXG4gICAgICAgICAgKSA6IFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzXCIsIFxuICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy50dXJuQ29tcGFueVNpZ25hbFRvUHJvc3BlY3QsIFxuICAgICAgICAgICAgc3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJ319LCBcbiAgICAgICAgICAgIFwiUHJvc3BlY3RcIlxuICAgICAgICAgIClcbiAgICAgICAgKVxuXG4gICAgICApXG4gICAgKVxuICB9LFxuICB0dXJuQ29tcGFueVNpZ25hbFRvUHJvc3BlY3Q6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgJC5hamF4KHtcbiAgICAgIC8vdXJsOiAnaHR0cHM6Ly9uYW1lbGVzcy1yZXRyZWF0LScsXG4gICAgICAvL3VybDogJ2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC9zaWduYWxfdG9fcHJvc3BlY3QnLFxuICAgICAgdXJsOiAnaHR0cHM6Ly9uYW1lbGVzcy1yZXRyZWF0LTM1MjUuaGVyb2t1YXBwLmNvbS9zaWduYWxfdG9fcHJvc3BlY3QnLFxuICAgICAgZGF0YToge2FsbF9zaWduYWxzOmZhbHNlLCBzaWduYWxfaWQ6IGNvbXBhbnkub2JqZWN0SWQsXG4gICAgICAgICAgICAgc2lnbmFsX3R5cGU6ICdDb21wYW55U2lnbmFsJ30sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgY29uc29sZS5sb2cocmVzKX0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUubG9nKGVyci5yZXNwb25zZVRleHQpfSxcbiAgICB9KVxuICB9XG59KVxuXG52YXIgUGVvcGxlU2lnbmFsUm93ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnUGVvcGxlU2lnbmFsUm93JyxcbiAgdHVyblNpZ25hbEludG9Qcm9zcGVjdDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRoaXNzID0gdGhpcztcbiAgICBjb25zb2xlLmxvZyh0aGlzLnByb3BzLnNpZ25hbClcbiAgICAkLmFqYXgoe1xuICAgICAgLy91cmw6J2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC9zaWduYWxfdG9fcHJvc3BlY3QnLFxuICAgICAgdXJsOidodHRwOi8vbmFtZWxlc3MtcmV0cmVhdC0zNTI1Lmhlcm9rdWFwcC5jb20vc2lnbmFsX3RvX3Byb3NwZWN0JyxcbiAgICAgIGRhdGE6IHtzaWduYWxfaWQ6IHRoaXNzLnByb3BzLnNpZ25hbC5vYmplY3RJZCwgc2lnbmFsX3R5cGU6J1Blb3BsZVNpZ25hbCcsXG4gICAgICAgICAgICAgYWxsX3NpZ25hbHM6ZmFsc2V9LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IGNvbnNvbGUubG9nKHJlcykgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlVGV4dCkgfSBcbiAgICB9KVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgLy9jb25zb2xlLmxvZyhjb21wYW55KVxuICAgIHBlb3BsZSA9ICh0aGlzLnByb3BzLnNpZ25hbCkgPyB0aGlzLnByb3BzLnNpZ25hbCA6IHt9XG4gICAgY29tcGFueSA9IChwZW9wbGUuY29tcGFueV9zaWduYWwpID8gcGVvcGxlLmNvbXBhbnlfc2lnbmFsIDoge31cbiAgICBuYW1lID0gcGVvcGxlLmxpbmtfdGV4dC5zcGxpdCgnfCcpWzBdXG4gICAgLy9jaXR5ID0gcGVvcGxlLnNwbGl0KCctJylbMF1cbiAgICBjaXR5ID0gXCJcIlxuICAgIC8vY29uc29sZS5sb2cocGVvcGxlKVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udHIoe3N0eWxlOiB7fX0sIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInLHdpZHRoOjEyMH19LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgXG4gICAgICAgICAgICBtb21lbnQodGhpcy5wcm9wcy5zaWduYWwuY3JlYXRlZEF0KS5mcm9tTm93KClcbiAgICAgICAgICApXG4gICAgICAgICksIFxuXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7Zm9udFNpemU6MTMsIGZvbnRXZWlnaHQ6J2JvbGQnfX0sIG5hbWUpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7Zm9udFN0eWxlOidpdGFsaWMnfX0sIFwiIFwiLCBwZW9wbGUudGl0bGUpXG4gICAgICAgICksIFxuXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7Zm9udFNpemU6MTMsIGZvbnRXZWlnaHQ6J2JvbGQnfX0sIHBlb3BsZS5wcm9zcGVjdF9jb21wYW55LCBcIiBcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtmb250U3R5bGU6J2l0YWxpYyd9fSwgcGVvcGxlLmluZHVzdHJ5KSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIHBlb3BsZS5jb21wYW55X3NpemUsIFwiIFwiLCBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtmb250U3R5bGU6J2l0YWxpYyd9fVxuICAgICAgICAgICksIFJlYWN0LkRPTS5hKHtocmVmOiBwZW9wbGUud2Vic2l0ZX0sIHBlb3BsZS53ZWJzaXRlKSlcbiAgICAgICAgICBcbiAgICAgICAgKSwgXG5cbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgICh0aGlzLnByb3BzLmFsbFByb3NwZWN0ZWQpID8gXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHMgZGlzYWJsZWRcIiwgXG4gICAgICAgICAgICBzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnfX0sIFxuICAgICAgICAgICAgXCJQcm9zcGVjdGVkXCJcbiAgICAgICAgICAgICkgOiBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14c1wiLCBcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnR1cm5TaWduYWxJbnRvUHJvc3BlY3QsIFxuICAgICAgICAgICAgc3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJ319LCBcbiAgICAgICAgICAgIFwiUHJvc3BlY3RcIlxuICAgICAgICAgIClcbiAgICAgICAgICBcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfVxufSlcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBTaWduYWxMb2FkaW5nXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvdW50OiAnficsXG4gICAgICBwcm9zcGVjdE5hbWUgOiAnficsXG4gICAgICBwcm9zcGVjdFRpdGxlIDogJ34nLFxuICAgICAgY29tcGFueU5hbWUgOiAnficsXG4gICAgfVxuICB9LFxuXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgdmFyIHB1c2hlciA9IG5ldyBQdXNoZXIoJzFhNjhhOTZjOGZkZTkzOGZhNzVhJyk7XG4gICAgb2JqZWN0SWQgPSB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm9iamVjdElkXG4gICAgdmFyIGNoYW5uZWwgPSBwdXNoZXIuc3Vic2NyaWJlKG9iamVjdElkKTtcbiAgICBjaGFubmVsLmJpbmQoXCJteS1ldmVudFwiLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKVxuICAgICAgdGhpc3Muc2V0U3RhdGUoe1xuICAgICAgICBjb3VudDogZGF0YS5jb3VudCxcbiAgICAgICAgcHJvc3BlY3ROYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgIHByb3NwZWN0VGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgIGNvbXBhbnlOYW1lOiBkYXRhLmNvbXBhbnlcbiAgICAgIH0pXG4gICAgfSk7XG5cbiAgICAvLyBHZXQgU2lnbmFsIFJlcG9ydCBDb3VudFxuICAgIC8vIEdldCBMYXN0IFBlb3BsZVNpZ25hbCBGb3VuZFxuICAgIHFyeSA9IHsgcHJvZmlsZTogYXBwQ29uZmlnLnBvaW50ZXIoJ1Byb3NwZWN0UHJvZmlsZScsb2JqZWN0SWQpIH1cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1NpZ25hbFJlcG9ydCcsXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgZGF0YTogeyd3aGVyZSc6SlNPTi5zdHJpbmdpZnkocXJ5KSxvcmRlcjonLWNyZWF0ZWRBdCd9LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2cocmVzKVxuICAgICAgICBjb3VudCA9IChyZXMucmVzdWx0c1swXSkgPyByZXMucmVzdWx0c1swXS5wZW9wbGVfY291bnQgOiAwXG4gICAgICAgIFxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7Y291bnQ6IGNvdW50IH0pXG4gICAgICB9LFxuICAgIH0pO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUGVvcGxlU2lnbmFsJyxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBkYXRhOiB7J3doZXJlJzpKU09OLnN0cmluZ2lmeShxcnkpLG9yZGVyOictY3JlYXRlZEF0J30sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtcbiAgICAgICAgICBwcm9zcGVjdE5hbWU6IChyZXMucmVzdWx0c1swXSkgPyByZXMucmVzdWx0c1swXS5saW5rX3RleHQgOiBcIlwiLFxuICAgICAgICAgIHByb3NwZWN0VGl0bGU6IChyZXMucmVzdWx0c1swXSkgPyByZXMucmVzdWx0c1swXS50aXRsZSA6IFwiXCIsXG4gICAgICAgICAgY29tcGFueU5hbWU6IChyZXMucmVzdWx0c1swXSkgPyByZXMucmVzdWx0c1swXS5jb21wYW55IDogXCJcIlxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICB9KTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgUHVzaGVyLmxvZyA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgIGlmICh3aW5kb3cuY29uc29sZSAmJiB3aW5kb3cuY29uc29sZS5sb2cpIHtcbiAgICAgICAgLy93aW5kb3cuY29uc29sZS5sb2cobWVzc2FnZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuaW5pdGlhbGl6ZSgpXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgfSxcblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGNvdW50OiAnficsXG4gICAgICBwcm9zcGVjdE5hbWUgOiAnficsXG4gICAgICBwcm9zcGVjdFRpdGxlIDogJ34nLFxuICAgICAgY29tcGFueU5hbWUgOiAnficsXG4gICAgfSlcbiAgICB0aGlzLmluaXRpYWxpemUoKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgLy8gU2hvdyBjb21wYW5pZXMgZm9yIGhpcmluZyBzaWduYWxzXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7YmFja2dyb3VuZDonbGluZWFyLWdyYWRpZW50KCNkYWU4ZmYsI2RhZThmZiknLCBiYWNrZ3JvdW5kSW1hZ2U6ICdyYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IGNlbnRlciBjZW50ZXIsI2ZmZiwjZGZmMWZkIDkwMHB4KScsaGVpZ2h0OicxMDAlJyxwYWRkaW5nVG9wOjEwfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwic2lnbmFsLWNhcmRcIiwgc3R5bGU6IHtcbiAgICAgICAgICAgIHdpZHRoOjUwMCx0ZXh0QWxpZ246J2NlbnRlcicsZGlzcGxheTonYmxvY2snLG1hcmdpblJpZ2h0OidhdXRvJyxcbiAgICAgICAgICAgIG1hcmdpbkxlZnQ6J2F1dG8nLG1hcmdpblRvcDoxMDAsaGVpZ2h0OjIwMFxuICAgICAgICAgIH19LCBcblxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibG9hZGluZy10d28tYmFsbHNcIiwgc3R5bGU6IHtoZWlnaHQ6MjAsd2lkdGg6MjB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRvdDFcIiwgc3R5bGU6IHtjb2xvcjoncmVkJ319KSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRvdDJcIiwgc3R5bGU6IHtjb2xvcjoncmVkJ319KVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7aWQ6IFwiXCIsIHN0eWxlOiB7Y29sb3I6JyMxY2EzZmQnLCBmb250V2VpZ2h0Oidib2xkJyxtYXJnaW5Ub3A6LTI1LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OjAsIGZvbnRTaXplOjMyLCBmb250RmFtaWx5OidQcm94aW1hLU5vdmEnfX0sIFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5jb3VudCArIFwiIHBlb3BsZSBmb3VuZC5cIlxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6NTUsbWFyZ2luUmlnaHQ6NTV9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luQm90dG9tOjMsIGZvbnRXZWlnaHQ6J2JvbGQnfX0sIHRoaXMuc3RhdGUucHJvc3BlY3ROYW1lLnNwbGl0KCd8JylbMF0uc3BsaXQoJy0nKVswXS5zcGxpdCgnLCcpWzBdLCBcIiAtIMKgXCIsIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtmb250V2VpZ2h0OjUwMCwgZm9udFN0eWxlOidpdGFsaWMnfX0sIFxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucHJvc3BlY3RUaXRsZSkpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5Ub3A6MCx0ZXh0QWxpZ246J2xlZnQnfX0sIFxuICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNvbXBhbnlOYW1lLm5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH0sXG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBQYW5lbCBGb290aW5nXG4gIHBhZ2luYXRlUHJldmlvdXM6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBxcnkgPSB7XG4gICAgICB3aGVyZTogSlNPTi5zdHJpbmdpZnkoe2FyY2hpdmVkOnskaW46IFtmYWxzZSwgbnVsbF19fSksXG4gICAgICBvcmRlcjogJy1jcmVhdGVkQXQnLCBjb3VudDogMSxcbiAgICAgIHNraXA6ICh0aGlzLnByb3BzLmN1cnJlbnRQYWdlLTIpKnRoaXMucHJvcHMucHJvc3BlY3RzUGVyUGFnZSxcbiAgICAgIGxpbWl0OiB0aGlzLnByb3BzLnByb3NwZWN0c1BlclBhZ2UsXG4gICAgICBpbmNsdWRlOiAnY29tcGFueSdcbiAgICB9XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvJytfdGhpcy5wcm9wcy5wcm9zcGVjdFR5cGUsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdiZWZvcmUgU2VuZCcpXG4gICAgICAgIF90aGlzLnByb3BzLnNldFBhZ2luYXRlKHRydWUpXG4gICAgICB9LFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIGRhdGE6IHFyeSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgX3RoaXMucHJvcHMucGFnaW5hdGUocmVzLnJlc3VsdHMsIF90aGlzLnByb3BzLmN1cnJlbnRQYWdlIC0gMSlcbiAgICAgICAgX3RoaXMucHJvcHMuc2V0UGFnaW5hdGUoZmFsc2UpXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlcyl7IGNvbnNvbGUubG9nKHJlcykgfVxuICAgIH0pO1xuICB9LFxuXG4gIHBhZ2luYXRlOiBmdW5jdGlvbihkaXJlY3Rpb24pIHtcbiAgICB2YXIgX3RoaXM9dGhpcztcbiAgICBwcm9zcGVjdHNQZXJQYWdlID0gdGhpcy5wcm9wcy5wcm9zcGVjdHNQZXJQYWdlXG4gICAgcXJ5ID0ge2NvdW50OiB0cnVlfVxuICAgIGlmKGRpcmVjdGlvbj09J3ByZXZpb3VzJylcbiAgICAgIHFyeS5za2lwID0gKHRoaXMucHJvcHMuY3VycmVudFBhZ2UgLSAyKSpwcm9zcGVjdHNQZXJQYWdlXG4gICAgZWxzZSBpZihkaXJlY3Rpb249PVwiZm9yd2FyZFwiKVxuICAgICAgcXJ5LnNraXAgPSB0aGlzLnByb3BzLmN1cnJlbnRQYWdlKnByb3NwZWN0c1BlclBhZ2VcblxuICAgIFBhcnNlLmdldCh0aGlzLnByb3BzLnByb3NwZWN0VHlwZSwgcXJ5KS5kb25lKGZ1bmN0aW9uKHJlcykge1xuICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICB0aGlzLnByb3BzLnBhZ2luYXRlKHJlcy5yZXN1bHRzLCBfdGhpcy5wcm9wcy5jdXJyZW50UGFnZSArIDEpXG4gICAgfSlcbiAgfSxcblxuICBwYWdpbmF0ZUZvcndhcmQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgcXJ5ID0ge1xuICAgICAgd2hlcmU6IEpTT04uc3RyaW5naWZ5KHsgYXJjaGl2ZWQ6IHskaW46W2ZhbHNlLCBudWxsXSB9fSksXG4gICAgICBvcmRlcjogJy1jcmVhdGVkQXQnLCBjb3VudDogMSxcbiAgICAgIHNraXA6IHRoaXMucHJvcHMuY3VycmVudFBhZ2UqdGhpcy5wcm9wcy5wcm9zcGVjdHNQZXJQYWdlLFxuICAgICAgbGltaXQ6IHRoaXMucHJvcHMucHJvc3BlY3RzUGVyUGFnZSxcbiAgICAgIGluY2x1ZGU6ICdjb21wYW55JyxcbiAgICB9XG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK190aGlzLnByb3BzLnByb3NwZWN0VHlwZSxcbiAgICAgIHR5cGU6J0dFVCcsXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIF90aGlzLnByb3BzLnNldFBhZ2luYXRlKHRydWUpXG4gICAgICB9LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICBfdGhpcy5wcm9wcy5wYWdpbmF0ZShyZXMucmVzdWx0cywgX3RoaXMucHJvcHMuY3VycmVudFBhZ2UgKyAxKVxuICAgICAgICBfdGhpcy5wcm9wcy5zZXRQYWdpbmF0ZShmYWxzZSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24ocmVzKXsgY29uc29sZS5sb2cocmVzKTsgfVxuICAgIH0pO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICBwYWdpbmF0ZUZvcndhcmQgPSB0aGlzLnBhZ2luYXRlRm9yd2FyZFxuICAgIHBhZ2luYXRlUHJldmlvdXMgPSB0aGlzLnBhZ2luYXRlUHJldmlvdXNcblxuICAgIE1vdXNldHJhcC5iaW5kKCdsJywgZnVuY3Rpb24oKSB7IFxuICAgICAgY29uc29sZS5sb2coJ25ldyBmb3J3YXJkJylcbiAgICAgIHBhZ2luYXRlRm9yd2FyZCgpXG4gICAgfSk7XG5cbiAgICBNb3VzZXRyYXAuYmluZCgnaCcsIGZ1bmN0aW9uKCkgeyBcbiAgICAgIGNvbnNvbGUubG9nKCduZXcgYmFjaycpXG4gICAgICBwYWdpbmF0ZVByZXZpb3VzKClcbiAgICB9KTtcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIC8vIEFkZCBTdXBwb3J0IEZvciBDdXJyZW50IExpc3RcbiAgICAvLyBDdXJyZW50IExpc3RcbiAgICAvL2NvbnNvbGUubG9nKCdjdXJyZW50IHBhZ2UnKVxuICAgIC8vY29uc29sZS5sb2codGhpcy5wcm9wcy5jdXJyZW50UGFnZSlcbiAgICAvL2NvbnNvbGUubG9nKHRoaXMucHJvcHMuY291bnQpXG5cbiAgICBwcmV2aW91cyA9ICh0aGlzLnByb3BzLmN1cnJlbnRQYWdlIC0gMSkgPyAnJyA6ICdkaXNhYmxlZCdcblxuICAgIGxvd2VyTGltaXQgPSAodGhpcy5wcm9wcy5jdXJyZW50UGFnZS0xKSp0aGlzLnByb3BzLnByb3NwZWN0c1BlclBhZ2VcbiAgICB1cHBlckxpbWl0ID0gdGhpcy5wcm9wcy5jdXJyZW50UGFnZSp0aGlzLnByb3BzLnByb3NwZWN0c1BlclBhZ2VcblxuICAgIGxvd2VyTGltaXQgPSAobG93ZXJMaW1pdCkgPyBsb3dlckxpbWl0IDogMVxuICAgIHVwcGVyTGltaXQgPSAodXBwZXJMaW1pdCA+IHRoaXMucHJvcHMuY291bnQpID8gdGhpcy5wcm9wcy5jb3VudCA6IHVwcGVyTGltaXRcblxuICAgIGxhc3RQYWdlID0gdGhpcy5wcm9wcy5jdXJyZW50UGFnZSA9PSB0aGlzLnByb3BzLnBhZ2VzXG4gICAgbGVzc1RoYW5PbmVQYWdlID0gdXBwZXJMaW1pdCAtIGxvd2VyTGltaXQ8PSB0aGlzLnByb3BzLnByb3NwZWN0c1BlclBhZ2UgLSAyXG4gICAgY29uc29sZS5sb2codGhpcy5wcm9wcy5wcm9zcGVjdHNQZXJQYWdlKVxuICAgIGZvcndhcmQgPSAobGFzdFBhZ2UgfHwgbGVzc1RoYW5PbmVQYWdlKSA/ICdkaXNhYmxlZCcgOiAnJ1xuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1mb290aW5nXCIsIFxuICAgICAgICAgICBpZDogXCJuYXZiYXJcIiwgXG4gICAgICAgICAgIHN0eWxlOiB7aGVpZ2h0OiczNXB4JyxwYWRkaW5nOicwcHgnLCBwYWRkaW5nVG9wOic3cHgnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luUmlnaHQ6NX19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgc3R5bGU6IHttYXJnaW5SaWdodDonNXB4J30sIFxuICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5mYXN0UHJldmlvdXMsIFxuICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJsdWUtZ3JhZGllbnQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBcIitwcmV2aW91c30sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1mYXN0LWJhY2t3YXJkXCJ9KVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucGFnaW5hdGVQcmV2aW91cywgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcInBhZ2luYXRlLWJhY2stYnRuIGJsdWUtZ3JhZGllbnQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBcIitwcmV2aW91c30sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jaGV2cm9uLWxlZnRcIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7bWFyZ2luTGVmdDo1LCBtYXJnaW5SaWdodDo1LGRpc3BsYXk6J2lubGluZScsd2lkdGg6JzEwMCUnLCB0ZXh0QWxpZ246J2NlbnRlcid9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6ICh0aGlzLnByb3BzLmNvdW50KSA/IHt9OntkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgbG93ZXJMaW1pdCsnIC0gJywgXCIgXCIpLCBcIiBcIiwgdXBwZXJMaW1pdCsnIG9mICcrdGhpcy5wcm9wcy5jb3VudFxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucGFnaW5hdGVGb3J3YXJkLCBcbiAgICAgICAgICAgICBjbGFzc05hbWU6IFwicGFnaW5hdGUtZm9yd2FyZC1idG4gYmx1ZS1ncmFkaWVudCBidG4gYnRuLXByaW1hcnkgYnRuLXhzIFwiK2ZvcndhcmR9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2hldnJvbi1yaWdodFwifSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICBzdHlsZToge21hcmdpbkxlZnQ6JzVweCd9LCBcbiAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmZhc3RGb3J3YXJkLCBcbiAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYmx1ZS1ncmFkaWVudCBidG4gYnRuLXByaW1hcnkgYnRuLXhzIFwiK2ZvcndhcmR9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZmFzdC1mb3J3YXJkXCJ9KSlcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICApO1xuICB9LCBcblxuICBmYXN0UHJldmlvdXM6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgcXJ5ID0ge1xuICAgICAgd2hlcmU6IEpTT04uc3RyaW5naWZ5KHsgdXNlcl9jb21wYW55OiBQYXJzZS51c2VyX2NvbXBhbnksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJjaGl2ZWQ6eyRpbjogW251bGwsIGZhbHNlXX19KSxcbiAgICAgIG9yZGVyOiAnLWNyZWF0ZWRBdCcsXG4gICAgICBjb3VudDogMSxcbiAgICAgIGxpbWl0OiB0aGlzcy5wcm9wcy5wcm9zcGVjdHNQZXJQYWdlLFxuICAgICAgaW5jbHVkZTogJ2NvbXBhbnknXG4gICAgfVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvJyt0aGlzcy5wcm9wcy5wcm9zcGVjdFR5cGUsXG4gICAgICBkYXRhOiBxcnksXG4gICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2JlZm9yZSBTZW5kJylcbiAgICAgICAgdGhpc3MucHJvcHMuc2V0UGFnaW5hdGUodHJ1ZSlcbiAgICAgIH0sXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7IGNvbnNvbGUubG9nKHJlcy5yZXN1bHRzKSBcbiAgICAgICAgdGhpc3MucHJvcHMucGFnaW5hdGUocmVzLnJlc3VsdHMsIDEpXG4gICAgICAgIHRoaXNzLnByb3BzLnNldFBhZ2luYXRlKGZhbHNlKVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlVGV4dCkgfVxuICAgIH0pXG4gIH0sXG5cbiAgZmFzdEZvcndhcmQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgY29uc29sZS5sb2coJ2Zhc3QgZm9yd2FyZCcpXG4gICAgY29uc29sZS5sb2codGhpc3MucHJvcHMuY291bnQgLSB0aGlzcy5wcm9wcy5wcm9zcGVjdHNQZXJQYWdlKVxuICAgIF9wcm9zcCA9IHRoaXMucHJvcHMucHJvc3BlY3RzUGVyUGFnZVxuICAgIHFyeSA9IHtcbiAgICAgIHdoZXJlOiBKU09OLnN0cmluZ2lmeSh7IHVzZXJfY29tcGFueTogUGFyc2UudXNlcl9jb21wYW55LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyY2hpdmVkOnskaW46IFtudWxsLCBmYWxzZV19fSksXG4gICAgICBvcmRlcjogJy1jcmVhdGVkQXQnLFxuICAgICAgY291bnQ6IDEsXG4gICAgICBza2lwOiBNYXRoLmZsb29yKHRoaXNzLnByb3BzLmNvdW50IC8gX3Byb3NwKSpfcHJvc3AsXG4gICAgICBsaW1pdDogdGhpc3MucHJvcHMuY291bnQgLSB0aGlzcy5wcm9wcy5wcm9zcGVjdHNQZXJQYWdlLFxuICAgICAgaW5jbHVkZTogJ2NvbXBhbnknXG4gICAgfVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvJyt0aGlzcy5wcm9wcy5wcm9zcGVjdFR5cGUsXG4gICAgICBkYXRhOiBxcnksXG4gICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2JlZm9yZSBTZW5kJylcbiAgICAgICAgdGhpc3MucHJvcHMuc2V0UGFnaW5hdGUodHJ1ZSlcbiAgICAgIH0sXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7IGNvbnNvbGUubG9nKHJlcy5yZXN1bHRzKSBcbiAgICAgICAgcGFnZSA9IE1hdGguY2VpbCh0aGlzcy5wcm9wcy5jb3VudCAvIDUwKVxuICAgICAgICB0aGlzcy5wcm9wcy5wYWdpbmF0ZShyZXMucmVzdWx0cywgcGFnZSlcbiAgICAgICAgdGhpc3MucHJvcHMuc2V0UGFnaW5hdGUoZmFsc2UpXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2VUZXh0KSB9XG4gICAgfSlcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBTaWduYWxDYXJkXG4gIHByb3NwZWN0UGVyc29uOiBmdW5jdGlvbigpIHtcbiAgICAvLyBBZGQgVG8gU2lnbmFsIExpc3RcbiAgICAvLyBBZGQgQ29tcGFueVxuICAgIC8vIEFkZCBQcm9zcGVjdFxuICAgIHBlcnNvbiA9IHRoaXMucHJvcHMucGVyc29uXG4gICAgcGVyc29uSWQgPSBwZXJzb24ub2JqZWN0SWRcbiAgICBjb21wYW55ID0gdGhpcy5wcm9wcy5wZXJzb24uY29tcGFueVxuICAgIGNvbXBhbnlJZCA9IGNvbXBhbnkub2JqZWN0SWRcbiAgICBwZXJzb24uc2lnbmFsSWQgPSBwZXJzb24uc2lnbmFsSWRcbiAgICBjb21wYW55LnNpZ25hbElkID0gY29tcGFueS5vYmplY3RJZFxuICAgIHAgPSBwZXJzb247IGMgPSBjb21wYW55O1xuICAgIGRlbGV0ZSBwLm9iamVjdElkOyBkZWxldGUgYy5vYmplY3RJZDtcbiAgICBkZWxldGUgcC5jbGFzc05hbWU7IGRlbGV0ZSBjLmNsYXNzTmFtZTtcbiAgICBkZWxldGUgcC5fX3R5cGU7IGRlbGV0ZSBjLl9fdHlwZTtcbiAgICBkZWxldGUgcC5jcmVhdGVkQXQ7IGRlbGV0ZSBjLmNyZWF0ZWRBdDtcbiAgICBkZWxldGUgcC51cGRhdGVkQXQ7IGRlbGV0ZSBjLnVwZGF0ZWRBdDtcbiAgICBwLmNvbXBhbnlTaWduYWwgPSBwLmNvbXBhbnlcbiAgICBkZWxldGUgcC5jb21wYW55XG5cbiAgICBwLmxpbmtlZGluX3VybCA9IHAudXJsXG4gICAgcC5jb21wYW55ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLmNvbXBhbnlcbiAgICBwLmFyY2hpdmVkID0gdHJ1ZVxuICAgIHAubG9hZGluZyA9IHRydWVcbiAgICBwLmNpdHkgPSBwLnRpdGxlLnNwbGl0KCctJylbMF1cbiAgICBwLnBvcyA9IHAudGl0bGUuc3BsaXQoJy0nKS5zbGljZSgtMSlbMF0uc3BsaXQoJyBhdCAnKVswXVxuICAgIHAuY29tcGFueV9uYW1lID0gcC50aXRsZS5zcGxpdCgnLScpLnNsaWNlKC0xKVswXS5zcGxpdCgnIGF0ICcpLnNsaWNlKC0xKVswXSBcbiAgICBuYW1lID0gcC5saW5rX3RleHQuc3BsaXQoJ3wnKVswXVxuICAgIG5hbWUgPSBuYW1lLnNwbGl0KCctJylbMF1cbiAgICBwLm5hbWUgPSBuYW1lXG4gICAgcC53ZWJzaXRlVXJsID0gY29tcGFueS53ZWJzaXRlVXJsXG4gICAgLy8gQXV0b21hdGljYWxseSBBZGQgVG8gVGhlIFNpZ25hbCBMaXN0IEl0IEJlbG9uZ3MgVG9cbiAgICBcbiAgICBjb25zb2xlLmxvZyh0aGlzLnByb3BzLnByb2ZpbGUpXG4gICAgcC5saXN0cyA9IFt7J19fdHlwZSc6J1BvaW50ZXInLCdjbGFzc05hbWUnOidQcm9zcGVjdExpc3QnLCdvYmplY3RJZCc6dGhpcy5wcm9wcy5wcm9maWxlLnByb3NwZWN0X2xpc3Qub2JqZWN0SWR9XSBcblxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RzJyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkocCksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUGVvcGxlU2lnbmFsLycrcGVyc29uSWQsXG4gICAgICAgICAgdHlwZTonUFVUJyxcbiAgICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtwcm9zcGVjdElkOiByZXMub2JqZWN0SWQsIHByb3NwZWN0ZWRfb246IERhdGUubm93KCkvMTAwMH0pLFxuICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7IGNvbnNvbGUubG9nKHJlcykgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oKSB7IH1cbiAgICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyB9XG4gICAgfSlcblxuICAgIC8vQ3JlYXRlIENvbXBhbnkgUHJvc3BlY3Qgd2l0aCBQb2ludGVyIHRvIENvbXBhbnlTaWduYWxcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL0NvbXBhbnlQcm9zcGVjdHMnLFxuICAgICAgdHlwZTonUE9TVCcsXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeShjKSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAvL1VwZGF0ZSBDb21wYW55IFNpZ25hbCBXaXRoIFBvaW50ZXIgdG8gQ29tcGFueSBQcm9zcGVjdCBhbmQgZGF0ZSBwcm9zcGVjdGVkXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Db21wYW55U2lnbmFsLycrY29tcGFueUlkLFxuICAgICAgICAgIHR5cGU6J1BVVCcsXG4gICAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7cHJvc3BlY3RJZDogcmVzLm9iamVjdElkLCBwcm9zcGVjdGVkX29uOiBEYXRlLm5vdygpLzEwMDB9KSxcbiAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlcykgeyBjb25zb2xlLmxvZyhyZXMpIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyB9XG4gICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgfVxuICAgIH0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBwZXJzb24gPSB0aGlzLnByb3BzLnBlcnNvblxuICAgIHNpZ25hbCA9IChwZXJzb24uc2lnbmFscykgPyBwZXJzb24uc2lnbmFsc1swXSA6IHt9XG4gICAgXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0IHNpZ25hbC1jYXJkXCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWJvZHlcIiwgc3R5bGU6IHtwYWRkaW5nTGVmdDoyNSwgcGFkZGluZ1JpZ2h0OjI1fX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNChudWxsLCBcbiAgICAgICAgICAgIHBlcnNvbi50aXRsZVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOicxMDAlJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZTogeyBmbG9hdDonbGVmdCcsbWF4V2lkdGg6ICc2MCUnLCB3aGl0ZVNwYWNlOiAnbm93cmFwJyxcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsIHRleHRPdmVyZmxvdzogJ2VsbGlwc2lzJ319LCBcbiAgICAgICAgICAgICAgcGVyc29uLmxpbmtfdGV4dClcbiAgICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7aWQ6IFwic2lnbmFsLXN0dWZmXCIsIFxuICAgICAgICAgICAgc3R5bGU6IChfLmlzRXF1YWwoc2lnbmFsLCB7fSkpID8ge2Rpc3BsYXk6J25vbmUnfSA6IHtkaXNwbGF5OidibG9jayd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIFwiIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWJ1aWxkaW5nXCJ9KSwgXG4gICAgICAgICAgICBcIsKgIFwiLCBzaWduYWwuY29tcGFueSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBcIiBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1tYXAtbWFya2VyXCJ9KSwgXG4gICAgICAgICAgICBcIsKgIFwiLCBzaWduYWwubG9jYXRpb24pLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc3VpdGNhc2VcIn0pLCBcbiAgICAgICAgICAgIFwiwqBcIiwgc2lnbmFsLmpvYl90aXRsZSwgXCIgXCIpXG4gICAgICAgICksIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2Vzc1wiLCBcbiAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucHJvc3BlY3RQZXJzb24sIFxuICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDoxNSwgZm9udFdlaWdodDonYm9sZCcsd2lkdGg6JzEwMCUnfX0sIFxuICAgICAgICAgICAgXCJQcm9zcGVjdCBUaGlzIFBlcnNvblwiKVxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAvLyQoJ2JvZHknKS5jc3Moe292ZXJmbG93OidoaWRkZW4nfSlcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInByaWNpbmctYmFja2dyb3VuZC1pbWFnZVwifSksIFxuICAgICAgICAgIEhlYWRlcihudWxsKSwgXG4gICAgICAgICAgUHJpY2luZ1RhYmxlcyhudWxsKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJ0aGUtZ3JhZGllbnQtMVwiLCBzdHlsZToge2hlaWdodDonMTAwJSd9fSwgXCIgXCIpXG4gICAgICApXG4gICAgKVxuICAgIC8qXG4gICAgICAgICAgICAgIDxhIGhyZWY9XCIjc2lnbnVwXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1sZ1wiIHN0eWxlPXt7ZGlzcGxheTonYmxvY2snLGJhY2tncm91bmRDb2xvcjonIzFjYTNmZCcsZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6JzEzcHgnIH19PkxvZyBJbjwvYT5cbiAgICAqL1xuICB9XG59KTtcblxudmFyIFByaWNpbmdUYWJsZXMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdQcmljaW5nVGFibGVzJyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lclwifSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJyb3cgZmxhdFwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1sZy0zIGNvbC1tZC0zIGNvbC14cy02XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJzaWduYWwtY2FyZCBwbGFuIHBsYW4yXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwicGxhbi1uYW1lXCJ9LCBcIiBJbmRpdmlkdWFsIFwiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcInBsYW4tcHJpY2VcIn0sIFxuICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oMSh7c3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJyxjb2xvcjonIzAyOTRmNSd9fSwgXCIkOTnCoFwiLCBSZWFjdC5ET00uc21hbGwobnVsbCwgXCIvIG1vbnRoXCIpKVxuICAgICAgICAgICAgICAgICAgICApLCBcblxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uc3Ryb25nKG51bGwsIFwiVXAgdG8gMjAwIEVtYWlsIENyZWRpdHNcIiksIFwiIFwiKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgXCJVcCB0byAxIFRlYW0gTWVtYmVyc1wiKSksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtzdHlsZToge3BhZGRpbmc6MH19LCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsKSwgXCIgSW5jbHVkZXM6IFwiKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgJ0VtYWlscyAmIFBob25lIE51bWJlcnMnKSksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFwiIFwiKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIpLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBcIiBcIiksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFwiIFwiKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJcIiwgc3R5bGU6IHtwYWRkaW5nQm90dG9tOjB9fSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcIiNzaWdudXBcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4tbWQgY29vbC1idG5cIn0sIFwiU2lnbiBVcFwiKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgIClcbiAgICAgICAgICksIFxuXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLWxnLTMgY29sLW1kLTMgY29sLXhzLTZcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcInNpZ25hbC1jYXJkIHBsYW4gcGxhbjJcIn0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJwbGFuLW5hbWVcIn0sIFwiIFN0YXJ0dXAgXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwicGxhbi1wcmljZVwifSwgXG4gICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmgxKHtzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLGNvbG9yOicjMDI5NGY1J319LCBcIiQ0OTnCoFwiLCBSZWFjdC5ET00uc21hbGwobnVsbCwgXCIvIG1vbnRoXCIpKVxuICAgICAgICAgICAgICAgICAgICApLCBcblxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uc3Ryb25nKG51bGwsIFwiVXAgdG8gMTAwMCBFbWFpbCBDcmVkaXRzXCIpLCBcIiBcIiksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uc3Ryb25nKG51bGwsIFwiVXAgdG8gMTAgVGVhbSBNZW1iZXJzXCIpKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe3N0eWxlOiB7cGFkZGluZzowfX0sIFwiIFwiLCBSZWFjdC5ET00uc3Ryb25nKG51bGwpLCBcIiBJbmNsdWRlczogXCIpLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsLCAnRW1haWxzICYgUGhvbmUgTnVtYmVycycpKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgXCJRdWljayBTdGFydCBQYWNrYWdlXCIpKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgXCJTaWduYWxzXCIpKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJcIiwgc3R5bGU6IHtwYWRkaW5nQm90dG9tOjB9fSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcIiNzaWdudXBcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4tbWQgY29vbC1idG5cIn0sIFwiU2lnbiBVcFwiKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgIClcbiAgICAgICAgICksIFxuXG4gICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLWxnLTMgY29sLW1kLTMgY29sLXhzLTZcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwic2lnbmFsLWNhcmQgcGxhbiBwbGFuMyBmZWF0dXJlZFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwicGxhbi1uYW1lXCJ9LCBcIiBHcm93dGggXCIpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJwbGFuLXByaWNlXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oMSh7c3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJyxjb2xvcjonIzAyOTRmNSd9fSwgXCIkMTI5OcKgXCIsIFJlYWN0LkRPTS5zbWFsbChudWxsLCBcIi8gbW9udGhcIikpXG4gICAgICAgICAgICAgICAgKSwgXG5cbiAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsLCBcIlVwIHRvIDI1MDAgRW1haWwgQ3JlZGl0c1wiKSwgXCIgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsLCBcIlVwIHRvIDI1IFRlYW0gTWVtYmVyc1wiKSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtzdHlsZToge3BhZGRpbmc6MH19LCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsKSwgXCIgSW5jbHVkZXM6IFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgXCJBbGwgU3RhcnR1cCBGZWF0dXJlcyBcIikpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHtwYWRkaW5nOjB9fSwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSkpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsLCBcIkJ1bGsgQ1JNIEludGVncmF0aW9uXCIpKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgXCJNaW5pbmcgSm9ic1wiKSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwiXCIsIHN0eWxlOiB7cGFkZGluZ0JvdHRvbTowfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCIjc2lnbnVwXCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgYnRuLW1kIGNvb2wtYnRuXCJ9LCBcIlNpZ24gVXBcIilcbiAgICAgICAgICAgIClcbiAgICAgICAgIClcbiAgICAgKSwgXG5cbiAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1sZy0zIGNvbC1tZC0zIGNvbC14cy02XCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwic2lnbmFsLWNhcmQgcGxhbiBwbGFuNFwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJwbGFuLW5hbWVcIn0sIFwiIFByZW1pdW0gXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcInBsYW4tcHJpY2VcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaDEoe3N0eWxlOiB7Zm9udFdlaWdodDonYm9sZCcsY29sb3I6JyMwMjk0ZjUnfX0sIFwiJDI5OTnCoFwiLCBSZWFjdC5ET00uc21hbGwobnVsbCwgXCIvIG1vbnRoXCIpKVxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgXCJVcCB0byA3NTAwIEVtYWlsIENyZWRpdHNcIiksIFwiIFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCwgXCJVcCB0byA1MCBUZWFtIE1lbWJlcnNcIikpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHtwYWRkaW5nOjB9fSwgXCIgXCIsIFJlYWN0LkRPTS5zdHJvbmcobnVsbCksIFwiIEluY2x1ZGVzOiBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uc3Ryb25nKG51bGwsIFwiQWxsIEdyb3d0aCBGZWF0dXJlcyBcIikpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHtwYWRkaW5nOjB9fSwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSkpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBcIiBcIiwgUmVhY3QuRE9NLnN0cm9uZyhudWxsLCBcIkRlZGljYXRlZCBIYXBwaW5lc3MgT2ZmaWNlclwiKSksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uc3Ryb25nKG51bGwsIFwiSW1wcm92ZWQgdGVycml0b3J5IHBsYW5uaW5nXCIpKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJcIiwgc3R5bGU6IHtwYWRkaW5nQm90dG9tOjB9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcIiNzaWdudXBcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4tbWQgY29vbC1idG5cIn0sIFwiU2lnbiBVcFwiKVxuICAgICAgICAgICAgKVxuICAgICAgICAgKVxuICAgICAgIClcblxuKVxuXG4pXG4gICAgICApXG4gICAgKTtcbiAgfSxcbn0pO1xuXG52YXIgSGVhZGVyID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnSGVhZGVyJyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBSZWFjdC5ET00ubmF2KHtjbGFzc05hbWU6IFwidGhlbmF2YmFyIG5hdmJhciBuYXZiYXItZGVmYXVsdFwiLCByb2xlOiBcIm5hdmlnYXRpb25cIiwgc3R5bGU6IHtwYWRkaW5nOjcwfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb250YWluZXItZmx1aWRcIiwgc3R5bGU6IHtmb250RmFtaWx5Oidwcm94aW1hLW5vdmEnLCBmb250U2l6ZToxMn19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcIiNcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmltZyh7Y2xhc3NOYW1lOiBcIlwiLCBzcmM6IFwiYnVpbGQvaW1nL2Z1bGwtbG9nby01LnBuZ1wiLCBzdHlsZToge3dpZHRoOjIyMH19KVxuICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJuYXYgbmF2LXBpbGxzIGxhbmRpbmctcGFnZS1uYXZcIiwgcm9sZTogXCJ0YWJsaXN0XCIsIHN0eWxlOiB7bWFyZ2luUmlnaHQ6MCxmb250U2l6ZToxMSxtYXJnaW5Ub3A6LTcwfX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcImxhbmRpbmctcGFnZS1uYXYtdGFiXCIsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snfSwgaHJlZjogXCIjbG9naW5cIn0sIFwiTE9HSU5cIikpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJsYW5kaW5nLXBhZ2UtbmF2LXRhYlwiLCBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJ30sIGhyZWY6IFwiaHR0cDovL3Jlc291cmNlcy5jdXN0b21lcm9ocS5jb20vdjEuMC9ibG9nXCJ9LCBcIkJMT0dcIikpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJsYW5kaW5nLXBhZ2UtbmF2LXRhYlwiLCBocmVmOiBcImh0dHA6Ly9yZXNvdXJjZXMuY3VzdG9tZXJvaHEuY29tXCJ9LCBcIlJFU09VUkNFU1wiKSksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcImxhbmRpbmctcGFnZS1uYXYtdGFiXCIsIGhyZWY6IFwiaHR0cDovL3Jlc291cmNlcy5jdXN0b21lcm9ocS5jb20vdjEuMC9kaXNjdXNzXCJ9LCBcIktOT1dMRURHRSBCQVNFXCIpKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtjbGFzc05hbWU6IFwibGFuZGluZy1wYWdlLW5hdi10YWJcIiwgaHJlZjogXCIjXCJ9LCBcIisxOTA1LTYxNi03NjAyIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBob25lXCJ9KSkpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCIjc2lnbnVwXCIsIGNsYXNzTmFtZTogXCJidG4tbGcgYnRuIGxvZ2luLWJ0blwiLCBzdHlsZToge2ZvbnRGYW1pbHk6J3Byb3hpbWEtbm92YSd9fSwgXCJUUlkgSVRcIiksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJuYXYgbmF2LXBpbGxzIGxhbmRpbmctcGFnZS1uYXZcIiwgcm9sZTogXCJ0YWJsaXN0XCIsIHN0eWxlOiB7d2lkdGg6NjAwLGZvbnRTaXplOjEzLG1hcmdpblJpZ2h0OjEwMCxtYXJnaW5Ub3A6LTQ1fX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHt3aWR0aDonMjQlJyx0ZXh0QWxpZ246J2NlbnRlcicsZGlzcGxheTonYmxvY2snfX0sIFwiwqBcIiksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHt3aWR0aDonMjQlJyx0ZXh0QWxpZ246J2NlbnRlcicsZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcImxhbmRpbmctcGFnZS1uYXYtdGFiIGxwLWJvdHRvbS1uYXZcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9LCBocmVmOiBcIiNcIn0sIFwiUFJPRFVDVFwiKSksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHt3aWR0aDonMjQlJyx0ZXh0QWxpZ246J2NlbnRlcicsZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcImxhbmRpbmctcGFnZS1uYXYtdGFiIGxwLWJvdHRvbS1uYXZcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9LCBocmVmOiBcIiNcIn0sIFwiREFUQVwiKSksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHt3aWR0aDonMjQlJyx0ZXh0QWxpZ246J2NlbnRlcid9fSwgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJsYW5kaW5nLXBhZ2UtbmF2LXRhYiBscC1ib3R0b20tbmF2XCIsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snfSwgaHJlZjogXCIjcHJvZHVjdC9mZWF0dXJlc1wifSwgXCJGRUFUVVJFU1wiKSksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7c3R5bGU6IHt3aWR0aDonMjQlJyx0ZXh0QWxpZ246J2NlbnRlcicsZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcImxhbmRpbmctcGFnZS1uYXYtdGFiIGxwLWJvdHRvbS1uYXZcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9LCBocmVmOiBcIiNcIn0sIFwiSU5URUdSQVRJT05TXCIpKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtzdHlsZToge3dpZHRoOicyNCUnLHRleHRBbGlnbjonY2VudGVyJ319LCBSZWFjdC5ET00uYSh7Y2xhc3NOYW1lOiBcImxhbmRpbmctcGFnZS1uYXYtdGFiIGxwLWJvdHRvbS1uYXZcIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9LCBocmVmOiBcIiNwcmljaW5nXCJ9LCBcIlBSSUNJTkdcIikpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe3N0eWxlOiB7d2lkdGg6JzI0JScsdGV4dEFsaWduOidjZW50ZXInfX0sIFJlYWN0LkRPTS5hKHtjbGFzc05hbWU6IFwibGFuZGluZy1wYWdlLW5hdi10YWIgbHAtYm90dG9tLW5hdlwiLCBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJ30sIGhyZWY6IFwiI3NlcnZpY2VzXCJ9LCBcIlNFUlZJQ0VTXCIpKVxuICAgICAgICAgICAgICApXG4gICAgICAgIClcbiAgICApXG4gIH1cbn0pXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxuLy9UT0RPIC0gYWJzdHJhY3QgbGlzdHNcbi8vVE9ETyAtIHJlbmFtZSB0aGlzXG52YXIgTGlzdHMgPSByZXF1aXJlKCcuL3NpZGVfbWVudV91c2VyX3Byb3NwZWN0cy5qcy5taW4uanMnKTsgXG5cbnZhciBVc2VyUHJvc3BlY3RIZWFkZXIgPSByZXF1aXJlKCcuL3VzZXJfcHJvc3BlY3RfaGVhZGVyLmpzLm1pbi5qcycpO1xudmFyIFVzZXJQcm9zcGVjdFJvdyA9IHJlcXVpcmUoJy4vdXNlcl9wcm9zcGVjdC5qcy5taW4uanMnKTtcblxuLy92YXIgQ29tcGFueVByb3NwZWN0SGVhZGVyXG52YXIgQ29tcGFueVByb3NwZWN0Um93ID0gcmVxdWlyZSgnLi9kYXRhX3Jvdy5qcy5taW4uanMnKTtcbnZhciBMb2FkaW5nU3Bpbm5lciA9IHJlcXVpcmUoJy4vbG9hZGluZ19zcGlubmVyLmpzLm1pbi5qcycpXG52YXIgU3Bpbm5lciA9IHJlcXVpcmUoJy4vc3Bpbm5lci5qcy5taW4uanMnKVxudmFyIE1lc3NlbmdlciA9IHJlcXVpcmUoJy4vbWVzc2VuZ2VyLmpzLm1pbi5qcycpXG52YXIgUGFuZWxGb290aW5nID0gcmVxdWlyZSgnLi9wYW5lbF9mb290aW5nLmpzLm1pbi5qcycpXG5cbi8vdmFyIENyZWF0ZVByb3NwZWN0TGlzdEZyb21Db21wYW55TGlzdE1vZGFsID0gcmVxdWlyZSgnLi9jcmVhdGVfcHJvc3BlY3RfbGlzdF9mcm9tX2NvbXBhbnlfbGlzdC5qcy5taW4uanMnKVxuLy92YXIgQ3JlYXRlUHJvc3BlY3RQcm9maWxlTW9kYWwgPSByZXF1aXJlKCcuL2NyZWF0ZV90aXRsZV9taW5pbmdfam9iLmpzLm1pbi5qcycpXG4vKlxuICAgICAgPENyZWF0ZVByb3NwZWN0TGlzdEZyb21Db21wYW55TGlzdE1vZGFsIFxuICAgICAgICBjdXJyZW50TGlzdD17dGhpcy5zdGF0ZS5jdXJyZW50TGlzdH0gXG4gICAgICAgIGN1cnJlbnRMaXN0T2JqZWN0SWQ9e3RoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZH0vPlxuICAgICAgPENyZWF0ZVByb3NwZWN0UHJvZmlsZU1vZGFsIFxuICAgICAgICBjdXJyZW50TGlzdD17dGhpcy5zdGF0ZS5jdXJyZW50TGlzdH0gXG4gICAgICAgIGN1cnJlbnRMaXN0T2JqZWN0SWQ9e3RoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZH0vPlxuICAgICAgPFJlbmFtZUxpc3RNb2RhbCByZW5hbWVMaXN0PXt0aGlzLnByb3BzLnJlbmFtZUxpc3R9Lz5cbiAgICAgIDxEZWxldGVMaXN0TW9kYWwgZGVsZXRlTGlzdD17dGhpcy5wcm9wcy5kZWxldGVMaXN0fS8+XG4qL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7ICBwcm9zcGVjdHMgICA6IFtdLFxuICAgICAgICAgICAgICBjdXJyZW50UGFnZSA6IDEsXG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogdGhpcy5wcm9wcy5jbGFzc05hbWUsXG4gICAgICAgICAgICAgIGxpc3RDbGFzc05hbWU6IHRoaXMucHJvcHMubGlzdENsYXNzTmFtZSxcbiAgICAgICAgICAgICAgcGFnZXMgICAgICAgOiAxLFxuICAgICAgICAgICAgICBjdXJyZW50TGlzdCA6ICdBbGwnLFxuICAgICAgICAgICAgICBjdXJyZW50TGlzdE9iamVjdElkIDogJycsXG4gICAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsXG4gICAgICAgICAgICAgIHBhZ2luYXRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBwcm9zcGVjdHNQZXJQYWdlOiA1MCxcbiAgICAgICAgICAgICAgZG93bmxvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBsaXN0cyA6IFtdLFxuICAgICAgICAgICAgICBtYXN0ZXJDaGVja2JveENoZWNrZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICBrZXlib2FyZEFjdGl2ZVByb3NwZWN0OiAwLCAvL2ZpcnN0XG4gICAgICAgICAgICAgIC8vc2VsZWN0ZWRQcm9zcGVjdHM6IFtdLFxuICAgICAgICAgICAgICB0b3RhbENvdW50ICA6IFwiflwiLCBcbiAgICAgICAgICAgICAgZGV0YWlsTW9kZTogZmFsc2UsXG4gICAgICAgICAgICAgIGRldGFpbENvbXBhbnk6IHt9LFxuICAgICAgICAgICAgICBjb3VudCAgICAgICA6IFwiflwiLCB9XG4gIH0sXG5cbiAgc2V0UGFnaW5hdGU6IGZ1bmN0aW9uKHZhbHVlKSB7IHRoaXMuc2V0U3RhdGUoe3BhZ2luYXRpbmc6IHZhbHVlfSkgfSxcbiAgc2V0RG93bmxvYWRpbmc6IGZ1bmN0aW9uKHZhbHVlKSB7IHRoaXMuc2V0U3RhdGUoe2Rvd25sb2FkaW5nOiB2YWx1ZX0pIH0sXG4gIHJlbW92ZVByb3NwZWN0czogZnVuY3Rpb24ob2JqQXJyYXkpIHtcbiAgICBfcHJvc3BlY3RzID0gXy5tYXAodGhpcy5zdGF0ZS5wcm9zcGVjdHMsIGZ1bmN0aW9uKHByb3NwZWN0KSB7XG4gICAgICBjb25zb2xlLmxvZyhvYmpBcnJheS5pbmRleE9mKHByb3NwZWN0Lm9iamVjdElkKSA9PSAtMSlcbiAgICAgIGlmKG9iakFycmF5LmluZGV4T2YocHJvc3BlY3Qub2JqZWN0SWQpID09IC0xKXtcbiAgICAgICAgICByZXR1cm4gcHJvc3BlY3RcbiAgICAgIH1cbiAgICB9KVxuICAgIHRoaXMuc2V0U3RhdGUoe3Byb3NwZWN0czogXy5jb21wYWN0KF9wcm9zcGVjdHMpfSlcbiAgfSxcblxuICBhcmNoaXZlUHJvc3BlY3RzOiBmdW5jdGlvbihvYmplY3RzKSB7XG4gICAgY29uc29sZS5sb2coJ0FSQ0hJVkUnKVxuICAgIG9iamVjdHMgPSAob2JqZWN0cykgPyBvYmplY3RzIDogW11cbiAgICBzZWxlY3RlZFByb3NwZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzKVxuICAgIHNlbGVjdGVkUHJvc3BlY3RzID0gc2VsZWN0ZWRQcm9zcGVjdHMuY29uY2F0KG9iamVjdHMpXG4gICAgcXJ5ID0geydhcmNoaXZlZCc6dHJ1ZX1cbiAgICBjb25zb2xlLmxvZygnc3RhcnRpbmcgcGFyc2UgYXJjaGl2ZScpXG4gICAgUGFyc2UuYmF0Y2hVcGRhdGUodGhpcy5zdGF0ZS5jbGFzc05hbWUsIHNlbGVjdGVkUHJvc3BlY3RzLCBxcnkpLmRvbmUoZnVuY3Rpb24ocmVzKSB7XG4gICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgfSlcbiAgICB0aGlzLnJlbW92ZVByb3NwZWN0cyhzZWxlY3RlZFByb3NwZWN0cylcbiAgICB0b3RhbENvdW50ID0gdGhpcy5zdGF0ZS50b3RhbENvdW50XG4gICAgdGhpcy5zZXRTdGF0ZSh7dG90YWxDb3VudCA6IHRvdGFsQ291bnQgLSAxfSlcblxuICAgIHNlbGVjdGVkID0gXy5tYXAodGhpcy5zdGF0ZS5wcm9zcGVjdHMsIGZ1bmN0aW9uKHByb3NwZWN0KSB7XG4gICAgICBpZihzZWxlY3RlZFByb3NwZWN0cy5pbmRleE9mKHByb3NwZWN0Lm9iamVjdElkKSAhPSAtMSlcbiAgICAgICAgcmV0dXJuIHByb3NwZWN0XG4gICAgfSlcblxuICAgIHNlbGVjdGVkID0gXy5jb21wYWN0KHNlbGVjdGVkKVxuICAgIHNlbGVjdGVkID0gXy5wbHVjayhzZWxlY3RlZCwgJ2xpc3RzJylcbiAgICBzZWxlY3RlZCA9IF8uZmxhdHRlbihzZWxlY3RlZClcbiAgICBzZWxlY3RlZCA9IF8ucGx1Y2soc2VsZWN0ZWQsICdvYmplY3RJZCcpXG4gICAgc2VsZWN0ZWQgPSBfLmNvbXBhY3Qoc2VsZWN0ZWQpXG5cbiAgICBfLm1hcChzZWxlY3RlZCwgZnVuY3Rpb24obGlzdF9pZCkge1xuICAgICAgZGVjcmVtZW50ID0ge2NvdW50OiB7X19vcDogJ0luY3JlbWVudCcsIGFtb3VudDogLTF9fVxuICAgICAgUGFyc2UucHV0KCdQcm9zcGVjdExpc3QvJytsaXN0X2lkLCBkZWNyZW1lbnQsIGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9KVxuICAgIH0pXG4gIH0sXG5cbiAgY2hhbmdlTGlzdDogZnVuY3Rpb24obmV3TGlzdE5hbWUsIG9iamVjdElkKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5zdHJpbmdpZnkoW10pXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBjdXJyZW50TGlzdCA6IG5ld0xpc3ROYW1lLFxuICAgICAgY3VycmVudExpc3RPYmplY3RJZCA6IG9iamVjdElkLFxuICAgICAgcHJvc3BlY3RzICA6IFtdLCAgICBcbiAgICAgIGNvdW50ICAgICAgOiAnficsXG4gICAgICBwYWdlcyAgICAgIDogMSxcbiAgICAgIGxvYWRpbmcgICAgOiB0cnVlLFxuICAgICAgY3VycmVudFBhZ2U6IDEsXG4gICAgICBrZXlib2FyZEFjdGl2ZVByb3NwZWN0OiAwXG4gICAgfSlcblxuICAgIHFyeSA9IHtpbmNsdWRlOiAnY29tcGFueScsIGxpbWl0OiB0aGlzLnN0YXRlLnByb3NwZWN0c1BlclBhZ2UsIGNvdW50OiB0cnVlfVxuICAgIHFyeS53aGVyZSA9IHt9XG4gICAgcXJ5LndoZXJlLmFyY2hpdmVkID0geyRpbjpbbnVsbCwgZmFsc2VdfVxuICAgIGlmIChuZXdMaXN0TmFtZSA9PSAnQXJjaGl2ZWQnKVxuICAgICAgcXJ5LndoZXJlLmFyY2hpdmVkID0gdHJ1ZVxuICAgIGVsc2UgaWYobmV3TGlzdE5hbWUgIT0gXCJBbGxcIilcbiAgICAgIHFyeS53aGVyZS5saXN0cyA9IFBhcnNlLl9wb2ludGVyKHRoaXMuc3RhdGUubGlzdENsYXNzTmFtZSwgb2JqZWN0SWQpXG4gICAgcXJ5LndoZXJlID0gSlNPTi5zdHJpbmdpZnkocXJ5LndoZXJlKVxuICAgIGNvbnNvbGUubG9nKHFyeSlcblxuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgUGFyc2UuZ2V0KHRoaXMuc3RhdGUuY2xhc3NOYW1lLCBxcnkpLmRvbmUoZnVuY3Rpb24ocmVzKSB7XG4gICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHByb3NwZWN0czogcmVzLnJlc3VsdHMsXG4gICAgICAgIGNvdW50OiByZXMuY291bnQsXG4gICAgICAgIHBhZ2VzOiBNYXRoLmNlaWwocmVzLmNvdW50L190aGlzLnByb3BzLnByb3NwZWN0c1BlclBhZ2UpLFxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgIH0pXG4gICAgfSlcbiAgfSxcblxuICBjaGVja2JveEFjdGlvbjogZnVuY3Rpb24oY2hlY2tlZFN0YXRlLCBvYmopIHtcbiAgICBzZWxlY3RlZFByb3NwZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzKVxuICAgIGlmKGNoZWNrZWRTdGF0ZSlcbiAgICAgIHNlbGVjdGVkUHJvc3BlY3RzLnB1c2gob2JqKVxuICAgIGVsc2VcbiAgICAgIHNlbGVjdGVkUHJvc3BlY3RzID0gXy5yZWplY3Qoc2VsZWN0ZWRQcm9zcGVjdHMsZnVuY3Rpb24oaWQpe3JldHVybiBpZCA9PSBvYmp9KVxuXG4gICAgc2VsZWN0ZWRQcm9zcGVjdHMgPSBfLnVuaXEoc2VsZWN0ZWRQcm9zcGVjdHMpXG4gICAgY29uc29sZS5sb2coc2VsZWN0ZWRQcm9zcGVjdHMpXG4gICAgbG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5zdHJpbmdpZnkoc2VsZWN0ZWRQcm9zcGVjdHMpXG4gICAgLy90aGlzLnNldFN0YXRlKHtzZWxlY3RlZFByb3NwZWN0czogc2VsZWN0ZWRQcm9zcGVjdHN9KVxuICB9LFxuXG4gIG1hc3RlckNoZWNrYm94Q2hhbmdlZDogZnVuY3Rpb24obWFzdGVyQ2hlY2tib3hWYWx1ZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe21hc3RlckNoZWNrYm94Q2hlY2tlZDogbWFzdGVyQ2hlY2tib3hWYWx1ZX0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnN0YXJ0S2V5Ym9hcmRTaG9ydGN1dHMoKVxuICAgICQoJ2JvZHknKS5jc3Moe292ZXJmbG93OidhdXRvJ30pXG5cbiAgICBwcm9zcGVjdHMgPSBbXVxuICAgIGZvcihpPTA7aTwgdGhpcy5zdGF0ZS5wcm9zcGVjdHMubGVuZ3RoO2krKykge1xuICAgICAgdXJsID0gdGhpcy5zdGF0ZS5wcm9zcGVjdHNbaV0udXJsXG4gICAgICBwcm9zcGVjdCA9IHRoaXMuc3RhdGUucHJvc3BlY3RzW2ldXG5cbiAgICAgIGtleWJvYXJkU2VsZWN0ZWQgPSAoaSA9PSB0aGlzLnN0YXRlLmtleWJvYXJkQWN0aXZlUHJvc3BlY3QpXG5cbiAgICAgIHNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMpXG4gICAgICBhbHJlYWR5Q2hlY2tlZD1mYWxzZVxuICAgICAgZm9yKGlpPTA7aWk8IHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aDtpaSsrKVxuICAgICAgICBpZihwcm9zcGVjdC5vYmplY3RJZCA9PSBzZWxlY3RlZFByb3NwZWN0c1tpaV0pXG4gICAgICAgICAgYWxyZWFkeUNoZWNrZWQgPSB0cnVlXG5cbiAgICAgIC8vY29uc29sZS5sb2coYWxyZWFkeUNoZWNrZWQpXG5cbiAgICAgIGlmKHRoaXMuc3RhdGUuY2xhc3NOYW1lID09IFwiUHJvc3BlY3RcIikgeyBcbiAgICAgIHByb3NwZWN0cy5wdXNoKFxuICAgICAgICBVc2VyUHJvc3BlY3RSb3coe2RlbGV0ZVByb3NwZWN0OiB0aGlzLmRlbGV0ZVByb3NwZWN0LCBcbiAgICAgICAgICAgICAgICAgICAgICBwcm9zcGVjdDogdGhpcy5zdGF0ZS5wcm9zcGVjdHNbaV0sIFxuICAgICAgICAgICAgICAgICAgICAgIG1hc3RlckNoZWNrYm94Q2hlY2tlZDogdGhpcy5zdGF0ZS5tYXN0ZXJDaGVja2JveENoZWNrZWQsIFxuICAgICAgICAgICAgICAgICAgICAgIGtleTogdGhpcy5nZW5lcmF0ZV9pZCgpLCBcbiAgICAgICAgICAgICAgICAgICAgICBsaW5rOiBcIlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICBhcmNoaXZlUHJvc3BlY3RzOiB0aGlzLmFyY2hpdmVQcm9zcGVjdHMsIFxuICAgICAgICAgICAgICAgICAgICAgIGtleWJvYXJkU2VsZWN0ZWQ6IGtleWJvYXJkU2VsZWN0ZWQsIFxuICAgICAgICAgICAgICAgICAgICAgIGFscmVhZHlDaGVja2VkOiBhbHJlYWR5Q2hlY2tlZCwgXG4gICAgICAgICAgICAgICAgICAgICAgY2hlY2tib3hBY3Rpb246IHRoaXMuY2hlY2tib3hBY3Rpb259XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgIClcbiAgICAgIH0gZWxzZSB7IFxuICAgICAgICBwcm9zcGVjdHMucHVzaChcbiAgICAgICAgICBDb21wYW55UHJvc3BlY3RSb3coe2RlbGV0ZVByb3NwZWN0OiB0aGlzLmRlbGV0ZVByb3NwZWN0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9zcGVjdDogdGhpcy5zdGF0ZS5wcm9zcGVjdHNbaV0sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc3RlckNoZWNrYm94Q2hlY2tlZDogdGhpcy5zdGF0ZS5tYXN0ZXJDaGVja2JveENoZWNrZWQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogdGhpcy5nZW5lcmF0ZV9pZCgpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rOiBcIlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlib2FyZFNlbGVjdGVkOiBrZXlib2FyZFNlbGVjdGVkLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHJlYWR5Q2hlY2tlZDogYWxyZWFkeUNoZWNrZWQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrYm94QWN0aW9uOiB0aGlzLmNoZWNrYm94QWN0aW9ufSlcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICAkKCcjcHJvc3BlY3REZXRhaWxCdXR0b25zJykuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgICAvL2Uuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgLy9zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ICQoJy5kcm9wZG93bicpLnNob3coKSB9LCAzMCk7XG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmKHRoaXMuc3RhdGUuY3VycmVudExpc3QgPT0gXCJBbGxcIil7XG4gICAgICBsaXN0VHlwZSA9IHtkaXNwbGF5Oidub25lJ31cbiAgICAgIGxpc3ROYW1lU3R5bGUgPSB7ZGlzcGxheTonbm9uZSd9XG4gICAgICBsaXN0QnRuID0ge2Rpc3BsYXk6J25vbmUnfVxuICAgICAgbGlzdE9wdGlvbnMgPSB7ZGlzcGxheTonbm9uZSd9XG4gICAgICBjb3B5RHJvcGRvd25TdHlsZSA9IHt3aWR0aDoxMTQsIHJpZ2h0OjR9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpc3RUeXBlID0ge2Zsb2F0OidsZWZ0J31cbiAgICAgIGxpc3ROYW1lU3R5bGUgPSB7ZmxvYXQ6J2xlZnQnLGRpc3BsYXk6J2lubGluZS1ibG9jaycsIGZvbnRXZWlnaHQ6IDIwMCwgbWFyZ2luVG9wOiAxLCBwYWRkaW5nUmlnaHQ6IDEwLCBtYXJnaW5MZWZ0OiAtMTB9XG4gICAgICBsaXN0QnRuID0ge2Zsb2F0OidsZWZ0JyxtYXJnaW5MZWZ0OjV9XG4gICAgICBsaXN0T3B0aW9ucyA9IHtmbG9hdDoncmlnaHQnfVxuICAgICAgY29weURyb3Bkb3duU3R5bGUgPSB7d2lkdGg6MTE0LCByaWdodDozNn1cbiAgICB9XG5cbiAgICBjdXJyZW50TGlzdCAgICAgPSB0aGlzLnN0YXRlLmN1cnJlbnRMaXN0XG4gICAgcGFnaW5hdGVPdmVybGF5ID0gKHRoaXMuc3RhdGUucGFnaW5hdGluZykgPyBQYWdpbmF0ZU92ZXJsYXkobnVsbCkgOiBcIlwiXG4gICAgZG93bmxvYWRJY29uICAgID0gKCF0aGlzLnN0YXRlLmRvd25sb2FkaW5nKSA/IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZG93bmxvYWRcIn0pIDogU3Bpbm5lcih7Y2lyY2xlU3R5bGU6IHtiYWNrZ3JvdW5kQ29sb3I6J3doaXRlJyxoZWlnaHQ6NCx3aWR0aDo0fSwgc3Bpbm5lclN0eWxlOiB7aGVpZ2h0OjEzLCB3aWR0aDoxMyxtYXJnaW46MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snLHBhZGRpbmdUb3A6Mn19KVxuICAgIHByb3NwZWN0VGFibGVTdHlsZSA9ICh0aGlzLnN0YXRlLmNvdW50ID09IDApID8ge2Rpc3BsYXk6J25vbmUnfSA6e2hlaWdodDonNDAwcHgnLG92ZXJmbG93OidhdXRvJ31cblxuICAgIGhlYWRlciA9ICh0aGlzLnByb3BzLmNsYXNzTmFtZSA9PSBcIlByb3NwZWN0XCIpID8gVXNlclByb3NwZWN0SGVhZGVyKHttYXN0ZXJDaGVja2JveENoYW5nZWQ6IHRoaXMubWFzdGVyQ2hlY2tib3hDaGFuZ2VkfSkgOiBDb21wYW55UHJvc3BlY3RIZWFkZXIoe21hc3RlckNoZWNrYm94Q2hhbmdlZDogdGhpcy5tYXN0ZXJDaGVja2JveENoYW5nZWR9KVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb250YWluZXIgcHJvc3BlY3RzLWNvbnRhaW5lclwifSwgXG4gICAgICAgIExpc3RzKHtjdXJyZW50TGlzdDogdGhpcy5zdGF0ZS5jdXJyZW50TGlzdCwgXG4gICAgICAgICAgICAgICBjb3VudDogdGhpcy5zdGF0ZS5jb3VudCwgXG4gICAgICAgICAgICAgICBsaXN0Q2xhc3NOYW1lOiB0aGlzLnN0YXRlLmxpc3RDbGFzc05hbWUsIFxuICAgICAgICAgICAgICAgY3VycmVudExpc3RPYmplY3RJZDogdGhpcy5zdGF0ZS5jdXJyZW50TGlzdE9iamVjdElkLCBcbiAgICAgICAgICAgICAgIHRvdGFsQ291bnQ6IHRoaXMuc3RhdGUudG90YWxDb3VudCwgXG4gICAgICAgICAgICAgICByZW1vdmVQcm9zcGVjdHM6IHRoaXMucmVtb3ZlUHJvc3BlY3RzLCBcbiAgICAgICAgICAgICAgIGNoYW5nZUxpc3Q6IHRoaXMuY2hhbmdlTGlzdCwgXG4gICAgICAgICAgICAgICBjcmVhdGVMaXN0OiB0aGlzLmNyZWF0ZUxpc3QsIFxuICAgICAgICAgICAgICAgbGlzdHM6IHRoaXMuc3RhdGUubGlzdHN9KSwgXG5cbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbGctMTAgY29sLW1kLTEwIGNvbC1zbS0xMCBjb2wteHMtMTBcIiwgc3R5bGU6IHtwYWRkaW5nOicwJ319LCBcbiAgICAgICAgICAgICAgcGFnaW5hdGVPdmVybGF5LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7aWQ6IFwicHJvc3BlY3REZXRhaWxCdXR0b25zXCJ9LCBcbiAgICAgICAgICAgICAgICBMaXN0RGV0YWlsQnV0dG9ucyh7XG4gICAgICAgICAgICAgICAgICByZW5hbWVMaXN0OiB0aGlzLnJlbmFtZUxpc3QsIFxuICAgICAgICAgICAgICAgICAgZGVsZXRlTGlzdDogdGhpcy5kZWxldGVMaXN0LCBcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRMaXN0TmFtZTogdGhpcy5zdGF0ZS5jdXJyZW50TGlzdCwgXG4gICAgICAgICAgICAgICAgICBjdXJyZW50TGlzdDogdGhpcy5zdGF0ZS5jdXJyZW50TGlzdE9iamVjdElkfSksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRyb3Bkb3duXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4teHMgbGlzdC1vcHRpb25zXCIsIFxuICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiXCIsIFxuICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IGxpc3RPcHRpb25zfSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYmFyc1wifSlcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJkcm9wZG93bjEgY29weUxpc3RcIiwgc3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLGZsb2F0OidyaWdodCd9fSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7J2RhdGEtdG9nZ2xlJzogXCJkcm9wZG93blwiLCBcbiAgICAgICAgICAgICAgICAgICAgIGlkOiBcImNvcHlUb0xpc3RcIiwgXG4gICAgICAgICAgICAgICAgICAgICBocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImRyb3AtdGFyZ2V0IGJ0biBidG4tcHJpbWFyeSBidG4teHMgbGlzdC1vcHRpb25zXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY29weVwifSksIFwiIMKgQ29weSBUbyBMaXN0wqBcIiwgXG4gICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNhcmV0LWRvd25cIn0pKSwgXG4gICAgICAgICAgICAgICAgICBDdXJyZW50TGlzdHNUd28oe2xpc3RzOiB0aGlzLnN0YXRlLmxpc3RzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weURyb3Bkb3duU3R5bGU6IGNvcHlEcm9wZG93blN0eWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5U2VsZWN0ZWRQcm9zcGVjdHM6IHRoaXMuY29weVNlbGVjdGVkUHJvc3BlY3RzfSlcbiAgICAgICAgICAgICAgICApLCBcbiAgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRyb3Bkb3duMSBtb3ZlTGlzdFwiLCBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsZmxvYXQ6J3JpZ2h0J319LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHsnZGF0YS10b2dnbGUnOiBcImRyb3Bkb3duXCIsIFxuICAgICAgICAgICAgICAgICAgICAgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgIGlkOiBcIm1vdmVUb0xpc3RcIiwgXG4gICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBsaXN0LW9wdGlvbnNcIn0sIFxuICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1zaGFyZVwifSksIFwiIMKgTW92ZSBUbyBMaXN0wqBcIiwgXG4gICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNhcmV0LWRvd25cIn0pKSwgXG4gICAgICAgICAgICAgICAgQ3VycmVudExpc3RzKHtsaXN0czogdGhpcy5zdGF0ZS5saXN0cywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlU2VsZWN0ZWRQcm9zcGVjdHM6IHRoaXMubW92ZVNlbGVjdGVkUHJvc3BlY3RzfSlcbiAgICAgICAgICAgICAgICApLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtvbkNsaWNrOiB0aGlzLmRvd25sb2FkRmlsZSwgXG4gICAgICAgICAgICAgICAgICAgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICBpZDogXCJkb3dubG9hZFByb3NwZWN0c1wiLCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZHJvcC10YXJnZXQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBsaXN0LW9wdGlvbnNcIn0sIFxuICAgICAgICAgICAgICAgICAgIGRvd25sb2FkSWNvbiwgXG4gICAgICAgICAgICAgICAgICAgXCLCoCBEb3dubG9hZCBDU1YgwqBcIiBcbiAgICAgICAgICAgICAgICApLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuYXJjaGl2ZVByb3NwZWN0cywgXG4gICAgICAgICAgICAgICAgICAgaWQ6IFwiZG93bmxvYWRQcm9zcGVjdHNcIiwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImRyb3AtdGFyZ2V0IGJ0biBidG4tcHJpbWFyeSBidG4teHMgbGlzdC1vcHRpb25zXCJ9LCBcbiAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWFyY2hpdmVcIn0pLCBcbiAgICAgICAgICAgICAgICAgICBcIsKgIEFyY2hpdmUgwqBcIiBcbiAgICAgICAgICAgICAgICApLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMubGF1bmNoUHJvc3BlY3RQcm9maWxlTW9kYWwsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9LCBcbiAgICAgICAgICAgICAgICAgICBpZDogXCJkb3dubG9hZFByb3NwZWN0c1wiLCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZHJvcC10YXJnZXQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBsaXN0LW9wdGlvbnNcIn0sIFxuICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvdWQtZG93bmxvYWRcIn0pLCBcbiAgICAgICAgICAgICAgICAgICBcIsKgIEZpbmQgUHJvc3BlY3RzIEJ5IFRpdGxlIMKgXCIgXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAodGhpcy5zdGF0ZS5jb3VudCA9PSAwKSA/IEVtcHR5UGVvcGxlUHJvc3BlY3RzUGFuZWwoe2NsYXNzTmFtZTogdGhpcy5wcm9wcy5jbGFzc05hbWV9KSAgOiBcIlwiLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJhdXRvc2Nyb2xsXCIsIHN0eWxlOiBwcm9zcGVjdFRhYmxlU3R5bGV9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50YWJsZSh7Y2xhc3NOYW1lOiBcInByb3NwZWN0cy10YWJsZSB0YWJsZSB0YWJsZS1zdHJpcGVkXCIsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7bWFyZ2luQm90dG9tOicwcHgnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGhlYWQoe3N0eWxlOiB7YmFja2dyb3VuZENvbG9yOid3aGl0ZSd9fSwgXG4gICAgICAgICAgICAgICAgaGVhZGVyXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGJvZHkobnVsbCwgXG4gICAgICAgICAgICAgICAgcHJvc3BlY3RzXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFwiIFwiLCAodGhpcy5zdGF0ZS5sb2FkaW5nKSA/IExvYWRpbmdTcGlubmVyKG51bGwpIDogXCJcIlxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKSwgXG4gICAgICBQYW5lbEZvb3Rpbmcoe2N1cnJlbnRQYWdlOiB0aGlzLnN0YXRlLmN1cnJlbnRQYWdlLCBcbiAgICAgICAgICAgICAgICAgICAgY291bnQ6IHRoaXMuc3RhdGUuY291bnQsIFxuICAgICAgICAgICAgICAgICAgICB0b3RhbENvdW50OiB0aGlzLnN0YXRlLnRvdGFsQ291bnQsIFxuICAgICAgICAgICAgICAgICAgICBwYWdpbmF0ZTogdGhpcy5wYWdpbmF0ZSwgXG4gICAgICAgICAgICAgICAgICAgIHByb3NwZWN0VHlwZTogJ1Byb3NwZWN0JywgXG4gICAgICAgICAgICAgICAgICAgIHByb3NwZWN0c1BlclBhZ2U6IHRoaXMuc3RhdGUucHJvc3BlY3RzUGVyUGFnZSwgXG4gICAgICAgICAgICAgICAgICAgIHNldFBhZ2luYXRlOiB0aGlzLnNldFBhZ2luYXRlLCBcbiAgICAgICAgICAgICAgICAgICAgcGFnZXM6IHRoaXMuc3RhdGUucGFnZXN9KSwgXG4gICAgICBNZXNzZW5nZXIobnVsbClcbiAgICApXG4gICAgKTtcbiAgfSxcblxuICBsYXVuY2hQcm9zcGVjdFByb2ZpbGVNb2RhbDogZnVuY3Rpb24oKXsgJCgnI2NyZWF0ZVByb3NwZWN0UHJvZmlsZU1vZGFsJykubW9kYWwoKSB9LFxuXG4gIHBhZ2luYXRlOiBmdW5jdGlvbihuZXdQcm9zcGVjdHMsIG5ld1BhZ2UpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHByb3NwZWN0czogbmV3UHJvc3BlY3RzLFxuICAgICAgY3VycmVudFBhZ2U6IG5ld1BhZ2UsXG4gICAgICBrZXlib2FyZEFjdGl2ZVByb3NwZWN0OiAwXG4gICAgfSlcbiAgICB0aGlzLnN0YXJ0S2V5Ym9hcmRTaG9ydGN1dHMoKVxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvc2Nyb2xsJykuc2Nyb2xsVG9wID0gMFxuICB9LFxuXG4gIF9tYWtlX2VtYWlsOiBmdW5jdGlvbihuYW1lLCBwYXR0ZXJuKSB7XG4gICAgbmFtZSA9IG5hbWUudHJpbSgpXG4gICAgdmFycyA9IHtcbiAgICAgIGZpcnN0X25hbWU6IF8uZmlyc3QobmFtZS5zcGxpdCgnICcpKSxcbiAgICAgIGxhc3RfbmFtZTogXy5sYXN0KG5hbWUuc3BsaXQoJyAnKSksXG4gICAgICBmaXJzdF9pbml0aWFsOiBfLmZpcnN0KG5hbWUuc3BsaXQoJyAnKSlbMF0sXG4gICAgICBsYXN0X2luaXRpYWw6IF8ubGFzdChuYW1lLnNwbGl0KCcgJykpWzBdLFxuICAgICAgZG9tYWluOiBwcm9zcGVjdC5jb21wYW55LmRvbWFpblxuICAgIH1cbiAgICBwYXR0ZXJuID0gKHBhdHRlcm5bMF0pID8gcGF0dGVyblswXS5wYXR0ZXJuIDogXCJcIlxuICAgIHByb3NwZWN0X2VtYWlsID0gTXVzdGFjaGUucmVuZGVyKHBhdHRlcm4sIHZhcnMpLnRvTG93ZXJDYXNlKClcbiAgICAvL2NvbnNvbGUuZGVidWcoJ1BST1NQRUNUIEVNQUlMJylcbiAgICAvL2NvbnNvbGUuZGVidWcocHJvc3BlY3RfZW1haWwpXG4gICAgcmV0dXJuIHByb3NwZWN0X2VtYWlsXG4gIH0sXG5cbiAgZG93bmxvYWRGaWxlOiBmdW5jdGlvbigpIHtcbiAgICBpZih0aGlzLnN0YXRlLmNsYXNzTmFtZSA9PSBcIlByb3NwZWN0XCIpXG4gICAgICB0aGlzLmRvd25sb2FkUHJvc3BlY3RzKClcbiAgICBlbHNlXG4gICAgICB0aGlzLmRvd25sb2FkQ29tcGFuaWVzKClcbiAgfSxcblxuICBkb3dubG9hZENvbXBhbmllczogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2Rvd25sb2FkIGZpbGUnKVxuICAgIF9saXN0ID0gUGFyc2UuX3BvaW50ZXIoJ0NvbXBhbnlQcm9zcGVjdExpc3QnLCB0aGlzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWQpXG5cbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIHJlc3VsdHMgPSBfLm1hcChbMCwxLDIsMyw0LDUsNiw3LDgsOV0sIGZ1bmN0aW9uKG51bSkge1xuICAgICAgcXJ5ID0geyBjb3VudDogMSwgYXJjaGl2ZWQ6IHskaW46W251bGwsIGZhbHNlXX0sIGxpbWl0OiAxMDAwLCBza2lwOiBudW0qMTAwMH1cbiAgICAgIHFyeS5pbmNsdWRlID0gJ2NvbXBhbnksY29tcGFueS5lbWFpbF9ndWVzcydcbiAgICAgIGlmKF90aGlzLnN0YXRlLmN1cnJlbnRMaXN0ICE9IFwiQWxsXCIpXG4gICAgICAgIHFyeS53aGVyZSA9IEpTT04uc3RyaW5naWZ5KHtsaXN0czogX2xpc3R9KVxuICAgICAgcmV0dXJuIFBhcnNlLmdldChfdGhpcy5zdGF0ZS5jbGFzc05hbWUsIHFyeSlcbiAgICB9KVxuXG4gICAgJC53aGVuLmFwcGx5KHRoaXMsIHJlc3VsdHMpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgcHJvc3BlY3RzID0gXy5mbGF0dGVuKF8ubWFwKGFyZ3VtZW50cywgZnVuY3Rpb24oYXJnKSB7IHJldHVybiBhcmdbMF0ucmVzdWx0c30pKVxuICAgICAgcHJvc3BlY3RzID0gXy5tYXAocHJvc3BlY3RzLCBmdW5jdGlvbihwcm9zcGVjdCkge1xuICAgICAgICAvLyBUT0RPIC0gYWRkIGVtYWlsXG4gICAgICAgIGlmKHByb3NwZWN0LmNvbXBhbnkpIHtcbiAgICAgICAgICBjb21wYW55ID0gcHJvc3BlY3QuY29tcGFueVxuICAgICAgICAgIGRlbGV0ZSBjb21wYW55Lm5hbWVcbiAgICAgICAgICBfa2V5cyA9IF8ua2V5cyhwcm9zcGVjdCkuY29uY2F0KF8ua2V5cyhjb21wYW55KSlcbiAgICAgICAgICBfdmFsdWVzID0gXy52YWx1ZXMocHJvc3BlY3QpLmNvbmNhdChfLnZhbHVlcyhjb21wYW55KSlcbiAgICAgICAgICBvYmogPSBfLm9iamVjdChfa2V5cywgX3ZhbHVlcylcbiAgICAgICAgICBvYmouYWRkcmVzcyA9IG9iai5ub3JtYWxpemVkTG9jYXRpb25cblxuICAgICAgICAgIGNvbnNvbGUubG9nKG9iailcbiAgICAgICAgICBkZWxldGUgb2JqLmNvbXBhbnk7IGRlbGV0ZSBvYmouY3JlYXRlZEF0OyBkZWxldGUgb2JqLnVwZGF0ZWRBdDsgZGVsZXRlIG9iai5vYmplY3RJZDtcbiAgICAgICAgICBkZWxldGUgb2JqLmxpc3RzOyBkZWxldGUgb2JqLmxvYWRpbmc7IGRlbGV0ZSBvYmoudXNlcjsgZGVsZXRlIG9iai51c2VyX2NvbXBhbnk7XG4gICAgICAgICAgZGVsZXRlIG9iai5hcGlfa2V5OyBkZWxldGUgb2JqLmNsYXNzTmFtZTtcbiAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vY29uc29sZS5sb2cocHJvc3BlY3QpXG4gICAgICAgICAgcmV0dXJuIHByb3NwZWN0XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBwcm9zcGVjdHMgPSBbUGFwYS51bnBhcnNlKHByb3NwZWN0cyldXG4gICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKHByb3NwZWN0cywge3R5cGU6IFwidGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04XCJ9KTtcbiAgICAgIGNvbnNvbGUubG9nKGJsb2IpXG4gICAgICBzYXZlQXMoYmxvYiwgX3RoaXMuc3RhdGUuY2xhc3NOYW1lK1wiLmNzdlwiKTtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtkb3dubG9hZGluZzogZmFsc2V9KVxuICAgIH0pXG4gIH0sXG5cbiAgZG93bmxvYWRQcm9zcGVjdHM6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdkb3dubG9hZCBmaWxlJylcbiAgICBfbGlzdCA9IFBhcnNlLl9wb2ludGVyKCdQcm9zcGVjdExpc3QnLCB0aGlzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWQpXG5cbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIHJlc3VsdHMgPSBfLm1hcChbMCwxLDIsMyw0LDUsNiw3LDgsOV0sIGZ1bmN0aW9uKG51bSkge1xuICAgICAgcXJ5ID0geyBjb3VudDogMSwgYXJjaGl2ZWQ6IHskaW46W251bGwsIGZhbHNlXX0sIGxpbWl0OiAxMDAwLCBza2lwOiBudW0qMTAwMH1cbiAgICAgIHFyeS5pbmNsdWRlID0gJ2NvbXBhbnksY29tcGFueS5lbWFpbF9ndWVzcydcbiAgICAgIGlmKF90aGlzLnN0YXRlLmN1cnJlbnRMaXN0ICE9IFwiQWxsXCIpXG4gICAgICAgIHFyeS53aGVyZSA9IEpTT04uc3RyaW5naWZ5KHtsaXN0czogX2xpc3R9KVxuICAgICAgcmV0dXJuIFBhcnNlLmdldChfdGhpcy5zdGF0ZS5jbGFzc05hbWUsIHFyeSlcbiAgICB9KVxuXG4gICAgJC53aGVuLmFwcGx5KHRoaXMsIHJlc3VsdHMpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgcHJvc3BlY3RzID0gXy5mbGF0dGVuKF8ubWFwKGFyZ3VtZW50cywgZnVuY3Rpb24oYXJnKSB7IHJldHVybiBhcmdbMF0ucmVzdWx0c30pKVxuICAgICAgcHJvc3BlY3RzID0gXy5tYXAocHJvc3BlY3RzLCBmdW5jdGlvbihwcm9zcGVjdCkge1xuICAgICAgICAvLyBUT0RPIC0gYWRkIGVtYWlsXG4gICAgICAgIGlmKHByb3NwZWN0LmNvbXBhbnkpIHtcbiAgICAgICAgICBjb21wYW55ID0gcHJvc3BlY3QuY29tcGFueVxuICAgICAgICAgIGRlbGV0ZSBjb21wYW55Lm5hbWVcbiAgICAgICAgICBfa2V5cyA9IF8ua2V5cyhwcm9zcGVjdCkuY29uY2F0KF8ua2V5cyhjb21wYW55KSlcbiAgICAgICAgICBfdmFsdWVzID0gXy52YWx1ZXMocHJvc3BlY3QpLmNvbmNhdChfLnZhbHVlcyhjb21wYW55KSlcbiAgICAgICAgICBvYmogPSBfLm9iamVjdChfa2V5cywgX3ZhbHVlcylcbiAgICAgICAgICBvYmouYWRkcmVzcyA9IG9iai5ub3JtYWxpemVkTG9jYXRpb25cbiAgICAgICAgICBpZihvYmouZW1haWxfcGF0dGVybiAmJiAhXy5pc0VxdWFsKG9iai5lbWFpbF9wYXR0ZXJuLCBbXSkpXG4gICAgICAgICAgICBvYmouZW1haWwgPSBfdGhpcy5fbWFrZV9lbWFpbChwcm9zcGVjdC5uYW1lLCBwcm9zcGVjdC5jb21wYW55LmVtYWlsX3BhdHRlcm4pXG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgb2JqLmVtYWlsID0gXCJcIlxuXG4gICAgICAgICAgY29uc29sZS5sb2cob2JqKVxuICAgICAgICAgIGRlbGV0ZSBvYmouY29tcGFueTsgZGVsZXRlIG9iai5jcmVhdGVkQXQ7IGRlbGV0ZSBvYmoudXBkYXRlZEF0OyBkZWxldGUgb2JqLm9iamVjdElkO1xuICAgICAgICAgIGRlbGV0ZSBvYmoubGlzdHM7IGRlbGV0ZSBvYmoubG9hZGluZzsgZGVsZXRlIG9iai51c2VyOyBkZWxldGUgb2JqLnVzZXJfY29tcGFueTtcbiAgICAgICAgICBkZWxldGUgb2JqLmFwaV9rZXk7IGRlbGV0ZSBvYmouY2xhc3NOYW1lO1xuICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy9jb25zb2xlLmxvZyhwcm9zcGVjdClcbiAgICAgICAgICByZXR1cm4gcHJvc3BlY3RcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHByb3NwZWN0cyA9IFtQYXBhLnVucGFyc2UocHJvc3BlY3RzKV1cbiAgICAgIHZhciBibG9iID0gbmV3IEJsb2IocHJvc3BlY3RzLCB7dHlwZTogXCJ0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLThcIn0pO1xuICAgICAgY29uc29sZS5sb2coYmxvYilcbiAgICAgIHNhdmVBcyhibG9iLCBfdGhpcy5zdGF0ZS5jbGFzc05hbWUrXCIuY3N2XCIpO1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe2Rvd25sb2FkaW5nOiBmYWxzZX0pXG4gICAgfSlcbiAgfSxcblxuXG4gIGhpZGVBbGVydDogZnVuY3Rpb24oKSB7ICQoJy5hbGVydCcpLmhpZGUoKSB9LFxuICBzdGFydEtleWJvYXJkU2hvcnRjdXRzOiBmdW5jdGlvbigpIHsgLypLZXlib2FyZFNob3J0Y3V0cy5pbml0aWFsaXplKCkqLyB9LFxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uKCkgeyAkKCcuZHJvcGRvd24nKS5zaG93KCkgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgJCgnLmRyb3Bkb3duJykuc2hvdygpOyBcbiAgICBsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnN0cmluZ2lmeShbXSk7XG5cbiAgICBxcnkgPSB7IGxpc3RzOiBjdXJyZW50TGlzdCB9XG4gICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50TGlzdCA9PSAnQWxsJyl7XG4gICAgICBxcnkgPSB7XG4gICAgICAgIGNvdW50OiB0cnVlLCBvcmRlcjogJy1jcmVhdGVkQXQnLFxuICAgICAgICBsaW1pdDogdGhpcy5zdGF0ZS5wcm9zcGVjdHNQZXJQYWdlLFxuICAgICAgICBpbmNsdWRlOiAnZW1haWxfZ3Vlc3NlcyxlbWFpbF9ndWVzc2VzLnBhdHRlcm4sY29tcGFueSdcbiAgICAgIH1cbiAgICAgIHFyeS53aGVyZSA9IEpTT04uc3RyaW5naWZ5KHsgYXJjaGl2ZWQ6IHsnJGluJzpbZmFsc2UsIG51bGxdfSwgfSlcbiAgICB9XG5cbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIFBhcnNlLmdldChfdGhpcy5zdGF0ZS5jbGFzc05hbWUsIHtjb3VudDogdHJ1ZSxsaW1pdDowfSkuZG9uZShmdW5jdGlvbihyZXMpIHtcbiAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICB9KVxuICAgIFBhcnNlLmdldChfdGhpcy5zdGF0ZS5jbGFzc05hbWUsIHFyeSkuZG9uZShmdW5jdGlvbihyZXMpIHtcbiAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIHJlcy5wcm9zcGVjdHMgPSByZXMucmVzdWx0c1xuICAgICAgcmVzLmxvYWRpbmcgPSBmYWxzZTsgXG4gICAgICByZXMucGFnZXMgPSBNYXRoLmNlaWwocmVzLmNvdW50L190aGlzLnByb3BzLnByb3NwZWN0c1BlclBhZ2UpO1xuICAgICAgcmVzLnRvdGFsQ291bnQgPSByZXMuY291bnRcbiAgICAgIF90aGlzLnNldFN0YXRlKHJlcylcbiAgICB9KVxuXG4gICAgUGFyc2UuZ2V0KHRoaXMucHJvcHMubGlzdENsYXNzTmFtZSwgeyBvcmRlcjogJy1jcmVhdGVkQXQnfSkuZG9uZShmdW5jdGlvbihyZXMpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtsaXN0czogcmVzLnJlc3VsdHN9KVxuICAgIH0pXG4gIH0sXG5cbiAgZ2VuZXJhdGVfaWQgOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICdfJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLDkpOyBcbiAgfSxcbn0pO1xuXG4vKiAgRHJvcGRvd24gTWVudXMgKi9cbnZhciBMaXN0c01lbnUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdMaXN0c01lbnUnLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJkcm9wZG93bi1tZW51IGRyb3AtdGVzdFwiLCBpZDogXCJkcm9wZG93blwiLCBcbiAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgbWluV2lkdGg6J2luaGVyaXQnLFxuICAgICAgICAgICAgdG9wOiAnMjBweCcsXG4gICAgICAgICAgICB3aWR0aDogJzEyNXB4JyxcbiAgICAgICAgICAgIHJpZ2h0OiAnMTU0cHgnLFxuICAgICAgICAgICAgbGVmdDonYXV0bydcbiAgICAgICAgICB9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCIjYm9va3NcIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdGltZXNcIn0pLCBcIiDCoFwiICsgJyAnICtcbiAgICAgICAgICBcIkRlbGV0ZSBMaXN0XCJcbiAgICAgICAgKSksIFxuICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiI3BvZGNhc3RzXCJ9LCBcbiAgICAgICAgICBcIlJlbmFtZSBMaXN0c1wiXG4gICAgICAgICkpXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbnZhciBMaXN0RGV0YWlsQnV0dG9ucyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0xpc3REZXRhaWxCdXR0b25zJyxcbiAgLy8gUmVuYW1lIExpc3RcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZWRpdE1vZGU6IGZhbHNlXG4gICAgfVxuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIC8vY29uc29sZS5sb2codGhpcy5wcm9wcy5jdXJyZW50TGlzdE9iamVjdElkKVxuICAgIGlmKCF0aGlzLnN0YXRlLmVkaXRNb2RlKSB7XG4gICAgICBzdHVmZiA9IFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwiXCIsIHN0eWxlOiBsaXN0TmFtZVN0eWxlfSwgXG4gICAgICAgICAgICAodGhpcy5wcm9wcy5jdXJyZW50TGlzdE5hbWUgPT0gXCJBbGxcIikgPyAnJyA6IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYmFyc1wiLCBzdHlsZToge2ZvbnRTaXplOjE2LCBtYXJnaW5Ub3A6LTV9fSksIFxuICAgICAgICAgICAgKHRoaXMucHJvcHMuY3VycmVudExpc3ROYW1lID09IFwiQWxsXCIpID8gJycgOiBcIiAgIFwiICt0aGlzLnByb3BzLmN1cnJlbnRMaXN0TmFtZVxuICAgICAgICAgICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIHN0dWZmID0gUmVhY3QuRE9NLmlucHV0KHtjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sXCIsIHN0eWxlOiB7d2lkdGg6IDEwMCwgZmxvYXQ6ICdsZWZ0JywgaGVpZ2h0OiAyNCwgbWFyZ2luVG9wOiAtMX19KVxuICAgIH1cbiAgICByZXR1cm4gKFxuXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNCh7c3R5bGU6IHttYXJnaW46MH19LCBcIiBcIiwgc3R1ZmYsIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICBzdHlsZTogbGlzdEJ0biwgXG4gICAgICAgICAgICAgICAgJ2RhdGEtdG9nZ2xlJzogXCJtb2RhbFwiLCBcbiAgICAgICAgICAgICAgICBpZDogXCJyZW5hbWVMaXN0QnRuXCIsIFxuICAgICAgICAgICAgICAgICdkYXRhLXRhcmdldCc6IFwiLmJzLXJlbmFtZUxpc3QtbW9kYWwtc21cIiwgXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5Oidub25lJ30sIFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXhzIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBlbmNpbFwifSlcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuZGVsZXRlTGlzdCwgXG4gICAgICAgICAgICAgICAgc3R5bGU6IGxpc3RCdG4sIFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9LCBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS10cmFzaC1vXCJ9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG5cbiAgICAgICAgICApXG4gICAgICApO1xuICB9LFxuXG4gIHJlbmFtZUxpc3Q6IGZ1bmN0aW9uKG5ld0xpc3ROYW1lKSB7IHRoaXMucHJvcHMucmVuYW1lTGlzdChuZXdMaXN0TmFtZSkgfSxcblxuICBkZWxldGVMaXN0OiBmdW5jdGlvbigpe1xuICAgIHRoaXNzID0gdGhpcztcbiAgICBzd2FsKHsgICBcbiAgICAgIHRpdGxlOiBcIkFyZSB5b3Ugc3VyZT9cIiwgICBcbiAgICAgIHRleHQ6IFwiWW91ciB3aWxsIG5vdCBiZSBhYmxlIHRvIHJlY292ZXIgdGhpcyBwcm9zcGVjdCBsaXN0IVwiLCAgIFxuICAgICAgdHlwZTogXCJ3YXJuaW5nXCIsICAgXG4gICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLCAgIFxuICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiBcIiNERDZCNTVcIiwgICBcbiAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBcIlllcywgZGVsZXRlIGl0IVwiLCAgIFxuICAgICAgY2xvc2VPbkNvbmZpcm06IGZhbHNlIH0sIFxuICAgICAgZnVuY3Rpb24oKXsgICBzd2FsKFwiRGVsZXRlZCFcIiwgXCJZb3VyIHByb3NwZWN0IGxpc3QgaGFzIGJlZW4gZGVsZXRlZC5cIiwgXCJzdWNjZXNzXCIpOyBcbiAgICAgICAgY29uc29sZS5sb2coJ2RlbGV0ZWQnKVxuICAgICAgICB0aGlzcy5wcm9wcy5kZWxldGVMaXN0KClcbiAgICAgIH0pO1xuICB9LFxuXG4gIHRvZ2dsZUVkaXQ6IGZ1bmN0aW9uKCkgeyB0aGlzLnNldFN0YXRlKHtlZGl0TW9kZTogIXRoaXMuc3RhdGUuZWRpdE1vZGUgfSkgfVxufSk7XG5cbnZhciBQYWdpbmF0ZU92ZXJsYXkgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdQYWdpbmF0ZU92ZXJsYXknLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcInBhZ2luYXRlLW92ZXJsYXlcIiwgc3R5bGU6IHtwYWRkaW5nVG9wOjcwfX0sIFxuICAgICAgICAgIFNwaW5uZXIoe2NpcmNsZVN0eWxlOiB7YmFja2dyb3VuZENvbG9yOid3aGl0ZSd9fSlcbiAgICAgICAgKVxuICAgIClcbiAgfVxufSlcblxudmFyIEVtcHR5UGVvcGxlUHJvc3BlY3RzUGFuZWwgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdFbXB0eVBlb3BsZVByb3NwZWN0c1BhbmVsJyxcbiAgb3BlbkxpbmtlZGluV2luZG93OiBmdW5jdGlvbigpIHtcbiAgICBpZih0aGlzLnByb3BzLmNsYXNzTmFtZSA9PSBcIlByb3NwZWN0XCIpXG4gICAgICB3aW5kb3cub3BlbignaHR0cHM6Ly93d3cubGlua2VkaW4uY29tL3ZzZWFyY2gvcD90eXBlPXBlb3BsZScpXG4gICAgZWxzZVxuICAgICAgd2luZG93Lm9wZW4oJ2h0dHBzOi8vd3d3LmxpbmtlZGluLmNvbS92c2VhcmNoL2MnKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cbiAgICBuYW1lID0gKHRoaXMucHJvcHMuY2xhc3NOYW1lID09IFwiUHJvc3BlY3RcIikgPyBcIlByb3NwZWN0c1wiIDogXCJDb21wYW5pZXNcIlxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLW9mZnNldC0zIGNvbC1tZC02XCIsIHN0eWxlOiB7aGVpZ2h0OjQwMH19LCBcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0XCIsIHN0eWxlOiB7bWFyZ2luVG9wOjEwMCxoZWlnaHQ6MjAwfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtYm9keVwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmgxKHtjbGFzc05hbWU6IFwibGVhZFwiLCBzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcIlN0YXJ0IFByb3NwZWN0aW5nIE9uIExpbmtlZGluXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBvbkNsaWNrOiB0aGlzLm9wZW5MaW5rZWRpbldpbmRvdywgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeVwiLCBzdHlsZToge2JhY2tncm91bmRJbWFnZTogJ2xpbmVhci1ncmFkaWVudCgxODBkZWcsICMwMDk2ZmYgMCUsICMwMDVkZmYgMTAwJSkgIWltcG9ydGFudCcsZGlzcGxheTonYmxvY2snLG1hcmdpblJpZ2h0OidhdXRvJyxtYXJnaW5MZWZ0OidhdXRvJyx3aWR0aDoyMDAsIG1hcmdpblRvcDo1MH19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc2VhcmNoXCJ9KSwgXCIgwqBcIiwgXG4gICAgICAgICAgICBcIlNlYXJjaCBmb3IgXCIrbmFtZStcIiFcIilcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgICApO1xuICB9XG59KTtcblxudmFyIENvbXBhbnlQcm9zcGVjdEhlYWRlciA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0NvbXBhbnlQcm9zcGVjdEhlYWRlcicsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS50cihudWxsLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3dpZHRoOjQwMH19LCBcIk5hbWVcIiksIFxuICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7d2lkdGg6NTAwfX0sIFwiSW5kdXN0cnlcIiksIFxuICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7d2lkdGg6MTM3LGRpc3BsYXk6J25vbmUnfX0sIFwiIyBvZiBQcm9zcGVjdHNcIiksIFxuICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCLCoCBcIiksIFxuICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXCJTaWduYWxzXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3dpZHRoOjEwMH19LCBcIkFkZGVkXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiwqBcIiksIFxuICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCLCoFwiKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgQ3VycmVudExpc3RzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ3VycmVudExpc3RzJyxcbiAgbGlzdEFjdGlvbjogZnVuY3Rpb24oZSkge1xuICAgIHZhciBsaXN0U2VsZWN0ID0gXy5maWx0ZXIodGhpcy5wcm9wcy5saXN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT0gJChlLnRhcmdldCkudGV4dCgpXG4gICAgfSk7XG5cbiAgICB0aGlzLnByb3BzLm1vdmVTZWxlY3RlZFByb3NwZWN0cyhsaXN0U2VsZWN0WzBdLm9iamVjdElkKVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAvLyQodGhpcy5nZXRET01Ob2RlKCkuZGF0YSgpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBsaXN0cyA9IFtdIFxuICAgIGZvcihpPTA7aTwgdGhpcy5wcm9wcy5saXN0cy5sZW5ndGg7aSsrKSB7XG4gICAgICBjb25zb2xlLmxvZyh0aGlzLnByb3BzLmxpc3RzW2ldLm9iamVjdElkKVxuICAgICAgbGlzdHMucHVzaChcbiAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLGZvbnRTaXplOicxMHB4J30sIFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBcImRyb3Bkb3duLW1vdmUtbGlzdC1uYW1lIGRyb3Bkb3duLWxpc3QtbmFtZVwiLCBcbiAgICAgICAgICAgIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAnZGF0YS1tb3ZlLW9iamVjdElkJzogXCJ0aGlzLnByb3BzLmxpc3RzW2ldLm9iamVjdElkXCJ9LCBcbiAgICAgICAgICAgdGhpcy5wcm9wcy5saXN0c1tpXS5uYW1lKSlcbiAgICAgIClcbiAgICB9XG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLnByb3BzLmNvcHlEcm9wZG93blN0eWxlKVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJkcm9wZG93bi1tZW51IGRyb3AtdGVzdFwiLCBpZDogXCJkcm9wZG93blwiLCBcbiAgICAgICAgICBzdHlsZToge3JpZ2h0OjEyMyx0b3A6Mjd9fSwgXG4gICAgICAgIGxpc3RzXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbnZhciBDdXJyZW50TGlzdHNUd28gPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdDdXJyZW50TGlzdHNUd28nLFxuICBsaXN0QWN0aW9uOiBmdW5jdGlvbihlKSB7XG4gICAgbGlzdE5hbWUgPSAkKGUudGFyZ2V0KS50ZXh0KClcbiAgICBcbiAgICB2YXIgbGlzdFNlbGVjdCA9IF8uZmlsdGVyKHRoaXMucHJvcHMubGlzdHMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICByZXR1cm4gaXRlbS5uYW1lID09IGxpc3ROYW1lXG4gICAgfSk7XG5cbiAgICB0aGlzLnByb3BzLmNvcHlTZWxlY3RlZFByb3NwZWN0cyhsaXN0U2VsZWN0WzBdLm9iamVjdElkKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgbGlzdHMgPSBbXSBcbiAgICBmb3IoaT0wO2k8IHRoaXMucHJvcHMubGlzdHMubGVuZ3RoO2krKykge1xuICAgICAgbGlzdHMucHVzaChcbiAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLGZvbnRTaXplOicxMHB4J30sIFxuICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImRyb3Bkb3duLWNvcHktbGlzdC1uYW1lIGRyb3Bkb3duLWxpc3QtbmFtZVwiLCBcbiAgICAgICAgICAgICAgIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAnZGF0YS1vYmplY3RJZCc6IHRoaXMucHJvcHMubGlzdHNbaV0ub2JqZWN0SWR9LCBcbiAgICAgICAgICAgICAgIFxuICAgICAgICAgIHRoaXMucHJvcHMubGlzdHNbaV0ubmFtZSkpXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJkcm9wZG93bi1tZW51IGRyb3AtdGVzdFwiLCBpZDogXCJkcm9wZG93blwiLCBcbiAgICAgICAgICBzdHlsZToge3dpZHRoOjExNCxyaWdodDo2LHRvcDoyN319LCBcbiAgICAgICAgbGlzdHNcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBjcmVhdGVMaXN0TW9kYWxcbiAgY3JlYXRlTGlzdDogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJCgnI2xpc3RUaXRsZScpLnZhbCgpKVxuXG4gICAgZGF0YSA9ICB7XG4gICAgICAnbmFtZScgICAgICAgIDogJCgnI2xpc3RUaXRsZScpLnZhbCgpLnRyaW0oKSwgICAvL1dhaXRpbmcgLCBSdW5uaW5nXG4gICAgICAndXNlcicgICAgICAgIDogeyAnX190eXBlJzonUG9pbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzTmFtZSc6J19Vc2VyJyxcbiAgICAgICAgICAgICAgICAgICAgICAnb2JqZWN0SWQnOid4V0VTaXc1U21kJyB9LFxuICAgIH1cblxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RMaXN0JyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpXG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGRhdGEuY291bnQgPSAwXG5cbiAgICB0aGlzLnByb3BzLmNyZWF0ZUxpc3QoZGF0YSlcbiAgICBcbiAgICAkKCcjY3JlYXRlTGlzdE1vZGFsJykubW9kYWwoJ2hpZGUnKVxuICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnbW9kYWwtb3BlbicpO1xuICAgICQoJy5tb2RhbC1iYWNrZHJvcCcpLnJlbW92ZSgpO1xuICAgIC8vJCgnYnV0dG9uLmNsb3NlJykuY2xpY2soKVxuICB9LFxuXG4gIHJlbmFtZUxpc3Q6IGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAvL2NvbnNvbGUubG9nKCQoJyNuZXdMaXN0TmFtZScpLnZhbCgpKVxuICAgIG5ld0xpc3ROYW1lID0gJCgnI25ld0xpc3ROYW1lJykudmFsKClcbiAgICBpZihuZXdMaXN0TmFtZS50cmltKCkgIT0gXCJcIilcbiAgICAgIHRoaXMucHJvcHMucmVuYW1lTGlzdChuZXdMaXN0TmFtZSlcbiAgICAvLyBEaXNhYmxlIE1vZGFsXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbCBmYWRlIGJzLXJlbmFtZUxpc3QtbW9kYWwtc21cIiwgdGFiSW5kZXg6IFwiLTFcIiwgcm9sZTogXCJkaWFsb2dcIiwgJ2FyaWEtbGFiZWxsZWRieSc6IFwibXlTbWFsbE1vZGFsTGFiZWxcIiwgJ2FyaWEtaGlkZGVuJzogXCJ0cnVlXCIsIGlkOiBcImNyZWF0ZUxpc3RNb2RhbFwiLCBzdHlsZToge3RvcDonMjAwcHgnfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1zbVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1jb250ZW50XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtaGVhZGVyXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJjbG9zZVwiLCAnZGF0YS1kaXNtaXNzJzogXCJtb2RhbFwifSwgUmVhY3QuRE9NLnNwYW4oeydhcmlhLWhpZGRlbic6IFwidHJ1ZVwifSwgXCLDl1wiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwic3Itb25seVwifSwgXCJDbG9zZVwiKSksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1saXN0XCJ9KSwgXCIgwqBSZW5hbWUgTGlzdFwiKVxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1ib2R5XCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5mb3JtKHtvblN1Ym1pdDogdGhpcy5yZW5hbWVMaXN0fSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7aWQ6IFwibmV3TGlzdE5hbWVcIiwgdHlwZTogXCJ0ZXh0XCIsIHBsYWNlaG9sZGVyOiBcIkVudGVyIGxpc3QgdGl0bGUuLi5cIiwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbFwifSksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnJlbmFtZUxpc3QsIFxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3NcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsIHdpZHRoOicxMDAlJ319LCBcbiAgICAgICAgICAgICAgICAgICAgICBcIkNyZWF0ZSBMaXN0XCJcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICAgIFwiU2NoZWR1bHNcIlxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGN1cnJlbnRQcm9zcGVjdDogMCxcbiAgICB9XG4gIH0sXG5cbiAgc2VuZEVtYWlsczogZnVuY3Rpb24oKSB7XG4gICAgc2VsZWN0ZWRDYW1wYWlnbiA9IHRoaXMucHJvcHMuc2VsZWN0ZWRDYW1wYWlnblxuICAgIGNhbXBhaWduX2lkID0gc2VsZWN0ZWRDYW1wYWlnbi5vYmplY3RJZFxuICAgIHByb3NwZWN0bGlzdF9pZCA9IHNlbGVjdGVkQ2FtcGFpZ24ucHJvc3BlY3RfbGlzdC5vYmplY3RJZFxuICAgIHRlbXBsYXRlX2lkID0gdGhpcy5wcm9wcy5jdXJyZW50VGVtcGxhdGUub2JqZWN0SWRcbiAgICBcbiAgICAkLmFqYXgoe1xuICAgICAgLy91cmw6J2h0dHBzOi8vbmFtZWxlc3MtcmV0cmVhdC0zNTI1Lmhlcm9rdWFwcC5jb20vc2VuZF9lbWFpbCcsXG4gICAgICB1cmw6J2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC92MS9jYW1wYWlnbi9lbWFpbCcsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHRlbXBsYXRlIDogdGVtcGxhdGVfaWQsXG4gICAgICAgIGNhbXBhaWduIDogY2FtcGFpZ25faWQsXG4gICAgICAgIC8vYmF0Y2g6IGJhdGNoX2lkXG4gICAgICB9LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IGNvbnNvbGUubG9nKHJlcy5yZXN1bHRzKSB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIpIH1cbiAgICB9KVxuXG4gICAgLyogKi9cbiAgICAvLyBVcGRhdGUgRm9sbG93dXBcbiAgICAvLyBQZXJzaXN0IEZvbGxvd3VwXG4gICAgLy8gY2xvc2UgbW9kYWxcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHByb3NwZWN0ID0gdGhpcy5wcm9wcy5wcm9zcGVjdHNbdGhpcy5zdGF0ZS5jdXJyZW50UHJvc3BlY3RdXG4gICAgcHJvc3BlY3QgPSAocHJvc3BlY3QpID8gcHJvc3BlY3QgOiB7J25hbWUnOicnLCdlbWFpbCc6Jyd9XG5cbiAgICB2YXIgdGhpc3MgPSB0aGlzO1xuICAgIGNvbnNvbGUuZGVidWcoJ1NFTkQgRU1BSUwgQkFUQ0gnKVxuICAgIGNvbnNvbGUuZGVidWcodGhpcy5wcm9wcy5jdXJyZW50QmF0Y2gpXG4gICAgbmV3QmF0Y2ggPSBfLmlzRXF1YWwodGhpcy5wcm9wcy5jdXJyZW50QmF0Y2gsIHt9KVxuICAgIHByb3NwZWN0cyA9IChuZXdCYXRjaCkgPyB0aGlzLnByb3BzLm5ld1Byb3NwZWN0cyA6IHRoaXMucHJvcHMucHJvc3BlY3RzXG4gICAgaWYobmV3QmF0Y2gpe1xuICAgICAgcHJvc3BlY3RzID0gXy5tYXAodGhpcy5wcm9wcy5uZXdQcm9zcGVjdHMsIGZ1bmN0aW9uKHByb3NwZWN0KSB7XG4gICAgICAgICAgcmV0dXJuIFVzZXJQbGFjZUhvbGRlcih7cHJvc3BlY3Q6IHByb3NwZWN0fSlcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHByb3NwZWN0cyA9IF8ubWFwKHRoaXMucHJvcHMucHJvc3BlY3RzLCBmdW5jdGlvbihwcm9zcGVjdCkge1xuICAgICAgICBpZihfLmZpbmRXaGVyZShwcm9zcGVjdC5iYXRjaGVzLCB7b2JqZWN0SWQ6IHRoaXNzLnByb3BzLmN1cnJlbnRCYXRjaH0pKVxuICAgICAgICAgIHJldHVybiBVc2VyUGxhY2VIb2xkZXIoe3Byb3NwZWN0OiBwcm9zcGVjdH0pXG4gICAgICB9KVxuICAgIH1cbiAgICBwcm9zcGVjdHMgPSBfLmNvbXBhY3QocHJvc3BlY3RzKVxuICAgIGNvbnNvbGUuZGVidWcocHJvc3BlY3RzKVxuICAgIGNvbnNvbGUuZGVidWcocHJvc3BlY3RzLmxlbmd0aClcbiAgICBwcm9zcGVjdENvdW50ID0gcHJvc3BlY3RzLmxlbmd0aFxuICAgIGVtYWlsID0gKHByb3NwZWN0LmVtYWlsKSA/IHByb3NwZWN0LmVtYWlsIDogXCJcIlxuICAgIGlmKGVtYWlsID09IFwibm9fZW1haWxcIiB8fCBlbWFpbCA9PSBcIlwiKSB7XG4gICAgICBjb25zb2xlLmxvZygnR1VFU1NJTkcnKVxuICAgICAgaWYocHJvc3BlY3QuZW1haWxfZ3Vlc3Nlcykge1xuICAgICAgICBjb25zb2xlLmxvZygnR1VFU1NJTkcgRU1BSUwnKVxuICAgICAgICBndWVzcyA9IF8uZmluZFdoZXJlKHByb3NwZWN0LmVtYWlsX2d1ZXNzZXMsIHt0cmllZDogZmFsc2V9KVxuICAgICAgICBuYW1lID0gXy50aXRsZShwcm9zcGVjdC5uYW1lLnRyaW0oKSlcblxuICAgICAgICB2YXJzID0ge1xuICAgICAgICAgIGZpcnN0OiBfLmZpcnN0KG5hbWUuc3BsaXQoJyAnKSkucmVwbGFjZSgvXFxXL2csICcnKSxcbiAgICAgICAgICBsYXN0OiBfLmxhc3QobmFtZS5zcGxpdCgnICcpKS5yZXBsYWNlKC9cXFcvZywgJycpLFxuICAgICAgICAgIGZpOiBfLmZpcnN0KG5hbWUuc3BsaXQoJyAnKSlbMF0ucmVwbGFjZSgvXFxXL2csICcnKSxcbiAgICAgICAgICBsaTogXy5sYXN0KG5hbWUuc3BsaXQoJyAnKSlbMF0ucmVwbGFjZSgvXFxXL2csICcnKVxuICAgICAgICB9XG4gICAgICAgIGlmKGd1ZXNzKXtcbiAgICAgICAgICBjb25zb2xlLmxvZyhndWVzcy5wYXR0ZXJuLnBhdHRlcm4pXG4gICAgICAgICAgZW1haWwgPSBNdXN0YWNoZS5yZW5kZXIoZ3Vlc3MucGF0dGVybi5wYXR0ZXJuLCB2YXJzKVxuICAgICAgICAgIGVtYWlsID0gZW1haWwrXCJAXCIrcHJvc3BlY3QuZG9tYWluXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdOTyBHVUVTU0VTIEZPVU5EJylcbiAgICAgIH1cbiAgICB9XG4gICAgZW1haWwgPSBlbWFpbC50b0xvd2VyQ2FzZSgpXG4gICAgZW1haWwgPSBlbWFpbFxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwgZmFkZSBicy1zZW5kRW1haWwtbW9kYWwtbGdcIiwgdGFiSW5kZXg6IFwiLTFcIiwgXG4gICAgICAgICAgIHJvbGU6IFwiZGlhbG9nXCIsICdhcmlhLWxhYmVsbGVkYnknOiBcIm15U21hbGxNb2RhbExhYmVsXCIsICdhcmlhLWhpZGRlbic6IFwidHJ1ZVwiLCBcbiAgICAgICAgICAgaWQ6IFwic2VuZEVtYWlsTW9kYWxcIiwgc3R5bGU6IHt0b3A6JzEwcHgnfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1sZ1wifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1jb250ZW50XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtaGVhZGVyXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJjbG9zZVwiLCAnZGF0YS1kaXNtaXNzJzogXCJtb2RhbFwifSwgUmVhY3QuRE9NLnNwYW4oeydhcmlhLWhpZGRlbic6IFwidHJ1ZVwifSwgXCLDl1wiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwic3Itb25seVwifSwgXCJDbG9zZVwiKSksIFxuICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBcbiAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnNlbmRFbWFpbHMsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0J30sIFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgYnRuLXNtXCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBhcGVyLXBsYW5lXCJ9KSwgXCLCoCBTZW5kIEVtYWlsXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgc3R5bGU6IHttYXJnaW5SaWdodDoxMCwgZmxvYXQ6J3JpZ2h0J30sIFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtXCIsICdkYXRhLWRpc21pc3MnOiBcIm1vZGFsXCJ9LCBcIkNsb3NlXCIpLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNCh7Y2xhc3NOYW1lOiBcIm1vZGFsLXRpdGxlXCIsIGlkOiBcIm15TW9kYWxMYWJlbFwifSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZW52ZWxvcGVcIn0pLCBcIiDCoFNlbmQgRW1haWxcIiArICcgJyArXG4gICAgICAgICAgICAgICAgICAgIFwiwqDCoFwiLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLnNtYWxsKG51bGwsIFwiKFwiK3Byb3NwZWN0Q291bnQrXCIpXCIpXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWJvZHlcIiwgc3R5bGU6IHtwYWRkaW5nVG9wOjV9fSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDQobnVsbCwgXCJQZW9wbGVcIiksIFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicHJvc3BlY3QtY29udGFpbmVyXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgcHJvc3BlY3RzXG4gICAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDQoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcIkVtYWlscyDCoMKgwqBcIiwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAodGhpcy5zdGF0ZS5jdXJyZW50UHJvc3BlY3QgPT0gMCApID8gXCJiYWRnZSBidG4gZGlzYWJsZWRcIiA6IFwiYmFkZ2UgYnRuXCIsIFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnByZXZpb3VzUHJvc3BlY3R9LCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWFycm93LWxlZnRcIn0pKSwgXCLCoMKgXCIsIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uc21hbGwobnVsbCwgKHRoaXMuc3RhdGUuY3VycmVudFByb3NwZWN0KzEpKycgb2YgJytwcm9zcGVjdENvdW50XG4gICAgICAgICAgICAgICAgICApKSwgXG4gICAgICAgICAgICAgICAgICBcIsKgwqDCoFwiLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgY2xhc3NOYW1lOiAodGhpcy5zdGF0ZS5jdXJyZW50UHJvc3BlY3QgPT0gIHRoaXMucHJvcHMucHJvc3BlY3RzLmxlbmd0aC0xKSA/IFwiYnRuIGRpc2FibGVkIGJhZGdlXCIgOiBcImJ0biBiYWRnZVwiLCBcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5uZXh0UHJvc3BlY3R9LCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWFycm93LXJpZ2h0XCJ9KSksIFxuXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuXG5SZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJsaXN0LWdyb3VwIGVtYWlsLWhvbGRlclwiLCBzdHlsZToge2JvcmRlclRvcDonc29saWQgMXB4ICNlZWUnfX0sIFxuICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJsaXN0LWdyb3VwLWl0ZW1cIn0sIFxuICAgIFJlYWN0LkRPTS5oNSh7c3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLG1hcmdpblRvcDowLG1hcmdpbkJvdHRvbTowfX0sIFwiVG86wqDCoFwiKSwgXG4gICAgXG4gICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1wcmltYXJ5XCJ9LCBlbWFpbClcbiAgKSwgXG4gIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcImxpc3QtZ3JvdXAtaXRlbVwifSwgXG4gICAgUmVhY3QuRE9NLmg1KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsbWFyZ2luVG9wOjAsbWFyZ2luQm90dG9tOjB9fSwgXCJTdWJqZWN0OsKgwqBcIiksIFwiIFwiLCBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLXByaW1hcnlcIn0sIHRoaXMucHJvcHMuY3VycmVudFRlbXBsYXRlLnN1YmplY3QpXG4gICksIFxuICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJsaXN0LWdyb3VwLWl0ZW0gYm9keVwifSlcbilcbiAgXG4gICAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICApLCBcblxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWZvb3RlclwiLCBzdHlsZToge2Rpc3BsYXk6J25vbmUnfX0sIFxuICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1kZWZhdWx0XCIsICdkYXRhLWRpc21pc3MnOiBcIm1vZGFsXCJ9LCBcIkNsb3NlXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeVwifSwgXCJTZW5kIEVtYWlsXCIpXG4gICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgKTtcbiAgfSxcblxuICBwcmV2aW91c1Byb3NwZWN0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50UHJvc3BlY3Q6IHRoaXMuc3RhdGUuY3VycmVudFByb3NwZWN0LTEgfSlcbiAgfSxcblxuICBuZXh0UHJvc3BlY3Q6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2N1cnJlbnRQcm9zcGVjdDogdGhpcy5zdGF0ZS5jdXJyZW50UHJvc3BlY3QrMSB9KVxuICB9LFxuXG4gIHBhcnNlVGVtcGxhdGU6IGZ1bmN0aW9uKHRlbXBsYXRlQm9keSkge1xuICAgIGZpcnN0X25hbWUgPSBwcm9zcGVjdC5uYW1lLnNwbGl0KCcgJylbMF1cbiAgICAvL2hpcmluZ19zaWduYWwgPSBwcm9zcGVjdC5zaWduYWxzXG5cbiAgICBzaWduYWxzID0gKHByb3NwZWN0LnNpZ25hbHMpID8gcHJvc3BlY3Quc2lnbmFsc1swXSA6IFwiXCJcbiAgICB0ZW1wbGF0ZUJvZHkgPSBNdXN0YWNoZS5yZW5kZXIodGVtcGxhdGVCb2R5LCB7XG4gICAgICBoaXJpbmdfc2lnbmFsOiBzaWduYWxzLFxuICAgICAgZmlyc3RfbmFtZTogXy50aXRsZShwcm9zcGVjdC5uYW1lLnNwbGl0KCcgJylbMF0pXG4gICAgfSlcblxuICAgIC8vY29uc29sZS5sb2codGVtcGxhdGVCb2R5KVxuICAgICAgXG4gICAgcmV0dXJuIHRlbXBsYXRlQm9keVxuICB9LFxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLnByb3BzLmN1cnJlbnRUZW1wbGF0ZSlcbiAgICBwYXJzZWRUZW1wbGF0ZSA9IHRoaXMucGFyc2VUZW1wbGF0ZSh0aGlzLnByb3BzLmN1cnJlbnRUZW1wbGF0ZS5ib2R5KVxuICAgIFxuICAgIC8vJCgnLmJvZHknKS5odG1sKHRoaXMucHJvcHMuY3VycmVudFRlbXBsYXRlLmJvZHkpXG4gICAgJCgnLmJvZHknKS5odG1sKHBhcnNlZFRlbXBsYXRlKVxuICB9XG59KTtcblxudmFyIFVzZXJQbGFjZUhvbGRlciA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1VzZXJQbGFjZUhvbGRlcicsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cFwiLCBzdHlsZToge21hcmdpblJpZ2h0OjUsbWFyZ2luQm90dG9tOjV9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cFwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4tc21cIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXVzZXJcIn0pLCBcIsKgwqBcIiwgXG4gICAgICAgICAgICAgICh0aGlzLnByb3BzLnByb3NwZWN0KSA/IF8udGl0bGUodGhpcy5wcm9wcy5wcm9zcGVjdC5uYW1lKSA6IFwiXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcImJ1dHRvblwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1zbVwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXRyYXNoLW9cIn0pXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgKVxuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBTZW50IE1haWxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2VudEVtYWlsczogW11cbiAgICB9XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9TZW50RW1haWwnLFxuICAgICAgZGF0YTp7aW5jbHVkZTogJ2NhbXBhaWduLHByb3NwZWN0LHByb3NwZWN0LmVtYWlsX2d1ZXNzZXMucGF0dGVybid9LFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgdGhpc3Muc2V0U3RhdGUoe3NlbnRFbWFpbHM6IHJlcy5yZXN1bHRzfSkgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbigpIHt9XG4gICAgfSlcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHNlbnRFbWFpbHMgPSBbXVxuICAgIGZvcihpPTA7aTwgdGhpcy5zdGF0ZS5zZW50RW1haWxzLmxlbmd0aDsgaSsrKSBcbiAgICAgIHNlbnRFbWFpbHMucHVzaChTZW50RW1haWxSb3coe3NlbnRFbWFpbDogdGhpcy5zdGF0ZS5zZW50RW1haWxzW2ldfSkpXG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtvdmVyZmxvdzonYXV0bycsaGVpZ2h0OjU1MH19LCBcbiAgICAgICAgUmVhY3QuRE9NLnRhYmxlKHtjbGFzc05hbWU6IFwidGFibGUgdGFibGUtc3RyaXBlZFwiLCBzdHlsZToge21hcmdpbkJvdHRvbTowfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS50aGVhZChudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJQcm9zcGVjdCBOYW1lXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIlByb3NwZWN0IEVtYWlsXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt3aWR0aDoyOTB9fSwgXCJTdGF0dXNcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiQ2FtcGFpZ25cIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiVGVtcGxhdGVcIilcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udGJvZHkobnVsbCwgXG4gICAgICAgICAgICBzZW50RW1haWxzXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbnZhciBTZW50RW1haWxSb3cgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdTZW50RW1haWxSb3cnLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHNlbnRFbWFpbCA9IHRoaXMucHJvcHMuc2VudEVtYWlsXG4gICAgLy9jb25zb2xlLmxvZyhzZW50RW1haWwpXG5cbiAgICBlbWFpbCA9IHNlbnRFbWFpbC5lbWFpbFxuICAgIGlmKGVtYWlsID09IFwibm9fZW1haWxcIil7XG4gICAgICBmaXJzdCA9IHNlbnRFbWFpbC5wcm9zcGVjdC5uYW1lLnNwbGl0KCcgJylbMF1cbiAgICAgIGxhc3QgPSBfLmxhc3Qoc2VudEVtYWlsLnByb3NwZWN0Lm5hbWUuc3BsaXQoJyAnKSlcblxuICAgICAgcGF0dGVybiA9IF8uZmluZFdoZXJlKHNlbnRFbWFpbC5wcm9zcGVjdC5lbWFpbF9ndWVzc2VzLCB7J3RyaWVkJzpmYWxzZX0pXG4gICAgICBkYXRhID0ge2ZpcnN0OiBmaXJzdCwgbGFzdDogbGFzdCwgZmk6IGZpcnN0WzBdLCBsaTogbGFzdFswXX1cbiAgICAgIGVtYWlsID0gTXVzdGFjaGUucmVuZGVyKHBhdHRlcm4ucGF0dGVybi5wYXR0ZXJuLCBkYXRhKS50b0xvd2VyQ2FzZSgpXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS50cihudWxsLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFJlYWN0LkRPTS5oNihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvY2tcIn0pLCBcbiAgICAgICAgICAgIG1vbWVudChzZW50RW1haWwuY3JlYXRlZEF0KS5mcm9tTm93KCkpKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7Zm9udFNpemU6MTQsZm9udFdlaWdodDonYm9sZCcsbWFyZ2luQm90dG9tOjB9fSwgc2VudEVtYWlsLnByb3NwZWN0Lm5hbWUpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luVG9wOjQsbWFyZ2luQm90dG9tOjB9fSwgc2VudEVtYWlsLnByb3NwZWN0LnBvcy50cmltKCkpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luVG9wOjR9fSwgc2VudEVtYWlsLnByb3NwZWN0LmNvbXBhbnlfbmFtZSlcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBSZWFjdC5ET00uaDYobnVsbCwgZW1haWwpKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHtwYWRkaW5nVG9wOjEzfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwibGFiZWwgbGFiZWwtZGVmYXVsdFwifSwgXCJRdWV1ZWRcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2hldnJvbi1jaXJjbGUtcmlnaHQgdGV4dC1tdXRlZFwiLCBcbiAgICAgICAgICAgICBzdHlsZToge3BhZGRpbmdMZWZ0OjUscGFkZGluZ1JpZ2h0OjV9fSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwibGFiZWwgbGFiZWwtc3VjY2Vzc1wifSwgXCJPcGVuZWRcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2hldnJvbi1jaXJjbGUtcmlnaHQgdGV4dC1tdXRlZFwiLCBcbiAgICAgICAgICAgICBzdHlsZToge3BhZGRpbmdMZWZ0OjUscGFkZGluZ1JpZ2h0OjV9fSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwibGFiZWwgbGFiZWwtZGVmYXVsdFwifSwgXCJEZWxpdmVyZWRcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2hldnJvbi1jaXJjbGUtcmlnaHQgdGV4dC1tdXRlZFwiLCBcbiAgICAgICAgICAgICBzdHlsZToge3BhZGRpbmdMZWZ0OjUscGFkZGluZ1JpZ2h0OjV9fSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwibGFiZWwgbGFiZWwtZGVmYXVsdFwifSwgXCJSZXBsaWVkXCIpXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2N1cnNvcjoncG9pbnRlcid9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1saXN0LWFsdFwifSksIFwiIMKgXCIgKyAnICcgK1xuICAgICAgICAgIFwiQm9zdG9uIFZQIFNhbGVzIC0gUmV0YWlsXCJcbiAgICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2N1cnNvcjoncG9pbnRlcid9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1maWxlLXRleHQtb1wifSksIFwiIMKgXCIgKyAnICcgK1xuICAgICAgICAgIFwiRm9sbG93dXAgIzIgLSBQcm92aWRlIFZhbHVlIFwiLCBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwidGV4dC1tdXRlZFwifSwgXCIgU3ViamVjdDogSnVzdCB3YW50ZWQgdG8gZm9sbG93dXAgb24gdGhlIGxhc3QgZW1haWwgXCIpLCBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwidGV4dC1tdXRlZFwifSwgXCIgQm9keTogSnVzdCB3YW50ZWQgdG8gZm9sbG93dXAgb24gdGhlIGxhc3QgZW1haWwgXCIpXG5cbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH1cbn0pXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxudmFyIFNpZGVNZW51TGlzdE9wdGlvbiA9IHJlcXVpcmUoJy4vdXNlcl9zaWRlX21lbnVfbGlzdC5qcy5taW4uanMnKTtcbnZhciBDcmVhdGVMaXN0TW9kYWwgPSByZXF1aXJlKCcuL2NyZWF0ZV9saXN0X21vZGFsLmpzLm1pbi5qcycpXG52YXIgTWVzc2VuZ2VyID0gcmVxdWlyZSgnLi9tZXNzZW5nZXIuanMubWluLmpzJylcblxudmFyIERlbGV0ZUxpc3RNb2RhbCA9IHJlcXVpcmUoJy4vZGVsZXRlX2xpc3RfbW9kYWwuanMubWluLmpzJylcbnZhciBSZW5hbWVMaXN0TW9kYWwgPSByZXF1aXJlKCcuL3JlbmFtZV9saXN0X21vZGFsLmpzLm1pbi5qcycpXG52YXIgU2lkZU1lbnVMaXN0T3B0aW9uID0gcmVxdWlyZSgnLi91c2VyX3NpZGVfbWVudV9saXN0LmpzLm1pbi5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvL1NpZGVNZW51UHJvc3BlY3RzIC0gU2lkZUxpc3RcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLypcbiAgICAgIGNyZWF0ZUxpc3Q6IFxuICAgICAgcmVuYW1lTGlzdDpcbiAgICAgIGRlbGV0ZUxpc3Q6XG4gICAgICBjaGFuZ2VMaXN0OlxuICAgICAgY3VycmVudExpc3Q6XG4gICAgICB0b3RhbENvdW50OlxuICAgICAgbGlzdHM6XG5cbiAgICAgICovXG4gICAgIGxpc3RzOiBbXSxcbiAgICB9XG4gIH0sXG5cbiAgY3JlYXRlTGlzdDogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICB0aGlzLnByb3BzLmNyZWF0ZUxpc3QoZGF0YSlcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgICQoJy5kcm9wZG93bi1jb3B5LWxpc3QtbmFtZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0KVxuICAgICAgY29uc29sZS5sb2coJChlLnRhcmdldCkuZGF0YSgnb2JqZWN0SWQnKSlcbiAgICAgIC8vdGhpcy5wcm9wcy5jb3B5U2VsZWN0ZWRQcm9zcGVjdHMobGlzdFNlbGVjdFswXS5vYmplY3RJZClcbiAgICB9KVxuXG4gICAgJCgnLmRyb3Bkb3duLW1vdmUtbGlzdC1uYW1lJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgY29uc29sZS5sb2coZS50YXJnZXQpXG4gICAgICBjb25zb2xlLmxvZygkKGUudGFyZ2V0KS5kYXRhKCdtb3ZlLW9iamVjdElkJykpXG4gICAgICAvL3RoaXMucHJvcHMubW92ZVNlbGVjdGVkUHJvc3BlY3RzKGxpc3RTZWxlY3RbMF0ub2JqZWN0SWQpXG4gICAgfSlcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICBQYXJzZS5nZXQodGhpcy5wcm9wcy5saXN0Q2xhc3NOYW1lLCB7IG9yZGVyOiAnLWNyZWF0ZWRBdCd9KS5kb25lKGZ1bmN0aW9uKHJlcykge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe2xpc3RzOiByZXMucmVzdWx0c30pXG4gICAgfSlcblxuICAgICQoJy5kcm9wZG93bi1jb3B5LWxpc3QtbmFtZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0KVxuICAgICAgY29uc29sZS5sb2coJChlLnRhcmdldCkuZGF0YSgnb2JqZWN0SWQnKSlcbiAgICAgIC8vdGhpcy5wcm9wcy5jb3B5U2VsZWN0ZWRQcm9zcGVjdHMobGlzdFNlbGVjdFswXS5vYmplY3RJZClcbiAgICB9KVxuXG4gICAgJCgnLmRyb3Bkb3duLW1vdmUtbGlzdC1uYW1lJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgY29uc29sZS5sb2coZS50YXJnZXQpXG4gICAgICBjb25zb2xlLmxvZygkKGUudGFyZ2V0KS5kYXRhKCdvYmplY3RJZCcpKVxuICAgICAgLy90aGlzLnByb3BzLm1vdmVTZWxlY3RlZFByb3NwZWN0cyhsaXN0U2VsZWN0WzBdLm9iamVjdElkKVxuICAgIH0pXG4gIH0sXG4gIFxuICByZW1vdmVTZWxlY3RlZFByb3NwZWN0czogZnVuY3Rpb24oKSB7XG4gICAgLy8gcmVtb3ZlIHNlbGVjdGVkIGZyb20gbGlzdFxuICAgIHNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMpXG4gICAgX2xpc3QgPSBQYXJzZS5fcG9pbnRlcih0aGlzLnByb3BzLmxpc3RDbGFzc05hbWUsIHRoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZClcbiAgICBib2R5ID0geyBsaXN0czogeyAnX19vcCcgOiAnUmVtb3ZlJywgXCJvYmplY3RzXCIgOiBbX2xpc3RdIH0gfVxuICAgIGlmKHRoaXMuc3RhdGUuY3VycmVudExpc3QgPT0gJ0FsbCcpeyBib2R5ID0geyBhcmNoaXZlZDogdHJ1ZSB9IH1cbiAgICBQYXJzZS5iYXRjaFVwZGF0ZSgnUHJvc3BlY3QnLCBzZWxlY3RlZFByb3NwZWN0cywgYm9keSlcbiAgICAvLyBVcGRhdGUgTGlzdCBDb3VudHNcbiAgICAvL1xuICB9LFxuXG4gIG1vdmVTZWxlY3RlZFByb3NwZWN0czogZnVuY3Rpb24oX2xpc3QpIHtcbiAgICAvLyBtb3ZlIHRvIGxpc3RcbiAgICAvLyBvbmx5IGlmIHRoZSBjdXJyZW50IGxpc3QgaXMgbm90IGFsbFxuICAgIC8vIHJlbW92ZSBwcm9zcGVjdHMgZnJvbSBjdXJyZW50TGlzdFxuICAgIGlmKCF0aGlzLnByb3BzLmN1cnJlbnRMaXN0T2JqZWN0SWQpeyBjb25zb2xlLmxvZygnbm90IHN1cHBvcnRlZCcpOyByZXR1cm4gMH1cbiAgICBzZWxlY3RlZFByb3NwZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzKVxuICAgIG9sZF9saXN0ID0gUGFyc2UuX3BvaW50ZXIodGhpcy5wcm9wcy5saXN0Q2xhc3NOYW1lLCB0aGlzLnByb3BzLmN1cnJlbnRMaXN0T2JqZWN0SWQpXG4gICAgbmV3X2xpc3QgPSBQYXJzZS5fcG9pbnRlcih0aGlzLnByb3BzLmxpc3RDbGFzc05hbWUsIF9saXN0KVxuICAgIHRoaXMucHJvcHMucmVtb3ZlUHJvc3BlY3RzKHNlbGVjdGVkUHJvc3BlY3RzKVxuXG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICBjb25zb2xlLmxvZyhfbGlzdClcbiAgICBjb25zb2xlLmxvZyh0aGlzLnByb3BzLmN1cnJlbnRMaXN0T2JqZWN0SWQpXG4gICAgYm9keSA9IHsgbGlzdHM6IHsgJ19fb3AnIDogJ1JlbW92ZScsIFwib2JqZWN0c1wiIDogW29sZF9saXN0XSB9IH1cbiAgICBQYXJzZS5iYXRjaFVwZGF0ZSgnUHJvc3BlY3QnLCBzZWxlY3RlZFByb3NwZWN0cywgYm9keSkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgIGluY3JlbWVudCA9IHtjb3VudDoge19fb3A6ICdJbmNyZW1lbnQnLCBhbW91bnQ6IC0xKnNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aH19XG4gICAgICBQYXJzZS5wdXQoX3RoaXMucHJvcHMubGlzdENsYXNzTmFtZSsnLycrX2xpc3QsIGluY3JlbWVudCwgZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH0pXG5cbiAgICAgIGFtb3VudCA9IHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aFxuICAgICAgdmFyIGxpc3RzID0gXy5tYXAoX3RoaXMuc3RhdGUubGlzdHMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgaWYoaXRlbS5vYmplY3RJZCA9PSBfdGhpcy5wcm9wcy5jdXJyZW50TGlzdE9iamVjdElkKVxuICAgICAgICAgIGl0ZW0uY291bnQgPSBpdGVtLmNvdW50IC0gYW1vdW50XG4gICAgICAgIHJldHVybiBpdGVtXG4gICAgICB9KVxuICAgICAgY29uc29sZS5sb2cobGlzdHMpXG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7bGlzdHM6IGxpc3RzfSlcbiAgICB9KVxuXG4gICAgYm9keSA9IHsgbGlzdHM6IHsgJ19fb3AnIDogJ0FkZFVuaXF1ZScsIFwib2JqZWN0c1wiIDogW25ld19saXN0XSB9IH1cbiAgICBQYXJzZS5iYXRjaFVwZGF0ZSgnUHJvc3BlY3QnLCBzZWxlY3RlZFByb3NwZWN0cywgYm9keSkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgIGluY3JlbWVudCA9IHtjb3VudDoge19fb3A6ICdJbmNyZW1lbnQnLCBhbW91bnQ6IHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aH19XG4gICAgICBQYXJzZS5wdXQoX3RoaXMucHJvcHMubGlzdENsYXNzTmFtZSsnLycrX2xpc3QsIGluY3JlbWVudCwgZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH0pXG5cbiAgICAgIGFtb3VudCA9IHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aFxuICAgICAgdmFyIGxpc3RzID0gXy5tYXAoX3RoaXMuc3RhdGUubGlzdHMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgaWYoaXRlbS5vYmplY3RJZCA9PSBfbGlzdClcbiAgICAgICAgICBpdGVtLmNvdW50ID0gKGl0ZW0uY291bnQpID8gaXRlbS5jb3VudCArIGFtb3VudCA6IGFtb3VudFxuICAgICAgICByZXR1cm4gaXRlbVxuICAgICAgfSlcbiAgICAgIC8vY29uc29sZS5sb2cobGlzdHMpXG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7bGlzdHM6IGxpc3RzfSlcbiAgICB9KVxuICAgIC8vIFVwZGF0ZSBMaXN0IENvdW50c1xuICB9LFxuXG4gIGNvcHlTZWxlY3RlZFByb3NwZWN0czogZnVuY3Rpb24oX2xpc3QpIHtcbiAgICAvLyBUT0RPIC0gY2hlY2sgdG8gc2VlIGlmIHByb3NwZWN0IGV4aXN0cyBpbiB0aGUgb3RoZXIgbGlzdFxuICAgIC8vIFRPRE8gLSBSZW1vdmUgZnJvbSBzZWxlY3RlZCBwcm9zcGVjdHMgSWYgcHJvc3BlY3RzIGFscmVhZHkgZXhpc3QgaW4gbGlzdCBkbyBub3QgaW5jcmVtZW50XG4gICAgY29uc29sZS5sb2coJ3VwZGF0ZScpXG4gICAgc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cylcbiAgICBuZXdfbGlzdCA9IFBhcnNlLl9wb2ludGVyKHRoaXMucHJvcHMubGlzdENsYXNzTmFtZSwgX2xpc3QpXG4gICAgYm9keSA9IHsgbGlzdHM6IHsgJ19fb3AnIDogJ0FkZFVuaXF1ZScsIFwib2JqZWN0c1wiIDogW25ld19saXN0XSB9IH1cbiAgICBjb25zb2xlLmxvZyhib2R5KVxuXG4gICAgLy9cblxuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgUGFyc2UuYmF0Y2hVcGRhdGUoJ1Byb3NwZWN0Jywgc2VsZWN0ZWRQcm9zcGVjdHMsIGJvZHkpLmRvbmUoZnVuY3Rpb24ocmVzKSB7XG4gICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAvLyBpZiBzdWNjZXNzXG4gICAgICBpbmNyZW1lbnQgPSB7Y291bnQ6IHtfX29wOiAnSW5jcmVtZW50JywgYW1vdW50OiBzZWxlY3RlZFByb3NwZWN0cy5sZW5ndGh9fVxuICAgICAgUGFyc2UucHV0KF90aGlzLnByb3BzLmxpc3RDbGFzc05hbWUrJy8nK19saXN0LCBpbmNyZW1lbnQsIGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9KVxuXG4gICAgICBhbW91bnQgPSBzZWxlY3RlZFByb3NwZWN0cy5sZW5ndGhcbiAgICAgIHZhciBsaXN0cyA9IF8ubWFwKF90aGlzLnN0YXRlLmxpc3RzLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgIGlmKGl0ZW0ub2JqZWN0SWQgPT0gX2xpc3QpXG4gICAgICAgICAgICBpdGVtLmNvdW50ID0gKGl0ZW0uY291bnQpID8gaXRlbS5jb3VudCArIGFtb3VudCA6IGFtb3VudFxuICAgICAgICByZXR1cm4gaXRlbVxuICAgICAgfSlcbiAgICAgIGNvbnNvbGUubG9nKGxpc3RzKVxuICAgICAgX3RoaXMuc2V0U3RhdGUoe2xpc3RzOiBsaXN0c30pXG4gICAgfSlcbiAgfSxcblxuICBjaGFuZ2VMaXN0OiBmdW5jdGlvbihlKSB7XG4gICAgLypcbiAgICBjdXJyZW50TGlzdCA9ICQoZS50YXJnZXQpLnBhcmVudCgpLy8uZGF0YSgnbGlzdCcpXG4gICAgY29uc29sZS5sb2coY3VycmVudExpc3QpXG4gICAgdGhpcy5wcm9wcy5jaGFuZ2VMaXN0KGN1cnJlbnRMaXN0Lm5hbWUsIGN1cnJlbnRMaXN0Lm9iamVjdElkKVxuICAgICovXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBpZih0aGlzLnByb3BzLmN1cnJlbnRMaXN0ID09IFwiQWxsXCIpXG4gICAgICBzdHlsZXMgPSB7J2JhY2tncm91bmRDb2xvcic6J3JnYigwLCAxMjIsIDI1NSknLCAnY29sb3InOid3aGl0ZSd9IFxuICAgIGVsc2VcbiAgICAgIHN0eWxlcyA9ICB7fVxuXG4gICAgbGlzdHMgPSBbU2lkZU1lbnVMaXN0T3B0aW9uKHtsaXN0OiB7bmFtZTogJ0FsbCcsIGNvdW50OiB0aGlzLnByb3BzLnRvdGFsQ291bnR9LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25UeXBlOiAndXNlcnMnLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZUxpc3Q6IHRoaXMucHJvcHMuY2hhbmdlTGlzdH0pLCBcbiAgICAgICAgICAgICBTaWRlTWVudUxpc3RPcHRpb24oe2xpc3Q6IHtuYW1lOiAnQXJjaGl2ZWQnLCBjb3VudDogJ34nfSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uVHlwZTogJ2FyY2hpdmUnLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZUxpc3Q6IHRoaXMucHJvcHMuY2hhbmdlTGlzdCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlQ291bnQ6IHRydWV9KV1cblxuICAgIGZvcihpPTA7aTwgdGhpcy5zdGF0ZS5saXN0cy5sZW5ndGg7aSsrKXtcbiAgICAgIGxpc3QgPSB0aGlzLnN0YXRlLmxpc3RzW2ldXG4gICAgICBpZihsaXN0Lmxpc3RfdHlwZSA9PSBcInNpZ25hbF9saXN0XCIpXG4gICAgICAgIGljb25UeXBlID0gXCJ3aWZpXCJcbiAgICAgIGVsc2UgaWYgKGxpc3QubGlzdF90eXBlID09IFwibWluaW5nX2pvYlwiKVxuICAgICAgICBpY29uVHlwZSA9IFwiY2xvdWREb3dubG9hZFwiXG4gICAgICBpZihsaXN0Lmxpc3RfdHlwZSlcbiAgICAgICAgbGlzdHMucHVzaChTaWRlTWVudUxpc3RPcHRpb24oe2xpc3Q6IGxpc3QsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblR5cGU6IGljb25UeXBlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZUxpc3Q6IHRoaXMucHJvcHMuY2hhbmdlTGlzdH0pKVxuICAgICAgZWxzZSBcbiAgICAgICAgbGlzdHMucHVzaChTaWRlTWVudUxpc3RPcHRpb24oe2xpc3Q6IGxpc3QsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTGlzdDogdGhpcy5wcm9wcy5jaGFuZ2VMaXN0fSkpXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbGctMiBjb2wtbWQtMiBjb2wtc20tMiBjb2wteHMtMlwiLCBcbiAgICAgICAgICAgc3R5bGU6IHtwYWRkaW5nOicwJyxoZWlnaHQ6JzQzOHB4JyxiYWNrZ3JvdW5kQ29sb3I6JyNlMGU5ZWUnLFxuICAgICAgICAgICAgICAgICAgIGJvcmRlclJpZ2h0OicxcHggc29saWQgI2IwYjhiZicsdGV4dEFsaWduOidjZW50ZXInfX0sIFxuICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwcm9zcGVjdC1saXN0LWhlYWRlclwiLCBzdHlsZToge3BhZGRpbmdMZWZ0OjEwLCB0ZXh0QWxpZ246J2NlbnRlcid9fSwgXG4gICAgICAgICAgICAgICAgICAgICBcIkxpc3RzXCJcblxuICAgICAgICAgICAgICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYnRuLWdyb3VwLXZlcnRpY2FsXCIsIFxuICAgICAgICAgICAgIHN0eWxlOiB7d2lkdGg6JzEwMCUnLCBoZWlnaHQ6ICczMjBweCcsIG92ZXJmbG93OiAnYXV0byd9fSwgXG4gICAgICAgICAgbGlzdHNcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBuZXctbGlzdC1idG5cIiwgXG4gICAgICAgICAgICAgICdkYXRhLXRvZ2dsZSc6IFwibW9kYWxcIiwgJ2RhdGEtdGFyZ2V0JzogXCIuYnMtZXhhbXBsZS1tb2RhbC1zbVwiLCBcbiAgICAgICAgICAgICAgc3R5bGU6IHsgYmFja2dyb3VuZEltYWdlOiAnbGluZWFyLWdyYWRpZW50KDE4MGRlZywgIzAwOTZmZiAwJSwgIzAwNWRmZiAxMDAlKSd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wbHVzLWNpcmNsZVwifSksIFwiwqDCoE5ldyBMaXN0XCJcbiAgICAgICAgKSwgXG4gICAgICAgIENyZWF0ZUxpc3RNb2RhbCh7Y3JlYXRlTGlzdDogdGhpcy5jcmVhdGVMaXN0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVMaXN0OiB0aGlzLnVwZGF0ZUxpc3QsIFxuICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RDbGFzc05hbWU6IHRoaXMucHJvcHMubGlzdENsYXNzTmFtZX0pLCBcIiBcIiwgUmVhY3QuRE9NLmJyKG51bGwpXG4gICAgICApXG4gICAgKTtcbiAgfSxcblxuICBjcmVhdGVMaXN0OiBmdW5jdGlvbihkYXRhKSB7IFxuICAgIHRoaXMuc2V0U3RhdGUoeyBsaXN0czogW2RhdGFdLmNvbmNhdCh0aGlzLnN0YXRlLmxpc3RzKSB9KSBcbiAgfSxcblxuICB1cGRhdGVMaXN0OiBmdW5jdGlvbihfaWQsIG9iaklkKSB7XG4gICAgdXBkYXRlZCA9IF8ubWFwKHRoaXMuc3RhdGUubGlzdHMsIGZ1bmN0aW9uKGxpc3QpIHtcbiAgICAgIGlmKGxpc3QudG1wID09IF9pZClcbiAgICAgICAgICBsaXN0Lm9iamVjdElkID0gb2JqSWRcbiAgICAgIHJldHVybiBsaXN0XG4gICAgfSlcbiAgICBjb25zb2xlLmxvZyhcInVwZGF0ZSBicm9za2lcIilcbiAgICB0aGlzLnNldFN0YXRlKHtsaXN0czogdXBkYXRlZH0pXG4gIH0sXG5cbiAgcmVuYW1lTGlzdDogZnVuY3Rpb24obmV3TGlzdE5hbWUpIHtcbiAgICB0aGlzcyA9IHRoaXM7XG4gICAgdmFyIGZpbHRlcmVkID0gXy5maWx0ZXIodGhpcy5zdGF0ZS5saXN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgaWYoaXRlbS5uYW1lID09IHRoaXNzLnN0YXRlLmN1cnJlbnRMaXN0KSB7XG4gICAgICAgIGl0ZW0ubmFtZSA9IG5ld0xpc3ROYW1lXG4gICAgICAgIHJldHVybiBpdGVtXG4gICAgICB9XG4gICAgICByZXR1cm4gaXRlbVxuICAgIH0pO1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7bGlzdHMgOiBmaWx0ZXJlZCwgY3VycmVudExpc3Q6IG5ld0xpc3ROYW1lfSlcblxuICAgICQoJy5tb2RhbCcpLmNsaWNrKClcbiAgICAkKCcjbmV3TGlzdE5hbWUnKS52YWwoJycpXG4gICAgJCgnLm1vZGFsLWJhY2tkcm9wJykuY2xpY2soKVxuXG4gICAgUGFyc2UudXBkYXRlKHRoaXMucHJvcHMubGlzdENsYXNzTmFtZSwgeyduYW1lJzpuZXdMaXN0TmFtZX0pXG4gIH0sXG5cbiAgZGVsZXRlTGlzdDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGZpbHRlcmVkID0gXy5maWx0ZXIodGhpcy5zdGF0ZS5saXN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgaWYoaXRlbS5vYmplY3RJZCA9PSB0aGlzcy5zdGF0ZS5jdXJyZW50TGlzdE9iamVjdElkKVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHtsaXN0czogZmlsdGVyZWQsIGN1cnJlbnRMaXN0OiAnQWxsJ30pXG4gICAgdGhpcy5jaGFuZ2VMaXN0KCdBbGwnLCAnJylcblxuICAgIGFwcENvbmZpZy5jbG9zZU1vZGFsKCk7IFxuICAgICQoJyNuZXdMaXN0TmFtZScpLnZhbCgnJyk7XG4gICAgUGFyc2UuZGVsZXRlKHRoaXMucHJvcHMubGlzdENsYXNzTmFtZSsnLycrdGhpcy5zdGF0ZS5jdXJyZW50TGlzdE9iamVjdElkKTtcbiAgfSxcbn0pO1xuXG52YXIgQ3VycmVudExpc3RzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ3VycmVudExpc3RzJyxcbiAgbGlzdEFjdGlvbjogZnVuY3Rpb24oZSkge1xuICAgIHZhciBsaXN0U2VsZWN0ID0gXy5maWx0ZXIodGhpcy5wcm9wcy5saXN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT0gJChlLnRhcmdldCkudGV4dCgpXG4gICAgfSk7XG5cbiAgICB0aGlzLnByb3BzLm1vdmVTZWxlY3RlZFByb3NwZWN0cyhsaXN0U2VsZWN0WzBdLm9iamVjdElkKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgbGlzdHMgPSBbXSBcbiAgICBmb3IoaT0wO2k8IHRoaXMucHJvcHMubGlzdHMubGVuZ3RoO2krKykge1xuICAgICAgbGlzdHMucHVzaChcbiAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLGZvbnRTaXplOicxMHB4J30sIFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBcImRyb3Bkb3duLWxpc3QtbmFtZVwiLCBcbiAgICAgICAgICAgIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmxpc3RBY3Rpb259LCB0aGlzLnByb3BzLmxpc3RzW2ldLm5hbWUpKVxuICAgICAgKVxuICAgIH1cbiAgICAvL2NvbnNvbGUubG9nKHRoaXMucHJvcHMuY29weURyb3Bkb3duU3R5bGUpXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcImRyb3Bkb3duLW1lbnUgZHJvcC10ZXN0XCIsIGlkOiBcImRyb3Bkb3duXCIsIFxuICAgICAgICAgIHN0eWxlOiB7cmlnaHQ6LTIzLHRvcDoyN319LCBcbiAgICAgICAgbGlzdHNcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxudmFyIEN1cnJlbnRMaXN0c1R3byA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0N1cnJlbnRMaXN0c1R3bycsXG4gIGxpc3RBY3Rpb246IGZ1bmN0aW9uKGUpIHtcbiAgICBsaXN0TmFtZSA9ICQoZS50YXJnZXQpLnRleHQoKVxuICAgIFxuICAgIHZhciBsaXN0U2VsZWN0ID0gXy5maWx0ZXIodGhpcy5wcm9wcy5saXN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT0gbGlzdE5hbWVcbiAgICB9KTtcblxuICAgIHRoaXMucHJvcHMuY29weVNlbGVjdGVkUHJvc3BlY3RzKGxpc3RTZWxlY3RbMF0ub2JqZWN0SWQpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBsaXN0cyA9IFtdIFxuICAgIGZvcihpPTA7aTwgdGhpcy5wcm9wcy5saXN0cy5sZW5ndGg7aSsrKSB7XG4gICAgICBsaXN0cy5wdXNoKFxuICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe3N0eWxlOiB7Zm9udFdlaWdodDonYm9sZCcsZm9udFNpemU6JzEwcHgnfSwgXG4gICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZHJvcGRvd24tbGlzdC1uYW1lXCIsIFxuICAgICAgICAgICAgICAgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMubGlzdEFjdGlvbn0sIFxuICAgICAgICAgIHRoaXMucHJvcHMubGlzdHNbaV0ubmFtZSkpXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJkcm9wZG93bi1tZW51IGRyb3AtdGVzdFwiLCBpZDogXCJkcm9wZG93blwiLCBcbiAgICAgICAgICBzdHlsZToge3dpZHRoOjExNCxyaWdodDotNzEsdG9wOjI3fX0sIFxuICAgICAgICBsaXN0c1xuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIFNpZ25hbEFuYWx5dGljc1xuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXBvcnRzIDogW11cbiAgICB9XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuXG5cbnZhciBtYXJnaW4gPSB7dG9wOiAxLCByaWdodDogMSwgYm90dG9tOiA2LCBsZWZ0OiAxfSxcbiAgICB3aWR0aCA9IDg1MCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxuICAgIGhlaWdodCA9IDM1MCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuXG52YXIgZm9ybWF0TnVtYmVyID0gZDMuZm9ybWF0KFwiLC4wZlwiKSxcbiAgICBmb3JtYXQgPSBmdW5jdGlvbihkKSB7IHJldHVybiBmb3JtYXROdW1iZXIoZCkgKyBcIiBUV2hcIjsgfSxcbiAgICBjb2xvciA9IGQzLnNjYWxlLmNhdGVnb3J5MjAoKTtcblxudmFyIHN2ZyA9IGQzLnNlbGVjdChcIiNjaGFydFwiKS5hcHBlbmQoXCJzdmdcIilcbiAgICAuYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXG4gICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXG4gIC5hcHBlbmQoXCJnXCIpXG4gICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBtYXJnaW4ubGVmdCArIFwiLFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKTtcblxudmFyIHNhbmtleSA9IGQzLnNhbmtleSgpXG4gICAgLm5vZGVXaWR0aCgxNSlcbiAgICAubm9kZVBhZGRpbmcoMTApXG4gICAgLnNpemUoW3dpZHRoLCBoZWlnaHRdKTtcblxudmFyIHBhdGggPSBzYW5rZXkubGluaygpO1xuXG4vL2QzLmpzb24oXCJodHRwczovL2dpc3QuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3JzaW1iYS8zM2ZiYzc1NWZhNzFlNmFlYTQ0Ni9yYXcvODgwMzQ1YTE2ZGJhZTM5NzUzNjgyYmI2NTkyNDk0MDRhMzgyMDE0Ni9naXN0ZmlsZTEuanNvblwiLCBmdW5jdGlvbihlbmVyZ3kpIHtcbi8vZDMuanNvbihcImh0dHBzOi8vZ2lzdC5naXRodWJ1c2VyY29udGVudC5jb20vcnNpbWJhLzcwZDRkMzM5M2QzMzc3N2Y0YzExL3Jhdy8yMjhlMzBkNzg4NTkxYjE1ZDg1ZjIwZjhiYWYyY2NkNTBiNzkyOThjL2dpc3RmaWxlMS5qc29uXCIsIGZ1bmN0aW9uKGVuZXJneSkge1xuLypcbnVybCA9IFwiaHR0cDovLzEyNy4wLjAuMTo1MDAwL3YxL3JlcG9ydC9wcm9maWxlXCJcbiAgKi9cbnVybCA9IFwiaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdFByb2ZpbGUvVGpDWlJmSEI3TlwiXG5kMy5qc29uKHVybClcbiAgLmhlYWRlcihcIlgtUGFyc2UtQXBwbGljYXRpb24tSWRcIiwgXCJOODVRT2t0ZUVFUWt1WlZKS0F2dDhNVmVzMHNqRzZxTnBFR3FRRlZKXCIpXG4gIC5oZWFkZXIoXCJYLVBhcnNlLVJFU1QtQVBJLUtleVwiLCBcIlZONkV3VnlCWndPMXVwaHNCUHNhdTh0N0pRUnAwMFVNM0tZc2lpUWJcIilcbiAgLmhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIilcbiAgLmdldChmdW5jdGlvbihlcnJvciwgZW5lcmd5KSB7XG4gICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgY29uc29sZS5sb2coZW5lcmd5KVxuICAgIGVuZXJneSA9IGVuZXJneS5zYW5rZXlcbiAgc2Fua2V5XG4gICAgICAubm9kZXMoZW5lcmd5Lm5vZGVzKVxuICAgICAgLmxpbmtzKGVuZXJneS5saW5rcylcbiAgICAgIC5sYXlvdXQoMzIpO1xuXG4gIHZhciBsaW5rID0gc3ZnLmFwcGVuZChcImdcIikuc2VsZWN0QWxsKFwiLmxpbmtcIilcbiAgICAgIC5kYXRhKGVuZXJneS5saW5rcylcbiAgICAuZW50ZXIoKS5hcHBlbmQoXCJwYXRoXCIpXG4gICAgICAuYXR0cihcImNsYXNzXCIsIFwibGlua1wiKVxuICAgICAgLmF0dHIoXCJkXCIsIHBhdGgpXG4gICAgICAuc3R5bGUoXCJzdHJva2Utd2lkdGhcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gTWF0aC5tYXgoMSwgZC5keSk7IH0pXG4gICAgICAuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBiLmR5IC0gYS5keTsgfSk7XG5cbiAgbGluay5hcHBlbmQoXCJ0aXRsZVwiKVxuICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5zb3VyY2UubmFtZSArIFwiIOKGkiBcIiArIGQudGFyZ2V0Lm5hbWUgKyBcIlxcblwiICsgZm9ybWF0KGQudmFsdWUpOyB9KTtcblxuICB2YXIgbm9kZSA9IHN2Zy5hcHBlbmQoXCJnXCIpLnNlbGVjdEFsbChcIi5ub2RlXCIpXG4gICAgICAuZGF0YShlbmVyZ3kubm9kZXMpXG4gICAgLmVudGVyKCkuYXBwZW5kKFwiZ1wiKVxuICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcIm5vZGVcIilcbiAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgZC54ICsgXCIsXCIgKyBkLnkgKyBcIilcIjsgfSlcbiAgICAuY2FsbChkMy5iZWhhdmlvci5kcmFnKClcbiAgICAgIC5vcmlnaW4oZnVuY3Rpb24oZCkgeyByZXR1cm4gZDsgfSlcbiAgICAgIC5vbihcImRyYWdzdGFydFwiLCBmdW5jdGlvbigpIHsgdGhpcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMpOyB9KVxuICAgICAgLm9uKFwiZHJhZ1wiLCBkcmFnbW92ZSkpO1xuXG4gIG5vZGUuYXBwZW5kKFwicmVjdFwiKVxuICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5keTsgfSlcbiAgICAgIC5hdHRyKFwid2lkdGhcIiwgc2Fua2V5Lm5vZGVXaWR0aCgpKVxuICAgICAgLy8uc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuY29sb3IgPSBjb2xvcihkLm5hbWUucmVwbGFjZSgvIC4qLywgXCJcIikpOyB9KVxuICAgICAgLnN0eWxlKFwic3Ryb2tlXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQzLnJnYihkLmNvbG9yKS5kYXJrZXIoMik7IH0pXG4gICAgLmFwcGVuZChcInRpdGxlXCIpXG4gICAgICAudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBkLm5vZGUgKyBcIlxcblwiICsgZC52YWx1ZTsgfSk7XG5cbiAgbm9kZS5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAuYXR0cihcInhcIiwgLTYpXG4gICAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5keSAvIDI7IH0pXG4gICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcbiAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgXCJlbmRcIilcbiAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIG51bGwpXG4gICAgICAvLy50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQubmFtZTsgfSlcbiAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQubmFtZSArIFwiXFxuXCIgKyBkLnZhbHVlOyB9KVxuICAgIC5maWx0ZXIoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC54IDwgd2lkdGggLyAyOyB9KVxuICAgICAgLmF0dHIoXCJ4XCIsIDYgKyBzYW5rZXkubm9kZVdpZHRoKCkpXG4gICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIFwic3RhcnRcIik7XG5cbiAgZnVuY3Rpb24gZHJhZ21vdmUoZCkge1xuICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgZC54ICsgXCIsXCIgKyAoZC55ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oaGVpZ2h0IC0gZC5keSwgZDMuZXZlbnQueSkpKSArIFwiKVwiKTtcbiAgICBzYW5rZXkucmVsYXlvdXQoKTtcbiAgICBsaW5rLmF0dHIoXCJkXCIsIHBhdGgpO1xuICB9XG59KTtcblxuXG4gIH0sXG4gIFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIC8vVE9ETyAtIGFkZCAyIHBpZSBjaGFydHMgZm9yIGNsZWFyc3BhcmsgYW5hbHlzaXNcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtoZWlnaHQ6NDQsYm9yZGVyQm90dG9tOidzb2xpZCAxcHggcmdiKDIyMSwgMjIxLCAyMjEpJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDQoe29uQ2xpY2s6IHRoaXMucmV0dXJuVG9DYWxlbmRhclZpZXcsIFxuICAgICAgICAgICAgICBzdHlsZToge2ZvbnRXZWlnaHQ6MjAwLCBmbG9hdDonbGVmdCcsY3Vyc29yOidwb2ludGVyJyxtYXJnaW5Ub3A6NyxcbiAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nTGVmdDoyMCxwYWRkaW5nVG9wOjUsIGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1waWUtY2hhcnRcIiwgc3R5bGU6IHttYXJnaW5SaWdodDo1fX0pLCBcbiAgICAgICAgICAgICAgICBcIkFuYWx5dGljcyAtXCIsICBcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm5hbWVcbiAgICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtpZDogXCJjaGFydFwifSlcbiAgICAgIClcbiAgICApXG4gIH1cbn0pXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInNpZ25hbC1ncmFkaWVudC1iZyBjb2wtbWQtMTJcIiwgc3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmgzKHtzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLGNvbG9yOid3aGl0ZSd9fSwgXCJDcmVhdGUgU2lnbmFsIFN0cmF0ZWd5XCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJzdHJhdGVneS1hcHBcIn0sIFwiIFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwic3RyYXRlZ3ktYXBwXCJ9LCBcIiBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInN0cmF0ZWd5LWFwcFwifSwgXCIgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJzdHJhdGVneS1hcHBcIn0sIFwiIFwiKVxuICAgICAgKVxuICAgIClcbiAgfVxufSk7XG4vKlxuIFxuICAgICAgICA8dGFibGU+XG4gICAgICAgICAgPHRyPlxuICAgICAgICAgICAgPHRkPiA8ZGl2IGNsYXNzTmFtZT1cInN0cmF0ZWd5LWFwcFwiPiA8L2Rpdj4gPC90ZD5cbiAgICAgICAgICAgIDx0ZD4gPGRpdiBjbGFzc05hbWU9XCJzdHJhdGVneS1hcHBcIj4gPC9kaXY+IDwvdGQ+XG4gICAgICAgICAgICA8dGQ+IDxkaXYgY2xhc3NOYW1lPVwic3RyYXRlZ3ktYXBwXCI+IDwvZGl2PiA8L3RkPlxuICAgICAgICAgICAgPHRkPiA8ZGl2IGNsYXNzTmFtZT1cInN0cmF0ZWd5LWFwcFwiPiA8L2Rpdj4gPC90ZD5cbiAgICAgICAgICA8L3RyPlxuICAgICAgICA8L3RhYmxlPlxuKi9cbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBTaWduYWxDYWxlbmRhclxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXBvcnRzIDogW11cbiAgICB9XG4gIH0sXG5cbiAgZ2V0U2lnbmFsUmVwb3J0OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIHFyeSA9IHtcbiAgICAgIHdoZXJlIDogSlNPTi5zdHJpbmdpZnkoe3Byb2ZpbGU6e1xuICAgICAgICAgIF9fdHlwZTonUG9pbnRlcicsXG4gICAgICAgICAgY2xhc3NOYW1lOidQcm9zcGVjdFByb2ZpbGUnLFxuICAgICAgICAgIG9iamVjdElkOnRoaXMucHJvcHMuY3VycmVudFByb2ZpbGUub2JqZWN0SWRcbiAgICAgIH19KSxcbiAgICAgIG9yZGVyOictY3JlYXRlZEF0JyxcbiAgICAgIGxpbWl0OjEwXG4gICAgfVxuXG4gICAgUGFyc2UuZ2V0KCdTaWduYWxSZXBvcnQnLCBxcnkpLmRvbmUoZnVuY3Rpb24ocmVzKSB7XG4gICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7cmVwb3J0czogcmVzLnJlc3VsdHN9KVxuICAgIH0pXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZ2V0U2lnbmFsUmVwb3J0KClcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgIC8vdGhpcy5nZXRTaWduYWxSZXBvcnQoKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmVwb3J0cyA9IFtdXG4gICAgZm9yKGk9MDtpPCB0aGlzLnByb3BzLnJlcG9ydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmKHRoaXMucHJvcHMucmVwb3J0c1tpXSkge1xuICAgICAgICAgIHJlcG9ydHMucHVzaChTaWduYWxSZXBvcnRSb3coe3NldEN1cnJlbnRSZXBvcnQ6IHRoaXMuc2V0Q3VycmVudFJlcG9ydCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9zcGVjdFNpZ25hbFJlcG9ydDogdGhpcy5wcm9zcGVjdFNpZ25hbFJlcG9ydCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFZpZXc6IHRoaXMuc2V0Q3VycmVudFZpZXcsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcG9ydDogdGhpcy5wcm9wcy5yZXBvcnRzW2ldfSkpXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb250YWluZXJcIiwgc3R5bGU6IHtwYWRkaW5nTGVmdDowLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6MCx3aWR0aDonMTAwJSd9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7aGVpZ2h0OjQ0LGJvcmRlckJvdHRvbTonc29saWQgMXB4IHJnYigyMjEsIDIyMSwgMjIxKSd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg0KHtvbkNsaWNrOiB0aGlzLnJldHVyblRvQ2FsZW5kYXJWaWV3LCBcbiAgICAgICAgICAgICAgc3R5bGU6IHtmb250V2VpZ2h0OjIwMCwgZmxvYXQ6J2xlZnQnLGN1cnNvcjoncG9pbnRlcicsbWFyZ2luVG9wOjcsXG4gICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0xlZnQ6MjAscGFkZGluZ1RvcDo1LCBkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2FsZW5kYXJcIiwgc3R5bGU6IHttYXJnaW5SaWdodDo1fX0pLCBcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm5hbWVcbiAgICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTEyXCIsIHN0eWxlOiB7cGFkZGluZ0xlZnQ6MCxwYWRkaW5nUmlnaHQ6MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6NDU2LG92ZXJmbG93OidhdXRvJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge292ZXJmbG93OidhdXRvJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50YWJsZSh7Y2xhc3NOYW1lOiBcInRhYmxlIHRhYmxlLXN0cmlwZWRcIiwgc3R5bGU6IHttYXJnaW5Cb3R0b206MH19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoZWFkKG51bGwsIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvY2stb1wifSksIFwiIExhc3QgUmFuXCJcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInLCBkaXNwbGF5Oidub25lJ319LCBcIlBvc3RlZCBKb2IgTGlzdGluZ1wiKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiQ29tcGFueSBTaWduYWxzXCIpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7ZGlzcGxheTonYmxvY2snfX0sIFwiUHJvc3BlY3QgU2lnbmFsc1wiKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3dpZHRoOjE1MCx0ZXh0QWxpZ246J2NlbnRlcid9fSlcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50Ym9keSh7Y2xhc3NOYW1lOiBcInJlcG9ydHNcIn0sIFxuICAgICAgICAgICAgICAgIHJlcG9ydHNcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgc2V0Q3VycmVudFJlcG9ydDogZnVuY3Rpb24obmV3UmVwb3J0KSB7XG4gICAgdGhpcy5wcm9wcy5zZXRDdXJyZW50UmVwb3J0KG5ld1JlcG9ydClcbiAgfSxcblxuICBwcm9zcGVjdFNpZ25hbFJlcG9ydDogZnVuY3Rpb24oc2lnbmFsUmVwb3J0KSB7XG4gICAgdGhpcy5wcm9wcy5wcm9zcGVjdFNpZ25hbFJlcG9ydCh0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLCBzaWduYWxSZXBvcnQpXG4gIH0sXG59KTtcblxudmFyIFNpZ25hbFJlcG9ydFJvdyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1NpZ25hbFJlcG9ydFJvdycsXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbXBhbnlDb3VudDogJ34nLFxuICAgICAgcGVvcGxlQ291bnQ6ICd+J1xuICAgIH1cbiAgfSxcblxuICByb3dDbGljazogZnVuY3Rpb24oKSB7XG4gICAgaWYodGhpcy5wcm9wcy5yZXBvcnQuZG9uZSlcbiAgICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFJlcG9ydCh0aGlzLnByb3BzLnJlcG9ydClcbiAgICBlbHNlXG4gICAgICBhbGVydGlmeS5sb2coXCJUaGlzIG1pbmluZyBqb2IgaXMgc3RpbGwgaW4gcHJvZ3Jlc3MuIFlvdSdsbCBiZSBub3RpZmllZCB3aGVuIGl0J3MgY29tcGxldGVkXCIpXG4gIH0sXG5cbiAgcHJvc3BlY3RTaWduYWxSZXBvcnQ6IGZ1bmN0aW9uKGUpIHtcbiAgICB0aGlzLnByb3BzLnByb3NwZWN0U2lnbmFsUmVwb3J0KHRoaXMucHJvcHMucmVwb3J0KVxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7IFxuICAgIGNvbnNvbGUubG9nKCdjYWxlbmRhcicpXG4gICAgcmVwb3J0ID0gYXBwQ29uZmlnLnBvaW50ZXIoJ1NpZ25hbFJlcG9ydCcsIHRoaXMucHJvcHMucmVwb3J0Lm9iamVjdElkKVxuICAgIHFyeSA9IHtcbiAgICAgIHdoZXJlOkpTT04uc3RyaW5naWZ5KHsgcmVwb3J0OiByZXBvcnQgfSksXG4gICAgICBjb3VudDogMVxuICAgIH1cbiAgICB2YXIgdGhpc3MgPSB0aGlzO1xuICAgIC8qXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9QZW9wbGVTaWduYWwnLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgdGhpc3Muc2V0U3RhdGUoe3Blb3BsZUNvdW50OiByZXMuY291bnR9KX0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUubG9nKGVyci5yZXNwb25zZVRleHQpIH0sXG4gICAgfSlcblxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvQ29tcGFueVNpZ25hbCcsXG4gICAgICBkYXRhOiBxcnksXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyB0aGlzcy5zZXRTdGF0ZSh7Y29tcGFueUNvdW50OiByZXMuY291bnR9KX0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUubG9nKGVyci5yZXNwb25zZVRleHQpIH0sXG4gICAgfSlcbiAgICAqL1xuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcHJvc3BlY3RlZCA9IHRoaXMucHJvcHMucmVwb3J0LnByb3NwZWN0ZWRcbiAgICBpZighdGhpcy5wcm9wcy5yZXBvcnQubWluaW5nX2pvYilcbiAgICAgIGljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXdpZmlcIn0pXG4gICAgZWxzZVxuICAgICAgaWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvdWQtZG93bmxvYWRcIiwgc3R5bGU6IHtjb2xvcjonIzU1NSd9fSlcblxuICAgIGxvYWRpbmcgPSAoIXRoaXMucHJvcHMucmVwb3J0LmRvbmUpID8gUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInByb2ZpbGUtbG9hZGluZ1wiLCBzdHlsZToge21hcmdpbkxlZnQ6MzB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRvdWJsZS1ib3VuY2UxXCIsIHN0eWxlOiB7YmFja2dyb3VuZENvbG9yOicjNWNiODVjJ319KSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRvdWJsZS1ib3VuY2UyXCIsIHN0eWxlOiB7YmFja2dyb3VuZENvbG9yOicjNWNiODVjJ319KVxuICAgICAgICAgICkgOiBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5wcm9zcGVjdFNpZ25hbFJlcG9ydCwgXG4gICAgICAgICAgICAgc3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJyxtYXJnaW5Ub3A6NX0sIFxuICAgICBjbGFzc05hbWU6IChwcm9zcGVjdGVkKSA/IFwiYnRuIGJ0bi14cyBidG4tc3VjY2VzcyBkaXNhYmxlZCBncmVlbi1ncmFkaWVudFwiIDogXCJidG4gYnRuLXhzIGJ0bi1zdWNjZXNzIGdyZWVuLWdyYWRpZW50XCJ9LCBcbiAgICAgICAgICAgICAocHJvc3BlY3RlZCkgPyAnUHJvc3BlY3RlZCcgOiAnUHJvc3BlY3QgQWxsJ1xuICAgICAgICAgIClcbiAgICAvLyBNYWtlIGFuIEFsZXJ0IHdoZW4gc29tZWJvZHkgY2xpY2tzIG9uIGluIHByb2dyZXNzIHNpZ25hbCByZXBvcnRcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnRyKHtvbkNsaWNrOiB0aGlzLnJvd0NsaWNrLCBzdHlsZToge2N1cnNvcjoncG9pbnRlcid9fSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt0ZXh0QWxpZ246J3JpZ2h0JyxwYWRkaW5nVG9wOjE1fX0sIFxuICAgICAgICAgIGljb25cbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIFxuICAgICAgICAgICAgbW9tZW50KHRoaXMucHJvcHMucmVwb3J0LmNyZWF0ZWRBdCkuZnJvbU5vdygpXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyxkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgXG4gICAgICAgICAgJ2xvbCdcbiAgICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1zdWNjZXNzXCJ9LCBcbiAgICAgICAgICAgIHRoaXMucHJvcHMucmVwb3J0LmNvbXBhbnlfY291bnRcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgIFwiwqAgQ29tcGFuaWVzIGZvdW5kLlwiXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLXN1Y2Nlc3NcIn0sIFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5yZXBvcnQucGVvcGxlX2NvdW50XG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICBcIsKgIFBlb3BsZSBmb3VuZC5cIlxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6ICh0aGlzLnByb3BzLnJlcG9ydC5kb25lKSA/IHt9IDoge3BhZGRpbmdUb3A6MTd9fSwgXG4gICAgICAgICAgbG9hZGluZ1xuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG52YXIgQ29tcGFueURldGFpbCA9IHJlcXVpcmUoJy4vY29tcGFueV9kZXRhaWwuanMubWluLmpzJylcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gU2lnbmFsRGV0YWlsXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGN1cnJlbnRTaWduYWw6ICdDb21wYW55U2lnbmFsJyxcbiAgICAgIHNpZ25hbHM6IFtdLFxuICAgICAgLy9hbGxQcm9zcGVjdGVkOiB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlUmVwb3J0LnByb3NwZWN0ZWQsXG4gICAgICBjb21wYW55Q291bnQ6ICd+JyxcbiAgICAgIHBlb3BsZUNvdW50OiAnficsXG4gICAgICBkZXRhaWxNb2RlOiBmYWxzZSxcbiAgICAgIGRldGFpbENvbXBhbnk6IHt9LFxuICAgIH1cbiAgfSxcblxuICBnZXRTaWduYWxzOiBmdW5jdGlvbihjdXJyZW50U2lnbmFsKSB7XG4gICAgdmFyIHRoaXNzc3MgPSB0aGlzO1xuICAgIGN1cnJlbnRSZXBvcnQgPSB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlUmVwb3J0Lm9iamVjdElkXG4gICAgY3VycmVudFByb2ZpbGVSZXBvcnQgPSBhcHBDb25maWcucG9pbnRlcignU2lnbmFsUmVwb3J0JywgY3VycmVudFJlcG9ydClcblxuICAgIHFyeSA9IHtcbiAgICAgIHdoZXJlOkpTT04uc3RyaW5naWZ5KHsgcmVwb3J0OiBjdXJyZW50UHJvZmlsZVJlcG9ydCB9KSxcbiAgICAgIGluY2x1ZGU6J2NvbXBhbnksc2lnbmFsLnNpZ25hbCxzaWduYWwnLFxuICAgICAgb3JkZXI6Jy1jcmVhdGVkQXQnLFxuICAgICAgbGltaXQ6MTAwXG4gICAgfVxuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvJytjdXJyZW50U2lnbmFsLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZygnU0lHTkFMIERFVEFJTCcpXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcy5yZXN1bHRzKVxuICAgICAgICBjb25zb2xlLmxvZygnUFJPRklMRSBSRVBPUlQnKVxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzc3NzLnByb3BzLmN1cnJlbnRQcm9maWxlUmVwb3J0Lm9iamVjdElkKVxuICAgICAgICB0aGlzc3NzLnNldFN0YXRlKHtzaWduYWxzOiByZXMucmVzdWx0c30pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2VUZXh0KSB9XG4gICAgfSk7XG4gIH0sXG5cbiAgc2V0Q29tcGFueVN0YXRlOiBmdW5jdGlvbigpIHsgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudFNpZ25hbDogJ0NvbXBhbnlTaWduYWwnfSkgfSwgXG4gIHNldFBlcnNvblN0YXRlOiBmdW5jdGlvbigpIHsgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudFNpZ25hbDogJ1Blb3BsZVNpZ25hbCd9KSB9LCBcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ2RldGFpbCcpXG4gICAgY29uc29sZS5sb2codGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZVJlcG9ydC5vYmplY3RJZClcbiAgICB0aGlzLmdldFNpZ25hbHModGhpcy5zdGF0ZS5jdXJyZW50U2lnbmFsKVxuICAgIHFyeSA9IHtcbiAgICAgIHdoZXJlOkpTT04uc3RyaW5naWZ5KHsgcmVwb3J0OiBjdXJyZW50UHJvZmlsZVJlcG9ydCB9KSxcbiAgICAgIGNvdW50OiAxLFxuICAgICAgbGltaXQ6MTAwLFxuICAgICAgb3JkZXI6J2NyZWF0ZWRBdCdcbiAgICB9XG4gICAgdmFyIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Blb3BsZVNpZ25hbCcsXG4gICAgICBkYXRhOiBxcnksXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyB0aGlzcy5zZXRTdGF0ZSh7cGVvcGxlQ291bnQ6IHJlcy5jb3VudH0pfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlVGV4dCkgfSxcbiAgICB9KVxuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Db21wYW55U2lnbmFsJyxcbiAgICAgIGRhdGE6IHFyeSxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IHRoaXNzLnNldFN0YXRlKHtjb21wYW55Q291bnQ6IHJlcy5jb3VudH0pfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlVGV4dCkgfSxcbiAgICB9KVxuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxVcGRhdGU6IGZ1bmN0aW9uKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG4gICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50U2lnbmFsICE9IG5leHRTdGF0ZS5jdXJyZW50U2lnbmFsKVxuICAgICAgdGhpcy5nZXRTaWduYWxzKG5leHRTdGF0ZS5jdXJyZW50U2lnbmFsKVxuICB9LFxuXG4gIHJldHVyblRvQ2FsZW5kYXJWaWV3OiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygncmV0dXJuIHRvIGNhbGVuZGFyIHZpZXcnKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ0FMTCBQUk9TUEVDVEVEJylcbiAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLmFsbFByb3NwZWN0ZWQpXG4gICAgY29uc29sZS5sb2coJ0NVUlJFTlQgU0lHTkFMJylcbiAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLmN1cnJlbnRTaWduYWwpXG4gICAgY29uc29sZS5sb2coJ1NJR05BTCcpXG4gICAgY29uc29sZS5sb2codGhpcy5zdGF0ZS5zaWduYWxzKVxuICAgIHNpZ25hbHMgPSBbXVxuICAgIGZvcihpPTA7aTwgdGhpcy5zdGF0ZS5zaWduYWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZih0aGlzLnN0YXRlLmN1cnJlbnRTaWduYWwgPT0gJ0NvbXBhbnlTaWduYWwnKVxuICAgICAgICBzaWduYWxzLnB1c2goQ29tcGFueUhpcmluZ1NpZ25hbFJvdyh7c2lnbmFsOiB0aGlzLnN0YXRlLnNpZ25hbHNbaV0sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlRGV0YWlsTW9kZTogdGhpcy50b2dnbGVEZXRhaWxNb2RlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbFByb3NwZWN0ZWQ6IHRoaXMuc3RhdGUuYWxsUHJvc3BlY3RlZH0pKVxuICAgICAgZWxzZVxuICAgICAgICBzaWduYWxzLnB1c2goUGVvcGxlU2lnbmFsUm93KHtzaWduYWw6IHRoaXMuc3RhdGUuc2lnbmFsc1tpXSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxQcm9zcGVjdGVkOiB0aGlzLnN0YXRlLmFsbFByb3NwZWN0ZWR9KSlcbiAgICB9XG5cbiAgICBjdXJyZW50UHJvZmlsZVJlcG9ydCA9IHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGVSZXBvcnRcbiAgICBjb21wYW55QnRuID0gKHRoaXMuc3RhdGUuY3VycmVudFNpZ25hbCA9PSBcIkNvbXBhbnlTaWduYWxcIikgPyBcImJ0biBidG4teHMgYnRuLWRlZmF1bHQgYWN0aXZlXCIgOiBcImJ0biBidG4teHMgYnRuLWRlZmF1bHRcIlxuICAgIHBlb3BsZUJ0biA9ICh0aGlzLnN0YXRlLmN1cnJlbnRTaWduYWwgPT0gXCJQZW9wbGVTaWduYWxcIikgPyBcImJ0biBidG4teHMgYnRuLWRlZmF1bHQgYWN0aXZlXCIgOiBcImJ0biBidG4teHMgYnRuLWRlZmF1bHRcIlxuICAgIHNjb3JlX2NvbHVtbj0odGhpcy5zdGF0ZS5jdXJyZW50U2lnbmFsID09IFwiUGVvcGxlU2lnbmFsXCIpID8gUmVhY3QuRE9NLnRoKG51bGwsIFwiU2NvcmVcIikgOiBcIlwiXG4gICAgbG9nb19jb2x1bW49KHRoaXMuc3RhdGUuY3VycmVudFNpZ25hbCA9PSBcIkNvbXBhbnlTaWduYWxcIikgPyBSZWFjdC5ET00udGgobnVsbCkgOiBcIlwiXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb250YWluZXJcIiwgc3R5bGU6IHtoZWlnaHQ6NDU2LHBhZGRpbmdMZWZ0OjAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDowLHdpZHRoOicxMDAlJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtoZWlnaHQ6NDQsYm9yZGVyQm90dG9tOidzb2xpZCAxcHggcmdiKDIyMSwgMjIxLCAyMjEpJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDQoe29uQ2xpY2s6IHRoaXMucmV0dXJuVG9DYWxlbmRhclZpZXcsIFxuICAgICAgICAgICAgICBzdHlsZToge2Zsb2F0OidsZWZ0JyxjdXJzb3I6J3BvaW50ZXInLG1hcmdpblRvcDo3LGZvbnRXZWlnaHQ6MjAwLFxuICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OjIwLHBhZGRpbmdUb3A6NSxkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNhbGVuZGFyXCIsIHN0eWxlOiB7bWFyZ2luUmlnaHQ6NX19KSwgXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZS5uYW1lXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2ZvbnRTaXplOjEzLHBhZGRpbmdMZWZ0OjUscGFkZGluZ1RvcDo1LGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZXZyb24tcmlnaHRcIiwgc3R5bGU6IHtmb250U2l6ZTo5fX0pLCBcIiDCoFwiLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvY2stb1wifSksIFwiIMKgXCIsIFxuICAgICAgICAgICAgbW9tZW50KGN1cnJlbnRQcm9maWxlUmVwb3J0LmNyZWF0ZWRBdCkuZnJvbU5vdygpLCBcIiDCoFwiXG4gICAgICAgICAgKSwgXG5cbiAgICAgICAgICAodGhpcy5zdGF0ZS5hbGxQcm9zcGVjdGVkKSA/XG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgc3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJyxmbG9hdDoncmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OjEwLG1hcmdpblRvcDoxMH0sIFxuICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzIGRpc2FibGVkXCJ9LCBcbiAgICAgICAgICAgIFwiUHJvc3BlY3RlZFwiXG4gICAgICAgICAgKSA6XG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgc3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJyxmbG9hdDoncmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OjEwLG1hcmdpblRvcDoxMH0sIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucHJvc3BlY3RBbGwsIFxuICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzIGdyZWVuLWdyYWRpZW50XCJ9LCBcbiAgICAgICAgICAgIFwiUHJvc3BlY3QgQWxsXCJcbiAgICAgICAgICApLCBcbiAgICAgICAgICBcblxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXBcIiwgXG4gICAgICAgICAgICAgICBzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luVG9wOjEwLG1hcmdpblJpZ2h0OjEwfSwgXG4gICAgICAgICAgICAgICAnZGF0YS10b2dnbGUnOiBcImJ1dHRvbnNcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IHBlb3BsZUJ0biwgc3R5bGU6IHt3aWR0aDo1MH0sIFxuICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnNldFBlcnNvblN0YXRlfSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXVzZXJcIn0pLCBcIiDCoFwiLCBcbiAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5wZW9wbGVDb3VudFxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogY29tcGFueUJ0biwgc3R5bGU6IHt3aWR0aDo1MH0sIFxuICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnNldENvbXBhbnlTdGF0ZX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1idWlsZGluZ1wifSksIFwiIMKgXCIsIFxuICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNvbXBhbnlDb3VudFxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG5cbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0xMlwiLCBzdHlsZToge3BhZGRpbmdMZWZ0OjAscGFkZGluZ1JpZ2h0OjB9fSwgXG4gICAgICAgICAgKHRoaXMuc3RhdGUuZGV0YWlsTW9kZSkgPyBDb21wYW55RGV0YWlsKHt0b2dnbGVEZXRhaWxNb2RlOiB0aGlzLnRvZ2dsZURldGFpbE1vZGUsIGRldGFpbENvbXBhbnk6IHRoaXMuc3RhdGUuZGV0YWlsQ29tcGFueX0pIDogXCJcIiwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtvdmVyZmxvdzonYXV0bycsaGVpZ2h0OjQ1Nn19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50YWJsZSh7Y2xhc3NOYW1lOiBcInRhYmxlIHRhYmxlLXN0cmlwZWRcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGhlYWQobnVsbCwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyx3aWR0aDo5MH19LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvY2stb1wifSlcbiAgICAgICAgICAgICAgICApLCBcblxuICAgICAgICAgICAgICAgIGxvZ29fY29sdW1uLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7d2lkdGg6MjAwfX0sIFxuICAgICAgICAgICAgICAgICAgKHRoaXMuc3RhdGUuY3VycmVudFNpZ25hbCA9PSAnQ29tcGFueVNpZ25hbCcpID8gIFxuICAgICAgICAgICAgICAgICAgICBcIkNvbXBhbmllc1wiIDogXCJQZW9wbGVcIlxuICAgICAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3dpZHRoOjIwMH19LCBcIlNpZ25hbFwiKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiU291cmNlIFwiKSwgXG4gICAgICAgICAgICAgICAgc2NvcmVfY29sdW1uLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt3aWR0aDo5MCx0ZXh0QWxpZ246J2NlbnRlcid9fSwgXCIgXCIpXG5cbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50Ym9keSh7Y2xhc3NOYW1lOiBcInJlcG9ydHNcIn0sIFxuICAgICAgICAgICAgICAgIHNpZ25hbHNcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgcHJvc3BlY3RBbGw6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUuY3VycmVudFNpZ25hbClcbiAgICBjb25zb2xlLmxvZyh0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlUmVwb3J0Lm9iamVjdElkKVxuICAgIHJlcG9ydF9pZCA9IHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGVSZXBvcnQub2JqZWN0SWRcbiAgICB2YXIgdGhpc3MgPSB0aGlzO1xuICAgICQuYWpheCh7XG4gICAgICAvL3VybDogJ2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC9zaWduYWxfdG9fcHJvc3BlY3QnLFxuICAgICAgdXJsOiAnaHR0cHM6Ly9uYW1lbGVzcy1yZXRyZWF0LTM1MjUuaGVyb2t1YXBwLmNvbS9zaWduYWxfdG9fcHJvc3BlY3QnLFxuICAgICAgZGF0YToge2FsbF9zaWduYWxzOnRydWUsIHJlcG9ydF9pZDogcmVwb3J0X2lkLCBcbiAgICAgICAgICAgICBzaWduYWxfdHlwZTogdGhpc3Muc3RhdGUuY3VycmVudFNpZ25hbH0sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgY29uc29sZS5sb2cocmVzKX0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUubG9nKGVyci5yZXNwb25zZVRleHQpfSxcbiAgICB9KVxuICB9LFxuICB0b2dnbGVEZXRhaWxNb2RlOiBmdW5jdGlvbihjb21wYW55KSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7ZGV0YWlsTW9kZTogIXRoaXMuc3RhdGUuZGV0YWlsTW9kZX0pXG4gICAgdGhpcy5zZXRTdGF0ZSh7ZGV0YWlsQ29tcGFueTogY29tcGFueX0pXG4gIH1cbn0pO1xuXG52YXIgQ29tcGFueUhpcmluZ1NpZ25hbFJvdyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0NvbXBhbnlIaXJpbmdTaWduYWxSb3cnLFxuICB0b2dnbGVEZXRhaWxNb2RlOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnByb3BzLnRvZ2dsZURldGFpbE1vZGUodGhpcy5wcm9wcy5zaWduYWwuY29tcGFueSlcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIGNvbXBhbnkgPSB0aGlzLnByb3BzLnNpZ25hbC5jb21wYW55XG4gICAgc2lnbmFsID0gdGhpcy5wcm9wcy5zaWduYWwuc2lnbmFsWzBdXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS50cih7c3R5bGU6IHt9fSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcicsd2lkdGg6MTIwfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBcbiAgICAgICAgICAgIG1vbWVudCh0aGlzLnByb3BzLnNpZ25hbC5jcmVhdGVkQXQpLmZyb21Ob3coKVxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG5cbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7YmFja2dyb3VuZEltYWdlOiBcInVybChcIitjb21wYW55LmxvZ28rXCIpXCIsaGVpZ2h0OjYwLHdpZHRoOjYwfSwgXG4gICAgICAgICAgY2xhc3NOYW1lOiBcImNvbXBhbnktaW1nLXRodW1ibmFpbFwifSlcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt3aWR0aDoyMDB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgb25DbGljazogdGhpcy50b2dnbGVEZXRhaWxNb2RlfSwgY29tcGFueS5uYW1lKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIGNvbXBhbnkuaW5kdXN0cnkpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgKGNvbXBhbnkuYWRkcmVzcykgPyBjb21wYW55LmFkZHJlc3Mubm9ybWFsaXplZExvY2F0aW9uIDogXCJcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBjb21wYW55LnJldmVudWUpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgY29tcGFueS5oZWFkY291bnQpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIn0sIGNvbXBhbnkud2Vic2l0ZSkpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgY29tcGFueS5jaXR5KVxuICAgICAgICApLCBcblxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7d2lkdGg6MjAwfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBzaWduYWwuam9iX3RpdGxlKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIHNpZ25hbC5jb21wYW55X25hbWUpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgc2lnbmFsLmxvY2F0aW9uKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIHNpZ25hbC5zdW1tYXJ5KVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgIHNpZ25hbC5zb3VyY2UsIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBtb21lbnQoc2lnbmFsLnRpbWVzdGFtcCoxMDAwKS5mcm9tTm93KCkpXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgKHRoaXMucHJvcHMuYWxsUHJvc3BlY3RlZCkgPyBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHMgZGlzYWJsZWQgZ3JlZW4tZ3JhZGllbnRcIiwgXG4gICAgICAgICAgICBzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnfX0sIFxuICAgICAgICAgICAgXCJQcm9zcGVjdGVkXCJcbiAgICAgICAgICAgICkgOiBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14cyBncmVlbi1ncmFkaWVudFwiLCBcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMudHVybkNvbXBhbnlTaWduYWxUb1Byb3NwZWN0LCBcbiAgICAgICAgICAgIHN0eWxlOiB7Zm9udFdlaWdodDonYm9sZCd9fSwgXG4gICAgICAgICAgICBcIlByb3NwZWN0XCJcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH0sXG4gIHR1cm5Db21wYW55U2lnbmFsVG9Qcm9zcGVjdDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgLy91cmw6ICdodHRwczovL25hbWVsZXNzLXJldHJlYXQtJyxcbiAgICAgIC8vdXJsOiAnaHR0cDovLzEyNy4wLjAuMTo1MDAwL3NpZ25hbF90b19wcm9zcGVjdCcsXG4gICAgICB1cmw6ICdodHRwczovL25hbWVsZXNzLXJldHJlYXQtMzUyNS5oZXJva3VhcHAuY29tL3NpZ25hbF90b19wcm9zcGVjdCcsXG4gICAgICBkYXRhOiB7YWxsX3NpZ25hbHM6ZmFsc2UsIHNpZ25hbF9pZDogY29tcGFueS5vYmplY3RJZCxcbiAgICAgICAgICAgICBzaWduYWxfdHlwZTogJ0NvbXBhbnlTaWduYWwnfSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyBjb25zb2xlLmxvZyhyZXMpfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlVGV4dCl9LFxuICAgIH0pXG4gIH1cbn0pXG5cbnZhciBQZW9wbGVTaWduYWxSb3cgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdQZW9wbGVTaWduYWxSb3cnLFxuICB0dXJuU2lnbmFsSW50b1Byb3NwZWN0OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGhpc3MgPSB0aGlzO1xuICAgIGNvbnNvbGUubG9nKHRoaXMucHJvcHMuc2lnbmFsKVxuICAgICQuYWpheCh7XG4gICAgICAvL3VybDonaHR0cDovLzEyNy4wLjAuMTo1MDAwL3NpZ25hbF90b19wcm9zcGVjdCcsXG4gICAgICB1cmw6J2h0dHA6Ly9uYW1lbGVzcy1yZXRyZWF0LTM1MjUuaGVyb2t1YXBwLmNvbS9zaWduYWxfdG9fcHJvc3BlY3QnLFxuICAgICAgZGF0YToge3NpZ25hbF9pZDogdGhpc3MucHJvcHMuc2lnbmFsLm9iamVjdElkLCBzaWduYWxfdHlwZTonUGVvcGxlU2lnbmFsJyxcbiAgICAgICAgICAgICBhbGxfc2lnbmFsczpmYWxzZX0sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgY29uc29sZS5sb2cocmVzKSB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2VUZXh0KSB9IFxuICAgIH0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAvL2NvbnNvbGUubG9nKGNvbXBhbnkpXG4gICAgcGVvcGxlID0gKHRoaXMucHJvcHMuc2lnbmFsKSA/IHRoaXMucHJvcHMuc2lnbmFsIDoge31cbiAgICBjb21wYW55ID0gcGVvcGxlLmNvbXBhbnlcbiAgICBzaWduYWwgPSBwZW9wbGUuc2lnbmFsLnNpZ25hbFswXVxuICAgIGNvbnNvbGUubG9nKHBlb3BsZSlcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnRyKHtzdHlsZToge319LCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyx3aWR0aDoxMjB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIFxuICAgICAgICAgICAgbW9tZW50KHRoaXMucHJvcHMuc2lnbmFsLmNyZWF0ZWRBdCkuZnJvbU5vdygpXG4gICAgICAgICAgKVxuICAgICAgICApLCBcblxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgcGVvcGxlLnRpdGxlX3Njb3JlXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIHBlb3BsZS5uYW1lICsgXCIgLSBcIiwgXCIgXCIsIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2ZvbnRTdHlsZTonaXRhbGljJ319LCBcbiAgICAgICAgICAgICAgcGVvcGxlLnRpdGxlKSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwifSwgY29tcGFueS53ZWJzaXRlKSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBjb21wYW55Lm5hbWUpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgY29tcGFueS5jaXR5KVxuICAgICAgICApLCBcblxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIHNpZ25hbC5qb2JfdGl0bGUpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgc2lnbmFsLmNvbXBhbnlfbmFtZSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBzaWduYWwubG9jYXRpb24pLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgc2lnbmFsLnN1bW1hcnkpXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgc2lnbmFsLnNvdXJjZSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIG1vbWVudChzaWduYWwudGltZXN0YW1wKjEwMDApLmZyb21Ob3coKSlcbiAgICAgICAgKSwgXG5cbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgICh0aGlzLnByb3BzLmFsbFByb3NwZWN0ZWQpID8gXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHMgZ3JlZW4tZ3JhZGllbnQgZGlzYWJsZWRcIiwgXG4gICAgICAgICAgICBzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnfX0sIFxuICAgICAgICAgICAgXCJQcm9zcGVjdGVkXCJcbiAgICAgICAgICAgICkgOiBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14cyBncmVlbi1ncmFkaWVudFwiLCBcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnR1cm5TaWduYWxJbnRvUHJvc3BlY3QsIFxuICAgICAgICAgICAgc3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJ319LCBcbiAgICAgICAgICAgIFwiUHJvc3BlY3RcIlxuICAgICAgICAgIClcbiAgICAgICAgICBcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfVxufSlcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBTaWduYWxMb2FkaW5nXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvdW50OiAnficsXG4gICAgICBwcm9zcGVjdE5hbWUgOiAnficsXG4gICAgICBwcm9zcGVjdFRpdGxlIDogJ34nLFxuICAgICAgY29tcGFueU5hbWUgOiAnficsXG4gICAgfVxuICB9LFxuXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgdmFyIHB1c2hlciA9IG5ldyBQdXNoZXIoJzFhNjhhOTZjOGZkZTkzOGZhNzVhJyk7XG4gICAgb2JqZWN0SWQgPSB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm9iamVjdElkXG4gICAgdmFyIGNoYW5uZWwgPSBwdXNoZXIuc3Vic2NyaWJlKG9iamVjdElkKTtcbiAgICBjaGFubmVsLmJpbmQoXCJteS1ldmVudFwiLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKVxuICAgICAgdGhpc3Muc2V0U3RhdGUoe1xuICAgICAgICBjb3VudDogZGF0YS5jb3VudCxcbiAgICAgICAgcHJvc3BlY3ROYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgIHByb3NwZWN0VGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgIGNvbXBhbnlOYW1lOiBkYXRhLmNvbXBhbnlcbiAgICAgIH0pXG4gICAgfSk7XG5cbiAgICAvLyBHZXQgU2lnbmFsIFJlcG9ydCBDb3VudFxuICAgIC8vIEdldCBMYXN0IFBlb3BsZVNpZ25hbCBGb3VuZFxuICAgIHFyeSA9IHsgcHJvZmlsZTogYXBwQ29uZmlnLnBvaW50ZXIoJ1Byb3NwZWN0UHJvZmlsZScsb2JqZWN0SWQpIH1cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1NpZ25hbFJlcG9ydCcsXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgZGF0YTogeyd3aGVyZSc6SlNPTi5zdHJpbmdpZnkocXJ5KSxvcmRlcjonLWNyZWF0ZWRBdCd9LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2cocmVzKVxuICAgICAgICBjb3VudCA9IChyZXMucmVzdWx0c1swXSkgPyByZXMucmVzdWx0c1swXS5wZW9wbGVfY291bnQgOiAwXG4gICAgICAgIFxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7Y291bnQ6IGNvdW50IH0pXG4gICAgICB9LFxuICAgIH0pO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUGVvcGxlU2lnbmFsJyxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBkYXRhOiB7J3doZXJlJzpKU09OLnN0cmluZ2lmeShxcnkpLG9yZGVyOictY3JlYXRlZEF0J30sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtcbiAgICAgICAgICBwcm9zcGVjdE5hbWU6IChyZXMucmVzdWx0c1swXSkgPyByZXMucmVzdWx0c1swXS5saW5rX3RleHQgOiBcIlwiLFxuICAgICAgICAgIHByb3NwZWN0VGl0bGU6IChyZXMucmVzdWx0c1swXSkgPyByZXMucmVzdWx0c1swXS50aXRsZSA6IFwiXCIsXG4gICAgICAgICAgY29tcGFueU5hbWU6IChyZXMucmVzdWx0c1swXSkgPyByZXMucmVzdWx0c1swXS5jb21wYW55IDogXCJcIlxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICB9KTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgUHVzaGVyLmxvZyA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgIGlmICh3aW5kb3cuY29uc29sZSAmJiB3aW5kb3cuY29uc29sZS5sb2cpIHtcbiAgICAgICAgLy93aW5kb3cuY29uc29sZS5sb2cobWVzc2FnZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuaW5pdGlhbGl6ZSgpXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgfSxcblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGNvdW50OiAnficsXG4gICAgICBwcm9zcGVjdE5hbWUgOiAnficsXG4gICAgICBwcm9zcGVjdFRpdGxlIDogJ34nLFxuICAgICAgY29tcGFueU5hbWUgOiAnficsXG4gICAgfSlcbiAgICB0aGlzLmluaXRpYWxpemUoKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgLy8gU2hvdyBjb21wYW5pZXMgZm9yIGhpcmluZyBzaWduYWxzXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7YmFja2dyb3VuZDonbGluZWFyLWdyYWRpZW50KCNkYWU4ZmYsI2RhZThmZiknLCBiYWNrZ3JvdW5kSW1hZ2U6ICdyYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IGNlbnRlciBjZW50ZXIsI2ZmZiwjZGZmMWZkIDkwMHB4KScsaGVpZ2h0OicxMDAlJyxwYWRkaW5nVG9wOjEwfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwic2lnbmFsLWNhcmRcIiwgXG4gICAgICAgICAgICBzdHlsZTogeyB3aWR0aDo1MDAsdGV4dEFsaWduOidjZW50ZXInLGRpc3BsYXk6J2Jsb2NrJyxtYXJnaW5SaWdodDonYXV0bycsIG1hcmdpbkxlZnQ6J2F1dG8nLG1hcmdpblRvcDoxMDAsaGVpZ2h0OjIwMCxwYWRkaW5nVG9wOjMwLHBhZGRpbmdMZWZ0OjMwfX0sIFxuXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJsb2FkaW5nLXR3by1iYWxsc1wiLCBzdHlsZToge2hlaWdodDoyMCx3aWR0aDoyMH19LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZG90MVwiLCBzdHlsZToge2NvbG9yOidibGFjayd9fSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJkb3QyXCIsIHN0eWxlOiB7Y29sb3I6J2JsYWNrJ319KVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7aWQ6IFwiXCIsIHN0eWxlOiB7Y29sb3I6JyMxY2EzZmQnLCBmb250V2VpZ2h0Oidib2xkJyxtYXJnaW5Ub3A6LTMwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OjAsIGZvbnRTaXplOjMyLCBmb250RmFtaWx5OidQcm94aW1hLU5vdmEnfX0sIFxuICAgICAgICAgICAgICBcImxvbFwiLCBcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuY291bnQgKyBcIiBwZW9wbGUgZm91bmQuXCJcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luVG9wOjU1LG1hcmdpblJpZ2h0OjU1fX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbkJvdHRvbTozLCBmb250V2VpZ2h0Oidib2xkJ319LCBcbiAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5wcm9zcGVjdE5hbWUuc3BsaXQoJ3wnKVswXSwgXCIgLSDCoFwiLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7Zm9udFdlaWdodDo1MDAsIGZvbnRTdHlsZTonaXRhbGljJ319LCBcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnByb3NwZWN0VGl0bGUpKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luVG9wOjAsdGV4dEFsaWduOidsZWZ0J319LCBcbiAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5jb21wYW55TmFtZVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgfSxcbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlcG9ydENvdW50Oid+JyxcbiAgICAgIGNvbXBhbnlDb3VudDogJ34nLFxuICAgICAgcGVvcGxlQ291bnQ6ICd+J1xuICAgIH1cbiAgfSxcbiAgLy8gU2lnbmFsUHJvZmlsZVxuICBzZXRDdXJyZW50VmlldzogZnVuY3Rpb24oZSkge1xuICAgIGlmKCF0aGlzLnByb3BzLnByb2ZpbGUubWluaW5nX2pvYilcbiAgICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFZpZXcoJ0NhbGVuZGFyJylcbiAgICBlbHNlXG4gICAgICB0aGlzLnByb3BzLnNldEN1cnJlbnRWaWV3KCdNaW5pbmdKb2JDYWxlbmRhcicpXG4gICAgLy9lLnN0b3BQcm9wYWdhdGlvbigpXG4gIH0sXG5cbiAgY2FsZW5kYXJDbGljazpmdW5jdGlvbihlKSB7XG4gICAgdGhpcy5wcm9wcy5zZXRDdXJyZW50UHJvZmlsZSh0aGlzLnByb3BzLnByb2ZpbGUpXG4gICAgaWYoIXRoaXMucHJvcHMucHJvZmlsZS5taW5pbmdfam9iKVxuICAgICAgdGhpcy5wcm9wcy5zZXRDdXJyZW50VmlldygnQ2FsZW5kYXInKVxuICAgIGVsc2VcbiAgICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFZpZXcoJ01pbmluZ0pvYkNhbGVuZGFyJylcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gIH0sXG5cbiAgYW5hbHl0aWNzQ2xpY2s6ZnVuY3Rpb24oZSkge1xuICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFByb2ZpbGUodGhpcy5wcm9wcy5wcm9maWxlKVxuICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFZpZXcoJ0FuYWx5dGljcycpXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICB9LFxuXG4gIHNldEN1cnJlbnRQcm9maWxlOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnByb3BzLnNldEN1cnJlbnRQcm9maWxlKHRoaXMucHJvcHMucHJvZmlsZSlcbiAgICBpZih0aGlzLnByb3BzLnByb2ZpbGUudHlwZSA9PSBcInByb3NwZWN0X3Byb2ZpbGVcIikge1xuICAgICAgdGhpcy5wcm9wcy5zZXRDdXJyZW50VmlldygnTWluaW5nSm9iQ2FsZW5kYXInKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZih0aGlzLnByb3BzLnByb2ZpbGUubGlzdF90eXBlID09IFwidGVycml0b3J5XCIpXG4gICAgICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFZpZXcoJ1RlcnJpdG9yeUNhbGVuZGFyJylcbiAgICAgIGVsc2UgaWYodGhpcy5wcm9wcy5wcm9maWxlLmxpc3RfdHlwZSA9PSBcInRlcnJpdG9yeVwiKVxuICAgICAgICB0aGlzLnByb3BzLnNldEN1cnJlbnRWaWV3KCdUZXJyaXRvcnlDYWxlbmRhcicpXG4gICAgICBlbHNlXG4gICAgICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFZpZXcoJ0NhbGVuZGFyJylcbiAgICB9XG4gIH0sXG5cbiAgcmVtb3ZlVGhlUHJvZmlsZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcm9wcy5yZW1vdmVQcm9maWxlKHRoaXMucHJvcHMucHJvZmlsZSlcbiAgfSxcblxuICByZW1vdmVQcm9maWxlOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzc3NzID0gdGhpcztcbiAgICBjb25zb2xlLmxvZyh0aGlzcy5yZW1vdmVUaGVQcm9maWxlKVxuXG4gICAgc3dhbCh7ICAgXG4gICAgICB0aXRsZTogXCJBcmUgeW91IHN1cmU/XCIsICAgXG4gICAgICB0ZXh0OiBcIllvdXIgd2lsbCBub3QgYmUgYWJsZSB0byByZWNvdmVyIHRoaXMgcHJvc3BlY3QgbGlzdCFcIiwgICBcbiAgICAgIHR5cGU6IFwid2FybmluZ1wiLCAgIFxuICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwgICBcbiAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogXCIjREQ2QjU1XCIsICAgXG4gICAgICBjb25maXJtQnV0dG9uVGV4dDogXCJZZXMsIGRlbGV0ZSBpdCFcIiwgICBcbiAgICAgIGNsb3NlT25Db25maXJtOiBmYWxzZSB9LCBcbiAgICAgIGZ1bmN0aW9uKCl7ICAgXG4gICAgICAgIHN3YWwoXCJEZWxldGVkIVwiLCBcIllvdXIgcHJvc3BlY3QgbGlzdCBoYXMgYmVlbiBkZWxldGVkLlwiLCBcInN1Y2Nlc3NcIik7IFxuICAgICAgICB0aGlzc3NzLnJlbW92ZVRoZVByb2ZpbGUoKVxuICAgICAgICBjb25zb2xlLmxvZygnZGVsZXRlZCcpXG4gICAgICB9KTtcbiAgfSxcblxuICAvL2NvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24ocHJldlByb3BzLCBwcmV2U3RhdGUpIHsgfSxcbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24obmV4dFByb3BzKSB7XG4gIC8vY29tcG9uZW50V2lsbFVwZGF0ZTogZnVuY3Rpb24obmV4dFByb3BzKSB7XG4gICAgaWYodHlwZW9mKHRoaXMucHJvcHMucHJvZmlsZS5vYmplY3RJZCkgPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgY29uc29sZS5sb2coJ1JFQ0VJVkUgUFJPUFMnKVxuXG4gICAgICB2YXIgcHVzaGVyID0gbmV3IFB1c2hlcignMWE2OGE5NmM4ZmRlOTM4ZmE3NWEnKTtcbiAgICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgICBjb25zb2xlLmxvZyhuZXh0UHJvcHMpXG4gICAgICBjb25zb2xlLmxvZyhuZXh0UHJvcHMucHJvZmlsZSlcbiAgICAgIGNvbnNvbGUubG9nKF8ua2V5cyhuZXh0UHJvcHMucHJvZmlsZSkpXG4gICAgICBjb25zb2xlLmxvZyhuZXh0UHJvcHMucHJvZmlsZS5vYmplY3RJZClcbiAgICAgIG9iamVjdElkID0gbmV4dFByb3BzLnByb2ZpbGUub2JqZWN0SWRcbiAgICAgIGNvbnNvbGUubG9nKCduZXcgcHVzaGVyIGNoYW5uZWwgLT4gJysgb2JqZWN0SWQpXG5cbiAgICAgIHZhciBjaGFubmVsID0gcHVzaGVyLnN1YnNjcmliZShvYmplY3RJZCk7XG4gICAgICBjaGFubmVsLmJpbmQoXCJkb25lXCIsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSlcbiAgICAgICAgY29uc29sZS5sb2codGhpc3MucHJvcHMpXG4gICAgICAgIC8vdGhpc3Muc2V0U3RhdGUoeyBkb25lOiBkYXRhLmRvbmVfdGltZXN0YW1wIH0pXG4gICAgICAgIHRoaXNzLnByb3BzLnVwZGF0ZU1pbmluZ0pvYkRvbmUodGhpc3MucHJvcHMucHJvZmlsZSlcbiAgICAgICAgYWxlcnRpZnkuc3VjY2VzcyhcIlN1Y2Nlc3Mgbm90aWZpY2F0aW9uXCIpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgcHVzaGVyID0gbmV3IFB1c2hlcignMWE2OGE5NmM4ZmRlOTM4ZmE3NWEnKTtcbiAgICBvYmplY3RJZCA9IHRoaXMucHJvcHMucHJvZmlsZS5vYmplY3RJZFxuICAgIGNvbnNvbGUubG9nKCduZXcgcHVzaGVyIGNoYW5uZWwgLT4nLCBvYmplY3RJZClcbiAgICB2YXIgY2hhbm5lbCA9IHB1c2hlci5zdWJzY3JpYmUob2JqZWN0SWQpO1xuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgY2hhbm5lbC5iaW5kKFwiZG9uZVwiLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKVxuICAgICAgY29uc29sZS5sb2codGhpc3MucHJvcHMpXG4gICAgICAvL3RoaXNzLnNldFN0YXRlKHsgZG9uZTogZGF0YS5kb25lX3RpbWVzdGFtcCB9KVxuICAgICAgdGhpc3MucHJvcHMudXBkYXRlTWluaW5nSm9iRG9uZSh0aGlzcy5wcm9wcy5wcm9maWxlKVxuICAgICAgYWxlcnRpZnkuc3VjY2VzcyhcIlN1Y2Nlc3Mgbm90aWZpY2F0aW9uXCIpO1xuICAgIH0pO1xuXG4gICAgdmFyIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Blb3BsZVNpZ25hbCcsXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgIGRhdGE6IHt3aGVyZTogSlNPTi5zdHJpbmdpZnkoIHtwcm9maWxlOiBhcHBDb25maWcucG9pbnRlcignUHJvc3BlY3RQcm9maWxlJyx0aGlzLnByb3BzLnByb2ZpbGUub2JqZWN0SWQpfSksXG4gICAgICAgICAgICAgY291bnQ6IHRydWV9LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IHRoaXNzLnNldFN0YXRlKHtwZW9wbGVDb3VudDogcmVzLmNvdW50fSl9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyB9XG4gICAgfSlcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL0NvbXBhbnlTaWduYWwnLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBkYXRhOiB7d2hlcmU6IEpTT04uc3RyaW5naWZ5KHtwcm9maWxlOlxuICAgICAgICAgICAgIGFwcENvbmZpZy5wb2ludGVyKCdQcm9zcGVjdFByb2ZpbGUnLHRoaXMucHJvcHMucHJvZmlsZS5vYmplY3RJZCl9KSxcbiAgICAgICAgICAgICBjb3VudDogdHJ1ZX0sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgdGhpc3Muc2V0U3RhdGUoe2NvbXBhbnlDb3VudDogcmVzLmNvdW50fSl9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyB9XG4gICAgfSlcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1NpZ25hbFJlcG9ydCcsXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgIGRhdGE6IHt3aGVyZTogSlNPTi5zdHJpbmdpZnkoe3Byb2ZpbGU6XG4gICAgICAgICAgICAgYXBwQ29uZmlnLnBvaW50ZXIoJ1Byb3NwZWN0UHJvZmlsZScsdGhpcy5wcm9wcy5wcm9maWxlLm9iamVjdElkKX0pLFxuICAgICAgICAgICAgIGNvdW50OiB0cnVlfSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyB0aGlzcy5zZXRTdGF0ZSh7cmVwb3J0Q291bnQ6IHJlcy5jb3VudH0pfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgfVxuICAgIH0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBzaWduYWxEZXRhaWxzID0gW11cbiAgICBmb3IoaT0wO2k8IHRoaXMucHJvcHMucHJvZmlsZS5wcm9maWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgc2lnbmFsRGV0YWlscy5wdXNoKFByb2ZpbGVUeXBlKHtwcm9maWxlOiB0aGlzLnByb3BzLnByb2ZpbGUucHJvZmlsZXNbaV19KSlcbiAgICB9XG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLnByb3BzLnByb2ZpbGUubGlzdF90eXBlKVxuICAgIC8vY29uc29sZS5sb2codGhpcy5wcm9wcy5wcm9maWxlLmxpc3RfdHlwZSA9PSBcInRlcnJpdG9yeVwiKVxuICAgIGlmKHRoaXMucHJvcHMucHJvZmlsZS5saXN0X3R5cGUgPT0gXCJzaWduYWxcIikgXG4gICAgICBpY29uID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS13aWZpXCIsIHN0eWxlOiB7bWFyZ2luUmlnaHQ6NX19KVxuICAgIGVsc2UgaWYodGhpcy5wcm9wcy5wcm9maWxlLmxpc3RfdHlwZSA9PSBcInRlcnJpdG9yeVwiKSBcbiAgICAgIGljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWdsb2JlXCIsIHN0eWxlOiB7bWFyZ2luUmlnaHQ6NX19KVxuICAgIGVsc2VcbiAgICAgIGljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNsb3VkLWRvd25sb2FkXCIsIHN0eWxlOiB7bWFyZ2luUmlnaHQ6NX19KVxuXG4gICAgbG9hZGluZyA9ICghdGhpcy5wcm9wcy5wcm9maWxlLmRvbmUpID8gUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInByb2ZpbGUtbG9hZGluZ1wifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZG91YmxlLWJvdW5jZTFcIn0pLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJkb3VibGUtYm91bmNlMlwifSlcbiAgICAgICAgICApIDogXCJcIlxuICAgIFxuICAgIGlmKHRoaXMucHJvcHMucHJvZmlsZS5taW5pbmdfam9iICYmIHRoaXMucHJvcHMucHJvZmlsZS5kb25lKVxuICAgICAgbWluaW5nX2pvYl9kb25lID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jaGVjay1jaXJjbGVcIiwgc3R5bGU6IHtjb2xvcjonIzAwOTZmZicsbWFyZ2luTGVmdDo1LGZvbnRTaXplOjE1fX0pXG4gICAgZWxzZVxuICAgICAgbWluaW5nX2pvYl9kb25lID0gXCJcIlxuXG4gICAgc2VsZWN0ZWRTdHlsZSA9IHtwYWRkaW5nVG9wOjUsYm9yZGVyTGVmdDowLHBhZGRpbmdMZWZ0OjEwLCBib3JkZXJSaWdodDonMXB4IHNvbGlkICNkZGQnLCBib3JkZXJMZWZ0OiAnNXB4IHNvbGlkICMwMDk2ZmYgIWltcG9ydGFudCd9XG4gICAgcmVndWxhclN0eWxlID0ge3BhZGRpbmdUb3A6NSxib3JkZXJMZWZ0OjAscGFkZGluZ0xlZnQ6MTAsIGJvcmRlclJpZ2h0OicxcHggc29saWQgI2RkZCcsIGJvcmRlckxlZnQ6ICc1cHggc29saWQgcmVkICFpbXBvcnRhbnQnfVxuICAgIHJlZ3VsYXJTdHlsZSA9IHtwYWRkaW5nVG9wOjUsYm9yZGVyTGVmdDowLHBhZGRpbmdMZWZ0OjEwLCBib3JkZXJSaWdodDonMXB4IHNvbGlkICNkZGQnLCBib3JkZXJMZWZ0Oic1cHggc29saWQgcmdiYSgwLDAsMCwwKSd9XG4gICAgc2VsZWN0ZWQ9IHRoaXMucHJvcHMucHJvZmlsZS5vYmplY3RJZCA9PSB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm9iamVjdElkXG4gICAgaXRlbVN0eWxlID0gKHNlbGVjdGVkKSA/IHNlbGVjdGVkU3R5bGUgOiByZWd1bGFyU3R5bGVcbiAgICBpdGVtQ2xhc3MgPSAoc2VsZWN0ZWQpID8gXCJsaXN0LWdyb3VwLWl0ZW0gaWRlYWwtY29tcGFueS1wcm9maWxlIGxpc3QtZ3JvdXAtc2VsZWN0ZWRcIiA6IFwibGlzdC1ncm91cC1pdGVtIGlkZWFsLWNvbXBhbnktcHJvZmlsZVwiXG5cblxuICAgIHNpZ25hbF90eXBlID0gdGhpcy5wcm9wcy5wcm9maWxlLnNpZ25hbF90eXBlXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogaXRlbUNsYXNzLCBcbiAgICAgICAgICAgb25DbGljazogdGhpcy5zZXRDdXJyZW50UHJvZmlsZSwgXG4gICAgICAgICAgIHN0eWxlOiByZWd1bGFyU3R5bGV9LCBcbiAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJwcm9maWxlLXRpdGxlXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1wcmltYXJ5IHByb2ZpbGUtbmFtZVwiLCBcbiAgICAgICAgICAgICAgc3R5bGU6IHtiYWNrZ3JvdW5kQ29sb3I6J3JnYigwLCAxMjIsIDI2NSknfX0sIFxuICAgICAgICAgICAgaWNvbiwgXCIgXCIsIHRoaXMucHJvcHMucHJvZmlsZS5uYW1lXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtjbGFzc05hbWU6IFwicHJvZmlsZS1uYW1lXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwibGFiZWwgbGFiZWwtZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2FsZW5kYXJcIn0pLCBcIiBcIiwgdGhpcy5zdGF0ZS5yZXBvcnRDb3VudFxuICAgICAgICAgICAgKSwgXCIgwqBcIiwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWJ1aWxkaW5nXCJ9KSwgXCIgXCIsIHRoaXMuc3RhdGUuY29tcGFueUNvdW50LCBcIiDCoFwiLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS11c2VyXCJ9KSwgXCIgXCIsIHRoaXMuc3RhdGUucGVvcGxlQ291bnRcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLCBcbiAgICAgICAgICBsb2FkaW5nLCBtaW5pbmdfam9iX2RvbmUsIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgYnRuLXhzIHNpZ25hbC1kZXRhaWwtYnRuXCIsIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucmVtb3ZlUHJvZmlsZX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1hcmNoaXZlXCJ9KSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9LCBcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgYnRuLXhzIHNpZ25hbC1kZXRhaWwtYnRuXCIsIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuYW5hbHl0aWNzQ2xpY2t9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGllLWNoYXJ0XCJ9KSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9LCBcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXByaW1hcnkgYnRuLXhzIHNpZ25hbC1kZXRhaWwtYnRuXCIsIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuc2V0dGluZ3NDbGlja30sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS13cmVuY2hcIn0pKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4teHMgc2lnbmFsLWRldGFpbC1idG5cIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5Oidub25lJ30sIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY2FsZW5kYXJDbGlja30sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jYWxlbmRhclwifSkpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmxhdW5jaE1vZGFsLCBcbiAgICAgICAgICAgICBzdHlsZTogKHNpZ25hbF90eXBlICE9IFwic2lnbmFsXCIpID8ge2Rpc3BsYXk6J2Jsb2NrJ306e2Rpc3BsYXk6J25vbmUnfSwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4teHMgc2lnbmFsLWRldGFpbC1idG5cIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG91ZC1kb3dubG9hZFwifSkpXG4gICAgICAgICksIFxuXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwcm9maWxlLWJvZHlcIiwgc3R5bGU6IHttYXJnaW5Ub3A6NX19LCBcbiAgICAgICAgICBzaWduYWxEZXRhaWxzXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9LFxuXG4gIGxhdW5jaE1vZGFsOiBmdW5jdGlvbihlKSB7XG4gICAgJCgnI2NyZWF0ZU1pbmluZ0pvYk1vZGFsJykubW9kYWwoKVxuICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFByb2ZpbGUodGhpcy5wcm9wcy5wcm9maWxlKVxuICAgIGlmKHRoaXMucHJvcHMuY3VycmVudFZpZXcgPT0gJ0NhbGVuZGFyJylcbiAgICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFZpZXcoJ0NhbGVuZGFyJylcbiAgICBlbHNlIGlmKHRoaXMucHJvcHMuY3VycmVudFZpZXcgPT0gJ0ZlZWQnKVxuICAgICAgdGhpcy5wcm9wcy5zZXRDdXJyZW50VmlldygnRmVlZCcpXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICB9XG59KTtcblxudmFyIFByb2ZpbGVUeXBlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnUHJvZmlsZVR5cGUnLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuXG4gIGlmKHRoaXMucHJvcHMucHJvZmlsZSl7XG4gICAgaWYodGhpcy5wcm9wcy5wcm9maWxlLmNsYXNzTmFtZSA9PSBcIkhpcmluZ1Byb2ZpbGVcIikge1xuICAgICAgc2lnbmFsSWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc3VpdGNhc2VcIn0pXG4gICAgICBzaWduYWxOYW1lID0gXCJIaXJpbmdcIlxuICAgICAgc2lnbmFsVmFsdWUgPSBfLnJlZHVjZSh0aGlzLnByb3BzLnByb2ZpbGUucm9sZXMsIGZ1bmN0aW9uKHJlc3VsdCwgcm9sZSkge1xuICAgICAgICByZXR1cm4gcm9sZSArIFwiLCBcIisgcmVzdWx0XG4gICAgICB9LCBcIlwiKTtcbiAgICAgIC8vY29uc29sZS5sb2coJ3d0ZicpXG4gICAgICAvL2NvbnNvbGUubG9nKHNpZ25hbFZhbHVlKVxuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wcm9maWxlLmNsYXNzTmFtZSAgPT0gXCJFbXBsb3llZVByb2ZpbGVcIikge1xuICAgICAgc2lnbmFsSWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdXNlcnNcIn0pXG4gICAgICBzaWduYWxOYW1lID0gXCJDb21wYW55IFNpemVcIlxuICAgICAgc2lnbmFsVmFsdWUgPSBfLnJlZHVjZSh0aGlzLnByb3BzLnByb2ZpbGUuZW1wbG95ZWVzLCBmdW5jdGlvbihyZXN1bHQsIHJvbGUpIHtcbiAgICAgICAgcmV0dXJuIHJvbGUgKyBcIiwgXCIrIHJlc3VsdFxuICAgICAgfSwgXCJcIik7XG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnByb2ZpbGUuY2xhc3NOYW1lICA9PSBcIkZ1bmRpbmdQcm9maWxlXCIpIHtcbiAgICAgIHNpZ25hbEljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWluc3RpdHV0aW9uXCJ9KVxuICAgICAgc2lnbmFsTmFtZSA9IFwiRnVuZGluZ1wiXG4gICAgICBzaWduYWxWYWx1ZSA9IF8ucmVkdWNlKHRoaXMucHJvcHMucHJvZmlsZS5yZXZlbnVlcywgZnVuY3Rpb24ocmVzdWx0LCByb2xlKSB7XG4gICAgICAgIHJldHVybiByb2xlICsgXCIsIFwiKyByZXN1bHRcbiAgICAgIH0sIFwiXCIpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wcm9maWxlLmNsYXNzTmFtZSAgPT0gXCJSZXZlbnVlUHJvZmlsZVwiKSB7XG4gICAgICBzaWduYWxJY29uID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1tb25leVwifSlcbiAgICAgIHNpZ25hbE5hbWUgPSBcIlJldmVudWVcIlxuICAgICAgc2lnbmFsVmFsdWUgPSBfLnJlZHVjZSh0aGlzLnByb3BzLnByb2ZpbGUucmV2ZW51ZXMsIGZ1bmN0aW9uKHJlc3VsdCwgcm9sZSkge1xuICAgICAgICByZXR1cm4gcm9sZSArIFwiLCBcIisgcmVzdWx0XG4gICAgICB9LCBcIlwiKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMucHJvZmlsZS5jbGFzc05hbWUgID09IFwiVGVjaG5vbG9neVByb2ZpbGVcIikge1xuICAgICAgc2lnbmFsSWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtd3JlbmNoXCJ9KVxuICAgICAgc2lnbmFsTmFtZSA9IFwiVGVjaG5vbG9neVwiXG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnByb2ZpbGUuY2xhc3NOYW1lICA9PSBcIkxvY2F0aW9uUHJvZmlsZVwiKSB7XG4gICAgICBzaWduYWxJY29uID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1tYXAtbWFya2VyXCJ9KVxuICAgICAgc2lnbmFsTmFtZSA9IFwiTG9jYWxlXCJcbiAgICAgIHNpZ25hbFZhbHVlID0gXy5yZWR1Y2UodGhpcy5wcm9wcy5wcm9maWxlLmxvY2FsZSwgZnVuY3Rpb24ocmVzdWx0LCByb2xlKSB7XG4gICAgICAgIHJldHVybiByb2xlICsgXCIsIFwiKyByZXN1bHRcbiAgICAgIH0sIFwiXCIpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5wcm9maWxlLmNsYXNzTmFtZSAgPT0gXCJJbmR1c3RyeVByb2ZpbGVcIikge1xuICAgICAgc2lnbmFsSWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYnVpbGRpbmdcIn0pXG4gICAgICBzaWduYWxOYW1lID0gXCJJbmR1c3RyaWVzXCJcbiAgICAgIHNpZ25hbFZhbHVlID0gXy5yZWR1Y2UodGhpcy5wcm9wcy5wcm9maWxlLmluZHVzdHJpZXMsIGZ1bmN0aW9uKHJlc3VsdCwgcm9sZSkge1xuICAgICAgICByZXR1cm4gcm9sZSArIFwiLCBcIisgcmVzdWx0XG4gICAgICB9LCBcIlwiKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMucHJvZmlsZS5jbGFzc05hbWUgID09IFwiVGVycml0b3J5UHJvZmlsZVwiKSB7XG4gICAgICBjb25zb2xlLmxvZygpXG4gICAgICBzaWduYWxJY29uID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1nbG9iZVwifSlcbiAgICAgIHNpZ25hbE5hbWUgPSAodGhpcy5wcm9wcy5wcm9maWxlLnRlcnJpdG9yaWVzLmxlbmd0aCA9PSAxKSA/IFwiVGVycml0b3J5XCIgOiBcIlRlcnJpdG9yaWVzXCJcbiAgICAgIHNpZ25hbFZhbHVlID0gXy5yZWR1Y2UodGhpcy5wcm9wcy5wcm9maWxlLnRlcnJpdG9yaWVzLCBmdW5jdGlvbihyZXN1bHQsIHJvbGUpIHtcbiAgICAgICAgcmV0dXJuIHJvbGUgKyBcIiwgXCIrIHJlc3VsdFxuICAgICAgfSwgXCJcIik7XG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnByb2ZpbGUuY2xhc3NOYW1lICA9PSBcIkNvbXBhbnlTaXplUHJvZmlsZVwiKSB7XG4gICAgICBzaWduYWxJY29uID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS13cmVuY2hcIn0pXG4gICAgICBzaWduYWxOYW1lID0gXCJUZWNobm9sb2d5XCJcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMucHJvZmlsZS5jbGFzc05hbWUgID09IFwiTGlzdFByb2ZpbGVcIikge1xuICAgICAgc2lnbmFsSWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbGlzdC1hbHRcIn0pXG4gICAgICBzaWduYWxOYW1lID0gXCJDb21wYW55IExpc3RcIlxuICAgICAgc2lnbmFsVmFsdWUgPSB0aGlzLnByb3BzLnByb2ZpbGUubGlzdE5hbWVcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMucHJvZmlsZS5jbGFzc05hbWUgID09IFwiUHJvc3BlY3RUaXRsZVByb2ZpbGVcIikge1xuICAgICAgc2lnbmFsSWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdXNlclwifSlcbiAgICAgIHNpZ25hbE5hbWUgPSBcIlRpdGxlc1wiXG4gICAgICBzaWduYWxWYWx1ZSA9IF8ucmVkdWNlKHRoaXMucHJvcHMucHJvZmlsZS50aXRsZV9rZXl3b3JkcywgXG4gICAgIGZ1bmN0aW9uKHJlc3VsdCwgcm9sZSkge1xuICAgICAgICByZXR1cm4gcm9sZSArIFwiLCBcIisgcmVzdWx0XG4gICAgICB9LCBcIlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2lnbmFsSWNvbiA9IFwibm90IGZvdW5kXCJcbiAgICAgIHNpZ25hbE5hbWUgPSBcIk5vdCBmb3VuZFwiXG4gICAgICBzaWduYWxWYWx1ZT0gXCJOb3QgZm91bmRcIlxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAgIHNpZ25hbEljb24gPSBcIm5vdCBmb3VuZFwiXG4gICAgICBzaWduYWxOYW1lID0gXCJOb3QgZm91bmRcIlxuICAgICAgc2lnbmFsVmFsdWU9IFwiTm90IGZvdW5kXCJcblxuICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJpZGVhbC1wcm9maWxlXCJ9LCBcIiBcIiwgc2lnbmFsSWNvbiwgXG4gICAgICAgIFJlYWN0LkRPTS5oNih7Y2xhc3NOYW1lOiBcInByb2ZpbGUtc2lnbmFsLW5hbWVcIn0sIHNpZ25hbE5hbWUsIFwiIC0gXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJwcm9maWxlLXNpZ25hbC12YWx1ZVwifSwgXCIgXCIrc2lnbmFsVmFsdWUpXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbi8qXG4gIEZ1bmRpbmcgUHJvZmlsZVxuICAtIEFtb3VudCBSYWlzZWQgLSBidG4gZ3JvdXBcbiAgLSBTdGFnZSAtIGJ0biBncm91cFxuXG4gIFBlb3BsZSBQcm9maWxlXG4gIC0gTG9jYWxlIC0gdGFncyB3LyB0eXBhaGVhZFxuICAtIFRpdGxlIC0gdGFncyB3LyB0eXBhaGVhZFxuXG4gIENvbXBhbnkgUHJvZmlsZVxuICAtIEluZHVzdHJpZXMgLSB0YWdzIHdpdGggdHlwYWhlYWRcbiAgLSBSZXZlbnVlIC0gYnRuIGdyb3VwXG4gIC0gIyBvZiBFbXBsb3llZXMgLSBidG4gZ3JvdXBcbiAgLSBMb2NhbGUgLSB0YWdzIHdpdGggdHlwYWhlYWRcbiovXG5cbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG52YXIgUGFuZWxGb290aW5nID0gcmVxdWlyZSgnLi9wYW5lbF9mb290aW5nLmpzLm1pbi5qcycpXG52YXIgU2lnbmFsUHJvZmlsZSA9IHJlcXVpcmUoJy4vc2lnbmFsX3Byb2ZpbGUuanMubWluLmpzJylcbnZhciBTaWduYWxMb2FkaW5nID0gcmVxdWlyZSgnLi9zaWduYWxfbG9hZGluZy5qcy5taW4uanMnKVxudmFyIE1pbmluZ0pvYkxvYWRpbmcgPSByZXF1aXJlKCcuL21pbmluZ19qb2JfbG9hZGluZy5qcy5taW4uanMnKVxudmFyIENvbXBhbnlTaWduYWxDYXJkID0gcmVxdWlyZSgnLi9jb21wYW55X3NpZ25hbF9jYXJkLmpzLm1pbi5qcycpXG52YXIgUGVvcGxlU2lnbmFsQ2FyZCA9IHJlcXVpcmUoJy4vcGVvcGxlX3NpZ25hbF9jYXJkLmpzLm1pbi5qcycpXG52YXIgU2lnbmFsQ2FsZW5kYXIgPSByZXF1aXJlKCcuL3NpZ25hbF9jYWxlbmRhci5qcy5taW4uanMnKVxudmFyIE1pbmluZ0pvYkNhbGVuZGFyID0gcmVxdWlyZSgnLi9taW5pbmdfam9iX2NhbGVuZGFyLmpzLm1pbi5qcycpXG52YXIgU2lnbmFsc0RldGFpbCA9IHJlcXVpcmUoJy4vc2lnbmFsX2RldGFpbC5qcy5taW4uanMnKVxudmFyIFRlcnJpdG9yeU92ZXJ2aWV3ID0gcmVxdWlyZSgnLi90ZXJyaXRvcnlfb3ZlcnZpZXcuanMubWluLmpzJylcbnZhciBUZXJyaXRvcnlEZXRhaWwgPSByZXF1aXJlKCcuL3RlcnJpdG9yeV9kZXRhaWwuanMubWluLmpzJylcbnZhciBNaW5pbmdKb2JEZXRhaWwgPSByZXF1aXJlKCcuL21pbmluZ19qb2JfZGV0YWlsLmpzLm1pbi5qcycpXG52YXIgU2lnbmFsQW5hbHl0aWNzID0gcmVxdWlyZSgnLi9zaWduYWxfYW5hbHl0aWNzLmpzLm1pbi5qcycpXG52YXIgU2lnbmFsQXBwcyA9IHJlcXVpcmUoJy4vc2lnbmFsX2FwcHMuanMubWluLmpzJylcblxudmFyIENyZWF0ZUhpcmluZ1NpZ25hbE1vZGFsID0gcmVxdWlyZSgnLi9jcmVhdGVfaGlyaW5nX3NpZ25hbF9tb2RhbC5qcy5taW4uanMnKVxudmFyIENyZWF0ZUZ1bmRpbmdTaWduYWxNb2RhbCA9IHJlcXVpcmUoJy4vY3JlYXRlX2Z1bmRpbmdfc2lnbmFsX21vZGFsLmpzLm1pbi5qcycpXG52YXIgQ3JlYXRlUHJvc3BlY3RQcm9maWxlTW9kYWwgPSByZXF1aXJlKCcuL2NyZWF0ZV9wcm9zcGVjdF9wcm9maWxlX21vZGFsLmpzLm1pbi5qcycpXG52YXIgQ3JlYXRlQ29tcGFueVByb2ZpbGVNb2RhbCA9IHJlcXVpcmUoJy4vY3JlYXRlX2NvbXBhbnlfcHJvZmlsZV9tb2RhbC5qcy5taW4uanMnKVxudmFyIENyZWF0ZVRlcnJpdG9yeVN0cmF0ZWd5TW9kYWwgPSByZXF1aXJlKCcuL2NyZWF0ZV90ZXJyaXRvcnlfc3RyYXRlZ3lfbW9kYWwuanMubWluLmpzJylcbnZhciBDcmVhdGVNaW5pbmdKb2JNb2RhbCA9IHJlcXVpcmUoJy4vY3JlYXRlX21pbmluZ19qb2JfbW9kYWwuanMubWluLmpzJylcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2lnbmFsVHlwZTogJ0NvbXBhbnlTaWduYWwnLFxuICAgICAgY3VycmVudFByb2ZpbGU6IHtuYW1lOidBbGwnfSxcbiAgICAgIGN1cnJlbnRQcm9maWxlT2JqZWN0SWQ6IHt9LFxuICAgICAgY3VycmVudFByb2ZpbGVSZXBvcnQ6IHt9LFxuICAgICAgc2lnbmFsczogW10sXG4gICAgICBjdXJyZW50VmlldzogJ0FwcHMnLFxuICAgICAgcHJvZmlsZXM6IFtdLFxuICAgIH1cbiAgfSxcblxuICBzZXRDdXJyZW50UmVwb3J0OiBmdW5jdGlvbihuZXdQcm9maWxlUmVwb3J0KSB7XG4gICAgY29uc29sZS5sb2coJ05FVyBSRVBPUlQnKVxuICAgIGNvbnNvbGUubG9nKG5ld1Byb2ZpbGVSZXBvcnQpXG5cbiAgICB0aGlzLnNldFN0YXRlKHsgXG4gICAgICBjdXJyZW50VmlldzonRGV0YWlsJyxcbiAgICAgIGN1cnJlbnRQcm9maWxlUmVwb3J0OiBuZXdQcm9maWxlUmVwb3J0IFxuICAgIH0pXG4gIH0sXG5cbiAgc2V0UmVwb3J0OiBmdW5jdGlvbih2aWV3LCByZXBvcnQpIHtcbiAgICBjb25zb2xlLmxvZygnc2V0UmVwb3J0JylcbiAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50Vmlldzp2aWV3LCBjdXJyZW50UHJvZmlsZVJlcG9ydDogcmVwb3J0fSkgXG4gIH0sXG5cbiAgcHJvc3BlY3RTaWduYWxSZXBvcnQ6IGZ1bmN0aW9uKHByb2ZpbGUsIHJlcG9ydCkge1xuICAgIHByb2ZpbGVzID0gXy5tYXAodGhpcy5zdGF0ZS5wcm9maWxlcywgZnVuY3Rpb24oX3Byb2ZpbGUpIHtcbiAgICAgICAgICAgICAgICAgIGlmKF9wcm9maWxlLm9iamVjdElkID09IHByb2ZpbGUub2JqZWN0SWQpe1xuICAgICAgICAgICAgICAgICAgICByZXBvcnRzID0gXy5tYXAoX3Byb2ZpbGUucmVwb3J0cywgZnVuY3Rpb24oX3JlcG9ydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihfcmVwb3J0Lm9iamVjdElkID09IHJlcG9ydC5vYmplY3RJZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlcG9ydC5wcm9zcGVjdGVkID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVwb3J0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZXBvcnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF9wcm9maWxlLnJlcG9ydHMgPSByZXBvcnRzXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfcHJvZmlsZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIF9wcm9maWxlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHByb2ZpbGVzKVxuICAgIHRoaXMuc2V0U3RhdGUoe3Byb2ZpbGVzOiBwcm9maWxlc30pXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9TaWduYWxSZXBvcnQvJytyZXBvcnQub2JqZWN0SWQsXG4gICAgICB0eXBlOidQVVQnLFxuICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoe3Byb3NwZWN0ZWQ6bW9tZW50KCkudmFsdWVPZigpLzEwMDB9KSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge30sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7fVxuICAgIH0pXG4gIH0sXG5cbiAgc2V0Q3VycmVudFZpZXc6IGZ1bmN0aW9uKG5ld1NpZ25hbFZpZXcpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50VmlldzogbmV3U2lnbmFsVmlld30pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBjdXJyZW50UHJvZmlsZSA9IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGVcbiAgICByZXBvcnRzID0gdGhpcy5zdGF0ZS5jdXJyZW50UHJvZmlsZS5yZXBvcnRzXG4gICAgcmVwb3J0cyA9IChyZXBvcnRzKSA/IHJlcG9ydHMgOiBbXVxuICAgIC8vcmVwb3J0cyA9IF8uc29ydEJ5KHJlcG9ydHMsIGZ1bmN0aW9uKG8peyByZXR1cm4gby5jcmVhdGVkQXQgfSkucmV2ZXJzZSgpXG4gICAgLy9jb25zb2xlLmxvZyhjdXJyZW50UHJvZmlsZSlcbiAgICBjb25zb2xlLmxvZygnQ1VSUkVOVCBWSUVXJylcbiAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLmN1cnJlbnRWaWV3KVxuICAgIGlmKGN1cnJlbnRQcm9maWxlLm5hbWUgPT0gXCJBbGxcIiB8fCBjdXJyZW50UHJvZmlsZS5kb25lKXtcbiAgICAgIGlmKHRoaXMuc3RhdGUuY3VycmVudFZpZXcgPT0gXCJBcHBzXCIpIHtcbiAgICAgICAgc2lnbmFsVmlldyA9IFNpZ25hbEFwcHMobnVsbClcbiAgICAgIH0gZWxzZSBpZih0aGlzLnN0YXRlLmN1cnJlbnRWaWV3ID09IFwiRmVlZFwiKSB7XG4gICAgICAgIHNpZ25hbFZpZXcgPSBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICAgICAgU2lnbmFsRGV0YWlsQnV0dG9ucyh7c2lnbmFsVHlwZTogdGhpcy5zdGF0ZS5zaWduYWxUeXBlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9maWxlOiB0aGlzLnN0YXRlLmN1cnJlbnRQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNpZ25hbFR5cGU6IHRoaXMuc2V0U2lnbmFsVHlwZX0pLCBcbiAgICAgICAgICAgIFNpZ25hbHNGZWVkKHtzZXRDdXJyZW50VmlldzogdGhpcy5zZXRDdXJyZW50VmlldywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsVHlwZTogdGhpcy5zdGF0ZS5zaWduYWxUeXBlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlOiB0aGlzLnN0YXRlLmN1cnJlbnRQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYWxzOiB0aGlzLnN0YXRlLnNpZ25hbHN9KVxuICAgICAgICAgICAgKVxuICAgICAgfSBlbHNlIGlmKHRoaXMuc3RhdGUuY3VycmVudFZpZXcgPT0gXCJDYWxlbmRhclwiKXtcbiAgICAgICAgc2lnbmFsVmlldyA9IFNpZ25hbENhbGVuZGFyKHtjdXJyZW50UHJvZmlsZTogdGhpcy5zdGF0ZS5jdXJyZW50UHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9zcGVjdFNpZ25hbFJlcG9ydDogdGhpcy5wcm9zcGVjdFNpZ25hbFJlcG9ydCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwb3J0czogcmVwb3J0cywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFJlcG9ydDogdGhpcy5zZXRDdXJyZW50UmVwb3J0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50VmlldzogdGhpcy5zZXRDdXJyZW50Vmlld30pXG4gICAgICB9IGVsc2UgaWYodGhpcy5zdGF0ZS5jdXJyZW50VmlldyA9PSBcIkFuYWx5dGljc1wiKXtcbiAgICAgICAgc2lnbmFsVmlldyA9IFNpZ25hbEFuYWx5dGljcyh7Y3VycmVudFByb2ZpbGU6IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvc3BlY3RTaWduYWxSZXBvcnQ6IHRoaXMucHJvc3BlY3RTaWduYWxSZXBvcnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcG9ydHM6IHJlcG9ydHMsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRSZXBvcnQ6IHRoaXMuc2V0Q3VycmVudFJlcG9ydCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFZpZXc6IHRoaXMuc2V0Q3VycmVudFZpZXd9KVxuICAgICAgfSBlbHNlIGlmKHRoaXMuc3RhdGUuY3VycmVudFZpZXcgPT0gXCJEZXRhaWxcIil7XG4gICAgICAgIHNpZ25hbFZpZXcgPSBTaWduYWxzRGV0YWlsKHtjdXJyZW50UHJvZmlsZTogdGhpcy5zdGF0ZS5jdXJyZW50UHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UHJvZmlsZVJlcG9ydDogdGhpcy5zdGF0ZS5jdXJyZW50UHJvZmlsZVJlcG9ydCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50VmlldzogdGhpcy5zZXRDdXJyZW50Vmlld30pXG4gICAgICB9IGVsc2UgaWYodGhpcy5zdGF0ZS5jdXJyZW50VmlldyA9PSBcIk1pbmluZ0pvYkRldGFpbFwiKXtcbiAgICAgICAgc2lnbmFsVmlldyA9IE1pbmluZ0pvYkRldGFpbCh7Y3VycmVudFByb2ZpbGU6IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFByb2ZpbGVSZXBvcnQ6IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGVSZXBvcnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFZpZXc6IHRoaXMuc2V0Q3VycmVudFZpZXd9KVxuICAgICAgfSBlbHNlIGlmKHRoaXMuc3RhdGUuY3VycmVudFZpZXcgPT0gXCJNaW5pbmdKb2JPdmVydmlld1wiKXtcbiAgICAgICAgc2lnbmFsVmlldyA9IE1pbmluZ0pvYkRldGFpbCh7Y3VycmVudFByb2ZpbGU6IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFByb2ZpbGVSZXBvcnQ6IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGVSZXBvcnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFZpZXc6IHRoaXMuc2V0Q3VycmVudFZpZXd9KVxuICAgICAgfSBlbHNlIGlmKHRoaXMuc3RhdGUuY3VycmVudFZpZXcgPT0gXCJNaW5pbmdKb2JDYWxlbmRhclwiKXtcbiAgICAgICAgc2lnbmFsVmlldyA9IE1pbmluZ0pvYkNhbGVuZGFyKHtjdXJyZW50UHJvZmlsZTogdGhpcy5zdGF0ZS5jdXJyZW50UHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFJlcG9ydDogdGhpcy5zZXRDdXJyZW50UmVwb3J0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXBvcnQ6IHRoaXMuc2V0UmVwb3J0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50VmlldzogdGhpcy5zZXRDdXJyZW50Vmlld30pXG4gICAgICB9IGVsc2UgaWYodGhpcy5zdGF0ZS5jdXJyZW50VmlldyA9PSBcIlRlcnJpdG9yeUNhbGVuZGFyXCIpe1xuICAgICAgICBjb25zb2xlLmxvZygnVEVSUklUT1JZIE9WRVJWSUVXIElTIENIT1NFTicpXG4gICAgICAgIHNpZ25hbFZpZXcgPSBUZXJyaXRvcnlPdmVydmlldyh7Y3VycmVudFByb2ZpbGU6IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRSZXBvcnQ6IHRoaXMuc2V0Q3VycmVudFJlcG9ydCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVwb3J0OiB0aGlzLnNldFJlcG9ydCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFZpZXc6IHRoaXMuc2V0Q3VycmVudFZpZXd9KVxuICAgICAgfSBlbHNlIGlmKHRoaXMuc3RhdGUuY3VycmVudFZpZXcgPT0gXCJUZXJyaXRvcnlEZXRhaWxcIil7XG4gICAgICAgIGNvbnNvbGUubG9nKCdURVJSSVRPUlkgREVUQUlMIElTIENIT1NFTicpXG4gICAgICAgIHNpZ25hbFZpZXcgPSBUZXJyaXRvcnlEZXRhaWwoe2N1cnJlbnRQcm9maWxlOiB0aGlzLnN0YXRlLmN1cnJlbnRQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFByb2ZpbGVSZXBvcnQ6IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGVSZXBvcnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50UmVwb3J0OiB0aGlzLnNldEN1cnJlbnRSZXBvcnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXBvcnQ6IHRoaXMuc2V0UmVwb3J0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFZpZXc6IHRoaXMuc2V0Q3VycmVudFZpZXd9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTaG93IENhbGVuZGFyIEV2ZW4gV2hlbiBTaWduYWwgSXMgTG9hZGluZ1xuICAgICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50VmlldyA9PSBcIkNhbGVuZGFyXCIpe1xuICAgICAgICBzaWduYWxWaWV3ID0gU2lnbmFsQ2FsZW5kYXIoe2N1cnJlbnRQcm9maWxlOiB0aGlzLnN0YXRlLmN1cnJlbnRQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50UmVwb3J0OiB0aGlzLnNldEN1cnJlbnRSZXBvcnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcG9ydHM6IHJlcG9ydHMsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRWaWV3OiB0aGlzLnNldEN1cnJlbnRWaWV3fSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGUpXG4gICAgICAgIGlmKHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGUudHlwZSA9PSBcInByb3NwZWN0X3Byb2ZpbGVcIilcbiAgICAgICAgICBzaWduYWxWaWV3ID1NaW5pbmdKb2JMb2FkaW5nKHtjdXJyZW50UHJvZmlsZTogdGhpcy5zdGF0ZS5jdXJyZW50UHJvZmlsZX0pXG4gICAgICAgIGVsc2VcbiAgICAgICAgICBzaWduYWxWaWV3ID0gU2lnbmFsTG9hZGluZyh7Y3VycmVudFByb2ZpbGU6IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGV9KVxuICAgICAgfVxuICAgIH1cblxuICAgcmV0dXJuIChcbiAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7aGVpZ2h0OjUwMH19LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lclwiLCBzdHlsZToge3BhZGRpbmc6MCwgd2lkdGg6JzEwMCUnLCBoZWlnaHQ6JzEwMCUnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtMyBzaWduYWwtbGlzdFwiLCBcbiAgICAgICAgICAgICAgIHN0eWxlOiB7IGhlaWdodDonMTAyLjglJywgcGFkZGluZzowfX0sIFxuICAgICAgICAgICAgICBTaWduYWxzT3B0aW9ucyh7cHJvZmlsZXM6IHRoaXMuc3RhdGUucHJvZmlsZXMsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkUHJvZmlsZTogdGhpcy5hZGRQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZU1pbmluZ0pvYkRvbmU6IHRoaXMudXBkYXRlTWluaW5nSm9iRG9uZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVQcm9maWxlOiB0aGlzLnJlbW92ZVByb2ZpbGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFZpZXc6IHRoaXMuc2V0Q3VycmVudFZpZXcsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFByb2ZpbGU6IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFByb2ZpbGU6IHRoaXMuc2V0Q3VycmVudFByb2ZpbGV9KVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtOVwiLCBzdHlsZToge2hlaWdodDonMTAwJScscGFkZGluZzowfX0sIFxuICAgICAgICAgICAgc2lnbmFsVmlld1xuICAgICAgICAgIClcblxuICAgICAgICApLCBcblxuICAgICAgICBDcmVhdGVNaW5pbmdKb2JNb2RhbCh7Y3JlYXRlTWluaW5nSm9iOiB0aGlzLmNyZWF0ZU1pbmluZ0pvYiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UHJvZmlsZTogdGhpcy5zdGF0ZS5jdXJyZW50UHJvZmlsZX0pLCBcbiAgICAgICAgQ3JlYXRlSGlyaW5nU2lnbmFsTW9kYWwoe2FkZFByb2ZpbGU6IHRoaXMuYWRkUHJvZmlsZX0pLCBcbiAgICAgICAgQ3JlYXRlRnVuZGluZ1NpZ25hbE1vZGFsKHthZGRQcm9maWxlOiB0aGlzLmFkZFByb2ZpbGV9KSwgXG4gICAgICAgIENyZWF0ZUNvbXBhbnlQcm9maWxlTW9kYWwoe2FkZFByb2ZpbGU6IHRoaXMuYWRkUHJvZmlsZX0pLCBcbiAgICAgICAgQ3JlYXRlUHJvc3BlY3RQcm9maWxlTW9kYWwoe2FkZFByb2ZpbGU6IHRoaXMuYWRkUHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUHJvZmlsZVdpdGhPYmplY3RJZDogdGhpcy51cGRhdGVQcm9maWxlV2l0aE9iamVjdElkfSksIFxuICAgICAgICBDcmVhdGVUZXJyaXRvcnlTdHJhdGVneU1vZGFsKHthZGRQcm9maWxlOiB0aGlzLmFkZFByb2ZpbGUsIFxuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVByb2ZpbGVXaXRoT2JqZWN0SWQ6IHRoaXMudXBkYXRlUHJvZmlsZVdpdGhPYmplY3RJZH0pXG4gICAgICApXG4gICAgICApXG5cbiAgICApXG4gIH0sXG4gIC8qXG4gICAgICA8UGFuZWxGb290aW5nIGN1cnJlbnRQYWdlPXt0aGlzLnN0YXRlLmN1cnJlbnRQYWdlfVxuICAgICAgICAgICAgICAgICAgICBjb3VudD17dGhpcy5zdGF0ZS5jb3VudH1cbiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGU9e3RoaXMucGFnaW5hdGV9XG4gICAgICAgICAgICAgICAgICAgIHByb3NwZWN0VHlwZT17J1Byb3NwZWN0J31cbiAgICAgICAgICAgICAgICAgICAgcHJvc3BlY3RzUGVyUGFnZT17dGhpcy5zdGF0ZS5wcm9zcGVjdHNQZXJQYWdlfVxuICAgICAgICAgICAgICAgICAgICBzZXRQYWdpbmF0ZT17dGhpcy5zZXRQYWdpbmF0ZX1cbiAgICAgICAgICAgICAgICAgICAgcGFnZXM9e3RoaXMuc3RhdGUucGFnZXN9Lz5cbiAgKi9cblxuICBjcmVhdGVNaW5pbmdKb2I6IGZ1bmN0aW9uKHRoZVByb2ZpbGUsIGRhdGUpIHtcbiAgICBjb25zb2xlLmxvZygnY3JlYXRlIG1pbmluZyBqb2InKVxuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgcmVwb3J0ID0ge1xuICAgICAgLy9jcmVhdGVkQXQ6IG1vbWVudCgpLnZhbHVlT2YoKSxcbiAgICAgIGNvbXBhbnlfY291bnQ6IDAsXG4gICAgICBwZW9wbGVfY291bnQ6IDAsXG4gICAgICBsaXN0X3R5cGU6J21pbmluZ19qb2InLFxuICAgICAgZG9uZTogMCxcbiAgICAgIG1pbmluZ19qb2I6IHRydWUsXG4gICAgfVxuXG4gICAgcHJvZmlsZXM9Xy5tYXAodGhpcy5zdGF0ZS5wcm9maWxlcywgZnVuY3Rpb24ocHJvZmlsZSkge1xuICAgICAgaWYoXy5pc0VxdWFsKHRoZVByb2ZpbGUsIHByb2ZpbGUpKXtcbiAgICAgICAgaWYocHJvZmlsZS5taW5pbmdfZGF5cyl7XG4gICAgICAgICAgcHJvZmlsZS5taW5pbmdfZGF5cy5wdXNoKGRhdGUpXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIHByb2ZpbGUubWluaW5nX2RheXMgPSBbZGF0ZV1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHByb2ZpbGUucmVwb3J0cyl7XG4gICAgICAgICAgcHJvZmlsZS5yZXBvcnRzID0gW3JlcG9ydF0uY29uY2F0KHByb2ZpbGUucmVwb3J0cylcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgcHJvZmlsZS5yZXBvcnRzID0gW3JlcG9ydF1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2N1cnJlbnRQcm9maWxlOiBwcm9maWxlfSlcbiAgICAgICAgdGhpc3MucGVyc2lzdE1pbmluZ0pvYihkYXRlLCByZXBvcnQpXG4gICAgICAgIHJldHVybiBwcm9maWxlXG4gICAgICB9XG4gICAgICByZXR1cm4gcHJvZmlsZVxuICAgIH0pXG4gICAgdGhpc3Muc2V0U3RhdGUoe3Byb2ZpbGVzOiBwcm9maWxlc30pXG4gIH0sXG5cbiAgcGVyc2lzdE1pbmluZ0pvYjogZnVuY3Rpb24oZGF0ZSwgcmVwb3J0KSB7XG4gICAgY29uc29sZS5sb2codGhpcy5zdGF0ZSlcbiAgICBvYmplY3RJZCA9IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGUub2JqZWN0SWRcbiAgfSxcblxuICBhZGRQcm9maWxlOiBmdW5jdGlvbihuZXdQcm9maWxlKSB7XG4gICAgcHJvZmlsZXMgPSB0aGlzLnN0YXRlLnByb2ZpbGVzXG4gICAgY29uc29sZS5kZWJ1ZyhuZXdQcm9maWxlKVxuICAgIHRoaXMuc2V0U3RhdGUoe3Byb2ZpbGVzOiBbbmV3UHJvZmlsZV0uY29uY2F0KHByb2ZpbGVzKX0pXG4gICAgdGhpcy5zZXRDdXJyZW50UHJvZmlsZShuZXdQcm9maWxlKVxuICB9LFxuXG4gIHJlbW92ZVByb2ZpbGU6IGZ1bmN0aW9uKG9sZFByb2ZpbGUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtwcm9maWxlczogXy5yZWplY3QodGhpcy5zdGF0ZS5wcm9maWxlcywgZnVuY3Rpb24ocHJvZmlsZSkge1xuICAgICAgcmV0dXJuIF8uaXNFcXVhbChvbGRQcm9maWxlLCBwcm9maWxlKVxuICAgIH0pfSlcblxuICAgIGlmKG9sZFByb2ZpbGUub2JqZWN0SWQpe1xuICAgICAgJC5hamF4KHtcbiAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0UHJvZmlsZS8nK29sZFByb2ZpbGUub2JqZWN0SWQsXG4gICAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgIHR5cGU6J0RFTEVURScsXG4gICAgICB9KVxuICAgIH1cbiAgfSxcblxuICB1cGRhdGVNaW5pbmdKb2JEb25lOiBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgcHJvZmlsZXMgPSBfLm1hcCh0aGlzLnN0YXRlLnByb2ZpbGVzLCBmdW5jdGlvbihfcHJvZmlsZSkge1xuICAgICAgICAgICAgICAgICAgaWYoX3Byb2ZpbGUub2JqZWN0SWQgPT0gcHJvZmlsZS5vYmplY3RJZCkge1xuICAgICAgICAgICAgICAgICAgICBfcHJvZmlsZS5kb25lID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3Byb2ZpbGVcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHJldHVybiBfcHJvZmlsZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgdGhpcy5zZXRTdGF0ZSh7cHJvZmlsZXM6IHByb2ZpbGVzfSlcbiAgfSxcblxuICB1cGRhdGVQcm9maWxlV2l0aE9iamVjdElkOiBmdW5jdGlvbih0aW1lc3RhbXAsIG9iamVjdElkKSB7XG4gICAgY29uc29sZS5sb2coJ1VQREFURSBQUk9GSUxFUycpXG4gICAgbmV3UHJvZmlsZXMgPSBfLm1hcCh0aGlzLnN0YXRlLnByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICAgIGlmKHByb2ZpbGUudGltZXN0YW1wID09IHRpbWVzdGFtcCkge1xuICAgICAgICAgIHByb2ZpbGUub2JqZWN0SWQgPSBvYmplY3RJZFxuICAgICAgICAgIHJldHVybiBwcm9maWxlXG4gICAgICAgIH1cbiAgICAgIHJldHVybiBwcm9maWxlXG4gICAgfSlcbiAgICBcbiAgICBjb25zb2xlLmxvZyhuZXdQcm9maWxlcylcbiAgICB0aGlzLnNldFN0YXRlKHtwcm9maWxlczogbmV3UHJvZmlsZXN9KVxuICAgIGNvbnNvbGUubG9nKG9iamVjdElkKVxuXG4gICAgdmFyIHB1c2hlciA9IG5ldyBQdXNoZXIoJzFhNjhhOTZjOGZkZTkzOGZhNzVhJyk7XG4gICAgY29uc29sZS5sb2coJ25ldyBwdXNoZXIgY2hhbm5lbCAtPicsIG9iamVjdElkKVxuICAgIHZhciBjaGFubmVsID0gcHVzaGVyLnN1YnNjcmliZShvYmplY3RJZCk7XG4gICAgdmFyIHRoaXNzID0gdGhpcztcbiAgICBjaGFubmVsLmJpbmQoXCJkb25lXCIsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHRoaXNzLnVwZGF0ZU1pbmluZ0pvYkRvbmUoXy5maW5kV2hlcmUodGhpc3Muc3RhdGUucHJvZmlsZXMsIHt0aW1lc3RhbXA6IHRpbWVzdGFtcH0pKVxuICAgICAgYWxlcnRpZnkuc3VjY2VzcyhcIk5ldyBTdWNjZXNzIG5vdGlmaWNhdGlvblwiKTtcbiAgICB9KTtcbiAgfSxcblxuICBzZXRDdXJyZW50UHJvZmlsZTogZnVuY3Rpb24obmV3UHJvZmlsZSkge1xuICAgIGlmKG5ld1Byb2ZpbGUub25seV9wZW9wbGUpIHtcbiAgICAgIHRoaXMuZ2V0U2lnbmFscygnUGVvcGxlU2lnbmFsJywgXG4gICAgICAgICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgIF9fdHlwZTogJ1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ1Byb3NwZWN0UHJvZmlsZScsIFxuICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdElkOiBuZXdQcm9maWxlLm9iamVjdElkfSkpXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgc2lnbmFsVHlwZTogJ1Blb3BsZVNpZ25hbCcsXG4gICAgICAgIGN1cnJlbnRQcm9maWxlOiBuZXdQcm9maWxlIFxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudFByb2ZpbGU6IG5ld1Byb2ZpbGUgfSlcbiAgICB9XG5cbiAgICB0aGlzLmdldFNpZ25hbHMoJ1Blb3BsZVNpZ25hbCcsIG5ld1Byb2ZpbGUpXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZ2V0U2lnbmFscyh0aGlzLnN0YXRlLnNpZ25hbFR5cGUpXG4gICAgcXJ5ID0geydpbmNsdWRlJzoncHJvZmlsZXMscmVwb3J0cyxwcm9zcGVjdF9saXN0Jm9yZGVyPS1jcmVhdGVkQXQnfVxuXG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICBQYXJzZS5nZXQoJ1Byb3NwZWN0UHJvZmlsZScsIHFyeSkuZG9uZShmdW5jdGlvbihyZXMpIHtcbiAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIF90aGlzLnNldFN0YXRlKHtwcm9maWxlczogcmVzLnJlc3VsdHN9KVxuICAgIH0pXG4gIH0sXG5cbiAgc2V0U2lnbmFsVHlwZTogZnVuY3Rpb24obGFiZWxUZXh0KSB7XG4gICAgaWYobGFiZWxUZXh0ID09IFwiUGVvcGxlXCIpXG4gICAgICBjdXJyZW50U2lnbmFsID0gXCJQZW9wbGVTaWduYWxcIlxuICAgIGVsc2UgaWYobGFiZWxUZXh0ID09IFwiQ29tcGFuaWVzXCIpXG4gICAgICBjdXJyZW50U2lnbmFsID0gXCJDb21wYW55U2lnbmFsXCJcbiAgICB0aGlzLmdldFNpZ25hbHMoY3VycmVudFNpZ25hbClcbiAgICB0aGlzLnNldFN0YXRlKHtzaWduYWxUeXBlOiBjdXJyZW50U2lnbmFsfSlcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG4gIH0sXG5cbiAgZ2V0U2lnbmFsczogZnVuY3Rpb24oc2lnbmFsVHlwZSwgY3VycmVudFByb2ZpbGUpIHtcbiAgICBjdXJyZW50VXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKVxuICAgIHVzZXIgPSB7XG4gICAgICAnX190eXBlJyAgICA6ICdQb2ludGVyJyxcbiAgICAgICdjbGFzc05hbWUnIDogJ19Vc2VyJyxcbiAgICAgICdvYmplY3RJZCcgIDogY3VycmVudFVzZXIub2JqZWN0SWRcbiAgICB9XG5cbiAgICB1c2VyID0gSlNPTi5zdHJpbmdpZnkodXNlcilcbiAgICBjb21wYW55ID0gSlNPTi5zdHJpbmdpZnkoY3VycmVudFVzZXIuY29tcGFueSlcbiAgICBwcm9maWxlcyA9IHRoaXMuc3RhdGUuY3VycmVudFByb2ZpbGUucHJvZmlsZXNcblxuICAgIGlmKHByb2ZpbGVzKXtcbiAgICAgIC8vcXJ5ID0gJ3doZXJlPXtcImNvbXBhbnlcIjonK2NvbXBhbnkrJyxcInVzZXJcIjonK3VzZXIrJyxcInByb2ZpbGVcIjonK2N1cnJlbnRQcm9maWxlKyd9J1xuICAgICAgcHJvZmlsZSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgX190eXBlOidQb2ludGVyJyxcbiAgICAgICAgY2xhc3NOYW1lOidQcm9zcGVjdFByb2ZpbGUnLFxuICAgICAgICBvYmplY3RJZDpjdXJyZW50UHJvZmlsZS5vYmplY3RJZFxuICAgICAgfSlcbiAgICAgIHFyeSA9ICd3aGVyZT17XCJwcm9maWxlXCI6Jytwcm9maWxlKyd9J1xuICAgICAgLy9xcnkgPSBxcnkgKyAnLFwicHJvZmlsZXNcIjp7XCIkYWxsXCI6JytKU09OLnN0cmluZ2lmeShwcm9maWxlcykrJ319J1xuICAgICAgaWYoc2lnbmFsVHlwZSA9PSAnUGVvcGxlU2lnbmFsJylcbiAgICAgICAgcXJ5ID0gcXJ5ICsgJyZpbmNsdWRlPXNpZ25hbHMnXG4gICAgICBlbHNlXG4gICAgICAgIHFyeSA9IHFyeSArICcmaW5jbHVkZT1zaWduYWxzLGNvbXBhbnknXG5cbiAgICB9IGVsc2Uge1xuICAgICAgcXJ5ID0geydpbmNsdWRlJzpbJ3NpZ25hbHMnLCdjb21wYW55J119XG4gICAgfVxuICBcbiAgICB0aGlzcyA9IHRoaXNcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK3NpZ25hbFR5cGUsXG4gICAgICAvL3VybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvQ29tcGFueVNpZ25hbCcsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgaGVhZGVyczphcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2cocmVzLnJlc3VsdHMpXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtzaWduYWxzOiByZXMucmVzdWx0c30pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIpIH1cbiAgICB9KTtcbiAgfSxcbn0pO1xuXG52YXIgU2lnbmFsRGV0YWlsQnV0dG9ucyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1NpZ25hbERldGFpbEJ1dHRvbnMnLFxuICBzZXRTaWduYWxUeXBlOiBmdW5jdGlvbihlKSB7XG4gICAgdGhpcy5wcm9wcy5zZXRTaWduYWxUeXBlKCQoZS50YXJnZXQpLnRleHQoKS50cmltKCkpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBwcGwgPSAodGhpcy5wcm9wcy5zaWduYWxUeXBlID09IFwiUGVvcGxlU2lnbmFsXCIpID8gXCJjaG9vc2UgYnRuIGJ0bi1wcmltYXJ5IGFwcC1hY3RpdmVcIiA6IFwiY2hvb3NlIGJ0biBidG4tcHJpbWFyeVwiXG4gICAgY21wID0gKHRoaXMucHJvcHMuc2lnbmFsVHlwZSA9PSBcIkNvbXBhbnlTaWduYWxcIikgPyBcImNob29zZSBidG4gYnRuLXByaW1hcnkgYXBwLWFjdGl2ZVwiIDogXCJjaG9vc2UgYnRuIGJ0bi1wcmltYXJ5XCJcblxuICAgIGNtcCA9ICh0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm9ubHlfcGVvcGxlKSAgPyBjbXAgKyBcIiBkaXNhYmxlZFwiIDogY21wXG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7aWQ6IFwic2lnbmFsRGV0YWlsQnV0dG9uc1wiLCBzdHlsZToge2hlaWdodDo0NH19LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDQoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyxmbG9hdDonbGVmdCcsd2lkdGg6MzAwLFxuICAgICAgICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQ6MjAwLG1hcmdpblRvcDo0LHBhZGRpbmdMZWZ0OjIwfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1uZXdzcGFwZXItb1wifSksIFwiwqBcIiwgIFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZS5uYW1lXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cFwiLCBzdHlsZToge21hcmdpbkxlZnQ6JzAlJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtjbGFzc05hbWU6IHBwbCwgXG4gICAgICAgICAgICAgICBzdHlsZToge3BhZGRpbmc6Mn0sIFxuICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5zZXRTaWduYWxUeXBlfSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS11c2VyXCJ9KSwgXCLCoFBlb3BsZVwiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtjbGFzc05hbWU6IGNtcCwgXG4gICAgICAgICAgICAgICBzdHlsZToge3BhZGRpbmc6Mn0sIFxuICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5zZXRTaWduYWxUeXBlfSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1idWlsZGluZ1wifSksIFwiwqBDb21wYW5pZXNcIlxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgU2lnbmFsc09wdGlvbnMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdTaWduYWxzT3B0aW9ucycsXG4gIGFkZFByb2ZpbGU6IGZ1bmN0aW9uKG5ld1Byb2ZpbGUpIHtcbiAgICB0aGlzLnByb3BzLmFkZFByb2ZpbGUobmV3UHJvZmlsZSlcbiAgfSxcblxuICBzZXRDdXJyZW50UHJvZmlsZTogZnVuY3Rpb24oY3VycmVudFByb2ZpbGUpIHtcbiAgICB0aGlzLnByb3BzLnNldEN1cnJlbnRQcm9maWxlKGN1cnJlbnRQcm9maWxlKVxuICB9LFxuXG4gIHJlbW92ZVByb2ZpbGU6IGZ1bmN0aW9uKG9sZFByb2ZpbGUpIHtcbiAgICB0aGlzLnByb3BzLnJlbW92ZVByb2ZpbGUob2xkUHJvZmlsZSlcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gIH0sXG5cbiAgc2V0Q3VycmVudFZpZXc6IGZ1bmN0aW9uKG5ld1ZpZXcpIHtcbiAgICBjb25zb2xlLmxvZyhuZXdWaWV3KVxuICAgIHRoaXMucHJvcHMuc2V0Q3VycmVudFZpZXcobmV3VmlldylcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHByb2ZzID0gW11cbiAgICAvL2NvbnNvbGUubG9nKCdzaWduYWxzIHJlbmRlcicpXG4gICAgY29uc29sZS5kZWJ1Zyh0aGlzLnByb3BzLnByb2ZpbGVzKVxuICAgIGZvcihpPTA7IGk8IHRoaXMucHJvcHMucHJvZmlsZXMubGVuZ3RoO2krKykge1xuICAgICAgc2VsZWN0PSB0aGlzLnByb3BzLnByb2ZpbGVzW2ldLm9iamVjdElkID09IHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGUub2JqZWN0SWRcbiAgICAgIHByb2ZzLnB1c2goU2lnbmFsUHJvZmlsZSh7c2V0Q3VycmVudFByb2ZpbGU6IHRoaXMuc2V0Q3VycmVudFByb2ZpbGUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVNaW5pbmdKb2JEb25lOiB0aGlzLnByb3BzLnVwZGF0ZU1pbmluZ0pvYkRvbmUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50VmlldzogdGhpcy5zZXRDdXJyZW50VmlldywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9maWxlOiB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHNlbGVjdCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZVByb2ZpbGU6IHRoaXMucmVtb3ZlUHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGU6IHRoaXMucHJvcHMucHJvZmlsZXNbaV19KSlcbiAgICB9XG5cbiAgICBwcm9maWxlc19udW0gPSAodGhpcy5wcm9wcy5wcm9maWxlcy5sZW5ndGgpID8gdGhpcy5wcm9wcy5wcm9maWxlcy5sZW5ndGggOiBcIn5cIlxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImxpc3QtZ3JvdXBcIn0sIFxuICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJsaXN0LWdyb3VwLWl0ZW1cIiwgXG4gICAgICAgICAgICBzdHlsZToge2JvcmRlclRvcDowLGJvcmRlckxlZnQ6MCxoZWlnaHQ6NDQscGFkZGluZ1JpZ2h0OjUscGFkZGluZ0xlZnQ6MTAsXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjonI2UwZTZlYScsXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZTonbGluZWFyLWdyYWRpZW50KCNmNWY3ZjgsI2UwZTZlYSk7J319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNCh7c3R5bGU6IHttYXJnaW46MCx0ZXh0QWxpZ246J2NlbnRlcicsZm9udFdlaWdodDoyMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdDonbGVmdCcsbWFyZ2luVG9wOjJ9fSwgXCJQcm9maWxlcyAoXCIsIHByb2ZpbGVzX251bSwgXCIpXCIpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tcHJpbWFyeSBjcmVhdGUtcHJvZmlsZS1kcm9wZG93blwiLCBcbiAgICAgICAgICAgICAnZGF0YS10b2dnbGUnOiBcImRyb3Bkb3duXCIsIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMubGF1bmNoRHJvcGRvd24sIFxuICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxcbiAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOidsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCAjMDA5NmZmIDAlLCAjMDA1ZGZmIDEwMCUpJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSksIFwiwqAgQ3JlYXRlIFByb2ZpbGVcIlxuICAgICAgICAgICksIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwiZHJvcGRvd24tbWVudVwiLCBcbiAgICAgICAgICAgICAgc3R5bGU6IHttYXJnaW5MZWZ0OjE3NSxtYXJnaW5Ub3A6LTEwfSwgXG4gICAgICAgICAgICAgIHJvbGU6IFwibWVudVwiLCAnYXJpYS1sYWJlbGxlZGJ5JzogXCJkcm9wZG93bk1lbnUxXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7cm9sZTogXCJwcmVzZW50YXRpb25cIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5sYXVuY2hNb2RhbCwgXG4gICAgICAgICAgICAgICAgIHN0eWxlOiB7cGFkZGluZ0xlZnQ6NX19LCBcbiAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbjoyfX0sIFxuICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc3VpdGNhc2VcIiwgc3R5bGU6IHt3aWR0aDoxMH19KSwgXG4gICAgICAgICAgICAgICAgICBcIsKgwqBDcmVhdGUgSGlyaW5nIFNpZ25hbFwiXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7cm9sZTogXCJwcmVzZW50YXRpb25cIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmxhdW5jaE1vZGFsLCBcbiAgICAgICAgICAgICAgICAgc3R5bGU6IHtwYWRkaW5nTGVmdDo1fX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW46Mn19LCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWluc3RpdHV0aW9uXCIsIHN0eWxlOiB7d2lkdGg6MTB9fSksIFxuICAgICAgICAgICAgICAgICAgXCLCoMKgQ3JlYXRlIEZ1bmRpbmcgU2lnbmFsXCJcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtyb2xlOiBcInByZXNlbnRhdGlvblwiLCBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMubGF1bmNoTW9kYWwsIFxuICAgICAgICAgICAgICAgICBzdHlsZToge3BhZGRpbmdMZWZ0OjV9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbjoyfX0sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZ2xvYmVcIiwgc3R5bGU6IHt3aWR0aDoxMH19KSwgXG4gICAgICAgICAgICAgICAgICBcIsKgwqBDcmVhdGUgVGVycml0b3J5IFN0cmF0ZWd5XCJcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtyb2xlOiBcInByZXNlbnRhdGlvblwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtvbkNsaWNrOiB0aGlzLmxhdW5jaE1vZGFsLCBcbiAgICAgICAgICAgICAgICAgc3R5bGU6IHtwYWRkaW5nTGVmdDo1LHBhZGRpbmdSaWdodDoyfSwgXG4gICAgICAgICAgICAgICAgIGhyZWY6IFwiamF2YXNjcmlwdFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbjoyfX0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS11c2VyXCIsIHN0eWxlOiB7d2lkdGg6MTB9fSksIFxuICAgICAgICAgICAgICAgICAgXCLCoMKgQ3JlYXRlIFByb3NwZWN0IFByb2ZpbGVcIlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGkoe3JvbGU6IFwicHJlc2VudGF0aW9uXCIsIHN0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtyb2xlOiBcIm1lbnVpdGVtXCIsIHRhYmluZGV4OiBcIi0xXCIsIFxuICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmxhdW5jaE1vZGFsLCBcbiAgICAgICAgICAgICAgICAgc3R5bGU6IHtwYWRkaW5nTGVmdDo1LHBhZGRpbmdSaWdodDoyfSwgaHJlZjogXCIjXCJ9LCBcbiAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbjoyfX0sIFxuICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYnVpbGRpbmdcIiwgc3R5bGU6IHt3aWR0aDoxMH19KSwgXG4gICAgICAgICAgICAgICAgICAgXCLCoMKgQ3JlYXRlIENvbXBhbnkgUHJvZmlsZVwiXG4gICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcInByb2ZpbGVzLW1lbnVcIiwgc3R5bGU6IHtoZWlnaHQ6NDU2LCBvdmVyZmxvdzonYXV0bycsbWFyZ2luVG9wOjF9fSwgXG4gICAgICAgICAgcHJvZnNcbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcbiAgICApO1xuICB9LFxuXG4gIGxhdW5jaE1vZGFsOiBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc29sZS5sb2coJChlLnRhcmdldCkudGV4dCgpLnRyaW0oKSlcbiAgICBpZigkKGUudGFyZ2V0KS50ZXh0KCkudHJpbSgpID09ICdDcmVhdGUgSGlyaW5nIFNpZ25hbCcpXG4gICAgICAkKCcjY3JlYXRlSGlyaW5nU2lnbmFsTW9kYWwnKS5tb2RhbCgpXG4gICAgZWxzZSBpZigkKGUudGFyZ2V0KS50ZXh0KCkudHJpbSgpID09ICdDcmVhdGUgRnVuZGluZyBTaWduYWwnKVxuICAgICAgJCgnI2NyZWF0ZUZ1bmRpbmdTaWduYWxNb2RhbCcpLm1vZGFsKClcbiAgICBlbHNlIGlmKCQoZS50YXJnZXQpLnRleHQoKS50cmltKCkgPT0gJ0NyZWF0ZSBQcm9zcGVjdCBQcm9maWxlJylcbiAgICAgICQoJyNjcmVhdGVQcm9zcGVjdFByb2ZpbGVNb2RhbCcpLm1vZGFsKClcbiAgICBlbHNlIGlmKCQoZS50YXJnZXQpLnRleHQoKS50cmltKCkgPT0gJ0NyZWF0ZSBUZXJyaXRvcnkgU3RyYXRlZ3knKVxuICAgICAgJCgnI2NyZWF0ZVRlcnJpdG9yeVN0cmF0ZWd5TW9kYWwnKS5tb2RhbCgpXG4gICAgZWxzZSBpZigkKGUudGFyZ2V0KS50ZXh0KCkudHJpbSgpID09ICdDcmVhdGUgQ29tcGFueSBQcm9maWxlJylcbiAgICAgICQoJyNjcmVhdGVDb21wYW55UHJvZmlsZU1vZGFsJykubW9kYWwoKVxuICB9LFxuXG4gIGxhdW5jaERyb3Bkb3duOiBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgJCgnLmNyZWF0ZS1wcm9maWxlLWRyb3Bkb3duJykuZHJvcGRvd24oKVxuICB9XG59KTtcblxudmFyIFNpZ25hbHNGZWVkID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnU2lnbmFsc0ZlZWQnLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIC8vdGhpcy5nZXRTaWduYWxzKClcbiAgICBzaWduYWxDYXJkcyA9IFtdXG4gICAgZm9yKGk9MDtpPCB0aGlzLnByb3BzLnNpZ25hbHMubGVuZ3RoO2krKykge1xuICAgICAgaWYodGhpcy5wcm9wcy5zaWduYWxUeXBlID09IFwiQ29tcGFueVNpZ25hbFwiKVxuICAgICAgICBzaWduYWxDYXJkcy5wdXNoKENvbXBhbnlTaWduYWxDYXJkKHtjb21wYW55OiB0aGlzLnByb3BzLnNpZ25hbHNbaV19KSlcbiAgICAgIGVsc2UgaWYodGhpcy5wcm9wcy5zaWduYWxUeXBlID09IFwiUGVvcGxlU2lnbmFsXCIpXG4gICAgICAgIHNpZ25hbENhcmRzLnB1c2goUGVvcGxlU2lnbmFsQ2FyZCh7cHJvZmlsZTogdGhpcy5wcm9wcy5wcm9maWxlLCBwZXJzb246IHRoaXMucHJvcHMuc2lnbmFsc1tpXX0pKVxuICAgIH1cbiAgICBcbiAgICBjb250ZW50ID0gKHRoaXMucHJvcHMuc2lnbmFscy5sZW5ndGgpID8gc2lnbmFsQ2FyZHMgOiBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwic2lnbmFsLWNhcmRcIn0sIFwiTE9MXCIpXG4gICAgY29udGVudCA9IHNpZ25hbENhcmRzXG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lciBzaWduYWwtY2FyZC1iYWNrZ3JvdW5kXCIsIHN0eWxlOiB7aGVpZ2h0OjQ1Niwgb3ZlcmZsb3c6J2F1dG8nfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTggY29sLW1kLW9mZnNldC0yXCJ9LCBcbiAgICAgICAgICBjb250ZW50XG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG50aGVEYXRhID0gcmVxdWlyZSgnLi4vbGliL2RhdGEubWluLmpzJykgXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIFNpZ25VcFxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgLy8kKCdib2R5JykuY3NzKHtvdmVyZmxvdzonaGlkZGVuJ30pXG4gICAgLy8kKCdib2R5JykuY3NzKHtvdmVyZmxvdzonaGlkZGVuJ30pXG4gICAgdmFyIHRoaXNzID0gdGhpcztcbiAgICAkKFwiaW5wdXRcIikua2V5cHJlc3MoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LndoaWNoID09IDEzKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzcy5zaWdudXAoKVxuICAgICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgcmV0cmlldmVVc2VyOiBmdW5jdGlvbihvYmplY3RJZCkge1xuICAgIGhlYWRlcnMgPSB7XG4gICAgICBcIlgtUGFyc2UtQXBwbGljYXRpb24tSWRcIjogXCJOODVRT2t0ZUVFUWt1WlZKS0F2dDhNVmVzMHNqRzZxTnBFR3FRRlZKXCIsXG4gICAgICBcIlgtUGFyc2UtUkVTVC1BUEktS2V5XCI6IFwiVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYlwiXG4gICAgfVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL3VzZXJzLycrb2JqZWN0SWQsXG4gICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50VXNlcicsIEpTT04uc3RyaW5naWZ5KHJlcykpXG4gICAgICAgIGxvY2F0aW9uLmhyZWYgPSBcIiNcIlxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIHNpZ251cDogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2coJ3NpZ251cCcpXG4gICAgZW1haWwgPSAkKCcjZW1haWwnKS52YWwoKS50cmltKClcbiAgICBwYXNzd29yZCA9ICQoJyNwYXNzd29yZCcpLnZhbCgpLnRyaW0oKVxuICAgIHRoaXNzID0gdGhpcztcbiAgICBpZigkKCcjY29tcGFueScpLnZhbCgpLnRyaW0oKSA9PSBcIlwiIHx8IGVtYWlsID09IFwiXCIgfHwgcGFzc3dvcmQgPT0gXCJcIil7XG4gICAgICBhbGVydGlmeS5lcnJvcignVGhlcmUgd2FzIGFuIGVycm9yIHdpdGggeW91ciByZWdpc3RyYXRpb24gcmVxdWVzdC4gUGxlYXNlIHRyeSBhZ2FpbicpXG4gICAgICByZXR1cm4gMFxuICAgICAgXG4gICAgfVxuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Db21wYW55JyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7ICduYW1lJzogJCgnI2NvbXBhbnknKS52YWwoKSwgfSksXG4gICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlcykge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvdXNlcnMnLFxuICAgICAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICd1c2VybmFtZSc6ZW1haWwsXG4gICAgICAgICAgICAncGFzc3dvcmQnOiBwYXNzd29yZCxcbiAgICAgICAgICAgICdhY2NvdW50VHlwZSc6J3RyaWFsJyxcbiAgICAgICAgICAgICd1c2VyX2NvbXBhbnknOntcbiAgICAgICAgICAgICAgJ19fdHlwZScgICAgOiAnUG9pbnRlcicsXG4gICAgICAgICAgICAgICdjbGFzc05hbWUnIDogJ1VzZXJDb21wYW55JyxcbiAgICAgICAgICAgICAgJ29iamVjdElkJyAgOiByZXMub2JqZWN0SWQsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBwZW9wbGVfYXJjaGl2ZV9saXN0XG4gICAgICAgICAgICAvLyBjb21wYW55X2FyY2hpdmVfbGlzdFxuICAgICAgICAgICAgLy8gQ2xlYXJTcGFyayAtIGFwaV9rZXlcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgLy8gRG8gYW5vdGhlciByZXF1ZXN0IHRvIGdldCBjdXJyZW50IHVzZXJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50VXNlcicsIEpTT04uc3RyaW5naWZ5KHJlcykpXG4gICAgICAgICAgICB0aGlzcy5yZXRyaWV2ZVVzZXIocmVzLm9iamVjdElkKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICAgICAgYWxlcnRpZnkuZXJyb3IoJ1RoZXJlIHdhcyBhbiBlcnJvciB3aXRoIHlvdXIgcmVnaXN0cmF0aW9uIHJlcXVlc3QuIFBsZWFzZSB0cnkgYWdhaW4nKVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIGFsZXJ0aWZ5LmVycm9yKCdUaGVyZSB3YXMgYW4gZXJyb3Igd2l0aCB5b3VyIHJlZ2lzdHJhdGlvbiByZXF1ZXN0LiBQbGVhc2UgdHJ5IGFnYWluJylcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkgeyBcbiAgICBkYXRhID0gdGhlRGF0YSgpXG4gICAgaW1nc18xID0gW11cbiAgICBpbWdzXzIgPSBbXVxuICAgIGZvcihpPTA7aSA8IDEyMDsgaSsrKSB7XG4gICAgICBpbWdzXzEucHVzaChSZWFjdC5ET00uaW1nKHtzcmM6IGRhdGFbaV0sIGNsYXNzTmFtZTogXCJwcm9zcGVjdC1pbWdcIn0pKVxuICAgIH1cbiAgICBmb3IoaT0xNTtpIDwgMzA7IGkrKykge1xuICAgICAgaW1nc18yLnB1c2goUmVhY3QuRE9NLmltZyh7c3JjOiBkYXRhW2ldLCBjbGFzc05hbWU6IFwicHJvc3BlY3QtaW1nXCJ9KSlcbiAgICB9XG5cbiAgY29uc29sZS5sb2coZGF0YSlcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7aWQ6IFwic2lnbnVwXCIsIHN0eWxlOiB7bWFyZ2luVG9wOjB9fSwgXG5cbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7cGFkZGluZ1RvcDoxMDB9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5oMSh7Y2xhc3NOYW1lOiBcInRpdGxlXCJ9LCBcIkN1c3RvbWVyby5cIiksIFxuICAgICAgICBSZWFjdC5ET00uaDUoe2NsYXNzTmFtZTogXCJ0YWdsaW5lXCJ9LCBcIkdlbmVyYXRlIGhpZ2ggcXVhbGl0eSBwcm9zcGVjdCBsaXN0cy4gQWNjZWxlcmF0ZSBTYWxlcy5cIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0IGxvZ2luLWluZm9cIiwgc3R5bGU6IHtkaXNwbGF5OidibG9jaycsbWFyZ2luVG9wOjUwfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWJvZHlcIiwgc3R5bGU6IHtmb250RmFtaWx5Oidwcm94aW1hLW5vdmEnLGZvbnRXZWlnaHQ6J2JvbGQnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZm9ybSh7b25TdWJtaXQ6IHRoaXMubG9naW59LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHtwbGFjZWhvbGRlcjogXCJFbWFpbFwiLCBpZDogXCJlbWFpbFwiLCB0eXBlOiBcInRleHRcIiwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBpbnB1dC1sZ1wifSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3BsYWNlaG9sZGVyOiBcIkNvbXBhbnlcIiwgdHlwZTogXCJ0ZXh0XCIsIGlkOiBcImNvbXBhbnlcIiwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBpbnB1dC1sZ1wifSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3BsYWNlaG9sZGVyOiBcIlBhc3N3b3JkXCIsIHR5cGU6IFwicGFzc3dvcmRcIiwgaWQ6IFwicGFzc3dvcmRcIiwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBpbnB1dC1sZ1wifSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3BsYWNlaG9sZGVyOiBcIlJlcGVhdCBQYXNzd29yZFwiLCB0eXBlOiBcInBhc3N3b3JkXCIsIGlkOiBcInJlcGVhdF9wYXNzd29yZFwiLCBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGlucHV0LWxnXCJ9KSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIG9uQ2xpY2s6IHRoaXMuc2lnbnVwLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi1sZ1wiLCBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJyxiYWNrZ3JvdW5kQ29sb3I6JyMxY2EzZmQnLCBiYWNrZ3JvdW5kSW1hZ2U6ICdsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCAjMDA5NmZmIDAlLCAjMDA1ZGZmIDEwMCUpJyxib3JkZXJSYWRpdXM6Myxmb250RmFtaWx5Oidwcm94aW1hLW5vdmEnLGZvbnRXZWlnaHQ6J2JvbGQnfX0sIFwiU2lnbiBVcFwiKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgKSwgXG5cbiAgICAgIFJlYWN0LkRPTS5kaXYoe2lkOiBcIlwiLCBzdHlsZToge3Bvc2l0aW9uOidhYnNvbHV0ZScsekluZGV4OictMicsdG9wOjAsbGVmdDowfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiXCIsIHN0eWxlOiB7bWFyZ2luTGVmdDowLHdpZHRoOicxMjAlJyxkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgaW1nc18xLCBcbiAgICAgICAgaW1nc18yXG4gICAgICAgIClcbiAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIFNwaW5uZXJcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBjaXJjbGVTdHlsZT0odGhpcy5wcm9wcy5jaXJjbGVTdHlsZSkgPyB0aGlzLnByb3BzLmNpcmNsZVN0eWxlIDoge31cbiAgICBzcGlubmVyU3R5bGU9dGhpcy5wcm9wcy5zcGlubmVyU3R5bGUgPyB0aGlzLnByb3BzLnNwaW5uZXJTdHlsZSA6IHt9XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJzcGlubmVyXCIsIHN0eWxlOiBzcGlubmVyU3R5bGV9LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInNwaW5uZXItY29udGFpbmVyIGNvbnRhaW5lcjFcIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUxXCIsIHN0eWxlOiBjaXJjbGVTdHlsZX0pLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlMlwiLCBzdHlsZTogY2lyY2xlU3R5bGV9KSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZTNcIiwgc3R5bGU6IGNpcmNsZVN0eWxlfSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGU0XCIsIHN0eWxlOiBjaXJjbGVTdHlsZX0pXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwic3Bpbm5lci1jb250YWluZXIgY29udGFpbmVyMlwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZTFcIiwgc3R5bGU6IGNpcmNsZVN0eWxlfSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUyXCIsIHN0eWxlOiBjaXJjbGVTdHlsZX0pLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlM1wiLCBzdHlsZTogY2lyY2xlU3R5bGV9KSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZTRcIiwgc3R5bGU6IGNpcmNsZVN0eWxlfSlcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJzcGlubmVyLWNvbnRhaW5lciBjb250YWluZXIzXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlMVwiLCBzdHlsZTogY2lyY2xlU3R5bGV9KSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZTJcIiwgc3R5bGU6IGNpcmNsZVN0eWxlfSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUzXCIsIHN0eWxlOiBjaXJjbGVTdHlsZX0pLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlNFwiLCBzdHlsZTogY2lyY2xlU3R5bGV9KVxuICAgICAgICApXG4gICAgICApXG5cbiAgICApXG4gIH0sXG59KVxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbnZhciBFZGl0VGVtcGxhdGVWaWV3ID0gcmVxdWlyZSgnLi9lZGl0X3RlbXBsYXRlLmpzLm1pbi5qcycpXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vVGVtcGxhdGVzXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNlbGVjdGVkVGVtcGxhdGU6IDAsXG4gICAgICBlZGl0TW9kZTogZmFsc2VcbiAgICB9XG4gIH0sXG5cbiAgY2hhbmdlTW9kZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7ZWRpdE1vZGU6ICF0aGlzLnN0YXRlLmVkaXRlTW9kZX0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICB0ZW1wbGF0ZVZpZXcgPSAoIXRoaXMuc3RhdGUuZWRpdE1vZGUpID8gVGVtcGxhdGVWaWV3KHtjaGFuZ2VNb2RlOiB0aGlzLmNoYW5nZU1vZGV9KSA6IEVkaXRUZW1wbGF0ZVZpZXcobnVsbClcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtoZWlnaHQ6JzEwMCUnfX0sIFxuICAgICAgICAgIFRlbXBsYXRlU2lkZU1lbnUobnVsbCksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtOVwiLCBzdHlsZToge3BhZGRpbmc6MCxoZWlnaHQ6JzEwMCUnfX0sIFxuICAgICAgICAgICAgICB0ZW1wbGF0ZVZpZXdcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxuXG52YXIgVGVtcGxhdGVWaWV3ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnVGVtcGxhdGVWaWV3JyxcbiAgY2hhbmdlTW9kZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcm9wcy5jaGFuZ2VNb2RlKClcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsIHBhbmVsLWluZm9cIiwgc3R5bGU6IHt3aWR0aDonMTAwJScsaGVpZ2h0OicxMDAlJyxib3JkZXI6MH19LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWhlYWRpbmdcIn0sIFxuICAgICAgICAgIFwiVGVtcGxhdGUgTmFtZVwiLCAgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgb25DbGljazogdGhpcy5jaGFuZ2VNb2RlLCBcbiAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi14c1wiLCBcbiAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJyxmbG9hdDoncmlnaHQnLG1hcmdpblRvcDonMHB4J319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGVuY2lsLXNxdWFyZVwifSksIFwiIMKgIEVkaXQgVGVtcGxhdGVcIilcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1ib2R5XCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmg0KG51bGwsIFwiRm9sbG93dXAgLSBQcm9zcGVjdGluZyBTQUFTIE91dHJlYWNoXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge21hcmdpbkJvdHRvbTonMCd9LCBjbGFzc05hbWU6IFwidGV4dC1tdXRlZFwifSwgXCJDcmVhdGVkIGJ5IE1hcmsgb24gSnVsLiAyMSwgMjAxNFwiKSwgXG4gICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW5Ub3A6JzAnfSwgY2xhc3NOYW1lOiBcInRleHQtbXV0ZWRcIn0sIFwibGFzdCB1cGRhdGVkIDcgZGF5cyBhZ29cIiksIFxuICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0XCJ9LCBcblxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1ib2R5XCJ9LCBcbiAgICAgICAgICBcIjE1IG1pbnV0ZXMgdG8gZ2V0IGNvbXBhbnlfbmFtZSBtb3JlIGN1c3RvbWVyc1wiICsgJyAnICtcbiAgICAgICAgICBcIkhleSBmaXJzdF9uYW1lLFwiICsgJyAnICtcblxuICAgICAgICAgIFwiV291bGQgeW91IGxpa2UgdG8gaGVhciBhbiBpZGVhIGZvciBhIDE1IG1pbnV0ZSBoYWNrIHRoYXQgY291bGQgc2lnbmlmaWNhbnRseSBpbmNyZWFzZSB0aGUgbnVtYmVyIG9mIHByb3NwZWN0cyB5b3VyIHNhbGVzIHBlb3BsZSBoYXZlIGFjY2VzcyB0byA/XCIgKyAnICcgK1xuICAgICAgICAgICBcbiAgICAgICAgICBcIlJlY2VudGx5IG9uZSBvZiBvdXIgQjJCIGNsaWVudHMgc2F3IGEgaHVnZSBpbmNyZWFzZSBpbiB0cmlhbCBzaWduIHVwcyBhZnRlciB3b3JraW5nIHdpdGggdXMuIGZpcnN0X25hbWUsIGxldHMgc2NoZWR1bGUgYSAxNSBtaW51dGUgY2FsbCB0aGlzIHdlZWsgdG8gc2VlIGlmIHRoaXMgd291bGQgYmUgYSBnb29kIGZpdCBmb3IgYm90aCBvZiB1cy5cIiArICcgJyArXG4gICAgICAgICAgIFxuICAgICAgICAgIFwiV2hhdCB0aGUgYmVzdCB0aW1lIGZvciB5b3UgdGhpcyB3ZWVrID9cIiArICcgJyArXG4gICAgICAgICAgIFxuICAgICAgICAgIFwiLS1cIiArICcgJyArXG4gICAgICAgICAgXCJNYXJrXCIgKyAnICcgKyBcbiAgICAgICAgICBcIkN1c3RvbWVyb1wiICsgJyAnICtcbiAgICAgICAgICBcIm1hcmtAY3VzdG9tZXJvaHEuY29tXCJcbiAgICAgICAgICBcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gICAgKTtcbiAgfSxcbn0pO1xuXG52YXIgVGVtcGxhdGVTaWRlTWVudSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1RlbXBsYXRlU2lkZU1lbnUnLFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0ZW1wbGF0ZXM6IFtdLFxuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgLy9BamF4IFJlcXVlc3QgRm9yIFRlbXBsYXRlc1xuICAgIC8qXG4gICAgICQuYWpheCh7XG4gICAgICB1cmw6JycsXG4gICAgICBoZWFkZXJzOiBcIlwiLFxuICAgICAgZGF0YTogXCJcIixcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKCkge1xuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbigpIHtcbiAgICAgIH1cbiAgICAgfSk7XG4gICAgKi9cbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHRlbXBsYXRlcyA9IFtdXG4gICAgZm9yKGk9MDtpPCB0aGlzLnN0YXRlLnRlbXBsYXRlcy5sZW5ndGg7IGkrKylcbiAgICAgIHRlbXBsYXRlcy5wdXNoKFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJsaXN0LWdyb3VwLWl0ZW1cIn0sIFwidGVtcGxhdGVzW2ldLm5hbWVcIikpXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtM1wiLCBzdHlsZToge3BhZGRpbmc6JzAnLCBib3JkZXJSaWdodDonMXB4IHNvbGlkICNkZGQnLGhlaWdodDonMTAwJScsdGV4dEFsaWduOidjZW50ZXInfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwgcGFuZWwtZGVmYXVsdFwiLCBzdHlsZToge2JvcmRlcjowfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1oZWFkaW5nXCIsIHN0eWxlOiB7aGVpZ2h0OjYwfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7ZmxvYXQ6J2xlZnQnLGZvbnRTaXplOjIwLGZvbnRXZWlnaHQ6J2JvbGQnfX0sIFxuICAgICAgICAgICAgICBcIlRlbXBsYXRlc1wiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgXCIsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0J319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wbHVzXCJ9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcImxpc3QtZ3JvdXBcIiwgc3R5bGU6IHt0ZXh0QWxpZ246J2xlZnQnfX0sIFxuICAgICAgICAgICAgdGVtcGxhdGVzXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvL1RlbXBsYXRlc01lbnVcbiAgdG9nZ2xlVGVtcGxhdGVFZGl0TWVudTogZnVuY3Rpb24oY3VycmVudFRlbXBsYXRlKSB7XG4gICAgdGhpcy5wcm9wcy50b2dnbGVUZW1wbGF0ZUVkaXRNZW51KGN1cnJlbnRUZW1wbGF0ZSlcbiAgfSxcblxuICBjcmVhdGVUZW1wbGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcm9wcy50b2dnbGVUZW1wbGF0ZUVkaXRNZW51KHtcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgYm9keTonJyxcbiAgICAgIHN1YmplY3Q6JycsXG4gICAgICBlZGl0TW9kZTp0cnVlLFxuICAgICAgbmV3VGVtcGxhdGU6IHRydWVcbiAgICB9LCB0cnVlKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLnByb3BzLnRlbXBsYXRlcylcbiAgICB0ZW1wbGF0ZXMgPSBbXVxuICAgIGZvcihpPTA7aTwgdGhpcy5wcm9wcy50ZW1wbGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRlbXBsYXRlcy5wdXNoKFxuICAgICAgICBUZW1wbGF0ZUxpc3RJdGVtKHtcbiAgICAgICAgICB0b2dnbGVUZW1wbGF0ZUVkaXRNZW51OiB0aGlzLnRvZ2dsZVRlbXBsYXRlRWRpdE1lbnUsIFxuICAgICAgICAgIHRlbXBsYXRlOiB0aGlzLnByb3BzLnRlbXBsYXRlc1tpXX0pXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJcIiwgc3R5bGU6IHtwYWRkaW5nOicwJywgaGVpZ2h0OicxMDAlJyx0ZXh0QWxpZ246J2NlbnRlcid9fSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0XCIsIFxuICAgICAgICAgICAgIHN0eWxlOiB7Ym9yZGVyUmlnaHQ6MCxib3JkZXJSYWRpdXM6MCxoZWlnaHQ6JzEwMCUnLCBvdmVyZmxvdzonYXV0byd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWhlYWRpbmdcIiwgc3R5bGU6IHtoZWlnaHQ6NDB9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtmbG9hdDonbGVmdCcsZm9udFNpemU6MTQsZm9udFdlaWdodDonYm9sZCd9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZmlsZS10ZXh0LW9cIn0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7bWFyZ2luTGVmdDo1fX0sIFwiVGVtcGxhdGVzXCIpXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14c1wiLCBcbiAgICAgICAgICAgICAgb25DbGljazogdGhpcy5jcmVhdGVUZW1wbGF0ZSwgXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7bWFyZ2luTGVmdDo1fX0sIFwiQ3JlYXRlIFRlbXBsYXRlXCIpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cFwiLCBcbiAgICAgICAgICAgICAgc3R5bGU6IHt0ZXh0QWxpZ246J2xlZnQnfX0sIFxuICAgICAgICAgICAgdGVtcGxhdGVzXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KTtcblxudmFyIFRlbXBsYXRlTGlzdEl0ZW0gPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdUZW1wbGF0ZUxpc3RJdGVtJyxcbiAgdG9nZ2xlVGVtcGxhdGVFZGl0TWVudTogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2codGhpcy5wcm9wcy50ZW1wbGF0ZSlcbiAgICB0ZW1wbGF0ZSA9IHRoaXMucHJvcHMudGVtcGxhdGVcbiAgICB0ZW1wbGF0ZS5lZGl0TW9kZSA9IGZhbHNlXG4gICAgdGhpcy5wcm9wcy50b2dnbGVUZW1wbGF0ZUVkaXRNZW51KHRlbXBsYXRlKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYobnVsbCwgXG4gICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgIHN0eWxlOiB7Ym9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHJnYigyMjEsIDIyMSwgMjIxKScscGFkZGluZ1RvcDo1LHBhZGRpbmdCb3R0b206MH0sIFxuICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZVRlbXBsYXRlRWRpdE1lbnUsIFxuICAgICAgICAgICBjbGFzc05hbWU6IFwibGlzdC1ncm91cC1pdGVtXCJ9LCBcbiAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICB0aGlzLnByb3BzLnRlbXBsYXRlLm5hbWVcbiAgICAgICAgICAgKSwgXG4gICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBcIlN1YmplY3Q6XCIsIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwidGV4dCB0ZXh0LW11dGVkXCJ9LCBcbiAgICAgICAgICAgICBcIiBcIiArIHRoaXMucHJvcHMudGVtcGxhdGUuc3ViamVjdFxuICAgICAgICAgICApKVxuICAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIFNpZ25hbERldGFpbFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjdXJyZW50U2lnbmFsOiAnQ29tcGFueVNpZ25hbCcsXG4gICAgICBzaWduYWxzOiBbXSxcbiAgICAgIC8vYWxsUHJvc3BlY3RlZDogdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZVJlcG9ydC5wcm9zcGVjdGVkLFxuICAgICAgY29tcGFueUNvdW50OiAnficsXG4gICAgICBwZW9wbGVDb3VudDogJ34nXG4gICAgfVxuICB9LFxuXG4gIGdldFNpZ25hbHM6IGZ1bmN0aW9uKGN1cnJlbnRTaWduYWwpIHtcbiAgICB2YXIgdGhpc3NzcyA9IHRoaXM7XG4gICAgY3VycmVudFJlcG9ydCA9IHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGVSZXBvcnQub2JqZWN0SWRcbiAgICBjdXJyZW50UHJvZmlsZVJlcG9ydCA9IGFwcENvbmZpZy5wb2ludGVyKCdTaWduYWxSZXBvcnQnLCBjdXJyZW50UmVwb3J0KVxuXG4gICAgcXJ5ID0ge1xuICAgICAgd2hlcmU6SlNPTi5zdHJpbmdpZnkoeyByZXBvcnQ6IGN1cnJlbnRQcm9maWxlUmVwb3J0IH0pLFxuICAgICAgaW5jbHVkZTonY29tcGFueV9zaWduYWwsY29tcGFueV9zaWduYWwuc2lnbmFscyxzaWduYWxzJyxcbiAgICAgIG9yZGVyOictY3JlYXRlZEF0JyxcbiAgICAgIGxpbWl0OjEwMFxuICAgIH1cblxuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzLycrY3VycmVudFNpZ25hbCxcbiAgICAgIGRhdGE6IHFyeSxcbiAgICAgIHR5cGU6J0dFVCcsXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5wYXJzZUhlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1NJR05BTCBERVRBSUwnKVxuICAgICAgICBjb25zb2xlLmxvZyhyZXMucmVzdWx0cylcbiAgICAgICAgY29uc29sZS5sb2coJ1BST0ZJTEUgUkVQT1JUJylcbiAgICAgICAgY29uc29sZS5sb2codGhpc3Nzcy5wcm9wcy5jdXJyZW50UHJvZmlsZVJlcG9ydC5vYmplY3RJZClcbiAgICAgICAgdGhpc3Nzcy5zZXRTdGF0ZSh7c2lnbmFsczogcmVzLnJlc3VsdHN9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlVGV4dCkgfVxuICAgIH0pO1xuICB9LFxuXG4gIHNldENvbXBhbnlTdGF0ZTogZnVuY3Rpb24oKSB7IHRoaXMuc2V0U3RhdGUoe2N1cnJlbnRTaWduYWw6ICdDb21wYW55U2lnbmFsJ30pIH0sIFxuICBzZXRQZXJzb25TdGF0ZTogZnVuY3Rpb24oKSB7IHRoaXMuc2V0U3RhdGUoe2N1cnJlbnRTaWduYWw6ICdQZW9wbGVTaWduYWwnfSkgfSwgXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGVSZXBvcnQub2JqZWN0SWQpXG4gICAgdGhpcy5nZXRTaWduYWxzKHRoaXMuc3RhdGUuY3VycmVudFNpZ25hbClcbiAgICBxcnkgPSB7XG4gICAgICB3aGVyZTpKU09OLnN0cmluZ2lmeSh7IHJlcG9ydDogY3VycmVudFByb2ZpbGVSZXBvcnQgfSksXG4gICAgICBjb3VudDogMVxuICAgIH1cbiAgICB2YXIgdGhpc3MgPSB0aGlzO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUGVvcGxlU2lnbmFsJyxcbiAgICAgIGRhdGE6IHFyeSxcbiAgICAgIGhlYWRlcnM6IGFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IHRoaXNzLnNldFN0YXRlKHtwZW9wbGVDb3VudDogcmVzLmNvdW50fSl9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2VUZXh0KSB9LFxuICAgIH0pXG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL0NvbXBhbnlTaWduYWwnLFxuICAgICAgZGF0YTogcXJ5LFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgdGhpc3Muc2V0U3RhdGUoe2NvbXBhbnlDb3VudDogcmVzLmNvdW50fSl9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2VUZXh0KSB9LFxuICAgIH0pXG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbFVwZGF0ZTogZnVuY3Rpb24obmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcbiAgICBpZih0aGlzLnN0YXRlLmN1cnJlbnRTaWduYWwgIT0gbmV4dFN0YXRlLmN1cnJlbnRTaWduYWwpXG4gICAgICB0aGlzLmdldFNpZ25hbHMobmV4dFN0YXRlLmN1cnJlbnRTaWduYWwpXG4gIH0sXG5cbiAgcmV0dXJuVG9DYWxlbmRhclZpZXc6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdyZXR1cm4gdG8gY2FsZW5kYXIgdmlldycpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnQUxMIFBST1NQRUNURUQnKVxuICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUuYWxsUHJvc3BlY3RlZClcbiAgICBjb25zb2xlLmxvZygnQ1VSUkVOVCBTSUdOQUwnKVxuICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUuY3VycmVudFNpZ25hbClcbiAgICBjb25zb2xlLmxvZygnU0lHTkFMJylcbiAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLnNpZ25hbHMpXG4gICAgc2lnbmFscyA9IFtdXG4gICAgZm9yKGk9MDtpPCB0aGlzLnN0YXRlLnNpZ25hbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmKHRoaXMuc3RhdGUuY3VycmVudFNpZ25hbCA9PSAnQ29tcGFueVNpZ25hbCcpXG4gICAgICAgIHNpZ25hbHMucHVzaChDb21wYW55SGlyaW5nU2lnbmFsUm93KHtzaWduYWw6IHRoaXMuc3RhdGUuc2lnbmFsc1tpXSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxQcm9zcGVjdGVkOiB0aGlzLnN0YXRlLmFsbFByb3NwZWN0ZWR9KSlcbiAgICAgIGVsc2VcbiAgICAgICAgc2lnbmFscy5wdXNoKFBlb3BsZVNpZ25hbFJvdyh7c2lnbmFsOiB0aGlzLnN0YXRlLnNpZ25hbHNbaV0sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsUHJvc3BlY3RlZDogdGhpcy5zdGF0ZS5hbGxQcm9zcGVjdGVkfSkpXG4gICAgfVxuXG4gICAgY3VycmVudFByb2ZpbGVSZXBvcnQgPSB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlUmVwb3J0XG4gICAgY29tcGFueUJ0biA9ICh0aGlzLnN0YXRlLmN1cnJlbnRTaWduYWwgPT0gXCJDb21wYW55U2lnbmFsXCIpID8gXCJidG4gYnRuLXhzIGJ0bi1kZWZhdWx0IGFjdGl2ZVwiIDogXCJidG4gYnRuLXhzIGJ0bi1kZWZhdWx0XCJcbiAgICBwZW9wbGVCdG4gPSAodGhpcy5zdGF0ZS5jdXJyZW50U2lnbmFsID09IFwiUGVvcGxlU2lnbmFsXCIpID8gXCJidG4gYnRuLXhzIGJ0bi1kZWZhdWx0IGFjdGl2ZVwiIDogXCJidG4gYnRuLXhzIGJ0bi1kZWZhdWx0XCJcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lclwiLCBzdHlsZToge2hlaWdodDozNTYscGFkZGluZ0xlZnQ6MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OjAsd2lkdGg6JzEwMCUnfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2hlaWdodDo0NCxib3JkZXJCb3R0b206J3NvbGlkIDFweCByZ2IoMjIxLCAyMjEsIDIyMSknfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNCh7b25DbGljazogdGhpcy5yZXR1cm5Ub0NhbGVuZGFyVmlldywgXG4gICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J2xlZnQnLGN1cnNvcjoncG9pbnRlcicsbWFyZ2luVG9wOjcsZm9udFdlaWdodDoyMDAsXG4gICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ0xlZnQ6MjAscGFkZGluZ1RvcDo1LGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2FsZW5kYXJcIiwgc3R5bGU6IHttYXJnaW5SaWdodDo1fX0pLCBcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm5hbWVcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7Zm9udFNpemU6MTMscGFkZGluZ0xlZnQ6NSxwYWRkaW5nVG9wOjUsZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2hldnJvbi1yaWdodFwiLCBzdHlsZToge2ZvbnRTaXplOjl9fSksIFwiIMKgXCIsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG9jay1vXCJ9KSwgXCIgwqBcIiwgXG4gICAgICAgICAgICBtb21lbnQoY3VycmVudFByb2ZpbGVSZXBvcnQuY3JlYXRlZEF0KS5mcm9tTm93KCksIFwiIMKgXCJcbiAgICAgICAgICApLCBcblxuICAgICAgICAgICh0aGlzLnN0YXRlLmFsbFByb3NwZWN0ZWQpID9cbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLGZsb2F0OidyaWdodCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6MTAsbWFyZ2luVG9wOjEwfSwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHMgZGlzYWJsZWRcIn0sIFxuICAgICAgICAgICAgXCJQcm9zcGVjdGVkXCJcbiAgICAgICAgICApIDpcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLGZsb2F0OidyaWdodCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6MTAsbWFyZ2luVG9wOjEwfSwgXG4gICAgICAgICAgICAgb25DbGljazogdGhpcy5wcm9zcGVjdEFsbCwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHNcIn0sIFxuICAgICAgICAgICAgXCJQcm9zcGVjdCBBbGxcIlxuICAgICAgICAgICksIFxuICAgICAgICAgIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cFwiLCBcbiAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6MTAsbWFyZ2luUmlnaHQ6MTB9LCBcbiAgICAgICAgICAgICAgICdkYXRhLXRvZ2dsZSc6IFwiYnV0dG9uc1wifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogcGVvcGxlQnRuLCBzdHlsZToge3dpZHRoOjUwfSwgXG4gICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuc2V0UGVyc29uU3RhdGV9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdXNlclwifSksIFwiIMKgXCIsIFxuICAgICAgICAgICAgICB0aGlzLnN0YXRlLnBlb3BsZUNvdW50XG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBjb21wYW55QnRuLCBzdHlsZToge3dpZHRoOjUwfSwgXG4gICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuc2V0Q29tcGFueVN0YXRlfSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWJ1aWxkaW5nXCJ9KSwgXCIgwqBcIiwgXG4gICAgICAgICAgICAgIHRoaXMuc3RhdGUuY29tcGFueUNvdW50XG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApLCBcblxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTEyXCIsIHN0eWxlOiB7cGFkZGluZ0xlZnQ6MCxwYWRkaW5nUmlnaHQ6MH19LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge292ZXJmbG93OidhdXRvJyxoZWlnaHQ6MzU2fX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRhYmxlKHtjbGFzc05hbWU6IFwidGFibGUgdGFibGUtc3RyaXBlZFwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50aGVhZChudWxsLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInLHdpZHRoOjkwfX0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG9jay1vXCJ9KVxuICAgICAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3dpZHRoOjIwMH19LCBcbiAgICAgICAgICAgICAgICAgICh0aGlzLnN0YXRlLmN1cnJlbnRTaWduYWwgPT0gJ0NvbXBhbnlTaWduYWwnKSA/ICBcbiAgICAgICAgICAgICAgICAgICAgXCJDb21wYW5pZXNcIiA6IFwiUGVvcGxlXCJcbiAgICAgICAgICAgICAgICApLCBcblxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiU291cmNlIFwiKSwgXG5cbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7d2lkdGg6OTAsdGV4dEFsaWduOidjZW50ZXInfX0sIFwiIFwiKVxuXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGJvZHkoe2NsYXNzTmFtZTogXCJyZXBvcnRzXCJ9LCBcbiAgICAgICAgICAgICAgICBzaWduYWxzXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9LFxuICBwcm9zcGVjdEFsbDogZnVuY3Rpb24oKSB7XG4gICAgY29uc29sZS5sb2codGhpcy5zdGF0ZS5jdXJyZW50U2lnbmFsKVxuICAgIGNvbnNvbGUubG9nKHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGVSZXBvcnQub2JqZWN0SWQpXG4gICAgcmVwb3J0X2lkID0gdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZVJlcG9ydC5vYmplY3RJZFxuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgJC5hamF4KHtcbiAgICAgIC8vdXJsOiAnaHR0cDovLzEyNy4wLjAuMTo1MDAwL3NpZ25hbF90b19wcm9zcGVjdCcsXG4gICAgICB1cmw6ICdodHRwczovL25hbWVsZXNzLXJldHJlYXQtMzUyNS5oZXJva3VhcHAuY29tL3NpZ25hbF90b19wcm9zcGVjdCcsXG4gICAgICBkYXRhOiB7YWxsX3NpZ25hbHM6dHJ1ZSwgcmVwb3J0X2lkOiByZXBvcnRfaWQsIFxuICAgICAgICAgICAgIHNpZ25hbF90eXBlOiB0aGlzcy5zdGF0ZS5jdXJyZW50U2lnbmFsfSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyBjb25zb2xlLmxvZyhyZXMpfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlVGV4dCl9LFxuICAgIH0pXG4gIH1cbn0pO1xuXG52YXIgQ29tcGFueUhpcmluZ1NpZ25hbFJvdyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0NvbXBhbnlIaXJpbmdTaWduYWxSb3cnLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIC8vY29uc29sZS5sb2coY29tcGFueSlcbiAgICBjb21wYW55ID0gKHRoaXMucHJvcHMuc2lnbmFsKSA/IHRoaXMucHJvcHMuc2lnbmFsIDoge31cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLnRyKHtzdHlsZToge319LCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyx3aWR0aDoxMjB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIFxuICAgICAgICAgICAgbW9tZW50KHRoaXMucHJvcHMuc2lnbmFsLmNyZWF0ZWRBdCkuZnJvbU5vdygpXG4gICAgICAgICAgKVxuICAgICAgICApLCBcblxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIGNvbXBhbnkubmFtZSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBjb21wYW55LnJldmVudWUpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIn0sIGNvbXBhbnkud2Vic2l0ZVVybCkpLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgY29tcGFueS5jaXR5KVxuICAgICAgICApLCBcblxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgbW9tZW50KGNvbXBhbnkudGltZXN0YW1wKS5mb3JtYXQoJ2xsJylcbiAgICAgICAgKSwgXG5cbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgICh0aGlzLnByb3BzLmFsbFByb3NwZWN0ZWQpID8gXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHMgZGlzYWJsZWRcIiwgXG4gICAgICAgICAgICBzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnfX0sIFxuICAgICAgICAgICAgXCJQcm9zcGVjdGVkXCJcbiAgICAgICAgICApIDogUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2VzcyBidG4teHNcIiwgXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnR1cm5Db21wYW55U2lnbmFsVG9Qcm9zcGVjdCwgXG4gICAgICAgICAgICBzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnfX0sIFxuICAgICAgICAgICAgXCJQcm9zcGVjdFwiXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9LFxuICB0dXJuQ29tcGFueVNpZ25hbFRvUHJvc3BlY3Q6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0aGlzcyA9IHRoaXM7XG4gICAgJC5hamF4KHtcbiAgICAgIC8vdXJsOiAnaHR0cHM6Ly9uYW1lbGVzcy1yZXRyZWF0LScsXG4gICAgICAvL3VybDogJ2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC9zaWduYWxfdG9fcHJvc3BlY3QnLFxuICAgICAgdXJsOiAnaHR0cHM6Ly9uYW1lbGVzcy1yZXRyZWF0LTM1MjUuaGVyb2t1YXBwLmNvbS9zaWduYWxfdG9fcHJvc3BlY3QnLFxuICAgICAgZGF0YToge2FsbF9zaWduYWxzOmZhbHNlLCBzaWduYWxfaWQ6IGNvbXBhbnkub2JqZWN0SWQsXG4gICAgICAgICAgICAgc2lnbmFsX3R5cGU6ICdDb21wYW55U2lnbmFsJ30sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgY29uc29sZS5sb2cocmVzKX0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUubG9nKGVyci5yZXNwb25zZVRleHQpfSxcbiAgICB9KVxuICB9XG59KVxuXG52YXIgUGVvcGxlU2lnbmFsUm93ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnUGVvcGxlU2lnbmFsUm93JyxcbiAgdHVyblNpZ25hbEludG9Qcm9zcGVjdDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRoaXNzID0gdGhpcztcbiAgICBjb25zb2xlLmxvZyh0aGlzLnByb3BzLnNpZ25hbClcbiAgICAkLmFqYXgoe1xuICAgICAgLy91cmw6J2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC9zaWduYWxfdG9fcHJvc3BlY3QnLFxuICAgICAgdXJsOidodHRwOi8vbmFtZWxlc3MtcmV0cmVhdC0zNTI1Lmhlcm9rdWFwcC5jb20vc2lnbmFsX3RvX3Byb3NwZWN0JyxcbiAgICAgIGRhdGE6IHtzaWduYWxfaWQ6IHRoaXNzLnByb3BzLnNpZ25hbC5vYmplY3RJZCwgc2lnbmFsX3R5cGU6J1Blb3BsZVNpZ25hbCcsXG4gICAgICAgICAgICAgYWxsX3NpZ25hbHM6ZmFsc2V9LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKSB7IGNvbnNvbGUubG9nKHJlcykgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlVGV4dCkgfSBcbiAgICB9KVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgLy9jb25zb2xlLmxvZyhjb21wYW55KVxuICAgIHBlb3BsZSA9ICh0aGlzLnByb3BzLnNpZ25hbCkgPyB0aGlzLnByb3BzLnNpZ25hbCA6IHt9XG4gICAgY29tcGFueSA9IHBlb3BsZS5jb21wYW55X3NpZ25hbFxuICAgIHRpdGxlID0gKHBlb3BsZS50aXRsZSkgPyBwZW9wbGUudGl0bGUuc3BsaXQoJy0nKVsxXSA6IFwiXCJcbiAgICB0aXRsZSA9IHRpdGxlLnNwbGl0KCcgYXQnKVswXVxuICAgIC8vY2l0eSA9IHBlb3BsZS5zcGxpdCgnLScpWzBdXG4gICAgY2l0eSA9IFwiXCJcbiAgICBjb25zb2xlLmxvZyhwZW9wbGUpXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS50cih7c3R5bGU6IHt9fSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcicsd2lkdGg6MTIwfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBcbiAgICAgICAgICAgIG1vbWVudCh0aGlzLnByb3BzLnNpZ25hbC5jcmVhdGVkQXQpLmZyb21Ob3coKVxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG5cbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBwZW9wbGUubGlua190ZXh0ICsgXCIgLSBcIiwgXCIgXCIsIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2ZvbnRTdHlsZTonaXRhbGljJ319LCBcbiAgICAgICAgICAgICAgdGl0bGUpKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCJ9LCBjb21wYW55LndlYnNpdGVVcmwpKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIGNvbXBhbnkubmFtZSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBjb21wYW55LmNpdHkpXG4gICAgICAgICksIFxuXG4gICAgICAgIFJlYWN0LkRPTS50ZChudWxsLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgY29tcGFueS5zaWduYWxzWzBdLmNsYXNzTmFtZSksIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBjb21wYW55LnNpZ25hbHNbMF0uam9iX3RpdGxlKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIGNvbXBhbnkuc2lnbmFsc1swXS5zdW1tYXJ5KVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKG51bGwsIFxuICAgICAgICAgIGNvbXBhbnkudGltZXN0YW1wLCBcbiAgICAgICAgICBtb21lbnQoY29tcGFueS50aW1lc3RhbXApLmZvcm1hdCgnbGwnKVxuICAgICAgICApLCBcblxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgKHRoaXMucHJvcHMuYWxsUHJvc3BlY3RlZCkgPyBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14cyBkaXNhYmxlZFwiLCBcbiAgICAgICAgICAgIHN0eWxlOiB7Zm9udFdlaWdodDonYm9sZCd9fSwgXG4gICAgICAgICAgICBcIlByb3NwZWN0ZWRcIlxuICAgICAgICAgICAgKSA6IFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzXCIsIFxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMudHVyblNpZ25hbEludG9Qcm9zcGVjdCwgXG4gICAgICAgICAgICBzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnfX0sIFxuICAgICAgICAgICAgXCJQcm9zcGVjdFwiXG4gICAgICAgICAgKVxuICAgICAgICAgIFxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KVxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIFNpZ25hbENhbGVuZGFyXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlcG9ydHMgOiBbXSxcbiAgICAgIGN1cnJlbnRUZXJyaXRvcnk6J2FsbCcsXG4gICAgfVxuICB9LFxuXG4gIGdldFNpZ25hbFJlcG9ydDogZnVuY3Rpb24oY3VycmVudFRlcnJpdG9yeSkge1xuICAgIHRoaXNzc3MgPSB0aGlzO1xuICAgIGlmKGN1cnJlbnRUZXJyaXRvcnkgPT0gXCJhbGxcIil7XG4gICAgICBxcnkgPSB7J3doZXJlJyA6IEpTT04uc3RyaW5naWZ5KHtwcm9maWxlOntcbiAgICAgICAgX190eXBlOidQb2ludGVyJyxcbiAgICAgICAgY2xhc3NOYW1lOidQcm9zcGVjdFByb2ZpbGUnLFxuICAgICAgICBvYmplY3RJZDp0aGlzLnByb3BzLmN1cnJlbnRQcm9maWxlLm9iamVjdElkXG4gICAgICB9LCBpc19wYXJlbnQ6IHRydWUgfSksIG9yZGVyOictY3JlYXRlZEF0J31cbiAgICB9IGVsc2Uge1xuICAgICAgcXJ5ID0geyd3aGVyZScgOiBKU09OLnN0cmluZ2lmeSh7cGFyZW50OlxuICAgICAgICAgICAgYXBwQ29uZmlnLnBvaW50ZXIoJ1NpZ25hbFJlcG9ydCcsIGN1cnJlbnRUZXJyaXRvcnkub2JqZWN0SWQpLCBcbiAgICAgICAgICAgIH0pLCBvcmRlcjonLWNyZWF0ZWRBdCd9XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKHFyeSlcblxuICAgIC8vIEdldCBTaWduYWwgUmVwb3J0cyBPZiBDdXJyZW50IFByb2ZpbGVcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9TaWduYWxSZXBvcnQnLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGRhdGE6IHFyeSxcbiAgICAgIGhlYWRlcnM6YXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMucmVzdWx0cylcbiAgICAgICAgdGhpc3Nzcy5zZXRTdGF0ZSh7cmVwb3J0czogcmVzLnJlc3VsdHN9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmdldFNpZ25hbFJlcG9ydCh0aGlzLnN0YXRlLmN1cnJlbnRUZXJyaXRvcnkpXG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbFVwZGF0ZTogZnVuY3Rpb24obmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcbiAgICBjb25zb2xlLmxvZygnVVBEQVRFRCcpXG4gICAgY29uc29sZS5sb2codGhpcy5zdGF0ZS5jdXJyZW50VGVycml0b3J5KVxuICAgIGNvbnNvbGUubG9nKG5leHRTdGF0ZS5jdXJyZW50VGVycml0b3J5KVxuICAgIC8vaWYodGhpcy5zdGF0ZS5jdXJyZW50VGVycml0b3J5ICE9IG5leHRTdGF0ZS5jdXJyZW50VGVycml0b3J5KVxuICAgIGlmKCFfLmlzRXF1YWwodGhpcy5zdGF0ZS5jdXJyZW50VGVycml0b3J5LCBuZXh0U3RhdGUuY3VycmVudFRlcnJpdG9yeSkpXG4gICAgICB0aGlzLmdldFNpZ25hbFJlcG9ydChuZXh0U3RhdGUuY3VycmVudFRlcnJpdG9yeSlcbiAgfSxcblxuICBhbGxUZXJyaXRvcmllczogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudFRlcnJpdG9yeTogJ2FsbCd9KVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmVwb3J0cyA9ICh0aGlzLnByb3BzLnJlcG9ydHMpID8gdGhpcy5wcm9wcy5yZXBvcnRzIDogW11cblxuICAgIGZvcihpPTA7aTwgdGhpcy5zdGF0ZS5yZXBvcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICByZXBvcnRzLnB1c2goU2lnbmFsUmVwb3J0Um93KHtzZXRDdXJyZW50UmVwb3J0OiB0aGlzLnNldEN1cnJlbnRSZXBvcnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvc3BlY3RTaWduYWxSZXBvcnQ6IHRoaXMucHJvc3BlY3RTaWduYWxSZXBvcnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFZpZXc6IHRoaXMuc2V0Q3VycmVudFZpZXcsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93Q2xpY2s6IHRoaXMucm93Q2xpY2ssIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwb3J0OiB0aGlzLnN0YXRlLnJlcG9ydHNbaV19KSlcbiAgICB9XG5cbiAgICB0ZXJyaXRvcnkgPSAodGhpcy5zdGF0ZS5jdXJyZW50VGVycml0b3J5ID09ICdhbGwnKSA/ICcnIDogJyAtICcrdGhpcy5zdGF0ZS5jdXJyZW50VGVycml0b3J5LnRlcnJpdG9yeVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29udGFpbmVyXCIsIHN0eWxlOiB7cGFkZGluZ0xlZnQ6MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OjAsd2lkdGg6JzEwMCUnfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge2hlaWdodDo0NCxib3JkZXJCb3R0b206J3NvbGlkIDFweCByZ2IoMjIxLCAyMjEsIDIyMSknfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNCh7b25DbGljazogdGhpcy5hbGxUZXJyaXRvcmllcywgXG4gICAgICAgICAgICAgIHN0eWxlOiB7Zm9udFdlaWdodDoyMDAsIGZsb2F0OidsZWZ0JyxjdXJzb3I6J3BvaW50ZXInLG1hcmdpblRvcDo3LFxuICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OjIwLHBhZGRpbmdUb3A6NSwgZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWdsb2JlXCIsIHN0eWxlOiB7bWFyZ2luUmlnaHQ6NX19KSwgXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jdXJyZW50UHJvZmlsZS5uYW1lLCBcbiAgICAgICAgICAgICAgICB0ZXJyaXRvcnlcbiAgICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTEyXCIsIHN0eWxlOiB7cGFkZGluZ0xlZnQ6MCxwYWRkaW5nUmlnaHQ6MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MzU2LG92ZXJmbG93OidhdXRvJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZToge292ZXJmbG93OidhdXRvJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50YWJsZSh7Y2xhc3NOYW1lOiBcInRhYmxlIHRhYmxlLXN0cmlwZWRcIiwgc3R5bGU6IHttYXJnaW5Cb3R0b206MH19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoZWFkKG51bGwsIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvY2stb1wifSksIFwiIExhc3QgUmFuXCJcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7dGV4dEFsaWduOicnLHBhZGRpbmdMZWZ0OjUwfX0sIFxuICAgICAgICAgICAgICAgICAgXCJUZXJyaXRvcnkgTmFtZVwiXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiQ29tcGFueSBTaWduYWxzXCIpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7ZGlzcGxheTonYmxvY2snfX0sIFwiUHJvc3BlY3QgQ29tcGFuaWVzXCIpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7d2lkdGg6MTUwLHRleHRBbGlnbjonY2VudGVyJyxkaXNwbGF5Oidub25lJ319KVxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnRib2R5KHtjbGFzc05hbWU6IFwicmVwb3J0c1wifSwgXG4gICAgICAgICAgICAgICAgcmVwb3J0c1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKTtcbiAgfSxcblxuICBzZXRDdXJyZW50UmVwb3J0OiBmdW5jdGlvbihuZXdSZXBvcnQpIHtcbiAgICB0aGlzLnByb3BzLnNldEN1cnJlbnRSZXBvcnQobmV3UmVwb3J0KVxuICB9LFxuXG4gIHByb3NwZWN0U2lnbmFsUmVwb3J0OiBmdW5jdGlvbihzaWduYWxSZXBvcnQpIHtcbiAgICB0aGlzLnByb3BzLnByb3NwZWN0U2lnbmFsUmVwb3J0KHRoaXMucHJvcHMuY3VycmVudFByb2ZpbGUsIHNpZ25hbFJlcG9ydClcbiAgfSxcblxuICBzZXRUZXJyaXRvcnk6IGZ1bmN0aW9uKHRlcnJpdG9yeSkge1xuICAgIC8vXG4gICAgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudFRlcnJpdG9yeTogdGVycml0b3J5fSlcbiAgfSxcblxuICByb3dDbGljazogZnVuY3Rpb24ocmVwb3J0KSB7XG4gICAgY29uc29sZS5sb2cocmVwb3J0KVxuICAgIGlmKHJlcG9ydC5wcm9zcGVjdGVkKVxuICAgICAgdGhpcy5wcm9wcy5zZXRSZXBvcnQoJ1RlcnJpdG9yeURldGFpbCcsIHJlcG9ydClcbiAgICBlbHNlXG4gICAgICB0aGlzLnNldFRlcnJpdG9yeShyZXBvcnQpXG4gICAgLypcbiAgICBpZih0aGlzLnN0YXRlLnNlbGVjdGVkVGVycml0b3J5ICE9ICdhbGwnKVxuICAgICAgdGhpcy5zZXRDdXJyZW50UmVwb3J0KHJlcG9ydCkgLy8gXG4gICAgZWxzZVxuICAgICAgdGhpcy5zZXRUZXJyaXRvcnkocmVwb3J0KVxuICAgICovXG4gIH1cbn0pO1xuXG52YXIgU2lnbmFsUmVwb3J0Um93ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnU2lnbmFsUmVwb3J0Um93JyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29tcGFueUNvdW50OiAnficsXG4gICAgICBwZW9wbGVDb3VudDogJ34nLFxuICAgICAgbG9hZGluZzogdGhpcy5wcm9wcy5yZXBvcnQuZG9uZSxcbiAgICB9XG4gIH0sXG5cbiAgc2V0VGVycml0b3J5OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnByb3BzLnNldFRlcnJpdG9yeSgnJylcbiAgfSxcblxuICByb3dDbGljazogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcm9wcy5yb3dDbGljayh0aGlzLnByb3BzLnJlcG9ydClcbiAgfSxcblxuICBwcm9zcGVjdFNpZ25hbFJlcG9ydDogZnVuY3Rpb24oZSkge1xuICAgIHRoaXMucHJvcHMucHJvc3BlY3RTaWduYWxSZXBvcnQodGhpcy5wcm9wcy5yZXBvcnQpXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHsgXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBwcm9zcGVjdGVkID0gdGhpcy5wcm9wcy5yZXBvcnQucHJvc3BlY3RlZFxuICAgIGljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWdsb2JlXCJ9KVxuICAgIGljb24gPSBcIlwiXG4gICAgLy9cbiAgICBsb2FkaW5nID0gKHRoaXMuc3RhdGUubG9hZGluZykgPyBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicHJvZmlsZS1sb2FkaW5nXCIsIHN0eWxlOiB7bWFyZ2luTGVmdDozMH19LCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZG91YmxlLWJvdW5jZTFcIiwgc3R5bGU6IHtiYWNrZ3JvdW5kQ29sb3I6JyM1Y2I4NWMnfX0pLCBcbiAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZG91YmxlLWJvdW5jZTJcIiwgc3R5bGU6IHtiYWNrZ3JvdW5kQ29sb3I6JyM1Y2I4NWMnfX0pXG4gICAgICAgICAgKSA6IFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIG9uQ2xpY2s6IHRoaXMucHJvc3BlY3RTaWduYWxSZXBvcnQsIFxuICAgICAgICAgICAgIHN0eWxlOiB7Zm9udFdlaWdodDonYm9sZCcsbWFyZ2luVG9wOjV9LCBcbiAgICAgY2xhc3NOYW1lOiAocHJvc3BlY3RlZCkgPyBcImJ0biBidG4teHMgYnRuLXByaW1hcnkgZGlzYWJsZWRcIiA6IFwiYnRuIGJ0bi14cyBidG4tcHJpbWFyeVwifSwgXG4gICAgICAgICAgICAgKHByb3NwZWN0ZWQpID8gJ1Byb3NwZWN0ZWQnIDogJ1Byb3NwZWN0IEFsbCdcbiAgICAgICAgICApXG4gICAgLy8gaWYgZG9uZSAgLSBsb2FkaW5nXG4gICAgbG9hZGluZyA9ICh0aGlzLnByb3BzLnJlcG9ydC5wcm9zcGVjdGVkKSA/IFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwibGFiZWwgbGFiZWwtc3VjY2Vzc1wifSwgXCIgUHJvc3BlY3RlZFwiKSAgOiBsb2FkaW5nXG4gICAgbG9hZGluZyAgPSBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLXN1Y2Nlc3NcIn0sIFwiIFByb3NwZWN0ZWRcIilcblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udHIoe29uQ2xpY2s6IHRoaXMucm93Q2xpY2ssIHN0eWxlOiB7Y3Vyc29yOidwb2ludGVyJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjoncmlnaHQnLHBhZGRpbmdUb3A6MTV9fSwgXG4gICAgICAgICAgaWNvblxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYobnVsbCwgXG4gICAgICAgICAgICBtb21lbnQodGhpcy5wcm9wcy5yZXBvcnQuY3JlYXRlZEF0KS5mcm9tTm93KClcbiAgICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiB7dGV4dEFsaWduOicnLHBhZGRpbmdMZWZ0OjUwfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5oNihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtZ2xvYmVcIn0pLCBcIsKgXCIsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4obnVsbCwgXG4gICAgICAgICAgICB0aGlzLnByb3BzLnJlcG9ydC50ZXJyaXRvcnlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgICksIFxuICAgICAgICBSZWFjdC5ET00udGQobnVsbCwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1zdWNjZXNzXCJ9LCBcbiAgICAgICAgICAgIHRoaXMucHJvcHMucmVwb3J0LmNvbXBhbnlfY291bnRcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgIFwiwqAgQ29tcGFuaWVzIGZvdW5kLlwiXG4gICAgICAgICAgKVxuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLXN1Y2Nlc3NcIn0sIFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5yZXBvcnQucGVvcGxlX2NvdW50XG4gICAgICAgICAgKSwgXG5cbiAgICAgICAgICAodGhpcy5wcm9wcy5yZXBvcnQucHJvc3BlY3RlZCkgPyBSZWFjdC5ET00uZGl2KHtzdHlsZToge21hcmdpblRvcDo2LHBhZGRpbmc6NiwgZGlzcGxheTonYmxvY2snLHdpZHRoOjE0Nn0sIGNsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1wcmltYXJ5XCJ9LCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZWNrLWNpcmNsZVwifSksIFwiIMKgIFByb3NwZWN0ZWRcIikgOiBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi14c1wiLCBcbiAgICAgICAgICAgIHN0eWxlOiB7YmFja2dyb3VuZEltYWdlOiAnbGluZWFyLWdyYWRpZW50KCM4YWRkNmQsICM2MGIwNDQpJyxtYXJnaW5Ub3A6NH0sIFxuICAgICAgICAgICAgc3R5bGU6IHtiYWNrZ3JvdW5kSW1hZ2U6ICdsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCAjMDA5NmZmIDAlLCAjMDA1ZGZmIDEwMCUpJyxtYXJnaW5Ub3A6NH19LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2xvdWQtZG93bmxvYWRcIn0pLCBcIiDCoFwiICsgJyAnICtcbiAgICAgICAgICAgIFwiRG93bmxvYWQgUHJvc3BlY3RzXCJcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICBcIsKgIFBlb3BsZSBmb3VuZC5cIlxuICAgICAgICAgIClcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6ICh0aGlzLnByb3BzLnJlcG9ydC5kb25lKSA/IHtkaXNwbGF5Oidub25lJ30gOiB7ZGlzcGxheTonbm9uZScscGFkZGluZ1RvcDoxN319LCBcbiAgICAgICAgICBsb2FkaW5nXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIFRpbWVsaW5lRGF5RWxlbWVudFxuICAvLyBUT0RPXG4gIC8vIC0gYWRkIHByb3NwZWN0IGxpc3QgcHJvZ3Jlc3Npb25cbiAgLy8gLSBhZGQgc2NoZWR1bGVkIGZvbGxvd3VwXG4gIC8vXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgLy8gXG4gICAgcmV0dXJuIHtcbiAgICAgIGZvbGxvd3VwQ29tcGxldGVkOiAwLFxuICAgIH1cbiAgfSxcblxuICBhZGRGb2xsb3d1cDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcm9wcy5hZGRGb2xsb3d1cCh0aGlzLnByb3BzLmRheUNvdW50KVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgaWYodGhpcy5wcm9wcy5hZGRUZW1wbGF0ZU1vZGUpIHtcbiAgICAgIG1vZGUgPSBFZGl0VGVtcGxhdGUoe2FkZEZvbGxvd3VwOiB0aGlzLnByb3BzLmFkZEZvbGxvd3VwLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVGb2xsb3d1cDogdGhpcy5wcm9wcy5zYXZlRm9sbG93dXAsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRm9sbG93dXA6IHRoaXMucHJvcHMucmVtb3ZlRm9sbG93dXAsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5Q291bnQ6IHRoaXMucHJvcHMuZGF5Q291bnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVzOiB0aGlzLnByb3BzLnRlbXBsYXRlc30pXG4gICAgfSBlbHNlIHtcbiAgICAgIG1vZGUgPSBUZW1wbGF0ZUZvbGxvd3VwKHtjdXJyZW50VGVtcGxhdGU6IHRoaXMucHJvcHMuY3VycmVudFRlbXBsYXRlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0Rm9sbG93dXA6IHRoaXMucHJvcHMuZWRpdEZvbGxvd3VwLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlDb3VudDogdGhpcy5wcm9wcy5kYXlDb3VudCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJhdGNoOiB0aGlzLnByb3BzLmN1cnJlbnRCYXRjaCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQmF0Y2g6IHR5cGVvZih0aGlzLnByb3BzLmJhdGNoQ291bnQpICE9IFwidW5kZWZpbmVkXCIgJiYgdGhpcy5wcm9wcy5iYXRjaENvdW50ID4gMCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudEJhdGNoOiB0aGlzLnByb3BzLnNldEN1cnJlbnRCYXRjaCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5Q291bnQ6IHRoaXMucHJvcHMuZGF5Q291bnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUZvbGxvd3VwOiB0aGlzLnByb3BzLnJlbW92ZUZvbGxvd3VwLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50VGVtcGxhdGU6IHRoaXMucHJvcHMuc2V0Q3VycmVudFRlbXBsYXRlfSlcbiAgICB9XG4gICAgaWYodGhpcy5wcm9wcy5hbHJlYWR5U2VudCkge1xuICAgICAgbW9kZSA9IEZvbGxvd3VwQ29tcGxldGVkKHtjdXJyZW50VGVtcGxhdGU6IHRoaXMucHJvcHMuY3VycmVudFRlbXBsYXRlfSlcbiAgICB9XG5cbiAgICBtb2RlID0gKHRoaXMucHJvcHMuZWxlbWVudFR5cGUpID8gXCJcIiA6IG1vZGVcbiAgICBhZGRGb2xsb3d1cCA9ICh0aGlzLnByb3BzLmVsZW1lbnRUeXBlKSA/IHRoaXMuYWRkRm9sbG93dXAgOiBcIlwiXG4gICAgaWYodHlwZW9mKHRoaXMucHJvcHMuYmF0Y2hDb3VudCkgIT0gXCJ1bmRlZmluZWRcIilcbiAgICAgIGJhdGNoU3RhZ2UgPSBCYXRjaFN0YWdlKHtjdXJyZW50QmF0Y2g6IHRoaXMucHJvcHMuY3VycmVudEJhdGNoLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQcm9zcGVjdHM6IHRoaXMucHJvcHMubmV3UHJvc3BlY3RzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9zcGVjdExpc3RDb3VudDogdGhpcy5wcm9wcy5wcm9zcGVjdExpc3RDb3VudCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmF0Y2hDb3VudDogdGhpcy5wcm9wcy5iYXRjaENvdW50LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNTY2hlZHVsZWRFbWFpbDogbW9kZSAhPSBcIlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlDb3VudDogdGhpcy5wcm9wcy5kYXlDb3VudH0pXG4gICAgZWxzZVxuICAgICAgYmF0Y2hTdGFnZSA9IFwiXCJcblxuICAgIGRheUNvdW50ID0gKHRoaXMucHJvcHMuZGF5Q291bnQgIT0gMC41KSA/IFwiRFwiK3RoaXMucHJvcHMuZGF5Q291bnQgOiBcIlwiXG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7b25DbGljazogYWRkRm9sbG93dXAsIGNsYXNzTmFtZTogXCJkYXlcIiwgJ2RhdGEtdHJpZ2dlcic6IFwibWFudWFsXCJ9LCBcbiAgICAgICAgICBkYXlDb3VudFxuICAgICAgICApLCBcbiAgICAgICAgbW9kZSwgYmF0Y2hTdGFnZVxuICAgICAgKVxuICAgIClcbiAgfSxcblxuICBzZXRDdXJyZW50VGVtcGxhdGU6IGZ1bmN0aW9uKHRlbXBsYXRlKSB7XG4gICAgdGhpcy5wcm9wcy5zZXRDdXJyZW50VGVtcGxhdGUodGVtcGxhdGUpXG4gIH1cbn0pO1xuXG52YXIgRm9sbG93dXBDb21wbGV0ZWQgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdGb2xsb3d1cENvbXBsZXRlZCcsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJmb2xsb3d1cC1wbGFjZW1lbnQgYXJyb3dfYm94XzEgdG1wXzJcIn0sIFxuICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7d2lkdGg6MTMwLGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1maWxlLXRleHQtb1wifSksIFwiwqDCoFwiLCBcbiAgICAgICAgICAodGhpcy5wcm9wcy5jdXJyZW50VGVtcGxhdGUpID8gdGhpcy5wcm9wcy5jdXJyZW50VGVtcGxhdGUubmFtZSA6IFwiXCJcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5idXR0b24oe2NsYXNzTmFtZTogXCJ3aW4tYnRuIGJ0biBidG4tc3VjY2VzcyBidG4teHMgZGlzYWJsZWRcIiwgXG4gICAgICAgICAgICAgICAgJ2RhdGEtdGFyZ2V0JzogXCIuYnMtc2VuZEVtYWlsLW1vZGFsLWxnXCIsIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuc2V0Q3VycmVudFRlbXBsYXRlLCBcbiAgICAgICAgICAgICAgICAnZGF0YS10b2dnbGUnOiBcIm1vZGFsXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZWNrXCJ9KSwgXCLCoFNlbnRcIiksIFwiwqBcIiwgXG4gICAgICAgIFJlYWN0LkRPTS5idXR0b24oe29uQ2xpY2s6IHRoaXMuZWRpdEZvbGxvd3VwLCBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwid2luLWJ0biBidG4gYnRuLWRlZmF1bHQgYnRuLXhzIGRpc2FibGVkXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBlbmNpbFwifSkpLCBcIsKgXCIsIFxuICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHtvbkNsaWNrOiB0aGlzLnJlbW92ZUZvbGxvd3VwLCBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwid2luLWJ0biBidG4gYnRuLWRlZmF1bHQgYnRuLXhzIGRpc2FibGVkXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXRyYXNoLW9cIn0pKVxuICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gIH1cbn0pXG5cbnZhciBUZW1wbGF0ZUZvbGxvd3VwID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnVGVtcGxhdGVGb2xsb3d1cCcsXG4gIC8vIEVkaXRNb2RlIEZhbHNlXG5cbiAgc2V0Q3VycmVudFRlbXBsYXRlOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnByb3BzLnNldEN1cnJlbnRUZW1wbGF0ZSh0aGlzLnByb3BzLmN1cnJlbnRUZW1wbGF0ZSlcbiAgICAvLyBzZXRDdXJyZW50QmF0Y2hcbiAgICB0aGlzLnByb3BzLnNldEN1cnJlbnRCYXRjaCh0aGlzLnByb3BzLmN1cnJlbnRCYXRjaClcbiAgICAkKCcuYnMtc2VuZEVtYWlsLW1vZGFsLWxnJykubW9kYWwoKVxuICB9LFxuXG4gIHdhaXRGb3JCYXRjaDogZnVuY3Rpb24oKSB7XG4gICAgYWxlcnRpZnkubG9nKFwiWW91IG11c3Qgd2FpdCBmb3IgYSBiYXRjaCFcIik7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICB0cmFzaCA9ICh0aGlzLnByb3BzLmRheUNvdW50ID09IDApID8gIFJlYWN0LkRPTS5idXR0b24oe29uQ2xpY2s6IHRoaXMucmVtb3ZlRm9sbG93dXAsIFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJ3aW4tYnRuIGJ0biBidG4tZGVmYXVsdCBidG4teHMgZGlzYWJsZWRcIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdHJhc2gtb1wifSkpIDogUmVhY3QuRE9NLmJ1dHRvbih7b25DbGljazogdGhpcy5yZW1vdmVGb2xsb3d1cCwgY2xhc3NOYW1lOiBcIndpbi1idG4gYnRuIGJ0bi1kZWZhdWx0IGJ0bi14c1wifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS10cmFzaC1vXCJ9KSkgXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJmb2xsb3d1cC1wbGFjZW1lbnQgYXJyb3dfYm94XzEgdG1wXzJcIn0sIFxuICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7d2lkdGg6MTMwLGRpc3BsYXk6J2lubGluZS1ibG9jayd9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1maWxlLXRleHQtb1wifSksIFwiwqDCoFwiLCBcbiAgICAgICAgICAodGhpcy5wcm9wcy5jdXJyZW50VGVtcGxhdGUpID8gdGhpcy5wcm9wcy5jdXJyZW50VGVtcGxhdGUubmFtZSA6IFwiXCJcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5idXR0b24oe2NsYXNzTmFtZTogXCJ3aW4tYnRuIGJ0biBidG4tc3VjY2VzcyBidG4teHNcIiwgXG4gICAgICAgICAgb25DbGljazogKHRoaXMucHJvcHMuaGFzQmF0Y2gpID8gdGhpcy5zZXRDdXJyZW50VGVtcGxhdGUgOiB0aGlzLndhaXRGb3JCYXRjaCwgXG4gICAgICAgICAgICAgICAgJ2RhdGEtdG9nZ2xlJzogXCJtb2RhbFwifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wYXBlci1wbGFuZVwifSksIFwiwqBTZW5kXCIpLCBcIsKgXCIsIFxuICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHtvbkNsaWNrOiB0aGlzLmVkaXRGb2xsb3d1cCwgXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIndpbi1idG4gYnRuIGJ0bi1kZWZhdWx0IGJ0bi14c1wifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1wZW5jaWxcIn0pKSwgXCLCoFwiLCBcbiAgICAgICAgdHJhc2hcbiAgICAgIClcbiAgICApO1xuICB9LFxuXG4gIGVkaXRGb2xsb3d1cDogZnVuY3Rpb24oZSkgeyBcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zb2xlLmxvZyh0aGlzLnByb3BzLmRheUNvdW50KVxuICAgIHRoaXMucHJvcHMuZWRpdEZvbGxvd3VwKHRoaXMucHJvcHMuZGF5Q291bnQpXG4gIH0sXG5cbiAgcmVtb3ZlRm9sbG93dXA6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdyZW1vdmUnKVxuICAgIHRoaXMucHJvcHMucmVtb3ZlRm9sbG93dXAodGhpcy5wcm9wcy5kYXlDb3VudClcbiAgfVxufSk7XG5cbnZhciBCYXRjaFN0YWdlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQmF0Y2hTdGFnZScsXG4gIC8vIERpZmZlcmVudCBTdGFnZXMgb2YgUGVvcGxlIEFkZGVkIHRvIFByb3NwZWN0IExpc3RcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaW5pdGlhbEJhdGNoQ291bnQ6IHRoaXMucHJvcHMuYmF0Y2hDb3VudFxuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgLy8gc3RhdGVcbiAgICAvL2NvbnNvbGUuZGVidWcoJ0lOU0lERSBCQVRDSCAnK3RoaXMucHJvcHMuZGF5Q291bnQpXG4gICAgY29uc29sZS5kZWJ1Zyh0aGlzLnByb3BzLmN1cnJlbnRCYXRjaClcbiAgICBfYmF0Y2hlcyA9IGFwcENvbmZpZy5wb2ludGVyKCdQcm9zcGVjdEJhdGNoJywgdGhpcy5wcm9wcy5jdXJyZW50QmF0Y2gpXG4gICAgaWYodGhpcy5wcm9wcy5iYXRjaENvdW50ID09IFwiflwiKSB7XG4gICAgICAvLyBXaHkgZG9lc250IHRoaXMgd29yayBcbiAgICAgIHZhciB0aGlzc3NzID0gdGhpcztcbiAgICAgIGNvbnNvbGUuZGVidWcoJ0lOU0lERSBCQVRDSCAnK3RoaXNzLnByb3BzLmRheUNvdW50KVxuICAgICAgY29uc29sZS5kZWJ1ZyhfYmF0Y2hlcylcbiAgICAgICQuYWpheCh7XG4gICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdCcsXG4gICAgICAgIGJhdGNoZXM6IF9iYXRjaGVzLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgd2hlcmU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGJhdGNoZXM6IF9iYXRjaGVzXG4gICAgICAgICAgfSksXG4gICAgICAgICAgY291bnQ6IHRydWUsXG4gICAgICAgICAgbGltaXQ6MTAwMCxcbiAgICAgICAgfSxcbiAgICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyBcbiAgICAgICAgICAvL2NvbnNvbGUuZGVidWcoJ1NVQ0NFU1MgR0VUIENPVU5UICcgKyByZXMuY291bnQpXG4gICAgICAgICAgLy9jb25zb2xlLmRlYnVnKHJlcy5yZXN1bHRzKSBcbiAgICAgICAgICB0aGlzc3NzLnNldFN0YXRlKHtpbml0aWFsQmF0Y2hDb3VudDogcmVzLmNvdW50fSlcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBcbiAgICAgICAgICB0aGlzc3NzLnNldFN0YXRlKHtpbml0aWFsQmF0Y2hDb3VudDogMCB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbihuZXh0UHJvcHMpIHtcbiAgICBpZih0aGlzLnByb3BzLmRheUNvdW50ID09IDApXG4gICAgICB0aGlzLnNldFN0YXRlKHsgaW5pdGlhbEJhdGNoQ291bnQ6IG5leHRQcm9wcy5iYXRjaENvdW50IH0pXG4gIH0sXG5cblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIGlmKHRoaXMucHJvcHMuaGFzU2NoZWR1bGVkRW1haWwpXG4gICAgICBiYXRjaFN0YWdlU3R5bGUgPSB7dG9wOi00MiwgbGVmdDo2fVxuICAgIGVsc2VcbiAgICAgIGJhdGNoU3RhZ2VTdHlsZSA9IHt9XG5cbiAgICBpZih0aGlzLnByb3BzLmRheUNvdW50ID09IDAuNSlcbiAgICAgIGJhdGNoU3RhZ2VTdHlsZS5sZWZ0ID0gN1xuXG4gICAgLy9jb25zb2xlLmxvZygnQkFUQ0ggU1RBR0UnKVxuICAgIC8vY29uc29sZS5sb2codGhpcy5wcm9wcylcbiAgICAvL2NvbnNvbGUuZGVidWcodGhpcy5wcm9wcy5jdXJyZW50QmF0Y2gpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZm9sbG93dXAtcGxhY2VtZW50IGFycm93X2JveCB0bXBcIiwgc3R5bGU6IGJhdGNoU3RhZ2VTdHlsZX0sIFxuICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImxhYmVsIGxhYmVsLXByaW1hcnlcIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdXNlclwifSksIFwiwqBcIiwgXG4gICAgICAgICAgdGhpcy5zdGF0ZS5pbml0aWFsQmF0Y2hDb3VudFxuICAgICAgICApLCBcIsKgXCIsIFxuICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICBcInByb3NwZWN0cyBpbiB0aGUgc2FsZXMgY3ljbGUuXCIpXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbnZhciBFZGl0VGVtcGxhdGUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdFZGl0VGVtcGxhdGUnLFxuICAvLyBFZGl0IE1vZGUgLSBUcnVlXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgb3B0aW9ucyA9IFtdXG4gICAgZm9yKGk9MDtpPCB0aGlzLnByb3BzLnRlbXBsYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgb3B0aW9ucy5wdXNoKCBSZWFjdC5ET00ub3B0aW9uKG51bGwsIHRoaXMucHJvcHMudGVtcGxhdGVzW2ldLm5hbWUpKVxuICAgIH1cbiAgICB0cmFzaCA9ICh0aGlzLnByb3BzLmRheUNvdW50ID09IDApID8gIFJlYWN0LkRPTS5idXR0b24oe29uQ2xpY2s6IHRoaXMucmVtb3ZlRm9sbG93dXAsIFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJ3aW4tYnRuIGJ0biBidG4tZGVmYXVsdCBidG4teHMgZGlzYWJsZWRcIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdHJhc2gtb1wifSkpIDogUmVhY3QuRE9NLmJ1dHRvbih7b25DbGljazogdGhpcy5yZW1vdmVGb2xsb3d1cCwgY2xhc3NOYW1lOiBcIndpbi1idG4gYnRuIGJ0bi1kZWZhdWx0IGJ0bi14c1wifSwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdHJhc2gtb1wifSkpIFxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZm9sbG93dXAtcGxhY2VtZW50IGFycm93X2JveF8xIHRtcF8yXCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge3dpZHRoOjU1LGRpc3BsYXk6J2lubGluZS1ibG9jayd9LCBcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJ0ZXh0LW11dGVkXCJ9LCBcbiAgICAgICAgICBcIkNob29zZSA6XCJcbiAgICAgICAgKSwgXG4gICAgICAgIFJlYWN0LkRPTS5zZWxlY3Qoe2NsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgaW5wdXQtc21cIiwgXG4gICAgICAgICAgICAgICAgaWQ6IFwiY2hvb3NlVGVtcGxhdGVGb3JGb2xsb3d1cFwiLCBcbiAgICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6MTI3LG1hcmdpblJpZ2h0OjV9fSwgXG4gICAgICAgICAgb3B0aW9uc1xuICAgICAgICApLCBcblxuICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHtjbGFzc05hbWU6IFwid2luLWJ0biBidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzXCIsIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuc2F2ZUZvbGxvd3VwLCBcbiAgICAgICAgICAgICAgICBzdHlsZToge21hcmdpblJpZ2h0OjV9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jaGVja1wifSkpLCBcbiAgICAgICAgdHJhc2hcbiAgICAgIClcbiAgICApXG4gIH0sXG5cbiAgc2F2ZUZvbGxvd3VwOiBmdW5jdGlvbihlKSB7XG4gICAgLy9nZXQgdGVtcGxhdGUgZnJvbSBjdXJyZW50VGVtcGxhdGVcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBjaG9zZW5UZW1wbGF0ZSA9ICQoJyNjaG9vc2VUZW1wbGF0ZUZvckZvbGxvd3VwJykudmFsKClcbiAgICBjb25zb2xlLmxvZyhjaG9zZW5UZW1wbGF0ZSlcbiAgICBmb3IoaT0wO2k8IHRoaXMucHJvcHMudGVtcGxhdGVzLmxlbmd0aDsgaSsrKXtcbiAgICAgIGlmKHRoaXMucHJvcHMudGVtcGxhdGVzW2ldLm5hbWUgPT0gY2hvc2VuVGVtcGxhdGUpe1xuICAgICAgICBjaG9zZW5UZW1wbGF0ZSA9IHRoaXMucHJvcHMudGVtcGxhdGVzW2ldXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGNob3NlblRlbXBsYXRlKVxuICAgIFxuICAgIHRoaXMucHJvcHMuc2F2ZUZvbGxvd3VwKHRoaXMucHJvcHMuZGF5Q291bnQsIGNob3NlblRlbXBsYXRlKVxuICB9LFxuXG4gIHJlbW92ZUZvbGxvd3VwOiBmdW5jdGlvbihkYXkpIHtcbiAgICB0aGlzLnByb3BzLnJlbW92ZUZvbGxvd3VwKHRoaXMucHJvcHMuZGF5Q291bnQpXG4gIH0sXG59KTtcblxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwgYnMtZXhhbXBsZS1tb2RhbC1sZ1wiLCBcbiAgICAgICAgICAgICBzdHlsZToge21hcmdpblRvcDo1MH0sIFxuICAgICAgICAgICAgIGlkOiBcInVwZ3JhZGVQbGFuTW9kYWxcIn0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1kaWFsb2cgbW9kYWwtbGdcIn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWNvbnRlbnRcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtYm9keVwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIn0sIFwiQ2hvb3NlIEEgTmV3IFBsYW46XCIpLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicm93XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTNcIiwgc3R5bGU6IHtwYWRkaW5nOjV9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsIHBhbmVsLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWhlYWRpbmdcIiwgc3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcicsZm9udFdlaWdodDonYm9sZCd9fSwgXCIgSW5kaXZpZHVhbCBcIiksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmgxKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcIiQ5OVwiLCBSZWFjdC5ET00uc21hbGwobnVsbCwgXCIvbW9udGhcIikpXG5cbiAgICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cFwifSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcImxpc3QtZ3JvdXAtaXRlbVwifSwgXCLCoFwiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcImxpc3QtZ3JvdXAtaXRlbVwifSwgXCJVcCB0byAzMDAgZW1haWxzXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cC1pdGVtXCJ9LCBcIk1heCAxIFVzZXJcIiksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJsaXN0LWdyb3VwLWl0ZW1cIn0sIFwiSW5jbHVkZXMgRW1haWxcIiksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJsaXN0LWdyb3VwLWl0ZW1cIn0sIFxuICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4tZ3JhZGllbnQgYnRuIGJ0bi1wcmltYXJ5XCIsIFxuICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snfSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5sYXVuY2hDaGVja291dH0sIFwiVXBncmFkZVwiKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtM1wiLCBzdHlsZToge3BhZGRpbmc6NX19LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwgcGFuZWwtZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtaGVhZGluZ1wiLCBzdHlsZToge3RleHRBbGlnbjonY2VudGVyJyxmb250V2VpZ2h0Oidib2xkJ319LCBcIiBTdGFydHVwIFwiKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicGFuZWwtYm9keVwifSwgXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5oMSh7c3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcid9fSwgXCIkNDk5XCIsIFJlYWN0LkRPTS5zbWFsbChudWxsLCBcIi9tb250aFwiKSlcbiAgICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cFwifSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcImxpc3QtZ3JvdXAtaXRlbVwifSwgXCLCoFwiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcImxpc3QtZ3JvdXAtaXRlbVwifSwgXCJVcCB0byAxMDAwIGVtYWlsc1wiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcImxpc3QtZ3JvdXAtaXRlbVwifSwgXCJNYXggMTAgVXNlcnNcIiksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJsaXN0LWdyb3VwLWl0ZW1cIn0sIFwiSW5jbHVkZXMgUXVpY2sgU3RhcnQgUGFja2FnZVwiKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJsaXN0LWdyb3VwLWl0ZW1cIn0sIFwiSW5jbHVkZXMgU2lnbmFsc1wiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcImxpc3QtZ3JvdXAtaXRlbVwifSwgXG4gICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0bi1ncmFkaWVudCBidG4gYnRuLXByaW1hcnlcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidibG9jayd9LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmxhdW5jaENoZWNrb3V0fSwgXCJVcGdyYWRlXCIpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbC1tZC0zXCIsIHN0eWxlOiB7cGFkZGluZzo1fX0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbCBwYW5lbC1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1oZWFkaW5nXCIsIHN0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInLGZvbnRXZWlnaHQ6J2JvbGQnfX0sIFwiIEdyb3d0aCBcIiksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDEoe3N0eWxlOiB7dGV4dEFsaWduOidjZW50ZXInfX0sIFwiJDEyOTlcIiwgUmVhY3QuRE9NLnNtYWxsKG51bGwsIFwiL21vbnRoXCIpKVxuICAgICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJsaXN0LWdyb3VwXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cC1pdGVtXCJ9LCBcIsKgXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cC1pdGVtXCJ9LCBcIlVwIHRvIDI1MDAgZW1haWxzXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cC1pdGVtXCJ9LCBcIlVwIHRvIDI1IFVzZXJzXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cC1pdGVtXCJ9LCBcIkJ1bGsgQ1JNIEludGVncmF0aW9uXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cC1pdGVtXCJ9LCBcIk1pbmluZyBKb2JzXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cC1pdGVtXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuLWdyYWRpZW50IGJ0biBidG4tcHJpbWFyeVwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJ30sIFxuICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMubGF1bmNoQ2hlY2tvdXR9LCBcIlVwZ3JhZGVcIilcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY29sLW1kLTNcIiwgc3R5bGU6IHtwYWRkaW5nOjV9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsIHBhbmVsLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWhlYWRpbmdcIiwgc3R5bGU6IHt0ZXh0QWxpZ246J2NlbnRlcicsZm9udFdlaWdodDonYm9sZCd9fSwgXCIgRW50ZXJwcmlzZSBcIiksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInBhbmVsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmgxKHtzdHlsZToge3RleHRBbGlnbjonY2VudGVyJ319LCBcIiQyOTk5XCIsIFJlYWN0LkRPTS5zbWFsbChudWxsLCBcIi9tb250aFwiKSlcbiAgICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLnVsKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cFwifSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcImxpc3QtZ3JvdXAtaXRlbVwifSwgXCLCoFwiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5saSh7Y2xhc3NOYW1lOiBcImxpc3QtZ3JvdXAtaXRlbVwifSwgXCJVcCB0byAxMDAwMCBlbWFpbHNcIiksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJsaXN0LWdyb3VwLWl0ZW1cIn0sIFwiVXAgdG8gMTAwIFVzZXJzXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cC1pdGVtXCJ9LCBcIkRlZGljYXRlZCBIYXBwaW5uZXNzIE9mZmljZXJcIiksIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00ubGkoe2NsYXNzTmFtZTogXCJsaXN0LWdyb3VwLWl0ZW1cIn0sIFwiSW1wcm92ZWQgVGVycml0b3J5IFBsYW5uaW5nXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmxpKHtjbGFzc05hbWU6IFwibGlzdC1ncm91cC1pdGVtXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuLWdyYWRpZW50IGJ0biBidG4tcHJpbWFyeVwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJ30sIFxuICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMubGF1bmNoQ2hlY2tvdXR9LCBcIlVwZ3JhZGVcIilcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgKVxuICB9LFxuXG4gIGxhdW5jaENoZWNrb3V0OiBmdW5jdGlvbihlKSB7XG4gICAgcGxhbiA9ICQoZS50YXJnZXQpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoJy5wYW5lbC1oZWFkaW5nJykudGV4dCgpXG4gICAgdXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKVxuICAgIHVzZXIucGxhbiA9IHBsYW5cbiAgICBsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIgPSBKU09OLnN0cmluZ2lmeSh1c2VyKVxuICAgIGNvbnNvbGUubG9nKCdsb2cgY2hlY2tvdXQnKVxuICAgIGhhbmRsZXIub3Blbih7XG4gICAgICBuYW1lOiAnQ3VzdG9tZXJvJyxcbiAgICAgIGVtYWlsOkpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS51c2VybmFtZSxcbiAgICAgIGFsbG93UmVtZW1iZXJNZTpmYWxzZSxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVXBncmFkZSBUb2RheSEnLFxuICAgICAgYW1vdW50OiAwLFxuICAgICAgcGFuZWxMYWJlbDogXCJVcGdyYWRlIFRvIFwiK3BsYW4rXCIgUGxhblwiLFxuICAgICAgb3BlbmVkOiBmdW5jdGlvbigpIHsgfSxcbiAgICAgIGNsb3NlZDogZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKFwiY2xvc2VkXCIpIH1cbiAgICB9KTtcbiAgfVxufSlcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xudmFyIEhvcml6YW50YWxTcGlubmVyID0gcmVxdWlyZSgnLi9ob3JpemFudGFsX3NwaW5uZXIuanMubWluLmpzJylcbnZhciBMb2FkaW5nU3Bpbm5lciA9IHJlcXVpcmUoJy4vbG9hZGluZ19zcGlubmVyLmpzLm1pbi5qcycpXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgbG9hZGluZyAgPSB0cnVlXG4gICAgaWYodGhpcy5wcm9wcy5wcm9zcGVjdC5jb21wYW55KVxuICAgICAgaWYodGhpcy5wcm9wcy5wcm9zcGVjdC5jb21wYW55LmVtYWlsX3BhdHRlcm4pXG4gICAgICAgIGxvYWRpbmcgID0gZmFsc2VcbiAgICBpZighdGhpcy5wcm9wcy5wcm9zcGVjdC5jb21wYW55X25hbWUubGVuZ3RoKVxuICAgICAgbG9hZGluZyA9IGZhbHNlXG4gICAgcmV0dXJuIHsgXG4gICAgICBwcm9zcGVjdDogdGhpcy5wcm9wcy5wcm9zcGVjdCxcbiAgICAgIGNoZWNrZWQ6IGZhbHNlLFxuICAgICAgaW5pdGlhbExvYWRpbmc6IGxvYWRpbmcsXG4gICAgICBsb2FkaW5nOiBsb2FkaW5nLFxuICAgICAgZWRpdE1vZGU6IGZhbHNlLFxuICAgICAgbW91c2VPdmVyOiBmYWxzZVxuICAgIH1cbiAgfSxcblxuICBtb3VzZUVudGVyOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldFN0YXRlKHttb3VzZU92ZXI6IHRydWV9KVxuICB9LFxuXG4gIG1vdXNlTGVhdmU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe21vdXNlT3ZlcjogZmFsc2V9KVxuICB9LFxuXG4gIGNsaWNrQ2hlY2s6IGZ1bmN0aW9uKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgZG9tTm9kZSA9IHRoaXMuZ2V0RE9NTm9kZSgpXG4gICAgLy9pc0NoZWNrZWQgPSAkKCQoZG9tTm9kZSkuZmluZCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJylbMF0pLnByb3AoJ2NoZWNrZWQnKVxuICAgIGlzQ2hlY2tlZCA9ICQoJChkb21Ob2RlKS5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKVswXSkucHJvcCgnY2hlY2tlZCcpXG4gICAgJCgkKHRoaXMuZ2V0RE9NTm9kZSgpKS5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKVswXSkuY2xpY2soKVxuICAgIC8vY29uc29sZS5sb2coaXNDaGVja2VkKVxuICAgIHRoaXMuc2V0U3RhdGUoe2NoZWNrZWQ6IGlzQ2hlY2tlZH0pXG4gICAgdGhpcy5wcm9wcy5jaGVja2JveEFjdGlvbihpc0NoZWNrZWQsIHRoaXMuc3RhdGUucHJvc3BlY3Qub2JqZWN0SWQpXG4gIH0sXG5cbiAgcm93Q2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgICQoJCh0aGlzLmdldERPTU5vZGUoKSkuZmluZCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJylbMF0pLmNsaWNrKClcbiAgfSxcblxuICBrZXlib2FyZENsaWNrOiBmdW5jdGlvbigpIHtcbiAgICAkKCQoJy5rZXlTZWxlY3QnKS5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKVswXSkuY2xpY2soKVxuICB9LFxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgLy9cbiAgfSxcblxuICBfbWFrZV9lbWFpbDogZnVuY3Rpb24obmFtZSwgcGF0dGVybikge1xuICAgIG5hbWUgPSBuYW1lLnRyaW0oKVxuICAgIHZhcnMgPSB7XG4gICAgICBmaXJzdF9uYW1lOiBfLmZpcnN0KG5hbWUuc3BsaXQoJyAnKSksXG4gICAgICBsYXN0X25hbWU6IF8ubGFzdChuYW1lLnNwbGl0KCcgJykpLFxuICAgICAgZmlyc3RfaW5pdGlhbDogXy5maXJzdChuYW1lLnNwbGl0KCcgJykpWzBdLFxuICAgICAgbGFzdF9pbml0aWFsOiBfLmxhc3QobmFtZS5zcGxpdCgnICcpKVswXSxcbiAgICAgIGRvbWFpbjogcHJvc3BlY3QuY29tcGFueS5kb21haW5cbiAgICB9XG4gICAgcGF0dGVybiA9IChwYXR0ZXJuWzBdKSA/IHBhdHRlcm5bMF0ucGF0dGVybiA6IFwiXCJcbiAgICBwcm9zcGVjdF9lbWFpbCA9IE11c3RhY2hlLnJlbmRlcihwYXR0ZXJuLCB2YXJzKS50b0xvd2VyQ2FzZSgpXG4gICAgLy9jb25zb2xlLmRlYnVnKCdQUk9TUEVDVCBFTUFJTCcpXG4gICAgLy9jb25zb2xlLmRlYnVnKHByb3NwZWN0X2VtYWlsKVxuICAgIHJldHVybiBSZWFkT25seUZvcm0oe2ljb246IFwiZW52ZWxvcGVcIiwgdmFsdWU6IHByb3NwZWN0X2VtYWlsfSlcbiAgfSxcblxuICByZWFsdGltZUNvbXBhbnlJbmZvOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIGNoYW5uZWwuYmluZCh0aGlzLnN0YXRlLnByb3NwZWN0LmNvbXBhbnlfbmFtZS5yZXBsYWNlKCcgJywnLScpLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBfcHJvc3BlY3QgPSBfdGhpcy5zdGF0ZS5wcm9zcGVjdDsgX3Byb3NwZWN0LmNvbXBhbnkgPSBkYXRhLmNvbXBhbnk7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7cHJvc3BlY3Q6IF9wcm9zcGVjdH0pXG4gICAgICBjb25zb2xlLmxvZyhkYXRhLmNvbXBhbnkpXG4gICAgICBjb25zb2xlLmxvZygnbm8gbGlzdGVuaW5nIGZvciBlbWFpbCcpXG4gICAgICBpZihfcHJvc3BlY3QuY29tcGFueS5lbWFpbF9wYXR0ZXJuKXtcbiAgICAgICAgIF90aGlzLnNldFN0YXRlKHtsb2FkaW5nOiBmYWxzZX0pIFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2JpbmRpbmcgZm9yIGVtYWlsIHBhdHRlcm4nKVxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmNvbXBhbnkuZG9tYWluKVxuICAgICAgICBfdGhpcy5yZWFsdGltZUVtYWlsUGF0dGVybihkYXRhLmNvbXBhbnkuZG9tYWluKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIHJlYWx0aW1lRW1haWxQYXR0ZXJuOiBmdW5jdGlvbihkb21haW4pIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIGNoYW5uZWwuYmluZChkb21haW4sIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIC8vIGFkZCBlbWFpbCBwYXR0ZXJuXG4gICAgICBjb25zb2xlLmxvZygnZ290IGVtYWlsIHBhdHRlcm4nKVxuICAgICAgY29uc29sZS5sb2coZGF0YSlcbiAgICAgIGNvbnNvbGUubG9nKF90aGlzLnN0YXRlLnByb3NwZWN0KVxuICAgICAgX3Byb3NwZWN0ID0gX3RoaXMuc3RhdGUucHJvc3BlY3RcbiAgICAgIGlmKF9wcm9zcGVjdC5jb21wYW55KVxuICAgICAgICBfcHJvc3BlY3QuY29tcGFueS5lbWFpbF9wYXR0ZXJuID0gZGF0YS5lbWFpbF9wYXR0ZXJuXG4gICAgICBlbHNlXG4gICAgICAgIF9wcm9zcGVjdC5jb21wYW55PSB7J2VtYWlsX3BhdHRlcm4nOiBkYXRhLmVtYWlsX3BhdHRlcm59XG5cbiAgICAgIF90aGlzLnNldFN0YXRlKHtwcm9zcGVjdDogcHJvc3BlY3R9KVxuICAgICAgX3RoaXMuc2V0U3RhdGUoe2xvYWRpbmc6IGZhbHNlfSlcbiAgICB9KVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHsgXG4gICAgLy9UT0RPIC0gc3RhcnQgaWYgbG9hZGluZyBpcyB0cnVlIFxuICAgIC8vaWYodGhpcy5zdGF0ZS5sb2FkaW5nKXtcbiAgICAgIGlmKHRoaXMuc3RhdGUucHJvc3BlY3QuY29tcGFueSlcbiAgICAgICAgdGhpcy5yZWFsdGltZUVtYWlsUGF0dGVybih0aGlzLnN0YXRlLnByb3NwZWN0LmNvbXBhbnkuZG9tYWluKVxuICAgICAgZWxzZVxuICAgICAgICB0aGlzLnJlYWx0aW1lQ29tcGFueUluZm8odGhpcy5zdGF0ZS5wcm9zcGVjdC5jb21wYW55X25hbWUpXG4gICAgLy99XG4gIH0sXG5cbiAgX2tleWJvYXJkU2hvcnRjdXRzOiBmdW5jdGlvbigpIHtcbiAgICBrZXlib2FyZFNlbGVjdGVkID0ge2JvcmRlckxlZnQ6JzdweCBzb2xpZCByZ2JhKDAsMCwwLDApJ31cbiAgICB0aGlzc3NzID0gdGhpc1xuICAgIGlmKHRoaXMucHJvcHMua2V5Ym9hcmRTZWxlY3RlZCkge1xuICAgICAga2V5Ym9hcmRTZWxlY3RlZCA9IHtib3JkZXJMZWZ0Oic3cHggc29saWQgIzAwOTZmZiAhaW1wb3J0YW50J31cbiAgICAgIE1vdXNldHJhcC51bmJpbmQoJ3gnKVxuICAgICAgTW91c2V0cmFwLmJpbmQoJ3gnLCBmdW5jdGlvbigpIHsgXG4gICAgICAgIHRoaXNzc3Mua2V5Ym9hcmRDbGljaygpXG4gICAgICAgIGlmKHRoaXNzc3Muc3RhdGUuY2hlY2tlZClcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImxtYW9cIilcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHByb3NwZWN0ID0gdGhpcy5zdGF0ZS5wcm9zcGVjdFxuICAgIGlmKHRoaXMucHJvcHMubWFzdGVyQ2hlY2tib3hDaGVja2VkICYmIHRoaXMuc3RhdGUuY2hlY2tlZClcbiAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgZWxzZSBpZih0aGlzLnByb3BzLmFscmVhZHlDaGVja2VkKVxuICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICBlbHNlIGlmKHRoaXMuc3RhdGUuY2hlY2tlZClcbiAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgZWxzZSBpZih0aGlzLnByb3BzLm1hc3RlckNoZWNrYm94Q2hlY2tlZCB8fCB0aGlzLnN0YXRlLmNoZWNrZWQpXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgIGVsc2VcbiAgICAgIGNoZWNrZWQgPSBmYWxzZVxuXG4gICAgY2hlY2tlZCAgICAgICAgPSB0aGlzLnN0YXRlLmNoZWNrZWQgfHwgdGhpcy5wcm9wcy5hbHJlYWR5Q2hlY2tlZFxuICAgIGNvbG9yID0gKGNoZWNrZWQpID8ge2JhY2tncm91bmRDb2xvcjogJyNlZWY4ZmYnfSA6IHt9XG4gICAgaW5mb0NvbG9yID0gKGNoZWNrZWQpID8ge2JhY2tncm91bmRDb2xvcjogJyNlZWY4ZmYnLHBhZGRpbmdCb3R0b206Mn0gOiB7cGFkZGluZ0JvdHRvbToyfVxuICAgIGNoZWNrYm94Q29sb3IgPSAoY2hlY2tlZCkgPyB7YmFja2dyb3VuZENvbG9yOiAnI2VlZjhmZicsdmVydGljYWxBbGlnbjonbWlkZGxlJ30gOiB7dmVydGljYWxBbGlnbjonbWlkZGxlJ31cbiAgICBjb21wYW55ID0gKHByb3NwZWN0LmNvbXBhbnkpID8gcHJvc3BlY3QuY29tcGFueSA6IHt9XG4gICAgcHJvc3BlY3RfZW1haWwgPSBSZWFkT25seUZvcm0oe2Rpc2FibGVkOiB0cnVlLCBpY29uOiBcImVudmVsb3BlXCIsIHZhbHVlOiBcIk5vIEVtYWlsIEZvdW5kXCJ9KVxuICAgIGlmKGNvbXBhbnkuZW1haWxfcGF0dGVybilcbiAgICAgIGlmKGNvbXBhbnkuZW1haWxfcGF0dGVybi5sZW5ndGgpXG4gICAgICAgIHByb3NwZWN0X2VtYWlsID0gdGhpcy5fbWFrZV9lbWFpbChwcm9zcGVjdC5uYW1lLCBjb21wYW55LmVtYWlsX3BhdHRlcm4pXG5cbiAgICAvL2NvbnNvbGUubG9nKHByb3NwZWN0Lm5hbWUpXG4gICAgaWYocHJvc3BlY3QubmFtZSA9PSBcIkxpbmtlZEluIE1lbWJlclwiIHx8IF8ubGFzdChwcm9zcGVjdC5uYW1lKSA9PSBcIi5cIilcbiAgICAgIHByb3NwZWN0X2VtYWlsID0gUmVhZE9ubHlGb3JtKHtkaXNhYmxlZDogdHJ1ZSwgaWNvbjogXCJlbnZlbG9wZVwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJBbWJpZ3VvdXMgTmFtZVwifSlcbiAgICBwcm9zcGVjdF9lbWFpbCA9ICh0aGlzLnN0YXRlLmxvYWRpbmcpID8gTG9hZGluZ0xhYmVsKG51bGwpIDogcHJvc3BlY3RfZW1haWxcbiAgICBpZighdGhpcy5wcm9wcy5wcm9zcGVjdC5jb21wYW55X25hbWUubGVuZ3RoKVxuICAgICAgICBwcm9zcGVjdF9lbWFpbCA9IFwiXCJcblxuICAgIGlmKGNvbXBhbnkucGhvbmUgJiYgY29tcGFueS5waG9uZSAhPSBcIm51bGxcIilcbiAgICAgIHBob25lID0gUmVhY3QuRE9NLmRpdih7c3R5bGU6IHtkaXNwbGF5OidibG9jaycscGFkZGluZ1RvcDoyfX0sIFJlYWRPbmx5Rm9ybSh7aWNvbjogXCJwaG9uZVwiLCB2YWx1ZTogY29tcGFueS5waG9uZX0pKSBcbiAgICBlbHNlIFxuICAgICAgcGhvbmUgPSBcIlwiXG5cbiAgICBjb21wYW55X3NpemUgICA9ICh0aGlzLnN0YXRlLmxvYWRpbmcpID8gTG9hZGluZ0xhYmVsKG51bGwpIDogXCJcIlxuICAgIGlmKGNvbXBhbnkuaGVhZGNvdW50KXsgXG4gICAgICBjb21wYW55X3NpemUgPSBwcm9zcGVjdC5jb21wYW55LmhlYWRjb3VudCtcIiBlbXBsb3llZXNcIiBcbiAgICB9XG5cbiAgICBpZihjb21wYW55LmFkZHJlc3MpXG4gICAgICBjaXR5ID0gKGNvbXBhbnkuYWRkcmVzcykgPyBjb21wYW55LmFkZHJlc3Mubm9ybWFsaXplZExvY2F0aW9uIDogcHJvc3BlY3QubG9jYWxlXG4gICAgZWxzZSBpZihwcm9zcGVjdC5sb2NhbGUgIT0gXCJcIiAmJiBwcm9zcGVjdC5sb2NhbGUpXG4gICAgICBjaXR5ID0gcHJvc3BlY3QubG9jYWxlXG4gICAgZWxzZSBpZihfLmlzRXF1YWwoY29tcGFueSwge30pKVxuICAgICAgY2l0eSA9IExvYWRpbmdMYWJlbChudWxsKVxuICAgIGVsc2VcbiAgICAgIGNpdHkgPSBcIlwiXG5cbiAgICBjb21wYW55X3VybCA9IChjb21wYW55LmRvbWFpbikgPyBTaGlueUJ1dHRvbih7aWNvbjogXCJnbG9iZVwiLCBsaW5rOiBcImh0dHA6Ly9cIitjb21wYW55LmRvbWFpbn0pIDogXCJcIlxuICAgIHBvc2l0aW9uICAgID0gKHByb3NwZWN0LnRpdGxlKSA/IHByb3NwZWN0LnRpdGxlLnRyaW0oKSA6IFwiXCJcblxuICAgIHByb3NwZWN0X2NvbXBhbnlfbmFtZSA9IHByb3NwZWN0LmNvbXBhbnlfbmFtZVxuICAgIHByb3NwZWN0X25hbWUgPSBwcm9zcGVjdC5uYW1lXG4gICAgaWYoIXRoaXMuc3RhdGUucHJvc3BlY3QubG9hZGluZyl7XG4gICAgICBpZih0eXBlb2YocHJvc3BlY3QuY29tcGFueV9uYW1lKSA9PSBcInVuZGVmaW5lZFwiIHx8IHByb3NwZWN0LmNvbXBhbnlfbmFtZSA9PSBcIlwiIHx8IHByb3NwZWN0LmNvbXBhbnlfbmFtZSA9PSBcIm5vdF9mb3VuZFwiKVxuICAgICAgICBwcm9zcGVjdF9jb21wYW55X25hbWUgPSBVc2VyVXBkYXRlRm9ybSh7dXBkYXRlUHJvc3BlY3Q6IHRoaXMudXBkYXRlUHJvc3BlY3QsIHZhcjogXCJjb21wYW55X25hbWVcIiwgcHJvc3BlY3Q6IHRoaXMuc3RhdGUucHJvc3BlY3QsIGZvcm1UZXh0OiBcIkVudGVyIENvbXBhbnkgTmFtZS5cIn0pIFxuICAgICAgaWYodHlwZW9mKHByb3NwZWN0Lm5hbWUpID09IFwidW5kZWZpbmVkXCIgfHwgcHJvc3BlY3QubmFtZSA9PSBcIkxpbmtlZEluIE1lbWJlclwiKVxuICAgICAgICBwcm9zcGVjdF9uYW1lID0gVXNlclVwZGF0ZUZvcm0oe3VwZGF0ZVByb3NwZWN0OiB0aGlzLnVwZGF0ZVByb3NwZWN0LCB2YXI6IFwibmFtZVwiLCBmb3JtVGV4dDogXCJFbnRlciBGdWxsIE5hbWUuXCJ9KSBcbiAgICAgIGlmKHR5cGVvZihwb3NpdGlvbikgPT0gXCJ1bmRlZmluZWRcIiB8fCBwb3NpdGlvbiA9PSBcIlwiKVxuICAgICAgICBwb3NpdGlvbiA9IFVzZXJVcGRhdGVGb3JtKHt1cGRhdGVQcm9zcGVjdDogdGhpcy51cGRhdGVQcm9zcGVjdCwgdmFyOiBcInBvc1wiLCBwcm9zcGVjdDogdGhpcy5zdGF0ZS5wcm9zcGVjdCwgZm9ybVRleHQ6IFwiRW50ZXIgVGl0bGUuXCJ9KSBcbiAgICB9XG4gICAgaWYodGhpcy5zdGF0ZS5lZGl0TW9kZSl7XG4gICAgICAgIHBjbiA9IHByb3NwZWN0X2NvbXBhbnlfbmFtZTsgcG4gPSBwcm9zcGVjdF9uYW1lOyBwb3MgPSBwb3NpdGlvbjtcbiAgICAgICAgcGNuID0gKHBjbiAhPSBcIlwiICYmIHBjbikgPyBwY24gOiBcIkVudGVyIENvbXBhbnkgTmFtZS5cIlxuICAgICAgICBwbiAgPSAocG4gIT0gXCJcIiAmJiBwbikgPyBwbiA6IFwiRW50ZXIgRnVsbCBOYW1lLlwiXG4gICAgICAgIHBvcyA9IChwb3MgIT0gXCJcIiAmJiBwb3MpID8gcG9zIDogXCJFbnRlciBUaXRsZS5cIlxuICAgICAgICBwcm9zcGVjdF9jb21wYW55X25hbWUgPSBVc2VyVXBkYXRlRm9ybSh7dXBkYXRlUHJvc3BlY3Q6IHRoaXMudXBkYXRlUHJvc3BlY3QsIHZhcjogXCJjb21wYW55X25hbWVcIiwgcHJvc3BlY3Q6IHRoaXMuc3RhdGUucHJvc3BlY3QsIHZhbHVlOiBwY24sIHNpbmdsZTogMX0pIFxuICAgICAgICBwcm9zcGVjdF9uYW1lID0gVXNlclVwZGF0ZUZvcm0oe3VwZGF0ZVByb3NwZWN0OiB0aGlzLnVwZGF0ZVByb3NwZWN0LCB2YXI6IFwibmFtZVwiLCB2YWx1ZTogcG4sIHNpbmdsZTogMX0pIFxuICAgICAgICBwb3NpdGlvbiA9IFVzZXJVcGRhdGVGb3JtKHt1cGRhdGVQcm9zcGVjdDogdGhpcy51cGRhdGVQcm9zcGVjdCwgdmFyOiBcInBvc1wiLCBwcm9zcGVjdDogdGhpcy5zdGF0ZS5wcm9zcGVjdCwgdmFsdWU6IHBvcywgc2luZ2xlOiAxfSkgXG4gICAgfVxuICAgIGlmKCF0aGlzLnByb3BzLnByb3NwZWN0LmNvbXBhbnlfbmFtZS5sZW5ndGgpXG4gICAgICAgIHByb3NwZWN0X2NvbXBhbnlfbmFtZSA9IFVzZXJVcGRhdGVGb3JtKHt1cGRhdGVQcm9zcGVjdDogdGhpcy51cGRhdGVQcm9zcGVjdCwgdmFyOiBcImNvbXBhbnlfbmFtZVwiLCBwcm9zcGVjdDogdGhpcy5zdGF0ZS5wcm9zcGVjdCwgZm9ybVRleHQ6IFwiRW50ZXIgQ29tcGFueSBOYW1lXCJ9KSBcblxuICAgIGxpUHJvZmlsZVNpbWlsYXJzID0gKHByb3NwZWN0LmxpbmtlZGluX3VybCkgPyBSZWFjdC5ET00uYSh7b25DbGljazogdGhpcy5vcGVuU2ltaWxhcnMsIHN0eWxlOiB7bWFyZ2luTGVmdDo1LCBmbG9hdDoncmlnaHQnfSwgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tcHJpbWFyeSBidG4tZ3JhZGllbnQgc2ltaWxhcl9saW5rXCJ9LCBcIiBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jb3B5XCIsIHN0eWxlOiB7Zm9udFdlaWdodDonYm9sZCd9fSkpIDogXCJcIlxuICAgIFxuICAgIGlmKHR5cGVvZihwcm9zcGVjdF9uYW1lKSA9PSBcInN0cmluZ1wiKVxuICAgICAgaWYocHJvc3BlY3RfbmFtZS5pbmRleE9mKFwiLlwiKSAhPSAtMSB8fCBwcm9zcGVjdF9uYW1lID09IFwiTGlua2VkSW4gTWVtYmVyXCIpXG4gICAgICAgIHByb3NwZWN0X25hbWUgPSBSZWFjdC5ET00uc3BhbihudWxsLCBwcm9zcGVjdF9uYW1lLCBSZWFjdC5ET00uYnV0dG9uKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwiLCBzdHlsZToge21hcmdpbkxlZnQ6NSxtYXJnaW5Ub3A6LTQsd2lkdGg6MjUsZm9udFNpemU6MTEsbGluZUhlaWdodDoxfSwgb25DbGljazogdGhpcy5zZWFyY2hQcm9zcGVjdH0sIFwiIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXNlYXJjaFwifSkpKVxuXG4gICAgb3B0aW9uc01lbnUgPSBSZWFjdC5ET00uZGl2KHtzdHlsZToge2ZvbnRTaXplOjEwLCBjdXJzb3I6J3BvaW50ZXInLGhlaWdodDoyMCxtYXJnaW5Ub3A6LTIwfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJ0ZXh0LW11dGVkXCIsIG9uQ2xpY2s6IHRoaXMudG9nZ2xlRWRpdE1vZGV9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogKHRoaXMuc3RhdGUuZWRpdE1vZGUpID8gXCJmYSBmYS1jaGVja1wiIDogXCJmYSBmYS1wZW5jaWxcIn0pXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtjbGFzc05hbWU6IFwidGV4dC1tdXRlZFwiLCBvbkNsaWNrOiB0aGlzLnNlYXJjaFByb3NwZWN0LCBzdHlsZToge21hcmdpblRvcDo1fX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXNlYXJjaFwifSlcbiAgICAgICAgICAgICksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJ0ZXh0LW11dGVkXCIsIG9uQ2xpY2s6IHRoaXMuYXJjaGl2ZVByb3NwZWN0cywgXG4gICAgICAgICAgICAgIHN0eWxlOiB7bWFyZ2luVG9wOjV9fSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYXJjaGl2ZVwifSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICBcbiAgICBrZXlib2FyZFNlbGVjdGVkID0ge2JvcmRlckxlZnQ6JzdweCBzb2xpZCByZ2JhKDAsMCwwLDApJ31cbiAgICAgICAgICAgIC8va2V5Ym9hcmRTZWxlY3RlZCA9IHt9XG4gICAgLy9cbiAgICBpZih0aGlzLnByb3BzLmtleWJvYXJkU2VsZWN0ZWQpIHtcbiAgICAgIGtleWJvYXJkU2VsZWN0ZWQgPSB7Ym9yZGVyTGVmdDonN3B4IHNvbGlkICMwMDk2ZmYgIWltcG9ydGFudCd9XG4gICAgfVxuICAgIFxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS50cih7Y2xhc3NOYW1lOiBcInByb3NwZWN0cy10clwiLCBcbiAgICAgICAgICBvbkNsaWNrOiB0aGlzLnJvd0NsaWNrLCBcbiAgICAgICAgICBvbk1vdXNlRW50ZXI6IHRoaXMubW91c2VFbnRlciwgXG4gICAgICAgICAgb25Nb3VzZUxlYXZlOiB0aGlzLm1vdXNlTGVhdmUsIFxuICAgICAgICAgIHN0eWxlOiBrZXlib2FyZFNlbGVjdGVkfSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY2hlY2tib3hDb2xvcn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIiwgXG4gICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5jbGlja0NoZWNrLCBcbiAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7bGluZUhlaWdodDonbm9ybWFsJyxtYXJnaW5Ub3A6LTgsaGVpZ2h0OjE3fSwgXG4gICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBjaGVja2VkfSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiBjaGVja2JveENvbG9yfSwgXG4gICAgICAgICAgICAodGhpcy5zdGF0ZS5tb3VzZU92ZXIpID8gb3B0aW9uc01lbnUgOiBSZWFjdC5ET00uZGl2KHtzdHlsZToge2hlaWdodDoyMH19LCBcIsKgwqDCoFwiKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IGNoZWNrYm94Q29sb3J9LCBcbiAgICAgICAgICAgKHRoaXMuc3RhdGUubG9hZGluZykgPyBMb2FkaW5nUHVsc2UobnVsbCkgOiBcIlwiLCBcbiAgICAgICAgICAgKCF0aGlzLnN0YXRlLmxvYWRpbmcgJiYgdGhpcy5zdGF0ZS5pbml0aWFsTG9hZGluZykgPyBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZWNrLWNpcmNsZSBcIiwgc3R5bGU6IHtjb2xvcjoncmdiKDAsIDEyMiwgMjY1KScscGFkZGluZ0xlZnQ6Nix9fSkgOiBcIlwiXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3IsIGNsYXNzTmFtZTogXCJmaXhlZC1kYXRhLWNvbHVtblwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJ319LCBwcm9zcGVjdF9uYW1lKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7Zm9udFdlaWdodDonNDAwJyxtYXJnaW46JzBweCd9fSwgXCIgXCIsIHBvc2l0aW9uLCBcIiBcIilcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiBjb2xvciwgY2xhc3NOYW1lOiBcImZpeGVkLWRhdGEtY29sdW1uXCJ9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnfX0sIFwiIFwiLCBwcm9zcGVjdF9jb21wYW55X25hbWUsIFwiIFwiKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7Zm9udFdlaWdodDonNDAwJyxtYXJnaW46JzBweCd9LCBjbGFzc05hbWU6IFwiY29tcGFueS1zaXplXCJ9LCBcbiAgICAgICAgICAgIGNvbXBhbnlfc2l6ZVxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7Zm9udFdlaWdodDonNDAwJyxtYXJnaW46JzBweCcsZGlzcGxheTonbm9uZScsZm9udFN0eWxlOidpdGFsaWMnfSwgXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNvbXBhbnktc2l6ZVwifSwgXG4gICAgICAgICAgICAgIChwcm9zcGVjdC5pbmR1c3RyeSkgPyBwcm9zcGVjdC5pbmR1c3RyeSA6IFwiXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLCBcblxuICAgICAgICAgIFJlYWN0LkRPTS50ZCh7c3R5bGU6IGNvbG9yfSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7bWFyZ2luOicwcHgnfX0sIGNpdHkpKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogaW5mb0NvbG9yfSwgXCIgXCIsIHByb3NwZWN0X2VtYWlsLCBcIiBcIiwgcGhvbmUsIFwiIFwiKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3J9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7d2lkdGg6OTIscGFkZGluZ1RvcDo1LGhlaWdodDo1fX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLm9wZW5MaW5rZWRpblByb2ZpbGUsIFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXhzIGJ0bi1wcmltYXJ5IGJ0bi1ncmFkaWVudCBsaW5rZWRpbl9saW5rXCIsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxtYXJnaW5MZWZ0OjV9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1saW5rZWRpbi1zcXVhcmVcIn0pKSwgXG4gICAgICAgICAgICAgIFwiwqAgwqBcIiwgXG4gICAgICAgICAgICAgIGxpUHJvZmlsZVNpbWlsYXJzLCBcbiAgICAgICAgICAgICAgY29tcGFueV91cmxcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICApO1xuICB9LFxuXG4gIHNlYXJjaFByb3NwZWN0OiBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIHVybCA9IFwiaHR0cDovL3d3dy5nb29nbGUuY29tLyNxPVwiXG4gICAgcHJvc3BlY3QgPSB0aGlzLnN0YXRlLnByb3NwZWN0XG4gICAgbmFtZSA9IChwcm9zcGVjdC5uYW1lICE9IFwiTGlua2VkSW4gTWVtYmVyXCIpID8gcHJvc3BlY3QubmFtZSA6IFwiXCJcbiAgICBhcmdzID0gJy1pbnVybDpcIi9kaXIvXCIgLWludXJsOlwiL2ZpbmQvXCIgLWludXJsOlwiL3VwZGF0ZXNcIidcbiAgICBpZihuYW1lID09IFwiXCIgJiYgcHJvc3BlY3QuY29tcGFueV9uYW1lICE9IFwibm90X2ZvdW5kXCIpXG4gICAgICBsaW5rZWRpbiA9ICdcImF0ICcrcHJvc3BlY3QuY29tcGFueV9uYW1lKydcIiBzaXRlOmxpbmtlZGluLmNvbSAnK2FyZ3NcbiAgICBlbHNlXG4gICAgICBsaW5rZWRpbiA9IFwiIHNpdGU6bGlua2VkaW4uY29tL2luLyBPUiBzaXRlOmxpbmtlZGluLmNvbS9wdWIvIC1zaXRlOmxpbmtlZGluLmNvbS9wdWIvZGlyL1wiXG4gICAgd2luZG93Lm9wZW4odXJsK25hbWUrXCIgXCIrcHJvc3BlY3QuY29tcGFueV9uYW1lK1wiIFwiK3Byb3NwZWN0LnRpdGxlK2xpbmtlZGluKVxuICB9LFxuXG4gIGFyY2hpdmVQcm9zcGVjdHM6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKHRoaXMuZ2V0RE9NTm9kZSgpKVxuICAgIC8vJCh0aGlzLmdldERPTU5vZGUoKSkuY2xpY2soKVxuICAgIHRoaXMucHJvcHMuYXJjaGl2ZVByb3NwZWN0cyhbdGhpcy5zdGF0ZS5wcm9zcGVjdC5vYmplY3RJZF0pXG4gIH0sXG5cbiAgdG9nZ2xlRWRpdE1vZGU6IGZ1bmN0aW9uKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgdGhpcy5zZXRTdGF0ZSh7ZWRpdE1vZGU6ICF0aGlzLnN0YXRlLmVkaXRNb2RlfSlcbiAgfSxcblxuICBvcGVuVGVzdDogZnVuY3Rpb24oKSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICB9LFxuXG4gIG9wZW5MaW5rZWRpblByb2ZpbGU6IGZ1bmN0aW9uKGUpIHtcbiAgICB3aW5kb3cub3Blbih0aGlzLnN0YXRlLnByb3NwZWN0LmxpbmtlZGluX3VybClcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gIH0sXG5cbiAgZW1haWxJbnB1dENsaWNrOiBmdW5jdGlvbihlKSB7ZS5zdG9wUHJvcGFnYXRpb24oKSB9LFxuXG4gIG9wZW5TaW1pbGFyczogZnVuY3Rpb24oZSkge1xuICAgIC8vIFRPRE8gLSBtb3ZlIHRvIGJhY2tlbmRcbiAgICBjb25zb2xlLmxvZygnc2ltaWxhcnMnKVxuICAgIGlmKHRoaXMuc3RhdGUucHJvc3BlY3QubGlua2VkaW5fdXJsLmluZGV4T2YoJ3Byb2ZpbGUnKSAhPSAtMSl7XG4gICAgICB1cmxhcmdzID0gdGhpcy5zdGF0ZS5wcm9zcGVjdC5saW5rZWRpbl91cmwuc3BsaXQoJz8nKVsxXS5zcGxpdCgnJicpXG4gICAgICBhcmdzID0gW11cbiAgICAgIGZvcihpPTA7aTwgdXJsYXJncy5sZW5ndGg7IGkrKylcbiAgICAgICAgYXJncy5wdXNoKHVybGFyZ3NbaV0uc3BsaXQoJz0nKSlcbiAgICAgIGFyZ3MgPSBfLm9iamVjdChhcmdzKVxuICAgIH1cbiAgICB3aW5kb3cub3BlbihcImh0dHBzOi8vd3d3LmxpbmtlZGluLmNvbS92c2VhcmNoL3A/cGl2b3RUeXBlPXNpbSZwaWQ9XCIrYXJncy5pZClcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gIH0sXG5cbiAgZGVsZXRlUHJvc3BlY3Q6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucHJvcHMuZGVsZXRlUHJvc3BlY3QodGhpcy5zdGF0ZS5wcm9zcGVjdC5vYmplY3RJZCwgJ1Byb3NwZWN0JylcbiAgfSxcbiAgXG4gIHVwZGF0ZVByb3NwZWN0OiBmdW5jdGlvbihwcm9wLCB2YWx1ZSkge1xuICAgIHByb3NwZWN0ID0gdGhpcy5zdGF0ZS5wcm9zcGVjdFxuICAgIHByb3NwZWN0W3Byb3BdID0gdmFsdWVcbiAgICB0aGlzLnNldFN0YXRlKHtwcm9zcGVjdDogcHJvc3BlY3R9KVxuICB9LFxuICBcbiAgcmVmcmVzaDogZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBwcm9zcGVjdCA9IHRoaXMuc3RhdGUucHJvc3BlY3RcbiAgICBjb25zb2xlLmxvZyhwcm9zcGVjdClcblxuICAgICQuYWpheCh7XG4gICAgICAvL3VybDonaHR0cHM6Ly9uYW1lbGVzcy1yZXRyZWF0LTM1MjUuaGVyb2t1YXBwLmNvbS9wcm9maWxlX2RldGFpbCcsXG4gICAgICB1cmw6J2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC9wcm9maWxlX2RldGFpbCcsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgZGF0YVR5cGU6J2pzb24nLFxuICAgICAgZGF0YTogcHJvc3BlY3QsXG4gICAgICAvL2hlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgY29uc29sZS5sb2cocmVzKX0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUubG9nKGVyci5yZXNwb25zZVRleHQpIH1cbiAgICB9KVxuICB9LFxufSk7XG5cbnZhciBVc2VyVXBkYXRlRm9ybSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1VzZXJVcGRhdGVGb3JtJyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3VibWl0dGVkOiBmYWxzZSxcbiAgICAgIHZhbHVlOiB0aGlzLnByb3BzLnZhbHVlXG4gICAgfVxuICB9LFxuXG4gIGZvcm1DbGljazogZnVuY3Rpb24oZSkgeyBlLnN0b3BQcm9wYWdhdGlvbigpIH0sXG5cbiAgc3VibWl0Rm9ybTogZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICB0aGlzLnByb3BzLnVwZGF0ZVByb3NwZWN0KHRoaXMucHJvcHMudmFyLCAkKGUudGFyZ2V0KS5maW5kKCdpbnB1dCcpLnZhbCgpKVxuICAgIHRoaXMuc2V0U3RhdGUoe3N1Ym1pdHRlZDogdHJ1ZX0pXG4gICAgcHJvc3BlY3QgPSB0aGlzLnByb3BzLnByb3NwZWN0XG4gICAgcHJvc3BlY3RbdGhpcy5wcm9wcy52YXJdID0gJChlLnRhcmdldCkuZmluZCgnaW5wdXQnKS52YWwoKVxuXG4gICAgLy8gcGVyc2lzdFxuICAgIGRhdGEgPSB7fVxuICAgIHZhcnIgPSB0aGlzLnByb3BzLnZhclxuICAgIHZhbCA9ICQoZS50YXJnZXQpLmZpbmQoJ2lucHV0JykudmFsKClcbiAgICBkYXRhW3ZhcnJdID0gdmFsXG4gICAgb2JqZWN0SWQgPSB0aGlzLnN0YXRlLnByb3NwZWN0Lm9iamVjdElkXG5cbiAgICAkLmFqYXgoe1xuICAgICAgLy91cmw6J2h0dHBzOi8vbmFtZWxlc3MtcmV0cmVhdC0zNTI1Lmhlcm9rdWFwcC5jb20vcHJvZmlsZV9kZXRhaWwnLFxuICAgICAgdXJsOidodHRwOi8vMTI3LjAuMC4xOjUwMDAvcHJvZmlsZV9kZXRhaWwnLFxuICAgICAgZGF0YTogcHJvc3BlY3QsXG4gICAgICAvL2hlYWRlcnM6YXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgY29uc29sZS5sb2cocmVzKX0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUubG9nKGVyci5yZXNwb25zZVRleHQpIH1cbiAgICB9KVxuXG4gICAgLypcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0Lycrb2JqZWN0SWQsXG4gICAgICB0eXBlOiAnUFVUJyxcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHsgY29uc29sZS5sb2cocmVzKSBcbiAgICAgICAgLy8gc2VudCBjdXJyZW50IHByb3NwZWN0IHN0YXRlIGFzIGRhdGEgdG8gXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgdXJsOidodHRwczovL25hbWVsZXNzLXJldHJlYXQtMzUyNS5oZXJva3VhcHAuY29tL3Byb2ZpbGVfZGV0YWlsJyxcbiAgICAgICAgICBkYXRhOiBwcm9zcGVjdCxcbiAgICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyBjb25zb2xlLmxvZyhyZXMpfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUubG9nKGVyci5yZXNwb25zZVRleHQpIH1cbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUubG9nKGVyci5yZXNwb25zZVRleHQpIH1cbiAgICB9KVxuICAgICovXG4gIH0sXG5cbiAgaGFuZGxlQ2hhbmdlOiBmdW5jdGlvbihldmVudCkge1xuICAgIGNvbnNvbGUubG9nKGV2ZW50LnRhcmdldC52YWx1ZSlcbiAgICB0aGlzLnNldFN0YXRlKHt2YWx1ZTogZXZlbnQudGFyZ2V0LnZhbHVlfSk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAvL1wiRW50ZXIgV2Vic2l0ZS5cIlxuICAgIGJ0biA9ICh0aGlzLnN0YXRlLnN1Ym1pdHRlZCkgPyBcImJ0biBidG4teHMgYnRuLXN1Y2Nlc3NcIiA6IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwiXG4gICAgc2luZ2xlID0ge2Rpc3BsYXk6J2lubGluZScsIHdpZHRoOjIyLCBtYXJnaW5MZWZ0OjV9XG4gICAgc2luZ2xlLmRpc3BsYXkgPSAodGhpcy5wcm9wcy5zaW5nbGUpID8gJ25vbmUnIDogJ2lubGluZSdcbiAgICBpbnB1dCA9IHt3aWR0aDonMTAwJScsIGRpc3BsYXk6J2lubGluZScsIGhlaWdodDoyNCwgbWFyZ2luQm90dG9tOjZ9XG4gICAgaW5wdXQud2lkdGggPSAodGhpcy5wcm9wcy5zaW5nbGUpID8gJzEwMCUnIDogJzcwJSdcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmZvcm0oe29uQ2xpY2s6IHRoaXMuZm9ybUNsaWNrLCBvblN1Ym1pdDogdGhpcy5zdWJtaXRGb3JtfSwgXG4gICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7c3R5bGU6IGlucHV0LCBcbiAgICAgICAgICB0eXBlOiBcInRleHRcIiwgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbCBpbnB1dC1zbVwiLCBcbiAgICAgICAgICBkaXNhYmxlZDogdGhpcy5zdGF0ZS5zdWJtaXR0ZWQsIFxuICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUNoYW5nZSwgXG4gICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUudmFsdWUsIFxuICAgICAgICAgIHBsYWNlaG9sZGVyOiB0aGlzLnByb3BzLmZvcm1UZXh0fSksIFxuICAgICAgICBSZWFjdC5ET00uYnV0dG9uKHt0eXBlOiBcInN1Ym1pdFwiLCBjbGFzc05hbWU6IGJ0biwgXG4gICAgICAgICAgc3R5bGU6IHNpbmdsZX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2hlY2tcIn0pKVxuICAgICAgKVxuICAgIClcbiAgfSxcblxuICBwcm9maWxlU2VhcmNoOiBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdXJsID0gXCJodHRwOi8vd3d3Lmdvb2dsZS5jb20vI3E9XCJcbiAgICBwcm9zcGVjdCA9IHRoaXMuc3RhdGUucHJvc3BlY3RcbiAgICBuYW1lID0gKHByb3NwZWN0Lm5hbWUgIT0gXCJMaW5rZWRJbiBNZW1iZXJcIikgPyBwcm9zcGVjdC5uYW1lIDogXCJcIlxuICAgIGFyZ3MgPSAnLWludXJsOlwiL2Rpci9cIiAtaW51cmw6XCIvZmluZC9cIiAtaW51cmw6XCIvdXBkYXRlc1wiJ1xuICAgIGlmKG5hbWUgPT0gXCJcIiAmJiBwcm9zcGVjdC5jb21wYW55X25hbWUgIT0gXCJub3RfZm91bmRcIilcbiAgICAgIGxpbmtlZGluID0gJ1wiYXQgJytwcm9zcGVjdC5jb21wYW55X25hbWUrJ1wiIHNpdGU6bGlua2VkaW4uY29tICcrYXJnc1xuICAgIGVsc2VcbiAgICAgIGxpbmtlZGluID0gXCIgc2l0ZTpsaW5rZWRpbi5jb20vaW4vIE9SIHNpdGU6bGlua2VkaW4uY29tL3B1Yi8gLXNpdGU6bGlua2VkaW4uY29tL3B1Yi9kaXIvXCJcbiAgICB3aW5kb3cub3Blbih1cmwrbmFtZStcIiBcIitwcm9zcGVjdC5jb21wYW55X25hbWUrXCIgXCIrcHJvc3BlY3QucG9zK2xpbmtlZGluKVxuICB9LFxuXG4gIHdlYnNpdGVTZWFyY2g6IGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICB1cmwgPSBcImh0dHA6Ly93d3cuZ29vZ2xlLmNvbS8jcT1cIlxuICAgIHdpbmRvdy5vcGVuKHVybCt0aGlzLnN0YXRlLnByb3NwZWN0LmNvbXBhbnlfbmFtZStcIiBzaXRlOmxpbmtlZGluLmNvbS9jb21wYW55XCIpXG4gIH0sXG5cbiAgX21ha2VfZW1haWw6IGZ1bmN0aW9uKG5hbWUsIHBhdHRlcm4pIHtcbiAgICBuYW1lID0gbmFtZS50cmltKClcbiAgICB2YXJzID0ge1xuICAgICAgZmlyc3RfbmFtZTogXy5maXJzdChuYW1lLnNwbGl0KCcgJykpLFxuICAgICAgbGFzdF9uYW1lOiBfLmxhc3QobmFtZS5zcGxpdCgnICcpKSxcbiAgICAgIGZpcnN0X2luaXRpYWw6IF8uZmlyc3QobmFtZS5zcGxpdCgnICcpKVswXSxcbiAgICAgIGxhc3RfaW5pdGlhbDogXy5sYXN0KG5hbWUuc3BsaXQoJyAnKSlbMF0sXG4gICAgICBkb21haW46IHByb3NwZWN0LmNvbXBhbnkuZG9tYWluXG4gICAgfVxuICAgIHBhdHRlcm4gPSAocGF0dGVybikgPyBwYXR0ZXJuWzBdLnBhdHRlcm4gOiBcIlwiXG4gICAgcHJvc3BlY3RfZW1haWwgPSBNdXN0YWNoZS5yZW5kZXIocGF0dGVybiwgdmFycykudG9Mb3dlckNhc2UoKVxuICAgIC8vY29uc29sZS5kZWJ1ZygnUFJPU1BFQ1QgRU1BSUwnKVxuICAgIC8vY29uc29sZS5kZWJ1Zyhwcm9zcGVjdF9lbWFpbClcbiAgICByZXR1cm4gUmVhZE9ubHlGb3JtKHtpY29uOiBcImVudmVsb3BlXCIsIHZhbHVlOiBwcm9zcGVjdF9lbWFpbH0pXG5cbiAgICBpZihwcm9zcGVjdF9lbWFpbCkge1xuICAgICAgICBwcm9zcGVjdF9lbWFpbCA9IChwcm9zcGVjdF9lbWFpbCkgPyBwcm9zcGVjdF9lbWFpbC50b0xvd2VyQ2FzZSgpIDogXCJcIlxuICAgICAgICBwcm9zcGVjdF9lbWFpbCA9IFJlYWN0LkRPTS5pbnB1dCh7b25DbGljazogdGhpcy5lbWFpbElucHV0Q2xpY2ssIHR5cGU6IFwidGV4dFwiLCB2YWx1ZTogcHJvc3BlY3RfZW1haWwsIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgZm9ybS1zbVwiLCBzdHlsZToge2ZvbnRTaXplOjEyLCB3aWR0aDoxNjAsIGhlaWdodDoyMiwgbWFyZ2luVG9wOiAwfX0pXG4gICAgICAgIHByb3NwZWN0X2VtYWlsID0gUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImlucHV0LWdyb3VwIGlucHV0LWdyb3VwLXhzXCJ9LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBcImlucHV0LWdyb3VwLWFkZG9uXCIsIGlkOiBcInNpemluZy1hZGRvbjNcIiwgc3R5bGU6IHtwYWRkaW5nVG9wOjIscGFkZGluZ0JvdHRvbToyfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1lbnZlbG9wZVwifSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBwcm9zcGVjdF9lbWFpbFxuICAgICAgICApXG4gICAgfVxuICAgIHJldHVybiBlbWFpbFxuICB9LFxufSlcblxudmFyIFJlYWRPbmx5Rm9ybSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ1JlYWRPbmx5Rm9ybScsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgc3R5bGUgPSB7Zm9udFNpemU6MTIsIHdpZHRoOic3MCUnLCBoZWlnaHQ6MjIsIG1hcmdpblRvcDogMCwgekluZGV4OjEsY3Vyc29yOidkZWZhdWx0J31cblxuICAgIHN0eWxlLmZvbnRTdHlsZSA9ICh0aGlzLnByb3BzLmRpc2FibGVkKSA/ICdpdGFsaWMnIDogJydcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImlucHV0LWdyb3VwIGlucHV0LWdyb3VwLXhzXCIsIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJpbnB1dC1ncm91cC1hZGRvblwiLCBpZDogXCJzaXppbmctYWRkb24zXCIsIFxuICAgICAgICAgIHN0eWxlOiB7cGFkZGluZ1RvcDoyLHBhZGRpbmdCb3R0b206MixkaXNwbGF5OidpbmxpbmUtYmxvY2snLFxuICAgICAgICAgICAgICAgICAgaGVpZ2h0OjIyLHdpZHRoOjM3LGZsb2F0OidsZWZ0JyxtYXJnaW5Ub3A6MH19LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLVwiK3RoaXMucHJvcHMuaWNvbn0pXG4gICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7ZGlzYWJsZWQ6IHRoaXMucHJvcHMuZGlzYWJsZWQsIG9uQ2xpY2s6IHRoaXMuZW1haWxJbnB1dENsaWNrLCB0eXBlOiBcInRleHRcIiwgdmFsdWU6IHRoaXMucHJvcHMudmFsdWUsIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgZm9ybS1zbVwiLCBzdHlsZTogc3R5bGV9KVxuICAgICAgKVxuICAgIClcbiAgfSxcbiAgZW1haWxJbnB1dENsaWNrOiBmdW5jdGlvbihlKSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICB9XG59KVxuXG52YXIgTG9hZGluZ0xhYmVsID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnTG9hZGluZ0xhYmVsJyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC1wcmltYXJ5XCIsIHN0eWxlOiB7YmFja2dyb3VuZENvbG9yOiAncmdiKDAsIDEyMiwgMjY1KSd9fSwgXCJMb2FkaW5nLi4uXCIpXG4gICAgKVxuICB9ICAgXG59KVxuXG52YXIgV2FybmluZ0xhYmVsID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnV2FybmluZ0xhYmVsJyxcbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJsYWJlbCBsYWJlbC13YXJuaW5nXCIsIHN0eWxlOiB7ZGlzcGxheTonYmxvY2snLHdpZHRoOic5MCUnfX0sIFwiV2FybmluZy4uLlwiKVxuICAgIClcbiAgfSAgIFxufSlcblxudmFyIFNoaW55QnV0dG9uID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnU2hpbnlCdXR0b24nLFxuICBvcGVuTGluazogZnVuY3Rpb24oZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICB3aW5kb3cub3Blbih0aGlzLnByb3BzLmxpbmspXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICBvbkNsaWNrOiB0aGlzLm9wZW5MaW5rLCBcbiAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXhzIGJ0bi1wcmltYXJ5IGJ0bi1ncmFkaWVudFwiLCBcbiAgICAgICAgIHN0eWxlOiB7bWFyZ2luTGVmdDotNSwgZmxvYXQ6J3JpZ2h0J319LCBcbiAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWdsb2JlXCJ9KVxuICAgICAgKVxuICAgIClcbiAgfVxufSlcblxudmFyIExvYWRpbmdQdWxzZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0xvYWRpbmdQdWxzZScsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwcm9maWxlLWxvYWRpbmdcIiwgc3R5bGU6IHttYXJnaW5Ub3A6MH19LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRvdWJsZS1ib3VuY2UxXCIsIHN0eWxlOiB7YmFja2dyb3VuZENvbG9yOidyZ2IoMCwgMTIyLCAyNjUpJ319KSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJkb3VibGUtYm91bmNlMlwiLCBzdHlsZToge2JhY2tncm91bmRDb2xvcjoncmdiKDAsIDEyMiwgMjY1KSd9fSlcbiAgICAgIClcbiAgICApXG4gIH1cbn0pXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgY2hlY2tib3hBY3Rpb246IGZ1bmN0aW9uKGUpIHtcbiAgICBjaGVja2JveFZhbCA9ICQoZS50YXJnZXQpLmlzKCc6Y2hlY2tlZCcpXG4gICAgY2hlY2tib3hlcyA9IF8ucmVzdCgkKCdib2R5JykuZmluZCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykpXG4gICAgY29uc29sZS5sb2coY2hlY2tib3hlcylcbiAgICBpZihjaGVja2JveFZhbCl7XG4gICAgICBfLm1hcChjaGVja2JveGVzLCBmdW5jdGlvbihjaGVja2JveCl7XG4gICAgICAgIGlmKCEkKGNoZWNrYm94KS5wcm9wKCdjaGVja2VkJykpXG4gICAgICAgICAgJChjaGVja2JveCkuY2xpY2soKVxuICAgICAgfSlcbiAgICAgIFxuICAgIH0gZWxzZSB7XG4gICAgICBfLm1hcChjaGVja2JveGVzLCBmdW5jdGlvbihjaGVja2JveCl7XG4gICAgICAgIGlmKCQoY2hlY2tib3gpLnByb3AoJ2NoZWNrZWQnKSlcbiAgICAgICAgICAkKGNoZWNrYm94KS5jbGljaygpXG4gICAgICB9KVxuICAgIH1cbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG5cbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICAgICAgICBSZWFjdC5ET00udHIobnVsbCwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHtwYWRkaW5nTGVmdDoxMX19LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIiwgb25DaGFuZ2U6IHRoaXMuY2hlY2tib3hBY3Rpb259KVxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3dpZHRoOjIwfX0pLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiTmFtZVwiKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIkNvbXBhbnlcIiksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7d2lkdGg6JzE3MHB4J319LCBcIkNpdHlcIiksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7d2lkdGg6MzAwfX0sIFwiRW1haWxcIiksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCLCoFwiKVxuICAgICAgICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG4vL1RPRE8gLSBtb3ZlIGxpc3Rcbi8vVE9ETyAtIGNvcHkgbGlzdFxuLy9UT0RPIC0gY3JlYXRlIG5ldyBsaXN0XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vU2lkZU1lbnVMaXN0T3B0aW9uXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvdW50OiAnficsXG4gICAgfVxuICB9LFxuXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICB9LFxuXG4gIGNoYW5nZUxpc3Q6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucHJvcHMuY2hhbmdlTGlzdCh0aGlzLnByb3BzLmxpc3QubmFtZSwgdGhpcy5wcm9wcy5saXN0Lm9iamVjdElkKVxuICB9LFxuXG4gIGdldEljb25UeXBlOiBmdW5jdGlvbihpY29uVHlwZSkge1xuICAgIGljb24gPSBcIlwiXG4gICAgaWYoaWNvblR5cGUgPT0gXCJhcmNoaXZlXCIpe1xuICAgICAgaWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYXJjaGl2ZVwiLCBzdHlsZToge2Zsb2F0OidsZWZ0JyxsaW5lSGVpZ2h0OjEuNSxtYXJnaW5SaWdodDo1fX0pXG4gICAgfSBlbHNlIGlmKGljb25UeXBlID09IFwidXNlcnNcIil7XG4gICAgICBpY29uID0gUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS11c2VyXCIsIHN0eWxlOiB7ZmxvYXQ6J2xlZnQnLGxpbmVIZWlnaHQ6MS41LG1hcmdpblJpZ2h0OjV9fSlcbiAgICB9IGVsc2UgaWYoaWNvblR5cGUgPT0gXCJ3aWZpXCIpe1xuICAgICAgaWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtd2lmaVwiLCBzdHlsZToge2Zsb2F0OidsZWZ0JyxsaW5lSGVpZ2h0OjEuNSxtYXJnaW5SaWdodDo1fX0pXG4gICAgfSBlbHNlIGlmKGljb25UeXBlID09IFwiY2xvdWREb3dubG9hZFwiKXtcbiAgICAgIGljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNsb3VkLWRvd25sb2FkXCIsIHN0eWxlOiB7ZmxvYXQ6J2xlZnQnLGxpbmVIZWlnaHQ6MS41LG1hcmdpblJpZ2h0OjV9fSlcbiAgICB9XG4gICAgcmV0dXJuIGljb25cbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIGxpc3ROYW1lID0gdGhpcy5wcm9wcy5saXN0Lm5hbWVcbiAgICBwcm9wc0NvdW50ID0gdGhpcy5wcm9wcy5jb3VudFxuICAgIGNvdW50ID0gKHR5cGVvZihwcm9wc0NvdW50KT09IFwidW5kZWZpbmVkXCIpID8gdGhpcy5zdGF0ZS5jb3VudCA6IHByb3BzQ291bnRcblxuICAgIGljb24gPSBcIlwiXG4gICAgbGlzdFN0eWxlPShpY29uID09IFwiXCIpID8gXCJsaXN0LW5hbWVcIiA6IFwiaWNvbi1saXN0LW5hbWVcIlxuICAgIGlmKHRoaXMucHJvcHMuaWNvblR5cGUgPT0gXCJ1c2Vyc1wiKVxuICAgICAgbGlzdFN0eWxlID0gXCJhbGwtbGlzdC1uYW1lXCIgXG4gICAgY291bnQgPSBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiYmFkZ2UgYmFkZ2UtZGVmYXVsdCBjbnQtYmdcIn0sIHRoaXMucHJvcHMubGlzdC5jb3VudClcbiAgICBjb3VudCA9ICh0aGlzLnByb3BzLmhpZGVDb3VudCkgPyBcIlwiIDogY291bnRcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgXG4gICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY2hhbmdlTGlzdCwgXG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJsaXN0LW5hbWVzIGJ0biBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgIGljb24sIFwiIMKgIFwiLCBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBsaXN0U3R5bGV9LCBsaXN0TmFtZSksIFwiIFwiLCBjb3VudFxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcIjBcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvODM1M2EzZmMwNTcyNGNiZTQ1ZThjMjNiMzQ3YTM5ZTdfMDk5NGQ0NThmYWZmMWQwYjcxZjBmOGU1MzQyOTkzMzVhNTc2NWJhNGE2NzJlZDgxNzY2OTcyOWY2YTBhMWU5ZFwiLFwiMVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC8xMDdmYzI2OTFiYjhiMzMzM2JhNzhhMTg2MDBmYTU2MV85YTgzMmIyZTI3YzJhYThjZTZlZDEyYzYyZmI2NjU5MzllNGRlMzhmMzBlYzliZWJkOTJmODEzZWE2NzdmOGMzXCIsXCIyXCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcLzQ0MzJhNWRmOThjNWVhZDMyY2EzZWM4OThlMTc1YzkwX2Y5M2VmMGE3ZGRiYTlhYzk2MGM2YTE1OTQxYTY5YTEyNGE1ZDU5NjFmZGUzNDQ1NWNiN2NlZTZjOTdmNzEyYmFcIixcIjNcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMjI5NTgwYjcxNjYwNmE0ZWIyMTQyYjFlYWFjYTEwZTdfMjM5OGQ1MDUwZTE5MWQxNWZmNWNmOWViNjhjYzY4MzY5MGMwNmQzOTQ5MzQ1ZGJmNzkwMzk0NDM3YTQ2NWMwOFwiLFwiNFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC80OTlkOGE4NjNkNzg3MmQ2ZTIzOTUxMjEyNGFmOWRkY183NzExODJkYzdiNmMwODAxZGU2ZTU3MWRlZWQ4OWI0MzdhYjEyMjM3MmI1NDdlMWY3ZDhkYWNhZTljYjE3Mjc1XCIsXCI1XCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcL2E5ZTk3YTY0NDVhOGFjMTg3NTYxMzEwYjE2YjRiYmQ4Xzk2Y2U5Mjg5ZmQ4ZTZmMmE2YmYyNjJiNGJhZjU0ODM2N2FkN2Y1M2FhYzlhOWVjMTE1NzAyMDQ2NWRlMDdlNjdcIixcIjZcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMzVhZjUwOGRhYTRhNTgwODA2OTYxMjM2YmZiNzQzYTFfMWE0YWZlMjY1NmY4ZDk1ZTM3MTc3NTFmOTZhMGM2Y2U2YzViMWQyNTkyMGY0ZDQ1ZTVjZmU5YmJhMDVkZTBjOFwiLFwiN1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9hMTAwMzUwM2VmNWUyMjU0ZTY2OTRlZWJiZDJiNDQ5OV9hOGNkMmNhZWZlNjkxNDc2ZTNmMDIzNTEzNjlkYzJjMDdjMWEzZDZjZTBmODdiMTg3ZjU4ZmRmNGIyMDI5MmM1XCIsXCI4XCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcLzAxZGNiNTI3OGY1NTIyNWI3ZTljMGNmZjZhYTNkNmU2X2I0MGY5MmI5YzVlZjNiOGM4MWQ0NzhiYjcwYjdhMDk0ZjA3NmVkNTliN2QzNmQ3YTY0MDFmMGZkOWQ5NWVhY2ZcIixcIjlcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNjFkNzllM2MyNTEwNTA5OWY3MzY2OGM2MjVlYTM2MWNfMWQ3YzEyNTU5NjgyNThjMDNkMDU2NGUxNDEyODRiNGJkZGJkMmRiNTIwOTFjZjhkNzVjYjM4NGIyMzk0OTM5MFwiLFwiMTBcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvY2E4MDg0NTBhNjIyMmM5YjA5ZDViODY5MjRhMDhmYmJfZjkwZTAyYzFlOTgxZTVmNmNhZjhhZjc2ZmVmZWY3NjUzZDBhNDUxZGE1MWJhNWEyMmFjMGYyNjU4NzRiYzZjYlwiLFwiMTFcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvOTdkZTkzYTk5YjhhOTE1OWRlZGUyYjlmZjE3Yzc4ODdfM2U5MGRmOGU3ODk0YzBjMTI5NjNhYmYyZmFkYjIwNWU0NDM2NWY1OGI1MzdmMTViNjc3YTRhN2U5YzU1N2JjZFwiLFwiMTJcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvOWJmODQwNGQ2NzNjOWQ2MTc4ZjIzNTQ4Y2FhNGM5YTRfNDY2MDZkYmE5ZGY0ZDEwY2YyODJmYTdhZGQyM2U4YTg3YjdmOTc2ZDBlM2ExNTNmYWQwZmYxODFlMWJlNGUxN1wiLFwiMTNcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvN2YzYTQ3NTRhNjM0ZmMxZTM5MDkwYzVkZDZjNDY4MDhfNDJkMzI5NGIzNGM0YWM5YzZmOTlmNjZiYzNhZDlhMTk1ZDIwZTk4YjA5Yzc1NzlmZTM0MWQwY2Y0MmY5YzkzZlwiLFwiMTRcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYjRiZWJiZmJmYmU0N2U1MGY0MzViNGMyZWZlMGRiMGZfMTgxYTMxMTlmMTJmZDAzYjZiYjUxNzM1MmM2MzY1MDg0OTdiZWM2MWY5MDc4YjBlMjgxNTE1ZWZkMTkyYjM0NVwiLFwiMTVcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZWMxZjYxOTBlMmI5YTgwYTNmN2NmMTAxNjQ5Y2NjNjNfMDAyNjAxN2Y0MzgwNTg1YTJlNTQwZjA1OTM2YTZmNThmZTcyNWZlN2U4ZTAzNzhhYWU5ODAzOTYyOGM0YmRmMlwiLFwiMTZcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvOWRkOTIxZjQxZmE4ZDRhYjI5YmNjMWM0NTM0OGI1YTJfMTU4ZGY4YTIyYzFmMTU3MGU4YTJjMTdhYjVlMzAxNjkyNDgwMzA1OTM2NjVmYmQ4NzkyZjVmMmYwMTUxNjI5MFwiLFwiMTdcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYjk3ODZjOWI1NmM5NGNhYTEzZTc0ZDU5YjlhOWRhNDhfMWYxOTVmYmNkZjk1YzBkMjYxOGQ1NzFlMDE5MmZmMWJlMmU0OTIxZDg4YWVkOGI3YjlmZDllMTQ0NDc0OTI3MVwiLFwiMThcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYWE4NTc3Zjg3ODg1OGYzMTg4NThhY2VkNWFiZDAzN2ZfY2I5MjZhMDdkMGU0Njg2NjBlMzU2OTI3OWNjMTM1NGFhNzI0M2NkYzk1MWY5NzAzMjUyNzM5OTNjODllOWVlN1wiLFwiMTlcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYzExYjMyMmQ4YTgwMDcwMzdlZTNlMzI0MmIyNjA5MzBfMmE2M2MxM2IzMTVhMzhiMDY5ZjM4ZGE2NTdiMTg5YWFkNmM3YWY1OTQxYTE5ODU5MTExZGZiM2M3MGM5NGI0MVwiLFwiMjBcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMTliNmMzOTg5YTgwOGJlODQ1NzE4ZDhhZjI0MzUyZmZfYThlNzJhYmIyYjU3NzI3MDZhYzFjNzllNWNiYWY1OWIzYzJmMjBlZmIwYWNhOWI5M2QwNGFlOGEyNDkyMDk2N1wiLFwiMjFcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZjQxMjA5NzBhNjg2YTU2YjQ3NTk1ODU4MDgxNzdjYzdfOGUxNzVlNDk1YjFkZTkyMmNjZDlhOTJhNWRlOTdiOTU0MzM0NDRhY2E0MjJiM2U2MzJjMmVhNGVkNDhkM2JjOVwiLFwiMjJcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYWVlN2U0MGIyZGQ0YzRjOTk2MTMyM2Q5ODI0OWM4MjZfYzFjMzg3YzcxNGU4OWQ1ZGZjY2YwNmQzZmUwZmVkMzMyOTkyZWZmODc3Y2RiZDYwYmM0ZTk0ZTdhMmVkMzhmZlwiLFwiMjNcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNjZkMThiYWZmZjRmOWI4ZDA3N2MxMDdiYjczYjI5MTJfZjgwNTUyODllYWU1OGZhZDAwY2MwZjY3MjdiMmI1Y2YwZjcyYjgzNzk2MzM1MWI3Y2E2MjUwYmE0ZTI2MzJhMVwiLFwiMjRcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMmRhODU0NmMzYjZhOTliMTkxMjQ5YWU2OTIwN2UzMWFfZGI4NjY4MTMzMWQwZDJiOTg1MGU1NTk2Y2U3NzExYWMzODZmNGUxNDY5YzUyNjkzNDI2Nzk3OGFmMzQ5ODMzOFwiLFwiMjVcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNTYxN2Y3Nzg3Y2RmMDE3NmU1NGM0ZjEzZTljY2M1NGVfZGE3Y2MxNjlmNDY1ODVkZTcyYWNmNWY3MDVjZDM0YTUyYzY4OGE0MGRjOGFhNzJlYTcyMGQ1NTZhNzAyMmY3MlwiLFwiMjZcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZjdlMjcxMmFhOGNmYWI4OGM1NWQxZjZjNzhlZjJlNDVfNWM4OTVjYTA2ZjQwZTMwMzY5ZTA3YjE5YzY0YjdiZjFmZTViZTA5NzdlNWJiZmMwYzIyMTJiNzNlYTZlNjUxMlwiLFwiMjdcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMjlhYjcyYzJiOTdiMjVjNGUzZTFjMjgwZTMyNjRmODBfMDY5Yjk0Y2FhZDNiMTRlMmJiM2IyMDEyYTUxZDk0ZWQ4ZTQ3NmYwYTNkOWEzNjhhYWMzNmRiOWQ3MTZhMTJhZlwiLFwiMjhcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZWUxN2E3ZDkwYzgwNjVhM2FiY2QwYTY3MjBiNTJlNjZfM2I5OTM4YzI2OTNlMTQyYmEzNzA2NWRlMjRkYWJlYzU1NmExOTJhZGQ0Yjg0YjRmMjk3ODVjZWEzYjc0ODUzZlwiLFwiMjlcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMTZmNjFlYmYxODEwYWMzMzNmN2M5MzZjZTcxMWIyOGFfMzVkNDNmM2QxYzc2MmIyMWQ2Mjk2MzRiNDU4NGQwY2Q5NWFlY2RmZDlhMzA4N2YyNGE5ZWI3MjlkMTM0Yjc2OVwiLFwiMzBcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZTMxOGNjYzUxMjFjZmViM2I5OWMyMWQwNTVlNmVjZTlfZWRjNjA2ZDRiY2QzZDc2ZjhlNDVkYTk2ZDlkYmQ2NTFiZjBjMDY3YTdjYTE1OWUxMDczZTNiNDRiMDM1MzBjOVwiLFwiMzFcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZGY5YzkwZjJiOTNhOWU0ODhkOTRmZTUyNzI1YmQ3OThfM2IwZTMzOTZkOWRlYTg2Njk2MGQ4Y2U2ZjY3YWYxMGM4ODA5ZjE1NGI2ODMxZmMyNzhiOGVkMzQzOTBhOWYyN1wiLFwiMzJcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNmVlZTM1N2QxMjFjODE0YTk3YjYzNjJjNGU1NTUyNmFfY2JmZjRhYzQzOWMyMDU0ODEzZGVhOGRhOGI4ZjFlYzNiNWUwYzY0NGFjZjBkYzJhZTYyNTc0MWU5N2YwYmVhMFwiLFwiMzNcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNTYwYWVkMWJlZThlMjIwZjA5ODAxOTBkZWRiN2FkZDZfOWFkMmRlN2M2ZWJmZGQ3MjRmMmExN2M4NWVmZDUxOTJmODM5M2E0NzdkZGRmMGEwYzhjOTI2MGUxN2Q1YTUxNVwiLFwiMzRcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvODUwZjEyNDJkZGQ2NTM5YWQ4YjI3ZjY5OTA4YzdmOWVfMDhmZmVjZDJiNmQxODRlN2Q3MGFiNzBhYmJiYmFiZTcxMzIyNjkyNTBjOTNkYmJkY2JhN2YyMmU4NmYwNjkyZVwiLFwiMzVcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMDc1YzA2YzQ4MWVlYTQyOWY2Y2M4MTY2OTdmY2JiZjhfYzU1Yjk5YmUwNTBiZGNiMWYzMmM5NTc4Y2I4ZTE3ZjZmNGQ2ZjIwMGMxZjM3ZjUyOGMyNGZlZTY1YTI2MTgyYVwiLFwiMzZcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMDI4YjMxMTBhYTYwNTU0ZTc0MzRmMWEyNDczMjI5Y2ZfZDE1ZTFjN2YwMGM4Mjc1NWUxNDQ3NzNkNDZiYjRlMGU5NjRmY2ZhNDI1YTI1NGNhMDVhYzEzMTNmY2VhM2JhZVwiLFwiMzdcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYzM3MTlmODVkMjRiYWZlZjY0ZWFkYTY0ZTczNWNhNzNfMDI1ODgwYzUxZmY0MmJkM2ZmNzliYTM1ZDQ1NmQ4Y2IxNGI2ZmJjN2VlMTdiYTNiOTg2MTJlNzFhYTFkNzRiOVwiLFwiMzhcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMjIzNTZhYjZhZTQ0NjdjNDRhMDc0YTQxMzRiYWQ5MzdfYTk5MDljMzdlNmUyM2I0MzQzY2UxOTU4MmM5MTE4Y2ZiMzc0OGI4OTc3ZjFkYjgyMzBhYTk5MmQ2NDBmMTIxN1wiLFwiMzlcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMjEzMmU1YTJmY2Q4OWE1NGU3YzQyYzVmYTBiOGVmNzdfZmYwZGM0NjUxMWIxNTBhNGIwYWY5Y2RmODY2YWYyZTA2Y2U4OThkNzExOWI3YWIyMTM1MGUwYjMzMDRkODA2NVwiLFwiNDBcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNDVhYWE3M2I2OTNhZWVjNDE0YjM0ZmQ0NDI2MmVmOGZfNTFjMjI1MzJhYmUwYjYxNWYwZTZlM2MwZTkxY2IxYTliY2E0MWE2ZjZjMGVjNmYzM2MzNjkzZDEyOGZkMTc1NVwiLFwiNDFcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNTdiYzJkMWEyYWI2OTJlMzgyODRmMzU1MGY1OGIzODFfMDNiZDQ0MTE3MjAwMWUzYzJlNTA4NGYzMzkwZWUwY2EwMzI3YjUwMmIwYzFkYzc5NGM4YzhhYzJiM2QyMTMwZVwiLFwiNDJcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNDc0NWFkMDc4MDdjY2FkOTdlMDcyNmZjN2JhMTgxNzBfNDg5MTFhNzI3NDc0YzAzOThjM2ZjNzAxODgwZDYyM2ZhZWRjNTkyZjE2Njc3MzEwZjhlODExMWEyNWUyYmUzN1wiLFwiNDNcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvY2QxNTk0YzYyYTMxYzgzMWQxMjRlMjg2YjY5MDk3MDBfMGNkOWQwNjAzOTJjNWY1ZDU3NWYyOWE4OTMwYzU1YzY5YTU0NTAxYzFkNzYzNjkyOTY4MmMzOGU0ZTA2OWQ1ZVwiLFwiNDRcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMWYzZGI3NzEyMzEzYTNiY2ZlNWZmNGE5OWI2N2ZjZGZfYTY2YmVjMGE0MzE3OTUzMWJjZTgwMjBhYWFkZTNkODU5NjdiN2M5ZGY1NGFiMmJkZjQxZjEyZjZjZDYwZDNlZlwiLFwiNDVcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMjY0M2UwMDg3NTJkYmZmZDE3Y2Q3ZTRjZWEzMGJiMDhfODY3ZmQ5Yjc2YzUzNDJiOTE0YmQ5YjI4NTc1NmFjMTBjZjA0ZTFiM2FkOGNiNjUyNGEyYzk2ZDdhYjc1YzA3YVwiLFwiNDZcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZDg5ZmQyOTU5ZjllZmRjZjcwNzc4ODAxMjUzYTQ5MjBfOTdhOTA2Njg0Zjg0M2U4ZWEzZjMyMzc3OTdhZGM2MDFjNGQyMGRmY2M3OWU3YjZlNzU2NjMwMjA2MzEyZmU4OVwiLFwiNDdcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZDBiNzkyMjgyMWM3M2JiMzQzNTdiOWE3YmJmMjI2N2NfZDYzYTRlNDY1NTY2NTI2OGVhOTJkYTA4MDYzYzk1ZjMwOTY0NmY5Njk4MTI1YjMxOGIwNjIxNDg3YjkwNmNhNFwiLFwiNDhcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYjc2ZjhkYTk1MzhlZWE5ZWI0ZDg5NzY1NmY0YWVkOGJfZjQ5ZmZiOTc1MTM0OTNkMDU2ZjQyZmUzMTY2NTBmMWZiNTA3ZmMxZWJlN2EwNGFkODQ1NGZkMmI1OGM1MGVhN1wiLFwiNDlcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMTkwMjg1YzY1M2ZlMWQxOGRiMzI1N2VlYWY0YmU0M2JfNjBhYWM1NjE1YjhjMDlmZjNjZmM4NDBlYWZiYjAyMDhhOGRjNDgyNGQ5NDJkZjEwNjM3ZWQxZGM0MzE5ODg5NlwiLFwiNTBcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYmRlZTExNDQ5MDk3Njg1NDRmYjIxNjVkNWUwNTNlNjVfMDFlZWIwYjY4ZmJlMDM4YjMzYmQwZDk1MmNlNjA1OTBiMmZmNTJjMzJkYTMyYmNlZWU1MTg2NTJhODllODE0MFwiLFwiNTFcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNjdmMzgxNmZmYWUzZjcyYmU0MmE3ODUzNjA3ZmY1NDVfOWI3N2Y3ZWU5ZWQzOTlmZTc3NjY0YTBjNmNkZWQzMDlhMTQxODdlZDMyNWI3ZGFjZTliNzRmNThkMzg0ZmE3MFwiLFwiNTJcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNDMxNGI2NTkxY2NlY2FhM2ViMjY1ZTRlODkwMDIxZjVfMTM1ZjQyYWM1MjVjNzE2MGM2NjgwZDk5ZDA4NDYzY2NhNGY0Zjg2YjRhMGExMTI1MmIyNmM1N2Y3ZjY1NTJlMlwiLFwiNTNcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZGMyNDk4YTIyMTBmNWM4ZGZjOTM4OTA5NjcwYmE2OGZfYmI0ZWRiMzI0YWViNzZmNDgwOWQyZjJmZmVmMDM2ODE1NDk3NDAwZmQyNzZmODM2ZDkyM2U3ZTA5OTljMzU1MlwiLFwiNTRcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvOGVhMmY4YWVjYjY1YmNjM2NlYzY5MWJlMDYxODIyYTZfYzllOGNjNGZmNjcwZGVmMjZhMjAxNGI0NjU4ZjU2MWJiMzlhZjc1NTcyN2FiMzFhMDRiNjZjNzAzZmFhNmJmY1wiLFwiNTVcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvY2M2MjIwNTA4ZDZiNTA5OTNlOGNiNDllNmMwNzJhM2FfMjY2ZDU3ZDQwODI4NTk1ZGNmOTk2NDA3Njk1NTI0MmNiYzZkOWNkYzc4YmJjMzIzYmEzOWYwODgzYzA1ZmRhOFwiLFwiNTZcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNmQyMDBlZTM5ZjQwOTZmNDliNTIzZDk4ZDg1MzZiMDNfMGUwZDE5MjdmNjU4YjE0ZmYzNWEyNGM5ZDhmYzY5MzE5MGM5ZjczOWE2ZDE0YjM2MzhhNjllOTAxYjFhNDk0Y1wiLFwiNTdcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZGVhZjBkNGQ0NDMxZDZiYjJkY2M2YmRhMTI1NzVkYzhfNzg2YmU3ZThlMzU3MzE3MGUxNDJkMWMzOTc0ZjE4ZDZkNjlkNGM0ZGQzY2EwNjU5MzQ2N2YyZjUzZjgzMTg5NVwiLFwiNThcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZWJmMzM5YjI5NjM5MzU1YzAxYTdlMWQwYzkwNTViYTNfMGMyYzYzNTRhZjU4YzcxZWVlMTc5Zjc3MmI4ZjljOTU1NjExMWMwNDJlZGRlYzQ4ODY0MjIwNWZjZTkwMWY2YVwiLFwiNTlcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYWRmNzU4YThkYzAzMjIzOWQwNWMyYmYzMGE0YTBlZGZfMWRlNjk1Mjc1YWFmODRjNWQ5NjI0ODcyZWZhY2MyMWYyYmIzNWQ3NjkwN2MwMzI3ODlmMGE4YTkxMDA3YTc1MVwiLFwiNjBcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZmNmZDczYjZlM2ViNWE5ZTI0OWIzNzlhNmY1NTlmYzdfN2YxMmZlZWVmYjc3N2M1MmRhMmMxNzViZmMzM2RkMTlkYjQwNzQ5YjM4OGFmNDM1ZjRhNjhjMGYwNmI0ZjlhZFwiLFwiNjFcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvM2M4MmQwOGJjYTc3MDA5OWJiMWZjZGJkYTIxNDg0ZWFfNGIxYjFhMzE1NzE3MTE0NDA0NDYzMjdhMzczMjdjZjg2Njg1MzA3ZjdkZDU4YWQyNmE1YjU2NGIzODRkNTRjOVwiLFwiNjJcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZGEwODVkZGY2MWZhYmZjNTIzYTZkNWJjMjJlYTMwNWJfZjE5OGRjNDc2NDEzYWU1MjRlMjMwZWJjZDQyOGY0NjQ5NTA5YTY0Nzk0YmIxMmRmZGUwZDhmYzJkOWNmODc4MlwiLFwiNjNcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNTEwYzU3YWM4MThkMDUzNzAxMzIxZDE2Y2ZlZDhiM2VfNzQyMTBkOTlhYTY1OTdiMjI3ZmU1MjFiMGM3ZTEyOGI2NjUxMGRhNmIyY2ZiZDY3ZjRkMGQwZjhiZTdhMWMxMlwiLFwiNjRcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNDAxMjIzMzQ5NjBhNTk1NDI1NWNjYTg3ZDAxYmE1YWVfMWQ2ZmE3YWIwN2ExNWRmNzllNGM2MWNlYzVhMzY5ZTZlN2RjYzdlNTdlYmZkNTJmZDkzNzYzMGUwNTZkYmYzMlwiLFwiNjVcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMjgxYmMwMTBkYTY0NjA0NTQ1NTMxY2E0MDc0ZWRhMmVfOTFjNDc3ODJlMWU3ZTE5ZTU4ZDNkNWRhOWU0M2MxYzUzNTA1YTE0NWRlNGFkY2QyMjkzMTcyMWY5NTFlZGNlZFwiLFwiNjZcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMWYwMzA2YWMxNWYyYTExNzA3ZmI2NjM3YjY0YWI1YmNfYmJmNzVkN2EzMWFmZjYzODkxNmIxNTRkMjYzYjJmYTFhZjlmM2Y1M2VmMzEyNGU1ZDQ3MDI4OWIxYjRkYzVjNFwiLFwiNjdcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvOTkxNDdiNDI2ZjAyZWE2M2Y1MmQ3YjkwOTZiZmJhOTVfMmFmOTE4NTRlODlhODIxNDY2NzIyMmVhODcxZDk4ZWI4YzFjY2FmNDk2OWVjMTI5MzU2YmUwZmNlMmVlY2E1MVwiLFwiNjhcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZWNlYmIxN2U1Y2EyM2RhN2Y0MjBmYTM1NzQ3MmJmM2VfOWRjYzkyZTY5NjZkNjg4Yzk1NmUxZTZhMGFiZjQyNDk5Njg3ZjllODJiODJhMjQ5OWQ1NmJiOTNhNTliMmJkOFwiLFwiNjlcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYWE5NjhkNTEyODE1MzIxYjVjNzRhZjQ4ZjNkNTNjM2RfNzRmN2I5MmE2NmY0NWY4ZTA1MGE0NmY5NGNiNjc1ZGI3ZmMyNTdhY2VmZWQ3Y2VkNmZlODVhODJjYWE5MzEzOVwiLFwiNzBcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMjQ1MWVmYTM5Y2I2ZWU3NTc2YjQxZTE0YjkwNzkyNWFfZjQ4ZWM5MDNhYjIyODEyYTM4NTc0MzYyNWU5NzJlNzY3NzNiZGJkM2UzMjNjNzM2ODlmMjdlY2NhYTlkOTBiY1wiLFwiNzFcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNmVjYTVjNDYwNzQ4MDE4ZmU5MWY5MTlkMzVmMWRlMDJfMjExNmQ3ZTljODMzMDIxYzdmYjU4MjM3ZGIxZThhYmQzZTM3YTMyZjY1MmU1NDQ5ZmViOTRjZDI4N2NhNjNjZFwiLFwiNzJcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZDIzM2Q2NWRmMmEyN2I0ZTZjMTc3YWIzN2Y3MjZjMzNfY2VhN2RiY2I3NzcwYTk3OThhNDlmY2UzYThkNTU2ODljNmI3OWFkNzEwZThmM2FhMDEyMWJjYWJkOWIwMTc2YlwiLFwiNzNcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMDYzMjE1OTQzNWU2N2JkZDJhNWZmZDY4NDcxMzYxZjBfYjc3MTFiOTZkNDliZmUwN2JhNGM2YTk3MDA2MThjNjk0MjVjNjY3OTk5MjA5Y2NiZDc1NzU5MjU4MDViMGI1YlwiLFwiNzRcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMWY2ZWRlYmQ1NTk3YmFlN2RhNjNlN2FkODYyMTRjY2RfMGJjYzVlZTE4YTk1MzkwNDM1MjRmZGFkNWQ5Y2JkYjUyNzUxNDE0M2U3NTVhMWEwNTE2OWUwNWUwNmMzNzk0MVwiLFwiNzVcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMzE4NzRjMTJkOWRmMmRmZDg5Y2I2YTQ0NmJkYzQwNDJfNjExNjQ0ZTBlNmJkNjZmMjkyNzBiZTk5OWFmNWQ0YWVlMzdhNTg5OGQ5M2RkNDFjNDZkZWUxMTFmNGU2M2ZhM1wiLFwiNzZcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvOTViYWQzMWM4MTI3ZGVlZjhhZWY3YThjMGQ5NjI4NWZfMDViNTU4Yjg2ZGI5ZWQ2MWJkYjEzNGU3ZTMyZTU2ZGRlYTk2MGQxODA2N2M0ZDQ0Y2I3YjIwN2NlYjU5MmU1YlwiLFwiNzdcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZTFhMjFiNmE0NjViYThjMDVhZWM5N2ZhNzU2OGVmYjVfODg4YWI4YWI0MjRhMzJhNThiMDA4MDhjYTJmNzE2YjkwMzk5M2E3ZDA3NmI0OTI1YzUyMTE3YTI0NjdmZjA0YlwiLFwiNzhcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZDhjMjViM2VkOTFhOGZjOTFmOTNhYzU2Mzc3YzlkY2NfNzJhZmQ5NmNiMzlmNWQwN2VhMjg2MzYxZWRiMjY0NjI3ZDFmMjM0ZTg3MWNlNDgzNzFkY2E1N2JjNDRjN2E4MlwiLFwiNzlcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvOTViMTkzZTBkYjBmODk2NWRlNWM3MGE1Yjk2YmIwNzFfNGI1ODdhMzhhNWIzYjVmMmViNmFkMzdkNzQ1NTMxZTcyM2VkYzA3ZTM4ZWI2ZDRjZmVjM2E5Mzg2ZjY1YjFlOFwiLFwiODBcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvOTBiM2RhN2U2MmJiZDk5NmI3MjI5NzVhMzIzMGYwZjNfYjNlODllYmUzYTBmOWQxYTY1MDg3NzFlMTEwODYyNzg4NWI1ZGY3OTM3N2IyOTE0MTNhMzUyODRjYzUwNmY1ZVwiLFwiODFcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMzI0MjE1NjM1M2M5MDY1NzdlOWVhNDBmOTIxMzk3MTlfNzZjYjY3YmNiODIxZWY0YTgzYjQ3OTY4MzJiMTVkM2FiNDQwMjYyNzUzNGRlMzZjM2ZmNTkyYmEwZTBjYWNiMFwiLFwiODJcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYTRiZWI2MzRmYjk3MmVmOWNhZWZlY2Y0NzUyN2UzNDVfYTE4ZDY4NTE4ODJkMDNkNDM3MGZhMTJjODY2ZmNkOTFjYWE5MDdiMGNkMjI2M2E3MjIzNzhjMzk5ZmI1OTJiNVwiLFwiODNcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMDQ0N2NkMjVlNDUxNTU2OWMzYjYxM2JjNGJkODhhMDVfYzM2NTZkZGJiZjVkZmM4NGU0NGMzNjE2Y2ZhZDQxMjY3YzhkNzMwZTAwZGI1OTE4Y2NjNzc1NzNmYWMwN2Q0OVwiLFwiODRcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMWUwMWE0ZWNiZWI5Y2E0NmE2M2I3NDVjNmEyZTQ2MmRfM2ViYmJhYjE0ZGYwZTJkYjQzYTI5NDhjMDI5OGFkNjdkZWQ1MzAyOWVmZTlhYmE2YmQ0MGIzZmQ5OWQ1YWExOFwiLFwiODVcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNTU5YzUwMmFlYTdhYWI0YTExZTEyMTc0M2M5ZDdjNDNfNjljYWNjZmVlNDlmNzQ3ZTcyYTQ3NjhhZDQyNzRjOGI2ODc1ODQ4ZTlhYjdiMmM4NTE3ZTIwOWQzNmJkZmIzMlwiLFwiODZcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYjI3YTNhZmE5NWQ4NDliNzM3NWEzMDQ3NjliZDNiZjNfYWNhZGE3YmJjYTIwODNjZTU1YWIxMTllODg2NjZjYTBhZTEwYTRhYWM0NDhhZDVkN2Y0NWVkZjAwNzc4OTdhMVwiLFwiODdcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZGUyNGFlNmU2YjUzMWJhZDU3YzM3YmZmY2FjMTk1NGRfMmMxNWYzZGEzNTkzYzk1MjYwNzhiYjgwYmM3ZmFhNjZlYzA4MWIxY2NhZWEyMzFiNWMyNTliZGI4MjdmNmZkOFwiLFwiODhcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNzM3NWEzMDhjNzY0ZTQwNWY5MmFiOWQ5NDM5NDI5NDlfNmI3YjM5MmY1Njk0YWJjZmJiNzBkYWY0NThjMjIzNjlkYjJmOWI4OTA1ODNlM2UyZDcxM2IwNDZjZDg0ZWM4OVwiLFwiODlcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYTFmYzhiNGNiNWU4OWYxZGMzZWQ3NGVjOGJhZmMzYTVfNGQwZWZjNzE2ZjNmMmNiN2JkYTY4OWU1ZGFhN2JhNWQ5NTRlZTU0YThmOTRmNzc1NWIzMDMwNDM5NzBiMWQ5OVwiLFwiOTBcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYzRmN2QyYjYyOGM2NjFkMWJhYWQ2ZmYxZjQ3MjJkYThfMTQ5ZTJiNmYzYWQ0ODhkMTBmY2U2NzE0NGNjZWU2YjY2NTE5ZDlkN2Y4NDgyYTFmZjBjOWFlNjI3ZjFkZGJjYVwiLFwiOTFcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMDk0NTk2NDdmMzkyOGU3Nzc1MjQ0OWY0MThhODVjMjdfN2E3MDRmOGNmYWVhNjJhMTk1M2RmZDFlMzQ1ZWI2ZTNhZWUwMjExNDE4OWYxODZmMDE4MWJmZjNhN2U3N2ZlNlwiLFwiOTJcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNjU1YTdkYjg2MmNjZGZhMTYyYjZlYTBkZmZhM2VmMWVfNmViMTMzZTcwNTg3OGU2NDBhNDI3YjY2NDY1NjE4OWYxZWE5MzMwMjg1MTMzZTRhNzNhOTQzYTA5NzYwNmRhNlwiLFwiOTNcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNDM0ZDgyYjQzMDI3OWQyNmJjZGQ5YmQxM2RkZWM3NmZfNWNiYWQ3ZDdlYjY3NDBkZWJjOWUyZTNjMWI3MTk3Zjg2MWI3MDVlNmU3NDM3OTMwN2E1YmM5MDBkNzUyNTBmNVwiLFwiOTRcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMTQyZTY0YjA1MzVhMmIwYzNiYjUyNTNjMGQyMjY2YTlfNmM3NDAzY2RhNmY4ZGM2MWViOWQyYjMyZDM3ZjYwOGMzNGM2NDExMDFkNmEyZjM1YzA3MzkwNzg5OGE3ZTRhZVwiLFwiOTVcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvM2Y4NzkwZjExMzRmMDUxNGFmM2QyYmJjMDUyMDkwNjBfNjM3N2U1ZGNkZjBkMjMyZjFhYTgxMzkwMjJiOGM5MjgwZjhiNDI5N2Y3MGVmZmYzZTBmN2Q1MjQxN2MxZWIyM1wiLFwiOTZcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMjIwYTcwNTI5MGViN2FkYmNkZjA1MmRkYjJkMTFjOTlfMDYzNzRkODU0NmQ1Yzc0NTY3MWQ5ODY4NmYxYjRiMGRkMzFkNzc3YjFjN2JjZGQwZTZkZmU2M2QwYTIzZTcxOVwiLFwiOTdcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNTEyNDliYjZmNTA2ZTQyZTE3YmY5MjQxZWY4OGI2YjJfYzEyMjEyMDVmODU0MzkwZGYxZDIxYWEwNWU1ZDBkZTI2NGIxYjk1M2M2NTlhMTBjMTg0NzhjZmQ3Zjc1NWVmZFwiLFwiOThcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMjg0YzAwYjVmZjExODlkMmJkZGY2N2RmNDA4ZWRjNGVfMDFjMTkxN2EyNDRmY2FkZjBiZmQzOTMzYWYyMWM2ODRkZDkwY2EyNzQxMTEyNDgyMTIwMjUzNjFkODU1YWIzOVwiLFwiOTlcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMzc0ODNmZmUzNjcyNWUwNWFmMDk1NGE1ZDlhNTVhMjZfZGFmMGEyZjBlMTBjOThjMmI3MmJlOWMwZGEyNGIzODMyMmYwZjk1NjczM2E0MjU2NTM2NWVlNjE1NTY4YmEwN1wiLFwiMTAwXCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcL2M2YjAzNTMxZmVkNDRmOTZhY2VjYWIyNjgyOGZiZTM3XzMwMzkzYjZmYTMwOTZhNzRiZmE1MWNhZDFjYjU4Zjc2NjA4NDgyNjNmMDFmMmY3ZDJlMTJkYWUzYTViMWMzZWRcIixcIjEwMVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC81ZGM5MzQ1ZWU2MDkyY2EwMDZmNzc3YjQyYjM0ZTg1M19kZjEzYWQ3YzYxNDA3ZDFhMDBlMjYxZmNkNWZjZDkzYzE2ZTFhMGMxYmUxM2QwOTAzZDc2YTIxYTg5Y2QzNDU5XCIsXCIxMDJcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvMWRiZWY5ODQwOTM4ZDVlMzA1NjNjM2Y4NDRiOWViYWNfMTJmZTEwZGY2NmE2ZWU0OGJmZmU3MjU3OGE2ZjQyZDM0MGZmMGI0Zjc1ZDRmZTY1ZjZiZWQyYjc1ODQxZTk3OFwiLFwiMTAzXCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcL2MzYWYyOTJhOTE2MzM5ZTZjNTdiYTBkMDM3MTJhNDQ1XzI3M2MzOGJlNDIyMjY5YTQ2NDY2ZDQ4NDk0YzUxM2RhZjUzYjNhNjY0NDBiNjQwMWM5NGMzN2YxZTU1MDcwYzJcIixcIjEwNFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9iNDRkZWQwYjA5MDA5NzUyOGFmMmM0YWQ2OTRjMmE0MF8zZjVlZDU2YzY2MmRhODllMWUwZjNhZTYyYTY3ZjllMTRlYTIzODRmMjk4NTI3N2IxY2RmYTZlYmZlMWQxOGM5XCIsXCIxMDVcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZGY4ZWE4NjkwNmRlMzA3YzUyY2I5Y2YzYjIyMjgwNDNfMzEyYmRiZDk1MzZlYzM2ZTQyZDgzMjhkZWY4YWYxYWZjYWFmM2Y3MDU5MTdhNjI4ZWE0YWRkMDBiYTc3YjhiNVwiLFwiMTA2XCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcLzY4NDZmNjFkNmJmY2Y3N2FlY2Q3MjA2YzZhZGI1YmU5XzY0ZTE0OTI0N2U1MmU4NmI2NzFmZGQyYjcxYWMyNzg1MmQ1NGFlNmViNmY0MDU5NDU4YmRiMTE2MWYzMDBkYWNcIixcIjEwN1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9lZjRhMTc2NTkxMTQ1M2RjYWU4ZTRiZGQ1ZDMyMDNhMV8zMjFjZjNiYzg3MTBhNmExOTU3NmRmZTkzNjc3ZGVmNDY2NmRhMGI0NzQ0NDg5YzI2YWE0NGY3NWE3NTMzMzNlXCIsXCIxMDhcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvZGMzODFmOWUwYjYxOTNlOGJlNWQ5NDU5NWVkMWM0YjdfZDYxMmFmZGU3YmFmNDNhYzVkYWVhZTllMGVmZTQyNzgxODY3YmMzNDUxZTNlODgxNDI1M2NiZmM0NDEwYmI0YVwiLFwiMTA5XCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcLzk1NzlkNWRkODUyM2M0OTNlMDU5MGUzODgxZTI1MDQxXzEwNmMzOWI3ZTk3ZmRkNTdhYmI5OTJlYzdmZjdjMGYwYjE1ZjBmODNhMzQ4ZTNhMzY5OGUzZmNiZGNkZjI4MzZcIixcIjExMFwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC85NWNmZGEwY2I3YmZhYWMwZmM3ODljZjA1YzdlNTEzZV9hNTA5MDQ5YWVhMDI4ODZlYjQwOWM1M2ExNWUwM2E2Y2Y1ZWI2NTgzMTIwMjY3YmJjYTc1YzIyMDYwMjdjMGIxXCIsXCIxMTFcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNmUwNWRhYWFiOWE4MWEyZWE1MzQ4YjcwODMzYmRmYjZfMDIzZWIxZTk0NzY4NmFlZjc3NjRhM2NlNGM5NjgzYjQ3ZDIyMzVjNTFhMDMxZTM2Yjk0N2U0Mzk4ZWY2OTA2ZFwiLFwiMTEyXCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcL2QyOWQ0ZmNiMWIyNWE5ZDQyNGExMjgwMDg2OWEzYjY1Xzk5MWQ1NjM4ODBhMzM0NTA3M2ViYjRjYzNjZDU3Nzc4ZWY1Y2ZiYzNhZTYyNWNlZmVjMmZmYzNiNjkwYTVhYTVcIixcIjExM1wiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC85ODM3NjRjYjUwNzVlZWRiZDk2ZWMwMzRkZjEzNzRhMV9hOTRmNWExZjBjOWI0NWI5MDgyMDQ0ZWJlNzI3NzRiMDMxM2E1OGU1YTJmNThkMDBhNjM4MjdhZDdkNDhiYjYyXCIsXCIxMTRcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvOWFiYWZlZDdhOTE5ZmU1NDA0NmFiZTQ1OGE2YjMxNDBfNDAwM2M1MjI2MDgzYjdiZWI3YjU5MDFjNzkwMjdlMzgzM2JlMGFlYzc4ZGE5YWEzZmMwNWYwMjkzZjViYjQzZVwiLFwiMTE1XCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcLzQyNjhhMjMxZTM0Yzc4YTgwN2JkNTFjN2Q1ZTEwNjRlX2E5MDQ5Y2ZkOWNiYmIyNTA0NzRjMTM2NDcxMGRjZDI3NmUxODk2Mjk3YjJkZWUzN2I2ZmZhZDk2YTg4MmJkYTlcIixcIjExNlwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9iODBiZTU0YmYwZmJiNDNlYmQ4YTIwZGNhNGQ4ZjZmMF81NDRkNWEzNGUxZDk1OWU0ZTc3OTRjNTg1MDNiMzQ3OGRlMzNlYjRlZjIxZThiNzQ4MzliOTUwYWRkYTdkZWRkXCIsXCIxMTdcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvNGNlMjgzNzFkZTY1YTIyYTI0MWRlZTI4MTI4ZGRhNGRfMGRhZWM2ZGZmZTZiZDcyNmYzMDMxZDUxYTM5NzI4YzRmODhmNDg0ODJlYmJhZTZjMDVmNzU4Y2EyNGRkMDg5MFwiLFwiMTE4XCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcL2M1NTI4NGI4MDk4Y2JhYTlhMWRiMDhjYmRmNDZiYWU4XzZiYWE3YWNlZmIwMzhhY2JiMmZlZGJmZGNlNTU2NzY2YzQ4MzQ5YzVkMTMzNzQzNDdhMjZiZDgzZTJhY2YyODNcIixcIjExOVwiOlwiaHR0cHM6XFwvXFwvZDJvanB4eHR1NjN3emwuY2xvdWRmcm9udC5uZXRcXC9zdGF0aWNcXC9kZDc3Y2Y0MmY2OTBlODA4YmI5ZDgxMzFiN2NlYzQ4Yl8wYjM3MTM3MTZkMTEyN2IzNmViMzM1NzM3Nzc4Y2NhM2Q0YjdiNDc2YTk5YTU3MWExMWRjMTE4ZTcxNDYzZDJiXCIsXCIxMjBcIjpcImh0dHBzOlxcL1xcL2Qyb2pweHh0dTYzd3psLmNsb3VkZnJvbnQubmV0XFwvc3RhdGljXFwvYzY1N2UzZjI1YWI5YWU4NWE5OWU0MjEyMzFhNmM2YThfMDZkZWI4MWNmZWM3MGRiZDE0ZGE2YmI2NDcxYjhlZTRiY2MxNDJlZTA4YjYwNzE0YWY5ZjkxNjgzYjQ2MWU2YVwiLFwiMTIxXCI6XCJodHRwczpcXC9cXC9kMm9qcHh4dHU2M3d6bC5jbG91ZGZyb250Lm5ldFxcL3N0YXRpY1xcL2NkNGZjNDI2NzA3ZDYzZTRkOWI4YmM5MjA1ZGVhM2ZjX2NiNjQ4ZmZlNzBlYzA5NDJiZTgwZjI5NGExYTA3YzVlNjQ5NTg1NzAyNjViNzBjZmQ4NGRhNzgwNzI4NzdmZTdcIn1cbn1cbiIsIihmdW5jdGlvbih3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vPSBoZWxwZXJzLmpzXG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIHZhciBIZWFkaGVzaXZlID0gZnVuY3Rpb24gKGVsZW0sIG9wdGlvbnMpIHtcblxuICAgICAgICAvLyBSZXR1cm4gaWYgZmVhdHVyZSB0ZXN0IGZhaWxzXG4gICAgICAgIGlmICghICgncXVlcnlTZWxlY3RvcicgaW4gZG9jdW1lbnQgJiYgJ2FkZEV2ZW50TGlzdGVuZXInIGluIHdpbmRvdykgKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbml0aWFsIHN0YXRlXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xuXG4gICAgICAgIC8vIE9wdGlvbnNcbiAgICAgICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgICAgICAgb2Zmc2V0OiAzMDAsXG4gICAgICAgICAgICBjbGFzc2VzOiB7XG4gICAgICAgICAgICAgICAgY2xvbmU6ICAgICdoZWFkaGVzaXZlJyxcbiAgICAgICAgICAgICAgICBzdGljazogICAnaGVhZGhlc2l2ZS0tc3RpY2snLFxuICAgICAgICAgICAgICAgIHVuc3RpY2s6ICdoZWFkaGVzaXZlLS11bnN0aWNrJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRocm90dGxlOiAyNTAsXG4gICAgICAgICAgICBvbkluaXQ6IGZ1bmN0aW9uKCkge30sXG4gICAgICAgICAgICBvblN0aWNrOiBmdW5jdGlvbigpIHt9LFxuICAgICAgICAgICAgb25VbnN0aWNrOiBmdW5jdGlvbigpIHt9LFxuICAgICAgICAgICAgb25EZXN0cm95OiBmdW5jdGlvbigpIHt9LFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEdldCBlbGVtLCBjaGVjayBpZiBzdHJpbmcsIGlmIG5vdCBhc3N1bWUgb2JqZWN0IHBhc3NlZCBpblxuICAgICAgICB0aGlzLmVsZW0gPSAodHlwZW9mIGVsZW0gPT09ICdzdHJpbmcnKSA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbSkgOiBlbGVtO1xuXG4gICAgICAgIC8vIE1lcmdlIHVzZXIgb3B0aW9ucyB3aXRoIGRlZmF1bHQgb3B0aW9uc1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBfbWVyZ2VPYmoodGhpcy5vcHRpb25zLCBvcHRpb25zKTtcblxuICAgICAgICAvLyBTZWxmIGluaXRcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogSGVhZGhlc2l2ZSBwcm90b3R5cGUgbWV0aG9kc1xuICAgICAqL1xuICAgIEhlYWRoZXNpdmUucHJvdG90eXBlID0ge1xuXG4gICAgICAgIGNvbnN0cnVjdG9yOiBIZWFkaGVzaXZlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0aWFsaXNlIEhlYWRoZXNpdmVcbiAgICAgICAgICovXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvLyBDbG9uZSBlbGVtZW50XG4gICAgICAgICAgICB0aGlzLmNsb25lZEVsZW0gPSB0aGlzLmVsZW0uY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5jbG9uZWRFbGVtLmNsYXNzTmFtZSArPSAnICcgKyB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5jbG9uZTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKHRoaXMuY2xvbmVkRWxlbSwgZG9jdW1lbnQuYm9keS5maXJzdENoaWxkKTtcblxuICAgICAgICAgICAgLy8gRGV0ZXJtaW4gb2Zmc2V0IHZhbHVlXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vZmZzZXQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxPZmZzZXQgPSB0aGlzLm9wdGlvbnMub2Zmc2V0O1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsT2Zmc2V0ID0gX2dldEVsZW1ZKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLm9mZnNldCkpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBvZmZzZXQ6ICcgKyB0aGlzLm9wdGlvbnMub2Zmc2V0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVGhyb3R0bGVkIHNjcm9sbFxuICAgICAgICAgICAgdGhpcy5fdGhyb3R0bGVVcGRhdGUgPSBfdGhyb3R0bGUodGhpcy51cGRhdGUuYmluZCh0aGlzKSwgdGhpcy5vcHRpb25zLnRocm90dGxlKTtcblxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuX3Rocm90dGxlVXBkYXRlLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMub25Jbml0LmNhbGwodGhpcyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENsZWFuIHVwIERPTSBhbmQgcmVtb3ZlIGV2ZW50c1xuICAgICAgICAgKi9cbiAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuY2xvbmVkRWxlbSk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5fdGhyb3R0bGVVcGRhdGUpO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uRGVzdHJveS5jYWxsKHRoaXMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb2dpYyBmb3Igc3RpY2tpbmcgZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgc3RpY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb25lZEVsZW0uY2xhc3NOYW1lID0gdGhpcy5jbG9uZWRFbGVtLmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoJyhefFxcXFxzKSonICsgdGhpcy5vcHRpb25zLmNsYXNzZXMudW5zdGljayArICcoXFxcXHN8JCkqJywgJ2cnKSwgJycpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvbmVkRWxlbS5jbGFzc05hbWUgKz0gJyAnICsgdGhpcy5vcHRpb25zLmNsYXNzZXMuc3RpY2s7XG4gICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMub25TdGljay5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb2dpYyBmb3IgdW5zdGlja2luZyBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICB1bnN0aWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb25lZEVsZW0uY2xhc3NOYW1lID0gdGhpcy5jbG9uZWRFbGVtLmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoJyhefFxcXFxzKSonICsgdGhpcy5vcHRpb25zLmNsYXNzZXMuc3RpY2sgKyAnKFxcXFxzfCQpKicsICdnJyksICcnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb25lZEVsZW0uY2xhc3NOYW1lICs9ICcgJyArIHRoaXMub3B0aW9ucy5jbGFzc2VzLnVuc3RpY2s7XG4gICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uVW5zdGljay5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVcGRhdGUgc3RhdHVzIG9mIGVsZW1cbiAgICAgICAgICovXG4gICAgICAgIHVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoX2dldFNjcm9sbFkoKSA+IHRoaXMuc2Nyb2xsT2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGljaygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuc3RpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgIH07XG5cbiAgICB3aW5kb3cuSGVhZGhlc2l2ZSA9IEhlYWRoZXNpdmU7XG5cbn0od2luZG93LCBkb2N1bWVudCkpO1xuIiwiLyogbW91c2V0cmFwIHYxLjQuNiBjcmFpZy5pcy9raWxsaW5nL21pY2UgKi9cbihmdW5jdGlvbihKLHIsZil7ZnVuY3Rpb24gcyhhLGIsZCl7YS5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihiLGQsITEpOmEuYXR0YWNoRXZlbnQoXCJvblwiK2IsZCl9ZnVuY3Rpb24gQShhKXtpZihcImtleXByZXNzXCI9PWEudHlwZSl7dmFyIGI9U3RyaW5nLmZyb21DaGFyQ29kZShhLndoaWNoKTthLnNoaWZ0S2V5fHwoYj1iLnRvTG93ZXJDYXNlKCkpO3JldHVybiBifXJldHVybiBoW2Eud2hpY2hdP2hbYS53aGljaF06QlthLndoaWNoXT9CW2Eud2hpY2hdOlN0cmluZy5mcm9tQ2hhckNvZGUoYS53aGljaCkudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiB0KGEpe2E9YXx8e307dmFyIGI9ITEsZDtmb3IoZCBpbiBuKWFbZF0/Yj0hMDpuW2RdPTA7Ynx8KHU9ITEpfWZ1bmN0aW9uIEMoYSxiLGQsYyxlLHYpe3ZhciBnLGssZj1bXSxoPWQudHlwZTtpZighbFthXSlyZXR1cm5bXTtcImtleXVwXCI9PWgmJncoYSkmJihiPVthXSk7Zm9yKGc9MDtnPGxbYV0ubGVuZ3RoOysrZylpZihrPVxubFthXVtnXSwhKCFjJiZrLnNlcSYmbltrLnNlcV0hPWsubGV2ZWx8fGghPWsuYWN0aW9ufHwoXCJrZXlwcmVzc1wiIT1ofHxkLm1ldGFLZXl8fGQuY3RybEtleSkmJmIuc29ydCgpLmpvaW4oXCIsXCIpIT09ay5tb2RpZmllcnMuc29ydCgpLmpvaW4oXCIsXCIpKSl7dmFyIG09YyYmay5zZXE9PWMmJmsubGV2ZWw9PXY7KCFjJiZrLmNvbWJvPT1lfHxtKSYmbFthXS5zcGxpY2UoZywxKTtmLnB1c2goayl9cmV0dXJuIGZ9ZnVuY3Rpb24gSyhhKXt2YXIgYj1bXTthLnNoaWZ0S2V5JiZiLnB1c2goXCJzaGlmdFwiKTthLmFsdEtleSYmYi5wdXNoKFwiYWx0XCIpO2EuY3RybEtleSYmYi5wdXNoKFwiY3RybFwiKTthLm1ldGFLZXkmJmIucHVzaChcIm1ldGFcIik7cmV0dXJuIGJ9ZnVuY3Rpb24geChhLGIsZCxjKXttLnN0b3BDYWxsYmFjayhiLGIudGFyZ2V0fHxiLnNyY0VsZW1lbnQsZCxjKXx8ITEhPT1hKGIsZCl8fChiLnByZXZlbnREZWZhdWx0P2IucHJldmVudERlZmF1bHQoKTpiLnJldHVyblZhbHVlPSExLGIuc3RvcFByb3BhZ2F0aW9uP1xuYi5zdG9wUHJvcGFnYXRpb24oKTpiLmNhbmNlbEJ1YmJsZT0hMCl9ZnVuY3Rpb24geShhKXtcIm51bWJlclwiIT09dHlwZW9mIGEud2hpY2gmJihhLndoaWNoPWEua2V5Q29kZSk7dmFyIGI9QShhKTtiJiYoXCJrZXl1cFwiPT1hLnR5cGUmJno9PT1iP3o9ITE6bS5oYW5kbGVLZXkoYixLKGEpLGEpKX1mdW5jdGlvbiB3KGEpe3JldHVyblwic2hpZnRcIj09YXx8XCJjdHJsXCI9PWF8fFwiYWx0XCI9PWF8fFwibWV0YVwiPT1hfWZ1bmN0aW9uIEwoYSxiLGQsYyl7ZnVuY3Rpb24gZShiKXtyZXR1cm4gZnVuY3Rpb24oKXt1PWI7KytuW2FdO2NsZWFyVGltZW91dChEKTtEPXNldFRpbWVvdXQodCwxRTMpfX1mdW5jdGlvbiB2KGIpe3goZCxiLGEpO1wia2V5dXBcIiE9PWMmJih6PUEoYikpO3NldFRpbWVvdXQodCwxMCl9Zm9yKHZhciBnPW5bYV09MDtnPGIubGVuZ3RoOysrZyl7dmFyIGY9ZysxPT09Yi5sZW5ndGg/djplKGN8fEUoYltnKzFdKS5hY3Rpb24pO0YoYltnXSxmLGMsYSxnKX19ZnVuY3Rpb24gRShhLGIpe3ZhciBkLFxuYyxlLGY9W107ZD1cIitcIj09PWE/W1wiK1wiXTphLnNwbGl0KFwiK1wiKTtmb3IoZT0wO2U8ZC5sZW5ndGg7KytlKWM9ZFtlXSxHW2NdJiYoYz1HW2NdKSxiJiZcImtleXByZXNzXCIhPWImJkhbY10mJihjPUhbY10sZi5wdXNoKFwic2hpZnRcIikpLHcoYykmJmYucHVzaChjKTtkPWM7ZT1iO2lmKCFlKXtpZighcCl7cD17fTtmb3IodmFyIGcgaW4gaCk5NTxnJiYxMTI+Z3x8aC5oYXNPd25Qcm9wZXJ0eShnKSYmKHBbaFtnXV09Zyl9ZT1wW2RdP1wia2V5ZG93blwiOlwia2V5cHJlc3NcIn1cImtleXByZXNzXCI9PWUmJmYubGVuZ3RoJiYoZT1cImtleWRvd25cIik7cmV0dXJue2tleTpjLG1vZGlmaWVyczpmLGFjdGlvbjplfX1mdW5jdGlvbiBGKGEsYixkLGMsZSl7cVthK1wiOlwiK2RdPWI7YT1hLnJlcGxhY2UoL1xccysvZyxcIiBcIik7dmFyIGY9YS5zcGxpdChcIiBcIik7MTxmLmxlbmd0aD9MKGEsZixiLGQpOihkPUUoYSxkKSxsW2Qua2V5XT1sW2Qua2V5XXx8W10sQyhkLmtleSxkLm1vZGlmaWVycyx7dHlwZTpkLmFjdGlvbn0sXG5jLGEsZSksbFtkLmtleV1bYz9cInVuc2hpZnRcIjpcInB1c2hcIl0oe2NhbGxiYWNrOmIsbW9kaWZpZXJzOmQubW9kaWZpZXJzLGFjdGlvbjpkLmFjdGlvbixzZXE6YyxsZXZlbDplLGNvbWJvOmF9KSl9dmFyIGg9ezg6XCJiYWNrc3BhY2VcIiw5OlwidGFiXCIsMTM6XCJlbnRlclwiLDE2Olwic2hpZnRcIiwxNzpcImN0cmxcIiwxODpcImFsdFwiLDIwOlwiY2Fwc2xvY2tcIiwyNzpcImVzY1wiLDMyOlwic3BhY2VcIiwzMzpcInBhZ2V1cFwiLDM0OlwicGFnZWRvd25cIiwzNTpcImVuZFwiLDM2OlwiaG9tZVwiLDM3OlwibGVmdFwiLDM4OlwidXBcIiwzOTpcInJpZ2h0XCIsNDA6XCJkb3duXCIsNDU6XCJpbnNcIiw0NjpcImRlbFwiLDkxOlwibWV0YVwiLDkzOlwibWV0YVwiLDIyNDpcIm1ldGFcIn0sQj17MTA2OlwiKlwiLDEwNzpcIitcIiwxMDk6XCItXCIsMTEwOlwiLlwiLDExMTpcIi9cIiwxODY6XCI7XCIsMTg3OlwiPVwiLDE4ODpcIixcIiwxODk6XCItXCIsMTkwOlwiLlwiLDE5MTpcIi9cIiwxOTI6XCJgXCIsMjE5OlwiW1wiLDIyMDpcIlxcXFxcIiwyMjE6XCJdXCIsMjIyOlwiJ1wifSxIPXtcIn5cIjpcImBcIixcIiFcIjpcIjFcIixcblwiQFwiOlwiMlwiLFwiI1wiOlwiM1wiLCQ6XCI0XCIsXCIlXCI6XCI1XCIsXCJeXCI6XCI2XCIsXCImXCI6XCI3XCIsXCIqXCI6XCI4XCIsXCIoXCI6XCI5XCIsXCIpXCI6XCIwXCIsXzpcIi1cIixcIitcIjpcIj1cIixcIjpcIjpcIjtcIiwnXCInOlwiJ1wiLFwiPFwiOlwiLFwiLFwiPlwiOlwiLlwiLFwiP1wiOlwiL1wiLFwifFwiOlwiXFxcXFwifSxHPXtvcHRpb246XCJhbHRcIixjb21tYW5kOlwibWV0YVwiLFwicmV0dXJuXCI6XCJlbnRlclwiLGVzY2FwZTpcImVzY1wiLG1vZDovTWFjfGlQb2R8aVBob25lfGlQYWQvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKT9cIm1ldGFcIjpcImN0cmxcIn0scCxsPXt9LHE9e30sbj17fSxELHo9ITEsST0hMSx1PSExO2ZvcihmPTE7MjA+ZjsrK2YpaFsxMTErZl09XCJmXCIrZjtmb3IoZj0wOzk+PWY7KytmKWhbZis5Nl09ZjtzKHIsXCJrZXlwcmVzc1wiLHkpO3MocixcImtleWRvd25cIix5KTtzKHIsXCJrZXl1cFwiLHkpO3ZhciBtPXtiaW5kOmZ1bmN0aW9uKGEsYixkKXthPWEgaW5zdGFuY2VvZiBBcnJheT9hOlthXTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoOysrYylGKGFbY10sYixkKTtyZXR1cm4gdGhpc30sXG51bmJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbS5iaW5kKGEsZnVuY3Rpb24oKXt9LGIpfSx0cmlnZ2VyOmZ1bmN0aW9uKGEsYil7aWYocVthK1wiOlwiK2JdKXFbYStcIjpcIitiXSh7fSxhKTtyZXR1cm4gdGhpc30scmVzZXQ6ZnVuY3Rpb24oKXtsPXt9O3E9e307cmV0dXJuIHRoaXN9LHN0b3BDYWxsYmFjazpmdW5jdGlvbihhLGIpe3JldHVybi0xPChcIiBcIitiLmNsYXNzTmFtZStcIiBcIikuaW5kZXhPZihcIiBtb3VzZXRyYXAgXCIpPyExOlwiSU5QVVRcIj09Yi50YWdOYW1lfHxcIlNFTEVDVFwiPT1iLnRhZ05hbWV8fFwiVEVYVEFSRUFcIj09Yi50YWdOYW1lfHxiLmlzQ29udGVudEVkaXRhYmxlfSxoYW5kbGVLZXk6ZnVuY3Rpb24oYSxiLGQpe3ZhciBjPUMoYSxiLGQpLGU7Yj17fTt2YXIgZj0wLGc9ITE7Zm9yKGU9MDtlPGMubGVuZ3RoOysrZSljW2VdLnNlcSYmKGY9TWF0aC5tYXgoZixjW2VdLmxldmVsKSk7Zm9yKGU9MDtlPGMubGVuZ3RoOysrZSljW2VdLnNlcT9jW2VdLmxldmVsPT1mJiYoZz0hMCxcbmJbY1tlXS5zZXFdPTEseChjW2VdLmNhbGxiYWNrLGQsY1tlXS5jb21ibyxjW2VdLnNlcSkpOmd8fHgoY1tlXS5jYWxsYmFjayxkLGNbZV0uY29tYm8pO2M9XCJrZXlwcmVzc1wiPT1kLnR5cGUmJkk7ZC50eXBlIT11fHx3KGEpfHxjfHx0KGIpO0k9ZyYmXCJrZXlkb3duXCI9PWQudHlwZX19O0ouTW91c2V0cmFwPW07XCJmdW5jdGlvblwiPT09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKG0pfSkod2luZG93LGRvY3VtZW50KTtcbiJdfQ==
