(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // CreateHiringSignalModal
  createSignal: function() {
    profileName = $('.hiring-profile-name').val()
    autoProspect = $('.autoprospect > .active').text() ==  " Yes"

    hiringProfile = {
      'className': 'HiringProfile',
      'roles'    : $('.hiring-roles').tagsinput('items')
    }

    revenueProfile = {
      'className':'RevenueProfile', 
      'revenues': _.map($('#hiring-revenueBtns').find('.active'), 
                        function(revBtn){ return $(revBtn).text().trim() })
    }

    employeeProfile = {
      'className':'EmployeeProfile', 
      'employees': _.map($('#hiring-employeeBtns').find('.active'), 
                         function(empBtn){ return $(empBtn).text().trim() })
    }

    prospectProfile = {
      'className':'ProspectTitleProfile',
      'title_keywords' : $('.prospectRoleKeywords').tagsinput('items')
    }

    profiles = [hiringProfile, revenueProfile, 
                employeeProfile, prospectProfile]

    nonemptyProfiles = _.filter(profiles, function(profile) {
      if(_.values(profile)[1]){ return _.values(profile)[1].length }
    });


    newProfile = {
      name: profileName,
      autoProspect: autoProspect,
      profiles: nonemptyProfiles,
      user:{
        __type:'Pointer',
        className:'_User',
        objectId:JSON.parse(localStorage.currentUser).objectId
      },
      company: JSON.parse(localStorage.currentUser).company
    }

    if(nonemptyProfiles.length) {
      this.persistSignal(nonemptyProfiles, 
                         _.omit(newProfile,'profiles'))
      this.props.addProfile(newProfile)
      $('.modal').click()
    }
  },

  persistSignal: function(nonemptyProfiles, newProfile) {
    console.log('NEW PROFILE')
    console.log(newProfile)
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectProfile',
      headers:appConfig.headers,
      type:'POST',
      data:JSON.stringify(newProfile),
      success:function(ress) {

        $.ajax({
          url: 'https://api.parse.com/1/classes/CompanyProspectList',
          type: 'POST',
          headers: appConfig.headers,
          data:JSON.stringify(_.pick(newProfile, 
                                     'name','user','list_type',
                                     'open_people', 'company',
                                     'mining_job_list')),
          success: function(res) {
            console.log(res)
            prospectList = appConfig.pointer('CompanyProspectList',res.objectId)
            $.ajax({
              url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
              type:'PUT',
              headers: appConfig.headers,
              data: JSON.stringify({'company_prospect_list':prospectList}),
              success: function(res){ console.log(res) },
              error: function(err){ console.log(err) }
            })
          },
          error: function() { }
        })

        $.ajax({
          url: 'https://api.parse.com/1/classes/ProspectList',
          type: 'POST',
          headers: appConfig.headers,
          data:JSON.stringify(_.pick(newProfile, 
                                     'name','user','list_type',
                                     'open_people', 'company',
                                     'mining_job_list')),
          success: function(res) {
            console.log(res)
            prospectList = appConfig.pointer('ProspectList',res.objectId)
            $.ajax({
              url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
              type:'PUT',
              headers: appConfig.headers,
              data: JSON.stringify({'prospect_list':prospectList}),
              success: function(res){ console.log(res) },
              error: function(err){ console.log(err) }
            })
          },
          error: function() { }
        })
        

        // Add Signal List
        _.map(nonemptyProfiles, function(profile) {
          $.ajax({
            url:'https://api.parse.com/1/classes/'+_.values(profile)[0],
            headers:appConfig.headers,
            type:'POST',
            data:JSON.stringify( _.pick(profile, _.keys(profile)[1]) ),
            success:function(res) {
              $.ajax({
                url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
                type:'PUT',
                headers:appConfig.headers,
                data:JSON.stringify({profiles:{
                  __op: 'AddUnique',
                  objects:[{
                    __type:'Pointer',
                    className: _.values(profile)[0],
                    objectId:res.objectId
                  }]}
                }),
              })
            },
          })
        });

        // Start Mining Job
        $.ajax({
          //url:'https://nameless-retreat-3525.herokuapp.com/mining_job/title',
          ///url:'https://nameless-retreat-3525.herokuapp.com/title_mining_job',
          //url:'http://127.0.0.1:5000/signal/hiring',
          url:'https://nameless-retreat-3525.herokuapp.com/signal/hiring',
          type:'GET',
          data: {prospect_profile: ress.objectId},
          success: function(res) { console.log(res) },
          error: function(err) { console.log(err) }
        })
      

      },
    })
  },

  render: function() {
    return (
      React.DOM.div({className: "modal fade bs-createSignal-modal-md", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "createHiringSignalModal", 
           style: {top:'50px',overflow:'hidden'}}, 
            React.DOM.div({className: "modal-dialog modal-sm", style: {width:650}}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    "Create Hiring Signal"
                  ), 
                  React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                     onClick: this.createSignal, 
                     style: {float:'right',marginTop:-28,marginRight:-5}}, 
                    "Create Signal"
                  )
                ), 
                React.DOM.div({className: "modal-body"}, 
                  CreateHiringSignal(null)
                )
              )
            )
          )
    );
  }
});

var CreateHiringSignal = React.createClass({displayName: 'CreateHiringSignal',
  getInitialState: function() {
    return {
      addCompany: false,
      addProspect: false,
      hideCompanyDetails: false,
      hideProspectDetails: false,
    }
  },

  componentDidMount: function() {

  },
  
  toggleCompany : function() {
    this.setState({addCompany: !this.state.addCompany})
  },

  toggleProspect : function() {
    this.setState({addProspect: !this.state.addProspect})
  },

  toggleCompanyDetails: function() {
    this.setState({hideCompanyDetails: !this.state.hideCompanyDetails})
  },

  toggleProspectDetails: function() {
    this.setState({hideProspectDetails: !this.state.hideProspectDetails})
  },

  componentDidMount: function() {
    $(this.getDOMNode()).find('.hiring-role').tagsinput()
    $('.bootstrap-tagsinput').width(400)
  },

  render: function(){
    addCompany = (!this.state.addCompany) ? React.DOM.a({href: "javascript:", 
                                           onClick: this.toggleCompany, 
                                           className: "btn btn-sm btn-default"}, 
                                          React.DOM.i({className: "fa fa-plus"}), " " + ' ' +
                                          "Add Company Details"
                                        ) : CompanyProfile({hideCompanyDetails: this.state.hideCompanyDetails})

    addProspect = (!this.state.addProspect) ? React.DOM.a({href: "javascript:", 
                                           onClick: this.toggleProspect, 
                                           className: "btn btn-sm btn-default"}, 
                                          React.DOM.i({className: "fa fa-plus"}), " " + ' ' +
                                          "Add Prospect Details"
                                        ) : ProspectProfile({hideProspectDetails: this.state.hideProspectDetails})
    addCompanyStyle = (!this.state.addCompany) ? {display:'block',textAlign:'center'} : {}
    addProspectStyle = (!this.state.addProspect) ? {display:'block',textAlign:'center'} : {}

    closeCompanyBtns = (!this.state.addCompany) ? "" : React.DOM.span(null, React.DOM.a({href: "javascript:", className: "btn btn-xs btn-default", 
               onClick: this.toggleCompany, 
               style: {float:'right',marginTop:-5}}, 
               React.DOM.i({className: "fa fa-times"})), 
               React.DOM.a({href: "javascript:", className: "btn btn-xs btn-default", 
                  onClick: this.toggleCompanyDetails, 
                  style: {float:'right',marginTop:-5,marginRight:5}}, 
              React.DOM.i({className: (this.state.hideCompanyDetails) ? "fa fa-plus" :"fa fa-minus"})
          ))

    closeProspectBtns = (!this.state.addProspect) ? "" : React.DOM.span(null, React.DOM.a({href: "javascript:", className: "btn btn-xs btn-default", 
               onClick: this.toggleProspect, 
               style: {float:'right',marginTop:-5}}, 
               React.DOM.i({className: "fa fa-times"})), 
               React.DOM.a({href: "javascript:", className: "btn btn-xs btn-default", 
               onClick: this.toggleProspectDetails, 
               style: {float:'right',marginTop:-5,marginRight:5}}, 
              React.DOM.i({className: (this.state.hideProspectDetails) ? "fa fa-plus" :"fa fa-minus"})
          ))

    companyHeading = (!this.state.addCompany) ? "" : React.DOM.h5(null, React.DOM.i({className: "fa fa-building"}), "  Company Details")
    prospectHeading = (!this.state.addProspect) ? "" : React.DOM.h5(null, React.DOM.i({className: "fa fa-user"}), "  Prospect Details")
    return (
      React.DOM.div(null, 
        React.DOM.form({className: "createSignal", onSubmit: this.createSignal}, 
          React.DOM.span(null, 
            React.DOM.h6({style: {width:140,display:'inline-block',marginBottom:20}}, 
              "Hiring Profile Name:  "), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'413px'}, 
                   className: "form-control hiring-profile-name", 
                   placeholder: "Hiring Profile Name ..."})
          ), 
          React.DOM.br(null), 
          React.DOM.span(null, 
            React.DOM.h6({style: {width:140,display:'inline-block'}}, 
              "Hiring Role Name:  "
            ), 
            React.DOM.input({type: "text", 
                   style: {display:'inline-block',width:'50%',marginRight:10}, 
                   'data-role': "tagsinput", 
                   className: "form-control hiring-role hiring-roles"}), 

                React.DOM.a({href: "javascript:", 
                   className: "btn btn-xs btn-success", style: {display:'none'}}, 
                  React.DOM.i({className: "fa fa-plus"})
                )
          ), 
          React.DOM.div({style: {marginTop:10}}, 
          React.DOM.h6({style: {width:140,display:'inline-block'}}, "Auto Prospect:  "), 
          React.DOM.div({className: "btn-group autoprospect", 'data-toggle': "buttons"}, 
            React.DOM.label({className: "btn btn-sm btn-default active"}, 
              React.DOM.input({type: "radio"}), " Yes"
            ), 
            React.DOM.label({className: "btn btn-sm btn-default"}, 
              React.DOM.input({type: "radio"}), " No"
            )
          )
          ), 
          React.DOM.div({style: {display:'none'}}, 
            React.DOM.hr(null), " ", closeCompanyBtns, " ", companyHeading, 
            React.DOM.div({style: addCompanyStyle}, " ", addCompany, " "), 

            React.DOM.hr(null), " ", closeProspectBtns, " ", prospectHeading, 
            React.DOM.div({style: addProspectStyle}, " ", addProspect, " ")
          )
        )
      )
    )
  },
  createSignal: function(e) { e.preventDefault() }
});

var CompanyProfile = React.createClass({displayName: 'CompanyProfile',
  companyFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $(this.getDOMNode()).find('.btn-default').click(function(e) {

      if($(e.target).parent('label').hasClass('active'))
        $(e.target).parent('label').removeClass('active')
      else
        $(e.target).parent('label').addClass('active')

      console.log($(e.target).parent('label'))
    });
  },

  render: function() {
    showDetails = (this.props.hideCompanyDetails) ? {display: 'none'} : {display:'block'}
    return (
      React.DOM.div({style: showDetails}, 
        React.DOM.form({className: "createSignal", onSubmit: this.companyFormSubmit}, 
          React.DOM.br(null), 
          React.DOM.h6({style: {display:'inline-block',margin:0,
                      width:140,marginBottom:20}}, "Company Size "), 
            React.DOM.div({className: "btn-group", 'data-toggle': "buttons", id: "hiring-employeeBtns"}, 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " 1 - 50"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " 50 - 250"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " 250 - 1000"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " 1000 +"
              )
            ), 

            React.DOM.br(null), " ", React.DOM.h6({style: {display:'inline-block',margin:0,width:140}}, 
              "Revenue Amount "), 
            React.DOM.div({className: "btn-group", 'data-toggle': "buttons", id: "hiring-revenueBtns"}, 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " ", '< $1M'
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " $1M - $5M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " $5M - $25M"
              ), 
              React.DOM.label({className: "btn btn-sm btn-default"}, 
                React.DOM.input({type: "checkbox"}), " $25M +"
              )
            )
        )
      )
    )
  }
});

var ProspectProfile = React.createClass({displayName: 'ProspectProfile',
  prospectFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $('.prospectRoleKeywords').tagsinput({
      maxTags: 5,
    })

    $('.bootstrap-tagsinput').width(400)
  },

  render: function() {
    showDetails = (this.props.hideProspectDetails) ? {display: 'none'} : {display:'block'}
    return (
      React.DOM.div({style: showDetails}, 
        React.DOM.form({className: "createSignal", onSubmit: this.prospectFormSubmit}, 
          React.DOM.span(null, 
            React.DOM.span({style: {width:140,display:'inline-block'}}, 
              React.DOM.h6(null, "Job Title Keyword:  ")
            ), 
            React.DOM.input({type: "text", 
                   'data-role': "tagsinput", 
                   style: {width:'400px !important'}, 
                   className: "form-control prospectRoleKeywords", 
                   placeholder: ""})
          )

        )
      )
    )
  }
})

/*
  Funding Profile
  - Amount Raised
  - Stage

  People Profile
  - Locale
  - Title

  Company Profile
  - Industries
  - Revenue
  - Locale
  - # of Employees
*/

var GeneralForm = React.createClass({displayName: 'GeneralForm',

  render: function() {
    return (
        React.DOM.form({className: "createSignal", onSubmit: this.createSignal}, 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-suitcase"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Find Companies Hiring For ..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-users"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Number of Employees ..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-institution"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Amount of Funding ..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-money"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Revenue Amount ..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.span(null, " ", React.DOM.i({className: "fa fa-wrench"}), "  ", 
            React.DOM.input({type: "text", style: {display:'inline-block',width:'90%'}, 
                  className: "form-control", placeholder: "Using Technologies Such As..."})
          ), 
          React.DOM.br(null), " ", React.DOM.br(null), 
          React.DOM.a({href: "javascript:", 
            onClick: this.createSignal, 
            className: "btn btn-default btn-success", 
            style: {display:'block', width:'100%'}}, 
            "Create Signal"
          )
        )
    )
  }
})

},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvY3JlYXRlX2hpcmluZ19zaWduYWxfbW9kYWwuanMubWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gQ3JlYXRlSGlyaW5nU2lnbmFsTW9kYWxcbiAgY3JlYXRlU2lnbmFsOiBmdW5jdGlvbigpIHtcbiAgICBwcm9maWxlTmFtZSA9ICQoJy5oaXJpbmctcHJvZmlsZS1uYW1lJykudmFsKClcbiAgICBhdXRvUHJvc3BlY3QgPSAkKCcuYXV0b3Byb3NwZWN0ID4gLmFjdGl2ZScpLnRleHQoKSA9PSAgXCIgWWVzXCJcblxuICAgIGhpcmluZ1Byb2ZpbGUgPSB7XG4gICAgICAnY2xhc3NOYW1lJzogJ0hpcmluZ1Byb2ZpbGUnLFxuICAgICAgJ3JvbGVzJyAgICA6ICQoJy5oaXJpbmctcm9sZXMnKS50YWdzaW5wdXQoJ2l0ZW1zJylcbiAgICB9XG5cbiAgICByZXZlbnVlUHJvZmlsZSA9IHtcbiAgICAgICdjbGFzc05hbWUnOidSZXZlbnVlUHJvZmlsZScsIFxuICAgICAgJ3JldmVudWVzJzogXy5tYXAoJCgnI2hpcmluZy1yZXZlbnVlQnRucycpLmZpbmQoJy5hY3RpdmUnKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXZCdG4peyByZXR1cm4gJChyZXZCdG4pLnRleHQoKS50cmltKCkgfSlcbiAgICB9XG5cbiAgICBlbXBsb3llZVByb2ZpbGUgPSB7XG4gICAgICAnY2xhc3NOYW1lJzonRW1wbG95ZWVQcm9maWxlJywgXG4gICAgICAnZW1wbG95ZWVzJzogXy5tYXAoJCgnI2hpcmluZy1lbXBsb3llZUJ0bnMnKS5maW5kKCcuYWN0aXZlJyksIFxuICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVtcEJ0bil7IHJldHVybiAkKGVtcEJ0bikudGV4dCgpLnRyaW0oKSB9KVxuICAgIH1cblxuICAgIHByb3NwZWN0UHJvZmlsZSA9IHtcbiAgICAgICdjbGFzc05hbWUnOidQcm9zcGVjdFRpdGxlUHJvZmlsZScsXG4gICAgICAndGl0bGVfa2V5d29yZHMnIDogJCgnLnByb3NwZWN0Um9sZUtleXdvcmRzJykudGFnc2lucHV0KCdpdGVtcycpXG4gICAgfVxuXG4gICAgcHJvZmlsZXMgPSBbaGlyaW5nUHJvZmlsZSwgcmV2ZW51ZVByb2ZpbGUsIFxuICAgICAgICAgICAgICAgIGVtcGxveWVlUHJvZmlsZSwgcHJvc3BlY3RQcm9maWxlXVxuXG4gICAgbm9uZW1wdHlQcm9maWxlcyA9IF8uZmlsdGVyKHByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICBpZihfLnZhbHVlcyhwcm9maWxlKVsxXSl7IHJldHVybiBfLnZhbHVlcyhwcm9maWxlKVsxXS5sZW5ndGggfVxuICAgIH0pO1xuXG5cbiAgICBuZXdQcm9maWxlID0ge1xuICAgICAgbmFtZTogcHJvZmlsZU5hbWUsXG4gICAgICBhdXRvUHJvc3BlY3Q6IGF1dG9Qcm9zcGVjdCxcbiAgICAgIHByb2ZpbGVzOiBub25lbXB0eVByb2ZpbGVzLFxuICAgICAgdXNlcjp7XG4gICAgICAgIF9fdHlwZTonUG9pbnRlcicsXG4gICAgICAgIGNsYXNzTmFtZTonX1VzZXInLFxuICAgICAgICBvYmplY3RJZDpKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikub2JqZWN0SWRcbiAgICAgIH0sXG4gICAgICBjb21wYW55OiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikuY29tcGFueVxuICAgIH1cblxuICAgIGlmKG5vbmVtcHR5UHJvZmlsZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnBlcnNpc3RTaWduYWwobm9uZW1wdHlQcm9maWxlcywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgXy5vbWl0KG5ld1Byb2ZpbGUsJ3Byb2ZpbGVzJykpXG4gICAgICB0aGlzLnByb3BzLmFkZFByb2ZpbGUobmV3UHJvZmlsZSlcbiAgICAgICQoJy5tb2RhbCcpLmNsaWNrKClcbiAgICB9XG4gIH0sXG5cbiAgcGVyc2lzdFNpZ25hbDogZnVuY3Rpb24obm9uZW1wdHlQcm9maWxlcywgbmV3UHJvZmlsZSkge1xuICAgIGNvbnNvbGUubG9nKCdORVcgUFJPRklMRScpXG4gICAgY29uc29sZS5sb2cobmV3UHJvZmlsZSlcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0UHJvZmlsZScsXG4gICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgdHlwZTonUE9TVCcsXG4gICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KG5ld1Byb2ZpbGUpLFxuICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXNzKSB7XG5cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL0NvbXBhbnlQcm9zcGVjdExpc3QnLFxuICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICBkYXRhOkpTT04uc3RyaW5naWZ5KF8ucGljayhuZXdQcm9maWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbmFtZScsJ3VzZXInLCdsaXN0X3R5cGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvcGVuX3Blb3BsZScsICdjb21wYW55JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWluaW5nX2pvYl9saXN0JykpLFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICAgICAgcHJvc3BlY3RMaXN0ID0gYXBwQ29uZmlnLnBvaW50ZXIoJ0NvbXBhbnlQcm9zcGVjdExpc3QnLHJlcy5vYmplY3RJZClcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdFByb2ZpbGUvJytyZXNzLm9iamVjdElkLFxuICAgICAgICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICAgICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoeydjb21wYW55X3Byb3NwZWN0X2xpc3QnOnByb3NwZWN0TGlzdH0pLFxuICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpeyBjb25zb2xlLmxvZyhyZXMpIH0sXG4gICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpeyBjb25zb2xlLmxvZyhlcnIpIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oKSB7IH1cbiAgICAgICAgfSlcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvUHJvc3BlY3RMaXN0JyxcbiAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczogYXBwQ29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeShfLnBpY2sobmV3UHJvZmlsZSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25hbWUnLCd1c2VyJywnbGlzdF90eXBlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3Blbl9wZW9wbGUnLCAnY29tcGFueScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21pbmluZ19qb2JfbGlzdCcpKSxcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgICAgIHByb3NwZWN0TGlzdCA9IGFwcENvbmZpZy5wb2ludGVyKCdQcm9zcGVjdExpc3QnLHJlcy5vYmplY3RJZClcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdFByb2ZpbGUvJytyZXNzLm9iamVjdElkLFxuICAgICAgICAgICAgICB0eXBlOidQVVQnLFxuICAgICAgICAgICAgICBoZWFkZXJzOiBhcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoeydwcm9zcGVjdF9saXN0Jzpwcm9zcGVjdExpc3R9KSxcbiAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKXsgY29uc29sZS5sb2cocmVzKSB9LFxuICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKXsgY29uc29sZS5sb2coZXJyKSB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkgeyB9XG4gICAgICAgIH0pXG4gICAgICAgIFxuXG4gICAgICAgIC8vIEFkZCBTaWduYWwgTGlzdFxuICAgICAgICBfLm1hcChub25lbXB0eVByb2ZpbGVzLCBmdW5jdGlvbihwcm9maWxlKSB7XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK18udmFsdWVzKHByb2ZpbGUpWzBdLFxuICAgICAgICAgICAgaGVhZGVyczphcHBDb25maWcuaGVhZGVycyxcbiAgICAgICAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSggXy5waWNrKHByb2ZpbGUsIF8ua2V5cyhwcm9maWxlKVsxXSkgKSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzL1Byb3NwZWN0UHJvZmlsZS8nK3Jlc3Mub2JqZWN0SWQsXG4gICAgICAgICAgICAgICAgdHlwZTonUFVUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOmFwcENvbmZpZy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIGRhdGE6SlNPTi5zdHJpbmdpZnkoe3Byb2ZpbGVzOntcbiAgICAgICAgICAgICAgICAgIF9fb3A6ICdBZGRVbmlxdWUnLFxuICAgICAgICAgICAgICAgICAgb2JqZWN0czpbe1xuICAgICAgICAgICAgICAgICAgICBfX3R5cGU6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IF8udmFsdWVzKHByb2ZpbGUpWzBdLFxuICAgICAgICAgICAgICAgICAgICBvYmplY3RJZDpyZXMub2JqZWN0SWRcbiAgICAgICAgICAgICAgICAgIH1dfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTdGFydCBNaW5pbmcgSm9iXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgLy91cmw6J2h0dHBzOi8vbmFtZWxlc3MtcmV0cmVhdC0zNTI1Lmhlcm9rdWFwcC5jb20vbWluaW5nX2pvYi90aXRsZScsXG4gICAgICAgICAgLy8vdXJsOidodHRwczovL25hbWVsZXNzLXJldHJlYXQtMzUyNS5oZXJva3VhcHAuY29tL3RpdGxlX21pbmluZ19qb2InLFxuICAgICAgICAgIC8vdXJsOidodHRwOi8vMTI3LjAuMC4xOjUwMDAvc2lnbmFsL2hpcmluZycsXG4gICAgICAgICAgdXJsOidodHRwczovL25hbWVsZXNzLXJldHJlYXQtMzUyNS5oZXJva3VhcHAuY29tL3NpZ25hbC9oaXJpbmcnLFxuICAgICAgICAgIHR5cGU6J0dFVCcsXG4gICAgICAgICAgZGF0YToge3Byb3NwZWN0X3Byb2ZpbGU6IHJlc3Mub2JqZWN0SWR9LFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyBjb25zb2xlLmxvZyhyZXMpIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIpIH1cbiAgICAgICAgfSlcbiAgICAgIFxuXG4gICAgICB9LFxuICAgIH0pXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsIGZhZGUgYnMtY3JlYXRlU2lnbmFsLW1vZGFsLW1kXCIsIHRhYkluZGV4OiBcIi0xXCIsIHJvbGU6IFwiZGlhbG9nXCIsICdhcmlhLWxhYmVsbGVkYnknOiBcIm15U21hbGxNb2RhbExhYmVsXCIsICdhcmlhLWhpZGRlbic6IFwidHJ1ZVwiLCBpZDogXCJjcmVhdGVIaXJpbmdTaWduYWxNb2RhbFwiLCBcbiAgICAgICAgICAgc3R5bGU6IHt0b3A6JzUwcHgnLG92ZXJmbG93OidoaWRkZW4nfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1zbVwiLCBzdHlsZToge3dpZHRoOjY1MH19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWNvbnRlbnRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1oZWFkZXJcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgXCJDcmVhdGUgSGlyaW5nIFNpZ25hbFwiXG4gICAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIGNsYXNzTmFtZTogXCJidG4gYnRuLXN1Y2Nlc3MgYnRuLXNtXCIsIFxuICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5jcmVhdGVTaWduYWwsIFxuICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDotMjgsbWFyZ2luUmlnaHQ6LTV9fSwgXG4gICAgICAgICAgICAgICAgICAgIFwiQ3JlYXRlIFNpZ25hbFwiXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICAgICAgQ3JlYXRlSGlyaW5nU2lnbmFsKG51bGwpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG52YXIgQ3JlYXRlSGlyaW5nU2lnbmFsID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnQ3JlYXRlSGlyaW5nU2lnbmFsJyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYWRkQ29tcGFueTogZmFsc2UsXG4gICAgICBhZGRQcm9zcGVjdDogZmFsc2UsXG4gICAgICBoaWRlQ29tcGFueURldGFpbHM6IGZhbHNlLFxuICAgICAgaGlkZVByb3NwZWN0RGV0YWlsczogZmFsc2UsXG4gICAgfVxuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcblxuICB9LFxuICBcbiAgdG9nZ2xlQ29tcGFueSA6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2FkZENvbXBhbnk6ICF0aGlzLnN0YXRlLmFkZENvbXBhbnl9KVxuICB9LFxuXG4gIHRvZ2dsZVByb3NwZWN0IDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7YWRkUHJvc3BlY3Q6ICF0aGlzLnN0YXRlLmFkZFByb3NwZWN0fSlcbiAgfSxcblxuICB0b2dnbGVDb21wYW55RGV0YWlsczogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7aGlkZUNvbXBhbnlEZXRhaWxzOiAhdGhpcy5zdGF0ZS5oaWRlQ29tcGFueURldGFpbHN9KVxuICB9LFxuXG4gIHRvZ2dsZVByb3NwZWN0RGV0YWlsczogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7aGlkZVByb3NwZWN0RGV0YWlsczogIXRoaXMuc3RhdGUuaGlkZVByb3NwZWN0RGV0YWlsc30pXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICQodGhpcy5nZXRET01Ob2RlKCkpLmZpbmQoJy5oaXJpbmctcm9sZScpLnRhZ3NpbnB1dCgpXG4gICAgJCgnLmJvb3RzdHJhcC10YWdzaW5wdXQnKS53aWR0aCg0MDApXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpe1xuICAgIGFkZENvbXBhbnkgPSAoIXRoaXMuc3RhdGUuYWRkQ29tcGFueSkgPyBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZUNvbXBhbnksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSksIFwiwqBcIiArICcgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkFkZCBDb21wYW55IERldGFpbHNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBDb21wYW55UHJvZmlsZSh7aGlkZUNvbXBhbnlEZXRhaWxzOiB0aGlzLnN0YXRlLmhpZGVDb21wYW55RGV0YWlsc30pXG5cbiAgICBhZGRQcm9zcGVjdCA9ICghdGhpcy5zdGF0ZS5hZGRQcm9zcGVjdCkgPyBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZVByb3NwZWN0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXNcIn0pLCBcIsKgXCIgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJBZGQgUHJvc3BlY3QgRGV0YWlsc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IFByb3NwZWN0UHJvZmlsZSh7aGlkZVByb3NwZWN0RGV0YWlsczogdGhpcy5zdGF0ZS5oaWRlUHJvc3BlY3REZXRhaWxzfSlcbiAgICBhZGRDb21wYW55U3R5bGUgPSAoIXRoaXMuc3RhdGUuYWRkQ29tcGFueSkgPyB7ZGlzcGxheTonYmxvY2snLHRleHRBbGlnbjonY2VudGVyJ30gOiB7fVxuICAgIGFkZFByb3NwZWN0U3R5bGUgPSAoIXRoaXMuc3RhdGUuYWRkUHJvc3BlY3QpID8ge2Rpc3BsYXk6J2Jsb2NrJyx0ZXh0QWxpZ246J2NlbnRlcid9IDoge31cblxuICAgIGNsb3NlQ29tcGFueUJ0bnMgPSAoIXRoaXMuc3RhdGUuYWRkQ29tcGFueSkgPyBcIlwiIDogUmVhY3QuRE9NLnNwYW4obnVsbCwgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLWRlZmF1bHRcIiwgXG4gICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnRvZ2dsZUNvbXBhbnksIFxuICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDotNX19LCBcbiAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdGltZXNcIn0pKSwgXG4gICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwiLCBcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMudG9nZ2xlQ29tcGFueURldGFpbHMsIFxuICAgICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDotNSxtYXJnaW5SaWdodDo1fX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiAodGhpcy5zdGF0ZS5oaWRlQ29tcGFueURldGFpbHMpID8gXCJmYSBmYS1wbHVzXCIgOlwiZmEgZmEtbWludXNcIn0pXG4gICAgICAgICAgKSlcblxuICAgIGNsb3NlUHJvc3BlY3RCdG5zID0gKCF0aGlzLnN0YXRlLmFkZFByb3NwZWN0KSA/IFwiXCIgOiBSZWFjdC5ET00uc3BhbihudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwiLCBcbiAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMudG9nZ2xlUHJvc3BlY3QsIFxuICAgICAgICAgICAgICAgc3R5bGU6IHtmbG9hdDoncmlnaHQnLG1hcmdpblRvcDotNX19LCBcbiAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdGltZXNcIn0pKSwgXG4gICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi14cyBidG4tZGVmYXVsdFwiLCBcbiAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMudG9nZ2xlUHJvc3BlY3REZXRhaWxzLCBcbiAgICAgICAgICAgICAgIHN0eWxlOiB7ZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6LTUsbWFyZ2luUmlnaHQ6NX19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogKHRoaXMuc3RhdGUuaGlkZVByb3NwZWN0RGV0YWlscykgPyBcImZhIGZhLXBsdXNcIiA6XCJmYSBmYS1taW51c1wifSlcbiAgICAgICAgICApKVxuXG4gICAgY29tcGFueUhlYWRpbmcgPSAoIXRoaXMuc3RhdGUuYWRkQ29tcGFueSkgPyBcIlwiIDogUmVhY3QuRE9NLmg1KG51bGwsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYnVpbGRpbmdcIn0pLCBcIsKgIENvbXBhbnkgRGV0YWlsc1wiKVxuICAgIHByb3NwZWN0SGVhZGluZyA9ICghdGhpcy5zdGF0ZS5hZGRQcm9zcGVjdCkgPyBcIlwiIDogUmVhY3QuRE9NLmg1KG51bGwsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtdXNlclwifSksIFwiwqAgUHJvc3BlY3QgRGV0YWlsc1wiKVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgICBSZWFjdC5ET00uZm9ybSh7Y2xhc3NOYW1lOiBcImNyZWF0ZVNpZ25hbFwiLCBvblN1Ym1pdDogdGhpcy5jcmVhdGVTaWduYWx9LCBcbiAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJyxtYXJnaW5Cb3R0b206MjB9fSwgXG4gICAgICAgICAgICAgIFwiSGlyaW5nIFByb2ZpbGUgTmFtZTogwqBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOic0MTNweCd9LCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGhpcmluZy1wcm9maWxlLW5hbWVcIiwgXG4gICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiSGlyaW5nIFByb2ZpbGUgTmFtZSAuLi5cIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgICAgXCJIaXJpbmcgUm9sZSBOYW1lOiDCoFwiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonNTAlJyxtYXJnaW5SaWdodDoxMH0sIFxuICAgICAgICAgICAgICAgICAgICdkYXRhLXJvbGUnOiBcInRhZ3NpbnB1dFwiLCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sIGhpcmluZy1yb2xlIGhpcmluZy1yb2xlc1wifSksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLXN1Y2Nlc3NcIiwgc3R5bGU6IHtkaXNwbGF5Oidub25lJ319LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtcGx1c1wifSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHttYXJnaW5Ub3A6MTB9fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge3dpZHRoOjE0MCxkaXNwbGF5OidpbmxpbmUtYmxvY2snfX0sIFwiQXV0byBQcm9zcGVjdDogwqBcIiksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXAgYXV0b3Byb3NwZWN0XCIsICdkYXRhLXRvZ2dsZSc6IFwiYnV0dG9uc1wifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0IGFjdGl2ZVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJyYWRpb1wifSksIFwiIFllc1wiXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwicmFkaW9cIn0pLCBcIiBOb1wiXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaHIobnVsbCksIFwiIFwiLCBjbG9zZUNvbXBhbnlCdG5zLCBcIiBcIiwgY29tcGFueUhlYWRpbmcsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IGFkZENvbXBhbnlTdHlsZX0sIFwiIFwiLCBhZGRDb21wYW55LCBcIiBcIiksIFxuXG4gICAgICAgICAgICBSZWFjdC5ET00uaHIobnVsbCksIFwiIFwiLCBjbG9zZVByb3NwZWN0QnRucywgXCIgXCIsIHByb3NwZWN0SGVhZGluZywgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZTogYWRkUHJvc3BlY3RTdHlsZX0sIFwiIFwiLCBhZGRQcm9zcGVjdCwgXCIgXCIpXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9LFxuICBjcmVhdGVTaWduYWw6IGZ1bmN0aW9uKGUpIHsgZS5wcmV2ZW50RGVmYXVsdCgpIH1cbn0pO1xuXG52YXIgQ29tcGFueVByb2ZpbGUgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdDb21wYW55UHJvZmlsZScsXG4gIGNvbXBhbnlGb3JtU3VibWl0OiBmdW5jdGlvbihlKSB7IGUucHJldmVudERlZmF1bHQoKSB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMuZ2V0RE9NTm9kZSgpKS5maW5kKCcuYnRuLWRlZmF1bHQnKS5jbGljayhmdW5jdGlvbihlKSB7XG5cbiAgICAgIGlmKCQoZS50YXJnZXQpLnBhcmVudCgnbGFiZWwnKS5oYXNDbGFzcygnYWN0aXZlJykpXG4gICAgICAgICQoZS50YXJnZXQpLnBhcmVudCgnbGFiZWwnKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcbiAgICAgIGVsc2VcbiAgICAgICAgJChlLnRhcmdldCkucGFyZW50KCdsYWJlbCcpLmFkZENsYXNzKCdhY3RpdmUnKVxuXG4gICAgICBjb25zb2xlLmxvZygkKGUudGFyZ2V0KS5wYXJlbnQoJ2xhYmVsJykpXG4gICAgfSk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBzaG93RGV0YWlscyA9ICh0aGlzLnByb3BzLmhpZGVDb21wYW55RGV0YWlscykgPyB7ZGlzcGxheTogJ25vbmUnfSA6IHtkaXNwbGF5OidibG9jayd9XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe3N0eWxlOiBzaG93RGV0YWlsc30sIFxuICAgICAgICBSZWFjdC5ET00uZm9ybSh7Y2xhc3NOYW1lOiBcImNyZWF0ZVNpZ25hbFwiLCBvblN1Ym1pdDogdGhpcy5jb21wYW55Rm9ybVN1Ym1pdH0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmg2KHtzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsbWFyZ2luOjAsXG4gICAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTQwLG1hcmdpbkJvdHRvbToyMH19LCBcIkNvbXBhbnkgU2l6ZSBcIiksIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImJ0bi1ncm91cFwiLCAnZGF0YS10b2dnbGUnOiBcImJ1dHRvbnNcIiwgaWQ6IFwiaGlyaW5nLWVtcGxveWVlQnRuc1wifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDEgLSA1MFwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiA1MCAtIDI1MFwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAyNTAgLSAxMDAwXCJcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIDEwMDAgK1wiXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFwiIFwiLCBSZWFjdC5ET00uaDYoe3N0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyxtYXJnaW46MCx3aWR0aDoxNDB9fSwgXG4gICAgICAgICAgICAgIFwiUmV2ZW51ZSBBbW91bnQgXCIpLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXBcIiwgJ2RhdGEtdG9nZ2xlJzogXCJidXR0b25zXCIsIGlkOiBcImhpcmluZy1yZXZlbnVlQnRuc1wifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5sYWJlbCh7Y2xhc3NOYW1lOiBcImJ0biBidG4tc20gYnRuLWRlZmF1bHRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJjaGVja2JveFwifSksIFwiIFwiLCAnPCAkMU0nXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkMU0gLSAkNU1cIlxuICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmxhYmVsKHtjbGFzc05hbWU6IFwiYnRuIGJ0bi1zbSBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCJ9KSwgXCIgJDVNIC0gJDI1TVwiXG4gICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00ubGFiZWwoe2NsYXNzTmFtZTogXCJidG4gYnRuLXNtIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwiY2hlY2tib3hcIn0pLCBcIiAkMjVNICtcIlxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH1cbn0pO1xuXG52YXIgUHJvc3BlY3RQcm9maWxlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnUHJvc3BlY3RQcm9maWxlJyxcbiAgcHJvc3BlY3RGb3JtU3VibWl0OiBmdW5jdGlvbihlKSB7IGUucHJldmVudERlZmF1bHQoKSB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICAkKCcucHJvc3BlY3RSb2xlS2V5d29yZHMnKS50YWdzaW5wdXQoe1xuICAgICAgbWF4VGFnczogNSxcbiAgICB9KVxuXG4gICAgJCgnLmJvb3RzdHJhcC10YWdzaW5wdXQnKS53aWR0aCg0MDApXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBzaG93RGV0YWlscyA9ICh0aGlzLnByb3BzLmhpZGVQcm9zcGVjdERldGFpbHMpID8ge2Rpc3BsYXk6ICdub25lJ30gOiB7ZGlzcGxheTonYmxvY2snfVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtzdHlsZTogc2hvd0RldGFpbHN9LCBcbiAgICAgICAgUmVhY3QuRE9NLmZvcm0oe2NsYXNzTmFtZTogXCJjcmVhdGVTaWduYWxcIiwgb25TdWJtaXQ6IHRoaXMucHJvc3BlY3RGb3JtU3VibWl0fSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4obnVsbCwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHt3aWR0aDoxNDAsZGlzcGxheTonaW5saW5lLWJsb2NrJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmg2KG51bGwsIFwiSm9iIFRpdGxlIEtleXdvcmQ6IMKgXCIpXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIFxuICAgICAgICAgICAgICAgICAgICdkYXRhLXJvbGUnOiBcInRhZ3NpbnB1dFwiLCBcbiAgICAgICAgICAgICAgICAgICBzdHlsZToge3dpZHRoOic0MDBweCAhaW1wb3J0YW50J30sIFxuICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2wgcHJvc3BlY3RSb2xlS2V5d29yZHNcIiwgXG4gICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiXCJ9KVxuICAgICAgICAgIClcblxuICAgICAgICApXG4gICAgICApXG4gICAgKVxuICB9XG59KVxuXG4vKlxuICBGdW5kaW5nIFByb2ZpbGVcbiAgLSBBbW91bnQgUmFpc2VkXG4gIC0gU3RhZ2VcblxuICBQZW9wbGUgUHJvZmlsZVxuICAtIExvY2FsZVxuICAtIFRpdGxlXG5cbiAgQ29tcGFueSBQcm9maWxlXG4gIC0gSW5kdXN0cmllc1xuICAtIFJldmVudWVcbiAgLSBMb2NhbGVcbiAgLSAjIG9mIEVtcGxveWVlc1xuKi9cblxudmFyIEdlbmVyYWxGb3JtID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnR2VuZXJhbEZvcm0nLFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgUmVhY3QuRE9NLmZvcm0oe2NsYXNzTmFtZTogXCJjcmVhdGVTaWduYWxcIiwgb25TdWJtaXQ6IHRoaXMuY3JlYXRlU2lnbmFsfSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4obnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc3VpdGNhc2VcIn0pLCBcIiDCoFwiLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5pbnB1dCh7dHlwZTogXCJ0ZXh0XCIsIHN0eWxlOiB7ZGlzcGxheTonaW5saW5lLWJsb2NrJyx3aWR0aDonOTAlJ30sIFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImZvcm0tY29udHJvbFwiLCBwbGFjZWhvbGRlcjogXCJGaW5kIENvbXBhbmllcyBIaXJpbmcgRm9yIC4uLlwifSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFwiIFwiLCBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXVzZXJzXCJ9KSwgXCIgwqBcIiwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwidGV4dFwiLCBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6JzkwJSd9LCBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIiwgcGxhY2Vob2xkZXI6IFwiTnVtYmVyIG9mIEVtcGxveWVlcyAuLi5cIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcIiBcIiwgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uc3BhbihudWxsLCBcIiBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1pbnN0aXR1dGlvblwifSksIFwiIMKgXCIsIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcInRleHRcIiwgc3R5bGU6IHtkaXNwbGF5OidpbmxpbmUtYmxvY2snLHdpZHRoOic5MCUnfSwgXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sXCIsIHBsYWNlaG9sZGVyOiBcIkFtb3VudCBvZiBGdW5kaW5nIC4uLlwifSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYnIobnVsbCksIFwiIFwiLCBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKG51bGwsIFwiIFwiLCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLW1vbmV5XCJ9KSwgXCIgwqBcIiwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwidGV4dFwiLCBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6JzkwJSd9LCBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIiwgcGxhY2Vob2xkZXI6IFwiUmV2ZW51ZSBBbW91bnQgLi4uXCJ9KVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXCIgXCIsIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4obnVsbCwgXCIgXCIsIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtd3JlbmNoXCJ9KSwgXCIgwqBcIiwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaW5wdXQoe3R5cGU6IFwidGV4dFwiLCBzdHlsZToge2Rpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6JzkwJSd9LCBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmb3JtLWNvbnRyb2xcIiwgcGxhY2Vob2xkZXI6IFwiVXNpbmcgVGVjaG5vbG9naWVzIFN1Y2ggQXMuLi5cIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBcIiBcIiwgUmVhY3QuRE9NLmJyKG51bGwpLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY3JlYXRlU2lnbmFsLCBcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLWRlZmF1bHQgYnRuLXN1Y2Nlc3NcIiwgXG4gICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJywgd2lkdGg6JzEwMCUnfX0sIFxuICAgICAgICAgICAgXCJDcmVhdGUgU2lnbmFsXCJcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICApXG4gIH1cbn0pXG4iXX0=
