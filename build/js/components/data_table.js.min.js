(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/** @jsx React.DOM */
// 

module.exports = React.createClass({displayName: 'exports',
  //CompanyProspect
  render: function () {
    prospect = this.props.prospect
    website = (prospect.website) ? React.DOM.a({href: 'http://'+prospect.website}, React.DOM.i({className: "fa fa-globe"})) : ''
    linkedin_profile = (prospect.profile != "") ? React.DOM.a({href: prospect.profile}, React.DOM.i({className: "fa fa-linkedin-square"})) : ''

  /*
            <a href="javascript:" className="btn btn-success btn-xs"
              style={{background: 'linear-gradient(#34c520,#219211)'}}> 
              <i className="fa fa-search" /> &nbsp;
              Find Prospects
            </a>
  */

  console.log

  //<td><a href="javascript:" onClick={this.deleteProspect}><i className="fa fa-times-circle" /></a></td>
    return (
        React.DOM.tr(null, 
          React.DOM.td({style: {width:'300px'}}, 
            React.DOM.span({style: {fontWeight:'bold'}}, prospect.name), 
            React.DOM.h6({style: {fontWeight:'400',margin:'0px'}}, prospect.headcount)
          ), 
          React.DOM.td(null, 
            React.DOM.h6({style: {margin:'0px'}}, moment(prospect.createdAt,'YYYY-MM-DDTh:mm:ss').fromNow())), 
          React.DOM.td(null, 
            React.DOM.h6({style: {margin:'0px'}}, prospect.industry)
          ), 
          React.DOM.td({style: {textAlign:'center',width:137,display:'none'}}, 
            React.DOM.span({className: "label label-primary", style: {display: 'block', width: 'auto', marginRight: 'auto', marginLeft: 'auto', width: '25px'}}, "0")
          ), 
          React.DOM.td({style: {display:'none'}}, 
            React.DOM.span({className: "label label-info"}, "Hiring")), 
          React.DOM.td({style: {width:320}}, 
            "   ", 
            React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", 
              onClick: this.openLinkedinCompanyProfile, 
              style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
              React.DOM.i({className: "fa fa-search"}), "  " + ' ' +
              "Search Profiles"
            ), 
            "   ", 
            React.DOM.a({href: "javascript:", className: "btn btn-success btn-xs", 
              onClick: this.openSimilarCompanies, 
              style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
              React.DOM.i({className: "fa fa-copy"}), "  " + ' ' +
              "Find Similar Companies"
            )
          ), 
          React.DOM.td(null, " ", linkedin_profile, "   ", website, " ")
        )
    );
  },

  openLinkedinCompanyProfile: function(e) {
    e.preventDefault()
    cid = this.props.prospect.profile.split('?')[0].split('/company/')[1]
    window.open("https://www.linkedin.com/vsearch/p?f_CC="+cid)
    e.stopPropagation()
  },

  openSimilarCompanies: function(e) {
    cid = this.props.prospect.profile.split('?')[0].split('/company/')[1]
    window.open("https://www.linkedin.com/vsearch/c?rsid=526440371409184768175&pivotType=sim&pid="+cid+"&trk=sim_companies_res_sim&trkInfo=VSRPsearchId%3A526440371409184768175%2CVSRPtargetId%3A1025%2CVSRPcmpt%3Aprimary")
  },

  deleteProspect: function() {
    this.props.deleteProspect(this.props.prospect.objectId, 'CompanyProspect')
  }
});

},{}]},{},[1])


},{}],2:[function(require,module,exports){
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createListModal
  createList: function() {
    console.log($('#listTitle').val())

    currentUser = JSON.parse(localStorage.currentUser)
    data =  {
      name : $('#listTitle').val().trim(),
      user : appConfig.pointer('_User', currentUser.objectId),
      company: currentUser.company
    }

    thiss = this;
    listClassName = (this.props.listClassName) ? this.props.listClassName : 'ProspectList'
    $.ajax({
      url:'https://api.parse.com/1/classes/'+listClassName,
      type:'POST',
      headers: appConfig.parseHeaders,
      data: JSON.stringify(data),
      success: function(res) { console.log(res) },
      error: function(err) { console.log(err) }
    });

    data.count = 0

    this.props.createList(data)
    
    $('#createListModal').modal('hide')
    $('body').removeClass('modal-open');
    $('.modal-backdrop').remove();
  },

  createListButtonClick: function() {
    if($('#listTitle').val().trim() != "")
      this.createList()
  },

  createMiningJob: function(e) {
    e.preventDefault()
    console.log('lmao')
    if($('#listTitle').val().trim() != "")
      this.createList()
  },

  render: function() {
    return (
          React.DOM.div({className: "modal fade bs-example-modal-sm", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "createListModal", style: {top:'200px'}}, 
            React.DOM.div({className: "modal-dialog modal-sm"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-list"}), "  Create List")
                ), 
                React.DOM.div({className: "modal-body"}, 
                  React.DOM.form({onSubmit: this.createMiningJob}, 
                    React.DOM.input({id: "listTitle", type: "text", placeholder: "Enter list title...", className: "form-control"}), 
                    React.DOM.br(null), 
                    React.DOM.a({href: "javascript:", onClick: this.createListButtonClick, placeholder: "Enter City Area...", className: "btn btn-success", style: {display:'block', width:'100%'}}, "Create List")
                  )

                )
              )
            )
          )
    );
  }
});


},{}]},{},[1])


},{}],3:[function(require,module,exports){
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createProspectListFromCompanyListModal
  createProfile: function() {
    //profileName = $(".profileName").val()
    titleProfile = {
      'className': 'ProspectTitleProfile',
      'title_keywords' : $('.prospectRoleKeywords').tagsinput('items').reverse()
    }

    listProfile = {
      'className': 'ListProfile',
      'listName':this.props.currentList,
      'list' : appConfig.pointer('CompanyProspectList', 
                                  this.props.currentListObjectId),
    }

    profiles = [titleProfile, listProfile]

    nonemptyProfiles = _.filter(profiles, function(profile) {
      if(_.values(profile)[1]){ return _.values(profile)[1].length }
    });

    //nonemptyProfiles.push(listProfile)
    nonemptyProfiles.reverse()

    console.log(nonemptyProfiles)
    console.log(this.props.currentList)

    newProfile = {
      name: this.props.currentList,
      profiles: nonemptyProfiles,
      type: 'prospect_profile',
      mining_job:true,
      list_type:"mining_job",
      only_people:true,
      user:{
        __type:'Pointer',
        className:'_User',
        objectId:JSON.parse(localStorage.currentUser).objectId
      },
      company: JSON.parse(localStorage.currentUser).company
    }

    if(nonemptyProfiles.length) {
      this.persistSignal(nonemptyProfiles, _.omit(newProfile,'profiles'))
      $('.modal').click()
      //this.props.addProfile(newProfile)
      $('.prospect-profile-title').val('')
    }
  },

  persistSignal: function(nonemptyProfiles, newProfile) {
    console.log('NEW PROFILE')
    console.log(newProfile)
    updateProfile = this.props.updateProfileWithObjectId

    thissss = this;
    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectProfile',
      headers:appConfig.headers,
      type:'POST',
      data:JSON.stringify(newProfile),
      success:function(ress) {
        console.log('Prospect Profile')
        console.log(ress)

        //thissss.props.updateProfileWithObjectId(newProfile, ress.objectId)
        
        user_id = JSON.parse(localStorage.currentUser).objectId
        newProfile.user = appConfig.pointer('_User', user_id) 
        newProfile.company = JSON.parse(localStorage.currentUser).company

        if(newProfile.type == 'prospect_profile')
          newProfile.mining_job_list = true
          newProfile.list_type = "mining_job"
          newProfile.only_people = true

        $.ajax({
          url: 'https://api.parse.com/1/classes/ProspectList',
          type: 'POST',
          headers: appConfig.headers,
          data:JSON.stringify(_.pick(newProfile, 
                                     'name','user','list_type',
                                     'open_people', 'company',
                                     'mining_job_list')),
          success: function(res) {
            $.ajax({
              url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
              type:'PUT',
              headers: appConfig.headers,
              data: JSON.stringify({'prospect_list':{ __type:'Pointer',
                                    className:'ProspectList',objectId:res.objectId } }),
              success: function(res){ console.log(res); 
                $('.modal').click()
                //location.href="#signals" 
              },
              error: function(err){ console.log(err) }
            })
          },
          error: function() { }
        })

        // Start Mining Job
        if(newProfile.type == 'prospect_profile') {
          $.ajax({
            //url:'https://nameless-retreat-3525.herokuapp.com/mining_job/title',
            url:'https://nameless-retreat-3525.herokuapp.com/title_mining_job',
            //url:'http://127.0.0.1:5000/title_mining_job',
            type:'GET',
            data: {prospect_profile: ress.objectId},
            success: function(res) { console.log(res) },
            error: function(err) { console.log(err) }
          })
        }

        // Create Profiles
        _.map(nonemptyProfiles, function(profile) {
          $.ajax({
            url:'https://api.parse.com/1/classes/'+_.values(profile)[0],
            headers:appConfig.headers,
            type:'POST',
            data:JSON.stringify( _.pick(profile, _.keys(profile)[1]) ),
            success:function(res) {
              $.ajax({
                url:'https://api.parse.com/1/classes/ProspectProfile/'+ress.objectId,
                type:'PUT',
                headers:appConfig.headers,
                data:JSON.stringify({profiles:{
                  __op: 'AddUnique',
                  objects:[{
                    __type:'Pointer',
                    className: _.values(profile)[0],
                    objectId:res.objectId
                  }]}
                }),
              })
            }
          })
        });
      }
    })
  },

  render: function() {
    return (
      React.DOM.div({className: "modal fade ", tabIndex: "-1", role: "dialog", 
           'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", 
           id: "createProspectListFromCompanyListModal", 
           style: {top:'50px',overflow:'hidden'}}, 
            React.DOM.div({className: "modal-dialog modal-sm", style: {width:650}}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    "Find Prospects At These Companies"
                  ), 
                  React.DOM.a({href: "javascript:", className: "btn btn-success btn-sm", 
                     onClick: this.createProfile, 
                     style: {float:'right',marginTop:-28,marginRight:-5}}, 
                    "Create Profile"
                  )
                ), 
                React.DOM.div({className: "modal-body"}, 
                  ProspectProfile(null)
                )
              )
            )
          )
    );
  },
});

var ProspectProfile = React.createClass({displayName: 'ProspectProfile',
  prospectFormSubmit: function(e) { e.preventDefault() },

  componentDidMount: function() {
    $('.prospectRoleKeywords').tagsinput({
      maxTags: 5,
    })
    $('.bootstrap-tagsinput').width(400)
  },

  render: function() {
    showDetails = (this.props.hideProspectDetails) ? {display: 'none'} : {display:'block'}
    return (
      React.DOM.div({style: showDetails}, 
        React.DOM.form({className: "createSignal", onSubmit: this.prospectFormSubmit}, 
          React.DOM.span(null, 
            React.DOM.span({style: {width:140,display:'inline-block'}}, 
              React.DOM.h6(null, "Job Title Keyword:  ")
            ), 
            React.DOM.input({type: "text", 
                   'data-role': "tagsinput", 
                   style: {width:'400px !important'}, 
                   className: "form-control prospectRoleKeywords", 
                   placeholder: ""})
          )
        )
      )
    )
  }
})

},{}]},{},[1])


},{}],4:[function(require,module,exports){
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // DataRow
  getInitialState: function() {
    return { }
  },

  clickCheck: function() {
    domNode = this.getDOMNode()
    isChecked = $($(domNode).find('input[type="checkbox"]')[0]).prop('checked')
    //console.log(isChecked)
    this.setState({checked: isChecked})
    this.props.checkboxAction(isChecked, this.props.prospect.objectId)
  },

  rowClick: function() {
    $($(this.getDOMNode()).find('input[type="checkbox"]')[0]).click()
  },

  keyboardClick: function() {
    $($('.keySelect').find('input[type="checkbox"]')[0]).click()
  },

  componentDidMount: function() { },

  render: function() {
    keyboardSelected = {borderLeft:'7px solid rgba(0,0,0,0)'}
    thissss = this
    if(this.props.keyboardSelected) {
      // Adjust Scroll depending on where the prospect is
      keyboardSelected = {borderLeft:'7px solid #0096ff !important'}
      Mousetrap.unbind('x')
      Mousetrap.bind('x', function() { 
        thissss.keyboardClick()
        if(thissss.state.checked)
          console.log("lmao")
      });
    }

    prospect = this.props.prospect

    if(this.props.masterCheckboxChecked && this.state.checked)
      checked = true
    else if(this.props.alreadyChecked)
      checked = true
    else if(this.state.checked)
      checked = true
    else if(this.props.masterCheckboxChecked || this.state.checked)
      checked = true
    else
      checked = false

    //console.log(this.state.checked)
    //console.log(checked)
    //{prospect.employeeCountRange.name + " employees" }
    
    color = {}
    if(this.state.checked || this.props.alreadyChecked)
      color = {backgroundColor: '#eef8ff'}
      
    rowCl = (this.props.keyboardSelected) ? "prospects-tr keySelect" : "prospects-tr"
    websiteBtn = (prospect.websiteUrl) ?  React.DOM.a({href: "http://"+prospect.websiteUrl.replace('http://','')}, " ", React.DOM.i({className: "fa fa-globe"}), " ") : ""
    return (
      React.DOM.tr({className: rowCl, 
          onClick: this.rowClick, 
          style: keyboardSelected}, 
          React.DOM.td({style: color}, 
              React.DOM.input({type: "checkbox", 
                     onChange: this.clickCheck, 
                     checked: checked})
          ), 

          React.DOM.td({style: color, 
              className: "fixed-data-column"}, 
            React.DOM.span({style: {fontWeight:'bold'}}, prospect.name), 
            React.DOM.h6({style: {fontWeight:'400',margin:'0px'}}, prospect.headcount)
          ), 

          React.DOM.td({style: color, 
              className: "fixed-data-column"}, 
            React.DOM.h6({style: {margin:'0px'}}, moment(prospect.createdAt,'YYYY-MM-DDTh:mm:ss').fromNow())
          ), 

          React.DOM.td({style: color, 
              className: "fixed-data-column"}, 
            React.DOM.h6({style: {margin:'0px'}}, prospect.industry)
          ), 

          React.DOM.td({style: color}, 
            "   ", 
            React.DOM.a({href: "javascript:", className: "btn btn-primary btn-xs", 
              onClick: this.openLinkedinCompanyProfile, 
              style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
              React.DOM.i({className: "fa fa-search"}), "  " + ' ' +
              "Search Profiles"
            ), 
            "   ", 
            React.DOM.a({href: "javascript:", className: "btn btn-primary btn-xs", 
              onClick: this.openSimilarCompanies, 
              style: {backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
              React.DOM.i({className: "fa fa-copy"}), "  " + ' ' +
              "Find Similar Companies"
            )
          ), 

          React.DOM.td({style: color}, 
            React.DOM.h6({style: {margin:'0px'}}, prospect.city)
          ), 

          React.DOM.td({style: color}, 
            this.props.li, " ", this.props.link, 
            websiteBtn
          )
        )
    );
  },

  openLinkedinCompanyProfile: function(e) {
    cid = this.props.prospect.profile.split('?')[0].split('/company/')[1]
    window.open("https://www.linkedin.com/vsearch/p?f_CC="+cid)
    e.stopPropagation()
  },

  openSimilarCompanies: function(e) {
    cid = this.props.prospect.profile.split('?')[0].split('/company/')[1]
    window.open("https://www.linkedin.com/vsearch/c?rsid=526440371409184768175&pivotType=sim&pid="+cid+"&trk=sim_companies_res_sim&trkInfo=VSRPsearchId%3A526440371409184768175%2CVSRPtargetId%3A1025%2CVSRPcmpt%3Aprimary")
    e.stopPropagation()
  },

  deleteProspect: function() {
    this.props.deleteProspect(this.props.prospect.objectId, 'Prospect')
  }
});


},{}]},{},[1])


},{}],5:[function(require,module,exports){
/** @jsx React.DOM */

//TODO - abstract lists
var SideMenuProspects = require('./side_menu_user_prospects.js.min.js');

var UserProspect = require('./user_prospect.js.min.js');
var DataRow = require('./data_row.js.min.js');

var UserProspectHeader = require('./user_prospect_header.js.min.js');
var SideMenuListOption = require('./user_side_menu_list.js.min.js');
var LoadingSpinner = require('./loading_spinner.js.min.js')
var PanelFooting = require('./panel_footing.js.min.js')
var Messenger = require('./messenger.js.min.js')
var DeleteListModal = require('./delete_list_modal.js.min.js')
var RenameListModal = require('./rename_list_modal.js.min.js')
var CompanyProspect = require('./company.js.min.js');
var CreateProspectListFromCompanyListModal = require('./create_prospect_list_from_company_list.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  getInitialState: function() {
    return {  currentPage : 1,
              className: this.props.className,  
              listClassName: this.props.listClassName,
              customRow: this.props.tableRow,
              pages       : 1,
              currentList : 'All',
              currentListObjectId : '',
              loading: true,
              lists : [],
              masterCheckboxChecked: false,
              prospectsPerPage: 50,         //classNames per page
              keyboardActiveProspect: 0,    //first
              selectedProspects: [],        //selectedClassName
              prospects   : [],             //className
              totalCount  : "~", 
              count       : "~", }
  },

  createList: function(data) {
    lists = this.state.lists
    lists.push(data)
    this.setState({ lists: lists })
  },

  renameList: function(newListName) {
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      'Content-Type': 'application/json'
    }
    console.log(this.state.currentListObjectId)
    console.log(this.state.currentList)
    console.log(newListName)

    // Update Local State
    thiss = this;
    var filtered = _.filter(this.state.lists, function(item) {
      if(item.name == thiss.state.currentList){
        item.name = newListName
        return item
      }
      return item
    });

    this.setState({lists : filtered})
    this.setState({currentList: newListName})

    $('.modal').click()
    $('#newListName').val('')
    $('.modal-backdrop').click()

    // Persist / Ajax
    listClassName = this.state.listClassName
    $.ajax({
      url:'https://api.parse.com/1/classes/'+listClassName+'/'+this.state.currentListObjectId,
      headers: parseHeaders,
      type:'PUT',
      data:JSON.stringify({'name':newListName}),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  deleteList: function() {
    // TODO 
    // Get All Members Of This List
    // Remove From List Array
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      'Content-Type': 'application/json'
    }
    
    var filtered = _.filter(this.state.lists, function(item) {
      if(item.objectId == thiss.state.currentListObjectId)
        return false
      return true
    });

    this.setState({lists: filtered})
    this.setState({currentList: 'All'})
    this.changeList('All', '')

    // Remove
    $('.modal').click()
    $('#newListName').val('')
    $('.modal-backdrop').click()

    // Persist / Ajax
    listClassName = this.state.listClassName

    $.ajax({
      url:'https://api.parse.com/1/classes/'+listClassName+'/'+this.state.currentListObjectId,
      headers: parseHeaders,
      type:'DELETE',
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  changeList: function(newListName,objectId) {
    // add overlay loading
    //console.log(newListName)
    //console.log(objectId)

    localStorage.selectedProspects = JSON.stringify([])

    this.setState({currentList : newListName})
    this.setState({currentListObjectId : objectId})
    this.setState({prospects  : []    })
    this.setState({count      : '~'   })
    this.setState({pages      : 1     })
    this.setState({loading    : true  })
    this.setState({currentPage: 1})
    this.setState({keyboardActiveProspect: 0})

    qry = 'where={"company":'+company+',"archived":true}&count=1&order=-createdAt'
    console.log(newListName)

    if(this.state.currentList != 'All' || typeof(objectId) != "undefined" && newListName != 'Archived'){
      currentList = JSON.stringify({
        'objectId'  : objectId, 
        '__type'    : 'Pointer', 
        'className' : this.state.listClassName
      })

      company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
      qry = 'where={"company":'+company+'}&count=1'
      qry = 'where={"lists":'+currentList+'}&count=1&order=-createdAt'
    } else if (newListName == 'Archived') {
      qry = 'where={"company":'+company+',"archived":false}&count=1&order=-createdAt'
    }
    console.log(qry)

    className = this.state.className

    $.ajax({
      url: 'https://api.parse.com/1/classes/'+className,
      type:'GET',
      headers: parse_headers,
      async: true,
      data: qry,
      ajaxStart: function() {
        console.log('started list')
      },
      success: function(res){
        thisss.setState({prospects: res.results})
        thisss.setState({count: res.count})
        //thisss.setState({totalCount: res.count})
        thisss.setState({pages: Math.ceil(res.count/thisss.props.prospectsPerPage)})
        thisss.setState({loading: false})
      },
      error: function(res){
        //console.log('error')
        //console.log(res)
      }
    })
  },

  checkboxAction: function(checkedState, objId) {
    /* Storing Checked Prospects In LocalStorage To Make it Easier To
     * Copy and Move Prospects 
     *
     * Move To User_Prospects?
     */
    
    selectedProspects = JSON.parse(localStorage.selectedProspects)
    //console.log(checkedState)
    if(checkedState)
      selectedProspects.push(objId)
    else
      selectedProspects = _.reject(selectedProspects, 
                                   function(id){return id == objId})

    console.log(selectedProspects)
    localStorage.selectedProspects = JSON.stringify(selectedProspects)
    this.setState({selectedProspects: selectedProspects})
  },

  masterCheckboxChanged: function(masterCheckboxValue) {
    this.setState({masterCheckboxChecked: masterCheckboxValue})
  },

  render: function() {


    this.startKeyboardShortcuts()
    $('body').css({overflow:'auto'})

    prospects = []
    for(i=0;i< this.state.prospects.length;i++) {
      url = this.state.prospects[i].url
      prospect = this.state.prospects[i]

      if(url != "no linkedin website" && typeof(url) != "undefined" && url != ""){
        url = url.replace('http://','')
        the_link = React.DOM.a({href: 'http://'+url}, React.DOM.i({className: "fa fa-globe"}))
      } else {
        the_link = ""
      }

      profile = this.state.prospects[i].profile
      profile = (profile) ? profile : ""

      profile = profile.replace('http://','')
      profile = profile.replace('https://','')
      profile = (typeof(profile) != "undefined") ? profile : ""
      li = React.DOM.a({href: profile, className: "linkedin_link"}, React.DOM.i({className: "fa fa-linkedin-square"}))

      keyboardSelected = (i == this.state.keyboardActiveProspect)

      selectedProspects = JSON.parse(localStorage.selectedProspects)
      alreadyChecked=false
      for(ii=0;ii< selectedProspects.length;ii++)
        if(prospect.objectId == selectedProspects[ii])
          alreadyChecked = true

      prospects.push(
        DataRow({deleteProspect: this.deleteProspect, 
                 prospect: this.state.prospects[i], 
                 masterCheckboxChecked: this.state.masterCheckboxChecked, 
                 key: this.generate_id(), 
                 link: the_link, 
                 keyboardSelected: keyboardSelected, 
                 checkboxAction: this.checkboxAction, 
                 alreadyChecked: alreadyChecked, 
                 li: li}))
    }

    listType = (this.state.currentList == "All") ? {display:'none'} : {float:'left'}
    listNameStyle = (this.state.currentList == "All") ? {display:'none'} : {float:'left',display:'inline-block', fontWeight: 200, marginTop: 1, paddingRight: 10, marginLeft: -10}
    listBtn = (this.state.currentList == "All") ? {display:'none'} : {float:'left',marginLeft:5}
    listOptions = (this.state.currentList == "All") ? {display:'none'} : {float:'right'}
    copyDropdownStyle = (this.state.currentList == "All") ? {width:114, right:4} : {width:114, right:36}
    currentList = this.state.currentList
    return (
        React.DOM.div(null, 
      React.DOM.div({className: "container", style: {width:'100%',padding:'0', background: 'linear-gradient(#dae8ff,#dae8ff)', backgroundImage: 'radial-gradient(circle at center center,#fff,#dff1fd 900px)'}}, 
        SideMenuProspects({currentList: this.state.currentList, 
                           count: this.state.count, 
                           totalCount: this.state.totalCount, 
                           changeList: this.changeList, 
                           listClassName: this.state.listClassName, 
                           createList: this.createList, 
                           lists: this.state.lists}), 

        React.DOM.div({className: "col-md-10", style: {padding:'0'}}, 
              React.DOM.div({id: "prospectDetailButtons"}, 
                ListDetailButtons({
                  renameList: this.renameList, 
                  deleteList: this.deleteList, 
                  currentListName: this.state.currentList, 
                  currentList: this.state.currentListObjectId}), 

                React.DOM.div({className: "dropdown"}, 
                  React.DOM.a({href: "javascript:", 
                     className: "btn btn-primary btn-xs list-options", 
                     id: "", 
                     style: {display:'none'}
                     }, 
                    React.DOM.i({className: "fa fa-bars"})
                  )
                ), 

                React.DOM.div({className: "dropdown"}, 
                  React.DOM.a({'data-toggle': "dropdown", 
                     id: "copyToList", 
                     href: "javascript:", 
                     className: "drop-target btn btn-primary btn-xs list-options"}, 
                     React.DOM.i({className: "fa fa-copy"}), 
                       "  Copy To List  ",  
                     React.DOM.i({className: "fa fa-caret-down"})
                ), 
                CurrentListsTwo({lists: this.state.lists, 
                                 copyDropdownStyle: copyDropdownStyle, 
                                 listAction: this.copySelectedProspects})
                ), 
  
                React.DOM.div({className: "dropdown"}, 
                  React.DOM.a({'data-toggle': "dropdown", 
                     href: "javascript:", 
                     id: "moveToList", 
                     style: listOptions, 
                     className: "btn btn-primary btn-xs list-options"}, 
                     React.DOM.i({className: "fa fa-share"}), 
                     "  Move To List  ",  
                     React.DOM.i({className: "fa fa-caret-down"})
                ), 
                CurrentLists({lists: this.state.lists, 
                              listAction: this.moveSelectedProspects})
                ), 

                React.DOM.a({onClick: this.downloadFile, 
                   href: "javascript:", 
                   id: "downloadProspects", 
                   className: "drop-target btn btn-primary btn-xs list-options"}, 
                  React.DOM.i({className: "fa fa-download"}), "   Download CSV  " 
                ), 

                React.DOM.a({onClick: this.launchProspectListFromCompanyListModal, 
                   style: listOptions, 
                   href: "javascript:", 
                   id: "downloadProspects", 
                   className: "drop-target btn btn-primary btn-xs list-options"}, 
                  React.DOM.i({className: "fa fa-cloud-download"}), "   Find Prospects   " 
                )
              ), 
        

          React.DOM.div({id: "autoscroll", style: {height:'400px',overflow:'auto'}}, 
            React.DOM.table({className: "prospects-table table table-striped", style: {marginBottom:'0px'}}, 
              React.DOM.thead({style: {backgroundColor:'white'}}, 
                CompanyProspectHeader({masterCheckboxChanged: this.masterCheckboxChanged})
              ), 
              React.DOM.tbody(null, 
                prospects
              )
            ), 
            (this.state.loading) ? LoadingSpinner(null) : ""
          )
        )
      ), 

      PanelFooting({currentPage: this.state.currentPage, 
                    count: this.state.count, 
                    paginate: this.paginate, 
                    prospectsPerPage: this.state.prospectsPerPage, 
                    pages: this.state.pages}), 
      Messenger(null), 
      CreateProspectListFromCompanyListModal({currentList: this.state.currentList, currentListObjectId: this.state.currentListObjectId})
    )
    );
  },

  paginate: function(newProspects, newPage) {
    this.setState({
      prospects: newProspects,
      currentPage: newPage,
      keyboardActiveProspect: 0
    })
    this.startKeyboardShortcuts()
    document.getElementById('autoscroll').scrollTop = 0
  },

  launchProspectListFromCompanyListModal: function() {
    
    $('#createProspectListFromCompanyListModal').modal()
  },

  downloadFile: function() {
    parse_headers = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
    }

    // Get List Count
    list = JSON.stringify({
      '__type'   :  'Pointer',
      'className':  this.state.listClassName,
      'objectId' :  this.state.currentListObjectId
    })
    console.log(list)
    // Add Support For More than 1000
    // num_of_requests
    //this.props.paginate(res.results, this.props.currentPage + 1)
    localStorage.download_total = Math.ceil(this.state.count/1000)
    localStorage.downloads      = 0

    if(this.state.currentList == "All")
      qry = 'where={"company":'+company+'}&count=1'
    else
      qry = 'where={"lists":'+list+'}&count=1'

    className = this.state.className

    for(i=0;i< Math.ceil(this.state.count/1000); i++){
      $.ajax({
        url: 'https://api.parse.com/1/classes/'+className+'?limit=1000&skip='+i,
        type:'GET',
        headers: parse_headers,
        downloadFile: 'download_'+i,
        data: qry,
        success: function(res){
          // Clean Results
          // Remove Certain Parse Columns - created_at, updated_at, objectId
          // Rename createdAt as date prospected
          for(i=0;i< res.results.length;i++) {
            delete res.results[i].company
            delete res.results[i].pos
            delete res.results[i].user
            delete res.results[i].objectId
            delete res.results[i].createdAt
            delete res.results[i].updatedAt
          }

          // Add Results To LocalStorage
          localStorage.downloads = JSON.parse(localStorage.downloads) + 1 
          localStorage.setItem(this.downloadFile, JSON.stringify(res.results))

          // Check to see if all ajax reqs in for loop are complete
          if(localStorage.downloads == localStorage.download_total) {
            console.log('matched')
            // Merge all localStorage results
            prospects = []
            for(ii=0;ii < JSON.parse(localStorage.download_total); ii++){
              prospects = prospects.concat(JSON.parse(localStorage.getItem('download_'+ii)))
              console.log(prospects)
            }

            console.log(prospects)
            // Output as CSV
            var blob = new Blob([Papa.unparse(prospects)], {type: "text/plain;charset=utf-8"});
            console.log(blob)
            saveAs(blob, "prospects.csv");
          }
      },

      error: function(res){
        console.log(res)
      }
      });
    }
    
    company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
    

  },

  removeSelectedProspects: function() {
    // If List Type is All Archive the prospect
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      "Content-Type" : "application/json"
    }

    selectedProspects = JSON.parse(localStorage.selectedProspects)
    batchData = []

    for(i=0;i< selectedProspects.length;i++){
      if(this.state.currentList != 'All'){
        tmp = {
          method:'PUT',
          path:'/1/classes/'+this.state.className+'/'+selectedProspects[i],
          body: {
            lists: {
              '__op'    : 'Remove',
              "objects" : [{ 
                  '__type':'Pointer',
                  'className':this.state.listClassName,
                  'objectId':this.state.currentListObjectId
              }]
            }
          }
        }
      }else{
        tmp = {
          method:'PUT',
          path:'/1/classes/'+this.state.className+'/'+selectedProspects[i],
          body: {
            archived:false,
          }
        }
      }
      batchData.push(tmp)
    }

    thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/batch',
      type:'POST',
      headers:parseHeaders,
      data: JSON.stringify({requests: batchData}),
      success:function(res) {
        console.log(res)
        lists = thiss.state.lists

        for(i=0;i< lists.length; i++) { 
          // Subtract From Old List - Not Working For Archive
          if(lists[i].objectId == thiss.state.currentListObjectId)
            lists[i].count = parseInt(lists[i].count) - parseInt(selectedProspects.length)
        }
        // Update local list count
        thiss.setState({lists: lists})

        // remove from current list ui
        selectedProspects = JSON.parse(localStorage.selectedProspects)
        console.log('remove selected prospects')
        console.log(selectedProspects)
        console.log(thiss.state.prospects)
        var filtered = _.filter(thiss.state.prospects, function(item) {
          for(i=0;i< selectedProspects.length;i++) 
            if(item.objectId == selectedProspects[i])
              return false
          return true
        });
        console.log(filtered)
        thiss.setState({prospects: filtered})
        localStorage.selectedProspects = JSON.stringify([])

        // add alert to inform user
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  moveSelectedProspects: function(listObjectId) {
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      "Content-Type" : "application/json"
    }

    // get the selected objectId from selectedProspects state
    selectedProspects = JSON.parse(localStorage.selectedProspects)
    batchData = []


    // Batch Update Parse
    // - Remove All Selected Prospects From Current List
    for(i=0;i< selectedProspects.length;i++){
      tmp = {
        method:'PUT',
        path:'/1/classes/'+this.state.className+'/'+selectedProspects[i],
        body: {
          lists: {
            '__op'    : 'Remove',
            "objects" : [{ 
                '__type':'Pointer',
                'className':this.state.listClassName,
                'objectId':this.state.currentListObjectId
            }]
          }
        }
      }
      batchData.push(tmp)
    }
    
    // - Add Other List 
    for(i=0;i< selectedProspects.length;i++){
      tmp = {
        method:'PUT',
        path:'/1/classes/'+this.state.className+'/'+selectedProspects[i],
        body: {
          lists: {
            '__op'    : 'AddUnique',
            "objects" : [{ 
                '__type':'Pointer',
                'className':this.state.listClassName,
                'objectId':listObjectId
            }]
          }
        }
      }
      batchData.push(tmp)
    }

    thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/batch',
      type:'POST',
      headers:parseHeaders,
      data: JSON.stringify({requests: batchData}),
      success:function(res) {
        console.log(res)
        lists = thiss.state.lists

        for(i=0;i< lists.length; i++) { 
          // Add To New List
          if(lists[i].objectId == listObjectId)
            lists[i].count = parseInt(lists[i].count) + parseInt(selectedProspects.length)
          // Subtract From Old List
          if(lists[i].objectId == thiss.state.currentListObjectId)
            lists[i].count = parseInt(lists[i].count) - parseInt(selectedProspects.length)
        }
        // Update local list count
        thiss.setState({lists: lists})

        // remove from current list ui
        console.log('selectedProspects')
        console.log(thiss.state.prospects)
        var filtered = _.filter(thiss.state.prospects, function(item) {
          is_selected = true
          for(i=0;i< selectedProspects.length;i++) 
            if(item.objectId == selectedProspects[i])
              is_selected = false
          return is_selected
        });
        console.log(filtered)
        thiss.setState({prospects: filtered})
        localStorage.selectedProspects = JSON.stringify([])

        // add alert to inform user
      },
      error: function(err) {
        console.log(err)
      }
    });
  },

  copySelectedProspects: function(listObjectId) {
    console.log(listObjectId)
    
    // make batch ajax request to parse
    parseHeaders = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
      "Content-Type" : "application/json"
    }

    // Add Loading Sign To List

    selectedProspects = JSON.parse(localStorage.selectedProspects)
    batchData = []
    for(i=0;i< selectedProspects.length;i++){
      tmp = {
        method:'PUT',
        path:'/1/classes/'+this.state.className+'/'+selectedProspects[i],
        body: {
          lists: {
            '__op'    : 'AddUnique',
            "objects" : [{ 
                '__type':'Pointer',
                'className':this.state.listClassName,
                'objectId':listObjectId
            }]
          }
        }
      }
      batchData.push(tmp)
    }

    thiss = this;
    $.ajax({
      url:'https://api.parse.com/1/batch',
      type:'POST',
      headers:parseHeaders,
      data: JSON.stringify({requests: batchData}),
      success:function(res) {
        console.log(res)
        // Update With the number of successes
        // Update local list count
        lists = thiss.state.lists
        for(i=0;i< lists.length; i++) { 
          if(lists[i].objectId == listObjectId)
            lists[i].count = parseInt(lists[i].count) + parseInt(res.length)
        }
        thiss.setState({lists: lists})
        localStorage.selectedProspects = "[]"
        thiss.setState({selectedProspects : [] })
        
        // add alert to inform user
        // Unselect all selected
      },
      error: function(err) {
        console.log(err)
      }
    });

  },

  hideAlert: function() {
    $('.alert').hide()
  },

  adjustHeight: function(whichOne) {
    prospectWindowTop = $('#prospectDetailButtons').position().top
    prospectWindowTop = prospectWindowTop + $('#prospectDetailButtons').height()
    prospectWindowBottom = $('#autoscroll').position().top + $('#autoscroll').height()

    if(whichOne == 'j')
      activeProspect = this.state.keyboardActiveProspect +1 
    else
      activeProspect = this.state.keyboardActiveProspect -1 

    activeTop = $($('.prospects-tr')[activeProspect]).position().top
    selectedHeight = $($('.prospects-tr')[activeProspect]).height()
    activeBottom = $($('.prospects-tr')[activeProspect]).position().top+selectedHeight

    console.log(prospectWindowTop, prospectWindowBottom)
    console.log(activeTop, activeBottom)

    scrollTop = document.getElementById('autoscroll').scrollTop
    if(activeBottom > prospectWindowBottom)
      document.getElementById('autoscroll').scrollTop = scrollTop + activeBottom - prospectWindowBottom

    if(activeTop < 0)
      document.getElementById('autoscroll').scrollTop = scrollTop + activeTop - 37
    else if(activeTop == $($('.prospects-tr')[0]).position().top)
      document.getElementById('autoscroll').scrollTop = 0
      
    // Get Postion of Top
    // Get Position of Bottom 
    // Get Position of Current Selected
    // Adjust by scrolling down or up
  },

  startKeyboardShortcuts: function() {
    /* Keyboard Shortcuts */
    Mousetrap.reset()
    //Mousetrap.unbind(['j','k','o'])
    thiss = this;

    /* Prospect Table Shortcuts */
    Mousetrap.bind('j', function() { 
      keyboard = thiss.state.keyboardActiveProspect
      if(keyboard != thiss.state.prospectsPerPage+1)
        thiss.adjustHeight('j')
        thiss.setState({keyboardActiveProspect: keyboard+1})
    });

    Mousetrap.bind('k', function() { 
      keyboard = thiss.state.keyboardActiveProspect
      if(keyboard != 1)
        thiss.adjustHeight('k')
        thiss.setState({keyboardActiveProspect: keyboard-1})
    });


    Mousetrap.bind('o', function() { 
      console.log('open current prospect')
      console.log($($('.keySelect').find('a.linkedin_link')[0]).attr('href'))
      link = $($('.keySelect').find('a.linkedin_link')[0]).attr('href')
      /*
      window.open(link, '_blank')
      console.log('new')
      */
      //popupWindow.blur();
      //window.focus();
      // keyboard = thiss.state.keyboardActiveProspect
      
      var a = document.createElement("a");
      a.href = link
      var evt = document.createEvent("MouseEvents");
      //the tenth parameter of initMouseEvent sets ctrl key
      // For Mac This Works Check For - Windows
      evt.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0,
                                  false, false, false, true, 0, null);
      a.dispatchEvent(evt);
    });



    /* List Modification Shortcuts */
    Mousetrap.bind('tab+r', function(){
      //console.log('reload')
      $('#renameListBtn').click()
    })

    Mousetrap.bind('tab+d', function(){
      //console.log('reload')
      $('#deleteListModal').click()
    })

    Mousetrap.bind('tab+s', function(){
      //console.log('reload')
      //$('#downloadProspects').click()
      thiss.downloadFile()
    })

    Mousetrap.bind('shift+l', function(){
      //console.log('reload')
      //$('#downloadProspects').click()
      //thiss.downloadFile()
      $('.new-list-btn').click()
    })

    Mousetrap.bind('e', function(){
      console.log('reload')
      //$('#downloadProspects').click()
      thiss.removeSelectedProspects()
    })

    Mousetrap.bind('c', function() { 
      console.log('copy')
      $('#copyToList').click()
    });

    Mousetrap.bind('m', function() { 
      console.log('copy')
      $('#moveToList').click()
    });

    //Mousetrap.bind('e', function() { console.log('e'); });
    Mousetrap.bind('right', function() { console.log('right'); });
    Mousetrap.bind('left', function() { console.log('left'); });

  },

  componentDidMount: function() {
    /* OnLoad For The First Time Function */
    localStorage.selectedProspects = JSON.stringify([])
    thisss = this;

    //this.startKeyboardShortcuts()

    parse_headers = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb'
    }

    company = JSON.stringify(JSON.parse(localStorage.currentUser).company)
    cuid = JSON.parse(localStorage.currentUser).objectId
    user = JSON.stringify({'__type':'Pointer',
                           'objectId':cuid, 
                           'className': 'User'})
    archiveList = JSON.stringify({ //hardCode
      'objectId':'SerPQjckve',
      '__type':'Pointer', 
      'className' : this.state.listClassName
    })

    qry = 'where={"company":'+company+',"archived":true}&count=1&order=-createdAt'

    if(this.state.currentList != 'All'){
      currentList = {
        'objectId':this.state.currentListObjectId, 
        '__type':'Pointer', 
        'className' : this.state.listClassName
      }
      currentList = JSON.stringify(currentList)
      user = JSON.stringify({'__type':'Pointer',
                             'objectId':'xThAXc0LZT',
                             'className':'User'})

      // add company to prospects added through mining job
      qry = 'where={"company":'+company+',"lists":'+currentList+'}&count=1'
    }

    className = this.state.className
    $.ajax({
      url: 'https://api.parse.com/1/classes/'+className+'?limit='+thisss.state.prospectsPerPage,
      type:'GET',
      headers: parse_headers,
      cache: true,
      data: qry,
      success: function(res){
        console.log('COMPANY RESULTS')
        console.log(res.results)
        console.log(res.results.length)
        thisss.setState({prospects: res.results})
        thisss.setState({count: res.count})
        thisss.setState({totalCount: res.count})
        thisss.setState({pages: Math.ceil(res.count/thisss.props.prospectsPerPage)})
        thisss.setState({loading: false})
      },
      error: function(res){
        console.log('error')
        console.log(res)
      }
    })

    parse_headers = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
    }

    currentUser = { 
      '__type'   : 'Pointer',
      'className': '_User',
      'objectId' : JSON.parse(localStorage.currentUser).objectId
    }

    thiss = this;
    listClassName = this.state.listClassName
    $.ajax({
      url: 'https://api.parse.com/1/classes/'+listClassName,
      type: 'GET',
      headers: parse_headers,
      data: 'where={"user":'+JSON.stringify(currentUser)+"}&count=1&order=-createdAt",
      success: function(res) {
        console.log(res)
        results = res.results
        for(i=0;i< results.length; i++) {
          results.count = '~'
        }
        thiss.setState({lists: results})
        // Make batch request to get list counts after they are loaded
        for(i=0;i < res.results.length; i++) {
          localStorage.setItem(res.results[i].objectId, "")
        }

        for(i=0;i< res.results.length; i++) {
          list = {
            '__type'    : 'Pointer',
            'objectId'  : res.results[i].objectId,
            'className' : thiss.state.listClassName,
          }

          className = thiss.state.className
          $.ajax({
            url:'https://api.parse.com/1/classes/'+className,
            type:'GET',
            headers:parse_headers,
            listObjectId: res.results[i].objectId,
            data: 'where={"lists":'+JSON.stringify(list)+'}&count=1',
            success: function(res) {
              //console.log(this.listObjectId)
              localStorage.setItem(this.listObjectId, res.count)
              amount = 0
              for(ii=0;ii< results.length;ii++){
                if(localStorage.getItem(results[ii].objectId) == "")
                  amount = amount + 1
              }

              if(amount == 0) {
                for(ii=0;ii< results.length;ii++)
                  results[ii].count = localStorage.getItem(results[ii].objectId)

                thiss.setState({lists: results})
                //console.log('Got Counts')
              }

              // updated res.count
              //thiss.setState({count: res.count})
            },
            error: function(err) {
              console.log(err)
            }
          })
        }
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });
  },

  generate_id : function () {
    return '_' + Math.random().toString(36).substr(2, 9);
  },
});

/*  Dropdown Menus */

var CurrentLists = React.createClass({displayName: 'CurrentLists',
  listAction: function(e) {
    listName = $(e.target).text()
    
    var listSelect = _.filter(this.props.lists, function(item) {
       return item.name == listName
    });

    this.props.listAction(listSelect[0].objectId)
  },

  render: function() {
    lists = [] 
    for(i=0;i< this.props.lists.length;i++) {
      lists.push(
        React.DOM.li(null, React.DOM.a({style: {fontWeight:'bold',fontSize:'10px'}, href: "javascript:", onClick: this.listAction}, this.props.lists[i].name))
      )
    }
    //console.log(this.props.copyDropdownStyle)
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: {right:158}}, 
        lists
      )
    );
  }
});

var ListsMenu = React.createClass({displayName: 'ListsMenu',
  render: function() {
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: {
            minWidth:'inherit',
            top: '20px',
            width: '125px',
            right: '154px',
            left:'auto'
          }}, 
        React.DOM.li(null, React.DOM.a({href: "#books"}, 
          React.DOM.i({className: "fa fa-times"}), "  " + ' ' +
          "Delete List"
        )), 
        React.DOM.li(null, React.DOM.a({href: "#podcasts"}, 
          "Rename Lists"
        ))
      )
    );
  }
});

var CurrentListsTwo = React.createClass({displayName: 'CurrentListsTwo',
  listAction: function(e) {
    listName = $(e.target).text()
    
    var listSelect = _.filter(this.props.lists, function(item) {
       return item.name == listName
    });

    this.props.listAction(listSelect[0].objectId)
  },

  render: function() {
    lists = [] 
    for(i=0;i<this.props.lists.length;i++) {
      lists.push(
        React.DOM.li(null, React.DOM.a({style: {fontWeight:'bold',fontSize:'10px'}, 
               href: "javascript:", 
               onClick: this.listAction}, 
          this.props.lists[i].name))
      )
    }
    return (
      React.DOM.ul({className: "dropdown-menu drop-test", id: "dropdown", 
          style: this.props.copyDropdownStyle}, 
        lists
      )
    );
  }
});

var ListDetailButtons = React.createClass({displayName: 'ListDetailButtons',
  // Rename List
  getInitialState: function() {
    return {
      editMode: false
    }
  },
  render: function() {
    //console.log(this.props.currentListObjectId)
    if(!this.state.editMode) {
      stuff = React.DOM.span({className: "", style: listNameStyle}, 
            (this.props.currentListName == "All") ? '' : React.DOM.i({className: "fa fa-bars", style: {fontSize:16, marginTop:-5}}), 
            (this.props.currentListName == "All") ? '' : "   " +this.props.currentListName
              )
    } else {
      stuff = React.DOM.input({className: "form-control", style: {width: 100, float: 'left', height: 24, marginTop: -1}})
    }
    return (

          React.DOM.div(null, 
            React.DOM.h4({style: {margin:0}}, 
              stuff, 
              React.DOM.a({href: "javascript:", 
                style: listBtn, 
                'data-toggle': "modal", 
                id: "renameListBtn", 
                'data-target': ".bs-renameList-modal-sm", 
                className: " btn btn-xs btn-default"}, 
                React.DOM.i({className: "fa fa-pencil"})
              ), 
              React.DOM.a({href: "javascript:", 
                style: listBtn, 
                'data-toggle': "modal", 
                id: "deleteListModal", 
                'data-target': ".bs-deleteList-modal-sm", 
                className: "btn btn-xs btn-default"}, 
                React.DOM.i({className: "fa fa-trash-o"})
              )
            ), 

            RenameListModal({renameList: this.props.renameList}), 
            DeleteListModal({deleteList: this.props.deleteList})
          )
      );
  },

  renameList: function(newListName) {
    this.props.renameList(newListName)
  },

  deleteList: function(){
    this.props.deleteList()
  },

  toggleEdit: function() {
    this.setState({editMode: !this.state.editMode })
  }
});

var CompanyProspectHeader = React.createClass({displayName: 'CompanyProspectHeader',
  render: function() {
    return (
      React.DOM.tr(null, 
        React.DOM.th(null), 
        React.DOM.th({style: {width:300}}, "Name"), 
        React.DOM.th({style: {width:100}}, "Added On"), 
        React.DOM.th(null, "Industry"), 
        React.DOM.th({style: {width:137,display:'none'}}, "# of Prospects"), 
        React.DOM.th({style: {display:'none'}}, "Signals"), 
        React.DOM.th({style: {width:600}}, " "), 
        React.DOM.th(null, " "), 
        React.DOM.th(null, " ")
      )
    );
  }
});

},{"./company.js.min.js":1,"./create_prospect_list_from_company_list.js.min.js":3,"./data_row.js.min.js":4,"./delete_list_modal.js.min.js":6,"./loading_spinner.js.min.js":8,"./messenger.js.min.js":9,"./panel_footing.js.min.js":10,"./rename_list_modal.js.min.js":11,"./side_menu_user_prospects.js.min.js":12,"./user_prospect.js.min.js":13,"./user_prospect_header.js.min.js":14,"./user_side_menu_list.js.min.js":15}],6:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createListModal
  createList: function() {
    console.log($('#listTitle').val())

    data =  {
      'name'        : $('#listTitle').val().trim(),   //Waiting , Running
      'user'        : { '__type':'Pointer',
                      'className':'_User',
                      'objectId':'xWESiw5Smd' },
    }

    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectList',
      type:'POST',
      headers: appConfig.parseHeaders,
      data: JSON.stringify(data),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });

    data.count = 0

    this.props.createList(data)
    
    $('#createListModal').modal('hide')
    $('body').removeClass('modal-open');
    $('.modal-backdrop').remove();
    //$('button.close').click()
  },

  createListButtonClick: function() {
    if($('#listTitle').val().trim() != "")
      this.createList()
  },

  createMiningJob: function(e) {
    e.preventDefault()
    console.log('lmao')
    if($('#listTitle').val().trim() != "")
      this.createList()
  },

  deleteList: function() {
    this.props.deleteList()
  },

  render: function() {
    return (
          React.DOM.div({className: "modal fade bs-deleteList-modal-sm", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "createListModal", style: {top:'200px'}}, 
            React.DOM.div({className: "modal-dialog modal-sm"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-trash-o"}), "  Delete List?")
                ), 
                React.DOM.div({className: "modal-body"}, 
                  React.DOM.form({className: "deleteForm", onSubmit: this.deleteList}, 
                    React.DOM.a({href: "javascript:", 
                      onClick: this.deleteList, 
                      className: "btn btn-danger", 
                      style: {display:'block', width:'100%'}}, 
                      "Delete"
                    ), 
                    React.DOM.br(null), 
                    React.DOM.a({href: "javascript:", 
                      onClick: this.deleteList, 
                      className: "btn btn-default", 
                      style: {display:'block', width:'100%'}}, 
                      "Cancel"
                    )
                  )

                )
              )
            )
          )
    );
  }
});


},{}],7:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Spinner
  render: function() {
    return (
      React.DOM.div({className: "horizantal-spinner"}, 
        React.DOM.div({className: "hoz-bounce1"}), 
        React.DOM.div({className: "hoz-bounce2"}), 
        React.DOM.div({className: "hoz-bounce3"})
      )
    )
  }
})

},{}],8:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // LoadingSpinner
  render: function() {
    return (
    React.DOM.div({className: "spinner", style: {marginTop:'180px'}}, 
      React.DOM.div({className: "spinner-container container1"}, 
        React.DOM.div({className: "circle circle1"}), 
        React.DOM.div({className: "circle circle2"}), 
        React.DOM.div({className: "circle circle3"}), 
        React.DOM.div({className: "circle circle4"})
      ), 
      React.DOM.div({className: "spinner-container container2"}, 
        React.DOM.div({className: "circle circle1"}), 
        React.DOM.div({className: "circle circle2"}), 
        React.DOM.div({className: "circle circle3"}), 
        React.DOM.div({className: "circle circle4"})
      ), 
      React.DOM.div({className: "spinner-container container3"}, 
        React.DOM.div({className: "circle circle1"}), 
        React.DOM.div({className: "circle circle2"}), 
        React.DOM.div({className: "circle circle3"}), 
        React.DOM.div({className: "circle circle4"})
      )
    )
    )
  }
});

},{}],9:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  //Messenger
  render: function() {
    return (
        React.DOM.div({className: "alert alert-success", 
             'data-alert': "alert", 
             style: {position:'absolute',
                     top: 31, 
                     right:30, 
                     display:'none',
                     width:200}}, 
                     React.DOM.a({className: "close", 
                       href: "javascript:", 
                       onClick: this.hideAlert}, "×"), 
            "Test"
        )
    );
  }
});

},{}],10:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // Panel Footing
  paginatePrevious: function() {
    var thiss = this;

    qry = {
      where: JSON.stringify({
        company: appConfig.company,
        archived: true,
      }),
      count: 1,
      skip: (thiss.props.currentPage-2)*thiss.props.prospectsPerPage,
      limit: thiss.props.prospectsPerPage
    }
    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospect',
      type:'GET',
      beforeSend: function() {
        console.log('before Send')
        thiss.props.setPaginate(true)
      },
      headers: appConfig.parseHeaders,
      data: qry,
      success: function(res){
        //thiss.setState({prospects: res.results})
        //thiss.setState({currentPage: this.props.currentPage - 1})
        thiss.props.paginate(res.results, thiss.props.currentPage - 1)
        thiss.props.setPaginate(false)
      },
      error: function(res){ console.log(res) }
    });
  },


  paginate: function(direction) {
    prospectsPerPage = this.props.prospectsPerPage
    if(direction=='previous')
      skip = (this.props.currentPage - 2)*prospectsPerPage
    else if(direction=="forward")
      skip = this.props.currentPage*prospectsPerPage

    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospect?skip='+skip,
      type:'GET',
      headers: parse_headers,
      data: 'where={"company":'+appConfig.company+'}&count=1',
      success: function(res){
        //thiss.setState({prospects: res.results})
        //thiss.setState({currentPage: this.props.currentPage + 1})
        this.props.paginate(res.results, this.props.currentPage + 1)
      },
      error: function(res){
        console.log(res)
      }
    });
  },

  paginateForward: function() {
    var thiss = this;
    qry = {
      where: JSON.stringify({
        company: appConfig.company,
        //user: appConfig.user,
        archived: true
      }),
      count: 1,
      skip: thiss.props.currentPage*thiss.props.prospectsPerPage,
      limit: thiss.props.prospectsPerPage,
    }

    $.ajax({
      url: 'https://api.parse.com/1/classes/Prospect',
      type:'GET',
      headers: appConfig.parseHeaders,
      data: qry,
      beforeSend: function() {
        thiss.props.setPaginate(true)
      },
      success: function(res){
        console.log(res.results)
        console.log("success")
        thiss.props.paginate(res.results, thiss.props.currentPage + 1)
        thiss.props.setPaginate(false)
      },
      error: function(res){ console.log(res); }
    });
  },

  componentDidMount: function() {
    paginateForward = this.paginateForward
    paginatePrevious = this.paginatePrevious

    Mousetrap.bind('l', function() { 
      console.log('new forward')
      paginateForward()
    });

    Mousetrap.bind('h', function() { 
      console.log('new back')
      paginatePrevious()
    });
  },

  render: function() {
    // Should be handled by Panle Footing

    lastPage = this.props.currentPage == this.props.pages
    lessThanOnePage = this.props.count < this.props.prospectsPerPage
    forward = (lastPage || lessThanOnePage) ? 'disabled' : ''

    previous = (this.props.currentPage - 1) ? '' : 'disabled'

    lowerLimit = (this.props.currentPage-1)*this.props.prospectsPerPage
    upperLimit = this.props.currentPage*this.props.prospectsPerPage

    lowerLimit = (lowerLimit) ? lowerLimit : 1
    upperLimit = (upperLimit > this.props.count) ? this.props.count : upperLimit

    return (
      React.DOM.div({className: "panel-footing", 
           id: "navbar", 
           style: {height:'35px',padding:'0px', paddingTop:'7px'}}, 
          React.DOM.span({style: {float:'right',marginRight:'20px'}}, 
            React.DOM.a({href: "javascript:", 
               style: {marginRight:'5px'}, 
               onClick: this.paginatePrevious, 
               className: "blue-gradient btn btn-primary btn-xs "+previous}, 
            React.DOM.i({className: "fa fa-fast-backward"})
          ), 
          React.DOM.a({href: "javascript:", 
             onClick: this.paginatePrevious, 
             className: "paginate-back-btn blue-gradient btn btn-primary btn-xs "+previous}, 
            React.DOM.i({className: "fa fa-chevron-left"})
          ), 
          React.DOM.span({style: {marginLeft:5, marginRight:5,display:'inline-block',width:115, textAlign:'center'}}, 
            lowerLimit+' - '+upperLimit+' of '+this.props.count
          ), 
          React.DOM.a({href: "javascript:", 
             onClick: this.paginateForward, 
             className: "paginate-forward-btn blue-gradient btn btn-primary btn-xs "+forward}, 
            React.DOM.i({className: "fa fa-chevron-right"})
          ), 
          React.DOM.a({href: "javascript:", 
             style: {marginLeft:'5px'}, 
             onClick: this.paginateForward, 
             className: "blue-gradient btn btn-primary btn-xs "+forward}, 
            React.DOM.i({className: "fa fa-fast-forward"}))
          )
        )
    );
  }
});

},{}],11:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  // createListModal
  createList: function() {
    console.log($('#listTitle').val())

    data =  {
      'name'        : $('#listTitle').val().trim(),   //Waiting , Running
      'user'        : { '__type':'Pointer',
                      'className':'_User',
                      'objectId':'xWESiw5Smd' },
    }

    $.ajax({
      url:'https://api.parse.com/1/classes/ProspectList',
      type:'POST',
      headers: appConfig.parseHeaders,
      data: JSON.stringify(data),
      success: function(res) {
        console.log(res)
      },
      error: function(err) {
        console.log('error')
        console.log(err)
      }
    });

    data.count = 0

    this.props.createList(data)
    
    $('#createListModal').modal('hide')
    $('body').removeClass('modal-open');
    $('.modal-backdrop').remove();
    //$('button.close').click()
  },

  renameList: function(e) {
    e.preventDefault()
    //console.log($('#newListName').val())
    newListName = $('#newListName').val()
    if(newListName.trim() != "")
      this.props.renameList(newListName)
    // Disable Modal
  },

  render: function() {
    return (
          React.DOM.div({className: "modal fade bs-renameList-modal-sm", tabIndex: "-1", role: "dialog", 'aria-labelledby': "mySmallModalLabel", 'aria-hidden': "true", id: "createListModal", style: {top:'200px'}}, 
            React.DOM.div({className: "modal-dialog modal-sm"}, 
              React.DOM.div({className: "modal-content"}, 
                React.DOM.div({className: "modal-header"}, 
                  React.DOM.button({type: "button", className: "close", 'data-dismiss': "modal"}, React.DOM.span({'aria-hidden': "true"}, "×"), 
                    React.DOM.span({className: "sr-only"}, "Close")), 
                  React.DOM.h4({className: "modal-title", id: "myModalLabel"}, 
                    React.DOM.i({className: "fa fa-list"}), "  Rename List")
                ), 
                React.DOM.div({className: "modal-body"}, 
                  React.DOM.form({onSubmit: this.renameList}, 
                    React.DOM.input({id: "newListName", type: "text", placeholder: "Enter list title...", className: "form-control"}), 
                    React.DOM.br(null), 
                    React.DOM.a({href: "javascript:", 
                      onClick: this.renameList, 
                      className: "btn btn-success", 
                      style: {display:'block', width:'100%'}}, 
                      "Create List"
                    )
                  )
                )
              )
            )
          )
    );
  }
});


},{}],12:[function(require,module,exports){
/** @jsx React.DOM */

var SideMenuListOption = require('./user_side_menu_list.js.min.js');
var createListModal = require('./create_list_modal.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  //SideMenuProspects - SideList
  getInitialState: function() {
    return {
      /*
      createList: 
      renameList:
      deleteList:
      changeList:
      currentList:
      totalCount:
      lists:
      */
    }
  },

  createList: function (data) {
    this.props.createList(data)
  },

  componentDidMount: function() {
  },

  changeList: function(e) {
    /*
    currentList = $(e.target).parent()//.data('list')
    console.log(currentList)
    this.props.changeList(currentList.name, currentList.objectId)
    */
  },

  render: function() {
    if(this.props.currentList == "All")
      styles = {'backgroundColor':'rgb(0, 122, 255)', 'color':'white'} 
    else
      styles =  {}

    lists = [SideMenuListOption({list: {name: 'All',count: this.props.totalCount}, 
                                 iconType: 'users', 
                                 changeList: this.props.changeList}), 
             SideMenuListOption({list: {name: 'Archived', count: '~'}, 
                                 iconType: 'archive', 
                                 changeList: this.props.changeList, 
                                 hideCount: true})]

    for(i=0;i< this.props.lists.length;i++){
      list = this.props.lists[i]
      if(list.list_type == "signal_list")
        iconType = "wifi"
      else if (list.list_type == "mining_job")
        iconType = "cloudDownload"
      if(list.list_type)
        lists.push( SideMenuListOption({list: list, 
                                        iconType: iconType, 
                                        changeList: this.props.changeList}))
      else 
        lists.push( SideMenuListOption({list: list, 
                                        changeList: this.props.changeList}))
    }

    return (
      React.DOM.div({className: "col-lg-2 col-md-2 col-sm-2 col-xs-2", 
           style: {padding:'0',height:'438px',backgroundColor:'#e0e9ee',
                   borderRight:'1px solid #b0b8bf',textAlign:'center'}}, 
        React.DOM.div({className: "prospect-list-header"}, " Lists "), 
        React.DOM.div({className: "btn-group-vertical", 
             style: {width:'100%', height: '320px', overflow: 'auto'}}, 
          lists
        ), 
        React.DOM.br(null), React.DOM.br(null), 
        React.DOM.a({href: "javascript:", className: "btn btn-primary new-list-btn", 
              'data-toggle': "modal", 'data-target': ".bs-example-modal-sm", 
              style: { backgroundImage: 'linear-gradient(180deg, #0096ff 0%, #005dff 100%)'}}, 
          React.DOM.i({className: "fa fa-plus-circle"}), "  New List"
        ), 
        createListModal({createList: this.createList, 
                         listClassName: this.props.listClassName}), " ", React.DOM.br(null)
      )
    );
  },
});

},{"./create_list_modal.js.min.js":2,"./user_side_menu_list.js.min.js":15}],13:[function(require,module,exports){
/** @jsx React.DOM */
var HorizantalSpinner = require('./horizantal_spinner.js.min.js')

module.exports = React.createClass({displayName: 'exports',
  // UserProspect
  getInitialState: function() {
    return { }
  },

  clickCheck: function(e) {
    e.stopPropagation()
    domNode = this.getDOMNode()
    //isChecked = $($(domNode).find('input[type="checkbox"]')[0]).prop('checked')
    isChecked = $($(domNode).find('input[type="checkbox"]')[0]).prop('checked')
    $($(this.getDOMNode()).find('input[type="checkbox"]')[0]).click()
    //console.log(isChecked)
    this.setState({checked: isChecked})
    this.props.checkboxAction(isChecked, this.props.prospect.objectId)
  },

  rowClick: function() {
    $($(this.getDOMNode()).find('input[type="checkbox"]')[0]).click()
  },

  keyboardClick: function() {
    $($('.keySelect').find('input[type="checkbox"]')[0]).click()
  },

  componentDidMount: function() { },

  render: function() {
    keyboardSelected = {borderLeft:'7px solid rgba(0,0,0,0)'}
    thissss = this
    if(this.props.keyboardSelected) {
      // Adjust Scroll depending on where the prospect is
      keyboardSelected = {borderLeft:'7px solid #0096ff !important'}
      Mousetrap.unbind('x')
      Mousetrap.bind('x', function() { 
        thissss.keyboardClick()
        if(thissss.state.checked)
          console.log("lmao")
      });
    }

    prospect = this.props.prospect

    if(this.props.masterCheckboxChecked && this.state.checked)
      checked = true
    else if(this.props.alreadyChecked)
      checked = true
    else if(this.state.checked)
      checked = true
    else if(this.props.masterCheckboxChecked || this.state.checked)
      checked = true
    else
      checked = false

    //console.log(this.state.checked)
    //console.log(checked)
    //{prospect.employeeCountRange.name + " employees" }
    
    color = {}
    if(this.state.checked || this.props.alreadyChecked)
      color = {backgroundColor: '#eef8ff'}
      
    rowCl = (this.props.keyboardSelected) ? "prospects-tr keySelect" : "prospects-tr"
    websiteBtn = (prospect.websiteUrl) ?  React.DOM.a({href: "http://"+prospect.websiteUrl.replace('http://','')}, " ", React.DOM.i({className: "fa fa-globe"}), " ") : ""
    
    prospect_email = prospect.email
    if(typeof(prospect.domain) == "undefined")
      prospect.email = "website not found"
    if(prospect.email == "no_email") {
      if(prospect.email_guesses) {
        guess = _.findWhere(prospect.email_guesses, {tried: false})
        name = this.props.prospect.name

        vars = {
          first: _.first(name.split(' ')),
          last: _.last(name.split(' ')),
          fi: _.first(name.split(' '))[0],
          li: _.last(name.split(' '))[0]
        }
        if(guess){
          prospect_email = Mustache.render(guess.pattern.pattern, vars)
          prospect_email = prospect_email+"@"+prospect.domain
        }
      }
    }
    prospect_email = (prospect_email) ? prospect_email.toLowerCase() : ""
    prospect_email = React.DOM.a({href: "mailto:"+prospect_email, style: {margin:'0px'}}, " ", prospect_email, " ")
    company_size = (prospect.company_size) ? prospect.company_size : ""

    if(this.props.prospect.loading)
      prospect_email = HorizantalSpinner(null)
    if(this.props.prospect.loading)
      company_size = HorizantalSpinner(null)
    return (
      React.DOM.tr({className: rowCl, 
          onClick: this.rowClick, 
          style: keyboardSelected}, 
          React.DOM.td({style: color}, 
              React.DOM.input({type: "checkbox", 
                     onChange: this.clickCheck, 
                     checked: checked})
          ), 
          React.DOM.td({style: color, 
              className: "fixed-data-column"}, 
            React.DOM.span({style: {fontWeight:'bold'}}, prospect.name), 
            React.DOM.h6({style: {fontWeight:'400',margin:'0px'}}, 
              (prospect.pos) ? prospect.pos.trim() : ""
            )
          ), 
          React.DOM.td({style: color, 
              className: "fixed-data-column"}, 
            React.DOM.span({style: {fontWeight:'bold'}}, 
              prospect.company_name
            ), 
            React.DOM.h6({style: {fontWeight:'400',margin:'0px'}, className: "company-size"}, 
            company_size
            ), 
            React.DOM.h6({style: {fontWeight:'400',margin:'0px',display:'none',fontStyle:'italic'}, className: "company-size"}, 
              (prospect.industry) ? prospect.industry : ""
            )
          ), 

          React.DOM.td({style: color}, 
            React.DOM.h6({style: {margin:'0px'}}, prospect.city)), 
          React.DOM.td({style: color}, 
            prospect_email
          ), 
          React.DOM.td({style: color}, 
            React.DOM.div({style: {width:51}}, 
              React.DOM.a({onClick: this.openSimilars, 
                href: "javascript:", 
                className: "btn btn-xs btn-primary btn-gradient similar_link"}, 
                React.DOM.i({className: "fa fa-copy", style: {fontWeight:'bold'}})), " ", 
            React.DOM.a({href: this.props.liProfile, className: "btn btn-xs btn-primary btn-gradient linkedin_link"}, React.DOM.i({className: "fa fa-linkedin-square"})), 
            " ", this.props.link
            )
          ), 
          React.DOM.td({style: color}, 
            websiteBtn
          )
        )
    );
  },

  openSimilars: function(e) {
    if(this.props.liProfile.indexOf('profile') != -1){
      urlargs = this.props.liProfile.split('?')[1].split('&')
      args = []
      for(i=0;i< urlargs.length; i++)
        args.push(urlargs[i].split('='))
      args = _.object(args)
    }
    window.open("https://www.linkedin.com/vsearch/p?pivotType=sim&pid="+args.id)
    e.stopPropagation()
  },

  openLinkedinProfile: function(e) {
    id = this.state.linkedin_id
    window.open("https://www.linkedin.com/vsearch/p?pivotType=sim&pid="+id)
    e.stopPropagation()
  },

  deleteProspect: function() {
    this.props.deleteProspect(this.props.prospect.objectId, 'Prospect')
  }
});


},{"./horizantal_spinner.js.min.js":7}],14:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  checkboxAction: function(e) {
    checkboxVal = $(e.target).is(':checked')
    checkboxes = _.rest($('body').find('input[type="checkbox"]'))
    console.log(checkboxes)
    if(checkboxVal){
      _.map(checkboxes, function(checkbox){
        if(!$(checkbox).prop('checked'))
          $(checkbox).click()
      })
      
    } else {
      _.map(checkboxes, function(checkbox){
        if($(checkbox).prop('checked'))
          $(checkbox).click()
      })
    }
  },

  componentDidMount: function() {

  },

  render: function() {
    return (
            React.DOM.tr(null, 
              React.DOM.th({style: {paddingLeft:11}}, 
                React.DOM.input({type: "checkbox", onChange: this.checkboxAction})
              ), 
              React.DOM.th(null, "Name"), 
              React.DOM.th(null, "Company"), 
              React.DOM.th({style: {width:'170px'}}, "City"), 
              React.DOM.th(null, "Email"), 
              React.DOM.th(null, " "), 
              React.DOM.th(null, " ")
            )
    );
  }
});

},{}],15:[function(require,module,exports){
/** @jsx React.DOM */

module.exports = React.createClass({displayName: 'exports',
  //SideMenuListOption
  getInitialState: function() {
    return {count: '~'}
  },

  componentDidMount: function() {
    // make ajax request to get each requests 
    /*
    list = {
      '__type'    : 'Pointer',
      'objectId'  : this.props.list.objectId,
      'className' : 'ProspectList', 
    }

    parse_headers = {
      'X-Parse-Application-Id'  : 'N85QOkteEEQkuZVJKAvt8MVes0sjG6qNpEGqQFVJ', 
      'X-Parse-REST-API-Key'    : 'VN6EwVyBZwO1uphsBPsau8t7JQRp00UM3KYsiiQb',
    }

    thiss = this;

    //console.log(this.props.list.name)
    $.ajax({
      url:'https://api.parse.com/1/classes/Prospects',
      type:'GET',
      headers:parse_headers,
      data: 'where={"lists":'+JSON.stringify(list)+'}&count=1',
      success: function(res) {
        thiss.setState({count: res.count})
      },
      error: function(err) {
        console.log(err)
      }
    })
    */
  },

  changeList: function() {
    this.props.changeList(this.props.list.name, this.props.list.objectId)
  },

  render: function() {
    listName = this.props.list.name
    propsCount = this.props.count
    count = (typeof(propsCount)== "undefined") ? this.state.count : propsCount

    //console.log(this.props.iconType)
    icon = ""
    if(this.props.iconType == "archive"){
      icon = React.DOM.i({className: "fa fa-archive", style: {float:'left',lineHeight:1.5,marginRight:5}})
    } else if(this.props.iconType == "users"){
      icon = React.DOM.i({className: "fa fa-user", style: {float:'left',lineHeight:1.5,marginRight:5}})
    } else if(this.props.iconType == "wifi"){
      icon = React.DOM.i({className: "fa fa-wifi", style: {float:'left',lineHeight:1.5,marginRight:5}})
    } else if(this.props.iconType == "cloudDownload"){
      icon = React.DOM.i({className: "fa fa-cloud-download", style: {float:'left',lineHeight:1.5,marginRight:5}})
    }


    countStyle = (this.props.hideCount) ? {'display':'none'} : {backgroundColor:'#999',float:'right',marginTop:2.25}
    listStyle=(icon == "") ? "list-name" : "icon-list-name"
    if(this.props.iconType == "users")
      listStyle = "all-list-name" 
    return (
      React.DOM.button({type: "button", 
              onClick: this.changeList, 
              className: "list-names btn btn-default"}, 
              icon, 
              " ", 
              React.DOM.span({className: listStyle}, listName), 
              React.DOM.span({style: countStyle, 
                className: "badge badge-default"}, this.props.list.count)
      )
    );
  }
});


},{}]},{},[5])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvZGF0YV90YWJsZS5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL2RlbGV0ZV9saXN0X21vZGFsLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvaG9yaXphbnRhbF9zcGlubmVyLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvbG9hZGluZ19zcGlubmVyLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvbWVzc2VuZ2VyLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvcGFuZWxfZm9vdGluZy5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3JlbmFtZV9saXN0X21vZGFsLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvc2lkZV9tZW51X3VzZXJfcHJvc3BlY3RzLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvdXNlcl9wcm9zcGVjdC5qcy5taW4uanMiLCIvVXNlcnMvcm9iaW4vUHJvamVjdHMvcHJvc3BlY3Rlci9wcm9zcGVjdGVyLXBhcnNlL2Rldi9idWlsZC9qcy9jb21wb25lbnRzL3VzZXJfcHJvc3BlY3RfaGVhZGVyLmpzLm1pbi5qcyIsIi9Vc2Vycy9yb2Jpbi9Qcm9qZWN0cy9wcm9zcGVjdGVyL3Byb3NwZWN0ZXItcGFyc2UvZGV2L2J1aWxkL2pzL2NvbXBvbmVudHMvdXNlcl9zaWRlX21lbnVfbGlzdC5qcy5taW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUExRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUF4RUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBM01BO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDdklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbm1DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIil9dmFyIGY9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sZixmLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG4vL1RPRE8gLSBhYnN0cmFjdCBsaXN0c1xudmFyIFNpZGVNZW51UHJvc3BlY3RzID0gcmVxdWlyZSgnLi9zaWRlX21lbnVfdXNlcl9wcm9zcGVjdHMuanMubWluLmpzJyk7XG5cbnZhciBVc2VyUHJvc3BlY3QgPSByZXF1aXJlKCcuL3VzZXJfcHJvc3BlY3QuanMubWluLmpzJyk7XG52YXIgRGF0YVJvdyA9IHJlcXVpcmUoJy4vZGF0YV9yb3cuanMubWluLmpzJyk7XG5cbnZhciBVc2VyUHJvc3BlY3RIZWFkZXIgPSByZXF1aXJlKCcuL3VzZXJfcHJvc3BlY3RfaGVhZGVyLmpzLm1pbi5qcycpO1xudmFyIFNpZGVNZW51TGlzdE9wdGlvbiA9IHJlcXVpcmUoJy4vdXNlcl9zaWRlX21lbnVfbGlzdC5qcy5taW4uanMnKTtcbnZhciBMb2FkaW5nU3Bpbm5lciA9IHJlcXVpcmUoJy4vbG9hZGluZ19zcGlubmVyLmpzLm1pbi5qcycpXG52YXIgUGFuZWxGb290aW5nID0gcmVxdWlyZSgnLi9wYW5lbF9mb290aW5nLmpzLm1pbi5qcycpXG52YXIgTWVzc2VuZ2VyID0gcmVxdWlyZSgnLi9tZXNzZW5nZXIuanMubWluLmpzJylcbnZhciBEZWxldGVMaXN0TW9kYWwgPSByZXF1aXJlKCcuL2RlbGV0ZV9saXN0X21vZGFsLmpzLm1pbi5qcycpXG52YXIgUmVuYW1lTGlzdE1vZGFsID0gcmVxdWlyZSgnLi9yZW5hbWVfbGlzdF9tb2RhbC5qcy5taW4uanMnKVxudmFyIENvbXBhbnlQcm9zcGVjdCA9IHJlcXVpcmUoJy4vY29tcGFueS5qcy5taW4uanMnKTtcbnZhciBDcmVhdGVQcm9zcGVjdExpc3RGcm9tQ29tcGFueUxpc3RNb2RhbCA9IHJlcXVpcmUoJy4vY3JlYXRlX3Byb3NwZWN0X2xpc3RfZnJvbV9jb21wYW55X2xpc3QuanMubWluLmpzJylcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4geyAgY3VycmVudFBhZ2UgOiAxLFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IHRoaXMucHJvcHMuY2xhc3NOYW1lLCAgXG4gICAgICAgICAgICAgIGxpc3RDbGFzc05hbWU6IHRoaXMucHJvcHMubGlzdENsYXNzTmFtZSxcbiAgICAgICAgICAgICAgY3VzdG9tUm93OiB0aGlzLnByb3BzLnRhYmxlUm93LFxuICAgICAgICAgICAgICBwYWdlcyAgICAgICA6IDEsXG4gICAgICAgICAgICAgIGN1cnJlbnRMaXN0IDogJ0FsbCcsXG4gICAgICAgICAgICAgIGN1cnJlbnRMaXN0T2JqZWN0SWQgOiAnJyxcbiAgICAgICAgICAgICAgbG9hZGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgbGlzdHMgOiBbXSxcbiAgICAgICAgICAgICAgbWFzdGVyQ2hlY2tib3hDaGVja2VkOiBmYWxzZSxcbiAgICAgICAgICAgICAgcHJvc3BlY3RzUGVyUGFnZTogNTAsICAgICAgICAgLy9jbGFzc05hbWVzIHBlciBwYWdlXG4gICAgICAgICAgICAgIGtleWJvYXJkQWN0aXZlUHJvc3BlY3Q6IDAsICAgIC8vZmlyc3RcbiAgICAgICAgICAgICAgc2VsZWN0ZWRQcm9zcGVjdHM6IFtdLCAgICAgICAgLy9zZWxlY3RlZENsYXNzTmFtZVxuICAgICAgICAgICAgICBwcm9zcGVjdHMgICA6IFtdLCAgICAgICAgICAgICAvL2NsYXNzTmFtZVxuICAgICAgICAgICAgICB0b3RhbENvdW50ICA6IFwiflwiLCBcbiAgICAgICAgICAgICAgY291bnQgICAgICAgOiBcIn5cIiwgfVxuICB9LFxuXG4gIGNyZWF0ZUxpc3Q6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICBsaXN0cyA9IHRoaXMuc3RhdGUubGlzdHNcbiAgICBsaXN0cy5wdXNoKGRhdGEpXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGxpc3RzOiBsaXN0cyB9KVxuICB9LFxuXG4gIHJlbmFtZUxpc3Q6IGZ1bmN0aW9uKG5ld0xpc3ROYW1lKSB7XG4gICAgcGFyc2VIZWFkZXJzID0ge1xuICAgICAgJ1gtUGFyc2UtQXBwbGljYXRpb24tSWQnICA6ICdOODVRT2t0ZUVFUWt1WlZKS0F2dDhNVmVzMHNqRzZxTnBFR3FRRlZKJywgXG4gICAgICAnWC1QYXJzZS1SRVNULUFQSS1LZXknICAgIDogJ1ZONkV3VnlCWndPMXVwaHNCUHNhdTh0N0pRUnAwMFVNM0tZc2lpUWInLFxuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWQpXG4gICAgY29uc29sZS5sb2codGhpcy5zdGF0ZS5jdXJyZW50TGlzdClcbiAgICBjb25zb2xlLmxvZyhuZXdMaXN0TmFtZSlcblxuICAgIC8vIFVwZGF0ZSBMb2NhbCBTdGF0ZVxuICAgIHRoaXNzID0gdGhpcztcbiAgICB2YXIgZmlsdGVyZWQgPSBfLmZpbHRlcih0aGlzLnN0YXRlLmxpc3RzLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICBpZihpdGVtLm5hbWUgPT0gdGhpc3Muc3RhdGUuY3VycmVudExpc3Qpe1xuICAgICAgICBpdGVtLm5hbWUgPSBuZXdMaXN0TmFtZVxuICAgICAgICByZXR1cm4gaXRlbVxuICAgICAgfVxuICAgICAgcmV0dXJuIGl0ZW1cbiAgICB9KTtcblxuICAgIHRoaXMuc2V0U3RhdGUoe2xpc3RzIDogZmlsdGVyZWR9KVxuICAgIHRoaXMuc2V0U3RhdGUoe2N1cnJlbnRMaXN0OiBuZXdMaXN0TmFtZX0pXG5cbiAgICAkKCcubW9kYWwnKS5jbGljaygpXG4gICAgJCgnI25ld0xpc3ROYW1lJykudmFsKCcnKVxuICAgICQoJy5tb2RhbC1iYWNrZHJvcCcpLmNsaWNrKClcblxuICAgIC8vIFBlcnNpc3QgLyBBamF4XG4gICAgbGlzdENsYXNzTmFtZSA9IHRoaXMuc3RhdGUubGlzdENsYXNzTmFtZVxuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvJytsaXN0Q2xhc3NOYW1lKycvJyt0aGlzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWQsXG4gICAgICBoZWFkZXJzOiBwYXJzZUhlYWRlcnMsXG4gICAgICB0eXBlOidQVVQnLFxuICAgICAgZGF0YTpKU09OLnN0cmluZ2lmeSh7J25hbWUnOm5ld0xpc3ROYW1lfSksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIGRlbGV0ZUxpc3Q6IGZ1bmN0aW9uKCkge1xuICAgIC8vIFRPRE8gXG4gICAgLy8gR2V0IEFsbCBNZW1iZXJzIE9mIFRoaXMgTGlzdFxuICAgIC8vIFJlbW92ZSBGcm9tIExpc3QgQXJyYXlcbiAgICBwYXJzZUhlYWRlcnMgPSB7XG4gICAgICAnWC1QYXJzZS1BcHBsaWNhdGlvbi1JZCcgIDogJ044NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkonLCBcbiAgICAgICdYLVBhcnNlLVJFU1QtQVBJLUtleScgICAgOiAnVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYicsXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfVxuICAgIFxuICAgIHZhciBmaWx0ZXJlZCA9IF8uZmlsdGVyKHRoaXMuc3RhdGUubGlzdHMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgIGlmKGl0ZW0ub2JqZWN0SWQgPT0gdGhpc3Muc3RhdGUuY3VycmVudExpc3RPYmplY3RJZClcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0pO1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7bGlzdHM6IGZpbHRlcmVkfSlcbiAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50TGlzdDogJ0FsbCd9KVxuICAgIHRoaXMuY2hhbmdlTGlzdCgnQWxsJywgJycpXG5cbiAgICAvLyBSZW1vdmVcbiAgICAkKCcubW9kYWwnKS5jbGljaygpXG4gICAgJCgnI25ld0xpc3ROYW1lJykudmFsKCcnKVxuICAgICQoJy5tb2RhbC1iYWNrZHJvcCcpLmNsaWNrKClcblxuICAgIC8vIFBlcnNpc3QgLyBBamF4XG4gICAgbGlzdENsYXNzTmFtZSA9IHRoaXMuc3RhdGUubGlzdENsYXNzTmFtZVxuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK2xpc3RDbGFzc05hbWUrJy8nK3RoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZCxcbiAgICAgIGhlYWRlcnM6IHBhcnNlSGVhZGVycyxcbiAgICAgIHR5cGU6J0RFTEVURScsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIGNoYW5nZUxpc3Q6IGZ1bmN0aW9uKG5ld0xpc3ROYW1lLG9iamVjdElkKSB7XG4gICAgLy8gYWRkIG92ZXJsYXkgbG9hZGluZ1xuICAgIC8vY29uc29sZS5sb2cobmV3TGlzdE5hbWUpXG4gICAgLy9jb25zb2xlLmxvZyhvYmplY3RJZClcblxuICAgIGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cyA9IEpTT04uc3RyaW5naWZ5KFtdKVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudExpc3QgOiBuZXdMaXN0TmFtZX0pXG4gICAgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudExpc3RPYmplY3RJZCA6IG9iamVjdElkfSlcbiAgICB0aGlzLnNldFN0YXRlKHtwcm9zcGVjdHMgIDogW10gICAgfSlcbiAgICB0aGlzLnNldFN0YXRlKHtjb3VudCAgICAgIDogJ34nICAgfSlcbiAgICB0aGlzLnNldFN0YXRlKHtwYWdlcyAgICAgIDogMSAgICAgfSlcbiAgICB0aGlzLnNldFN0YXRlKHtsb2FkaW5nICAgIDogdHJ1ZSAgfSlcbiAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50UGFnZTogMX0pXG4gICAgdGhpcy5zZXRTdGF0ZSh7a2V5Ym9hcmRBY3RpdmVQcm9zcGVjdDogMH0pXG5cbiAgICBxcnkgPSAnd2hlcmU9e1wiY29tcGFueVwiOicrY29tcGFueSsnLFwiYXJjaGl2ZWRcIjp0cnVlfSZjb3VudD0xJm9yZGVyPS1jcmVhdGVkQXQnXG4gICAgY29uc29sZS5sb2cobmV3TGlzdE5hbWUpXG5cbiAgICBpZih0aGlzLnN0YXRlLmN1cnJlbnRMaXN0ICE9ICdBbGwnIHx8IHR5cGVvZihvYmplY3RJZCkgIT0gXCJ1bmRlZmluZWRcIiAmJiBuZXdMaXN0TmFtZSAhPSAnQXJjaGl2ZWQnKXtcbiAgICAgIGN1cnJlbnRMaXN0ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAnb2JqZWN0SWQnICA6IG9iamVjdElkLCBcbiAgICAgICAgJ19fdHlwZScgICAgOiAnUG9pbnRlcicsIFxuICAgICAgICAnY2xhc3NOYW1lJyA6IHRoaXMuc3RhdGUubGlzdENsYXNzTmFtZVxuICAgICAgfSlcblxuICAgICAgY29tcGFueSA9IEpTT04uc3RyaW5naWZ5KEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55KVxuICAgICAgcXJ5ID0gJ3doZXJlPXtcImNvbXBhbnlcIjonK2NvbXBhbnkrJ30mY291bnQ9MSdcbiAgICAgIHFyeSA9ICd3aGVyZT17XCJsaXN0c1wiOicrY3VycmVudExpc3QrJ30mY291bnQ9MSZvcmRlcj0tY3JlYXRlZEF0J1xuICAgIH0gZWxzZSBpZiAobmV3TGlzdE5hbWUgPT0gJ0FyY2hpdmVkJykge1xuICAgICAgcXJ5ID0gJ3doZXJlPXtcImNvbXBhbnlcIjonK2NvbXBhbnkrJyxcImFyY2hpdmVkXCI6ZmFsc2V9JmNvdW50PTEmb3JkZXI9LWNyZWF0ZWRBdCdcbiAgICB9XG4gICAgY29uc29sZS5sb2cocXJ5KVxuXG4gICAgY2xhc3NOYW1lID0gdGhpcy5zdGF0ZS5jbGFzc05hbWVcblxuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICdodHRwczovL2FwaS5wYXJzZS5jb20vMS9jbGFzc2VzLycrY2xhc3NOYW1lLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGhlYWRlcnM6IHBhcnNlX2hlYWRlcnMsXG4gICAgICBhc3luYzogdHJ1ZSxcbiAgICAgIGRhdGE6IHFyeSxcbiAgICAgIGFqYXhTdGFydDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzdGFydGVkIGxpc3QnKVxuICAgICAgfSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIHRoaXNzcy5zZXRTdGF0ZSh7cHJvc3BlY3RzOiByZXMucmVzdWx0c30pXG4gICAgICAgIHRoaXNzcy5zZXRTdGF0ZSh7Y291bnQ6IHJlcy5jb3VudH0pXG4gICAgICAgIC8vdGhpc3NzLnNldFN0YXRlKHt0b3RhbENvdW50OiByZXMuY291bnR9KVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe3BhZ2VzOiBNYXRoLmNlaWwocmVzLmNvdW50L3RoaXNzcy5wcm9wcy5wcm9zcGVjdHNQZXJQYWdlKX0pXG4gICAgICAgIHRoaXNzcy5zZXRTdGF0ZSh7bG9hZGluZzogZmFsc2V9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdlcnJvcicpXG4gICAgICAgIC8vY29uc29sZS5sb2cocmVzKVxuICAgICAgfVxuICAgIH0pXG4gIH0sXG5cbiAgY2hlY2tib3hBY3Rpb246IGZ1bmN0aW9uKGNoZWNrZWRTdGF0ZSwgb2JqSWQpIHtcbiAgICAvKiBTdG9yaW5nIENoZWNrZWQgUHJvc3BlY3RzIEluIExvY2FsU3RvcmFnZSBUbyBNYWtlIGl0IEVhc2llciBUb1xuICAgICAqIENvcHkgYW5kIE1vdmUgUHJvc3BlY3RzIFxuICAgICAqXG4gICAgICogTW92ZSBUbyBVc2VyX1Byb3NwZWN0cz9cbiAgICAgKi9cbiAgICBcbiAgICBzZWxlY3RlZFByb3NwZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzKVxuICAgIC8vY29uc29sZS5sb2coY2hlY2tlZFN0YXRlKVxuICAgIGlmKGNoZWNrZWRTdGF0ZSlcbiAgICAgIHNlbGVjdGVkUHJvc3BlY3RzLnB1c2gob2JqSWQpXG4gICAgZWxzZVxuICAgICAgc2VsZWN0ZWRQcm9zcGVjdHMgPSBfLnJlamVjdChzZWxlY3RlZFByb3NwZWN0cywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGlkKXtyZXR1cm4gaWQgPT0gb2JqSWR9KVxuXG4gICAgY29uc29sZS5sb2coc2VsZWN0ZWRQcm9zcGVjdHMpXG4gICAgbG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5zdHJpbmdpZnkoc2VsZWN0ZWRQcm9zcGVjdHMpXG4gICAgdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRQcm9zcGVjdHM6IHNlbGVjdGVkUHJvc3BlY3RzfSlcbiAgfSxcblxuICBtYXN0ZXJDaGVja2JveENoYW5nZWQ6IGZ1bmN0aW9uKG1hc3RlckNoZWNrYm94VmFsdWUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHttYXN0ZXJDaGVja2JveENoZWNrZWQ6IG1hc3RlckNoZWNrYm94VmFsdWV9KVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cblxuICAgIHRoaXMuc3RhcnRLZXlib2FyZFNob3J0Y3V0cygpXG4gICAgJCgnYm9keScpLmNzcyh7b3ZlcmZsb3c6J2F1dG8nfSlcblxuICAgIHByb3NwZWN0cyA9IFtdXG4gICAgZm9yKGk9MDtpPCB0aGlzLnN0YXRlLnByb3NwZWN0cy5sZW5ndGg7aSsrKSB7XG4gICAgICB1cmwgPSB0aGlzLnN0YXRlLnByb3NwZWN0c1tpXS51cmxcbiAgICAgIHByb3NwZWN0ID0gdGhpcy5zdGF0ZS5wcm9zcGVjdHNbaV1cblxuICAgICAgaWYodXJsICE9IFwibm8gbGlua2VkaW4gd2Vic2l0ZVwiICYmIHR5cGVvZih1cmwpICE9IFwidW5kZWZpbmVkXCIgJiYgdXJsICE9IFwiXCIpe1xuICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSgnaHR0cDovLycsJycpXG4gICAgICAgIHRoZV9saW5rID0gUmVhY3QuRE9NLmEoe2hyZWY6ICdodHRwOi8vJyt1cmx9LCBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWdsb2JlXCJ9KSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoZV9saW5rID0gXCJcIlxuICAgICAgfVxuXG4gICAgICBwcm9maWxlID0gdGhpcy5zdGF0ZS5wcm9zcGVjdHNbaV0ucHJvZmlsZVxuICAgICAgcHJvZmlsZSA9IChwcm9maWxlKSA/IHByb2ZpbGUgOiBcIlwiXG5cbiAgICAgIHByb2ZpbGUgPSBwcm9maWxlLnJlcGxhY2UoJ2h0dHA6Ly8nLCcnKVxuICAgICAgcHJvZmlsZSA9IHByb2ZpbGUucmVwbGFjZSgnaHR0cHM6Ly8nLCcnKVxuICAgICAgcHJvZmlsZSA9ICh0eXBlb2YocHJvZmlsZSkgIT0gXCJ1bmRlZmluZWRcIikgPyBwcm9maWxlIDogXCJcIlxuICAgICAgbGkgPSBSZWFjdC5ET00uYSh7aHJlZjogcHJvZmlsZSwgY2xhc3NOYW1lOiBcImxpbmtlZGluX2xpbmtcIn0sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbGlua2VkaW4tc3F1YXJlXCJ9KSlcblxuICAgICAga2V5Ym9hcmRTZWxlY3RlZCA9IChpID09IHRoaXMuc3RhdGUua2V5Ym9hcmRBY3RpdmVQcm9zcGVjdClcblxuICAgICAgc2VsZWN0ZWRQcm9zcGVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cylcbiAgICAgIGFscmVhZHlDaGVja2VkPWZhbHNlXG4gICAgICBmb3IoaWk9MDtpaTwgc2VsZWN0ZWRQcm9zcGVjdHMubGVuZ3RoO2lpKyspXG4gICAgICAgIGlmKHByb3NwZWN0Lm9iamVjdElkID09IHNlbGVjdGVkUHJvc3BlY3RzW2lpXSlcbiAgICAgICAgICBhbHJlYWR5Q2hlY2tlZCA9IHRydWVcblxuICAgICAgcHJvc3BlY3RzLnB1c2goXG4gICAgICAgIERhdGFSb3coe2RlbGV0ZVByb3NwZWN0OiB0aGlzLmRlbGV0ZVByb3NwZWN0LCBcbiAgICAgICAgICAgICAgICAgcHJvc3BlY3Q6IHRoaXMuc3RhdGUucHJvc3BlY3RzW2ldLCBcbiAgICAgICAgICAgICAgICAgbWFzdGVyQ2hlY2tib3hDaGVja2VkOiB0aGlzLnN0YXRlLm1hc3RlckNoZWNrYm94Q2hlY2tlZCwgXG4gICAgICAgICAgICAgICAgIGtleTogdGhpcy5nZW5lcmF0ZV9pZCgpLCBcbiAgICAgICAgICAgICAgICAgbGluazogdGhlX2xpbmssIFxuICAgICAgICAgICAgICAgICBrZXlib2FyZFNlbGVjdGVkOiBrZXlib2FyZFNlbGVjdGVkLCBcbiAgICAgICAgICAgICAgICAgY2hlY2tib3hBY3Rpb246IHRoaXMuY2hlY2tib3hBY3Rpb24sIFxuICAgICAgICAgICAgICAgICBhbHJlYWR5Q2hlY2tlZDogYWxyZWFkeUNoZWNrZWQsIFxuICAgICAgICAgICAgICAgICBsaTogbGl9KSlcbiAgICB9XG5cbiAgICBsaXN0VHlwZSA9ICh0aGlzLnN0YXRlLmN1cnJlbnRMaXN0ID09IFwiQWxsXCIpID8ge2Rpc3BsYXk6J25vbmUnfSA6IHtmbG9hdDonbGVmdCd9XG4gICAgbGlzdE5hbWVTdHlsZSA9ICh0aGlzLnN0YXRlLmN1cnJlbnRMaXN0ID09IFwiQWxsXCIpID8ge2Rpc3BsYXk6J25vbmUnfSA6IHtmbG9hdDonbGVmdCcsZGlzcGxheTonaW5saW5lLWJsb2NrJywgZm9udFdlaWdodDogMjAwLCBtYXJnaW5Ub3A6IDEsIHBhZGRpbmdSaWdodDogMTAsIG1hcmdpbkxlZnQ6IC0xMH1cbiAgICBsaXN0QnRuID0gKHRoaXMuc3RhdGUuY3VycmVudExpc3QgPT0gXCJBbGxcIikgPyB7ZGlzcGxheTonbm9uZSd9IDoge2Zsb2F0OidsZWZ0JyxtYXJnaW5MZWZ0OjV9XG4gICAgbGlzdE9wdGlvbnMgPSAodGhpcy5zdGF0ZS5jdXJyZW50TGlzdCA9PSBcIkFsbFwiKSA/IHtkaXNwbGF5Oidub25lJ30gOiB7ZmxvYXQ6J3JpZ2h0J31cbiAgICBjb3B5RHJvcGRvd25TdHlsZSA9ICh0aGlzLnN0YXRlLmN1cnJlbnRMaXN0ID09IFwiQWxsXCIpID8ge3dpZHRoOjExNCwgcmlnaHQ6NH0gOiB7d2lkdGg6MTE0LCByaWdodDozNn1cbiAgICBjdXJyZW50TGlzdCA9IHRoaXMuc3RhdGUuY3VycmVudExpc3RcbiAgICByZXR1cm4gKFxuICAgICAgICBSZWFjdC5ET00uZGl2KG51bGwsIFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNvbnRhaW5lclwiLCBzdHlsZToge3dpZHRoOicxMDAlJyxwYWRkaW5nOicwJywgYmFja2dyb3VuZDogJ2xpbmVhci1ncmFkaWVudCgjZGFlOGZmLCNkYWU4ZmYpJywgYmFja2dyb3VuZEltYWdlOiAncmFkaWFsLWdyYWRpZW50KGNpcmNsZSBhdCBjZW50ZXIgY2VudGVyLCNmZmYsI2RmZjFmZCA5MDBweCknfX0sIFxuICAgICAgICBTaWRlTWVudVByb3NwZWN0cyh7Y3VycmVudExpc3Q6IHRoaXMuc3RhdGUuY3VycmVudExpc3QsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IHRoaXMuc3RhdGUuY291bnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxDb3VudDogdGhpcy5zdGF0ZS50b3RhbENvdW50LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZUxpc3Q6IHRoaXMuY2hhbmdlTGlzdCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0Q2xhc3NOYW1lOiB0aGlzLnN0YXRlLmxpc3RDbGFzc05hbWUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlTGlzdDogdGhpcy5jcmVhdGVMaXN0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RzOiB0aGlzLnN0YXRlLmxpc3RzfSksIFxuXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbWQtMTBcIiwgc3R5bGU6IHtwYWRkaW5nOicwJ319LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7aWQ6IFwicHJvc3BlY3REZXRhaWxCdXR0b25zXCJ9LCBcbiAgICAgICAgICAgICAgICBMaXN0RGV0YWlsQnV0dG9ucyh7XG4gICAgICAgICAgICAgICAgICByZW5hbWVMaXN0OiB0aGlzLnJlbmFtZUxpc3QsIFxuICAgICAgICAgICAgICAgICAgZGVsZXRlTGlzdDogdGhpcy5kZWxldGVMaXN0LCBcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRMaXN0TmFtZTogdGhpcy5zdGF0ZS5jdXJyZW50TGlzdCwgXG4gICAgICAgICAgICAgICAgICBjdXJyZW50TGlzdDogdGhpcy5zdGF0ZS5jdXJyZW50TGlzdE9iamVjdElkfSksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRyb3Bkb3duXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4teHMgbGlzdC1vcHRpb25zXCIsIFxuICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiXCIsIFxuICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5Oidub25lJ31cbiAgICAgICAgICAgICAgICAgICAgIH0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWJhcnNcIn0pXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSwgXG5cbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiZHJvcGRvd25cIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoeydkYXRhLXRvZ2dsZSc6IFwiZHJvcGRvd25cIiwgXG4gICAgICAgICAgICAgICAgICAgICBpZDogXCJjb3B5VG9MaXN0XCIsIFxuICAgICAgICAgICAgICAgICAgICAgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJkcm9wLXRhcmdldCBidG4gYnRuLXByaW1hcnkgYnRuLXhzIGxpc3Qtb3B0aW9uc1wifSwgXG4gICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNvcHlcIn0pLCBcbiAgICAgICAgICAgICAgICAgICAgICAgXCLCoCBDb3B5IFRvIExpc3QgwqBcIiwgIFxuICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jYXJldC1kb3duXCJ9KVxuICAgICAgICAgICAgICAgICksIFxuICAgICAgICAgICAgICAgIEN1cnJlbnRMaXN0c1R3byh7bGlzdHM6IHRoaXMuc3RhdGUubGlzdHMsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weURyb3Bkb3duU3R5bGU6IGNvcHlEcm9wZG93blN0eWxlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RBY3Rpb246IHRoaXMuY29weVNlbGVjdGVkUHJvc3BlY3RzfSlcbiAgICAgICAgICAgICAgICApLCBcbiAgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImRyb3Bkb3duXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHsnZGF0YS10b2dnbGUnOiBcImRyb3Bkb3duXCIsIFxuICAgICAgICAgICAgICAgICAgICAgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgIGlkOiBcIm1vdmVUb0xpc3RcIiwgXG4gICAgICAgICAgICAgICAgICAgICBzdHlsZTogbGlzdE9wdGlvbnMsIFxuICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tcHJpbWFyeSBidG4teHMgbGlzdC1vcHRpb25zXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtc2hhcmVcIn0pLCBcbiAgICAgICAgICAgICAgICAgICAgIFwiwqAgTW92ZSBUbyBMaXN0IMKgXCIsICBcbiAgICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY2FyZXQtZG93blwifSlcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBDdXJyZW50TGlzdHMoe2xpc3RzOiB0aGlzLnN0YXRlLmxpc3RzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RBY3Rpb246IHRoaXMubW92ZVNlbGVjdGVkUHJvc3BlY3RzfSlcbiAgICAgICAgICAgICAgICApLCBcblxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtvbkNsaWNrOiB0aGlzLmRvd25sb2FkRmlsZSwgXG4gICAgICAgICAgICAgICAgICAgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICBpZDogXCJkb3dubG9hZFByb3NwZWN0c1wiLCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZHJvcC10YXJnZXQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBsaXN0LW9wdGlvbnNcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1kb3dubG9hZFwifSksIFwiIMKgIERvd25sb2FkIENTViDCoFwiIFxuICAgICAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe29uQ2xpY2s6IHRoaXMubGF1bmNoUHJvc3BlY3RMaXN0RnJvbUNvbXBhbnlMaXN0TW9kYWwsIFxuICAgICAgICAgICAgICAgICAgIHN0eWxlOiBsaXN0T3B0aW9ucywgXG4gICAgICAgICAgICAgICAgICAgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICBpZDogXCJkb3dubG9hZFByb3NwZWN0c1wiLCBcbiAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiZHJvcC10YXJnZXQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBsaXN0LW9wdGlvbnNcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jbG91ZC1kb3dubG9hZFwifSksIFwiIMKgIEZpbmQgUHJvc3BlY3RzICDCoFwiIFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7aWQ6IFwiYXV0b3Njcm9sbFwiLCBzdHlsZToge2hlaWdodDonNDAwcHgnLG92ZXJmbG93OidhdXRvJ319LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS50YWJsZSh7Y2xhc3NOYW1lOiBcInByb3NwZWN0cy10YWJsZSB0YWJsZSB0YWJsZS1zdHJpcGVkXCIsIHN0eWxlOiB7bWFyZ2luQm90dG9tOicwcHgnfX0sIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGhlYWQoe3N0eWxlOiB7YmFja2dyb3VuZENvbG9yOid3aGl0ZSd9fSwgXG4gICAgICAgICAgICAgICAgQ29tcGFueVByb3NwZWN0SGVhZGVyKHttYXN0ZXJDaGVja2JveENoYW5nZWQ6IHRoaXMubWFzdGVyQ2hlY2tib3hDaGFuZ2VkfSlcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50Ym9keShudWxsLCBcbiAgICAgICAgICAgICAgICBwcm9zcGVjdHNcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAodGhpcy5zdGF0ZS5sb2FkaW5nKSA/IExvYWRpbmdTcGlubmVyKG51bGwpIDogXCJcIlxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKSwgXG5cbiAgICAgIFBhbmVsRm9vdGluZyh7Y3VycmVudFBhZ2U6IHRoaXMuc3RhdGUuY3VycmVudFBhZ2UsIFxuICAgICAgICAgICAgICAgICAgICBjb3VudDogdGhpcy5zdGF0ZS5jb3VudCwgXG4gICAgICAgICAgICAgICAgICAgIHBhZ2luYXRlOiB0aGlzLnBhZ2luYXRlLCBcbiAgICAgICAgICAgICAgICAgICAgcHJvc3BlY3RzUGVyUGFnZTogdGhpcy5zdGF0ZS5wcm9zcGVjdHNQZXJQYWdlLCBcbiAgICAgICAgICAgICAgICAgICAgcGFnZXM6IHRoaXMuc3RhdGUucGFnZXN9KSwgXG4gICAgICBNZXNzZW5nZXIobnVsbCksIFxuICAgICAgQ3JlYXRlUHJvc3BlY3RMaXN0RnJvbUNvbXBhbnlMaXN0TW9kYWwoe2N1cnJlbnRMaXN0OiB0aGlzLnN0YXRlLmN1cnJlbnRMaXN0LCBjdXJyZW50TGlzdE9iamVjdElkOiB0aGlzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWR9KVxuICAgIClcbiAgICApO1xuICB9LFxuXG4gIHBhZ2luYXRlOiBmdW5jdGlvbihuZXdQcm9zcGVjdHMsIG5ld1BhZ2UpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHByb3NwZWN0czogbmV3UHJvc3BlY3RzLFxuICAgICAgY3VycmVudFBhZ2U6IG5ld1BhZ2UsXG4gICAgICBrZXlib2FyZEFjdGl2ZVByb3NwZWN0OiAwXG4gICAgfSlcbiAgICB0aGlzLnN0YXJ0S2V5Ym9hcmRTaG9ydGN1dHMoKVxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvc2Nyb2xsJykuc2Nyb2xsVG9wID0gMFxuICB9LFxuXG4gIGxhdW5jaFByb3NwZWN0TGlzdEZyb21Db21wYW55TGlzdE1vZGFsOiBmdW5jdGlvbigpIHtcbiAgICBcbiAgICAkKCcjY3JlYXRlUHJvc3BlY3RMaXN0RnJvbUNvbXBhbnlMaXN0TW9kYWwnKS5tb2RhbCgpXG4gIH0sXG5cbiAgZG93bmxvYWRGaWxlOiBmdW5jdGlvbigpIHtcbiAgICBwYXJzZV9oZWFkZXJzID0ge1xuICAgICAgJ1gtUGFyc2UtQXBwbGljYXRpb24tSWQnICA6ICdOODVRT2t0ZUVFUWt1WlZKS0F2dDhNVmVzMHNqRzZxTnBFR3FRRlZKJywgXG4gICAgICAnWC1QYXJzZS1SRVNULUFQSS1LZXknICAgIDogJ1ZONkV3VnlCWndPMXVwaHNCUHNhdTh0N0pRUnAwMFVNM0tZc2lpUWInLFxuICAgIH1cblxuICAgIC8vIEdldCBMaXN0IENvdW50XG4gICAgbGlzdCA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICdfX3R5cGUnICAgOiAgJ1BvaW50ZXInLFxuICAgICAgJ2NsYXNzTmFtZSc6ICB0aGlzLnN0YXRlLmxpc3RDbGFzc05hbWUsXG4gICAgICAnb2JqZWN0SWQnIDogIHRoaXMuc3RhdGUuY3VycmVudExpc3RPYmplY3RJZFxuICAgIH0pXG4gICAgY29uc29sZS5sb2cobGlzdClcbiAgICAvLyBBZGQgU3VwcG9ydCBGb3IgTW9yZSB0aGFuIDEwMDBcbiAgICAvLyBudW1fb2ZfcmVxdWVzdHNcbiAgICAvL3RoaXMucHJvcHMucGFnaW5hdGUocmVzLnJlc3VsdHMsIHRoaXMucHJvcHMuY3VycmVudFBhZ2UgKyAxKVxuICAgIGxvY2FsU3RvcmFnZS5kb3dubG9hZF90b3RhbCA9IE1hdGguY2VpbCh0aGlzLnN0YXRlLmNvdW50LzEwMDApXG4gICAgbG9jYWxTdG9yYWdlLmRvd25sb2FkcyAgICAgID0gMFxuXG4gICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50TGlzdCA9PSBcIkFsbFwiKVxuICAgICAgcXJ5ID0gJ3doZXJlPXtcImNvbXBhbnlcIjonK2NvbXBhbnkrJ30mY291bnQ9MSdcbiAgICBlbHNlXG4gICAgICBxcnkgPSAnd2hlcmU9e1wibGlzdHNcIjonK2xpc3QrJ30mY291bnQ9MSdcblxuICAgIGNsYXNzTmFtZSA9IHRoaXMuc3RhdGUuY2xhc3NOYW1lXG5cbiAgICBmb3IoaT0wO2k8IE1hdGguY2VpbCh0aGlzLnN0YXRlLmNvdW50LzEwMDApOyBpKyspe1xuICAgICAgJC5hamF4KHtcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK2NsYXNzTmFtZSsnP2xpbWl0PTEwMDAmc2tpcD0nK2ksXG4gICAgICAgIHR5cGU6J0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHBhcnNlX2hlYWRlcnMsXG4gICAgICAgIGRvd25sb2FkRmlsZTogJ2Rvd25sb2FkXycraSxcbiAgICAgICAgZGF0YTogcXJ5LFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICAgIC8vIENsZWFuIFJlc3VsdHNcbiAgICAgICAgICAvLyBSZW1vdmUgQ2VydGFpbiBQYXJzZSBDb2x1bW5zIC0gY3JlYXRlZF9hdCwgdXBkYXRlZF9hdCwgb2JqZWN0SWRcbiAgICAgICAgICAvLyBSZW5hbWUgY3JlYXRlZEF0IGFzIGRhdGUgcHJvc3BlY3RlZFxuICAgICAgICAgIGZvcihpPTA7aTwgcmVzLnJlc3VsdHMubGVuZ3RoO2krKykge1xuICAgICAgICAgICAgZGVsZXRlIHJlcy5yZXN1bHRzW2ldLmNvbXBhbnlcbiAgICAgICAgICAgIGRlbGV0ZSByZXMucmVzdWx0c1tpXS5wb3NcbiAgICAgICAgICAgIGRlbGV0ZSByZXMucmVzdWx0c1tpXS51c2VyXG4gICAgICAgICAgICBkZWxldGUgcmVzLnJlc3VsdHNbaV0ub2JqZWN0SWRcbiAgICAgICAgICAgIGRlbGV0ZSByZXMucmVzdWx0c1tpXS5jcmVhdGVkQXRcbiAgICAgICAgICAgIGRlbGV0ZSByZXMucmVzdWx0c1tpXS51cGRhdGVkQXRcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBBZGQgUmVzdWx0cyBUbyBMb2NhbFN0b3JhZ2VcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UuZG93bmxvYWRzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZG93bmxvYWRzKSArIDEgXG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5kb3dubG9hZEZpbGUsIEpTT04uc3RyaW5naWZ5KHJlcy5yZXN1bHRzKSlcblxuICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiBhbGwgYWpheCByZXFzIGluIGZvciBsb29wIGFyZSBjb21wbGV0ZVxuICAgICAgICAgIGlmKGxvY2FsU3RvcmFnZS5kb3dubG9hZHMgPT0gbG9jYWxTdG9yYWdlLmRvd25sb2FkX3RvdGFsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbWF0Y2hlZCcpXG4gICAgICAgICAgICAvLyBNZXJnZSBhbGwgbG9jYWxTdG9yYWdlIHJlc3VsdHNcbiAgICAgICAgICAgIHByb3NwZWN0cyA9IFtdXG4gICAgICAgICAgICBmb3IoaWk9MDtpaSA8IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmRvd25sb2FkX3RvdGFsKTsgaWkrKyl7XG4gICAgICAgICAgICAgIHByb3NwZWN0cyA9IHByb3NwZWN0cy5jb25jYXQoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZG93bmxvYWRfJytpaSkpKVxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9zcGVjdHMpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb3NwZWN0cylcbiAgICAgICAgICAgIC8vIE91dHB1dCBhcyBDU1ZcbiAgICAgICAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW1BhcGEudW5wYXJzZShwcm9zcGVjdHMpXSwge3R5cGU6IFwidGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04XCJ9KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGJsb2IpXG4gICAgICAgICAgICBzYXZlQXMoYmxvYiwgXCJwcm9zcGVjdHMuY3N2XCIpO1xuICAgICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIGVycm9yOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgY29tcGFueSA9IEpTT04uc3RyaW5naWZ5KEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55KVxuICAgIFxuXG4gIH0sXG5cbiAgcmVtb3ZlU2VsZWN0ZWRQcm9zcGVjdHM6IGZ1bmN0aW9uKCkge1xuICAgIC8vIElmIExpc3QgVHlwZSBpcyBBbGwgQXJjaGl2ZSB0aGUgcHJvc3BlY3RcbiAgICBwYXJzZUhlYWRlcnMgPSB7XG4gICAgICAnWC1QYXJzZS1BcHBsaWNhdGlvbi1JZCcgIDogJ044NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkonLCBcbiAgICAgICdYLVBhcnNlLVJFU1QtQVBJLUtleScgICAgOiAnVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYicsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiIDogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9XG5cbiAgICBzZWxlY3RlZFByb3NwZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzKVxuICAgIGJhdGNoRGF0YSA9IFtdXG5cbiAgICBmb3IoaT0wO2k8IHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aDtpKyspe1xuICAgICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50TGlzdCAhPSAnQWxsJyl7XG4gICAgICAgIHRtcCA9IHtcbiAgICAgICAgICBtZXRob2Q6J1BVVCcsXG4gICAgICAgICAgcGF0aDonLzEvY2xhc3Nlcy8nK3RoaXMuc3RhdGUuY2xhc3NOYW1lKycvJytzZWxlY3RlZFByb3NwZWN0c1tpXSxcbiAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICBsaXN0czoge1xuICAgICAgICAgICAgICAnX19vcCcgICAgOiAnUmVtb3ZlJyxcbiAgICAgICAgICAgICAgXCJvYmplY3RzXCIgOiBbeyBcbiAgICAgICAgICAgICAgICAgICdfX3R5cGUnOidQb2ludGVyJyxcbiAgICAgICAgICAgICAgICAgICdjbGFzc05hbWUnOnRoaXMuc3RhdGUubGlzdENsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAgICdvYmplY3RJZCc6dGhpcy5zdGF0ZS5jdXJyZW50TGlzdE9iamVjdElkXG4gICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9ZWxzZXtcbiAgICAgICAgdG1wID0ge1xuICAgICAgICAgIG1ldGhvZDonUFVUJyxcbiAgICAgICAgICBwYXRoOicvMS9jbGFzc2VzLycrdGhpcy5zdGF0ZS5jbGFzc05hbWUrJy8nK3NlbGVjdGVkUHJvc3BlY3RzW2ldLFxuICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgIGFyY2hpdmVkOmZhbHNlLFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYmF0Y2hEYXRhLnB1c2godG1wKVxuICAgIH1cblxuICAgIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9iYXRjaCcsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGhlYWRlcnM6cGFyc2VIZWFkZXJzLFxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe3JlcXVlc3RzOiBiYXRjaERhdGF9KSxcbiAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgbGlzdHMgPSB0aGlzcy5zdGF0ZS5saXN0c1xuXG4gICAgICAgIGZvcihpPTA7aTwgbGlzdHMubGVuZ3RoOyBpKyspIHsgXG4gICAgICAgICAgLy8gU3VidHJhY3QgRnJvbSBPbGQgTGlzdCAtIE5vdCBXb3JraW5nIEZvciBBcmNoaXZlXG4gICAgICAgICAgaWYobGlzdHNbaV0ub2JqZWN0SWQgPT0gdGhpc3Muc3RhdGUuY3VycmVudExpc3RPYmplY3RJZClcbiAgICAgICAgICAgIGxpc3RzW2ldLmNvdW50ID0gcGFyc2VJbnQobGlzdHNbaV0uY291bnQpIC0gcGFyc2VJbnQoc2VsZWN0ZWRQcm9zcGVjdHMubGVuZ3RoKVxuICAgICAgICB9XG4gICAgICAgIC8vIFVwZGF0ZSBsb2NhbCBsaXN0IGNvdW50XG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtsaXN0czogbGlzdHN9KVxuXG4gICAgICAgIC8vIHJlbW92ZSBmcm9tIGN1cnJlbnQgbGlzdCB1aVxuICAgICAgICBzZWxlY3RlZFByb3NwZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzKVxuICAgICAgICBjb25zb2xlLmxvZygncmVtb3ZlIHNlbGVjdGVkIHByb3NwZWN0cycpXG4gICAgICAgIGNvbnNvbGUubG9nKHNlbGVjdGVkUHJvc3BlY3RzKVxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzcy5zdGF0ZS5wcm9zcGVjdHMpXG4gICAgICAgIHZhciBmaWx0ZXJlZCA9IF8uZmlsdGVyKHRoaXNzLnN0YXRlLnByb3NwZWN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgIGZvcihpPTA7aTwgc2VsZWN0ZWRQcm9zcGVjdHMubGVuZ3RoO2krKykgXG4gICAgICAgICAgICBpZihpdGVtLm9iamVjdElkID09IHNlbGVjdGVkUHJvc3BlY3RzW2ldKVxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coZmlsdGVyZWQpXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtwcm9zcGVjdHM6IGZpbHRlcmVkfSlcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5zdHJpbmdpZnkoW10pXG5cbiAgICAgICAgLy8gYWRkIGFsZXJ0IHRvIGluZm9ybSB1c2VyXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgbW92ZVNlbGVjdGVkUHJvc3BlY3RzOiBmdW5jdGlvbihsaXN0T2JqZWN0SWQpIHtcbiAgICBwYXJzZUhlYWRlcnMgPSB7XG4gICAgICAnWC1QYXJzZS1BcHBsaWNhdGlvbi1JZCcgIDogJ044NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkonLCBcbiAgICAgICdYLVBhcnNlLVJFU1QtQVBJLUtleScgICAgOiAnVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYicsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiIDogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9XG5cbiAgICAvLyBnZXQgdGhlIHNlbGVjdGVkIG9iamVjdElkIGZyb20gc2VsZWN0ZWRQcm9zcGVjdHMgc3RhdGVcbiAgICBzZWxlY3RlZFByb3NwZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzKVxuICAgIGJhdGNoRGF0YSA9IFtdXG5cblxuICAgIC8vIEJhdGNoIFVwZGF0ZSBQYXJzZVxuICAgIC8vIC0gUmVtb3ZlIEFsbCBTZWxlY3RlZCBQcm9zcGVjdHMgRnJvbSBDdXJyZW50IExpc3RcbiAgICBmb3IoaT0wO2k8IHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aDtpKyspe1xuICAgICAgdG1wID0ge1xuICAgICAgICBtZXRob2Q6J1BVVCcsXG4gICAgICAgIHBhdGg6Jy8xL2NsYXNzZXMvJyt0aGlzLnN0YXRlLmNsYXNzTmFtZSsnLycrc2VsZWN0ZWRQcm9zcGVjdHNbaV0sXG4gICAgICAgIGJvZHk6IHtcbiAgICAgICAgICBsaXN0czoge1xuICAgICAgICAgICAgJ19fb3AnICAgIDogJ1JlbW92ZScsXG4gICAgICAgICAgICBcIm9iamVjdHNcIiA6IFt7IFxuICAgICAgICAgICAgICAgICdfX3R5cGUnOidQb2ludGVyJyxcbiAgICAgICAgICAgICAgICAnY2xhc3NOYW1lJzp0aGlzLnN0YXRlLmxpc3RDbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgJ29iamVjdElkJzp0aGlzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWRcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBiYXRjaERhdGEucHVzaCh0bXApXG4gICAgfVxuICAgIFxuICAgIC8vIC0gQWRkIE90aGVyIExpc3QgXG4gICAgZm9yKGk9MDtpPCBzZWxlY3RlZFByb3NwZWN0cy5sZW5ndGg7aSsrKXtcbiAgICAgIHRtcCA9IHtcbiAgICAgICAgbWV0aG9kOidQVVQnLFxuICAgICAgICBwYXRoOicvMS9jbGFzc2VzLycrdGhpcy5zdGF0ZS5jbGFzc05hbWUrJy8nK3NlbGVjdGVkUHJvc3BlY3RzW2ldLFxuICAgICAgICBib2R5OiB7XG4gICAgICAgICAgbGlzdHM6IHtcbiAgICAgICAgICAgICdfX29wJyAgICA6ICdBZGRVbmlxdWUnLFxuICAgICAgICAgICAgXCJvYmplY3RzXCIgOiBbeyBcbiAgICAgICAgICAgICAgICAnX190eXBlJzonUG9pbnRlcicsXG4gICAgICAgICAgICAgICAgJ2NsYXNzTmFtZSc6dGhpcy5zdGF0ZS5saXN0Q2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICdvYmplY3RJZCc6bGlzdE9iamVjdElkXG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYmF0Y2hEYXRhLnB1c2godG1wKVxuICAgIH1cblxuICAgIHRoaXNzID0gdGhpcztcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOidodHRwczovL2FwaS5wYXJzZS5jb20vMS9iYXRjaCcsXG4gICAgICB0eXBlOidQT1NUJyxcbiAgICAgIGhlYWRlcnM6cGFyc2VIZWFkZXJzLFxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe3JlcXVlc3RzOiBiYXRjaERhdGF9KSxcbiAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgbGlzdHMgPSB0aGlzcy5zdGF0ZS5saXN0c1xuXG4gICAgICAgIGZvcihpPTA7aTwgbGlzdHMubGVuZ3RoOyBpKyspIHsgXG4gICAgICAgICAgLy8gQWRkIFRvIE5ldyBMaXN0XG4gICAgICAgICAgaWYobGlzdHNbaV0ub2JqZWN0SWQgPT0gbGlzdE9iamVjdElkKVxuICAgICAgICAgICAgbGlzdHNbaV0uY291bnQgPSBwYXJzZUludChsaXN0c1tpXS5jb3VudCkgKyBwYXJzZUludChzZWxlY3RlZFByb3NwZWN0cy5sZW5ndGgpXG4gICAgICAgICAgLy8gU3VidHJhY3QgRnJvbSBPbGQgTGlzdFxuICAgICAgICAgIGlmKGxpc3RzW2ldLm9iamVjdElkID09IHRoaXNzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWQpXG4gICAgICAgICAgICBsaXN0c1tpXS5jb3VudCA9IHBhcnNlSW50KGxpc3RzW2ldLmNvdW50KSAtIHBhcnNlSW50KHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aClcbiAgICAgICAgfVxuICAgICAgICAvLyBVcGRhdGUgbG9jYWwgbGlzdCBjb3VudFxuICAgICAgICB0aGlzcy5zZXRTdGF0ZSh7bGlzdHM6IGxpc3RzfSlcblxuICAgICAgICAvLyByZW1vdmUgZnJvbSBjdXJyZW50IGxpc3QgdWlcbiAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGVkUHJvc3BlY3RzJylcbiAgICAgICAgY29uc29sZS5sb2codGhpc3Muc3RhdGUucHJvc3BlY3RzKVxuICAgICAgICB2YXIgZmlsdGVyZWQgPSBfLmZpbHRlcih0aGlzcy5zdGF0ZS5wcm9zcGVjdHMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICBpc19zZWxlY3RlZCA9IHRydWVcbiAgICAgICAgICBmb3IoaT0wO2k8IHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aDtpKyspIFxuICAgICAgICAgICAgaWYoaXRlbS5vYmplY3RJZCA9PSBzZWxlY3RlZFByb3NwZWN0c1tpXSlcbiAgICAgICAgICAgICAgaXNfc2VsZWN0ZWQgPSBmYWxzZVxuICAgICAgICAgIHJldHVybiBpc19zZWxlY3RlZFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coZmlsdGVyZWQpXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtwcm9zcGVjdHM6IGZpbHRlcmVkfSlcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5zdHJpbmdpZnkoW10pXG5cbiAgICAgICAgLy8gYWRkIGFsZXJ0IHRvIGluZm9ybSB1c2VyXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgY29weVNlbGVjdGVkUHJvc3BlY3RzOiBmdW5jdGlvbihsaXN0T2JqZWN0SWQpIHtcbiAgICBjb25zb2xlLmxvZyhsaXN0T2JqZWN0SWQpXG4gICAgXG4gICAgLy8gbWFrZSBiYXRjaCBhamF4IHJlcXVlc3QgdG8gcGFyc2VcbiAgICBwYXJzZUhlYWRlcnMgPSB7XG4gICAgICAnWC1QYXJzZS1BcHBsaWNhdGlvbi1JZCcgIDogJ044NVFPa3RlRUVRa3VaVkpLQXZ0OE1WZXMwc2pHNnFOcEVHcVFGVkonLCBcbiAgICAgICdYLVBhcnNlLVJFU1QtQVBJLUtleScgICAgOiAnVk42RXdWeUJad08xdXBoc0JQc2F1OHQ3SlFScDAwVU0zS1lzaWlRYicsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiIDogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9XG5cbiAgICAvLyBBZGQgTG9hZGluZyBTaWduIFRvIExpc3RcblxuICAgIHNlbGVjdGVkUHJvc3BlY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMpXG4gICAgYmF0Y2hEYXRhID0gW11cbiAgICBmb3IoaT0wO2k8IHNlbGVjdGVkUHJvc3BlY3RzLmxlbmd0aDtpKyspe1xuICAgICAgdG1wID0ge1xuICAgICAgICBtZXRob2Q6J1BVVCcsXG4gICAgICAgIHBhdGg6Jy8xL2NsYXNzZXMvJyt0aGlzLnN0YXRlLmNsYXNzTmFtZSsnLycrc2VsZWN0ZWRQcm9zcGVjdHNbaV0sXG4gICAgICAgIGJvZHk6IHtcbiAgICAgICAgICBsaXN0czoge1xuICAgICAgICAgICAgJ19fb3AnICAgIDogJ0FkZFVuaXF1ZScsXG4gICAgICAgICAgICBcIm9iamVjdHNcIiA6IFt7IFxuICAgICAgICAgICAgICAgICdfX3R5cGUnOidQb2ludGVyJyxcbiAgICAgICAgICAgICAgICAnY2xhc3NOYW1lJzp0aGlzLnN0YXRlLmxpc3RDbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgJ29iamVjdElkJzpsaXN0T2JqZWN0SWRcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBiYXRjaERhdGEucHVzaCh0bXApXG4gICAgfVxuXG4gICAgdGhpc3MgPSB0aGlzO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2JhdGNoJyxcbiAgICAgIHR5cGU6J1BPU1QnLFxuICAgICAgaGVhZGVyczpwYXJzZUhlYWRlcnMsXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7cmVxdWVzdHM6IGJhdGNoRGF0YX0pLFxuICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICAvLyBVcGRhdGUgV2l0aCB0aGUgbnVtYmVyIG9mIHN1Y2Nlc3Nlc1xuICAgICAgICAvLyBVcGRhdGUgbG9jYWwgbGlzdCBjb3VudFxuICAgICAgICBsaXN0cyA9IHRoaXNzLnN0YXRlLmxpc3RzXG4gICAgICAgIGZvcihpPTA7aTwgbGlzdHMubGVuZ3RoOyBpKyspIHsgXG4gICAgICAgICAgaWYobGlzdHNbaV0ub2JqZWN0SWQgPT0gbGlzdE9iamVjdElkKVxuICAgICAgICAgICAgbGlzdHNbaV0uY291bnQgPSBwYXJzZUludChsaXN0c1tpXS5jb3VudCkgKyBwYXJzZUludChyZXMubGVuZ3RoKVxuICAgICAgICB9XG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtsaXN0czogbGlzdHN9KVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2VsZWN0ZWRQcm9zcGVjdHMgPSBcIltdXCJcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe3NlbGVjdGVkUHJvc3BlY3RzIDogW10gfSlcbiAgICAgICAgXG4gICAgICAgIC8vIGFkZCBhbGVydCB0byBpbmZvcm0gdXNlclxuICAgICAgICAvLyBVbnNlbGVjdCBhbGwgc2VsZWN0ZWRcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH1cbiAgICB9KTtcblxuICB9LFxuXG4gIGhpZGVBbGVydDogZnVuY3Rpb24oKSB7XG4gICAgJCgnLmFsZXJ0JykuaGlkZSgpXG4gIH0sXG5cbiAgYWRqdXN0SGVpZ2h0OiBmdW5jdGlvbih3aGljaE9uZSkge1xuICAgIHByb3NwZWN0V2luZG93VG9wID0gJCgnI3Byb3NwZWN0RGV0YWlsQnV0dG9ucycpLnBvc2l0aW9uKCkudG9wXG4gICAgcHJvc3BlY3RXaW5kb3dUb3AgPSBwcm9zcGVjdFdpbmRvd1RvcCArICQoJyNwcm9zcGVjdERldGFpbEJ1dHRvbnMnKS5oZWlnaHQoKVxuICAgIHByb3NwZWN0V2luZG93Qm90dG9tID0gJCgnI2F1dG9zY3JvbGwnKS5wb3NpdGlvbigpLnRvcCArICQoJyNhdXRvc2Nyb2xsJykuaGVpZ2h0KClcblxuICAgIGlmKHdoaWNoT25lID09ICdqJylcbiAgICAgIGFjdGl2ZVByb3NwZWN0ID0gdGhpcy5zdGF0ZS5rZXlib2FyZEFjdGl2ZVByb3NwZWN0ICsxIFxuICAgIGVsc2VcbiAgICAgIGFjdGl2ZVByb3NwZWN0ID0gdGhpcy5zdGF0ZS5rZXlib2FyZEFjdGl2ZVByb3NwZWN0IC0xIFxuXG4gICAgYWN0aXZlVG9wID0gJCgkKCcucHJvc3BlY3RzLXRyJylbYWN0aXZlUHJvc3BlY3RdKS5wb3NpdGlvbigpLnRvcFxuICAgIHNlbGVjdGVkSGVpZ2h0ID0gJCgkKCcucHJvc3BlY3RzLXRyJylbYWN0aXZlUHJvc3BlY3RdKS5oZWlnaHQoKVxuICAgIGFjdGl2ZUJvdHRvbSA9ICQoJCgnLnByb3NwZWN0cy10cicpW2FjdGl2ZVByb3NwZWN0XSkucG9zaXRpb24oKS50b3Arc2VsZWN0ZWRIZWlnaHRcblxuICAgIGNvbnNvbGUubG9nKHByb3NwZWN0V2luZG93VG9wLCBwcm9zcGVjdFdpbmRvd0JvdHRvbSlcbiAgICBjb25zb2xlLmxvZyhhY3RpdmVUb3AsIGFjdGl2ZUJvdHRvbSlcblxuICAgIHNjcm9sbFRvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvc2Nyb2xsJykuc2Nyb2xsVG9wXG4gICAgaWYoYWN0aXZlQm90dG9tID4gcHJvc3BlY3RXaW5kb3dCb3R0b20pXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0b3Njcm9sbCcpLnNjcm9sbFRvcCA9IHNjcm9sbFRvcCArIGFjdGl2ZUJvdHRvbSAtIHByb3NwZWN0V2luZG93Qm90dG9tXG5cbiAgICBpZihhY3RpdmVUb3AgPCAwKVxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dG9zY3JvbGwnKS5zY3JvbGxUb3AgPSBzY3JvbGxUb3AgKyBhY3RpdmVUb3AgLSAzN1xuICAgIGVsc2UgaWYoYWN0aXZlVG9wID09ICQoJCgnLnByb3NwZWN0cy10cicpWzBdKS5wb3NpdGlvbigpLnRvcClcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvc2Nyb2xsJykuc2Nyb2xsVG9wID0gMFxuICAgICAgXG4gICAgLy8gR2V0IFBvc3Rpb24gb2YgVG9wXG4gICAgLy8gR2V0IFBvc2l0aW9uIG9mIEJvdHRvbSBcbiAgICAvLyBHZXQgUG9zaXRpb24gb2YgQ3VycmVudCBTZWxlY3RlZFxuICAgIC8vIEFkanVzdCBieSBzY3JvbGxpbmcgZG93biBvciB1cFxuICB9LFxuXG4gIHN0YXJ0S2V5Ym9hcmRTaG9ydGN1dHM6IGZ1bmN0aW9uKCkge1xuICAgIC8qIEtleWJvYXJkIFNob3J0Y3V0cyAqL1xuICAgIE1vdXNldHJhcC5yZXNldCgpXG4gICAgLy9Nb3VzZXRyYXAudW5iaW5kKFsnaicsJ2snLCdvJ10pXG4gICAgdGhpc3MgPSB0aGlzO1xuXG4gICAgLyogUHJvc3BlY3QgVGFibGUgU2hvcnRjdXRzICovXG4gICAgTW91c2V0cmFwLmJpbmQoJ2onLCBmdW5jdGlvbigpIHsgXG4gICAgICBrZXlib2FyZCA9IHRoaXNzLnN0YXRlLmtleWJvYXJkQWN0aXZlUHJvc3BlY3RcbiAgICAgIGlmKGtleWJvYXJkICE9IHRoaXNzLnN0YXRlLnByb3NwZWN0c1BlclBhZ2UrMSlcbiAgICAgICAgdGhpc3MuYWRqdXN0SGVpZ2h0KCdqJylcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2tleWJvYXJkQWN0aXZlUHJvc3BlY3Q6IGtleWJvYXJkKzF9KVxuICAgIH0pO1xuXG4gICAgTW91c2V0cmFwLmJpbmQoJ2snLCBmdW5jdGlvbigpIHsgXG4gICAgICBrZXlib2FyZCA9IHRoaXNzLnN0YXRlLmtleWJvYXJkQWN0aXZlUHJvc3BlY3RcbiAgICAgIGlmKGtleWJvYXJkICE9IDEpXG4gICAgICAgIHRoaXNzLmFkanVzdEhlaWdodCgnaycpXG4gICAgICAgIHRoaXNzLnNldFN0YXRlKHtrZXlib2FyZEFjdGl2ZVByb3NwZWN0OiBrZXlib2FyZC0xfSlcbiAgICB9KTtcblxuXG4gICAgTW91c2V0cmFwLmJpbmQoJ28nLCBmdW5jdGlvbigpIHsgXG4gICAgICBjb25zb2xlLmxvZygnb3BlbiBjdXJyZW50IHByb3NwZWN0JylcbiAgICAgIGNvbnNvbGUubG9nKCQoJCgnLmtleVNlbGVjdCcpLmZpbmQoJ2EubGlua2VkaW5fbGluaycpWzBdKS5hdHRyKCdocmVmJykpXG4gICAgICBsaW5rID0gJCgkKCcua2V5U2VsZWN0JykuZmluZCgnYS5saW5rZWRpbl9saW5rJylbMF0pLmF0dHIoJ2hyZWYnKVxuICAgICAgLypcbiAgICAgIHdpbmRvdy5vcGVuKGxpbmssICdfYmxhbmsnKVxuICAgICAgY29uc29sZS5sb2coJ25ldycpXG4gICAgICAqL1xuICAgICAgLy9wb3B1cFdpbmRvdy5ibHVyKCk7XG4gICAgICAvL3dpbmRvdy5mb2N1cygpO1xuICAgICAgLy8ga2V5Ym9hcmQgPSB0aGlzcy5zdGF0ZS5rZXlib2FyZEFjdGl2ZVByb3NwZWN0XG4gICAgICBcbiAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICBhLmhyZWYgPSBsaW5rXG4gICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50c1wiKTtcbiAgICAgIC8vdGhlIHRlbnRoIHBhcmFtZXRlciBvZiBpbml0TW91c2VFdmVudCBzZXRzIGN0cmwga2V5XG4gICAgICAvLyBGb3IgTWFjIFRoaXMgV29ya3MgQ2hlY2sgRm9yIC0gV2luZG93c1xuICAgICAgZXZ0LmluaXRNb3VzZUV2ZW50KFwiY2xpY2tcIiwgdHJ1ZSwgdHJ1ZSwgd2luZG93LCAwLCAwLCAwLCAwLCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlLCBmYWxzZSwgZmFsc2UsIHRydWUsIDAsIG51bGwpO1xuICAgICAgYS5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gICAgfSk7XG5cblxuXG4gICAgLyogTGlzdCBNb2RpZmljYXRpb24gU2hvcnRjdXRzICovXG4gICAgTW91c2V0cmFwLmJpbmQoJ3RhYityJywgZnVuY3Rpb24oKXtcbiAgICAgIC8vY29uc29sZS5sb2coJ3JlbG9hZCcpXG4gICAgICAkKCcjcmVuYW1lTGlzdEJ0bicpLmNsaWNrKClcbiAgICB9KVxuXG4gICAgTW91c2V0cmFwLmJpbmQoJ3RhYitkJywgZnVuY3Rpb24oKXtcbiAgICAgIC8vY29uc29sZS5sb2coJ3JlbG9hZCcpXG4gICAgICAkKCcjZGVsZXRlTGlzdE1vZGFsJykuY2xpY2soKVxuICAgIH0pXG5cbiAgICBNb3VzZXRyYXAuYmluZCgndGFiK3MnLCBmdW5jdGlvbigpe1xuICAgICAgLy9jb25zb2xlLmxvZygncmVsb2FkJylcbiAgICAgIC8vJCgnI2Rvd25sb2FkUHJvc3BlY3RzJykuY2xpY2soKVxuICAgICAgdGhpc3MuZG93bmxvYWRGaWxlKClcbiAgICB9KVxuXG4gICAgTW91c2V0cmFwLmJpbmQoJ3NoaWZ0K2wnLCBmdW5jdGlvbigpe1xuICAgICAgLy9jb25zb2xlLmxvZygncmVsb2FkJylcbiAgICAgIC8vJCgnI2Rvd25sb2FkUHJvc3BlY3RzJykuY2xpY2soKVxuICAgICAgLy90aGlzcy5kb3dubG9hZEZpbGUoKVxuICAgICAgJCgnLm5ldy1saXN0LWJ0bicpLmNsaWNrKClcbiAgICB9KVxuXG4gICAgTW91c2V0cmFwLmJpbmQoJ2UnLCBmdW5jdGlvbigpe1xuICAgICAgY29uc29sZS5sb2coJ3JlbG9hZCcpXG4gICAgICAvLyQoJyNkb3dubG9hZFByb3NwZWN0cycpLmNsaWNrKClcbiAgICAgIHRoaXNzLnJlbW92ZVNlbGVjdGVkUHJvc3BlY3RzKClcbiAgICB9KVxuXG4gICAgTW91c2V0cmFwLmJpbmQoJ2MnLCBmdW5jdGlvbigpIHsgXG4gICAgICBjb25zb2xlLmxvZygnY29weScpXG4gICAgICAkKCcjY29weVRvTGlzdCcpLmNsaWNrKClcbiAgICB9KTtcblxuICAgIE1vdXNldHJhcC5iaW5kKCdtJywgZnVuY3Rpb24oKSB7IFxuICAgICAgY29uc29sZS5sb2coJ2NvcHknKVxuICAgICAgJCgnI21vdmVUb0xpc3QnKS5jbGljaygpXG4gICAgfSk7XG5cbiAgICAvL01vdXNldHJhcC5iaW5kKCdlJywgZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKCdlJyk7IH0pO1xuICAgIE1vdXNldHJhcC5iaW5kKCdyaWdodCcsIGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygncmlnaHQnKTsgfSk7XG4gICAgTW91c2V0cmFwLmJpbmQoJ2xlZnQnLCBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ2xlZnQnKTsgfSk7XG5cbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgLyogT25Mb2FkIEZvciBUaGUgRmlyc3QgVGltZSBGdW5jdGlvbiAqL1xuICAgIGxvY2FsU3RvcmFnZS5zZWxlY3RlZFByb3NwZWN0cyA9IEpTT04uc3RyaW5naWZ5KFtdKVxuICAgIHRoaXNzcyA9IHRoaXM7XG5cbiAgICAvL3RoaXMuc3RhcnRLZXlib2FyZFNob3J0Y3V0cygpXG5cbiAgICBwYXJzZV9oZWFkZXJzID0ge1xuICAgICAgJ1gtUGFyc2UtQXBwbGljYXRpb24tSWQnICA6ICdOODVRT2t0ZUVFUWt1WlZKS0F2dDhNVmVzMHNqRzZxTnBFR3FRRlZKJywgXG4gICAgICAnWC1QYXJzZS1SRVNULUFQSS1LZXknICAgIDogJ1ZONkV3VnlCWndPMXVwaHNCUHNhdTh0N0pRUnAwMFVNM0tZc2lpUWInXG4gICAgfVxuXG4gICAgY29tcGFueSA9IEpTT04uc3RyaW5naWZ5KEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyKS5jb21wYW55KVxuICAgIGN1aWQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikub2JqZWN0SWRcbiAgICB1c2VyID0gSlNPTi5zdHJpbmdpZnkoeydfX3R5cGUnOidQb2ludGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdvYmplY3RJZCc6Y3VpZCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3NOYW1lJzogJ1VzZXInfSlcbiAgICBhcmNoaXZlTGlzdCA9IEpTT04uc3RyaW5naWZ5KHsgLy9oYXJkQ29kZVxuICAgICAgJ29iamVjdElkJzonU2VyUFFqY2t2ZScsXG4gICAgICAnX190eXBlJzonUG9pbnRlcicsIFxuICAgICAgJ2NsYXNzTmFtZScgOiB0aGlzLnN0YXRlLmxpc3RDbGFzc05hbWVcbiAgICB9KVxuXG4gICAgcXJ5ID0gJ3doZXJlPXtcImNvbXBhbnlcIjonK2NvbXBhbnkrJyxcImFyY2hpdmVkXCI6dHJ1ZX0mY291bnQ9MSZvcmRlcj0tY3JlYXRlZEF0J1xuXG4gICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50TGlzdCAhPSAnQWxsJyl7XG4gICAgICBjdXJyZW50TGlzdCA9IHtcbiAgICAgICAgJ29iamVjdElkJzp0aGlzLnN0YXRlLmN1cnJlbnRMaXN0T2JqZWN0SWQsIFxuICAgICAgICAnX190eXBlJzonUG9pbnRlcicsIFxuICAgICAgICAnY2xhc3NOYW1lJyA6IHRoaXMuc3RhdGUubGlzdENsYXNzTmFtZVxuICAgICAgfVxuICAgICAgY3VycmVudExpc3QgPSBKU09OLnN0cmluZ2lmeShjdXJyZW50TGlzdClcbiAgICAgIHVzZXIgPSBKU09OLnN0cmluZ2lmeSh7J19fdHlwZSc6J1BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb2JqZWN0SWQnOid4VGhBWGMwTFpUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzTmFtZSc6J1VzZXInfSlcblxuICAgICAgLy8gYWRkIGNvbXBhbnkgdG8gcHJvc3BlY3RzIGFkZGVkIHRocm91Z2ggbWluaW5nIGpvYlxuICAgICAgcXJ5ID0gJ3doZXJlPXtcImNvbXBhbnlcIjonK2NvbXBhbnkrJyxcImxpc3RzXCI6JytjdXJyZW50TGlzdCsnfSZjb3VudD0xJ1xuICAgIH1cblxuICAgIGNsYXNzTmFtZSA9IHRoaXMuc3RhdGUuY2xhc3NOYW1lXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvJytjbGFzc05hbWUrJz9saW1pdD0nK3RoaXNzcy5zdGF0ZS5wcm9zcGVjdHNQZXJQYWdlLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGhlYWRlcnM6IHBhcnNlX2hlYWRlcnMsXG4gICAgICBjYWNoZTogdHJ1ZSxcbiAgICAgIGRhdGE6IHFyeSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIGNvbnNvbGUubG9nKCdDT01QQU5ZIFJFU1VMVFMnKVxuICAgICAgICBjb25zb2xlLmxvZyhyZXMucmVzdWx0cylcbiAgICAgICAgY29uc29sZS5sb2cocmVzLnJlc3VsdHMubGVuZ3RoKVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe3Byb3NwZWN0czogcmVzLnJlc3VsdHN9KVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe2NvdW50OiByZXMuY291bnR9KVxuICAgICAgICB0aGlzc3Muc2V0U3RhdGUoe3RvdGFsQ291bnQ6IHJlcy5jb3VudH0pXG4gICAgICAgIHRoaXNzcy5zZXRTdGF0ZSh7cGFnZXM6IE1hdGguY2VpbChyZXMuY291bnQvdGhpc3NzLnByb3BzLnByb3NwZWN0c1BlclBhZ2UpfSlcbiAgICAgICAgdGhpc3NzLnNldFN0YXRlKHtsb2FkaW5nOiBmYWxzZX0pXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcGFyc2VfaGVhZGVycyA9IHtcbiAgICAgICdYLVBhcnNlLUFwcGxpY2F0aW9uLUlkJyAgOiAnTjg1UU9rdGVFRVFrdVpWSktBdnQ4TVZlczBzakc2cU5wRUdxUUZWSicsIFxuICAgICAgJ1gtUGFyc2UtUkVTVC1BUEktS2V5JyAgICA6ICdWTjZFd1Z5Qlp3TzF1cGhzQlBzYXU4dDdKUVJwMDBVTTNLWXNpaVFiJyxcbiAgICB9XG5cbiAgICBjdXJyZW50VXNlciA9IHsgXG4gICAgICAnX190eXBlJyAgIDogJ1BvaW50ZXInLFxuICAgICAgJ2NsYXNzTmFtZSc6ICdfVXNlcicsXG4gICAgICAnb2JqZWN0SWQnIDogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpLm9iamVjdElkXG4gICAgfVxuXG4gICAgdGhpc3MgPSB0aGlzO1xuICAgIGxpc3RDbGFzc05hbWUgPSB0aGlzLnN0YXRlLmxpc3RDbGFzc05hbWVcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy8nK2xpc3RDbGFzc05hbWUsXG4gICAgICB0eXBlOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHBhcnNlX2hlYWRlcnMsXG4gICAgICBkYXRhOiAnd2hlcmU9e1widXNlclwiOicrSlNPTi5zdHJpbmdpZnkoY3VycmVudFVzZXIpK1wifSZjb3VudD0xJm9yZGVyPS1jcmVhdGVkQXRcIixcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIHJlc3VsdHMgPSByZXMucmVzdWx0c1xuICAgICAgICBmb3IoaT0wO2k8IHJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICByZXN1bHRzLmNvdW50ID0gJ34nXG4gICAgICAgIH1cbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2xpc3RzOiByZXN1bHRzfSlcbiAgICAgICAgLy8gTWFrZSBiYXRjaCByZXF1ZXN0IHRvIGdldCBsaXN0IGNvdW50cyBhZnRlciB0aGV5IGFyZSBsb2FkZWRcbiAgICAgICAgZm9yKGk9MDtpIDwgcmVzLnJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShyZXMucmVzdWx0c1tpXS5vYmplY3RJZCwgXCJcIilcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcihpPTA7aTwgcmVzLnJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsaXN0ID0ge1xuICAgICAgICAgICAgJ19fdHlwZScgICAgOiAnUG9pbnRlcicsXG4gICAgICAgICAgICAnb2JqZWN0SWQnICA6IHJlcy5yZXN1bHRzW2ldLm9iamVjdElkLFxuICAgICAgICAgICAgJ2NsYXNzTmFtZScgOiB0aGlzcy5zdGF0ZS5saXN0Q2xhc3NOYW1lLFxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNsYXNzTmFtZSA9IHRoaXNzLnN0YXRlLmNsYXNzTmFtZVxuICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6J2h0dHBzOi8vYXBpLnBhcnNlLmNvbS8xL2NsYXNzZXMvJytjbGFzc05hbWUsXG4gICAgICAgICAgICB0eXBlOidHRVQnLFxuICAgICAgICAgICAgaGVhZGVyczpwYXJzZV9oZWFkZXJzLFxuICAgICAgICAgICAgbGlzdE9iamVjdElkOiByZXMucmVzdWx0c1tpXS5vYmplY3RJZCxcbiAgICAgICAgICAgIGRhdGE6ICd3aGVyZT17XCJsaXN0c1wiOicrSlNPTi5zdHJpbmdpZnkobGlzdCkrJ30mY291bnQ9MScsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmxpc3RPYmplY3RJZClcbiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5saXN0T2JqZWN0SWQsIHJlcy5jb3VudClcbiAgICAgICAgICAgICAgYW1vdW50ID0gMFxuICAgICAgICAgICAgICBmb3IoaWk9MDtpaTwgcmVzdWx0cy5sZW5ndGg7aWkrKyl7XG4gICAgICAgICAgICAgICAgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0ocmVzdWx0c1tpaV0ub2JqZWN0SWQpID09IFwiXCIpXG4gICAgICAgICAgICAgICAgICBhbW91bnQgPSBhbW91bnQgKyAxXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZihhbW91bnQgPT0gMCkge1xuICAgICAgICAgICAgICAgIGZvcihpaT0wO2lpPCByZXN1bHRzLmxlbmd0aDtpaSsrKVxuICAgICAgICAgICAgICAgICAgcmVzdWx0c1tpaV0uY291bnQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShyZXN1bHRzW2lpXS5vYmplY3RJZClcblxuICAgICAgICAgICAgICAgIHRoaXNzLnNldFN0YXRlKHtsaXN0czogcmVzdWx0c30pXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnR290IENvdW50cycpXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyB1cGRhdGVkIHJlcy5jb3VudFxuICAgICAgICAgICAgICAvL3RoaXNzLnNldFN0YXRlKHtjb3VudDogcmVzLmNvdW50fSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InKVxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgZ2VuZXJhdGVfaWQgOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICdfJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTtcbiAgfSxcbn0pO1xuXG4vKiAgRHJvcGRvd24gTWVudXMgKi9cblxudmFyIEN1cnJlbnRMaXN0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0N1cnJlbnRMaXN0cycsXG4gIGxpc3RBY3Rpb246IGZ1bmN0aW9uKGUpIHtcbiAgICBsaXN0TmFtZSA9ICQoZS50YXJnZXQpLnRleHQoKVxuICAgIFxuICAgIHZhciBsaXN0U2VsZWN0ID0gXy5maWx0ZXIodGhpcy5wcm9wcy5saXN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT0gbGlzdE5hbWVcbiAgICB9KTtcblxuICAgIHRoaXMucHJvcHMubGlzdEFjdGlvbihsaXN0U2VsZWN0WzBdLm9iamVjdElkKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgbGlzdHMgPSBbXSBcbiAgICBmb3IoaT0wO2k8IHRoaXMucHJvcHMubGlzdHMubGVuZ3RoO2krKykge1xuICAgICAgbGlzdHMucHVzaChcbiAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnLGZvbnRTaXplOicxMHB4J30sIGhyZWY6IFwiamF2YXNjcmlwdDpcIiwgb25DbGljazogdGhpcy5saXN0QWN0aW9ufSwgdGhpcy5wcm9wcy5saXN0c1tpXS5uYW1lKSlcbiAgICAgIClcbiAgICB9XG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLnByb3BzLmNvcHlEcm9wZG93blN0eWxlKVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udWwoe2NsYXNzTmFtZTogXCJkcm9wZG93bi1tZW51IGRyb3AtdGVzdFwiLCBpZDogXCJkcm9wZG93blwiLCBcbiAgICAgICAgICBzdHlsZToge3JpZ2h0OjE1OH19LCBcbiAgICAgICAgbGlzdHNcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxudmFyIExpc3RzTWVudSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0xpc3RzTWVudScsXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcImRyb3Bkb3duLW1lbnUgZHJvcC10ZXN0XCIsIGlkOiBcImRyb3Bkb3duXCIsIFxuICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICBtaW5XaWR0aDonaW5oZXJpdCcsXG4gICAgICAgICAgICB0b3A6ICcyMHB4JyxcbiAgICAgICAgICAgIHdpZHRoOiAnMTI1cHgnLFxuICAgICAgICAgICAgcmlnaHQ6ICcxNTRweCcsXG4gICAgICAgICAgICBsZWZ0OidhdXRvJ1xuICAgICAgICAgIH19LCBcbiAgICAgICAgUmVhY3QuRE9NLmxpKG51bGwsIFJlYWN0LkRPTS5hKHtocmVmOiBcIiNib29rc1wifSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS10aW1lc1wifSksIFwiIMKgXCIgKyAnICcgK1xuICAgICAgICAgIFwiRGVsZXRlIExpc3RcIlxuICAgICAgICApKSwgXG4gICAgICAgIFJlYWN0LkRPTS5saShudWxsLCBSZWFjdC5ET00uYSh7aHJlZjogXCIjcG9kY2FzdHNcIn0sIFxuICAgICAgICAgIFwiUmVuYW1lIExpc3RzXCJcbiAgICAgICAgKSlcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxudmFyIEN1cnJlbnRMaXN0c1R3byA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0N1cnJlbnRMaXN0c1R3bycsXG4gIGxpc3RBY3Rpb246IGZ1bmN0aW9uKGUpIHtcbiAgICBsaXN0TmFtZSA9ICQoZS50YXJnZXQpLnRleHQoKVxuICAgIFxuICAgIHZhciBsaXN0U2VsZWN0ID0gXy5maWx0ZXIodGhpcy5wcm9wcy5saXN0cywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT0gbGlzdE5hbWVcbiAgICB9KTtcblxuICAgIHRoaXMucHJvcHMubGlzdEFjdGlvbihsaXN0U2VsZWN0WzBdLm9iamVjdElkKVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgbGlzdHMgPSBbXSBcbiAgICBmb3IoaT0wO2k8dGhpcy5wcm9wcy5saXN0cy5sZW5ndGg7aSsrKSB7XG4gICAgICBsaXN0cy5wdXNoKFxuICAgICAgICBSZWFjdC5ET00ubGkobnVsbCwgUmVhY3QuRE9NLmEoe3N0eWxlOiB7Zm9udFdlaWdodDonYm9sZCcsZm9udFNpemU6JzEwcHgnfSwgXG4gICAgICAgICAgICAgICBocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5saXN0QWN0aW9ufSwgXG4gICAgICAgICAgdGhpcy5wcm9wcy5saXN0c1tpXS5uYW1lKSlcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS51bCh7Y2xhc3NOYW1lOiBcImRyb3Bkb3duLW1lbnUgZHJvcC10ZXN0XCIsIGlkOiBcImRyb3Bkb3duXCIsIFxuICAgICAgICAgIHN0eWxlOiB0aGlzLnByb3BzLmNvcHlEcm9wZG93blN0eWxlfSwgXG4gICAgICAgIGxpc3RzXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbnZhciBMaXN0RGV0YWlsQnV0dG9ucyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ0xpc3REZXRhaWxCdXR0b25zJyxcbiAgLy8gUmVuYW1lIExpc3RcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZWRpdE1vZGU6IGZhbHNlXG4gICAgfVxuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIC8vY29uc29sZS5sb2codGhpcy5wcm9wcy5jdXJyZW50TGlzdE9iamVjdElkKVxuICAgIGlmKCF0aGlzLnN0YXRlLmVkaXRNb2RlKSB7XG4gICAgICBzdHVmZiA9IFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwiXCIsIHN0eWxlOiBsaXN0TmFtZVN0eWxlfSwgXG4gICAgICAgICAgICAodGhpcy5wcm9wcy5jdXJyZW50TGlzdE5hbWUgPT0gXCJBbGxcIikgPyAnJyA6IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYmFyc1wiLCBzdHlsZToge2ZvbnRTaXplOjE2LCBtYXJnaW5Ub3A6LTV9fSksIFxuICAgICAgICAgICAgKHRoaXMucHJvcHMuY3VycmVudExpc3ROYW1lID09IFwiQWxsXCIpID8gJycgOiBcIiAgIFwiICt0aGlzLnByb3BzLmN1cnJlbnRMaXN0TmFtZVxuICAgICAgICAgICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIHN0dWZmID0gUmVhY3QuRE9NLmlucHV0KHtjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sXCIsIHN0eWxlOiB7d2lkdGg6IDEwMCwgZmxvYXQ6ICdsZWZ0JywgaGVpZ2h0OiAyNCwgbWFyZ2luVG9wOiAtMX19KVxuICAgIH1cbiAgICByZXR1cm4gKFxuXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdihudWxsLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNCh7c3R5bGU6IHttYXJnaW46MH19LCBcbiAgICAgICAgICAgICAgc3R1ZmYsIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICBzdHlsZTogbGlzdEJ0biwgXG4gICAgICAgICAgICAgICAgJ2RhdGEtdG9nZ2xlJzogXCJtb2RhbFwiLCBcbiAgICAgICAgICAgICAgICBpZDogXCJyZW5hbWVMaXN0QnRuXCIsIFxuICAgICAgICAgICAgICAgICdkYXRhLXRhcmdldCc6IFwiLmJzLXJlbmFtZUxpc3QtbW9kYWwtc21cIiwgXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIiBidG4gYnRuLXhzIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBlbmNpbFwifSlcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgIHN0eWxlOiBsaXN0QnRuLCBcbiAgICAgICAgICAgICAgICAnZGF0YS10b2dnbGUnOiBcIm1vZGFsXCIsIFxuICAgICAgICAgICAgICAgIGlkOiBcImRlbGV0ZUxpc3RNb2RhbFwiLCBcbiAgICAgICAgICAgICAgICAnZGF0YS10YXJnZXQnOiBcIi5icy1kZWxldGVMaXN0LW1vZGFsLXNtXCIsIFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXhzIGJ0bi1kZWZhdWx0XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXRyYXNoLW9cIn0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksIFxuXG4gICAgICAgICAgICBSZW5hbWVMaXN0TW9kYWwoe3JlbmFtZUxpc3Q6IHRoaXMucHJvcHMucmVuYW1lTGlzdH0pLCBcbiAgICAgICAgICAgIERlbGV0ZUxpc3RNb2RhbCh7ZGVsZXRlTGlzdDogdGhpcy5wcm9wcy5kZWxldGVMaXN0fSlcbiAgICAgICAgICApXG4gICAgICApO1xuICB9LFxuXG4gIHJlbmFtZUxpc3Q6IGZ1bmN0aW9uKG5ld0xpc3ROYW1lKSB7XG4gICAgdGhpcy5wcm9wcy5yZW5hbWVMaXN0KG5ld0xpc3ROYW1lKVxuICB9LFxuXG4gIGRlbGV0ZUxpc3Q6IGZ1bmN0aW9uKCl7XG4gICAgdGhpcy5wcm9wcy5kZWxldGVMaXN0KClcbiAgfSxcblxuICB0b2dnbGVFZGl0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtlZGl0TW9kZTogIXRoaXMuc3RhdGUuZWRpdE1vZGUgfSlcbiAgfVxufSk7XG5cbnZhciBDb21wYW55UHJvc3BlY3RIZWFkZXIgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdDb21wYW55UHJvc3BlY3RIZWFkZXInLFxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udHIobnVsbCwgXG4gICAgICAgIFJlYWN0LkRPTS50aChudWxsKSwgXG4gICAgICAgIFJlYWN0LkRPTS50aCh7c3R5bGU6IHt3aWR0aDozMDB9fSwgXCJOYW1lXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3dpZHRoOjEwMH19LCBcIkFkZGVkIE9uXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiSW5kdXN0cnlcIiksIFxuICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7d2lkdGg6MTM3LGRpc3BsYXk6J25vbmUnfX0sIFwiIyBvZiBQcm9zcGVjdHNcIiksIFxuICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7ZGlzcGxheTonbm9uZSd9fSwgXCJTaWduYWxzXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3dpZHRoOjYwMH19LCBcIsKgXCIpLCBcbiAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiwqBcIiksIFxuICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCLCoFwiKVxuICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIGNyZWF0ZUxpc3RNb2RhbFxuICBjcmVhdGVMaXN0OiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygkKCcjbGlzdFRpdGxlJykudmFsKCkpXG5cbiAgICBkYXRhID0gIHtcbiAgICAgICduYW1lJyAgICAgICAgOiAkKCcjbGlzdFRpdGxlJykudmFsKCkudHJpbSgpLCAgIC8vV2FpdGluZyAsIFJ1bm5pbmdcbiAgICAgICd1c2VyJyAgICAgICAgOiB7ICdfX3R5cGUnOidQb2ludGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAnY2xhc3NOYW1lJzonX1VzZXInLFxuICAgICAgICAgICAgICAgICAgICAgICdvYmplY3RJZCc6J3hXRVNpdzVTbWQnIH0sXG4gICAgfVxuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdExpc3QnLFxuICAgICAgdHlwZTonUE9TVCcsXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJylcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZGF0YS5jb3VudCA9IDBcblxuICAgIHRoaXMucHJvcHMuY3JlYXRlTGlzdChkYXRhKVxuICAgIFxuICAgICQoJyNjcmVhdGVMaXN0TW9kYWwnKS5tb2RhbCgnaGlkZScpXG4gICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdtb2RhbC1vcGVuJyk7XG4gICAgJCgnLm1vZGFsLWJhY2tkcm9wJykucmVtb3ZlKCk7XG4gICAgLy8kKCdidXR0b24uY2xvc2UnKS5jbGljaygpXG4gIH0sXG5cbiAgY3JlYXRlTGlzdEJ1dHRvbkNsaWNrOiBmdW5jdGlvbigpIHtcbiAgICBpZigkKCcjbGlzdFRpdGxlJykudmFsKCkudHJpbSgpICE9IFwiXCIpXG4gICAgICB0aGlzLmNyZWF0ZUxpc3QoKVxuICB9LFxuXG4gIGNyZWF0ZU1pbmluZ0pvYjogZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnNvbGUubG9nKCdsbWFvJylcbiAgICBpZigkKCcjbGlzdFRpdGxlJykudmFsKCkudHJpbSgpICE9IFwiXCIpXG4gICAgICB0aGlzLmNyZWF0ZUxpc3QoKVxuICB9LFxuXG4gIGRlbGV0ZUxpc3Q6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucHJvcHMuZGVsZXRlTGlzdCgpXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbCBmYWRlIGJzLWRlbGV0ZUxpc3QtbW9kYWwtc21cIiwgdGFiSW5kZXg6IFwiLTFcIiwgcm9sZTogXCJkaWFsb2dcIiwgJ2FyaWEtbGFiZWxsZWRieSc6IFwibXlTbWFsbE1vZGFsTGFiZWxcIiwgJ2FyaWEtaGlkZGVuJzogXCJ0cnVlXCIsIGlkOiBcImNyZWF0ZUxpc3RNb2RhbFwiLCBzdHlsZToge3RvcDonMjAwcHgnfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWRpYWxvZyBtb2RhbC1zbVwifSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1jb250ZW50XCJ9LCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtaGVhZGVyXCJ9LCBcbiAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5idXR0b24oe3R5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJjbG9zZVwiLCAnZGF0YS1kaXNtaXNzJzogXCJtb2RhbFwifSwgUmVhY3QuRE9NLnNwYW4oeydhcmlhLWhpZGRlbic6IFwidHJ1ZVwifSwgXCLDl1wiKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtjbGFzc05hbWU6IFwic3Itb25seVwifSwgXCJDbG9zZVwiKSksIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmg0KHtjbGFzc05hbWU6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwibXlNb2RhbExhYmVsXCJ9LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS10cmFzaC1vXCJ9KSwgXCIgwqBEZWxldGUgTGlzdD9cIilcbiAgICAgICAgICAgICAgICApLCBcbiAgICAgICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtYm9keVwifSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uZm9ybSh7Y2xhc3NOYW1lOiBcImRlbGV0ZUZvcm1cIiwgb25TdWJtaXQ6IHRoaXMuZGVsZXRlTGlzdH0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLmRlbGV0ZUxpc3QsIFxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLWRhbmdlclwiLCBcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJywgd2lkdGg6JzEwMCUnfX0sIFxuICAgICAgICAgICAgICAgICAgICAgIFwiRGVsZXRlXCJcbiAgICAgICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuZGVsZXRlTGlzdCwgXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tZGVmYXVsdFwiLCBcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJywgd2lkdGg6JzEwMCUnfX0sIFxuICAgICAgICAgICAgICAgICAgICAgIFwiQ2FuY2VsXCJcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy8gU3Bpbm5lclxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiaG9yaXphbnRhbC1zcGlubmVyXCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImhvei1ib3VuY2UxXCJ9KSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJob3otYm91bmNlMlwifSksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiaG96LWJvdW5jZTNcIn0pXG4gICAgICApXG4gICAgKVxuICB9XG59KVxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIExvYWRpbmdTcGlubmVyXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwic3Bpbm5lclwiLCBzdHlsZToge21hcmdpblRvcDonMTgwcHgnfX0sIFxuICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcInNwaW5uZXItY29udGFpbmVyIGNvbnRhaW5lcjFcIn0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlIGNpcmNsZTFcIn0pLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZSBjaXJjbGUyXCJ9KSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUgY2lyY2xlM1wifSksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlIGNpcmNsZTRcIn0pXG4gICAgICApLCBcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJzcGlubmVyLWNvbnRhaW5lciBjb250YWluZXIyXCJ9LCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZSBjaXJjbGUxXCJ9KSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUgY2lyY2xlMlwifSksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlIGNpcmNsZTNcIn0pLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZSBjaXJjbGU0XCJ9KVxuICAgICAgKSwgXG4gICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwic3Bpbm5lci1jb250YWluZXIgY29udGFpbmVyM1wifSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUgY2lyY2xlMVwifSksIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwiY2lyY2xlIGNpcmNsZTJcIn0pLCBcbiAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcImNpcmNsZSBjaXJjbGUzXCJ9KSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjaXJjbGUgY2lyY2xlNFwifSlcbiAgICAgIClcbiAgICApXG4gICAgKVxuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvL01lc3NlbmdlclxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJhbGVydCBhbGVydC1zdWNjZXNzXCIsIFxuICAgICAgICAgICAgICdkYXRhLWFsZXJ0JzogXCJhbGVydFwiLCBcbiAgICAgICAgICAgICBzdHlsZToge3Bvc2l0aW9uOidhYnNvbHV0ZScsXG4gICAgICAgICAgICAgICAgICAgICB0b3A6IDMxLCBcbiAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OjMwLCBcbiAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6J25vbmUnLFxuICAgICAgICAgICAgICAgICAgICAgd2lkdGg6MjAwfX0sIFxuICAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2NsYXNzTmFtZTogXCJjbG9zZVwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5oaWRlQWxlcnR9LCBcIsOXXCIpLCBcbiAgICAgICAgICAgIFwiVGVzdFwiXG4gICAgICAgIClcbiAgICApO1xuICB9XG59KTtcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBQYW5lbCBGb290aW5nXG4gIHBhZ2luYXRlUHJldmlvdXM6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0aGlzcyA9IHRoaXM7XG5cbiAgICBxcnkgPSB7XG4gICAgICB3aGVyZTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBjb21wYW55OiBhcHBDb25maWcuY29tcGFueSxcbiAgICAgICAgYXJjaGl2ZWQ6IHRydWUsXG4gICAgICB9KSxcbiAgICAgIGNvdW50OiAxLFxuICAgICAgc2tpcDogKHRoaXNzLnByb3BzLmN1cnJlbnRQYWdlLTIpKnRoaXNzLnByb3BzLnByb3NwZWN0c1BlclBhZ2UsXG4gICAgICBsaW1pdDogdGhpc3MucHJvcHMucHJvc3BlY3RzUGVyUGFnZVxuICAgIH1cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdCcsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdiZWZvcmUgU2VuZCcpXG4gICAgICAgIHRoaXNzLnByb3BzLnNldFBhZ2luYXRlKHRydWUpXG4gICAgICB9LFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIGRhdGE6IHFyeSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIC8vdGhpc3Muc2V0U3RhdGUoe3Byb3NwZWN0czogcmVzLnJlc3VsdHN9KVxuICAgICAgICAvL3RoaXNzLnNldFN0YXRlKHtjdXJyZW50UGFnZTogdGhpcy5wcm9wcy5jdXJyZW50UGFnZSAtIDF9KVxuICAgICAgICB0aGlzcy5wcm9wcy5wYWdpbmF0ZShyZXMucmVzdWx0cywgdGhpc3MucHJvcHMuY3VycmVudFBhZ2UgLSAxKVxuICAgICAgICB0aGlzcy5wcm9wcy5zZXRQYWdpbmF0ZShmYWxzZSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24ocmVzKXsgY29uc29sZS5sb2cocmVzKSB9XG4gICAgfSk7XG4gIH0sXG5cblxuICBwYWdpbmF0ZTogZnVuY3Rpb24oZGlyZWN0aW9uKSB7XG4gICAgcHJvc3BlY3RzUGVyUGFnZSA9IHRoaXMucHJvcHMucHJvc3BlY3RzUGVyUGFnZVxuICAgIGlmKGRpcmVjdGlvbj09J3ByZXZpb3VzJylcbiAgICAgIHNraXAgPSAodGhpcy5wcm9wcy5jdXJyZW50UGFnZSAtIDIpKnByb3NwZWN0c1BlclBhZ2VcbiAgICBlbHNlIGlmKGRpcmVjdGlvbj09XCJmb3J3YXJkXCIpXG4gICAgICBza2lwID0gdGhpcy5wcm9wcy5jdXJyZW50UGFnZSpwcm9zcGVjdHNQZXJQYWdlXG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdD9za2lwPScrc2tpcCxcbiAgICAgIHR5cGU6J0dFVCcsXG4gICAgICBoZWFkZXJzOiBwYXJzZV9oZWFkZXJzLFxuICAgICAgZGF0YTogJ3doZXJlPXtcImNvbXBhbnlcIjonK2FwcENvbmZpZy5jb21wYW55Kyd9JmNvdW50PTEnLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgLy90aGlzcy5zZXRTdGF0ZSh7cHJvc3BlY3RzOiByZXMucmVzdWx0c30pXG4gICAgICAgIC8vdGhpc3Muc2V0U3RhdGUoe2N1cnJlbnRQYWdlOiB0aGlzLnByb3BzLmN1cnJlbnRQYWdlICsgMX0pXG4gICAgICAgIHRoaXMucHJvcHMucGFnaW5hdGUocmVzLnJlc3VsdHMsIHRoaXMucHJvcHMuY3VycmVudFBhZ2UgKyAxKVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgcGFnaW5hdGVGb3J3YXJkOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGhpc3MgPSB0aGlzO1xuICAgIHFyeSA9IHtcbiAgICAgIHdoZXJlOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGNvbXBhbnk6IGFwcENvbmZpZy5jb21wYW55LFxuICAgICAgICAvL3VzZXI6IGFwcENvbmZpZy51c2VyLFxuICAgICAgICBhcmNoaXZlZDogdHJ1ZVxuICAgICAgfSksXG4gICAgICBjb3VudDogMSxcbiAgICAgIHNraXA6IHRoaXNzLnByb3BzLmN1cnJlbnRQYWdlKnRoaXNzLnByb3BzLnByb3NwZWN0c1BlclBhZ2UsXG4gICAgICBsaW1pdDogdGhpc3MucHJvcHMucHJvc3BlY3RzUGVyUGFnZSxcbiAgICB9XG5cbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdCcsXG4gICAgICB0eXBlOidHRVQnLFxuICAgICAgaGVhZGVyczogYXBwQ29uZmlnLnBhcnNlSGVhZGVycyxcbiAgICAgIGRhdGE6IHFyeSxcbiAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzcy5wcm9wcy5zZXRQYWdpbmF0ZSh0cnVlKVxuICAgICAgfSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcy5yZXN1bHRzKVxuICAgICAgICBjb25zb2xlLmxvZyhcInN1Y2Nlc3NcIilcbiAgICAgICAgdGhpc3MucHJvcHMucGFnaW5hdGUocmVzLnJlc3VsdHMsIHRoaXNzLnByb3BzLmN1cnJlbnRQYWdlICsgMSlcbiAgICAgICAgdGhpc3MucHJvcHMuc2V0UGFnaW5hdGUoZmFsc2UpXG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlcyl7IGNvbnNvbGUubG9nKHJlcyk7IH1cbiAgICB9KTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgcGFnaW5hdGVGb3J3YXJkID0gdGhpcy5wYWdpbmF0ZUZvcndhcmRcbiAgICBwYWdpbmF0ZVByZXZpb3VzID0gdGhpcy5wYWdpbmF0ZVByZXZpb3VzXG5cbiAgICBNb3VzZXRyYXAuYmluZCgnbCcsIGZ1bmN0aW9uKCkgeyBcbiAgICAgIGNvbnNvbGUubG9nKCduZXcgZm9yd2FyZCcpXG4gICAgICBwYWdpbmF0ZUZvcndhcmQoKVxuICAgIH0pO1xuXG4gICAgTW91c2V0cmFwLmJpbmQoJ2gnLCBmdW5jdGlvbigpIHsgXG4gICAgICBjb25zb2xlLmxvZygnbmV3IGJhY2snKVxuICAgICAgcGFnaW5hdGVQcmV2aW91cygpXG4gICAgfSk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAvLyBTaG91bGQgYmUgaGFuZGxlZCBieSBQYW5sZSBGb290aW5nXG5cbiAgICBsYXN0UGFnZSA9IHRoaXMucHJvcHMuY3VycmVudFBhZ2UgPT0gdGhpcy5wcm9wcy5wYWdlc1xuICAgIGxlc3NUaGFuT25lUGFnZSA9IHRoaXMucHJvcHMuY291bnQgPCB0aGlzLnByb3BzLnByb3NwZWN0c1BlclBhZ2VcbiAgICBmb3J3YXJkID0gKGxhc3RQYWdlIHx8IGxlc3NUaGFuT25lUGFnZSkgPyAnZGlzYWJsZWQnIDogJydcblxuICAgIHByZXZpb3VzID0gKHRoaXMucHJvcHMuY3VycmVudFBhZ2UgLSAxKSA/ICcnIDogJ2Rpc2FibGVkJ1xuXG4gICAgbG93ZXJMaW1pdCA9ICh0aGlzLnByb3BzLmN1cnJlbnRQYWdlLTEpKnRoaXMucHJvcHMucHJvc3BlY3RzUGVyUGFnZVxuICAgIHVwcGVyTGltaXQgPSB0aGlzLnByb3BzLmN1cnJlbnRQYWdlKnRoaXMucHJvcHMucHJvc3BlY3RzUGVyUGFnZVxuXG4gICAgbG93ZXJMaW1pdCA9IChsb3dlckxpbWl0KSA/IGxvd2VyTGltaXQgOiAxXG4gICAgdXBwZXJMaW1pdCA9ICh1cHBlckxpbWl0ID4gdGhpcy5wcm9wcy5jb3VudCkgPyB0aGlzLnByb3BzLmNvdW50IDogdXBwZXJMaW1pdFxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJwYW5lbC1mb290aW5nXCIsIFxuICAgICAgICAgICBpZDogXCJuYXZiYXJcIiwgXG4gICAgICAgICAgIHN0eWxlOiB7aGVpZ2h0OiczNXB4JyxwYWRkaW5nOicwcHgnLCBwYWRkaW5nVG9wOic3cHgnfX0sIFxuICAgICAgICAgIFJlYWN0LkRPTS5zcGFuKHtzdHlsZToge2Zsb2F0OidyaWdodCcsbWFyZ2luUmlnaHQ6JzIwcHgnfX0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgICBzdHlsZToge21hcmdpblJpZ2h0Oic1cHgnfSwgXG4gICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnBhZ2luYXRlUHJldmlvdXMsIFxuICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJsdWUtZ3JhZGllbnQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBcIitwcmV2aW91c30sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1mYXN0LWJhY2t3YXJkXCJ9KVxuICAgICAgICAgICksIFxuICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucGFnaW5hdGVQcmV2aW91cywgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcInBhZ2luYXRlLWJhY2stYnRuIGJsdWUtZ3JhZGllbnQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBcIitwcmV2aW91c30sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1jaGV2cm9uLWxlZnRcIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe3N0eWxlOiB7bWFyZ2luTGVmdDo1LCBtYXJnaW5SaWdodDo1LGRpc3BsYXk6J2lubGluZS1ibG9jaycsd2lkdGg6MTE1LCB0ZXh0QWxpZ246J2NlbnRlcid9fSwgXG4gICAgICAgICAgICBsb3dlckxpbWl0KycgLSAnK3VwcGVyTGltaXQrJyBvZiAnK3RoaXMucHJvcHMuY291bnRcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBcbiAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLnBhZ2luYXRlRm9yd2FyZCwgXG4gICAgICAgICAgICAgY2xhc3NOYW1lOiBcInBhZ2luYXRlLWZvcndhcmQtYnRuIGJsdWUtZ3JhZGllbnQgYnRuIGJ0bi1wcmltYXJ5IGJ0bi14cyBcIitmb3J3YXJkfSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNoZXZyb24tcmlnaHRcIn0pXG4gICAgICAgICAgKSwgXG4gICAgICAgICAgUmVhY3QuRE9NLmEoe2hyZWY6IFwiamF2YXNjcmlwdDpcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHttYXJnaW5MZWZ0Oic1cHgnfSwgXG4gICAgICAgICAgICAgb25DbGljazogdGhpcy5wYWdpbmF0ZUZvcndhcmQsIFxuICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJibHVlLWdyYWRpZW50IGJ0biBidG4tcHJpbWFyeSBidG4teHMgXCIrZm9yd2FyZH0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1mYXN0LWZvcndhcmRcIn0pKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vIGNyZWF0ZUxpc3RNb2RhbFxuICBjcmVhdGVMaXN0OiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygkKCcjbGlzdFRpdGxlJykudmFsKCkpXG5cbiAgICBkYXRhID0gIHtcbiAgICAgICduYW1lJyAgICAgICAgOiAkKCcjbGlzdFRpdGxlJykudmFsKCkudHJpbSgpLCAgIC8vV2FpdGluZyAsIFJ1bm5pbmdcbiAgICAgICd1c2VyJyAgICAgICAgOiB7ICdfX3R5cGUnOidQb2ludGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAnY2xhc3NOYW1lJzonX1VzZXInLFxuICAgICAgICAgICAgICAgICAgICAgICdvYmplY3RJZCc6J3hXRVNpdzVTbWQnIH0sXG4gICAgfVxuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdExpc3QnLFxuICAgICAgdHlwZTonUE9TVCcsXG4gICAgICBoZWFkZXJzOiBhcHBDb25maWcucGFyc2VIZWFkZXJzLFxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJylcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZGF0YS5jb3VudCA9IDBcblxuICAgIHRoaXMucHJvcHMuY3JlYXRlTGlzdChkYXRhKVxuICAgIFxuICAgICQoJyNjcmVhdGVMaXN0TW9kYWwnKS5tb2RhbCgnaGlkZScpXG4gICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdtb2RhbC1vcGVuJyk7XG4gICAgJCgnLm1vZGFsLWJhY2tkcm9wJykucmVtb3ZlKCk7XG4gICAgLy8kKCdidXR0b24uY2xvc2UnKS5jbGljaygpXG4gIH0sXG5cbiAgcmVuYW1lTGlzdDogZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIC8vY29uc29sZS5sb2coJCgnI25ld0xpc3ROYW1lJykudmFsKCkpXG4gICAgbmV3TGlzdE5hbWUgPSAkKCcjbmV3TGlzdE5hbWUnKS52YWwoKVxuICAgIGlmKG5ld0xpc3ROYW1lLnRyaW0oKSAhPSBcIlwiKVxuICAgICAgdGhpcy5wcm9wcy5yZW5hbWVMaXN0KG5ld0xpc3ROYW1lKVxuICAgIC8vIERpc2FibGUgTW9kYWxcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoXG4gICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsIGZhZGUgYnMtcmVuYW1lTGlzdC1tb2RhbC1zbVwiLCB0YWJJbmRleDogXCItMVwiLCByb2xlOiBcImRpYWxvZ1wiLCAnYXJpYS1sYWJlbGxlZGJ5JzogXCJteVNtYWxsTW9kYWxMYWJlbFwiLCAnYXJpYS1oaWRkZW4nOiBcInRydWVcIiwgaWQ6IFwiY3JlYXRlTGlzdE1vZGFsXCIsIHN0eWxlOiB7dG9wOicyMDBweCd9fSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwibW9kYWwtZGlhbG9nIG1vZGFsLXNtXCJ9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWNvbnRlbnRcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJtb2RhbC1oZWFkZXJcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgY2xhc3NOYW1lOiBcImNsb3NlXCIsICdkYXRhLWRpc21pc3MnOiBcIm1vZGFsXCJ9LCBSZWFjdC5ET00uc3Bhbih7J2FyaWEtaGlkZGVuJzogXCJ0cnVlXCJ9LCBcIsOXXCIpLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLnNwYW4oe2NsYXNzTmFtZTogXCJzci1vbmx5XCJ9LCBcIkNsb3NlXCIpKSwgXG4gICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaDQoe2NsYXNzTmFtZTogXCJtb2RhbC10aXRsZVwiLCBpZDogXCJteU1vZGFsTGFiZWxcIn0sIFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWxpc3RcIn0pLCBcIiDCoFJlbmFtZSBMaXN0XCIpXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7Y2xhc3NOYW1lOiBcIm1vZGFsLWJvZHlcIn0sIFxuICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmZvcm0oe29uU3VibWl0OiB0aGlzLnJlbmFtZUxpc3R9LCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHtpZDogXCJuZXdMaXN0TmFtZVwiLCB0eXBlOiBcInRleHRcIiwgcGxhY2Vob2xkZXI6IFwiRW50ZXIgbGlzdCB0aXRsZS4uLlwiLCBjbGFzc05hbWU6IFwiZm9ybS1jb250cm9sXCJ9KSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5icihudWxsKSwgXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucmVuYW1lTGlzdCwgXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImJ0biBidG4tc3VjY2Vzc1wiLCBcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6J2Jsb2NrJywgd2lkdGg6JzEwMCUnfX0sIFxuICAgICAgICAgICAgICAgICAgICAgIFwiQ3JlYXRlIExpc3RcIlxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICk7XG4gIH1cbn0pO1xuXG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxudmFyIFNpZGVNZW51TGlzdE9wdGlvbiA9IHJlcXVpcmUoJy4vdXNlcl9zaWRlX21lbnVfbGlzdC5qcy5taW4uanMnKTtcbnZhciBjcmVhdGVMaXN0TW9kYWwgPSByZXF1aXJlKCcuL2NyZWF0ZV9saXN0X21vZGFsLmpzLm1pbi5qcycpXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIC8vU2lkZU1lbnVQcm9zcGVjdHMgLSBTaWRlTGlzdFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAvKlxuICAgICAgY3JlYXRlTGlzdDogXG4gICAgICByZW5hbWVMaXN0OlxuICAgICAgZGVsZXRlTGlzdDpcbiAgICAgIGNoYW5nZUxpc3Q6XG4gICAgICBjdXJyZW50TGlzdDpcbiAgICAgIHRvdGFsQ291bnQ6XG4gICAgICBsaXN0czpcbiAgICAgICovXG4gICAgfVxuICB9LFxuXG4gIGNyZWF0ZUxpc3Q6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgdGhpcy5wcm9wcy5jcmVhdGVMaXN0KGRhdGEpXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICB9LFxuXG4gIGNoYW5nZUxpc3Q6IGZ1bmN0aW9uKGUpIHtcbiAgICAvKlxuICAgIGN1cnJlbnRMaXN0ID0gJChlLnRhcmdldCkucGFyZW50KCkvLy5kYXRhKCdsaXN0JylcbiAgICBjb25zb2xlLmxvZyhjdXJyZW50TGlzdClcbiAgICB0aGlzLnByb3BzLmNoYW5nZUxpc3QoY3VycmVudExpc3QubmFtZSwgY3VycmVudExpc3Qub2JqZWN0SWQpXG4gICAgKi9cbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIGlmKHRoaXMucHJvcHMuY3VycmVudExpc3QgPT0gXCJBbGxcIilcbiAgICAgIHN0eWxlcyA9IHsnYmFja2dyb3VuZENvbG9yJzoncmdiKDAsIDEyMiwgMjU1KScsICdjb2xvcic6J3doaXRlJ30gXG4gICAgZWxzZVxuICAgICAgc3R5bGVzID0gIHt9XG5cbiAgICBsaXN0cyA9IFtTaWRlTWVudUxpc3RPcHRpb24oe2xpc3Q6IHtuYW1lOiAnQWxsJyxjb3VudDogdGhpcy5wcm9wcy50b3RhbENvdW50fSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uVHlwZTogJ3VzZXJzJywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VMaXN0OiB0aGlzLnByb3BzLmNoYW5nZUxpc3R9KSwgXG4gICAgICAgICAgICAgU2lkZU1lbnVMaXN0T3B0aW9uKHtsaXN0OiB7bmFtZTogJ0FyY2hpdmVkJywgY291bnQ6ICd+J30sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblR5cGU6ICdhcmNoaXZlJywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VMaXN0OiB0aGlzLnByb3BzLmNoYW5nZUxpc3QsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZUNvdW50OiB0cnVlfSldXG5cbiAgICBmb3IoaT0wO2k8IHRoaXMucHJvcHMubGlzdHMubGVuZ3RoO2krKyl7XG4gICAgICBsaXN0ID0gdGhpcy5wcm9wcy5saXN0c1tpXVxuICAgICAgaWYobGlzdC5saXN0X3R5cGUgPT0gXCJzaWduYWxfbGlzdFwiKVxuICAgICAgICBpY29uVHlwZSA9IFwid2lmaVwiXG4gICAgICBlbHNlIGlmIChsaXN0Lmxpc3RfdHlwZSA9PSBcIm1pbmluZ19qb2JcIilcbiAgICAgICAgaWNvblR5cGUgPSBcImNsb3VkRG93bmxvYWRcIlxuICAgICAgaWYobGlzdC5saXN0X3R5cGUpXG4gICAgICAgIGxpc3RzLnB1c2goIFNpZGVNZW51TGlzdE9wdGlvbih7bGlzdDogbGlzdCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvblR5cGU6IGljb25UeXBlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VMaXN0OiB0aGlzLnByb3BzLmNoYW5nZUxpc3R9KSlcbiAgICAgIGVsc2UgXG4gICAgICAgIGxpc3RzLnB1c2goIFNpZGVNZW51TGlzdE9wdGlvbih7bGlzdDogbGlzdCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTGlzdDogdGhpcy5wcm9wcy5jaGFuZ2VMaXN0fSkpXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJjb2wtbGctMiBjb2wtbWQtMiBjb2wtc20tMiBjb2wteHMtMlwiLCBcbiAgICAgICAgICAgc3R5bGU6IHtwYWRkaW5nOicwJyxoZWlnaHQ6JzQzOHB4JyxiYWNrZ3JvdW5kQ29sb3I6JyNlMGU5ZWUnLFxuICAgICAgICAgICAgICAgICAgIGJvcmRlclJpZ2h0OicxcHggc29saWQgI2IwYjhiZicsdGV4dEFsaWduOidjZW50ZXInfX0sIFxuICAgICAgICBSZWFjdC5ET00uZGl2KHtjbGFzc05hbWU6IFwicHJvc3BlY3QtbGlzdC1oZWFkZXJcIn0sIFwiIExpc3RzIFwiKSwgXG4gICAgICAgIFJlYWN0LkRPTS5kaXYoe2NsYXNzTmFtZTogXCJidG4tZ3JvdXAtdmVydGljYWxcIiwgXG4gICAgICAgICAgICAgc3R5bGU6IHt3aWR0aDonMTAwJScsIGhlaWdodDogJzMyMHB4Jywgb3ZlcmZsb3c6ICdhdXRvJ319LCBcbiAgICAgICAgICBsaXN0c1xuICAgICAgICApLCBcbiAgICAgICAgUmVhY3QuRE9NLmJyKG51bGwpLCBSZWFjdC5ET00uYnIobnVsbCksIFxuICAgICAgICBSZWFjdC5ET00uYSh7aHJlZjogXCJqYXZhc2NyaXB0OlwiLCBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5IG5ldy1saXN0LWJ0blwiLCBcbiAgICAgICAgICAgICAgJ2RhdGEtdG9nZ2xlJzogXCJtb2RhbFwiLCAnZGF0YS10YXJnZXQnOiBcIi5icy1leGFtcGxlLW1vZGFsLXNtXCIsIFxuICAgICAgICAgICAgICBzdHlsZTogeyBiYWNrZ3JvdW5kSW1hZ2U6ICdsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCAjMDA5NmZmIDAlLCAjMDA1ZGZmIDEwMCUpJ319LCBcbiAgICAgICAgICBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXBsdXMtY2lyY2xlXCJ9KSwgXCLCoMKgTmV3IExpc3RcIlxuICAgICAgICApLCBcbiAgICAgICAgY3JlYXRlTGlzdE1vZGFsKHtjcmVhdGVMaXN0OiB0aGlzLmNyZWF0ZUxpc3QsIFxuICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RDbGFzc05hbWU6IHRoaXMucHJvcHMubGlzdENsYXNzTmFtZX0pLCBcIiBcIiwgUmVhY3QuRE9NLmJyKG51bGwpXG4gICAgICApXG4gICAgKTtcbiAgfSxcbn0pO1xuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG52YXIgSG9yaXphbnRhbFNwaW5uZXIgPSByZXF1aXJlKCcuL2hvcml6YW50YWxfc3Bpbm5lci5qcy5taW4uanMnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTogJ2V4cG9ydHMnLFxuICAvLyBVc2VyUHJvc3BlY3RcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4geyB9XG4gIH0sXG5cbiAgY2xpY2tDaGVjazogZnVuY3Rpb24oZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBkb21Ob2RlID0gdGhpcy5nZXRET01Ob2RlKClcbiAgICAvL2lzQ2hlY2tlZCA9ICQoJChkb21Ob2RlKS5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKVswXSkucHJvcCgnY2hlY2tlZCcpXG4gICAgaXNDaGVja2VkID0gJCgkKGRvbU5vZGUpLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpWzBdKS5wcm9wKCdjaGVja2VkJylcbiAgICAkKCQodGhpcy5nZXRET01Ob2RlKCkpLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpWzBdKS5jbGljaygpXG4gICAgLy9jb25zb2xlLmxvZyhpc0NoZWNrZWQpXG4gICAgdGhpcy5zZXRTdGF0ZSh7Y2hlY2tlZDogaXNDaGVja2VkfSlcbiAgICB0aGlzLnByb3BzLmNoZWNrYm94QWN0aW9uKGlzQ2hlY2tlZCwgdGhpcy5wcm9wcy5wcm9zcGVjdC5vYmplY3RJZClcbiAgfSxcblxuICByb3dDbGljazogZnVuY3Rpb24oKSB7XG4gICAgJCgkKHRoaXMuZ2V0RE9NTm9kZSgpKS5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKVswXSkuY2xpY2soKVxuICB9LFxuXG4gIGtleWJvYXJkQ2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgICQoJCgnLmtleVNlbGVjdCcpLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpWzBdKS5jbGljaygpXG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkgeyB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAga2V5Ym9hcmRTZWxlY3RlZCA9IHtib3JkZXJMZWZ0Oic3cHggc29saWQgcmdiYSgwLDAsMCwwKSd9XG4gICAgdGhpc3NzcyA9IHRoaXNcbiAgICBpZih0aGlzLnByb3BzLmtleWJvYXJkU2VsZWN0ZWQpIHtcbiAgICAgIC8vIEFkanVzdCBTY3JvbGwgZGVwZW5kaW5nIG9uIHdoZXJlIHRoZSBwcm9zcGVjdCBpc1xuICAgICAga2V5Ym9hcmRTZWxlY3RlZCA9IHtib3JkZXJMZWZ0Oic3cHggc29saWQgIzAwOTZmZiAhaW1wb3J0YW50J31cbiAgICAgIE1vdXNldHJhcC51bmJpbmQoJ3gnKVxuICAgICAgTW91c2V0cmFwLmJpbmQoJ3gnLCBmdW5jdGlvbigpIHsgXG4gICAgICAgIHRoaXNzc3Mua2V5Ym9hcmRDbGljaygpXG4gICAgICAgIGlmKHRoaXNzc3Muc3RhdGUuY2hlY2tlZClcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImxtYW9cIilcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHByb3NwZWN0ID0gdGhpcy5wcm9wcy5wcm9zcGVjdFxuXG4gICAgaWYodGhpcy5wcm9wcy5tYXN0ZXJDaGVja2JveENoZWNrZWQgJiYgdGhpcy5zdGF0ZS5jaGVja2VkKVxuICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICBlbHNlIGlmKHRoaXMucHJvcHMuYWxyZWFkeUNoZWNrZWQpXG4gICAgICBjaGVja2VkID0gdHJ1ZVxuICAgIGVsc2UgaWYodGhpcy5zdGF0ZS5jaGVja2VkKVxuICAgICAgY2hlY2tlZCA9IHRydWVcbiAgICBlbHNlIGlmKHRoaXMucHJvcHMubWFzdGVyQ2hlY2tib3hDaGVja2VkIHx8IHRoaXMuc3RhdGUuY2hlY2tlZClcbiAgICAgIGNoZWNrZWQgPSB0cnVlXG4gICAgZWxzZVxuICAgICAgY2hlY2tlZCA9IGZhbHNlXG5cbiAgICAvL2NvbnNvbGUubG9nKHRoaXMuc3RhdGUuY2hlY2tlZClcbiAgICAvL2NvbnNvbGUubG9nKGNoZWNrZWQpXG4gICAgLy97cHJvc3BlY3QuZW1wbG95ZWVDb3VudFJhbmdlLm5hbWUgKyBcIiBlbXBsb3llZXNcIiB9XG4gICAgXG4gICAgY29sb3IgPSB7fVxuICAgIGlmKHRoaXMuc3RhdGUuY2hlY2tlZCB8fCB0aGlzLnByb3BzLmFscmVhZHlDaGVja2VkKVxuICAgICAgY29sb3IgPSB7YmFja2dyb3VuZENvbG9yOiAnI2VlZjhmZid9XG4gICAgICBcbiAgICByb3dDbCA9ICh0aGlzLnByb3BzLmtleWJvYXJkU2VsZWN0ZWQpID8gXCJwcm9zcGVjdHMtdHIga2V5U2VsZWN0XCIgOiBcInByb3NwZWN0cy10clwiXG4gICAgd2Vic2l0ZUJ0biA9IChwcm9zcGVjdC53ZWJzaXRlVXJsKSA/ICBSZWFjdC5ET00uYSh7aHJlZjogXCJodHRwOi8vXCIrcHJvc3BlY3Qud2Vic2l0ZVVybC5yZXBsYWNlKCdodHRwOi8vJywnJyl9LCBcIiBcIiwgUmVhY3QuRE9NLmkoe2NsYXNzTmFtZTogXCJmYSBmYS1nbG9iZVwifSksIFwiIFwiKSA6IFwiXCJcbiAgICBcbiAgICBwcm9zcGVjdF9lbWFpbCA9IHByb3NwZWN0LmVtYWlsXG4gICAgaWYodHlwZW9mKHByb3NwZWN0LmRvbWFpbikgPT0gXCJ1bmRlZmluZWRcIilcbiAgICAgIHByb3NwZWN0LmVtYWlsID0gXCJ3ZWJzaXRlIG5vdCBmb3VuZFwiXG4gICAgaWYocHJvc3BlY3QuZW1haWwgPT0gXCJub19lbWFpbFwiKSB7XG4gICAgICBpZihwcm9zcGVjdC5lbWFpbF9ndWVzc2VzKSB7XG4gICAgICAgIGd1ZXNzID0gXy5maW5kV2hlcmUocHJvc3BlY3QuZW1haWxfZ3Vlc3Nlcywge3RyaWVkOiBmYWxzZX0pXG4gICAgICAgIG5hbWUgPSB0aGlzLnByb3BzLnByb3NwZWN0Lm5hbWVcblxuICAgICAgICB2YXJzID0ge1xuICAgICAgICAgIGZpcnN0OiBfLmZpcnN0KG5hbWUuc3BsaXQoJyAnKSksXG4gICAgICAgICAgbGFzdDogXy5sYXN0KG5hbWUuc3BsaXQoJyAnKSksXG4gICAgICAgICAgZmk6IF8uZmlyc3QobmFtZS5zcGxpdCgnICcpKVswXSxcbiAgICAgICAgICBsaTogXy5sYXN0KG5hbWUuc3BsaXQoJyAnKSlbMF1cbiAgICAgICAgfVxuICAgICAgICBpZihndWVzcyl7XG4gICAgICAgICAgcHJvc3BlY3RfZW1haWwgPSBNdXN0YWNoZS5yZW5kZXIoZ3Vlc3MucGF0dGVybi5wYXR0ZXJuLCB2YXJzKVxuICAgICAgICAgIHByb3NwZWN0X2VtYWlsID0gcHJvc3BlY3RfZW1haWwrXCJAXCIrcHJvc3BlY3QuZG9tYWluXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcHJvc3BlY3RfZW1haWwgPSAocHJvc3BlY3RfZW1haWwpID8gcHJvc3BlY3RfZW1haWwudG9Mb3dlckNhc2UoKSA6IFwiXCJcbiAgICBwcm9zcGVjdF9lbWFpbCA9IFJlYWN0LkRPTS5hKHtocmVmOiBcIm1haWx0bzpcIitwcm9zcGVjdF9lbWFpbCwgc3R5bGU6IHttYXJnaW46JzBweCd9fSwgXCIgXCIsIHByb3NwZWN0X2VtYWlsLCBcIiBcIilcbiAgICBjb21wYW55X3NpemUgPSAocHJvc3BlY3QuY29tcGFueV9zaXplKSA/IHByb3NwZWN0LmNvbXBhbnlfc2l6ZSA6IFwiXCJcblxuICAgIGlmKHRoaXMucHJvcHMucHJvc3BlY3QubG9hZGluZylcbiAgICAgIHByb3NwZWN0X2VtYWlsID0gSG9yaXphbnRhbFNwaW5uZXIobnVsbClcbiAgICBpZih0aGlzLnByb3BzLnByb3NwZWN0LmxvYWRpbmcpXG4gICAgICBjb21wYW55X3NpemUgPSBIb3JpemFudGFsU3Bpbm5lcihudWxsKVxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5ET00udHIoe2NsYXNzTmFtZTogcm93Q2wsIFxuICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucm93Q2xpY2ssIFxuICAgICAgICAgIHN0eWxlOiBrZXlib2FyZFNlbGVjdGVkfSwgXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3J9LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCIsIFxuICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuY2xpY2tDaGVjaywgXG4gICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBjaGVja2VkfSlcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiBjb2xvciwgXG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmaXhlZC1kYXRhLWNvbHVtblwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJ319LCBwcm9zcGVjdC5uYW1lKSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uaDYoe3N0eWxlOiB7Zm9udFdlaWdodDonNDAwJyxtYXJnaW46JzBweCd9fSwgXG4gICAgICAgICAgICAgIChwcm9zcGVjdC5wb3MpID8gcHJvc3BlY3QucG9zLnRyaW0oKSA6IFwiXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiBjb2xvciwgXG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJmaXhlZC1kYXRhLWNvbHVtblwifSwgXG4gICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IHtmb250V2VpZ2h0Oidib2xkJ319LCBcbiAgICAgICAgICAgICAgcHJvc3BlY3QuY29tcGFueV9uYW1lXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtmb250V2VpZ2h0Oic0MDAnLG1hcmdpbjonMHB4J30sIGNsYXNzTmFtZTogXCJjb21wYW55LXNpemVcIn0sIFxuICAgICAgICAgICAgY29tcGFueV9zaXplXG4gICAgICAgICAgICApLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHtmb250V2VpZ2h0Oic0MDAnLG1hcmdpbjonMHB4JyxkaXNwbGF5Oidub25lJyxmb250U3R5bGU6J2l0YWxpYyd9LCBjbGFzc05hbWU6IFwiY29tcGFueS1zaXplXCJ9LCBcbiAgICAgICAgICAgICAgKHByb3NwZWN0LmluZHVzdHJ5KSA/IHByb3NwZWN0LmluZHVzdHJ5IDogXCJcIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICksIFxuXG4gICAgICAgICAgUmVhY3QuRE9NLnRkKHtzdHlsZTogY29sb3J9LCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5oNih7c3R5bGU6IHttYXJnaW46JzBweCd9fSwgcHJvc3BlY3QuY2l0eSkpLCBcbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiBjb2xvcn0sIFxuICAgICAgICAgICAgcHJvc3BlY3RfZW1haWxcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiBjb2xvcn0sIFxuICAgICAgICAgICAgUmVhY3QuRE9NLmRpdih7c3R5bGU6IHt3aWR0aDo1MX19LCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLmEoe29uQ2xpY2s6IHRoaXMub3BlblNpbWlsYXJzLCBcbiAgICAgICAgICAgICAgICBocmVmOiBcImphdmFzY3JpcHQ6XCIsIFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4gYnRuLXhzIGJ0bi1wcmltYXJ5IGJ0bi1ncmFkaWVudCBzaW1pbGFyX2xpbmtcIn0sIFxuICAgICAgICAgICAgICAgIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtY29weVwiLCBzdHlsZToge2ZvbnRXZWlnaHQ6J2JvbGQnfX0pKSwgXCLCoFwiLCBcbiAgICAgICAgICAgIFJlYWN0LkRPTS5hKHtocmVmOiB0aGlzLnByb3BzLmxpUHJvZmlsZSwgY2xhc3NOYW1lOiBcImJ0biBidG4teHMgYnRuLXByaW1hcnkgYnRuLWdyYWRpZW50IGxpbmtlZGluX2xpbmtcIn0sIFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtbGlua2VkaW4tc3F1YXJlXCJ9KSksIFxuICAgICAgICAgICAgXCLCoFwiLCB0aGlzLnByb3BzLmxpbmtcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLCBcbiAgICAgICAgICBSZWFjdC5ET00udGQoe3N0eWxlOiBjb2xvcn0sIFxuICAgICAgICAgICAgd2Vic2l0ZUJ0blxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICk7XG4gIH0sXG5cbiAgb3BlblNpbWlsYXJzOiBmdW5jdGlvbihlKSB7XG4gICAgaWYodGhpcy5wcm9wcy5saVByb2ZpbGUuaW5kZXhPZigncHJvZmlsZScpICE9IC0xKXtcbiAgICAgIHVybGFyZ3MgPSB0aGlzLnByb3BzLmxpUHJvZmlsZS5zcGxpdCgnPycpWzFdLnNwbGl0KCcmJylcbiAgICAgIGFyZ3MgPSBbXVxuICAgICAgZm9yKGk9MDtpPCB1cmxhcmdzLmxlbmd0aDsgaSsrKVxuICAgICAgICBhcmdzLnB1c2godXJsYXJnc1tpXS5zcGxpdCgnPScpKVxuICAgICAgYXJncyA9IF8ub2JqZWN0KGFyZ3MpXG4gICAgfVxuICAgIHdpbmRvdy5vcGVuKFwiaHR0cHM6Ly93d3cubGlua2VkaW4uY29tL3ZzZWFyY2gvcD9waXZvdFR5cGU9c2ltJnBpZD1cIithcmdzLmlkKVxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgfSxcblxuICBvcGVuTGlua2VkaW5Qcm9maWxlOiBmdW5jdGlvbihlKSB7XG4gICAgaWQgPSB0aGlzLnN0YXRlLmxpbmtlZGluX2lkXG4gICAgd2luZG93Lm9wZW4oXCJodHRwczovL3d3dy5saW5rZWRpbi5jb20vdnNlYXJjaC9wP3Bpdm90VHlwZT1zaW0mcGlkPVwiK2lkKVxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgfSxcblxuICBkZWxldGVQcm9zcGVjdDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcm9wcy5kZWxldGVQcm9zcGVjdCh0aGlzLnByb3BzLnByb3NwZWN0Lm9iamVjdElkLCAnUHJvc3BlY3QnKVxuICB9XG59KTtcblxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOiAnZXhwb3J0cycsXG4gIGNoZWNrYm94QWN0aW9uOiBmdW5jdGlvbihlKSB7XG4gICAgY2hlY2tib3hWYWwgPSAkKGUudGFyZ2V0KS5pcygnOmNoZWNrZWQnKVxuICAgIGNoZWNrYm94ZXMgPSBfLnJlc3QoJCgnYm9keScpLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpKVxuICAgIGNvbnNvbGUubG9nKGNoZWNrYm94ZXMpXG4gICAgaWYoY2hlY2tib3hWYWwpe1xuICAgICAgXy5tYXAoY2hlY2tib3hlcywgZnVuY3Rpb24oY2hlY2tib3gpe1xuICAgICAgICBpZighJChjaGVja2JveCkucHJvcCgnY2hlY2tlZCcpKVxuICAgICAgICAgICQoY2hlY2tib3gpLmNsaWNrKClcbiAgICAgIH0pXG4gICAgICBcbiAgICB9IGVsc2Uge1xuICAgICAgXy5tYXAoY2hlY2tib3hlcywgZnVuY3Rpb24oY2hlY2tib3gpe1xuICAgICAgICBpZigkKGNoZWNrYm94KS5wcm9wKCdjaGVja2VkJykpXG4gICAgICAgICAgJChjaGVja2JveCkuY2xpY2soKVxuICAgICAgfSlcbiAgICB9XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuXG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICAgICAgUmVhY3QuRE9NLnRyKG51bGwsIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGgoe3N0eWxlOiB7cGFkZGluZ0xlZnQ6MTF9fSwgXG4gICAgICAgICAgICAgICAgUmVhY3QuRE9NLmlucHV0KHt0eXBlOiBcImNoZWNrYm94XCIsIG9uQ2hhbmdlOiB0aGlzLmNoZWNrYm94QWN0aW9ufSlcbiAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIk5hbWVcIiksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCJDb21wYW55XCIpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKHtzdHlsZToge3dpZHRoOicxNzBweCd9fSwgXCJDaXR5XCIpLCBcbiAgICAgICAgICAgICAgUmVhY3QuRE9NLnRoKG51bGwsIFwiRW1haWxcIiksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00udGgobnVsbCwgXCLCoFwiKSwgXG4gICAgICAgICAgICAgIFJlYWN0LkRPTS50aChudWxsLCBcIsKgXCIpXG4gICAgICAgICAgICApXG4gICAgKTtcbiAgfVxufSk7XG4iLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6ICdleHBvcnRzJyxcbiAgLy9TaWRlTWVudUxpc3RPcHRpb25cbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge2NvdW50OiAnfid9XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIC8vIG1ha2UgYWpheCByZXF1ZXN0IHRvIGdldCBlYWNoIHJlcXVlc3RzIFxuICAgIC8qXG4gICAgbGlzdCA9IHtcbiAgICAgICdfX3R5cGUnICAgIDogJ1BvaW50ZXInLFxuICAgICAgJ29iamVjdElkJyAgOiB0aGlzLnByb3BzLmxpc3Qub2JqZWN0SWQsXG4gICAgICAnY2xhc3NOYW1lJyA6ICdQcm9zcGVjdExpc3QnLCBcbiAgICB9XG5cbiAgICBwYXJzZV9oZWFkZXJzID0ge1xuICAgICAgJ1gtUGFyc2UtQXBwbGljYXRpb24tSWQnICA6ICdOODVRT2t0ZUVFUWt1WlZKS0F2dDhNVmVzMHNqRzZxTnBFR3FRRlZKJywgXG4gICAgICAnWC1QYXJzZS1SRVNULUFQSS1LZXknICAgIDogJ1ZONkV3VnlCWndPMXVwaHNCUHNhdTh0N0pRUnAwMFVNM0tZc2lpUWInLFxuICAgIH1cblxuICAgIHRoaXNzID0gdGhpcztcblxuICAgIC8vY29uc29sZS5sb2codGhpcy5wcm9wcy5saXN0Lm5hbWUpXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cHM6Ly9hcGkucGFyc2UuY29tLzEvY2xhc3Nlcy9Qcm9zcGVjdHMnLFxuICAgICAgdHlwZTonR0VUJyxcbiAgICAgIGhlYWRlcnM6cGFyc2VfaGVhZGVycyxcbiAgICAgIGRhdGE6ICd3aGVyZT17XCJsaXN0c1wiOicrSlNPTi5zdHJpbmdpZnkobGlzdCkrJ30mY291bnQ9MScsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgdGhpc3Muc2V0U3RhdGUoe2NvdW50OiByZXMuY291bnR9KVxuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgIH0pXG4gICAgKi9cbiAgfSxcblxuICBjaGFuZ2VMaXN0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnByb3BzLmNoYW5nZUxpc3QodGhpcy5wcm9wcy5saXN0Lm5hbWUsIHRoaXMucHJvcHMubGlzdC5vYmplY3RJZClcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIGxpc3ROYW1lID0gdGhpcy5wcm9wcy5saXN0Lm5hbWVcbiAgICBwcm9wc0NvdW50ID0gdGhpcy5wcm9wcy5jb3VudFxuICAgIGNvdW50ID0gKHR5cGVvZihwcm9wc0NvdW50KT09IFwidW5kZWZpbmVkXCIpID8gdGhpcy5zdGF0ZS5jb3VudCA6IHByb3BzQ291bnRcblxuICAgIC8vY29uc29sZS5sb2codGhpcy5wcm9wcy5pY29uVHlwZSlcbiAgICBpY29uID0gXCJcIlxuICAgIGlmKHRoaXMucHJvcHMuaWNvblR5cGUgPT0gXCJhcmNoaXZlXCIpe1xuICAgICAgaWNvbiA9IFJlYWN0LkRPTS5pKHtjbGFzc05hbWU6IFwiZmEgZmEtYXJjaGl2ZVwiLCBzdHlsZToge2Zsb2F0OidsZWZ0JyxsaW5lSGVpZ2h0OjEuNSxtYXJnaW5SaWdodDo1fX0pXG4gICAgfSBlbHNlIGlmKHRoaXMucHJvcHMuaWNvblR5cGUgPT0gXCJ1c2Vyc1wiKXtcbiAgICAgIGljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXVzZXJcIiwgc3R5bGU6IHtmbG9hdDonbGVmdCcsbGluZUhlaWdodDoxLjUsbWFyZ2luUmlnaHQ6NX19KVxuICAgIH0gZWxzZSBpZih0aGlzLnByb3BzLmljb25UeXBlID09IFwid2lmaVwiKXtcbiAgICAgIGljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLXdpZmlcIiwgc3R5bGU6IHtmbG9hdDonbGVmdCcsbGluZUhlaWdodDoxLjUsbWFyZ2luUmlnaHQ6NX19KVxuICAgIH0gZWxzZSBpZih0aGlzLnByb3BzLmljb25UeXBlID09IFwiY2xvdWREb3dubG9hZFwiKXtcbiAgICAgIGljb24gPSBSZWFjdC5ET00uaSh7Y2xhc3NOYW1lOiBcImZhIGZhLWNsb3VkLWRvd25sb2FkXCIsIHN0eWxlOiB7ZmxvYXQ6J2xlZnQnLGxpbmVIZWlnaHQ6MS41LG1hcmdpblJpZ2h0OjV9fSlcbiAgICB9XG5cblxuICAgIGNvdW50U3R5bGUgPSAodGhpcy5wcm9wcy5oaWRlQ291bnQpID8geydkaXNwbGF5Jzonbm9uZSd9IDoge2JhY2tncm91bmRDb2xvcjonIzk5OScsZmxvYXQ6J3JpZ2h0JyxtYXJnaW5Ub3A6Mi4yNX1cbiAgICBsaXN0U3R5bGU9KGljb24gPT0gXCJcIikgPyBcImxpc3QtbmFtZVwiIDogXCJpY29uLWxpc3QtbmFtZVwiXG4gICAgaWYodGhpcy5wcm9wcy5pY29uVHlwZSA9PSBcInVzZXJzXCIpXG4gICAgICBsaXN0U3R5bGUgPSBcImFsbC1saXN0LW5hbWVcIiBcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuRE9NLmJ1dHRvbih7dHlwZTogXCJidXR0b25cIiwgXG4gICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuY2hhbmdlTGlzdCwgXG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJsaXN0LW5hbWVzIGJ0biBidG4tZGVmYXVsdFwifSwgXG4gICAgICAgICAgICAgIGljb24sIFxuICAgICAgICAgICAgICBcIsKgXCIsIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7Y2xhc3NOYW1lOiBsaXN0U3R5bGV9LCBsaXN0TmFtZSksIFxuICAgICAgICAgICAgICBSZWFjdC5ET00uc3Bhbih7c3R5bGU6IGNvdW50U3R5bGUsIFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJiYWRnZSBiYWRnZS1kZWZhdWx0XCJ9LCB0aGlzLnByb3BzLmxpc3QuY291bnQpXG4gICAgICApXG4gICAgKTtcbiAgfVxufSk7XG5cbiJdfQ==
